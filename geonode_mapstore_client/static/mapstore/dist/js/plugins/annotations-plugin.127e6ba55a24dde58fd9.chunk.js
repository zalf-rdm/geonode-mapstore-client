/*! For license information please see annotations-plugin.127e6ba55a24dde58fd9.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[76759],{921914:(e,t,n)=>{"use strict";n.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>l,Pn:()=>u,DZ:()=>c,e8:()=>s,E0:()=>f,F9:()=>d,X_:()=>p,pb:()=>m,Re:()=>y,ih:()=>v,xy:()=>b,jL:()=>g,oz:()=>h,ph:()=>E,lF:()=>O,gG:()=>S,cb:()=>w,GI:()=>P,B1:()=>j,fv:()=>T,gc:()=>I,zX:()=>C,ZF:()=>A,Zb:()=>N,DW:()=>k,Xp:()=>D,Fm:()=>L,sV:()=>_,LU:()=>R,XP:()=>x,WU:()=>F,mK:()=>M,g:()=>Z,ws:()=>G,HP:()=>B,aN:()=>z,Pg:()=>Y,u0:()=>H,TM:()=>V,PM:()=>q,lK:()=>K,sv:()=>W,MO:()=>$,oO:()=>J,Mc:()=>X,Zw:()=>Q,RA:()=>ee,am:()=>te,ZM:()=>ne,wm:()=>re,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var r=n(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",c="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",f="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",p="SHOW_REVERSE_GEOCODE",m="HIDE_REVERSE_GEOCODE",y="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",b="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",E="TOGGLE_MAPINFO_STATE",O="UPDATE_CENTER_TO_MARKER",S="IDENTIFY:CHANGE_PAGE",w="IDENTIFY:CLOSE_IDENTIFY",P="IDENTIFY:CHANGE_FORMAT",j="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",T="IDENTIFY:EDIT_LAYER_FEATURES",I="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",C="IDENTIFY:SET_MAP_TRIGGER",A="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",N="IDENTIFY:SET_SHOW_IN_MAP_POPUP",k="IDENTIFY:IDENTIFY_IS_MOUNTED",D="IDENTIFY:INIT_PLUGIN";function L(e,t,n,r,i){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:i}}function _(e,t,n,r){return{type:i,error:t,reqId:e,requestParams:n,layerMetadata:r}}function R(){return{type:y}}function x(){return{type:v}}function F(e,t){return{type:u,reqId:e,request:t}}function M(e){return{type:l,enabled:e}}function Z(){return{type:c}}function G(e){return{type:s,infoFormat:e}}function B(){return{type:f}}function z(){return{type:d}}function U(e){return{type:p,reverseGeocodeData:e.data}}function Y(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(U(e))})).catch((function(e){t(U(e))}))}}function H(){return{type:m}}function V(){return{type:E}}function q(e){return{type:O,status:e}}function K(e,t){return{type:b,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function W(e){return{type:g,point:e}}function $(e){return{type:h,enabled:e}}function J(e){return{type:S,index:e}}var X=function(){return{type:w}},Q=function(e){return{type:P,format:e}},ee=function(e){return{type:j,showCoordinateEditor:e}},te=function(e){return{type:T,layer:e}},ne=function(e){return{type:I,query:e}},re=function(e){return{type:C,trigger:e}},oe=function(e){return{type:N,value:e}},ie=function(e){return{type:k,isMounted:e}},ae=function(e){return{type:D,cfg:e}}},710615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),l=n(480681),u=n(807654),c=n.n(u),s=n(414293),f=n.n(s),d=n(743129),p=n(993451),m=n(80717),y=n(145869),v=n(680833),b=n(805346),g=n(552259),h=["labelId"];function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=(0,p.Z)(["placeholder","noResultsText"])(d.ZP.Creatable),C=(0,p.Z)(["placeholder","noResultsText"])(d.ZP);function A(e){var t,n=e.label,r=e.showArrow,i=e.limitsType;return o().createElement("span",null,(t=n,"scale"===i?"1 : "+Math.round(t):t),r&&o().createElement(o().Fragment,null," ",o().createElement(l.gG,{glyph:"arrow-left"})))}function N(e){var t=e.id,n=e.value,r=e.placeholderId,i=e.noResultsTextId,a=e.createTextId,l=e.options,u=e.isValidNewOption,s=void 0===u?function(){return!0}:u,f=e.onChange,d=void 0===f?function(){}:f,p=e.disabled,m=e.loading;return o().createElement(I,{inputProps:{id:t},placeholder:r,noResultsText:i,value:n,isLoading:m,options:l,disabled:p,optionRenderer:A,valueRenderer:A,promptTextCreator:function(e){return o().createElement(b.Z,{msgId:a,msgParams:{label:e}})},isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!c()(t)&&s(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);d(c()(t)?void 0:j(j({},e),{},{value:t}))}})}function k(e){var t=e.title,n=e.layer,i=e.zoom,a=e.projection,u=e.resolutions,c=void 0===u?(0,g.MR)():u,s=e.defaultLimitsType,d=e.limitsTypesOptions,p=e.dpi,E=e.onChange,P=Math.round(i||0),T=O((0,r.useState)(s||d[0].value),2),I=T[0],A=T[1],k=n.maxResolution,D=n.minResolution,L=n.disableResolutionLimits,_=(0,g.Vj)(p,a);function R(e,t){var n,r=e.map((function(e){return e[I]}));return f()(t[I])||-1!==r.indexOf(t[I])?e:[t].concat((n=e,function(e){if(Array.isArray(e))return w(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||S(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e[I]>t[I]?-1:1}))}function x(e,t){return(0,g.ed)(e,t,{projection:a,resolutions:c})}var F=O((0,r.useState)([]),2),M=F[0],Z=F[1],G=O((0,r.useState)(k&&{resolution:k,scale:k*_,zoom:(0,g.Pl)(k,c)}),2),B=G[0],z=G[1],U=O((0,r.useState)(D&&{resolution:D,scale:D*_,zoom:(0,g.Pl)(D,c)}),2),Y=U[0],H=U[1],V=O((0,r.useState)(!1),2),q=V[0],K=V[1],W=O((0,r.useState)(),2),$=W[0],J=W[1],X=O((0,r.useState)(),2),Q=X[0],ee=X[1],te=(0,r.useRef)();function ne(){ee(void 0),J(void 0)}(0,r.useEffect)((function(){return te.current=!0,function(){te.current=!1}}),[]);var re=c.join(",");return(0,r.useEffect)((function(){var e=D&&{resolution:D,scale:D*_,zoom:(0,g.Pl)(D,c)},t=k&&{resolution:k,scale:k*_,zoom:(0,g.Pl)(k,c)},n=[e,t].filter((function(e){return e})).reduce(R,c.map((function(e,t){return{resolution:e,scale:e*_,zoom:t}})));z(t),H(e),Z(n),ne()}),[_,re]),o().createElement("div",{className:"ms-visibility-limits-form"},o().createElement("div",{className:"ms-visibility-limits-form-title",style:{display:"flex",alignItems:"center"}},o().createElement("div",{style:{flex:1}},t),o().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"refresh",disabled:!(!L&&!q),visible:"wms"===n.type,onClick:function(){"wms"!==n.type||q||(K(!0),ne(),(0,v.kB)(n).toPromise().then((function(e){if(te.current){var t,n,r=e.MaxScaleDenominator,o=e.MinScaleDenominator,i=!f()(r)&&x(r,"scale"),a=!f()(o)&&x(o,"scale");(function(e,t){var n,r,o=(n=e,r=t,f()(n)&&f()(r)?"layerProperties.visibilityLimits.serverValuesUpdateUndefined":f()(n)&&!f()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMinScale":!f()(n)&&f()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMaxScale":"layerProperties.visibilityLimits.serverValuesUpdate");J(o)})(r,o),a&&H(a),i&&z(i),E(j(j({},i&&{maxResolution:i.resolution}),a&&{minResolution:a.resolution}));var l=(null===(t=a||Y)||void 0===t?void 0:t.resolution)||-1/0;((null===(n=i||B)||void 0===n?void 0:n.resolution)||1/0)<l&&ee("layerProperties.visibilityLimits.rangeError"),K(!1)}})).catch((function(){te.current&&(K(!1),ee("layerProperties.visibilityLimits.serverValuesError"))})))},tooltipId:"layerProperties.visibilityLimits.updateWMSCapabilities"},{Element:function(){return o().createElement(y.Z,{checked:!L,onClick:function(){E({disableResolutionLimits:!L}),ne()}})}}]})),o().createElement("label",{htmlFor:"ms-visibility-limits-max"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.maxValue"})),o().createElement(N,{id:"ms-visibility-limits-max",value:(null==B?void 0:B[I])&&{value:B[I],label:B[I],zoom:B.zoom,limitsType:I},placeholderId:"layerProperties.visibilityLimits.maxValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:q,isValidNewOption:function(e){return e>=((null==Y?void 0:Y[I])||0)},options:M.map((function(e){return j(j({},e),{},{value:e[I]+(e.delta||0),label:e[I],showArrow:e.zoom===P,disabled:!f()(null==Y?void 0:Y[I])&&e[I]<=Y[I],limitsType:I})})),disabled:L||q,onChange:function(e){var t=void 0===e.value?{}:f()(e.zoom)?x(e.value,I):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(E({maxResolution:t.resolution}),z(t),void 0!==e.value&&f()(e.zoom)){var n=R(M,t);Z(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-min"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.minValue"})),o().createElement(N,{id:"ms-visibility-limits-min",value:(null==Y?void 0:Y[I])&&{value:Y[I],label:Y[I],zoom:Y.zoom,limitsType:I},placeholderId:"layerProperties.visibilityLimits.minValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:q,isValidNewOption:function(e){return e<=((null==B?void 0:B[I])||1/0)},options:M.map((function(e){return j(j({},e),{},{value:e[I],label:e[I],showArrow:e.zoom===P,disabled:!f()(null==B?void 0:B[I])&&e[I]>=B[I],limitsType:I})})),disabled:L||q,onChange:function(e){var t=void 0===e.value?{}:f()(e.zoom)?x(e.value,I):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(E({minResolution:t.resolution}),H(t),void 0!==e.value&&f()(e.zoom)){var n=R(M,t);Z(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-type"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.type"})),o().createElement(C,{inputProps:{id:"ms-visibility-limits-type"},value:I,clearable:!1,options:d.map((function(e){var t=e.labelId;return j(j({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,h)),t&&{label:o().createElement(b.Z,{msgId:t})})})),disabled:L||q,onChange:function(e){var t=e.value;A(t),ne()}}),$&&o().createElement(l.bZ,{bsStyle:"success"},o().createElement(b.Z,{msgId:$})),Q&&o().createElement(l.bZ,{bsStyle:"danger"},o().createElement(b.Z,{msgId:Q})))}k.propTypes={layer:a().object,zoom:a().number,onChange:a().func,resolutions:a().array,limitsTypesOptions:a().array,projection:a().string,dpi:a().number,defaultLimitsType:a().string},k.defaultProps={layer:{},onChange:function(){},limitsTypesOptions:[{value:"scale",labelId:"layerProperties.visibilityLimits.scale"},{value:"resolution",labelId:"layerProperties.visibilityLimits.resolution"}],dpi:g.$v};const D=k},779195:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(124852),o=n.n(r),i=(n(707169),n(967134)),a=n(74998),l=n.n(a),u=n(192579),c=["wrapperClassName","toolbarOptions"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const f=function(e){var t=e.wrapperClassName,n=void 0===t?"ms-compact-text-editor":t,r=e.toolbarOptions,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return o().createElement(i.Editor,s({},a,{editorStyle:{minHeight:200},wrapperClassName:n,toolbar:{options:r||["fontFamily","blockType","inline","textAlign","list","link","colorPicker","remove","image","embedded"],image:{urlEnabled:!0,uploadEnabled:a.uploadEnabled||!1,alignmentEnabled:!1,uploadCallback:function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){var e,n;(e=r.result,n={size:500,type:"image/jpeg",quality:.8},new Promise((function(t,r){var o=n||{},i=o.size,a=o.type,l=void 0===a?"image/png":a,u=o.quality,c=void 0===u?.9:u,s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=s.naturalWidth,n=s.naturalHeight,r=i,o=i/(e/n),a=document.createElement("canvas");a.setAttribute("width",r),a.setAttribute("height",o),a.getContext("2d").drawImage(s,0,0,r,o);var u=a.toDataURL(l,c);t(u)},s.onerror=function(e){r(e)},s.src=e}))).then((function(e){t({data:{link:e}})}))})),e?r.readAsDataURL(e):n()}))},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:a.alt||{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"100%"}},fontFamily:{options:a.fonts||u.Km},link:{inDropdown:!1,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"]},inline:{inDropdown:!0,options:["bold","italic","underline","strikethrough","monospace"]},textAlign:{inDropdown:!0},list:{inDropdown:!0},embedded:{embedCallback:function(e){var t=/<iframe.*? src="(.*?)"/.exec(l()(e));return t&&t[1]||e},defaultSize:{height:"auto",width:"100%"}}}}))}},501262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(727418),o=n.n(r),i=n(45697),a=n.n(i),l=n(124852),u=n.n(l),c=n(180307),s=n.n(c),f=n(480681),d=n(38560),p=n(805346),m=n(807472);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function b(e,t,n){return t=h(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return O(e=b(this,t,[].concat(r)),"setConfirmRef",(function(t){return e.confirm=t,e.confirm})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.focusConfirm&&s().findDOMNode(this.confirm).focus()}},{key:"render",value:function(){return u().createElement(m.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:o()({},this.props.style,{display:this.props.show?"block":"none"})},u().createElement("span",{role:"header"},u().createElement("span",{className:"user-panel-title"},this.props.title),u().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?u().createElement(f.gG,{glyph:this.props.closeGlyph}):u().createElement("span",null,"×"))),u().createElement("div",{role:"body"},this.props.children),u().createElement("div",{role:"footer"},u().createElement(f.hE,null,u().createElement(d.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),u().createElement(d.Z,{onClick:this.props.onClose},this.props.closeText))))}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u().Component);O(w,"propTypes",{show:a().bool,draggable:a().bool,onClose:a().func,onConfirm:a().func,onSave:a().func,modal:a().bool,closeGlyph:a().string,style:a().object,buttonSize:a().string,inputStyle:a().object,title:a().node,confirmButtonContent:a().node,confirmButtonDisabled:a().bool,closeText:a().node,confirmButtonBSStyle:a().string,focusConfirm:a().bool}),O(w,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:u().createElement(p.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:u().createElement(p.Z,{msgId:"confirm"})||"Confirm",closeText:u().createElement(p.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const P=w},943457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Nt});var r=n(322843),o=n(49977),i=n.n(o),a=n(423570),l=n.n(a),u=n(178598),c=n(782904),s=n(580416),f=n(197395),d=n(921914),p=n(14281),m=n(900012),y=n(902054),v=n(800827),b=n(675110);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const P={loadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(p.Bm).switchMap((function(e){var t,r=e.features,o=e.override,a=(0,y.Yu)(n());if(!o){var l,u=a.map((function(e){return e.id}));return(l=i().Observable).of.apply(l,S(r.map((function(e){return u.includes(e.id)?(0,s.tV)(e.id,"layer",{title:e.title,description:e.description,style:e.style,features:e.features}):(0,s.A4)(e)}))))}return(t=i().Observable).of.apply(t,S(a.map((function(e){return(0,s.$o)(e.id)}))).concat(S(r.map((function(e){return(0,s.A4)(e)})))))}))},newAnnotationEpic:function(e){return e.ofType(p.CD).switchMap((function(){var e={id:(0,m.t1)(l()()),title:"New annotations",type:"vector",features:[],style:{},visibility:!0,rowViewer:m.jB};return i().Observable.of((0,d.aN)(),(0,s.A4)(e),(0,s.UG)(e.id,"layer"),(0,c.Xg)(m.jB,"enabled",!0))}))},editAnnotationEpic:function(e,t){var n=t.getState;return e.ofType(p.A1).switchMap((function(e){var t,r=(0,b.Iz)(n());return(t=i().Observable).of.apply(t,[(0,d.aN)()].concat(S((null==r?void 0:r.id)!==(null==e?void 0:e.id)?[(0,s.UG)(e.id,"layer")]:[]),[(0,c.Xg)(m.jB,"enabled",!0)]))}))},downloadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(p.HN).switchMap((function(e){var t=e.annotations;try{var r=(0,m.rE)(t),o=(0,v.Zs)(n());return(0,u.saveAs)(new Blob([JSON.stringify(r)],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||m.jB,".json")),i().Observable.empty()}catch(e){return i().Observable.of((0,f.vU)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}}))},confirmCloseAnnotationsEpic:function(e){return e.ofType(p.bI).switchMap((function(e){var t,n=e.layer;return i().Observable.of((0,c.Xg)(m.jB,"enabled",!1),null!=n&&null!==(t=n.features)&&void 0!==t&&t.length?(0,s.tV)(n.id,"layer",{invalidFeatures:null}):(0,s.$o)(n.id))}))},removeAnnotationsEpic:function(e){return e.ofType(p.DX).switchMap((function(e){return i().Observable.of((0,d.g)(),(0,d.Mc)(),(0,s.$o)(e.id))}))},mergeAnnotationsFeaturesEpic:function(e,t){var n=t.getState;return e.ofType(p.QN).switchMap((function(e){var t,r=e.annotation,o=function(e){var t,n,o,i,a,l;return{features:[].concat(S((null==e?void 0:e.features)||[]),S((null==r?void 0:r.features)||[])),style:E(E(E({},null==r?void 0:r.style),null==e?void 0:e.style),{},{body:E(E(E({},null==r||null===(t=r.style)||void 0===t?void 0:t.body),null==e||null===(n=e.style)||void 0===n?void 0:n.body),{},{rules:[].concat(S((null==e||null===(o=e.style)||void 0===o||null===(i=o.body)||void 0===i?void 0:i.rules)||[]),S((null==r||null===(a=r.style)||void 0===a||null===(l=a.body)||void 0===l?void 0:l.rules)||[]))})})}},a=n(),u=(0,b.CA)(a,e.id),c=(0,y.Gu)(a);return(t=i().Observable).of.apply(t,S(c?[(0,p.x$)(o(c))]:[]).concat([(0,s.tV)(u.id,"layer",E({_v_:l()()},o(u)))]))}))}};var j=n(79267),T=n(124852),I=n.n(T),C=n(180307),A=n(171703),N=n(22222),k=n(717621),D=n.n(k),L=n(801550),_=n(607147),R=n(93152),x=n(480681),F=n(21090),M=n(813292),Z=n.n(M),G=n(406557),B=n.n(G),z=n(771061),U=n(898631),Y=n(38560),H=n(815135),V=n(50993),q=n(45697),K=n.n(q),W=n(260024);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(null,arguments)}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ee(e,t,n){return t=ne(t),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,te()?Reflect.construct(t,n||[],ne(e).constructor):t.apply(e,n))}function te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(te=function(){return!!e})()}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function oe(e,t,n){return(t=ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}var ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return I().createElement(W.Z,J({},this.props.options,{items:[],isDraggable:!0,enableHeightField:this.props.enableHeightField,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,m.OQ)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onValidateFeature:this.props.onValidateFeature,onChange:function(t,n,r,o){var i=t.map((function(e){return[e.lon,e.lat].concat(function(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(void 0!==e.height?[e.height]:[]))}));e.props.onChange(i,n,r,o),e.props.onValidateFeature()}}))}}])&&Q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(I().Component);oe(ae,"propTypes",{components:K().array,options:K().object,onRemove:K().func,onChange:K().func,transitionProps:K().object,selected:K().object,featureType:K().string,format:K().string,mapProjection:K().string,onComplete:K().func,onHighlightPoint:K().func,onChangeFormat:K().func,onChangeRadius:K().func,onSetInvalidSelected:K().func,aeronauticalOptions:K().object,onChangeText:K().func,renderer:K().string,onValidateFeature:K().func,enableHeightField:K().bool}),oe(ae,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},onValidateFeature:function(){},enableHeightField:!1});const le=ae;var ue=n(805346),ce=n(73532),se=n(868195);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){if(e){if("string"==typeof e)return me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=(0,H.Z)(Y.Z),he="UPDATE_ANNOTATIONS_FEATURES",Ee="UNDO_ANNOTATIONS_FEATURES",Oe="REDO_ANNOTATIONS_FEATURES",Se=be({},he,(function(e,t){return t(e)})),we=(0,F.ZP)((function(e,t){return(Se[t.type]||B())(e,t.callback)}),{limit:20,undoType:Ee,redoType:Oe,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),Pe={};const je=(0,se.injectIntl)((function(e){var t,n,r,o,i,a,u,c,s,f,d,p,y,v,b=e.selectedId,g=e.value,h=e.mapType,E=e.map,O=e.maxZoom,S=void 0===O?18:O,w=e.onSelect,P=void 0===w?function(){}:w,j=e.onChange,C=void 0===j?function(){}:j,A=e.onZoomTo,N=void 0===A?function(){}:A,k=e.onHighlight,D=void 0===k?function(){}:k,L=e.projection,_=e.intl,R=void 0===_?{}:_,F=e.mapInteractionsSupport,M=e.coordinatesFormat,G=e.onChangeCoordinatesFormat,B=void 0===G?function(){}:G,Y=e.tab,H=void 0===Y?"coordinates":Y,q=e.onSelectTab,K=void 0===q?function(){}:q,W=e.svgSymbolsPath,$=e.lineDashOptions,J=e.enable3dStyleOptions,X=e.geometryEditorOptions,Q=e.defaultTextLabel,ee=e.defaultSymbolizers,te=e.geodesic,ne=e.fonts,re=void 0===ne?["Arial","Verdana","Helvetica","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"]:ne,oe=(y=(0,T.useReducer)(we,{present:g,past:[],future:[]}),v=2,function(e){if(Array.isArray(e))return e}(y)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(y,v)||pe(y,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),ie=oe[0],ae=oe[1],se=(null==ie?void 0:ie.present)||ie||Pe,fe=((null==se?void 0:se.features)||[]).find((function(e){return(null==e?void 0:e.id)===b})),me=function(e,t){var n=e.symbolizerBlock,r=e.ruleBlock;return{symbolizerBlock:Object.keys(n).reduce((function(e,r){return ve(ve({},e),{},be({},r,ve(ve({},n[r]),{},{defaultProperties:m._q[r]||n[r].defaultProperties,params:Object.keys(n[r].params).reduce((function(e,o){var i,a=n[r].params[o];return["Circle"].includes(r)&&["geodesic","radius","msClampToGround","msGeometry"].includes(o)||["Text"].includes(r)&&["label","msGeometry"].includes(o)||["Line","Fill"].includes(r)&&["msGeometry"].includes(o)||["Point","Circle"].includes(null==t||null===(i=t.properties)||void 0===i?void 0:i.annotationType)&&["msGeometry"].includes(o)?e:ve(ve({},e),{},be({},o,a))}),{})})))}),{}),ruleBlock:r}}((0,ce.Z)({exactMatchGeometrySymbol:!0,enable3dStyleOptions:J}),fe),ye=me.symbolizerBlock,Se=me.ruleBlock,je=F;function Te(e){ae({type:he,callback:function(t){return e(t)}})}function Ie(e,t){K("coordinates",fe);var n=l()();Te((function(r){var o,i,a,u={type:"Feature",id:n,properties:ve(ve({},t),{},{id:n,name:e,annotationType:e}),geometry:null};return ve(ve({},r),{},{features:[].concat(de((null==r?void 0:r.features)||[]),[u]),style:ve(ve({},null==r?void 0:r.style),{},{format:"geostyler",body:ve(ve({},null==r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:[].concat(de((null==r||null===(i=r.style)||void 0===i||null===(a=i.body)||void 0===a?void 0:a.rules)||[]),[{name:"",filter:["==","id",n],mandatory:"Point"!==e,ruleId:l()(),symbolizers:[ve({symbolizerId:l()()},(0,m.ll)(u,ee))]}])})})})})),P(n)}function Ce(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureType?(0,V.cz)(e,{formatNumber:null!=R&&R.formatNumber?R.formatNumber:function(e){return e}}):[e]}function Ae(e,t,n){Te((function(r){return ve(ve({},r),{},{features:((null==r?void 0:r.features)||[]).filter((function(t){var r;return!n||(null==t||null===(r=t.properties)||void 0===r?void 0:r.measureId)!==e})).reduce((function(r,o){return[].concat(de(r),de((null==o?void 0:o.id)!==e?[o]:n?Ce(t):[t]))}),[])})}))}function Ne(e){ae({type:he,callback:function(t){return ve(ve({},t),{},{features:(t.features||[]).filter((function(e){var t;return(null==e||null===(t=e.properties)||void 0===t?void 0:t.measureId)!==b})).reduce((function(t,n){var r;if((null==n?void 0:n.id)!==b)return[].concat(de(t),[n]);var o=(0,m.U0)(n),i=ve(ve({},n),{},{geometry:ve(ve({},null==o?void 0:o.geometry),{},{coordinates:(0,m._5)(null==o||null===(r=o.geometry)||void 0===r?void 0:r.type,e)})});return[].concat(de(t),de((0,m._n)(i)?Ce(i):[i]))}),[])})}})}function ke(){var e=(((null==se?void 0:se.style)||{}).body||{}).rules;return{name:"selected feature style",rules:(void 0===e?[]:e).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==fe||null===(n=fe.properties)||void 0===n?void 0:n.id)}))}}(0,T.useEffect)((function(){var e,t,n,r,o,i,a,l,u=((null==ie||null===(e=ie.present)||void 0===e?void 0:e.features)||[]).filter(m._n),c=((null==ie||null===(t=ie.present)||void 0===t?void 0:t.features)||[]).filter((function(e){return!(0,m._n)(e)})),s=u.map((function(e){return e.id}));C(ve(ve({},null==ie?void 0:ie.present),{},{features:u,style:ve(ve({},null==ie||null===(n=ie.present)||void 0===n?void 0:n.style),{},{format:"geostyler",body:ve(ve({},null==ie||null===(r=ie.present)||void 0===r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:((null==ie||null===(i=ie.present)||void 0===i||null===(a=i.style)||void 0===a||null===(l=a.body)||void 0===l?void 0:l.rules)||[]).filter((function(e){var t=e.filter;return s.includes(null==t?void 0:t[2])}))})}),invalidFeatures:(null==c?void 0:c.length)>0?c:null}),(0,m._n)(fe)?fe:null,null==ie?void 0:ie.present)}),[null==ie?void 0:ie.present]);var De=((null==se?void 0:se.features)||[]).filter((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType}));return I().createElement("div",{className:"ms-features-editor"},I().createElement("div",{className:"ms-features-editor-list"},I().createElement("div",{className:"ms-features-editor-list-header"},I().createElement(x.hE,null,I().createElement(ge,{className:"square-button-md no-border",onClick:function(){ae({type:Ee})},disabled:0===((null==ie||null===(t=ie.past)||void 0===t?void 0:t.length)||0)},I().createElement(x.gG,{glyph:"undo"})),I().createElement(ge,{className:"square-button-md no-border",onClick:function(){ae({type:Oe})},disabled:0===((null==ie||null===(n=ie.future)||void 0===n?void 0:n.length)||0)},I().createElement(x.gG,{glyph:"redo"}))),I().createElement(x.hE,null,I().createElement(ge,{tooltipId:"annotations.titles.marker",className:"square-button-md no-border",onClick:function(){return Ie("Point")}},I().createElement(x.gG,{glyph:"point-plus"})),I().createElement(ge,{tooltipId:"annotations.titles.line",className:"square-button-md no-border",onClick:function(){return Ie("LineString")}},I().createElement(x.gG,{glyph:"polyline-plus"})),I().createElement(ge,{tooltipId:"annotations.titles.polygon",className:"square-button-md no-border",onClick:function(){return Ie("Polygon")}},I().createElement(x.gG,{glyph:"polygon-plus"})),I().createElement(ge,{tooltipId:"annotations.titles.text",className:"square-button-md no-border",onClick:function(){return Ie("Text",{label:Q||""})}},I().createElement(x.gG,{glyph:"font-add"})),I().createElement(ge,{tooltipId:"annotations.titles.circle",className:"square-button-md no-border",onClick:function(){return Ie("Circle",{geodesic:!(null==te||!te.Circle)})}},I().createElement(x.gG,{glyph:"1-circle-add"})))),!(null!=se&&null!==(r=se.features)&&void 0!==r&&r.length)&&I().createElement("div",{className:"ms-features-editor-list-empty"},I().createElement(ue.Z,{msgId:"annotations.addGeometry"})),I().createElement("ul",{className:"ms-features-editor-list-body"},De.map((function(e){var t,n=null==e?void 0:e.id,r=b===n;return I().createElement("li",{key:n,onClick:function(){return r?function(){}:P(n,(0,m._n)(e)?e:null)},className:"ms-features-editor-item ".concat(r?" selected":""),onMouseEnter:function(){b!==n&&(0,m._n)(e)&&D("feature",e)},onMouseLeave:function(){D("feature",null)}},I().createElement("div",null,I().createElement(x.gG,{glyph:(0,m.JX)(e)})),I().createElement("div",{style:{flex:1}},I().createElement("input",{value:null==e||null===(t=e.properties)||void 0===t?void 0:t.name,type:"text",onChange:function(t){return Ae(n,ve(ve({},e),{},{properties:ve(ve({},null==e?void 0:e.properties),{},{name:t.target.value})}))}})),I().createElement(x.gG,{glyph:(0,m._n)(e)?"ok-sign text-success":"exclamation-mark text-danger"}),I().createElement(x.hE,null,I().createElement(ge,{disabled:!(0,m._n)(e),bsStyle:r?"primary":"default",className:"square-button-md",tooltipId:"annotations.zoomToGeometry",onClick:function(t){t.stopPropagation(),N(Z()(e),"EPSG:4326",S)}},I().createElement(x.gG,{glyph:"zoom-to"})),I().createElement(ge,{className:"square-button-md",bsStyle:r?"primary":"default",tooltipId:"annotations.removeGeometry",onClick:function(e){e.stopPropagation(),function(e){Te((function(t){return ve(ve({},t),{},{features:((null==t?void 0:t.features)||[]).filter((function(t){var n;return(null==t?void 0:t.id)!==e&&(null==t||null===(n=t.properties)||void 0===n?void 0:n.measureId)!==e}))})}))}(n)}},I().createElement(x.gG,{glyph:"trash"}))))})))),!fe&&I().createElement("div",{className:"ms-features-editor-tools-empty"},I().createElement("div",null,I().createElement(x.gG,{glyph:"comment"}),I().createElement("div",null,I().createElement(ue.Z,{msgId:"annotations.selectAnnotationFeature"})))),fe&&I().createElement("div",{className:"ms-features-editor-tools"},I().createElement(x.JL,{bsStyle:"tabs",activeKey:H},I().createElement(x.LY,{key:"coordinates",eventKey:"coordinates",onClick:function(){return K("coordinates",fe)}},I().createElement(ue.Z,{msgId:"annotations.tabCoordinates"})),I().createElement(x.LY,{key:"style",eventKey:"style",onClick:function(){return K("style",fe)}},I().createElement(ue.Z,{msgId:"annotations.tabStyle"}))),I().createElement("div",{className:"ms-features-editor-tools-body"},"coordinates"===H&&I().createElement(I().Fragment,null,I().createElement(le,{key:fe.id,enableHeightField:h===U.Bk.CESIUM&&!(null!=fe&&null!==(o=fe.properties)&&void 0!==o&&o.geodesic),format:M,onChangeFormat:B,mapProjection:L,options:X,onHighlightPoint:function(e){D("coordinate",e&&{type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{}})},onChangeRadius:function(e){Ae(null==fe?void 0:fe.id,ve(ve({},fe),{},{properties:ve(ve({},null==fe?void 0:fe.properties),{},{radius:e})}))},selected:ve(ve({},(0,m.U0)(fe)),{},{properties:ve(ve({},null==fe?void 0:fe.properties),{},{valueText:null==fe||null===(i=fe.properties)||void 0===i?void 0:i.label})}),featureType:null==fe||null===(a=fe.properties)||void 0===a?void 0:a.annotationType,renderer:m.jB,onChange:Ne,onSetInvalidSelected:function(e,t){"coords"===e&&Ne(t)}}),"Text"===(null==fe||null===(u=fe.properties)||void 0===u?void 0:u.annotationType)&&I().createElement(x.cw,{className:"ms-annotations-label-input",key:"label",controlId:"ms-annotations-label-input",validationState:null!=fe&&null!==(c=fe.properties)&&void 0!==c&&c.label?void 0:"error"},I().createElement(x.J$,null,I().createElement(ue.Z,{msgId:"annotations.titles.text"})),I().createElement(x.NI,{type:"text",value:(null==fe||null===(s=fe.properties)||void 0===s?void 0:s.label)||"",onChange:function(e){return Ae(null==fe?void 0:fe.id,ve(ve({},fe),{},{properties:ve(ve({},null==fe?void 0:fe.properties),{},{label:e.target.value})}))}}))),"style"===H&&I().createElement("div",null,I().createElement(z.Z,{ruleBlock:Se,symbolizerBlock:ye,config:{geometryType:"annotation-".concat(null==fe||null===(f=fe.properties)||void 0===f||null===(d=f.annotationType)||void 0===d?void 0:d.toLowerCase()),simple:!0,fonts:re,svgSymbolsPath:W,lineDashOptions:$},rules:(null===(p=ke())||void 0===p?void 0:p.rules)&&de(ke().rules).reverse(),onChange:function(e){return t=de(e).reverse(),void Te((function(e){var n=null==e?void 0:e.style,r=(e.features||[]).reduce((function(e,r){var o;if(r.id===fe.id)return[].concat(de(e),de(t.map((function(e){return ve(ve({},e),{},{filter:e.filter||["==","id",fe.properties.id]})}))));var i=((null==n||null===(o=n.body)||void 0===o?void 0:o.rules)||[]).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==r||null===(n=r.properties)||void 0===n?void 0:n.id)}));return[].concat(de(e),de(i))}),[]),o=ve(ve({},n),{},{format:"geostyler",body:ve(ve({},null==n?void 0:n.body),{},{rules:r})});return ve(ve({},e),{},{style:o})}));var t}})))),je&&I().createElement(je,{key:null==fe?void 0:fe.id,active:!!fe&&"coordinates"===H,map:E,mapType:h,feature:fe,geodesic:te,onChange:function(e){Ae(fe.id,e,!0)}}))}));var Te=n(460604),Ie="ms-annotations-editor-target",Ce="ANNOTATIONS_ADDITIONAL_LAYERS_OWNER";function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=De(De({},U.Bk.OPENLAYERS,(0,T.lazy)((function(){return Promise.all([n.e(18672),n.e(52043),n.e(4319),n.e(47202),n.e(69141),n.e(51554),n.e(85828),n.e(72445),n.e(37974),n.e(39547)]).then(n.bind(n,65433))}))),U.Bk.CESIUM,(0,T.lazy)((function(){return Promise.all([n.e(65792),n.e(82093),n.e(34531),n.e(9069),n.e(29379),n.e(45477),n.e(50172),n.e(37532),n.e(65417)]).then(n.bind(n,37532))}))),_e=De(De({},U.Bk.OPENLAYERS,(0,T.lazy)((function(){return Promise.all([n.e(18672),n.e(52043),n.e(4319),n.e(47202),n.e(69141),n.e(51554),n.e(85828),n.e(72445),n.e(37974),n.e(1577),n.e(95892),n.e(47238)]).then(n.bind(n,487959))}))),U.Bk.CESIUM,(0,T.lazy)((function(){return Promise.all([n.e(65792),n.e(82093),n.e(34531),n.e(9069),n.e(29379),n.e(45477),n.e(50172),n.e(79589)]).then(n.bind(n,43982))}))),Re=function(e){return Le[e]&&_e[e]};const xe=function(e){var t=e.map,n=e.active,r=e.mapType,o=e.feature,i=e.geodesic,a=void 0===i?{}:i,l=e.onChange,u=void 0===l?function(){}:l,c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).properties;return"Text"===(null==e?void 0:e.annotationType)?"Point":null==e?void 0:e.annotationType};if(!Re(r))return null;var s=Le[r],f=_e[r],d=(0,m._n)(o,!0),p=c(o),y=!!a[p];return I().createElement(T.Suspense,{fallback:null},I().createElement(I().Fragment,null,I().createElement(s,{map:t,active:n&&null===o.geometry,depthTestAgainstTerrain:!1,geometryType:p,geodesic:y,getObjectsToExcludeOnPick:function(){return[]},onDrawEnd:function(e){var t,n,r=e.feature;u(ke(ke({},o),{},{properties:ke(ke({},null==o?void 0:o.properties),{},{geodesic:y},void 0!==(null==r||null===(t=r.properties)||void 0===t?void 0:t.radius)&&{radius:null==r||null===(n=r.properties)||void 0===n?void 0:n.radius}),geometry:r.geometry}))}}),I().createElement(f,{map:t,active:n&&d,geojson:o,getGeometryType:c,onEditEnd:function(e){return u(e)}})))};function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function He(e){var t;if(null==e||null===(t=e.geometry)||void 0===t||!t.type)return[];if("Point"===e.geometry.type&&!e.geometry.coordinates.some(m.gS))return[Ge(Ge({},e),{},{properties:{geometryType:"Point"}})];var n=Me(Z()(e),4),r=n[0],o=n[1],i=n[2],a=n[3],l={type:"Feature",geometry:{type:"LineString",coordinates:[[r,o],[r,a],[i,a],[i,o],[r,o]]},properties:{geometryType:"LineString"}};return"LineString"===e.geometry.type?[l].concat(ze(e.geometry.coordinates.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):"Polygon"===e.geometry.type?[l].concat(ze(e.geometry.coordinates[0].map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):[e]}var Ve=(0,A.connect)((0,N.P1)([(0,_.XL)(m.jB,"ready"),y.F3,v.Od,R.E$,y.Gu,y.qs],(function(e,t,n,r,o,i){var a,l;return{enabled:e,selected:t,maxZoom:(null==n?void 0:n.zoom)||18,projection:null==n?void 0:n.projection,enable3dStyleOptions:!!r,activeClickEventListener:null==n||null===(a=n.eventListeners)||void 0===a||null===(l=a.click)||void 0===l?void 0:l[0],session:o,selectedId:i}})),{onChange:s.tV,onZoomTo:L.Px,onUpdateALayer:Te.W,onRemoveALayer:Te.fU,onStoreSession:p.x$,setSelectedId:p.ym})((function(e){var t=e.enabled,n=e.targetId,r=void 0===n?Ie:n,o=e.mapType,i=e.map,a=e.selected,l=e.onChange,u=e.onZoomTo,c=e.maxZoom,s=void 0===c?18:c,f=e.projection,d=e.onUpdateALayer,p=void 0===d?function(){}:d,y=e.onRemoveALayer,v=void 0===y?function(){}:y,b=e.symbolsPath,g=void 0===b?"product/assets/symbols/symbols.json":b,h=e.lineDashOptions,E=e.enable3dStyleOptions,O=e.geometryEditorOptions,S=e.format,w=void 0===S?"decimal":S,P=e.defaultTextAnnotation,j=void 0===P?"New":P,A=e.defaultPointType,N=e.defaultShape,k=e.defaultShapeStrokeColor,L=e.defaultShapeFillColor,_=e.defaultShapeSize,R=void 0===_?64:_,x=e.geodesic,F=e.activeClickEventListener,M=e.fonts,Z=e.onStoreSession,G=e.session,B=e.selectedId,z=e.setSelectedId,U=void 0===z?function(){}:z,Y=document.querySelector("#".concat(r)),H=Me((0,T.useState)(w),2),V=H[0],q=H[1],K=Me((0,T.useState)("coordinates"),2),W=K[0],$=K[1];function J(){return g.includes(".json")?g:"".concat(g,"symbols.json")}function X(e,t){var n;Re(o)&&p(a.id,Ce,"override",Ge({visibility:!0},e&&!t&&!F&&{features:null==a||null===(n=a.features)||void 0===n?void 0:n.filter((function(t){var n=t.id,r=t.properties;return n!==e.id&&(null==r?void 0:r.measureId)!==e.id}))})),p("ANNOTATIONS_SELECTED_LAYER",Ce,"overlay",{type:"vector",visibility:!0,features:e?He(e):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#111111",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}})}return(0,T.useEffect)((function(){return t&&null!=a&&a.id&&p(a.id,Ce,"override",{visibility:!0}),function(){v({owner:Ce})}}),[t]),(0,T.useEffect)((function(){var e=((null==a?void 0:a.features)||[]).find((function(e){return e.id===B}));t&&(0,m._n)(e)&&X(e,"style"===W)}),[F,o,t]),t&&Y&&a?(0,C.createPortal)(I().createElement("div",{className:"ms-annotations-editor"},I().createElement(je,{key:a._v_,selectedId:B,geodesic:{Circle:!1!==x},fonts:M,defaultSymbolizers:function(){if("symbol"!==A)return{};var e=D()(L||"#dddddd"),t=D()(k||"#777777");return{Point:{kind:"Mark",wellKnownName:J().replace(/[^\/]*.json$/,"".concat(N,".svg")),color:e.toHexString(),fillOpacity:e.getAlpha(),strokeColor:t.toHexString(),strokeOpacity:t.getAlpha(),strokeWidth:1,radius:R/2,rotate:0}}}(),svgSymbolsPath:J(),lineDashOptions:h,coordinatesFormat:V,enable3dStyleOptions:E,geometryEditorOptions:O,defaultTextLabel:j,onChangeCoordinatesFormat:q,tab:W,onSelectTab:function(e,t){$(e),X(t,"style"===e)},mapInteractionsSupport:!F&&xe,value:G||{features:(null==a?void 0:a.features)||[],style:(null==a?void 0:a.style)||{}},onHighlight:function(e,t){p("ANNOTATIONS_HIGHLIGHT_LAYERS",Ce,"overlay",{type:"vector",visibility:!0,features:t?He(t):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#555555",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"Square",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:3,radius:6,rotate:0,msBringToFront:!0}]}]}}})},mapType:o,map:i,maxZoom:s,projection:f,onSelect:function(e,t){U(e),X(t,"style"===W)},onChange:function(e,t,n){var r,o;l(a.id,"layers",e),X(t,"style"===W),r=e.invalidFeatures,p("ANNOTATIONS_INVALID_LAYER",Ce,"overlay",{type:"vector",visibility:!0,features:r?(o=r,(o||[]).filter((function(e){var t=e.geometry;return(null==t?void 0:t.type)&&["LineString","Polygon"].includes(t.type)})).reduce((function(e,t){var n=("LineString"===t.geometry.type?t.geometry.coordinates:t.geometry.coordinates[0]).filter((function(e){return!e.some(m.gS)}));return[].concat(ze(e),ze(n.length>1?[{type:"Feature",geometry:{type:"LineString",coordinates:n},properties:Ge(Ge({},null==t?void 0:t.properties),{},{geometryType:"LineString"})}]:[]),ze(n.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))))}),[])):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#ff0000",width:2,opacity:1,cap:"round",join:"round",msClampToGround:!1,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}}),Z(n)},onZoomTo:u})),Y):null}));const qe=Ve;var Ke=n(623560),We=n.n(Ke),$e=n(548403),Je=n.n($e),Xe=n(454037),Qe=n(55105),et=n(629859),tt=n(697111),nt=n(779195);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ut=(0,tt.Z)("onEditorStateChange","editorState")(nt.Z);const ct=function(e){var t,n,r=e.preview,o=e.properties,i=void 0===o?{}:o,a=e.fields,l=void 0===a?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:a,u=e.onChange,c=void 0===u?function(){}:u,s=(t=(0,T.useState)(l.filter((function(e){return"html"===e.type})).reduce((function(e,t){return it(it({},e),{},at({},t.name,(0,et.n0)(i[t.name]||"")))}),{})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1];return r?I().createElement("div",{className:"ms-annotations-fields preview"},l.map((function(e){var t=e.showLabel;return I().createElement("div",{key:e.name,className:"ms-annotations-field"},t&&I().createElement("div",{className:"ms-annotations-field-label"},I().createElement(ue.Z,{msgId:"annotations.field.".concat(e.name)})),I().createElement("div",{className:"ms-annotations-field-value",dangerouslySetInnerHTML:{__html:i[e.name]}}))}))):I().createElement("form",{className:"ms-annotations-fields"},l.map((function(e){var t=We()(e.validator)?e.validator:null,n=t&&t(i[e.name]),r=e.validateError||"annotations.mandatory",o=e.showLabel,a=e.editable;return"text"===e.type?I().createElement(x.cw,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&I().createElement(x.J$,null,I().createElement(ue.Z,{msgId:"annotations.field.".concat(e.name)})),I().createElement(x.NI,{disabled:!a,type:"text",value:i[e.name],onChange:function(t){return c(at({},e.name,t.target.value))}}),t&&!n&&I().createElement(x.Qb,null,I().createElement(ue.Z,{msgId:r}))):"html"===e.type?I().createElement(x.cw,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&I().createElement(x.J$,null,I().createElement(ue.Z,{msgId:"annotations.field.".concat(e.name)})),a?I().createElement(ut,{editorState:f[e.name],onEditorStateChange:function(t){var n=(0,et.sc)(f[e.name]);(0,et.sc)(t)!==n&&(c(at({},e.name,(0,et.sc)(t))),d((function(n){return it(it({},n),{},at({},e.name,t))})))}}):I().createElement("div",{dangerouslySetInnerHTML:{__html:i[e.name]}}),t&&!n&&I().createElement(x.Qb,null,I().createElement(ue.Z,{msgId:r}))):null})))};var st=n(501262),ft=n(399534),dt=n(710615);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}var mt=["fields","onEdit","onRemove","onDownload"],yt=["title","description"];function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vt.apply(null,arguments)}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function St(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var wt=(0,H.Z)(Y.Z),Pt=(0,A.connect)((function(){return{}}),{onRemove:p._x,onDownload:p.LR,onEdit:p.VR})((function(e){var t=e.fields,n=e.onEdit,r=void 0===n?function(){}:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onDownload,l=void 0===a?function(){}:a,u=St(e,mt),c=Et((0,T.useState)(!1),2),s=c[0],f=c[1];return I().createElement("div",null,I().createElement("div",null,I().createElement(x.hE,null,I().createElement(wt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.edit",onClick:function(){return r(u.id)}},I().createElement(x.gG,{glyph:"pencil"})),I().createElement(wt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.remove",onClick:function(){return f(!0)}},I().createElement(x.gG,{glyph:"trash"})),I().createElement(wt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return l([u])}},I().createElement(x.gG,{glyph:"download"})))),I().createElement(ct,{preview:!0,properties:gt({title:null==u?void 0:u.title,description:null==u?void 0:u.description},null==u?void 0:u.options),fields:t}),I().createElement(ft.Z,null,I().createElement(st.Z,{show:s,modal:!0,onClose:function(){return f(!1)},onConfirm:function(){i(u.id),f(!1)},confirmButtonBSStyle:"primary",closeGlyph:"1-close",confirmButtonContent:I().createElement(ue.Z,{msgId:"annotations.confirm"}),closeText:I().createElement(ue.Z,{msgId:"annotations.cancel"})},I().createElement(ue.Z,{msgId:"annotations.undoDeleteFeature"}))))})),jt=(0,A.connect)((0,N.P1)([(0,_.Yq)(m.jB),function(e){return(0,Qe.ic)(e,{height:!0})},y.F3,v.Od],(function(e,t,n,r){var o,i;return{enabled:e,style:t,selected:e?n:null,activeClickEventListener:null==r||null===(o=r.eventListeners)||void 0===o||null===(i=o.click)||void 0===i?void 0:i[0],projection:null==r?void 0:r.projection,zoom:null==r?void 0:r.zoom,resolutions:null==r?void 0:r.resolutions}})),{onClose:p.L0,onCancel:p.Hl,onReady:c.Xg.bind(null,m.jB,"ready"),onChange:s.tV,onDownload:p.LR})((function(e){var t=e.targetId,n=void 0===t?Ie:t,r=e.selected,o=e.style,i=e.enabled,a=e.onReady,l=void 0===a?function(){}:a,u=e.onClose,c=void 0===u?function(){}:u,s=e.onChange,f=void 0===s?function(){}:s,d=e.onDownload,p=void 0===d?function(){}:d,y=e.fields,v=void 0===y?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:y,b=e.closeId,g=e.onCancel,h=void 0===g?function(){}:g,E=e.activeClickEventListener,O=e.projection,S=e.resolutions,w=e.zoom,P=gt({title:null==r?void 0:r.title,description:null==r?void 0:r.description},null==r?void 0:r.options),j=Et((0,T.useState)("properties"),2),C=j[0],A=j[1],N=Et((0,T.useState)(!1),2),k=N[0],D=N[1];function L(){return!v.find((function(e){return!!We()(null==e?void 0:e.validator)&&!e.validator(P[e.name])}))}function _(){var e;return!(null==r||null===(e=r.features)||void 0===e||!e.length||r.invalidFeatures)}function R(e){return e.stopPropagation(),L()&&_()?c(r):D(!0)}return(0,T.useEffect)((function(){return(0,Xe.j9)(m.jB,(function(e){return I().createElement(Pt,vt({},e,{fields:v}))})),function(){(0,Xe.j9)(m.jB,void 0)}}),[]),(0,T.useEffect)((function(){return D(!1),l(i),function(){l(!i)}}),[i]),(0,T.useEffect)((function(){b&&R()}),[b]),r?I().createElement("div",{className:"ms-annotations-panel",style:o},I().createElement("div",{className:"ms-annotations-panel-header"},I().createElement(wt,{onClick:function(e){return R(e)},className:"square-button no-border"},I().createElement(x.gG,{glyph:"1-close"})),I().createElement("div",{className:"ms-annotations-title"},I().createElement(ue.Z,{msgId:"annotations.title"})),I().createElement("div",{className:"square-button text-primary"},I().createElement(x.gG,{glyph:"comment"}))),I().createElement(x.JL,{bsStyle:"tabs",activeKey:C,className:"ms-annotations-panel-nav"},I().createElement(x.LY,{key:"properties",eventKey:"properties",onClick:function(){return A("properties")}},I().createElement(ue.Z,{msgId:"annotations.properties"})," ",I().createElement(x.gG,{glyph:L()?"ok-sign text-success":"exclamation-mark text-danger"})),I().createElement(x.LY,{key:"geometries",eventKey:"geometries",onClick:function(){return A("geometries")}},I().createElement(ue.Z,{msgId:"annotations.geometries"})," ",I().createElement(x.gG,{glyph:_()?"ok-sign text-success":"exclamation-mark text-danger"})),I().createElement(x.LY,{key:"settings",eventKey:"settings",onClick:function(){return A("settings")}},I().createElement(ue.Z,{msgId:"settings"})),I().createElement(wt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",disabled:!(L()&&_()),onClick:function(){return p([r])}},I().createElement(x.gG,{glyph:"download"}))),I().createElement("div",{className:"ms-annotations-panel-body"},I().createElement("div",{className:"ms-annotations-panel-content",style:"properties"===C?{}:{display:"none"}},I().createElement(ct,{fields:v,properties:P,onChange:function(e){var t=e.title,n=e.description,o=St(e,yt);f(r.id,"layers",gt(gt(gt({},void 0!==t&&{title:t}),void 0!==n&&{description:n}),{},{options:gt(gt({},r.options),o)}))}})),I().createElement("div",{id:n,style:"geometries"===C?{}:{display:"none"}}),I().createElement("div",{className:"ms-annotations-panel-content",style:"settings"===C?{}:{display:"none"}},I().createElement(dt.Z,{title:I().createElement(x.J$,null,I().createElement(ue.Z,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return f(r.id,"layers",e)},projection:O,resolutions:S,zoom:w}))),E&&I().createElement(x.bZ,{bsStyle:"warning"},I().createElement(ue.Z,{msgId:"annotations.deactivatedMapInteraction",msgParams:{pluginName:Je()(E)}})),I().createElement(ft.Z,null,I().createElement(st.Z,{show:k,modal:!0,onClose:function(){return h(),void D(!1)},onConfirm:function(){return c(r),void D(!1)},confirmButtonBSStyle:"primary",closeGlyph:"1-close",confirmButtonContent:I().createElement(ue.Z,{msgId:"annotations.confirm"}),closeText:I().createElement(ue.Z,{msgId:"annotations.cancel"})},I().createElement(ue.Z,{msgId:"annotations.undo"})))):null}));const Tt=jt;var It=["status","selectedLayers","onAdd","onDownload","onEdit","annotationLayers","statusTypes","itemComponent"];function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(null,arguments)}const At=(0,A.connect)((0,N.P1)([y.Yu,(0,_.Yq)(m.jB)],(function(e,t){return{annotationLayers:e,enabled:t}})),{onAdd:p.A9,onDownload:p.LR,onEdit:p.VR})((function(e){var t=e.status,n=e.selectedLayers,r=e.onAdd,o=void 0===r?function(){}:r,i=e.onDownload,a=void 0===i?function(){}:i,l=e.onEdit,u=void 0===l?function(){}:l,c=e.annotationLayers,s=void 0===c?[]:c,f=e.statusTypes,d=e.itemComponent,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,It),y=d;if(t===f.DESELECT)return I().createElement(I().Fragment,null,I().createElement(y,Ct({},p,{key:"annotations",tooltipId:"toc.addAnnotations",onClick:function(){return o()},glyph:"add-comment"})),s.length>0&&I().createElement(y,Ct({},p,{key:"annotations-download",glyph:"download-comment",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(s)}})));if(t===f.LAYER&&(0,m.cO)(n[0]))return I().createElement(I().Fragment,null,I().createElement(y,Ct({},p,{key:"annotations-edit",glyph:"pencil",tooltipId:"toc.editAnnotations",onClick:function(){return u(n[0].id)}})),I().createElement(y,Ct({},p,{key:"annotations-download",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return a([n[0]])},glyph:"download-comment"})));var v=t===f.LAYERS?n.filter(m.cO):[];return v.length?I().createElement(I().Fragment,null,I().createElement(y,Ct({},p,{key:"annotations-download",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(v)},glyph:"download-comment"}))):null})),Nt=(0,r.rx)("Annotations",{component:Tt,containers:{TOC:{doNotHide:!0,name:"Annotations",target:"toolbar",Component:At,position:12},Map:{name:"Annotations",Tool:qe,alwaysRender:!0}},reducers:{annotations:j.Z},epics:P})},79267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(14281);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.e7:return a(a({},e),{},{session:t.session});case r.Nd:return a(a({},e),{},{featureId:t.id});case r.CD:case r.A1:return a(a({},e),{},{editing:!0,closeId:0});case r.eY:return a(a({},e),{},{closeId:(e.closeId||0)+1});case r.bI:return a(a({},e),{},{editing:!1,closeId:0,session:null});case r.Rr:return a(a({},e),{},{closeId:0});default:return e}}},55105:(e,t,n)=>{"use strict";n.d(t,{Ss:()=>m,Nr:()=>y,QJ:()=>v,ic:()=>b,Jz:()=>g,VM:()=>h,CF:()=>E,Ju:()=>O,Fc:()=>S,gQ:()=>w});var r=n(91175),o=n.n(r),i=n(288306),a=n.n(i),l=n(800827),u=n(552259),c=n(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){return e.maplayout&&e.maplayout.layout||{}},y=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},b=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m(e),o=v(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){var i;return d(d({},e),{},p({},t,n&&null!==(i=o[t])&&void 0!==i?i:r[t]))}),{})||{}}),(function(e,t,n){return JSON.stringify(m(e))+JSON.stringify(v(e))+JSON.stringify(t)+(n?"_isDock":"")})),g=function(e){var t;return!(null===(t=m(e))||void 0===t||!t.rightPanel)},h=function(e){var t,n=c.ZP.getConfigProp("mapLayout")||u.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=m(e);return!!o()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==n?void 0:n.bottom.sm)&&void 0!==t?t:0,type:"not"}])},E=function(e){var t=(0,l.Od)(e),n=y(e);return n&&t&&t.size&&{left:(0,u.pb)(n.left,t.size.width),bottom:(0,u.pb)(n.bottom,t.size.height),right:(0,u.pb)(n.right,t.size.width),top:(0,u.pb)(n.top,t.size.height)}},O=function(e){var t,n;return null!==(t=null==e||null===(n=e.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==t?t:{left:[],right:[]}},S=function(e){return b(e,{height:!0,right:!0},!0)},w=function(e){return b(e,{right:!0},!0)}},629859:(e,t,n)=>{"use strict";n.d(t,{n0:()=>s,sc:()=>f});var r=n(909041),o=n(689265),i=n.n(o),a=n(717247),l=n.n(a),u=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=r.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var o=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),a=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),l={};a&&i&&o&&(l["data-geostory-interaction-type"]=o,l["data-geostory-interaction-params"]=i,l["data-geostory-interaction-name"]=a),n.attributes=l,t=r.Entity.__create("LINK","MUTABLE",n)}}return t},c=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment,i=o&&"none"!==o?"float: ".concat(o,";"):"display: block; margin: 0 auto 0 auto;";return'<img title="'.concat(e.data.src,'" src="').concat(e.data.src,'" alt="').concat(e.data.alt||" ",'" style="height: ').concat(e.data.height,"; width: ").concat(e.data.width,"; ").concat(i,'"/>')}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l()(e,null,u),n=r.ContentState.createFromBlockArray(t.contentBlocks);return r.EditorState.createWithContent(n)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=1!==(0,r.convertToRaw)(e.getCurrentContent()).blocks.length||(0,r.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=i()((0,r.convertToRaw)(e.getCurrentContent()),null,null,c);return n?o:t}return t}},178598:function(e,t,n){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},s=function(t,s,f){f||(t=c(t));var d,p=this,m="application/octet-stream"===t.type,y=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,e)}catch(e){l(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,o)return d=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=d,r.download=s,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),y(),u(d),p.readyState=p.DONE}));!function(){if((a||m&&i)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,y()},r.readAsDataURL(t),void(p.readyState=p.INIT)}d||(d=n().createObjectURL(t)),m?e.location.href=d:e.open(d,"_blank")||(e.location.href=d),p.readyState=p.DONE,y(),u(d)}()},f=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(e,t,n){return new s(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=o:null!==n.amdD&&null!==n.amdO&&(void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r))},753325:e=>{e.exports=function(e,t){return e>t}},352353:e=>{e.exports=function(e){return void 0===e}},606162:(e,t,n)=>{var r=n(456029),o=n(753325),i=n(406557);e.exports=function(e){return e&&e.length?r(e,i,o):void 0}},93054:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=function(e){if("function"!=typeof e)throw new TypeError("You must provide a valid moment object");var t="function"==typeof e().locale?"locale":"lang";if(!e.localeData)throw new TypeError("The Moment localizer depends on the `localeData` api, please provide a moment object v2.2.0 or higher");function n(n,r,o){return n?e(r,o)[t](n):e(r,o)}var r={formats:{date:"L",time:"LT",default:"lll",header:"MMMM YYYY",footer:"LL",weekday:"dd",dayOfMonth:"DD",month:"MMM",year:"YYYY",decade:function(t,n,r){return r.format(t,"YYYY",n)+" - "+r.format(function(t){return e(t).add(10,"year").add(-1,"millisecond").toDate()}(t),"YYYY",n)},century:function(t,n,r){return r.format(t,"YYYY",n)+" - "+r.format(function(t){return e(t).add(100,"year").add(-1,"millisecond").toDate()}(t),"YYYY",n)}},firstOfWeek:function(t){return e.localeData(t).firstDayOfWeek()},parse:function(e,t,r){if(!e)return null;var o=n(r,e,t);return o.isValid()?o.toDate():null},format:function(e,t,r){return n(r,e).format(t)}};return o.default.setDateLocalizer(r),r};var r,o=(r=n(577036))&&r.__esModule?r:{default:r};e.exports=t.default},21090:(e,t)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.ZP=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=t.debug;var l={initialState:t.initialState,initTypes:d(t.initTypes,["@@redux/INIT","@@INIT"]),limit:t.limit,filter:t.filter||function(){return!0},undoType:t.undoType||a.UNDO,redoType:t.redoType||a.REDO};return l.history=t.initialHistory||f(l.initialState),0===l.initTypes.length&&console.warn("redux-undo: supply at least one action type in initTypes to ensure initial state"),function(t,a){!function(e,t){if(r){var n=["action",e.type];console.group?(n.unshift("%credux-undo","font-style: italic"),console.groupCollapsed.apply(console,n),console.log("received",{state:t,action:e})):o.apply(void 0,n)}}(a,t);var d=void 0;switch(a.type){case l.undoType:return d=function(e){o("undo",{history:e});var t=e.past,n=e.present,r=e.future;return t.length<=0?e:{past:t.slice(0,t.length-1),present:t[t.length-1],future:[n].concat(r)}}(t),o("after undo",d),i(),d?s(t,d):t;case l.redoType:return d=function(e){o("redo",{history:e});var t=e.past,n=e.present,r=e.future;return r.length<=0?e:{future:r.slice(1,r.length),present:r[0],past:[].concat(t,[n])}}(t),o("after redo",d),i(),d?s(t,d):t;default:if(d=e(t&&t.present,a),l.initTypes.some((function(e){return e===a.type})))return o("reset history due to init action"),i(),c(n({},t,f(d)));if(l.filter&&"function"==typeof l.filter&&!l.filter(a,d,t&&t.present))return o("filter prevented action, not storing it"),i(),c(n({},t,{present:d}));var p=function(e,t,n){o("insert",{state:t,history:e,free:n-u(e)});var r=e.past,i=e.present,a=n&&u(e)>=n;return void 0===i?{past:[],present:t,future:[]}:{past:[].concat(r.slice(a?1:0),[i]),present:t,future:[]}}(t&&void 0!==t.present?t:l.history,d,l.limit);return o("after insert",{history:p,free:l.limit-u(p)}),i(),c(n({},t,p))}}};var r=void 0;function o(){if(r){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.group||t.unshift("%credux-undo","font-style: italic"),console.log.apply(console,t)}}function i(){if(r)return console.groupEnd&&console.groupEnd()}var a={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO"};t.MF=a;var l={undo:function(){return{type:a.UNDO}},redo:function(){return{type:a.REDO}}};function u(e){var t=e.past,n=e.future;return t.length+1+n.length}function c(e){return n({},e,{history:e})}function s(e,t){return c(n({},e,t))}function f(e){return{past:[],present:e,future:[]}}function d(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Array.isArray(e)?e:"string"==typeof e?[e]:t}t.zF=l}}]);