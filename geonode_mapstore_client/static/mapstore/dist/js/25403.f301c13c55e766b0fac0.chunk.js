(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[25403],{525403:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>J});var o=n(124852),r=n.n(o),a=n(867076),i=n(192579),l=n(993451),c=(n(707169),n(909041)),s=n(967134),u=n(675263),p=n.n(u),d=n(294184),f=n.n(d);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,T(o.key),o)}}function b(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t,e,n){return e=k(e),function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}(t,h()?Reflect.construct(e,n||[],k(t).constructor):e.apply(t,n))}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function S(t,e,n){return(e=T(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=m(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}var C="External Link",N=function(t){function e(){var t;g(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return S(w(t=v(this,e,[].concat(o))),"state",{expanded:!1}),S(w(t),"toggle",(function(){t.setState((function(t){return{expanded:!t.expanded}}))})),t}return O(e,t),b(e,[{key:"render",value:function(){var t=this.state.expanded,e=this.props,n=e.externalLinkOption,o=e.onSelectionChange,a=e.currentSelectOption,i=e.availableStorySections;return r().createElement("div",{className:"rdw-block-wrapper","aria-label":"rdw-block-control"},r().createElement(s.Dropdown,{className:"ms-rdw-link-options-dropdown",onChange:o,expanded:t,doExpand:this.toggle,doCollapse:this.toggle,onExpandEvent:this.toggle,title:"MSLinks"},r().createElement("span",null,a),r().createElement(s.DropdownOption,{active:!0,value:{value:n,label:n},key:n},"External Link"),i&&i.map((function(t){return r().createElement(s.DropdownOption,{active:t.id===a,value:{value:t.id,label:t.title||t.type||t.id},key:t.id},t.title||t.type||t.id)}))))}}]),e}(o.Component);S(N,"propTypes",{externalLinkOption:p().string,onSelectionChange:p().func,currentSelectOption:p().string,availableStorySections:p().array});var j=function(t){function e(){var t;g(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return S(w(t=v(this,e,[].concat(o))),"state",{showModal:!1,linkTarget:"",linkTitle:"",attributes:{},linkTargetOption:t.props.config.defaultTargetOption,currentSelectOption:"Select link target"}),S(w(t),"removeLink",(function(){(0,t.props.onChange)("unlink")})),S(w(t),"addLink",(function(){var e=t.props.onChange,n=t.state;e("link",n.linkTitle,n.linkTarget,n.linkTargetOption,n.attributes)})),S(w(t),"updateValue",(function(e){t.setState(S({},"".concat(e.target.name),e.target.value))})),S(w(t),"onSelectionChange",(function(e){e.value===C?t.setState({linkTarget:"",attributes:{},currentSelectOption:e.label}):t.setState({linkTarget:e.value,attributes:{"data-geostory-interaction-type":"scrollTo","data-geostory-interaction-params":"".concat(e.value),"data-geostory-interaction-name":e.label},currentSelectOption:e.label})})),S(w(t),"updateTargetOption",(function(e){t.setState({linkTargetOption:e.target.checked?"_blank":"_self"})})),S(w(t),"hideModal",(function(){t.setState({showModal:!1})})),S(w(t),"signalExpandShowModal",(function(){var e=t.props,n=e.onExpandEvent,o=e.currentState,r=o.link,a=o.selectionText,i=t.state.linkTargetOption;n();var l="Select link target";null!=r&&r.target&&r.target.length>0&&(l=C),null!=r&&r.attributes["data-geostory-interaction-name"]&&(l=r.attributes["data-geostory-interaction-name"]),t.setState({showModal:!0,linkTarget:r&&r.target||"",linkTargetOption:r&&r.targetOption||i,linkTitle:r&&r.title||a,attributes:r&&r.attributes||{},currentSelectOption:l})})),S(w(t),"forceExpandAndShowModal",(function(){var e=t.props,n=e.doExpand,o=e.currentState,r=o.link,a=o.selectionText,i=t.state.linkTargetOption;n();var l="Select link target";null!=r&&r.target&&r.target.length>0&&(l=C),null!=r&&r.attributes["data-geostory-interaction-name"]&&(l=r.attributes["data-geostory-interaction-name"]),t.setState({showModal:!0,linkTarget:r&&r.target,linkTargetOption:r&&r.targetOption||i,linkTitle:r&&r.title||a,attributes:r&&r.attributes||{},currentSelectOption:l})})),t}return O(e,t),b(e,[{key:"componentDidUpdate",value:function(t){t.expanded&&!this.props.expanded&&this.setState({showModal:!1,linkTarget:"",linkTitle:"",attributes:{},linkTargetOption:this.props.config.defaultTargetOption,currentSelectOption:"Select link target"})}},{key:"renderAddLinkModal",value:function(){var t=this.props,e=t.config.popupClassName,n=t.doCollapse,o=t.translations,a=t.availableStorySections,i=this.state,l=i.linkTitle,c=i.linkTarget,u=i.linkTargetOption,p=i.currentSelectOption;return r().createElement("div",{className:f()("rdw-link-modal",e),onClick:s.stopPropagation},r().createElement("label",{className:"rdw-link-modal-label",htmlFor:"linkTitle"},o["components.controls.link.linkTitle"]),r().createElement("input",{id:"linkTitle",className:"rdw-link-modal-input",onChange:this.updateValue,onBlur:this.updateValue,name:"linkTitle",value:l}),r().createElement("label",{className:"rdw-link-modal-label",htmlFor:"linkTarget"},o["components.controls.link.linkTarget"]),r().createElement(N,{externalLinkOption:C,currentSelectOption:p,onSelectionChange:this.onSelectionChange,availableStorySections:a}),p===C&&r().createElement(r().Fragment,null,r().createElement("input",{id:"linkTarget",className:"rdw-link-modal-input",onChange:this.updateValue,onBlur:this.updateValue,name:"linkTarget",value:c}),r().createElement("label",{className:"rdw-link-modal-target-option",htmlFor:"openLinkInNewWindow"},r().createElement("input",{id:"openLinkInNewWindow",type:"checkbox",defaultChecked:"_blank"===u,value:"_blank",onChange:this.updateTargetOption}),r().createElement("span",null,o["components.controls.link.linkTargetOption"]))),r().createElement("span",{className:"rdw-link-modal-buttonsection"},r().createElement("button",{className:"rdw-link-modal-btn",onClick:this.addLink,disabled:!c||!l},o["generic.add"]),r().createElement("button",{className:"rdw-link-modal-btn",onClick:n},o["generic.cancel"])))}},{key:"renderInFlatList",value:function(){var t=this.props,e=t.config,n=e.options,o=e.link,a=e.unlink,i=e.className,l=t.currentState,c=t.expanded,u=t.translations,p=this.state.showModal;return r().createElement("div",{className:f()("rdw-link-wrapper",i),"aria-label":"rdw-link-control"},n.indexOf("link")>=0&&r().createElement(s.Option,{value:"unordered-list-item",className:f()(o.className),onClick:this.signalExpandShowModal,"aria-haspopup":"true","aria-expanded":p,title:o.title||u["components.controls.link.link"]},r().createElement("img",{src:o.icon,alt:""})),n.indexOf("unlink")>=0&&r().createElement(s.Option,{disabled:!l.link,value:"ordered-list-item",className:f()(a.className),onClick:this.removeLink,title:a.title||u["components.controls.link.unlink"]},r().createElement("img",{src:a.icon,alt:""})),c&&p?this.renderAddLinkModal():void 0)}},{key:"renderInDropDown",value:function(){var t=this.props,e=t.expanded,n=t.onExpandEvent,o=t.doCollapse,a=t.doExpand,i=t.onChange,l=t.config,c=t.currentState,u=t.translations,p=l.options,d=l.link,m=l.unlink,g=l.className,y=l.dropdownClassName,b=l.title,v=this.state.showModal;return r().createElement("div",{className:"rdw-link-wrapper","aria-haspopup":"true","aria-label":"rdw-link-control","aria-expanded":e,title:b},r().createElement(s.Dropdown,{className:f()("rdw-link-dropdown",g),optionWrapperClassName:f()(y),onChange:i,expanded:e&&!v,doExpand:a,doCollapse:o,onExpandEvent:n},r().createElement("img",{src:(0,s.getFirstIcon)(l),alt:""}),p.indexOf("link")>=0&&r().createElement(s.DropdownOption,{onClick:this.forceExpandAndShowModal,className:f()("rdw-link-dropdownoption",d.className),title:d.title||u["components.controls.link.link"]},r().createElement("img",{src:d.icon,alt:""})),p.indexOf("unlink")>=0&&r().createElement(s.DropdownOption,{onClick:this.removeLink,disabled:!c.link,className:f()("rdw-link-dropdownoption",m.className),title:m.title||u["components.controls.link.unlink"]},r().createElement("img",{src:m.icon,alt:""}))),e&&v?this.renderAddLinkModal():void 0)}},{key:"render",value:function(){return this.props.config.inDropdown?this.renderInDropDown():this.renderInFlatList()}}]),e}(o.Component);S(j,"propTypes",{expanded:p().bool,doExpand:p().func,doCollapse:p().func,onExpandEvent:p().func,config:p().object,onChange:p().func,currentState:p().object,translations:p().object,modalHandler:p().any});const P=j;function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function _(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,H(o.key),o)}}function L(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(L=function(){return!!t})()}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function A(t,e,n){return(e=H(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=x(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:String(e)}function B(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&"LINK"===n.getEntity(e).getType()}),e)}function R(t){var e,n=t.showOpenOptionOnHover;return e=function(t){function e(){var t,o,a,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return A(M((o=this,a=e,i=[].concat(c),a=D(a),t=function(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return M(t)}(o,L()?Reflect.construct(a,i||[],D(o).constructor):a.apply(o,i)))),"state",{showPopOver:!1}),A(M(t),"openLink",(function(){var e=t.props,n=e.entityKey,o=e.contentState.getEntity(n).getData().url,r=window.open(o,"blank");r&&r.focus()})),A(M(t),"toggleShowPopOver",(function(){var e=!t.state.showPopOver;t.setState({showPopOver:e})})),A(M(t),"renderDecorator",(function(){var e=t.props,o=e.children,a=e.entityKey,i=e.contentState.getEntity(a).getData(),l=i.url,c=i.targetOption,u=i.attributes,p=t.state.showPopOver;return u&&u["data-geostory-interaction-type"]?r().createElement("span",{className:"rdw-link-decorator-wrapper"},r().createElement("a",{"data-geostory-interaction-type":u["data-geostory-interaction-type"],"data-geostory-interaction-params":u["data-geostory-interaction-params"]},o)):r().createElement("span",{className:"rdw-link-decorator-wrapper",onMouseEnter:t.toggleShowPopOver,onMouseLeave:t.toggleShowPopOver},r().createElement("a",{href:l,target:c},o),p&&n?r().createElement("img",{src:s.openlink,alt:"",onClick:t.openLink,className:"rdw-link-decorator-icon"}):void 0)})),t}var o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(e,t),o=e,(a=[{key:"render",value:function(){return this.renderDecorator()}}])&&_(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),e}(o.Component),A(e,"propTypes",{entityKey:p().string.isRequired,children:p().array,contentState:p().object}),e}const F=function(t){return{strategy:B,component:R(t)}};var K=n(629859);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function W(){return W=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},W.apply(this,arguments)}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){var o,r,a,i;o=t,r=e,a=n[e],i=function(t,e){if("object"!=U(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=U(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r),(r="symbol"==U(i)?i:String(i))in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var G=(0,a.compose)((0,a.withProps)((function(t){var e=t.storyFonts,n=void 0===e?[]:e,o=t.placeholder,r=t.toolbarStyle,a=void 0===r?{}:r,l=t.className,c=void 0===l?"ms-text-editor":l,s=t.toolbar,u=void 0===s?{}:s;return{editorRef:function(t){return setTimeout((function(){return t&&t.focus&&t.focus()}),100)},stripPastedStyles:!0,placeholder:o,toolbarStyle:a,toolbar:z({options:["fontFamily","blockType","fontSize","inline","textAlign","colorPicker","list","link","remove"],fontFamily:{options:n.length>0?n:i.Km,className:void 0,component:void 0,dropdownClassName:void 0},link:{inDropdown:!1,className:void 0,component:void 0,popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0},inline:{options:["bold","italic","underline","strikethrough","monospace"],bold:{className:"".concat(c,"-toolbar-btn")},italic:{className:"".concat(c,"-toolbar-btn")},underline:{className:"".concat(c,"-toolbar-btn")},strikethrough:{className:"".concat(c,"-toolbar-btn")},code:{className:"".concat(c,"-toolbar-btn")}},textAlign:{left:{className:"".concat(c,"-toolbar-btn")},center:{className:"".concat(c,"-toolbar-btn")},right:{className:"".concat(c,"-toolbar-btn")},justify:{className:"".concat(c,"-toolbar-btn")}},colorPicker:{className:"".concat(c,"-toolbar-btn")},remove:{className:"".concat(c,"-toolbar-btn")}},u),toolbarClassName:"".concat(c,"-toolbar"),wrapperClassName:"".concat(c,"-wrapper"),editorClassName:"".concat(c,"-main")}})),(0,a.renderComponent)(s.Editor)),Z=(0,a.compose)((0,a.lifecycle)({componentWillUnmount:function(){var t=this.props,e=t.editorState,n=t.save;(void 0===n?function(){}:n)((0,K.sc)(e,i.gg))}}),(0,a.withHandlers)({onBlur:function(t){var e=t.toggleEditing,n=void 0===e?function(){}:e;return function(){n(!1)}}}),(0,a.withProps)((function(t){var e=t.sections;return{availableStorySections:(void 0===e?[]:e).reduce((function(t,e){var n,o=[];return[i.ID.IMMERSIVE,i.ID.CAROUSEL].includes(e.type)?e.contents.forEach((function(t){o.push(t)})):o.push(e),[].concat(function(t){if(Array.isArray(t))return V(t)}(n=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o)}),[])}})),(0,a.withProps)((function(t){var e=t.availableStorySections,n=void 0===e?[]:e;return{toolbar:{link:{inDropdown:!1,className:void 0,component:function(t){return r().createElement(P,W({},t,{availableStorySections:n}))},popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0,getLinkDecorator:F}}}})),G);const $=(0,a.compose)((0,a.withState)("contentEditing","setContentEditing",!1),(0,a.withState)("editorState","onEditorStateChange"),(0,a.withHandlers)({toggleEditing:function(t){var e=t.bubblingTextEditing,n=void 0===e?function(){}:e,o=t.sectionType,r=t.onEditorStateChange,a=void 0===r?function(){}:r,l=t.setContentEditing,s=void 0===l?function(){}:l;return function(t,e){if(t){var r=(0,K.n0)(e);if(o===i.ID.TITLE&&"unstyled"===c.RichUtils.getCurrentBlockType(r)){var l=r.getCurrentContent();l=c.Modifier.setBlockType(l,c.EditorState.createWithContent(l).getSelection(),"header-one"),r=c.EditorState.createWithContent(l)}a(r),s(!0),n(!0)}else s(!1),n(!1)}}}),(0,a.branch)((function(t){return!!t.contentEditing}),Z)),J=(0,a.compose)((0,a.withHandlers)({save:function(t){var e=t.update,n=void 0===e?function(){}:e;return function(t){return n("html",t)}}}),(0,a.branch)((function(t){return t.mode===i.nl.EDIT}),$),(0,a.compose)((0,a.withPropsOnChange)(["sectionType"],(function(t){var e=t.sectionType;return{placeholder:i.ID.TITLE===e?"geostory.builder.defaults.htmlTitlePlaceholder":"geostory.builder.defaults.htmlPlaceholder",placeholderTag:i.ID.TITLE===e?"h1":"p"}})),(0,l.Z)("placeholder")))((function(t){var e=t.placeholder,n=t.placeholderTag,o=void 0===n?"p":n,a=t.id,l=t.toggleEditing,c=void 0===l?function(){}:l,s=t.html,u=t.mode;return r().createElement("div",{className:"ms-text-wrapper"},s!==i.gg&&r().createElement("div",{id:a,onClick:function(){return c(!0,s)},dangerouslySetInnerHTML:{__html:s}}),(!s||s===i.gg)&&u===i.nl.EDIT&&r().createElement("div",{className:"ms-text-placeholder",id:"placeholder"+a,onClick:function(){return c(!0,s===i.gg?"":s)},dangerouslySetInnerHTML:{__html:"<".concat(o,">").concat(e,"</").concat(o,">")}}))}))},629859:(t,e,n)=>{"use strict";n.d(e,{n0:()=>u,sc:()=>p});var o=n(909041),r=n(689265),a=n.n(r),i=n(717247),l=n.n(i),c=function(t){var e=void 0;if(t instanceof HTMLAnchorElement){var n={};if(t.dataset&&void 0!==t.dataset.mention)n.url=t.href,n.text=t.innerHTML,n.value=t.dataset.value,e=o.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=t.getAttribute&&t.getAttribute("href")||t.href,n.title=t.innerHTML,n.targetOption=t.target;var r=t.getAttribute&&t.getAttribute("data-geostory-interaction-type"),a=t.getAttribute&&t.getAttribute("data-geostory-interaction-params"),i=t.getAttribute&&t.getAttribute("data-geostory-interaction-name"),l={};i&&a&&r&&(l["data-geostory-interaction-type"]=r,l["data-geostory-interaction-params"]=a,l["data-geostory-interaction-name"]=i),n.attributes=l,e=o.Entity.__create("LINK","MUTABLE",n)}}return e},s=function(t,e){if("MENTION"===t.type)return'< href="'.concat(t.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(t.data.value,'">').concat(e,"</a>");if("LINK"===t.type){var n=t.data.targetOption||"_self",o=t.data.attributes;return o&&o["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(o["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(o["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(o["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(o["data-geostory-interaction-params"],"')\">").concat(e,"</a>"):'<a href="'.concat(t.data.url,'" target="').concat(n,'">').concat(e,"</a>")}if("IMAGE"===t.type){var r=t.data.alignment,a=r&&"none"!==r?"float: ".concat(r,";"):"display: block; margin: 0 auto 0 auto;";return'<img src="'.concat(t.data.src,'" alt="').concat(t.data.alt,'" style="height: ').concat(t.data.height,"; width: ").concat(t.data.width,"; ").concat(a,'" />')}return"EMBEDDED_LINK"===t.type?'<iframe width="'.concat(t.data.width,'" height="').concat(t.data.height,'" src="').concat(t.data.src,'" frameBorder="0"></iframe>'):e},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=l()(t,null,c),n=o.ContentState.createFromBlockArray(e.contentBlocks);return o.EditorState.createWithContent(n)},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t){var n=1!==(0,o.convertToRaw)(t.getCurrentContent()).blocks.length||(0,o.convertToRaw)(t.getCurrentContent()).blocks[0].text,r=a()((0,o.convertToRaw)(t.getCurrentContent()),null,null,s);return n?r:e}return e}}}]);