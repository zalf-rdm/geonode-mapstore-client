(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[57755],{807691:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>M});var n=t(49977),o=t.n(n),i=t(557579),a=t(555927),s=t(782904),c=t(95797),u=t(197395),l=t(807878),f=t(263516),v=t(367306),d=t(274621),b=t(401757),y=t(324684),p=t(291312),g=t(589919),m=t(275982),h=["data"],O=["status","statusText","data","message"];function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function j(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return P(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?D(Object(t),!0).forEach((function(r){k(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function k(e,r,t){return(r=function(e){var r=function(e,r){if("object"!==w(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r);if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===w(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var T=function(e){var r=(0,b.JT)(e);return[r.search&&r.search.url,r.name]};const M={openDashboardWidgetEditor:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(i.AE,i.dm).filter((function(){return(0,v.Wy)(n())})).switchMap((function(){return o().Observable.of((0,a.D_)(!0))}))},closeDashboardWidgetEditorOnFinish:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(i.Jm).filter((function(){return(0,v.Wy)(n())})).switchMap((function(){return o().Observable.of((0,a.D_)(!1))}))},initDashboardEditorOnNew:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(i.AE).filter((function(){return(0,v.Wy)(n())})).switchMap((function(e){return o().Observable.of((0,i.bS)(E(E({legend:!1,mapSync:!1,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},closeDashboardEditorOnExit:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(m.nk).filter((function(){return(0,v.Wy)(n())})).filter((function(){return(0,v.i$)(n())})).switchMap((function(){return o().Observable.of((0,a.D_)(!1))}))},handleDashboardWidgetsFilterPanel:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(i.lG).filter((function(){return(0,v.Wy)(n())})).switchMap((function(){return o().Observable.of(c.gT.apply(void 0,j(T(n()))),(0,l.F)((0,b.um)(n())),(0,s.Xg)("queryPanel","enabled",!0)).concat(o().Observable.race(e.ofType(l.Wm).take(1),e.ofType(s.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"queryPanel"===r&&(!t||"enabled"===t)})).take(1)).switchMap((function(e){return(e.filterObj?o().Observable.of((0,i.Rz)("filter",e.filterObj)):o().Observable.empty()).merge(o().Observable.of((0,s.Xg)("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(m.nk,i.dm).merge(e.ofType(s.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"widgetBuilder"===r&&0==!t})))).concat(o().Observable.of((0,s.Xg)("queryPanel","enabled",!1)))}))},filterAnonymousUsersForDashboard:function(e,r){return e.ofType(f.c8,f.Nv).filter((function(){return"/dashboard"===(0,y.F)(r.getState())})).switchMap((function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),(0,d.jl)(r.getState())?o().Observable.empty():o().Observable.of((0,a.AN)({status:403}))}))},loadDashboardStream:function(e,r){var t=r.getState,n=void 0===t?function(){}:t;return e.ofType(a.zX).switchMap((function(e){var r=e.id;return(0,p.RX)(r).map((function(e){var r=e.data,t=S(e,h);return(0,a.rR)(t,r)})).let((0,g.hP)((0,a.vM)(!0,"loading"),(0,a.vM)(!1,"loading"),(function(e){var r=window.location.href.match("dashboard-embedded")?"dashboardEmbedded":"dashboard",t=r+".errors.loading.unknownError";return 403===e.status&&(t=r+".errors.loading.pleaseLogin",(0,d.jl)(n())&&(t=r+".errors.loading.dashboardNotAccessible")),404===e.status&&(t=r+".errors.loading.dashboardDoesNotExist"),o().Observable.of((0,u.vU)({title:r+".errors.loading.title",message:t}),(0,a.AN)(E(E({},e),{},{messageId:t})))})))}))},reloadDashboardOnLoginLogout:function(e){return e.ofType(a.zX).switchMap((function(r){var t=r.id;return e.ofType(f.XP,f.Nv).switchMap((function(){return o().Observable.of((0,a.o2)(t)).delay(1e3)})).takeUntil(e.ofType(m.nk))}))},saveDashboard:function(e){return e.ofType(a.aR).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.resource;return(r.id?(0,p.id)(r):(0,p.SN)(r)).switchMap((function(e){return o().Observable.of((0,a.sA)(e),r.id?(0,a.gE)(!1):(0,a.pB)(!1),r.id?(0,a.o2)(e):(0,m.VF)("/dashboard/".concat(e))).merge(o().Observable.of((0,u.$Z)({id:"DASHBOARD_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(r.id?0:1e3))})).let((0,g.hP)((0,a.vM)(!0,"saving"),(0,a.vM)(!1,"saving"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.status,t=e.statusText,n=e.data,i=e.message,s=S(e,O);return o().Observable.of((0,a.GD)(r?{status:r,statusText:t,data:n}:i||s),(0,a.vM)(!1,"saving"))}))}))}}},24412:(e,r,t)=>{"use strict";t.d(r,{Z:()=>v});var n=t(555927),o=t(557579),i=t(761868),a=t(984596),s=t.n(a);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){f(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function f(e,r,t){return(r=function(e){var r=function(e,r){if("object"!==c(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r);if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===c(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showConnections:!0,services:null,saveServiceLoading:!1},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.BJ:return(0,i.t8)("editor.available",r.available,e);case n._y:case o.wb:case o.Jm:case o.yY:return(0,i.t8)("editing",r.editing,e);case n.vk:return(0,i.t8)("showConnections",r.show,e);case n.uI:return(0,i.t8)("showSaveModal",r.show,(0,i.t8)("saveErrors",void 0,e));case n.mg:return(0,i.t8)("showSaveAsModal",r.show,(0,i.t8)("saveErrors",void 0,e));case n.E9:var t;return l(l({},e),{},{originalData:r.data,resource:r.resource,services:null===(t=r.data)||void 0===t?void 0:t.catalogs});case n.R4:return l(l({},e),{},{originalData:void 0,resource:void 0,mode:"view",services:void 0});case n.SW:return(0,i.t8)("saveErrors",s()(r.error),e);case n.$l:return(0,i.t8)("saveErrors",void 0,e);case n.E5:var a;return l(l({},e),{},{services:e.services||r.services,selectedService:(null===(a=r.service)||void 0===a?void 0:a.key)||""});case n.s6:return(0,i.t8)("services",r.services,e);case n.B_:return l(l({},e),{},{mode:r.mode,isNew:r.isNew,saveServiceLoading:!1});case n.TA:return l(l({},e),{},{saveServiceLoading:r.loading});case n.CF:var c=r.services,u=r.service;u.isNew=!1,u.showAdvancedSettings=!1,delete u.old,c[u.key]=u;var f=u.key;return l(l({},e),{},{services:c,selectedService:f,mode:"view"});case n.js:var v,d,b=r.services,y=r.service;(b[y.key]||b[null===(v=y.old)||void 0===v?void 0:v.key])&&(delete b[y.key]||b[null===(d=y.old)||void 0===d?void 0:d.key]);var p=Object.keys(b)[0]||"";return l(l({},e),{},{services:b,mode:"view",selectedService:p});case n.CP:return(0,i.t8)("loading"===r.name?"loading":"loadFlags.".concat(r.name),r.value,(0,i.t8)("loading",r.value,e));default:return e}}}}]);