/*! For license information please see iso-download-plugin.bc9e96895cbf9525.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[32355],{788554:(n,e,t)=>{"use strict";t.d(e,{Wr:()=>r,KA:()=>o,AT:()=>a,d_:()=>i});var r="GEONODE:DOWNLOAD_METADATA",o="GEONODE:DOWNLOAD_METADATA_COMPLETE";function a(n,e){return{type:r,link:n,pk:e}}function i(n,e){return{type:o,link:n,pk:e}}},228261:(n,e,t)=>{"use strict";t.d(e,{Z:()=>s});var r=t(124852),o=t.n(r),a=t(45697),i=t.n(a),l=["id","className","style","children"];function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(null,arguments)}function c(n){var e=n.id,t=n.className,r=n.style,a=n.children,i=function(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}(n,l),c=t?" "+t:"";return o().createElement(o().Fragment,null,o().createElement("div",u({},i,{id:e,className:"gn-spinner".concat(c),style:r}),o().createElement("div",null)),a)}c.propTypes={id:i().string,className:i().string,style:i().object},c.defaultProps={};const s=c},51605:(n,e,t)=>{"use strict";t.d(e,{Z:()=>r.Z});var r=t(228261)},985774:(n,e,t)=>{"use strict";t.d(e,{l:()=>c});var r=t(49977),o=t(375875),a=t.n(o),i=t(178598),l=t(788554),u=t(197395),c=function(n,e){return n.ofType(l.Wr).switchMap((function(n){var t,o,c,s,d,f=e.getState(),v=null===(t=f.gnresource)||void 0===t||null===(o=t.data)||void 0===o||null===(c=o.links)||void 0===c?void 0:c.find((function(e){return e.name===n.link})).url,p=null===(s=f.gnresource)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.title;return r.Observable.defer((function(){return a().get(v).then((function(n){return n}))})).switchMap((function(e){var t=e.data,o=e.headers;if("application/xml"===o["content-type"]||"application/xml; charset=UTF-8"===o["content-type"]){var a=String.fromCharCode.apply(null,new Uint8Array(t));if(0===a.indexOf("<ows:ExceptionReport"))throw a}return(0,i.saveAs)(new Blob([t],{type:o&&o["content-type"]}),"".concat(p,"_").concat(n.link.split(" ").join("_"),"_Metadata")),r.Observable.of((0,l.d_)(n.link,n.pk))})).catch((function(e){var t,o,a;return r.Observable.of((0,l.d_)(n.link,n.pk),(0,u.vU)({title:"gnviewer.cannotPerfomAction",message:(null==e||null===(t=e.data)||void 0===t?void 0:t.message)||(null==e||null===(o=e.data)||void 0===o?void 0:o.detail)||(null==e||null===(a=e.originalError)||void 0===a?void 0:a.message)||"gnviewer.syncErrorDefault"}))}))}))}},11800:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>w});var r=t(124852),o=t.n(r),a=t(171703),i=t(22222),l=t(322843),u=t(805346),c=t(638323),s=t(788554),d=t(985774),f=t(51605),v=t(894176);function p(n){var e=n.onDownload,t=n.resourcePk,r=n.isDownloading;return o().createElement(c.Z,{variant:"default",onClick:function(){return e("Dublin Core",t)}},r&&o().createElement(f.Z,{animation:"border",role:"status"},o().createElement("span",{className:"sr-only"},"Loading..."))," ",o().createElement(u.Z,{msgId:"gnviewer.dublinCore"}))}var m=(0,a.connect)((0,i.P1)([function(n){var e;return(null==n||null===(e=n.gnresource)||void 0===e?void 0:e.data.pk)||null},function(n){var e,t;return(null==n||null===(e=n.gnDownload)||void 0===e||null===(t=e.downloads)||void 0===t?void 0:t.DublinCore)||{}}],(function(n,e){return{resourcePk:n,isDownloading:e[n]}})),{onDownload:s.AT})(p);p.defaultProps={onDownload:function(){},resourcePk:null,isDownloading:!1};const w=(0,l.rx)("DublinCoreDownload",{component:function(){return null},containers:{ActionNavbar:{name:"DublinCoreDownload",Component:m}},epics:{gnDownloadMetaData:d.l},reducers:{gnDownload:v.Z}})},125762:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>w});var r=t(124852),o=t.n(r),a=t(171703),i=t(22222),l=t(322843),u=t(805346),c=t(638323),s=t(788554),d=t(985774),f=t(51605),v=t(894176);function p(n){var e=n.onDownload,t=n.resourcePk,r=n.isDownloading;return o().createElement(c.Z,{variant:"default",onClick:function(){return e("ISO",t)},className:"isobutton"},r&&o().createElement(f.Z,{animation:"border",role:"status"},o().createElement("span",{className:"sr-only"},"Loading..."))," ",o().createElement(u.Z,{msgId:"gnviewer.iso"}))}var m=(0,a.connect)((0,i.P1)([function(n){var e;return(null==n||null===(e=n.gnresource)||void 0===e?void 0:e.data.pk)||null},function(n){var e,t;return(null==n||null===(e=n.gnDownload)||void 0===e||null===(t=e.downloads)||void 0===t?void 0:t.ISO)||{}}],(function(n,e){return{resourcePk:n,isDownloading:e[n]}})),{onDownload:s.AT})(p);p.defaultProps={onDownload:function(){},resourcePk:null,isDownloading:!1};const w=(0,l.rx)("IsoDownload",{component:function(){return null},containers:{ActionNavbar:{name:"IsoDownload",Component:m}},epics:{gnDownloadMetaData:d.l},reducers:{gnDownload:v.Z}})},894176:(n,e,t)=>{"use strict";t.d(e,{Z:()=>c});var r=t(788554);function o(n){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(n)}function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){l(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e,t){return(e=function(n){var e=function(n){if("object"!=o(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=o(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==o(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var u={downloads:{ISO:{},DublinCore:{}}};const c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case r.Wr:var t,o=null==e||null===(t=e.link)||void 0===t?void 0:t.split(" ").join("");return i(i({},n),{},{downloads:i(i({},n.downloads),{},l({},o,l({},e.pk,!0)))});case r.KA:var a,c=i({},n),s=null==e||null===(a=e.link)||void 0===a?void 0:a.split(" ").join(""),d=c.downloads[s];return delete d[e.pk],i(i({},c),{},{downloads:i(i({},c.downloads),{},l({},s,i({},d)))});default:return n}}},178598:function(n,e,t){var r,o=o||function(n){"use strict";if(!(void 0===n||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=n.document,t=function(){return n.URL||n.webkitURL||n},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=/constructor/i.test(n.HTMLElement)||n.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(n.setImmediate||n.setTimeout)((function(){throw e}),0)},u=function(n){setTimeout((function(){"string"==typeof n?t().revokeObjectURL(n):n.remove()}),4e4)},c=function(n){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob([String.fromCharCode(65279),n],{type:n.type}):n},s=function(e,s,d){d||(e=c(e));var f,v=this,p="application/octet-stream"===e.type,m=function(){!function(n,e){for(var t=(e=[].concat(e)).length;t--;){var r=n["on"+e[t]];if("function"==typeof r)try{r.call(n,n)}catch(n){l(n)}}}(v,"writestart progress write writeend".split(" "))};if(v.readyState=v.INIT,o)return f=t().createObjectURL(e),void setTimeout((function(){var n,e;r.href=f,r.download=s,n=r,e=new MouseEvent("click"),n.dispatchEvent(e),m(),u(f),v.readyState=v.DONE}));!function(){if((i||p&&a)&&n.FileReader){var r=new FileReader;return r.onloadend=function(){var e=i?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");n.open(e,"_blank")||(n.location.href=e),e=void 0,v.readyState=v.DONE,m()},r.readAsDataURL(e),void(v.readyState=v.INIT)}f||(f=t().createObjectURL(e)),p?n.location.href=f:n.open(f,"_blank")||(n.location.href=f),v.readyState=v.DONE,m(),u(f)}()},d=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(n,e,t){return e=e||n.name||"download",t||(n=c(n)),navigator.msSaveOrOpenBlob(n,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(n,e,t){return new s(n,e||n.name||"download",t)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);n.exports?n.exports.saveAs=o:null!==t.amdD&&null!==t.amdO&&(void 0===(r=function(){return o}.call(e,t,e,n))||(n.exports=r))}}]);