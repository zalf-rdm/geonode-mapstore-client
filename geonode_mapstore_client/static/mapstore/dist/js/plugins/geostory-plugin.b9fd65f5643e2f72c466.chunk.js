(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62933,96958,92579,66287,30049,66113,93546],{501157:(e,t,n)=>{"use strict";n.d(t,{ID:()=>T,en:()=>C,Xv:()=>A,FU:()=>M,gs:()=>D,tt:()=>R,jY:()=>Z,T6:()=>F,ZP:()=>L});var r=n(472500),o=n.n(r),i=n(701469),a=n.n(i),c=n(984596),l=n.n(c),u=n(227361),s=n.n(u),f=n(505055),d=n.n(f),p=n(375875),y=n.n(p),m=n(737275),v=n(916651),b=n(577215);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={},j="1.3.0",T="1.1.1",C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{service:"WMS",version:j,request:"GetCapabilities"},n=arguments.length>2?arguments[2]:void 0,r=(a()(e)&&e||e.split(","))[0],i=o().parse(r,!0);return o().format(S(S({},i),{},{search:null,query:S(S(S({},t),i.query),(null==n?void 0:n.query)||{})}))},I=function(e){var t=e&&e.Title,n=e.LogoURL&&S(S({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),r=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:n,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:r}},A=function e(t){var n,r,o=null!==(n=null==t?void 0:t.Layer)&&void 0!==n?n:null==t?void 0:t.layer,i=null!==(r=null==t?void 0:t.Name)&&void 0!==r?r:null==t?void 0:t.name;return o?l()(o).reduce((function(t,n){var r,o,i=null!==(r=n.Layer)&&void 0!==r?r:n.layer,a=null!==(o=n.Name)&&void 0!==o?o:n.name;return[].concat(h(t),h(e(n)),h(i&&a?[n]:[]))}),[]):i&&[t]||[]},k=function(){var e,t,n,r,o,i,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,p=u.Capability,y=u.Service,m=(c=p).Request&&c.Request.GetMap&&c.Request.GetMap.DCPType&&c.Request.GetMap.DCPType.HTTP&&c.Request.GetMap.DCPType.HTTP.Get&&c.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&c.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,v=p.Layer&&(null===(e=p.Layer.SRS||p.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],b=p.Layer&&p.Layer.Attribution&&I(p.Layer.Attribution),g=l()((null==p||null===(t=p.Request)||void 0===t||null===(n=t.GetMap)||void 0===n?void 0:n.Format)||[]),h=l()((null==p||null===(r=p.Request)||void 0===r||null===(o=r.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]),O=A(p),w=(a()(O)?O:[O]).filter((function(e){return!d||-1!==e.Name.toLowerCase().indexOf(d.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(d.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(d.toLowerCase())}));return{numberOfRecordsMatched:w.length,numberOfRecordsReturned:Math.min(f,w.length),nextRecord:s+Math.min(f,w.length)+1,service:y,layerOptions:{version:(null==u||null===(i=u.$)||void 0===i?void 0:i.version)||j},records:w.filter((function(e,t){return t>=s-1&&t<s-1+f})).map((function(e){return S(S({},e),{},{getMapFormats:g,getFeatureInfoFormats:h,onlineResource:m,SRS:v,credits:e.Attribution?I(e.Attribution):b})}))}},M=function(e){return y().get(C(e,{service:"WMS",version:j,request:"GetCapabilities"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,n){t=n})),t.WMS_Capabilities||t.WMT_MS_Capabilities||{}}))},x=function(e,t,n,r){var o=E[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,m.u8)("cacheExpire")||60)?new Promise((function(e){e(k(o.data,t,n,r))})):M(e).then((function(o){return E[e]={timestamp:(new Date).getTime(),data:o},k(o,t,n,r)}))},D=function(e,t){return y().get(C(e,{service:"WMS",version:T,layers:t,request:"DescribeLayer"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,n){t=n&&n.WMS_DescribeLayerResponse&&n.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return S(S({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:S({},e&&e.query&&e.query.$||{})})}))}))},R=function(e,t,n,r){return x(e,t,n,r)},Z=function(e,t){for(var n=e,r=n.EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,v.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;!r&&n.Layer&&n.Layer.length;)r=(n=n.Layer[0]).EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,v.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;r||(r={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[r.westBoundLongitude||r.minx,r.southBoundLatitude||r.miny,r.eastBoundLongitude||r.maxx,r.northBoundLatitude||r.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return M(e).then((function(e){var n,r,o,i,a=e.Capability,c=l()((null==a||null===(n=a.Request)||void 0===n||null===(r=n.GetMap)||void 0===r?void 0:r.Format)||[]).filter(b.F0);return t?{imageFormats:c,infoFormats:l()((null==a||null===(o=a.Request)||void 0===o||null===(i=o.GetFeatureInfo)||void 0===i?void 0:i.Format)||[]).filter(b.cP)}:c})).catch((function(){return t?{imageFormats:[],infoFormats:[]}:[]}))};const L={flatLayers:A,parseUrl:C,getDimensions:function(e){return l()(e.Dimension||e.dimension||[]).map((function(t,n){var r=e.Extent&&l()(e.Extent)[n]||e.extent&&l()(e.extent)[n];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||r&&r.$.default,values:t._&&t._.split(",")||r&&r._&&r._.split(",")}}))},getCapabilities:M,describeLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y().get(C(e,{service:"WMS",version:T,layers:t,request:"DescribeLayer"},n)).then((function(e){var t,n,r;d().parseString(e.data,{explicitArray:!1},(function(e,t){r=t}));var o=(null===(t=r)||void 0===t||null===(n=t.WMS_DescribeLayerResponse)||void 0===n?void 0:n.LayerDescription)&&l()(r.WMS_DescribeLayerResponse.LayerDescription)[0];return o&&S(S({},null==o?void 0:o.$),(null==o?void 0:o.Query)&&{query:l()(o.Query).map((function(e){return S({},null==e?void 0:e.$)}))})}))},getRecords:x,describeLayers:D,textSearch:R,parseLayerCapabilities:function(e,t){var n=e.Capability;return A(n).find((function(e){var n=e.Name;return 2===t.name.split(":").length&&n&&2===n.split(":").length?t.name===n&&e:n&&2===n.split(":").length?t.name===n.split(":")[1]&&e:2===t.name.split(":").length?t.name.split(":")[1]===n&&e:t.name===n&&e}))},getBBox:Z,reset:function(){Object.keys(E).forEach((function(e){delete E[e]}))},getSupportedFormat:F}},603475:(e,t,n)=>{"use strict";n.d(t,{hn:()=>j,ZP:()=>T});var r=n(375875),o=n.n(r),i=n(737275),a=n(472500),c=n.n(a),l=n(727418),u=n.n(l),s=n(505055),f=n.n(s),d=n(984596),p=n.n(d),y=n(916651),m=n(611847),v=n(707294);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={},S=function(e){var t=c().parse((0,m.eW)(e),!0);return c().format(u()({},t,{search:null},{query:u()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},P=function(e,t,n,r,o){for(var i=e.Capabilities.Contents,a=(0,v.G6)(e),c=(0,v.s5)(e),l=i.TileMatrixSet&&p()(i.TileMatrixSet)||[],s=[],f=l.length,d=0;d<f;d++)s.push((0,y.getEPSGCode)(l[d]["ows:SupportedCRS"]));var m=i.Layer,b=p()(m).filter((function(e){return!r||-1!==e["ows:Identifier"].toLowerCase().indexOf(r.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(r.toLowerCase())}));return{numberOfRecordsMatched:b.length,numberOfRecordsReturned:Math.min(n,b.length),nextRecord:t+Math.min(n,b.length)+1,records:b.filter((function(e,r){return r>=t-1&&r<t-1+n})).map((function(e){return u()({},e,{SRS:s,TileMatrixSet:l,queryable:!!(0,v.b4)(a,"GetFeatureInfo","KVP"),requestEncoding:c,style:(0,v.EN)(e),format:(0,v.JY)(e),formats:p()(e.Format),GetTileURL:(0,v.b4)(a,"GetTile",c),capabilitiesURL:o})}))}},E={parseUrl:S,getRecords:function(e,t,n,r){var a=w[e];return a&&(new Date).getTime()<a.timestamp+1e3*((0,i.u8)("cacheExpire")||60)?new Promise((function(o){o(P(a.data,t,n,r,e))})):o().get(S(e)).then((function(o){var i;return f().parseString(o.data,{explicitArray:!1},(function(e,t){i=t})),w[e]={timestamp:(new Date).getTime(),data:i},P(i,t,n,r,e)}))},getCapabilities:function(e,t){null!=t&&t.force&&w[e]&&delete w[e];var n=w[e];return n&&(new Date).getTime()<n.timestamp+1e3*((0,i.u8)("cacheExpire")||60)?new Promise((function(e){e(n.data)})):o().get(S(e)).then((function(t){var n;return f().parseString(t.data,{explicitArray:!1},(function(e,t){n=t})),w[e]={timestamp:(new Date).getTime(),data:n},n}))},textSearch:function(e,t,n,r){return E.getRecords(e,t,n,r)},reset:function(){Object.keys(w).forEach((function(e){delete w[e]}))}},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return E.getCapabilities(e,{force:null==n?void 0:n.force}).then((function(e){var n,r,o,i,a=t.split(":"),c=p()((null==e||null===(n=e.Capabilities)||void 0===n||null===(r=n.Contents)||void 0===r?void 0:r.Layer)||[]).find((function(e){return e["ows:Identifier"]===a[1]||e["ows:Identifier"]===t})),l=p()((null==c?void 0:c.TileMatrixSetLink)||[]).map((function(e){return e.TileMatrixSet})),u=p()((null==e||null===(o=e.Capabilities)||void 0===o||null===(i=o.Contents)||void 0===i?void 0:i.TileMatrixSet)||[]).filter((function(e){return l.includes(e["ows:Identifier"])})),s=u.map((function(e){var t=e.TileMatrix.map((function(e){return e.TopLeftCorner.split(" ").map(parseFloat)})),n=e.TileMatrix.map((function(e){return[parseFloat(e.TileWidth),parseFloat(e.TileHeight)]})),r=t[0],o=n[0],i=t.every((function(e){return r[0]===e[0]&&r[1]===e[1]})),a=n.every((function(e){return o[0]===e[0]&&o[1]===e[1]}));return h(h({id:e["ows:Identifier"],crs:(0,y.getEPSGCode)(e["ows:SupportedCRS"]),scales:e.TileMatrix.map((function(e){return parseFloat(e.ScaleDenominator)}))},i?{origin:r}:{origins:t}),a?{tileSize:o}:{tileSizes:n})}));return{tileMatrixSets:u,tileMatrixSetLinks:l,tileGrids:s,styles:p()((null==c?void 0:c.Style)||[]).map((function(e){return e["ows:Identifier"]})),formats:p()((null==c?void 0:c.Format)||[])}}))};const T=E},911766:(e,t,n)=>{"use strict";n.d(t,{H:()=>E,Z:()=>j});var r=n(124852),o=n.n(r),i=n(212961),a=n(513218),c=n.n(a),l=n(717621),u=n.n(l),s=n(480681),f=n(38560),d=n(725288),p=n(145869),y=n(805346),m=n(615402),v=n(815135),b=["boxShadow","MozBoxShadow","WebkitBoxShadow"];function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=(0,v.Z)(f.Z);function P(e){var t=e.themeStyle,n=e.disableBackgroundPicker,a=void 0!==n&&n,c=e.disableBackgroundAlpha,l=e.disableTextColor,f=e.disableShadow,v=e.onChange,g=void 0===v?function(){}:v,h=e.onOpen,w=void 0===h?function(){}:h,P=e.placement,E=(0,r.useRef)(),j=null==t?void 0:t.backgroundColor,T=null==t?void 0:t.color,C=!l&&j&&T&&!u().isReadable(T,j)?u().mostReadable(j,[T,"#000000","#ffffff"],{includeFallbackColors:!0}).toHexString():null;return o().createElement(o().Fragment,null,!a&&o().createElement("div",{className:"ms-custom-theme-picker-field"},o().createElement("div",null,o().createElement(y.Z,{msgId:"geostory.customizeTheme.backgroundColorLabel"})),o().createElement("div",null,o().createElement(i.Z,{placement:P,key:j,onOpen:w,color:j,format:c?"hex":"rgb",disableAlpha:c,presetColors:[],onChangeColor:function(e){var n=u()(e).isLight()?u()(e).darken(10).toHexString():u()(e).lighten(15).toHexString(),r=!l&&!(null!=t&&t.color)&&{color:u().mostReadable(e,["#000000","#ffffff"],{includeFallbackColors:!0}).toHexString()};g(O(O({},t),{},{backgroundColor:e,borderColor:n},!l&&r))}}))),!l&&o().createElement("div",{className:"ms-custom-theme-picker-field"},o().createElement("div",null,o().createElement("div",null,o().createElement(y.Z,{msgId:"geostory.customizeTheme.textColorLabel"})),o().createElement(d.Z,{className:"ms-custom-theme-picker-popover",ref:function(e){e&&(E.current=e.trigger)},placement:"top",content:o().createElement(o().Fragment,null,o().createElement(m.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:C}}),o().createElement(S,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,n;g(O(O({},t),{},{color:C})),null===(e=E.current)||void 0===e||null===(n=e.hide)||void 0===n||n.call(e)}},o().createElement(y.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},C&&o().createElement(S,{className:"square-button-md no-border",style:{display:C?"block":"none"}},o().createElement(s.gG,{glyph:"exclamation-mark"}))||o().createElement("div",null))),o().createElement("div",null,o().createElement(i.Z,{placement:P,key:T,color:T,onOpen:w,format:"hex",disableAlpha:!0,presetColors:[],onChangeColor:function(e){g(O(O({},t),{},{color:e}))}}))),!f&&o().createElement("div",{className:"ms-custom-theme-picker-field"},o().createElement("div",null,o().createElement(y.Z,{msgId:"geostory.customizeTheme.shadowLabel"})),o().createElement("div",null,o().createElement(p.Z,{checked:null==t?void 0:t.boxShadow,onChange:function(){var e=t||{},n=e.boxShadow,r=(e.MozBoxShadow,e.WebkitBoxShadow,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,b));g(n?O({},r):O(O({},r),{},{boxShadow:"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)"}))}}))))}function E(e){var t=e.selected,n=e.value,r=e.storyTheme,i=e.onUpdate,a=e.onActive,l=e.disableBackgroundAlpha,u=e.disableTextColor,f=e.disableShadow,d=function(e,r){var o=c()(t)&&t;return i("theme",O(O({},o),{},r?w({value:e},n,O({},r)):{value:e}))},p=r||{},m=p.color,v=p.backgroundColor,b=v&&{backgroundColor:v},g=O(O({},!u&&m&&{color:m}),b),h=(null==t?void 0:t.value)===n,E=(null==t?void 0:t[n])||g;return o().createElement(o().Fragment,null,h?o().createElement("div",{className:"ms-custom-theme-picker-menuitem-header"},o().createElement("div",null,o().createElement(y.Z,{msgId:"geostory.contentToolbar.customizeThemeLabel"})),o().createElement(S,{tooltipId:"geostory.contentToolbar.customizeThemeRemoveLabel",className:"square-button-md no-border",onClick:function(e){e.stopPropagation(),d("")}},o().createElement(s.gG,{glyph:"trash"}))):o().createElement(o().Fragment,null,o().createElement(s.sN,{active:h,onClick:function(){return d(n,E)}},o().createElement(y.Z,{msgId:"geostory.contentToolbar.customizeThemeLabel"}))),h&&o().createElement("div",{className:"ms-custom-theme-picker-menuitem"},o().createElement(P,{disableBackgroundAlpha:l,disableTextColor:u,disableShadow:f,themeStyle:E,onChange:function(e){return d(n,e)},onOpen:a})))}const j=P},725288:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),c=n(480681),l=n(737275);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function f(e,t,n){return t=p(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var b=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(e=f(this,t,[].concat(r)),"getContainerNode",(function(t){return t?document.body:e.parentNode||document.querySelector("."+(l.ZP.getConfigProp("themePrefix")||"ms2")+" > div")||document.body})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.getContainerNode(this.props.useBody);return o().createElement("div",{ref:function(t){e.parentNode=t&&t.parentNode},className:this.props.className,style:this.props.style},o().createElement(c.Ox,{ref:function(t){e.trigger=t},trigger:["click"],container:t,placement:this.props.placement,rootClose:!0,overlay:o().createElement(c.J2,{id:this.props.id,title:this.props.title,className:this.props.popoverClassName},this.props.content)},this.props.children))}}])&&s(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);m(b,"propTypes",{id:a().string,style:a().object,className:a().string,popoverClassName:a().string,placement:a().string,title:a().node,content:a().node,useBody:a().bool}),m(b,"defaultProps",{id:"",useBody:!1});const g=b},323010:(e,t,n)=>{"use strict";n.d(t,{d:()=>x,Z:()=>R});var r=n(124852),o=n.n(r),i=n(867076),a=n(423570),c=n.n(a),l=n(747359),u=n(1979),s=n(618446),f=n.n(s),d=n(624262),p=n(945402),y=n(49977),m=n(249243),v=n(313311),b=n.n(v),g=n(171703),h=n(134990),O=n(866113);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}var S=["rawPos"],P=["PopupSupport","tools"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(null,arguments)}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function M(e){return e&&0===e.indexOf("geostory-vector")}var x=(0,i.compose)((0,g.connect)((function(e){return{sections:(0,O.NR)(e)}}),{onClickMarker:h.Vx}),(0,i.withHandlers)({onClickMarker:function(e){var t=e.onClickMarker,n=void 0===t?function(){}:t;return function(e,t,r){var i=b()(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.queryParams,r=(void 0===n?{}:n).request,o=e.layerMetadata,i=(void 0===o?{}:o).layerId;return!r&&i.toLowerCase()===t}))||{},a=i.response,c=(void 0===a?{}:a).features,l=A(void 0===c?[]:c,1)[0],u={popups:[]};if(null!=l&&l.properties){var s=null==l?void 0:l.properties,f=s.sectionId,d=s.contentId,p=s.title;n('sections[{"id":"'.concat(f,'"}].contents[{"id":"').concat(d,'"}].carouselToggle'),!0),p&&(u={popups:r.map((function(e){return C(C({},e),{},{component:function(){return o().createElement("div",{className:"ms-geostory-carousel-viewer"},p)}})}))})}return u}}})),D=(0,i.mapPropsStream)((function(e){var t=(0,i.createEventHandler)(),n=t.stream,r=t.handler;return n.withLatestFrom(e.map((function(e){return{map:e.map,layers:e.layers,options:e.options}})).distinctUntilChanged((function(e,t){return f()(e,t)}))).switchMap((function(e){var t=A(e,2),n=t[0],r=n.point,o=n.layerInfo,i=t[1],a=i.map,l=i.layers,s=void 0===l?[]:l,f=i.options,v=(void 0===f?{}:f).mapOptions,b=(void 0===v?{}:v).mapInfoFormat,g=void 0===b?(0,u.GA)():b,h=s.filter((function(e){return(0,d.T4)(e,a.resolution)&&(0,p.y_)(e)}));M(o)&&(h=h.filter((function(e){var t=e.id;return o===t})));var O=["SLD_BODY"],w=["buffer","cql_filter","filter","propertyName"];return 0===h.length?y.Observable.of({requests:[{}],responses:[{response:{features:[]}}],validResponses:[]}):y.Observable.from(h).mergeMap((function(e){var t=(0,p.Fm)(e,{format:g,map:a,point:r,currentLocale:"en-US"}),n=t.url,o=t.request,i=t.metadata,l=n,u=o,s=C(C({},(0,p.K7)(e,w,O)),u),f=c()();return(n?(0,m.y)(l,s,e).map((function(e){return e.data.exceptions?{reqId:f,exceptions:e.data.exceptions,queryParams:u,layerMetadata:i}:{data:e.data,reqId:f,queryParams:u,layerMetadata:C(C({},i),{},{features:e.features,featuresCrs:e.featuresCrs})}})):y.Observable.empty()).catch((function(e){return{error:e.data||e.statusText||e.status,reqId:f,queryParams:u,layerMetadata:i}})).startWith({start:!0,reqId:f,request:s})})).scan((function(e,t){var n=e.requests,r=e.responses,i=e.validResponses;if(t.start){var a=t.reqId,c=t.request;return{requests:n.concat({reqId:a,request:c}),responses:r,validResponses:i}}var l=t.data,u=t.queryParams,s=t.layerMetadata,f=(0,p.Te)(g),d=r.concat({response:l,queryParams:u,layerMetadata:s});return{requests:n,validResponses:f.getValidResponses(d),responses:d,layerInfo:o}}),{requests:[],responses:[],validResponses:[],layerInfo:o})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){return C(C({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{mapInfo:e,getFeatureInfoHandler:r})}))}));const R=(0,i.branch)((function(e){var t=e.map,n=(void 0===t?{}:t).mapInfoControl,r=void 0!==n&&n;return!e.isDrawEnabled&&r}),(0,i.compose)(D,(0,i.withStateHandlers)({popups:[]},{onClick:function(e,t){var n=t.getFeatureInfoHandler,r=void 0===n?function(){}:n,o=t.map,i=(void 0===o?{}:o).mapInfoControl;return function(e,t){var n=e.rawPos,o=void 0===n?[]:n,a=j(e,S);return M(t)||i?(r({point:a,layerInfo:t}),{popups:[{position:{coordinates:o},id:c()()}]}):{popups:[]}}},onPopupClose:function(){return function(){return{popups:[]}}}}),(0,i.withPropsOnChange)(["mapInfo","popups"],(function(e){var t=e.mapInfo,n=e.popups,r=e.options,i=(void 0===r?{}:r).mapOptions,a=(void 0===i?{}:i).mapInfoFormat,c=void 0===a?(0,u.GA)():a,s=e.onClickMarker,f=void 0===s?function(){}:s,d=t.responses,p=t.requests,y=t.validResponses,m=t.layerInfo;return M(m)?f(y,m,n):{popups:n.map((function(e){return C(C({},e),{},{component:function(){return o().createElement(l.Z,{renderValidOnly:!0,responses:d,requests:p,validResponses:y,format:c,showEmptyMessageGFI:!0,missingResponses:(p||[]).length-(d||[]).length})}})}))}})),(0,i.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=e.popups,r=e.onPopupClose,i=t.PopupSupport,a=t.tools,c=void 0===a?{}:a,l=j(t,P);return i?{plugins:C(C({},l),{},{tools:C(C({},c),{},{popup:function(e){return o().createElement(i,E({},e,{popups:n,onPopupClose:r}))}})})}:{}}))))},81593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(124852),o=n(945338);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const d=function(e){var t,n=e.direction,i=void 0===n?"horizontal":n,a=e.deltaScroll,d=e.width,p=e.height,y=e.transition,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],v=u((0,r.useState)(0),2),b=v[0],g=v[1],h=u((0,r.useState)(0),2),O=h[0],w=h[1],S=(0,r.useRef)({x:0,y:0}),P=u((0,r.useState)(!1),2),E=P[0],j=P[1],T=u((0,r.useState)("start"),2),C=T[0],I=T[1],A=u((0,r.useState)(),2),k=A[0],M=A[1],x=(0,r.useRef)(),D=(0,r.useRef)({});function R(e,t){M("move:start");var n=x.current,r=n.parentNode,o=n.getBoundingClientRect(),a=r.getBoundingClientRect();if("horizontal"===i){var c=e+o.width;e<0&&c>a.width?(g(e),S.current.x=e,I("center")):e>=0?(g(0),S.current.x=0,I("start")):c<=a.width&&(g(a.width-o.width),S.current.x=a.width-o.width,I("end"))}if("vertical"===i){var l=t+o.height;t<0&&l>a.height?(w(t),S.current.y=t,I("center")):t>=0?(w(0),S.current.y=0,I("start")):l<=a.height&&(w(a.height-o.height),S.current.y=a.height-o.height,I("end"))}setTimeout((function(){M("move:end")}),y)}function Z(){var e=x.current,t=e.parentNode,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return!("horizontal"===i&&r.width>=n.width||"vertical"===i&&r.height>=n.height)}(0,r.useEffect)((function(){function e(e){e.preventDefault();var t=Z();return j(Z()),t?R(S.current.x-(e.deltaY>0?a:-a),S.current.y-(e.deltaY>0?a:-a)):null}var t=Z();j(t);var n=x.current.parentNode;return t&&R(S.current.x,S.current.y),t&&n&&n.addEventListener&&n.addEventListener("wheel",e),function(){t&&n&&n.removeEventListener&&n.removeEventListener("wheel",e)}}),[d,p].concat(function(e){if(Array.isArray(e))return f(e)}(t=m)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));var F=(0,o.QS)({onSwiping:function(e){e.event.stopPropagation();var t=Z();return j(Z()),t?R(b-e.deltaX*e.velocity,O-e.deltaY*e.velocity):null},trackTouch:!0,trackMouse:!0});function L(e){var t=D.current[e];if(t){var n=x.current,r=(n&&n.parentNode).getBoundingClientRect(),o=t.getBoundingClientRect();if("horizontal"===i){var a=r.width,c=r.left,l=o.width,u=o.left,s=c+a,f=u+l;return c<=u&&s>=u||c<=f&&s>=f}}return!1}return{status:k,canSwipe:E,isStartControlActive:E&&("end"===C||"center"===C),isEndControlActive:E&&("start"===C||"center"===C),positionLabel:C,coordinates:{x:b,y:O},containerPropsHandlers:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{}:e;return c(c({},F),{},{style:c({position:"relative",overflow:"hidden",width:"100%",height:"100%"},t)})},contentPropsHandlers:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{}:e;return{ref:x,style:c(c(c(c({position:"absolute",display:"flex"},y&&{transition:"transform ".concat(y,"ms ease 0s")}),{},{flexDirection:"horizontal"===i?"row":"column"},E&&"horizontal"===i&&{transform:"translateX(".concat(b,"px)")}),E&&"vertical"===i&&{transform:"translateY(".concat(O,"px)")}),t)}},itemPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onClick;return c({key:t,ref:function(e){return e&&function(e,t){D.current=c(c({},D.current),{},l({},e,t))}(t,e)}},n?{onClick:n,tabindex:L(t)?0:-1,onKeyDown:function(e){"Enter"===e.key&&n()}}:{tabindex:-1})},updateCoordinates:R,moveItemInViewById:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).margin,n=void 0===t?0:t,r=D.current[e];if(r){var o=x.current,a=(o&&o.parentNode).getBoundingClientRect(),c=r.getBoundingClientRect();if("horizontal"===i){var l=a.width,u=a.left,s=c.width,f=c.left;u<=f&&u+l>=f+s||R(-(f-o.getBoundingClientRect().left)+n,void 0)}}},moveToDeltaSize:function(e){R(b+e,O+e)}}}},240986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(124852),o=n(45697),i=n.n(o),a=n(916651),c=n(752043),l=n(898631);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=s(s({},l.Bk.OPENLAYERS,{fit:function(e){var t,n=e.map,r=e.geometry,o=e.padding,i=e.geometryProjection,l=e.fixedZoom,u=e.maxZoom,s=e.duration,f=n.getView(),d=f.getProjection().getCode();if(2===r.length){var p=(0,a.reproject)(r,i,d),y=p.x,m=p.y;t=new c.Z([y,m])}else t=(0,a.reprojectBbox)(r,i,d);var v=o||{},b=v.top,g=void 0===b?0:b,h=v.right,O=void 0===h?0:h,w=v.bottom,S=void 0===w?0:w,P=v.left,E=void 0===P?0:P;f.fit(t,{padding:[g,O,S,E],maxZoom:l?f.getZoom():u,duration:s})}}),l.Bk.LEAFLET,{fit:function(e){var t,n,r,o=e.map,i=e.geometry,c=e.padding,l=e.geometryProjection,u=e.fixedZoom,s=e.maxZoom,d=e.duration,p=u?o.getZoom():s,y=c.top,m=void 0===y?0:y,v=c.right,b=void 0===v?0:v,g=c.bottom,h=void 0===g?0:g,O=c.left,w=void 0===O?0:O;if(2===i.length){var S=(0,a.reproject)(i,l,"EPSG:4326"),P=S.x,E=S.y;t=[[E,P],[E,P]]}else{var j=(n=(0,a.reprojectBbox)(i,l,"EPSG:4326"),r=4,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(n,r)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),T=j[0],C=j[1],I=j[2];t=[[C,T],[j[3],I]]}o.flyToBounds(t,{paddingTopLeft:[w,m],paddingBottomRight:[b,h],maxZoom:p,animate:!!d,duration:d/1e3})}});function p(e){var t=e.map,n=e.mapType,o=e.active,i=e.geometry,a=e.geometryProjection,c=void 0===a?"EPSG:4326":a,l=e.padding,u=e.maxZoom,s=e.fixedZoom,f=e.duration,p=(0,r.useRef)();return p.current=function(){t&&d[n]&&d[n].fit({map:t,geometry:i,padding:l,geometryProjection:c,maxZoom:u,fixedZoom:s,duration:f})},(0,r.useEffect)((function(){o&&i&&p.current()}),[i,o]),null}p.propTypes={id:i().string,map:i().object,mapType:i().string,active:i().bool,geometry:i().array,geometryProjection:i().string,padding:i().object,maxZoom:i().number,fixedZoom:i().bool,duration:i().number},p.defaultProps={geometryProjection:"EPSG:4326",padding:{top:0,right:0,bottom:0,left:0}};const y=p},743837:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),c=n(706909),l=n(898631);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var s=["map","active","method","mapId","mapType","features","options","onChange"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(null,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t,n,i=e.map,a=e.active,u=e.method,d=e.mapId,y=e.mapType,v=e.features,b=e.options,g=e.onChange,h=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s),O=(t=(0,r.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=O[0],S=O[1];return(0,r.useEffect)((function(){S(a?"drawOrEdit":"clean")}),[a]),y!==l.Bk.OPENLAYERS?null:o().createElement(c.Z,f({},h,{map:i,drawOwner:d,drawStatus:w,drawMethod:u,features:v,options:p({drawEnabled:a,addClickCallback:!0,editEnabled:!0,featureProjection:"EPSG:4326",geodesic:!1,stopAfterDrawing:!1,transformToFeatureCollection:!0,translateEnabled:!1,useSelectedStyle:!0},b),onDrawingFeatures:g.bind(null,d)}))}v.propTypes={active:a().bool,method:a().string,features:a().array,onChange:a().func,options:a().object},v.defaultProps={active:!1,method:"Point",features:[],onChange:function(){},options:{}};const b=v},916788:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),c=n(1206),l=n.n(c),u=n(196797),s=n.n(u),f=n(867076);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function v(e,t,n){return t=g(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function O(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){s()(this._node)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&s()(this._node)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.src,i=t.fit,a=void 0===i?"cover":i,c=t.enableFullscreen,u=void 0===c||c,s=t.fullscreen,f=t.onClick,d=t.description,p=t.showCaption,m=t.caption,v=void 0===m?d:m,b=t.credits,g=t.loaderStyle,h=this.props.loaderComponent,O=this.props.errorComponent;return o().createElement("div",{id:n,className:"ms-media ms-media-image"},r&&"error"!==this.props.status&&o().createElement("img",{ref:function(t){e._node=t},src:r,onLoad:function(){return e.props.onChangeStatus("loaded")},onError:function(){return e.props.onChangeStatus("error")},onClick:u?function(){return f(!0)}:void 0,style:{objectFit:a,fontFamily:"object-fit: ".concat(a),cursor:u?"pointer":"default"}}),r&&!this.props.status&&h&&o().createElement(h,{style:y({},g)}),"error"===this.props.status&&O&&o().createElement(O,null),b&&o().createElement("div",{className:"ms-media-credits"},o().createElement("small",null,b)),p&&v&&o().createElement("div",{className:"ms-media-caption"},o().createElement("small",null,v)),u&&s?o().createElement(l(),{mainSrc:r,onCloseRequest:function(){return f(!1)}}):null)}}])&&m(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.Component);O(S,"propTypes",{src:a().string,id:a().string,fit:a().string,description:a().string,showCaption:a().bool,credits:a().string,altText:a().string,enableFullscreen:a().bool,fullscreen:a().bool,onClick:a().func,onChangeStatus:a().func,status:a().string,loaderComponent:a().oneOfType([a().element,a().func]),errorComponent:a().oneOfType([a().element,a().func]),caption:a().string,loaderStyle:a().object});const P=(0,f.compose)((0,f.withState)("fullscreen","onClick",!1),(0,f.withState)("status","onChangeStatus",""))(S)},437034:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var r=n(124852),o=n.n(r),i=n(867076),a=n(480681),c=n(319180),l=n(91812),u=n(937981),s=n(469705),f=n(57068),d=n(1979),p=n(323010),y=n(461928);const m=(0,i.compose)(s.Z,(0,l.Z)(0),c.Z,p.Z,d.yM,u.Z,f.e)(y.Z);var v=n(192579),b=n(727693),g=n(399534),h=n(815135),O=n(580628),w=n(898631),S=n(624262),P=n(38560);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}var j=["id","map","fit","editMap","onMapViewChanges","eventHandlers","expandable","active","setActive","width","height","size","showCaption","caption","mapType","onMapTypeLoaded","layers","children"],T=["layers","groups","mapOptions","description"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(null,arguments)}function I(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var R=(0,h.Z)(P.Z);const Z=(0,i.compose)((0,i.withState)("active","setActive",!1),O.Z)((function(e){var t=e.id,n=e.map,i=void 0===n?{layers:[b.D]}:n,c=e.fit,l=e.editMap,u=void 0!==l&&l,s=e.onMapViewChanges,f=e.eventHandlers,d=e.expandable,p=void 0!==d&&d,y=e.active,h=e.setActive,O=e.width,P=e.height,E=e.size,A=e.showCaption,k=e.caption,x=e.mapType,Z=void 0===x?w.Bk.OPENLAYERS:x,F=e.onMapTypeLoaded,L=e.layers,N=e.children,U=D(e,j),B=i.data?i.data:i,z=B.layers,W=void 0===z?[]:z,G=B.groups,H=void 0===G?[]:G,q=B.mapOptions,V=void 0===q?{}:q,_=B.description,Y=D(B,T),Q=(0,S.Ku)(W,H),$=k||_,K=p?y?{zoomControl:!1,interactive:!0,mapOptions:{scrollWheelZoom:!0,interactions:{mouseWheelZoom:!0,dragPan:!0}}}:{zoomControl:!1,interactive:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!1}}}:{mapOptions:V},X=u?{mapOptions:M(M({},V),{},{interactions:M(M({},V.interactions),{},{mouseWheelZoom:Y.zoomControl})})}:K,J=!U.isDrawEnabled&&Y.mapInfoControl&&!(p&&!y),ee=o().createElement(o().Fragment,null,o().createElement(m,C({},U,{key:p?"overlay":"block",onMapViewChanges:s,eventHandlers:f,map:M(M({},Y),{},{id:"media-".concat(t),resize:O+"-"+P+"_"+E,className:"aaaa",style:M({cursor:J?"pointer":"default"},p&&!y&&{pointerEvents:"none",touchAction:"none"})}),layers:L?[].concat(I(Q),I(L)):Q,tools:J?["popup"]:[],options:(0,v.kn)(X),mapType:Z,onMapTypeLoaded:F}),r.Children.map(N,(function(e){return e?(0,r.cloneElement)(e,{mapType:Z}):null}))),p&&!u&&o().createElement(R,{className:"ms-expand-media-button",onClick:function(){return h(!y)},tooltipId:y?"geostory.closeFullscreenMap":"geostory.showFullscreenMap",tooltipPosition:"left"},o().createElement(a.gG,{glyph:y?"1-close":"1-full-screen"})));return o().createElement("div",{className:"ms-media ms-media-map ".concat(V.zoomPosition||""),style:{objectFit:c}},y&&p?o().createElement(g.Z,null,o().createElement("div",{className:"ms-expanded-media-container"},ee)):ee,A&&$&&o().createElement("div",{className:"ms-media-caption"},o().createElement("small",null,$)))}))},882017:(e,t,n)=>{"use strict";n.d(t,{Ln:()=>y,ZP:()=>v});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),c=n(916788),l=n(437034),u=n(452826),s=["debounceTime","mediaViewer","children"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(null,arguments)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=c.Z,y={image:c.Z,map:l.Z,video:u.Z},m=function(e){var t,n,i=e.debounceTime,a=e.mediaViewer,c=e.children,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s),u="".concat(l.id).concat(l.resourceId?"-".concat(l.resourceId):""),m=(t=(0,r.useState)({}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=m[0],b=m[1],g=void 0===v[u]||v[u],h=a||y[l.mediaType||l.type]||p;return o().createElement(h,f({sectionType:l.sectionType,debounceTime:i,loading:v,isLoading:g,onLoad:b,loadingId:u},l),c)};m.propTypes={id:a().string,lazy:a().bool,mediaType:a().string,type:a().string,debounceTime:a().number},m.defaultProps={id:"",lazy:!0,mediaType:"",type:""};const v=m},393546:(e,t,n)=>{"use strict";n.d(t,{jF:()=>Le,Fc:()=>ke,EC:()=>Ze,C2:()=>Re,Cw:()=>De,rm:()=>Fe});var r=n(414293),o=n.n(r),i=n(92742),a=n.n(i),c=n(747037),l=n.n(c),u=n(701469),s=n.n(u),f=n(984596),d=n.n(f),p=n(91175),y=n.n(p),m=n(610928),v=n.n(m),b=n(313311),g=n.n(b),h=n(513218),O=n.n(h),w=n(421915),S=n(443143),P=n(916651),E=n(433506),j=n(281763),T=n.n(j),C=n(831219),I=n(639166),A=n(315565),k=n(898185),M=n(438097),x=n.n(M),D=E.Z.markers.extra,R=D.icons[0],Z=D.icons[1],F=D.size[1],L=E.Z.getGlyphs("fontawesome"),N=function(e,t){var n=e.highlight,r=e.rotation,o=void 0===r?0:r;return n?[new C.ZP({image:new I.Z({anchor:[.5,t],rotation:o,anchorXUnits:"fraction",anchorYUnits:"pixels",src:x(),scale:.5})})]:[]},U=function(e,t){var n,r,o=null==L?void 0:L[null==e||null===(n=e.style)||void 0===n?void 0:n.iconGlyph],i="FontAwesome",a=2;return null!=e&&null!==(r=e.style)&&void 0!==r&&r.iconText&&(o=e.style.iconText,i="sans-serif",a=1.6),new A.Z({rotation:t,text:o,font:"14px ".concat(i),offsetY:-F*a/3,fill:new k.Z({color:"#FFFFFF"})})};const B={extra:{getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o()(e.style&&e.style.rotation)?0:e.style.rotation;return[new C.ZP({image:new I.Z({rotation:t,anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:Z,size:D.shadowSize})}),new C.ZP({image:new I.Z({rotation:t,src:R,anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",size:D.size,offset:[D.colors.indexOf(e.style.iconColor||"blue")*D.size[0],D.shapes.indexOf(e.style.iconShape||"circle")*D.size[1]]}),text:U(e,t)})].concat(N(e.style,2*(F+15)))}},standard:{getIcon:function(e){var t=e.style,n=e.iconAnchor,r=o()(t&&t.rotation)?0:t.rotation,i=t.iconAnchor||n,a=[new C.ZP({image:new I.Z({anchor:i||[.5,1],anchorXUnits:t.anchorXUnits||(i||0===i?"pixels":"fraction"),anchorYUnits:t.anchorYUnits||(i||0===i?"pixels":"fraction"),size:s()(t.size)?t.size:T()(t.size)?[t.size,t.size]:void 0,rotation:r,anchorOrigin:t.anchorOrigin||"top-left",src:t.iconUrl||t.symbolUrlCustomized||t.symbolUrl})})];t.shadowUrl&&(a=[new C.ZP({image:new I.Z({anchor:[12,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:t.shadowUrl})}),a[0]]);var c=s()(t.size)?t.size[1]:T()(t.size)?t.size:0;return c=c>32?c+.75*c:F+10,a.concat(N(t,c))}},html:{getIcon:function(){return null}}};var z=n(166287),W=n(409371),G=n(120767),H=n(752043),q=n(944538),V=n(882702),_=n(375875),Y=n.n(_),Q=n(903918),$=n.n(Q),K=n(51205),X=n.n(K),J=n(727418),ee=n.n(J),te=n(761868);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=[0,153,255,1],ue=new W.Z({radius:5,fill:null,stroke:new G.Z({color:"red",width:1})}),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,i=e.applyToPolygon,a=void 0!==i&&i;return new C.ZP({image:new W.Z({radius:n,fill:new k.Z({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new H.Z(y()(r)):null}})},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,i=e.applyToPolygon,a=void 0!==i&&i;return new C.ZP({image:new W.Z({radius:n,fill:new k.Z({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:v()(r))}})},de=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[se(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),fe(e)]},pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new C.ZP({text:new A.Z({offsetY:void 0!==e.offsetY?e.offsetY:-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",textBaseline:e.verticalAlign||"middle",text:t||"",font:e.font,fill:new k.Z({color:(0,S.qq)(e.stroke||e.color||"#000000",e.opacity||1)}),stroke:e.labelOutlineColor?new G.Z({color:(0,S.qq)(e.labelOutlineColor,e.labelOutlineOpacity||1),width:e.labelOutlineWidth||1}):n?new G.Z({color:[255,255,255,1],width:2}):null,rotation:e.rotation?e.rotation*Math.PI/180:0}),image:n?new W.Z({radius:5,fill:null,stroke:new G.Z({color:(0,S.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null})},ye={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,radius:10},me={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},ve={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},be={Marker:{iconColor:"orange",iconShape:"circle",iconGlyph:"comment"},Text:{fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1},Circle:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},Point:ye,MultiPoint:ye,LineString:me,MultiLineString:me,Polygon:ve,MultiPolygon:ve},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"blue",width:3,lineDash:[6]};return{stroke:new G.Z(e.style?e.style.stroke||{color:e.style.color||t.color,lineDash:l()(e.style.dashArray)&&a()(e.style.dashArray).split(" ")||t.lineDash,width:e.style.weight||t.width,lineCap:e.style.lineCap||"round",lineJoin:e.style.lineJoin||"round",lineDashOffset:e.style.dashOffset||0}:ae({},t))}},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"rgba(0, 0, 255, 0.1)"};return{fill:new k.Z(e.style?e.style.fill||{color:(0,S.qq)(e.style.fillColor,e.style.fillOpacity)||t.color}:ae({},t))}},Oe={Point:function(){return[new C.ZP({image:ue})]},LineString:function(e){return[new C.ZP(ee()({},ge(e,{color:"blue",width:3})))]},MultiLineString:function(e){return[new C.ZP(ee()({},ge(e,{color:"blue",width:3})))]},MultiPoint:function(){return[new C.ZP({image:ue})]},MultiPolygon:function(e){return[new C.ZP(ee()({},ge(e),he(e)))]},Polygon:function(e){return[new C.ZP(ee()({},ge(e),he(e)))]},GeometryCollection:function(e){return[new C.ZP(ee()({},ge(e),he(e),{image:new W.Z({radius:10,fill:null,stroke:new G.Z({color:"magenta"})})}))]},Circle:function(){return[new C.ZP({stroke:new G.Z({color:"red",width:2}),fill:new k.Z({color:"rgba(255,0,0,0.2)"})})]},marker:function(e){return[new C.ZP({image:new I.Z({anchor:[14,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:X()})}),new C.ZP({image:new I.Z({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:$()}),text:new A.Z({text:e.label,scale:1.25,offsetY:8,fill:new k.Z({color:"#000000"}),stroke:new G.Z({color:"#FFFFFF",width:2})})})]}},we=function(e,t){var n=e.getGeometry().getType();return Oe[n](t&&t.style&&t.style[n]&&{style:ae({},t.style[n])}||t||{})};function Se(e){if(e.style.iconUrl)return B.standard.getIcon(e);var t=e.style.iconLibrary||"extra";return B[t]?B[t].getIcon(e):null}var Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{style:be},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=t.style[e]||t.style;if("MultiLineString"===e||"LineString"===e){var l=[new C.ZP({stroke:t.style.useSelectedStyle?new G.Z({color:[255,255,255,1],width:c.weight+2}):null}),new C.ZP(c?{stroke:new G.Z(c&&c.stroke?c.stroke:{color:(0,S.qq)(t.style&&c.color||"#0000FF",c.opacity||1),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),image:n?ue:null}:{stroke:new G.Z(be[e]&&be[e].stroke?be[e].stroke:{color:(0,S.qq)(t.style&&be[e].color||"#0000FF",be[e].opacity||1),lineDash:t.style.highlight?[10]:[0],width:be[e].weight||1})})],u=t.style.useSelectedStyle?de({radius:c.weight,applyToPolygon:!0},{radius:c.weight,applyToPolygon:!0}):[];return[].concat(re(u),l)}if(("MultiPoint"===e||"Point"===e)&&(c.iconUrl||c.iconGlyph))return n?new C.ZP({image:ue}):Se({style:ae(ae({},c),{},{highlight:t.style.highlight||t.style.useSelectedStyle})});if("Circle"===e&&a)return[new C.ZP({stroke:t.style.useSelectedStyle?new G.Z({color:[255,255,255,1],width:c.weight+4}):null}),new C.ZP({stroke:new G.Z(c&&c.stroke?c.stroke:{color:t.style.useSelectedStyle?le:(0,S.qq)(t.style&&c.color||"#0000FF",c.opacity||1),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),fill:new k.Z(c.fill?c.fill:{color:(0,S.qq)(t.style&&c.fillColor||"#0000FF",c.fillOpacity||.2)})}),new C.ZP({image:t.style.useSelectedStyle?new W.Z({radius:3,fill:new k.Z(c.fill?c.fill:{color:le})}):null,geometry:function(e){var t=e.getGeometry();if("Circle"===t.getType()){var n=t.getCenter();return new H.Z(n)}return null}})];if("Text"===e&&c.font)return[pe(c,r[0],t.style.useSelectedStyle||t.style.highlight)];if("MultiPolygon"===e||"Polygon"===e){var s=[new C.ZP({stroke:t.style.useSelectedStyle?new G.Z({color:[255,255,255,1],width:c.weight+2}):null}),new C.ZP({stroke:new G.Z(c.stroke?c.stroke:{color:t.style.useSelectedStyle?le:(0,S.qq)(t.style&&c.color||"#0000FF",o()(c.opacity)?1:c.opacity),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),image:n?ue:null,fill:new k.Z(c.fill?c.fill:{color:(0,S.qq)(t.style&&c.fillColor||"#0000FF",o()(c.fillOpacity)?1:c.fillOpacity)})})],f=t.style.useSelectedStyle?de({radius:c.weight,applyToPolygon:!0},{radius:c.weight,applyToPolygon:!0}):[];return[].concat(s,re(f))}return i};function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae={white:[255,255,255,1],blue:[0,153,255,1],width:3},ke=function(e){if((0,z.isMarkerStyle)(e)){if(e.iconUrl)return B.standard.getIcon({style:e});var t=e.iconLibrary||"extra";if(B[t])return B[t].getIcon({style:e})}return null};(0,z.registerGeometryFunctions)("centerPoint",(function(e){var t=e.getGeometry(),n=e.getProperties().isGeodesic,r=void 0!==n&&n,o=t.getExtent(),i=r?(0,w.qg)(o):t.getCenter&&t.getCenter()||[o[2]-o[0],o[3]-o[1]];return new H.Z(i)}),"Point"),(0,z.registerGeometryFunctions)("lineToArc",(function(e){var t=e.getGeometry().getType();if("LineString"===t||"MultiPoint"===t){var n=e.getGeometry().getCoordinates();return n=(0,P.transformLineToArcs)(n.map((function(e){var t=(0,P.reproject)(e,"EPSG:3857","EPSG:4326");return[t.x,t.y]}))),new q.Z(n.map((function(e){var t=(0,P.reproject)(e,"EPSG:4326","EPSG:3857");return[t.x,t.y]})))}return e.getGeometry()}),"LineString"),(0,z.registerGeometryFunctions)("startPoint",(function(e){var t=e.getGeometry(),n="Polygon"===t.getType()?t.getCoordinates()[0]:t.getCoordinates();return n.length>1?new H.Z(y()(n)):null}),"Point"),(0,z.registerGeometryFunctions)("endPoint",(function(e){var t=e.getGeometry(),n=t.getType(),r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:v()(r))}),"Point");var Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.geometry?function(t){var n=e.geometry||"centerPoint";return z.geometryFunctions[n].func(t)}:function(e){return e.getGeometry()}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!o()(e.filtering)||e.filtering}(t,e);if(r){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,z.isStrokeStyle)(e)?new G.Z(e.stroke&&O()(e.stroke)?e.stroke:{color:e.highlight?Ae.blue:(0,S.qq)(e.color||e.stroke||"#0000FF",o()(e.opacity)?1:e.opacity),width:o()(e.weight)?1:e.weight,lineDash:l()(e.dashArray)&&a()(e.dashArray).split(" ")||s()(e.dashArray)&&e.dashArray||[0],lineCap:e.lineCap||"round",lineJoin:e.lineJoin||"round",lineDashOffset:e.dashOffset||0}):null}(t),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,z.isFillStyle)(e)?new k.Z(e.fill&&O()(e.fill)?e.fill:{color:(0,S.qq)(e.fillColor||"#0000FF",o()(e.fillOpacity)?1:e.fillOpacity)}):null}(t),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,z.isCircleStyle)(e)?new W.Z({stroke:t,fill:n,radius:e.radius||5}):null}(t,i,c);if((0,z.isMarkerStyle)(t))return ke(t).map((function(e){return e.setGeometry(Me(t)),e}));if((0,z.isSymbolStyle)(t))return B.standard.getIcon({style:t}).map((function(e){return e.setGeometry(Me(t)),e}));var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,z.isTextStyle)(e)?new A.Z({fill:n,offsetY:e.offsetY||-4*Math.sqrt(e.fontSize),rotation:e.textRotationDeg?e.textRotationDeg/180*Math.PI:0,textAlign:e.textAlign||"center",text:e.label||r&&r.properties&&r.properties.valueText||"New",font:e.font||"Arial",stroke:e.highlight?new G.Z({color:[255,255,255,1],width:2}):t,image:e.highlight?new W.Z({radius:5,fill:null,stroke:new G.Z({color:(0,S.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null}):null}(t,i,c,e),d=t.zIndex;return[new C.ZP({geometry:Me(t),image:u,text:f,stroke:!f&&!u&&i||null,fill:!f&&!u&&c||null,zIndex:d})].concat(e&&e.properties&&e.properties.canEdit&&!e.properties.isCircle?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{radius:3,fillColor:"green",applyToPolygon:!0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{radius:3,fillColor:"red",applyToPolygon:!0},r=[];return g()(e,(function(e){return"startPoint"===e.geometry&&e.filtering}))||r.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,i=e.applyToPolygon,a=void 0!==i&&i;return new C.ZP({image:new W.Z({radius:n,fill:new k.Z({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new H.Z(y()(r)):null}})}(Ce({},t))),g()(e,(function(e){return"endPoint"===e.geometry&&e.filtering}))||r.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,i=e.applyToPolygon,a=void 0!==i&&i;return new C.ZP({image:new W.Z({radius:n,fill:new k.Z({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new H.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:v()(r))}})}(Ce({},n))),r}(n):[])}return new C.ZP({})},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=e.style;if(t){var n=s()(t)?t:d()(t);return n.reduce((function(t,r){return t.concat(xe(e,r,n))}),[])}return[]},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.style&&e.style.url)return Y().get(e.style.url).then((function(t){return V.Promise.all([(0,z.getStyleParser)(e.style.format),(0,z.getStyleParser)("openlayers")]).then((function(e){var n,r,o=(r=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(n,r)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return i.readStyle(t.data).then((function(e){return a.writeStyle(e)}))}))}));if(e.style&&"geostyler"===e.style.format)return(0,z.getStyleParser)("openlayers").then((function(t){return t.writeStyle(e.style.styleObj||e.style.body,{features:e.features})}));var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.styleName&&!e.overrideOLStyle)return function(t){if("marker"===e.styleName)switch(t.getGeometry().getType()){case"Point":case"MultiPoint":return Oe.marker(e)}return Oe[e.styleName](e)};var r,i=e.nativeStyle,a=n,c=0,l=e.style&&e.style.type||(e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:void 0);if("FeatureCollection"===l||e.features&&e.features[0]&&"FeatureCollection"===e.features[0].type)return function(n){var o=this||n;r=o.getGeometry()&&o.getGeometry().getType();var i=o&&o.getProperties();i&&i.isCircle&&(r="Circle",c=i.radius),i&&i.isText&&(r="Text",a=[i.valueText]);var l=(0,te.t8)("style.useSelectedStyle",i.canEdit,e);return Pe(r,l,t,a,null,c)};if(e&&e.properties&&e.properties.isText)return r="Text",a=[e.properties.valueText],Pe(r,e,t,a,null,c);if(e&&e.properties&&e.properties.isCircle)return r="Circle",c=e.properties.radius,Pe(r,e,t,a,null,c);if(!i&&e.style){if(i={stroke:new G.Z(e.style.stroke?e.style.stroke:{color:(0,S.qq)(e.style&&e.style.color||"#0000FF",o()(e.style.opacity)?1:e.style.opacity),lineDash:e.style.lineDash||(e.style.highlight?[10]:[0]),width:e.style.weight||1}),fill:new k.Z(e.style.fill?e.style.fill:{color:(0,S.qq)(e.style&&e.style.fillColor||"#0000FF",o()(e.style.fillOpacity)?1:e.style.fillOpacity)})},"Point"!==l&&"MultiPoint"!==l||(i={image:new W.Z(ee()({},i,{radius:e.style.radius||5}))}),e.style.iconUrl||e.style.iconGlyph){var u=Se(e);return function(t){var n=this||t;switch(r=n.getGeometry().getType()){case"Point":case"MultiPoint":return u;default:return we(n,e)}}}return i=new C.ZP(i),"GeometryCollection"===l?i=function(o){var i,a=this||o;r=a.getGeometry().getType();var c=a.get("textGeometriesIndexes")||[],l=a.get("circles")||[],u=a.get("textValues");return"GeometryCollection"===a.getGeometry().getType()?a.getGeometry().getGeometries().reduce((function(o,a,f){if(("Point"===(r=a.getType())||"MultiPoint"===r)&&c.length&&-1!==c.indexOf(f)){var d=Pe("Text",e,t,[u[c.indexOf(f)]]);return d.setGeometry(a),o.concat([d])}if("Polygon"===r&&l.length&&-1!==l.indexOf(f)){var p=Pe("Circle",e,t,[]);return p.setGeometry(a),o.concat([p])}if("Point"===r||"MultiPoint"===r)return i=Se({style:ae(ae({},e.style[r]),{},{highlight:e.style.highlight})}),o.concat(i.map((function(e){return e.setGeometry(a),e})));var y=Pe(r,e,t,n);return s()(y)?y.forEach((function(e){return e.setGeometry(a)})):y.setGeometry(a),o.concat([y])}),[]):"Point"===r||"MultiPoint"===r?(i=Se({style:ae(ae({},e.style[r]),{},{highlight:e.style.highlight})}),t?new C.ZP({image:ue,geometry:a.getGeometry()}):i.map((function(e){return e.setGeometry(a.getGeometry()),e}))):Pe(r,e,t,n)}:("Circle"===l&&(c=e.features&&e.features.length&&e.features[0].properties&&e.features[0].properties.radius||10),Pe(l,e,t,n,i,c))}return i||we}(e,t,n);return e.asPromise?new V.Promise((function(e){e(r)})):r},Ze=Se,Fe=de,Le=be},771335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),c=n(805346),l=n(913718),u=n(314068);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(null,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function p(e,t,n){return t=m(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var h={FORMAT:o().createElement(c.Z,{msgId:"map.errorFormat"}),SIZE:o().createElement(c.Z,{msgId:"map.errorSize"})},O=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return b(e=p(this,t,[].concat(r)),"state",{}),b(e,"getThumbnailUrl",(function(){return e.props.map&&e.props.map.newThumbnail&&"NODATA"!==e.props.map.newThumbnail?decodeURIComponent(e.props.map.newThumbnail):null})),b(e,"getDataUri",(function(e,t){var n=e;if(n&&n.length>0){var r=n[0],o=new FileReader;return o.onload=function(e){return t(e.target.result,r.size)},o.readAsDataURL(r)}return t(null)})),b(e,"getThumbnailDataUri",(function(t){e.getDataUri(e.files,t)})),b(e,"generateUUID",(function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))})),b(e,"processUpdateThumbnail",(function(t,n,r){var o=e.generateUUID(),i="THUMBNAIL";!e.props.map||r||!e.props.map.thumbnail||e.refs.imgThumbnail||n||e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!0),e.props.map&&!r&&e.props.map.newThumbnail&&!e.refs.imgThumbnail&&n&&(e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id)),e.props.map.newThumbnail&&r&&e.refs.imgThumbnail&&(e.deleteThumbnail(e.props.map.thumbnail,null,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id)),e.props.map.newThumbnail&&!r&&e.refs.imgThumbnail&&e.props.onSaveAll(t,n,o,r,i,e.props.map.id),e.props.map.newThumbnail||r||e.refs.imgThumbnail||(e.props.map.thumbnail&&n&&e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id))})),b(e,"updateThumbnail",(function(t,n){e.props.map.errors&&e.props.map.errors.length||e.getDataUri(e.files,(function(r){return e.processUpdateThumbnail(t,n,r),r}))})),b(e,"deleteThumbnail",(function(t,n){if(t&&-1!==t.indexOf("geostore")){var r=(0,l.C)(t);r&&e.props.onDeleteThumbnail(r,n)}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,(r=[{key:"renderThumbnailErrors",value:function(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?o().createElement("div",{className:"dropzone-errorBox alert-danger"},o().createElement("p",null,o().createElement(c.Z,{msgId:"map.error"})),this.props.thumbnailErrors.map((function(e){return o().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},h[e])}))):null}},{key:"render",value:function(){var e=this;return o().createElement(u.Z,f({ref:"imgThumbnail",thumbnail:this.getThumbnailUrl(),className:null,checkOriginalFileSize:this.props.checkOriginalFileSize,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.map.saving?"none":"auto"},label:this.props.withLabel&&o().createElement("label",{className:"control-label"},o().createElement(c.Z,{msgId:"map.thumbnail"})),:!0,message:o().createElement(o().Fragment,null,this.props.message,o().createElement("br",null),this.props.suggestion),error:this.renderThumbnailErrors(),onUpdate:function(t,n){var r;e.props.onError([],e.props.map.id),e.files=n,e.props.onUpdate(t,null==n||null===(r=n[0])||void 0===r?void 0:r.preview)},onError:function(t,n){e.props.onError(t,e.props.map.id),e.files=n,e.props.onUpdate(null,null)},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemoveThumbnail(),e.props.onError([],e.props.map.id)}},this.props.thumbnailOptions&&{thumbnailOptions:this.props.thumbnailOptions}))}}])&&d(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);b(O,"propTypes",{glyphiconRemove:a().string,style:a().object,thumbnailErrors:a().array,loading:a().bool,withLabel:a().bool,map:a().object,maxFileSize:a().number,thumbnailOptions:a().object,onDrop:a().func,onError:a().func,onUpdate:a().func,onSaveAll:a().func,onCreateThumbnail:a().func,onDeleteThumbnail:a().func,onRemoveThumbnail:a().func,message:a().oneOfType([a().string,a().element]),suggestion:a().oneOfType([a().string,a().element]),checkOriginalFileSize:a().bool}),b(O,"contextTypes",{messages:a().object}),b(O,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:function(){},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemoveThumbnail:function(){},onCreateThumbnail:function(){},onDeleteThumbnail:function(){},message:o().createElement(c.Z,{msgId:"map.message"}),suggestion:o().createElement(c.Z,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[],thumbnailOptions:null});const w=O},638445:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(124852),o=n.n(r),i=n(480681),a=n(697111),c=n(993451),l=["debounceTime"],u=["fallbackValue"];function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=(0,a.Z)("onChange","value")((0,c.Z)("placeholder")((function(e){e.debounceTime;var t=p(e,l);return o().createElement(i.NI,d({},t,{onChange:function(e){return t.onChange(e.target.value)}}))})));const m=function(e){var t,n,i=e.fallbackValue,a=p(e,u),c=s((0,r.useState)(null!==(t=a.value)&&void 0!==t?t:i),2),l=c[0],f=c[1],m=s((0,r.useState)(null!==(n=a.value)&&void 0!==n?n:i),2),v=m[0],b=m[1],g=s((0,r.useState)(0),2),h=g[0],O=g[1],w=(0,r.useRef)(!1),S=(0,r.useRef)();function P(e){var t=!isNaN(parseFloat(e));return t&&void 0!==a.min&&e<a.min?{changed:!0,value:a.min}:t&&void 0!==a.max&&e>a.max?{changed:!0,value:a.max}:{changed:!1,value:t?parseFloat(e):e}}return S.current=l,(0,r.useEffect)((function(){var e;S.current!==a.value&&f(null!==(e=a.value)&&void 0!==e?e:i)}),[a.value]),o().createElement(y,d({},a,{key:h,value:l,onChange:function(e){if(w.current){var t=e,n=!0;if("number"===a.type){var r=P(t).changed;(""===t||r)&&(n=!1)}f(t),n&&a.onChange(t)}},onChangeNoDebounce:b,onBlur:function(){if("number"===a.type)if(""===v)a.onChange(void 0),f(i),O((function(e){return e+1}));else{var e=P(v).value;a.onChange(e),O((function(e){return e+1})),f(e)}w.current=!1},onFocus:function(){w.current=!0}}))}},487320:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),c=n(945402),l=n(743129),u=n(480681),s=n(352595);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t,n,i=e.text,a=e.placement,c=e.bsStyle,l=e.left,d=e.top,p=e.title,y=e.glyph,m=e.id,v=(0,r.useRef)(),b=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=b[0],h=b[1];return o().createElement("span",{className:"mapstore-info-popover",onMouseLeave:function(){return h(!1)}},o().createElement(u.gG,{onMouseEnter:function(){h(!0)},ref:function(e){v.current=e},className:"text-".concat(c),glyph:y}),o().createElement(s.Z,{placement:a,show:g,target:function(){return v.current}},o().createElement(u.J2,{id:m,placement:a,positionLeft:l,positionTop:d,title:p},o().createElement("div",{style:{display:"flex"}},i))))};d.propTypes={id:a().string,title:a().string,text:a().string,glyph:a().string,bsStyle:a().string,placement:a().string,left:a().number,top:a().number,trigger:a().oneOfType([a().array,a().bool])},d.defaultProps={id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info"};const p=d;var y=n(615402),m=n(453005);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(null,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=e.id,n=e.label,r=e.infoFormat,i=e.availableInfoFormat,a=e.popoverMessage,s=e.disabled,f=e.onInfoFormatChange,d=e.selectProps,v=Object.keys(i).reduce((function(e,t){var n=i[t]===m.qk;return Object.keys(e).map((function(t){return e[t]})).some((function(e){return e===i[t]}))||n?e:h(h({},e),{},O({},t,i[t]))}),{}),g=Object.keys(v).map((function(e){return{value:v[e],label:(0,c.kR)(v[e])||e}})),w=o().createElement(o().Fragment,null,"  ",a&&o().createElement(p,{text:o().createElement(y.Z,{msgId:a})}),o().createElement(l.ZP,b({},d,{id:t,value:r,clearable:!1,disabled:s,options:g,onChange:function(e){return f(null==e?void 0:e.value)}})));return n?o().createElement(u.cw,{bsSize:"small"},o().createElement(u.J$,null,n),w):w}w.propTypes={id:a().string,label:a().oneOfType([a().func,a().string,a().object]),availableInfoFormat:a().object,infoFormat:a().string,popoverMessage:a().string,onInfoFormatChange:a().func,disabled:a().bool,selectProps:a().object},w.defaultProps={id:"mapstore-feature-format-selector",availableInfoFormat:(0,c.eq)(),infoFormat:(0,c.wR)(),popoverMessage:"",onInfoFormatChange:function(){},selectProps:{}};const S=w},843614:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(727418),o=n.n(r),i=n(480681),a=n(461365);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}function s(e,t,n){return t=d(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}],r&&l(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.u_);const m=o()((0,a.Z)(y),{Body:i.u_.Body,Dialog:i.u_.Dialog,Footer:i.u_.Footer,Header:i.u_.Header,Title:i.u_.Title})},61018:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(124852),o=n.n(r),i=n(807472),a=n(480681);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var l=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=function(e){var t=e.show,n=e.style,r=void 0===n?{}:n,c=e.modal,s=e.draggable,d=void 0!==s&&s,p=e.closeGlyph,y=void 0===p?"1-close":p,m=e.closable,v=void 0===m||m,b=e.onClose,g=void 0===b?function(){}:b,h=e.title,O=e.header,w=e.footer,S=e.children,P=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return t?o().createElement(i.Z,u({modal:c,onClickOut:v&&c?function(){return g()}:null,style:f(f({},r),{},{display:t?"block":"none"}),draggable:d},P),o().createElement("span",{role:"header"},h||O||o().createElement("span",null,""),v?o().createElement("button",{onClick:function(){return g()},className:"settings-panel-close close"},o().createElement(a.gG,{glyph:y})):null),o().createElement("span",{role:"body"},S),w?o().createElement("span",{role:"footer"},w):null):null}},625311:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(124852),o=n.n(r),i=n(590937),a=n(867076),c=["connectDragSource","connectDragPreview","connectDropTarget","isDragging","isOver"];function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={beginDrag:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}};const p=(0,a.branch)((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isDraggable}),(0,a.compose)((0,i.Ej)("row",d,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),draggingItem:t.getItem()||null}})),(0,i.GR)("row",{drop:function(e,t){var n=t.getItem();n.sortId!==e.sortId&&e.onSort(e.sortId,n.sortId,{id:e.id,containerId:e.containerId},{id:n.id,containerId:n.containerId})}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})),(function(e){return function(t){var n=t.connectDragSource,r=t.connectDragPreview,i=t.connectDropTarget,a=t.isDragging,l=t.isOver,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,c),f=s.draggingItem&&s.draggingItem.sortId<s.sortId,d=s.draggingItem&&s.draggingItem.containerId===s.containerId,p=d&&a?" ms-dragging":"",y=d&&l?" ms-over":"",m=d&&f?" ms-above":" ms-below";return r(i(o().createElement("div",{className:"ms-dragg".concat(p).concat(y," ").concat(m)},o().createElement("div",null,o().createElement(e,u({},s,{connectDragSource:n,isDragging:a,isOver:l,onDrop:function(e){return e.stopPropagation()}}))))))}})))},245567:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(124852),o=n.n(r),i=n(867076);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var c=["onSort","isDraggable","items","containerId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(null,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=(0,i.compose)((0,i.branch)((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var n=t.onSort,r=t.isDraggable,i=t.items,a=void 0===i?[]:i,u=t.containerId,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,c),d=a.map((function(e,t){return s(s({},e),{},{onSort:n,isDraggable:r,sortId:t,key:e.id||t,containerId:u})}));return o().createElement(e,l({},s(s({},f),{},{isDraggable:r}),{items:d}))}})))},589919:(e,t,n)=>{"use strict";n.d(t,{hP:()=>u});var r=n(984596),o=n.n(r),i=n(49977),a=n.n(i);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,function(e){if(Array.isArray(e))return c(e)}(t=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},u=function(e,t,n){return function(r){return(n?l(r,o()(e)).catch(n):l(r,o()(e))).concat(a().Observable.from(o()(t)))}}},680833:(e,t,n)=>{"use strict";n.d(t,{kB:()=>g,HI:()=>h});var r=n(472500),o=n.n(r),i=(n(91175),n(490173)),a=n(49977),c=n(501157),l=n(375875),u=n.n(l),s=(n(916651),n(624262)),f=n(510284),d=n(233044),p=n(611847);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i.default;var g=function(e){return a.Observable.defer((function(){return c.ZP.getCapabilities((0,s.Fh)(e))})).let(f.oB).map((function(t){return c.ZP.parseLayerCapabilities(t,e)}))},h=function(e){return function(e){return a.Observable.defer((function(){return u().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.search,r=void 0===n?{}:n,i=e.url,a=o().parse((0,p.eW)(r.url||i),!0);return o().format(v(v({},a),{},{search:void 0,query:v(v({},a.query),{},{service:"WMS",version:c.ID,layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(f.oB)}(e).map((function(e){var t=e.data,n=void 0===t?{}:t;return n&&n.layerDescriptions[0]})).map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return v(v({},e),{},{params:{},search:t?{type:"wfs",url:(0,d.cleanAuthParamsFromURL)(t)}:void 0})}))}},159817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ac});var r={};n.r(r),n.d(r,{cleanUpEmptyStoryContainers:()=>ge,closeShareOnGeostoryChangeMode:()=>Pe,editMediaForBackgroundEpic:()=>me,editWebPageComponent:()=>de,exportGeostory:()=>Ae,handlePendingGeoStoryChanges:()=>Ee,hideCarouselItemsOnUpdateCurrentPage:()=>we,importGeostory:()=>ke,inlineEditorEditMap:()=>Se,loadGeostoryEpic:()=>ve,loadStoryOnHistoryPop:()=>Ce,openMediaEditorForNewMedia:()=>ue,openWebPageComponentCreator:()=>fe,reloadGeoStoryOnLoginLogout:()=>be,saveGeoStoryResource:()=>pe,scrollOnLoad:()=>Te,scrollSideBar:()=>Ie,scrollToContentEpic:()=>ye,setFocusOnMapEditing:()=>Oe,sortContentEpic:()=>he,urlUpdateOnScroll:()=>je});var o=n(124852),i=n.n(o),a=n(171703),c=n(22222),l=n(375933),u=n.n(l),s=n(322843),f=n(192579),d=n(86638),p=n(531398),y=n(134990),m=n(93848),v=n(49977),b=n(91175),g=n.n(b),h=n(807654),O=n.n(h),w=n(747037),S=n.n(w),P=n(414293),E=n.n(P),j=n(595825),T=n.n(j),C=n(158748),I=n.n(C),A=n(227361),k=n.n(A),M=n(701469),x=n.n(M),D=n(441609),R=n.n(D),Z=n(275982),F=n(423570),L=n.n(F),N=n(375875),U=n.n(N),B=n(291312),z=n(782904),W=n(197395),G=n(263516),H=n(274621),q=n(866113),V=n(107501),_=n(589919),Y=n(988753),Q=n(727693),$=n(282385);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}var X=["status","statusText","data","message"],J=["data","isStatic"];function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ie(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e,t,n){return function(r){return r.ofType(m.AQ).switchMap((function(r){var o=r.resource,i=void 0===o?{}:o,a=[],c=e.getState(),l=(0,V.hb)(c),u=(0,V.IQ)(c),s=g()((0,q.jq)(c).filter((function(e){return e.data&&(u!==Q.r.GEOSTORY&&e.data.id||e.id)===i.id}))),d=i.id;s?d=s.id:R()(i)?a=[].concat(ie(a),[(0,y.Od)("".concat(t)),(0,m.Cp)()]):(d=i.id||L()(),a=[].concat(ie(a),[(0,y.rp)(d,l,i.data?i.data:i)]));var p=l===f.Tr.MAP?{resourceId:d,type:l,map:void 0}:{resourceId:d,type:l},b=[(0,y.Vx)("".concat(t),p,"merge")];return n===f.ID.CAROUSEL&&b.push((0,y.Vx)("".concat(t,".map"),{mapInfoControl:!0},"merge")),a=[].concat(ie(a),b,[(0,m.Cp)()]),v.Observable.from(a)}))}},ue=function(e,t){return e.ofType(y.D7).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===f.bT.MEDIA||(0,f.lt)(n)})).switchMap((function(n){var r=n.path,o=n.element,i="";(0,f.lt)(o)&&"sections"===r&&(i=".contents[0].contents[0]");var a="".concat(r,'[{"id":"').concat(o.id,'"}]').concat(i),c=(0,q.X6)(t.getState());return v.Observable.of((0,m.$Z)("geostory",c)).merge(e.let(le(t,a)),e.ofType(m.B8).switchMap((function(){return v.Observable.of((0,y.Od)(a))})).takeUntil(e.ofType(y.wb))).takeUntil(e.ofType(m.wd))}))},se=function(e){return function(t){return t.ofType(y.Hb).switchMap((function(t){var n=t.src;return v.Observable.of((0,y.Vx)("".concat(e),{src:n,editURL:!1},"merge"))}))}},fe=function(e){return e.ofType(y.D7).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===f.bT.WEBPAGE&&!1!==n.editURL||(0,f.NC)(n)})).switchMap((function(t){var n=t.path,r=t.element,o="";(0,f.NC)(r)&&"sections"===n&&(o=".contents[0].contents[0]");var i="".concat(n,'[{"id":"').concat(r.id,'"}]').concat(o);return v.Observable.of((0,y.Vx)(i,{editURL:!0},"merge")).merge(e.let(se(i))).takeUntil(e.ofType(y.cc))}))},de=function(e){return e.ofType(y.cc).switchMap((function(t){var n=t.path;return v.Observable.of((0,y.Vx)(n,{editURL:!0},"merge")).merge(e.let(se(n))).takeUntil(e.ofType(y.D7))}))},pe=function(e){return e.ofType(y.LE).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resource,n=e.delay,r=void 0===n?1e3:n;return(t.id?(0,B.id)(t):(0,B.SN)(t)).switchMap((function(e){return v.Observable.of((0,y.GD)(e),(0,y.g5)(f.ZX.SHOW_SAVE,!1),t.id?(0,y.wJ)(e):(0,Z.VF)("/geostory/".concat(e))).merge(v.Observable.of((0,W.$Z)({id:"STORY_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(t.id?0:r))})).let((0,_.hP)((0,y.YP)(!0,"loading"),(0,y.YP)(!1,"loading"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n=e.statusText,r=e.data,o=e.message,i=oe(e,X);return v.Observable.of((0,y.y6)(t?{status:t,statusText:n,data:r}:o||i),(0,y.YP)(!1,"loading"))}))}))},ye=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(y.D7).switchMap((function(e){var t=e.path,r=e.element;return v.Observable.of(r).switchMap((function(){if(document.getElementById(r.id)){var e=(0,f.u0)(t).sectionId,o=(0,q.I0)(e)(n())?e:r.id;return(0,f.M1)(o,{behavior:"auto",block:"center"}),v.Observable.empty()}throw new Error("Item not mounted yet")})).retryWhen((function(e){return e.delay(200).take(10)}))}))},me=function(e,t){return e.ofType(m.wd).switchMap((function(n){var r=n.path,o=n.owner,i=n.sectionType,a=(0,q.vv)(r)(t.getState()),c=(0,q.Tr)(a)(t.getState());return v.Observable.of((0,V.hb)(t.getState())).filter((function(e){return c&&c.type!==e})).map((function(){return(0,m.y5)(c.type)})).merge(v.Observable.of((0,m.$Z)(o,(0,q.X6)(t.getState())),(0,m.Gh)(a),(0,m.Tk)(i===f.ID.CAROUSEL?["image","video"]:[])).merge(e.let(le(t,r,i)).takeUntil(e.ofType(m.B8,y.D7))))}))},ve=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.XH).switchMap((function(e){var t=e.id;return v.Observable.defer((function(){return t&&O()(parseInt(t,10))?U().get("configs/".concat(t,".json")).then((function(e){var t=e.data,n=t.sections,r=x()(n)&&n.map((function(e){return ne(ne({},e),{},{id:L()()})}));return{data:r.length?ne(ne({},t),{},{sections:r}):t,isStatic:!0,canEdit:!0}})):(0,B.RX)(t)})).do((function(e){if(!e.data)throw Error("Wrong data format");return!0})).switchMap((function(e){var n=e.data,o=e.isStatic,i=void 0!==o&&o,a=oe(e,J),c=r(),l=(0,H.qg)(c),u=(0,H.jl)(c),s=S()(n)?JSON.parse(n):n;if(!u&&O()(parseInt(t,10)))return v.Observable.of((0,y.Ct)({status:403}));var d=(0,q.eK)(c)===f.nl.EDIT;return v.Observable.from([].concat(ie(i||d?[(0,y.D_)(a&&a.canEdit||l)]:[]),[(0,y.OS)(t),(0,y.K0)(s),(0,y.DF)(a)]))})).let((0,_.hP)((0,y.YP)(!0,"loading"),(0,y.YP)(!1,"loading"),(function(e){var t=(0,f.of)(),n=t+".errors.loading.unknownError";return 403===e.status?(n=t+".errors.loading.pleaseLogin",((0,H.jl)(r())||(0,q.JM)(r()))&&(n=t+".errors.loading.geostoryNotAccessible")):404===e.status?n=t+".errors.loading.geostoryDoesNotExist":E()(e.status)&&(n=e.message),v.Observable.of((0,W.vU)({title:t+".errors.loading.title",message:n}),(0,y.K0)({}),(0,y.Ct)(ne(ne({},e),{},{messageId:n})))}))).startWith((0,y.K0)({}))}))},be=function(e){return e.ofType(y.XH).switchMap((function(t){var n=t.id;return e.ofType(G.XP,G.Nv).switchMap((function(){return v.Observable.of((0,y.wJ)(n)).delay(500)})).takeUntil(e.ofType(Z.nk))}))},ge=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.Dq).switchMap((function(e){var t=e.path,n=(0,f.Ll)(t,(0,q.Kg)(r())),o=T()(n,"contents");if(o>0){var i=n.splice(0,o),a=(0,q.$F)(i.join("."))(r());if(a&&a.contents&&0===a.contents.length)return v.Observable.of((0,y.Od)(i.join(".")))}return v.Observable.empty()}))},he=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.tP).switchMap((function(e){var t=e.source,n=e.target,o=e.position,i=r(),a=(0,q.$F)(t)(i);return v.Observable.from([(0,y.Od)(t),(0,y.IH)(n,o,a)])}))},Oe=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.wb).filter((function(e){var t=e.path;return(void 0===t?"":t).endsWith("editMap")})).switchMap((function(e){var t=e.path,n=e.element,o=(0,f.ln)(t,(0,q.Kg)(r())),i=o.flatPath,a=o.path,c=1===i.length,l=c?i[0]:i.pop(),u=c?i[0]:i.shift(),s="background"===a[a.length-2],d=s&&"#".concat(u.id," .ms-section-background-container")||"#".concat(l.id);return(0,f.M1)(l.id),v.Observable.from([(0,y.$A)(n,l,d,s,t.replace(".editMap",""))])}))},we=function(e,t){var n=t.getState;return e.ofType(y.wb).filter((function(e){var t=e.path,n=e.element;return t&&t.endsWith("carouselToggle")&&n})).switchMap((function(e){var t=e.path,r=(0,f.u0)(t)||{},o=r.sectionId,i=r.contentId,a=(0,q.eB)(o)(n())||[];return i&&!R()(a)?v.Observable.from([(0,y.fD)(o,i)]).concat(v.Observable.of((0,y.Vx)(t,!1))):v.Observable.empty()}))},Se=function(e,t){var n=t.getState;return e.ofType($.nr).filter((function(e){var t=e.owner,n=e.map;return"inlineEditor"===t&&!!n})).switchMap((function(){return e.ofType($.LE).switchMap((function(t){var r=t.map,o=(0,q.FW)(n()).path;return v.Observable.of((0,y.Vx)("".concat(o,".map"),r,"merge"),(0,y.Vx)("".concat(o,".editMap"),!1),(0,$.Cp)()).takeUntil(e.ofType($.B8))}))}))},Pe=function(e){return e.ofType(y.vb).switchMap((function(){return v.Observable.of((0,z.Xg)("share","enabled",!1))}))},Ee=function(e){return v.Observable.merge(e.ofType(y.XH).switchMap((function(){return e.ofType(y.Zf)}))).switchMap((function(){return e.ofType(y.D7,y.wb,y.Dq,y.mN,y.QK,y.km).take(1).switchMap((function(){return v.Observable.of((0,y.c0)(!0)).concat(e.ofType(y.si,Z.nk,G.Nv).take(1).switchMap((function(){return v.Observable.of((0,y.c0)(!1))})))}))}))},je=function(e,t){var n=t.getState;return e.ofType(y.un).let(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(r){return r.withLatestFrom(e.startWith(t)).filter((function(e){var t=ee(e,2)[1];return n(t)})).map((function(e){return ee(e,1)[0]}))}}(e.ofType(y.Gx).map((function(e){return!e.status})).startWith(!0))).debounceTime(50).switchMap((function(e){var t=e.sectionId,r=e.columnId;if("edit"!==(0,q.eK)(n())&&(r||t)&&(0,q.bU)(n())){var o,i,a=k()(n(),"geostory.resource.id"),c=(0,f.NP)(window.location.href,null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.hash,a,t,r);c&&history.pushState(null,"",c)}return v.Observable.empty()}))},Te=function(e){return e.ofType(y.ij).switchMap((function(e){var t,n,r,o=e.delay,i=void 0===o?2e3:o,a=null===(t=window)||void 0===t||null===(n=t.location)||void 0===n||null===(r=n.hash)||void 0===r?void 0:r.split("/");return v.Observable.of(a).do((function(){var e,t,n;null!==(e=window)&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(n=t.hash)&&void 0!==n&&n.includes("shared")?(0,f.M1)(a[7]||a[5],{block:"start",behavior:"auto"}):a.length>5?(0,f.M1)(a[6],{block:"start",behavior:"auto"}):5===a.length&&(0,f.M1)(a[4],{block:"start",behavior:"auto"})})).ignoreElements().startWith((0,y.WE)(!0)).concat(v.Observable.of((0,y.WE)(!1)).delay(i))}))},Ce=function(e){return e.ofType(Z.nk).switchMap((function(e){var t,n=e.payload;if((null==n||null===(t=n.location)||void 0===t?void 0:t.pathname.includes("/geostory/"))&&"POP"===n.action&&!n.isFirstRendering){var r,o=I()(null==n||null===(r=n.location)||void 0===r?void 0:r.pathname);return o.find((function(e){return"shared"===e}))?v.Observable.of((0,y.wJ)(o[2])).delay(500):v.Observable.of((0,y.wJ)(o[1])).delay(500)}return v.Observable.empty()}))},Ie=function(e,t){var n=t.getState;return e.ofType(y.un).filter((function(e){var t=e.columnId,r=e.sectionId;return!("edit"!==(0,q.eK)(n())||!t&&!r)})).debounceTime(50).switchMap((function(){return v.Observable.of(Array.from(document.querySelectorAll(".ms-geostory-builder .mapstore-side-card.ms-highlight")).pop()).filter((function(e){return!!e})).withLatestFrom(v.Observable.of(document.querySelector(".ms-geostory-builder .ms2-border-layout-body")).filter((function(e){return!!e}))).map((function(e){var t=ee(e,2),n=t[0],r=t[1];return function(){var e=n.getBoundingClientRect(),t=e.top,o=e.bottom,i=r.getBoundingClientRect(),a=i.top,c=i.bottom;t<a?r.scrollBy({top:t-a-10,behavior:"smooth"}):o>c&&r.scrollBy({top:o-c+10,behavior:"smooth"})}})).do((function(e){return window.requestAnimationFrame(e)})).ignoreElements()}))},Ae=function(e){return e.ofType(y.U3).switchMap((function(e){var t=e.data,n=e.fileName;return v.Observable.of([JSON.stringify(ne({},t)),n,"application/json"]).do((function(e){return Y.LR.apply(void 0,ie(e))})).map((function(){return(0,y.g5)("export",!1)}))}))},ke=function(e){return e.ofType(y.aF).switchMap((function(e){var t=e.file;return v.Observable.defer((function(){return(0,Y.zr)(t[0]).then((function(e){return e}))})).switchMap((function(e){return v.Observable.of((0,y.K0)(e),(0,y.g5)("import",!1))})).catch((function(e){return v.Observable.of((0,W.vU)({title:"dashboard.errors.loading.title"}),(0,y.Ct)(ne({},e)))}))}))},Me=n(308316),xe=n(166190),De=n(965539),Re=n(496259),Ze=n(867076),Fe=n(828878);function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}(0,Ze.setObservableConfig)(Fe.Z);var We=(0,Ze.compose)((0,Ze.mapPropsStream)((function(e){var t=(0,Ze.createEventHandler)(),n=t.handler,r=t.stream,o="EMPTY",i="EMPTY";return v.Observable.combineLatest(e,r.filter((function(e){var t=e.columnId,n=e.sectionId;return t&&o!==t?(o=t,!0):!(!n||i===n||(i=n,0))})).withLatestFrom(e.pluck("updateCurrentPage")).do((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return i&&i(o)})).ignoreElements().startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ue(Ue({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return Ue(Ue({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{updateCurrentPage:n})}))}))),Ge=n(982030),He=n(322762),qe=n.n(He);function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ve(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Ze.setObservableConfig)(Fe.Z);const $e=(0,Ze.compose)((0,Ze.mapPropsStream)((function(e){var t=(0,Ze.createEventHandler)(),n=t.handler,r=t.stream;return v.Observable.combineLatest(e,function(e,t){return t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{interceptorTime:e.interceptorTime,updateCurrentPage:e.updateCurrentPage}})).distinctUntilKeyChanged("interceptorTime").switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.interceptorTime,r=void 0===n?100:n,o=t.updateCurrentPage;return e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return Ye(Ye({},e),{},Qe({},n,{visible:r,entry:o}))}),{}).debounceTime(r).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return qe()(Object.keys(e),(function(t){return e[t].visible?k()(e[t],"entry.boundingClientRect.top"):1/0}))})).do((function(e){o&&o({sectionId:e})})).ignoreElements()}))}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ye(Ye({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return Ye(Ye({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{onVisibilityChange:n})}))})));var Ke=n(45697),Xe=n.n(Ke),Je=n(218291),et=n(882017),tt=n(61018),nt=n(480681),rt=n(38560),ot=n(805346),it=n(399534),at=(0,Ze.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.viewHeight,o=e.size;return!n||!r||!o}),(0,Ge.Z)((function(){return!0}),(function(){return{glyph:"code"}})));const ct=(0,Ze.compose)(at)((function(e){var t=e.src,n=e.size,r=e.viewHeight;return i().createElement("div",{className:"ms-webpage-wrapper"},i().createElement("iframe",{src:t,height:"".concat((0,f.t4)(n,r),"px")}))}));var lt=n(611847),ut=n(737275),st=n(748759),ft=n(23279),dt=n.n(ft);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var gt=function(e){var t,n,r=e.id,a=e.onLoad,c=e.loading,l=e.debounceTime,u=e.children,s=e.loaderComponent,f=e.loaderStyle,d=(t=(0,st.YD)(),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=d[0],y=d[1],m=(0,o.useRef)(null),v=s;return(0,o.useEffect)((function(){return m.current=dt()((function(e){a(e)}),l),function(){m.current.cancel()}}),[]),(0,o.useEffect)((function(){y&&c&&m.current(r),!y&&c&&m.current.cancel()}),[y,c,r]),i().createElement("div",{ref:p,className:"ms-visibility-container"},c?v?i().createElement(v,{style:mt({},f)}):null:(0,o.cloneElement)(u,{inView:y}))};gt.propTypes={id:Xe().string,debounceTime:Xe().number,loading:Xe().bool,onLoad:Xe().func,loaderComponent:Xe().oneOfType([Xe().element,Xe().func])},gt.defaultProps={id:"",debounceTime:300,loading:!0,onLoad:function(){},loaderComponent:null};const ht=gt;var Ot=n(532425);function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,It(r.key),r)}}function Pt(e,t,n){return t=jt(t),function(e,t){if(t&&("object"==wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Et()?Reflect.construct(t,n||[],jt(e).constructor):t.apply(e,n))}function Et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Et=function(){return!!e})()}function jt(e){return jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jt(e)}function Tt(e,t){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tt(e,t)}function Ct(e,t,n){return(t=It(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function It(e){var t=function(e,t){if("object"!=wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wt(t)?t:t+""}var At=function(){return i().createElement("div",{className:"ms-media-loader"},i().createElement(Ot.Z,{size:52}))},kt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Ct(e=Pt(this,t,[].concat(r)),"state",{url:e.props.src||"",error:!1,loading:!0}),Ct(e,"updateURL",(function(t){var n=t.target.value;e.setState({url:n})})),Ct(e,"save",(function(){var t=e.state.url,n=!(0,lt.K2)(t,(0,ut.u8)("GeoStoryValidIframeURLRegex"));e.setState({error:n}),n||e.props.onChange(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tt(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.editURL,o=this.state,a=o.url,c=o.error;return i().createElement(i().Fragment,null,i().createElement(it.Z,null,i().createElement(tt.Z,{modal:!0,show:r,onClickOut:function(e){return e.preventDefault()&&e.stopPropagation()},title:i().createElement(ot.Z,{msgId:"geostory.webPageCreator.title"}),onClose:n,id:"web-page-creator",footer:i().createElement(rt.Z,{bsSize:"small",onClick:this.save},i().createElement(ot.Z,{msgId:"geostory.webPageCreator.saveButton"}))},c&&i().createElement("div",{className:"dropzone-errorBox alert-danger"},i().createElement(ot.Z,{msgId:"geostory.webPageCreator.error"})),i().createElement(nt.cw,{controlId:"WEBPAGE_URL",validationState:c&&"error"},i().createElement(nt.J$,null,i().createElement(ot.Z,{msgId:"geostory.webPageCreator.url.label"})),i().createElement(nt.NI,{label:"URL",type:"text",value:a,onChange:this.updateURL,required:!0})))),this.props.lazy?i().createElement(ht,{key:this.props.id,id:this.props.id,debounceTime:this.props.debounceTime,loading:this.state.loading,onLoad:function(){return e.setState({loading:!1})},loaderComponent:At},i().createElement(ct,this.props)):i().createElement(ct,this.props))}}],r&&St(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i().PureComponent);Ct(kt,"propTypes",{editURL:Xe().bool,onClose:Xe().func,onChange:Xe().func,src:Xe().string,id:Xe().string,debounceTime:Xe().number,lazy:Xe().bool}),Ct(kt,"defaultProps",{lazy:!0});var Mt=(0,Ze.compose)((0,Ze.withHandlers)({onClose:function(e){var t=e.update,n=void 0===t?function(){}:t;return function(){return n("editURL",!1,"merge")}}}))(kt);const xt=(0,a.connect)(null,{onChange:y.YM})(Mt);var Dt=["type"];function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rt.apply(null,arguments)}var Zt=(0,Je.Z)()((0,o.lazy)((function(){return Promise.all([n.e(82515),n.e(60808),n.e(25972)]).then(n.bind(n,325972))}))),Ft=function(e){var t=e.type;return i().createElement("div",{className:"ms-content ms-content-unknown"},'warning: unknown content type "'.concat(t,'"'))};const Lt=function(e){var t=e.type,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Dt),r=function(e){switch(e){case f.bT.TEXT:return Zt;case f.bT.MEDIA:case f.Tr.IMAGE:case f.Tr.MAP:case f.Tr.VIDEO:return et.ZP;case f.bT.WEBPAGE:return xt;default:return Ft}}(t);return i().createElement(r,Rt({type:t},n))};var Nt=n(725288),Ut=n(80717),Bt=["onClick"];function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$t(r.key),r)}}function qt(e,t,n){return t=_t(t),function(e,t){if(t&&("object"==zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vt()?Reflect.construct(t,n||[],_t(e).constructor):t.apply(e,n))}function Vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vt=function(){return!!e})()}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}function Yt(e,t){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yt(e,t)}function Qt(e,t,n){return(t=$t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $t(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:t+""}var Kt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(t,e),n=t,r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.trigger||e.containerWidth===this.props.containerWidth&&e.containerHeight===this.props.containerHeight||this.trigger.hide()}},{key:"render",value:function(){var e=this;return i().createElement(Nt.Z,{className:"add-bar",popoverClassName:"add-bar-popover",content:i().createElement(Ut.Z,{btnDefaultProps:{className:"square-button btn-tray"},buttons:this.props.buttons.map((function(t){var n=t.onClick,r=void 0===n?function(){}:n;return Gt(Gt({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Bt)),{},{onClick:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];r.apply(void 0,n),e.trigger.hide(),n[0]&&n[0].preventDefault&&n[0].preventDefault()}})}))}),ref:function(t){t&&(e.trigger=t.trigger)},placement:"top"},i().createElement(rt.Z,{className:this.props.addButtonClassName},i().createElement(nt.gG,{glyph:"plus"})))}}],r&&Ht(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i().Component);Qt(Kt,"propTypes",{id:Xe().string,type:Xe().string,buttons:Xe().array,containerWidth:Xe().oneOfType([Xe().number,Xe().string]),containerHeight:Xe().oneOfType([Xe().number,Xe().string]),addButtonClassName:Xe().string}),Qt(Kt,"defaultProps",{id:"",type:"",buttons:[],containerWidth:0,containerHeight:0,addButtonClassName:""});const Xt=Kt;function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}var en=["id"];function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){on(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function on(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Jt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},an.apply(null,arguments)}const cn=function(e){var t=e.viewWidth,n=e.viewHeight,r=e.className,o=e.contentProps,a=void 0===o?{}:o,c=e.addButtons,l=void 0===c?[]:c,u=e.tools,s=void 0===u?[]:u,d=e.contents,p=void 0===d?[]:d,y=e.ContentComponent,m=void 0===y?Lt:y,v=e.mode,b=e.sectionType,g=e.editMedia,h=void 0===g?function(){}:g,O=e.editWebPage,w=void 0===O?function(){}:O,S=e.add,P=void 0===S?function(){}:S,E=e.update,j=void 0===E?function(){}:E,T=e.remove,C=void 0===T?function(){}:T,I=e.bubblingTextEditing,A=void 0===I?function(){}:I,k=e.storyTheme,M=e.sections,x=void 0===M?[]:M,D=e.storyFonts,R=e.innerRef;return i().createElement("div",{ref:R,className:r},p.reduce((function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,c=o.id,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(o,en),d=[i().createElement(m,an({id:c,key:"".concat(c,"-content"),mode:v,viewWidth:t,sectionType:b,viewHeight:n,editMedia:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return h.apply(void 0,[{path:'contents[{"id": "'.concat(c,'"}]')+n}].concat(o))},editWebPage:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return w.apply(void 0,[{path:'contents[{"id": "'.concat(c,'"}]')+n}].concat(o))},add:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return P.apply(void 0,['contents[{"id": "'.concat(c,'"}].')+e].concat(n))},update:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return j.apply(void 0,['contents[{"id": "'.concat(c,'"}].')+e].concat(n))},remove:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return C.apply(void 0,['contents[{"id": "'.concat(c,'"}]')+(e?"."+e:"")].concat(n))}},a,u,{storyTheme:k,storyFonts:D,bubblingTextEditing:A,tools:s&&s[u.type],sections:x}))];return v===f.nl.EDIT&&l.length>0&&d.push(i().createElement(Xt,{key:"".concat(c,"-content-add-buttons"),containerWidth:t,containerHeight:n,buttons:l.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rn(rn({},e),{},{onClick:function(){return P("contents",c,e.template)}})}))})),[].concat(function(e){if(Array.isArray(e))return tn(e)}(e=r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d)}),[]))};n(966337);var ln=["onVisibilityChange","rootSelector"],un=["intersectionObserverOptions","onVisibilityChange"];function sn(){return sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sn.apply(null,arguments)}function fn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const dn=function(e){return(0,Ze.compose)((0,Ze.withHandlers)({onVisibilityChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onVisibilityChange,r=void 0===n?function(){}:n;return function(e,n){return r({id:t,visible:e,entry:n})}}}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onVisibilityChange,n=(e.rootSelector,fn(e,ln));return function(e){return function(r){var o=r.intersectionObserverOptions,a=void 0===o?{}:o,c=r.onVisibilityChange,l=fn(r,un),u=t||c;return i().createElement(st.df,sn({},n,a,{onChange:u}),(function(t){var n=t.inView,r=t.ref,o=t.entry;return i().createElement(e,sn({},l,{inView:n,inViewRef:r,inViewEntry:o}))}))}}}(e))};var pn=n(90085),yn=n(212610),mn=n(313311),vn=n.n(mn),bn=n(623560),gn=n.n(bn),hn=n(618446),On=n.n(hn);function wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Pn=(0,yn.Z)(nt.PS);function En(e){var t=e.value,n=e.options,r=void 0===n?[]:n,a=e.onSelect,c=void 0===a?function(){}:a,l=e.glyph,u=void 0===l?"":l,s=e.tooltipId,f=e.pullRight,d=void 0!==f&&f,p=e.className,y=void 0===p?"square-button-md no-border":p,m=e.disabled,v=e.noTooltipWhenDisabled,b=void 0!==v&&v,g=e.hideMenuItem,h=void 0===g?function(){return!1}:g,O=e.shouldClose,w=e.showSelectionInTitle,S=void 0===w||w,P=wn((0,o.useState)(!1),2),j=P[0],T=P[1],C=wn((0,o.useState)(!1),2),I=C[0],A=C[1],k=(vn()(r,(function(e){return On()(e.value,t)}))||{}).glyph;return(0,o.useEffect)((function(){m&&T(!1)}),[m]),i().createElement(Pn,{noCaret:!0,open:j,noTooltipWhenDisabled:b,tooltipId:s,pullRight:d,className:y,disabled:m,title:i().createElement(nt.gG,{glyph:S&&k||u}),onToggle:function(e,n,r){return I||"select"===(null==r?void 0:r.source)||O&&!O(t,n)?null:T(e)}},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null==e?void 0:e.Component)||nt.sN;return h(t,e)?null:i().createElement(n,{key:e.value,selected:t,value:e.value,active:gn()(null==e?void 0:e.isActive)&&e.isActive(t)||!E()(t)&&t===e.value,onClick:null!=e&&e.Component?c:function(){return c(e.value)},onActive:function(e){return A(e)}},e.label)})))}var jn=n(312122),Tn=n(911766),Cn=n(513218),In=n.n(Cn);function An(e){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(e)}function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=An(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=An(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==An(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dn(){return Dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dn.apply(null,arguments)}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Zn=(0,jn.Z)(pn.Z),Fn={primary:"btn-primary",default:"btn-default"},Ln=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,a=e.size,c=e.update,l=void 0===c?function(){}:c,u=e.filterOptions,s=e.pullRight,f=e.sizeType,d=function(e,t){var n,r,o="horizontal",i="",a=(n=e&&e.split(",")||[],r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],l=a[1],u=e,s="resize-horizontal";return t===o?(i="h-",u=c):"vertical"===t&&(i="v-",u=l,s="resize-vertical"),{sizeProp:function(e){return t?"".concat(t===o?e:c,",").concat("vertical"===t?e:l):e},pre:i,_size:u,glyph:s}}(a,f),p=d.pre,y=d._size,m=d.glyph,v=d.sizeProp;return i().createElement(En,Dn({value:y,noTooltipWhenDisabled:!0,disabled:n,glyph:m,pullRight:s||("right"===r||y==="".concat(p,"full")||y==="".concat(p,"large"))&&!o,tooltipId:"geostory.contentToolbar.contentSize",options:[{value:"".concat(p,"small"),glyph:"size-small",label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.smallSizeLabel"})},{value:"".concat(p,"medium"),glyph:"size-medium",label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.mediumSizeLabel"})},{value:"".concat(p,"large"),glyph:"size-large",label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.largeSizeLabel"})},{value:"".concat(p,"full"),glyph:"size-extra-large",label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.fullSizeLabel"})}].filter((function(e){return!u||u(e)})),onSelect:function(e){return l("size",v(e))}},f&&{showSelectionInTitle:!1}))},Nn=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,a=e.size,c=e.update,l=void 0===c?function(){}:c;return i().createElement(En,{value:r,noTooltipWhenDisabled:!0,disabled:"full"===a||n,glyph:"align-center",pullRight:("right"===r||"full"===a||"large"===a)&&!o,tooltipId:"geostory.contentToolbar.contentAlign",options:[{value:"left",label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.leftAlignLabel"}),glyph:"align-left"},{value:"center",label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.centerAlignLabel"}),glyph:"align-center"},{value:"right",label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.rightAlignLabel"}),glyph:"align-right"}],onSelect:function(e){return l("align",e)}})},Un=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.theme,o=e.storyTheme,a=e.align,c=e.sectionType,l=e.update,u=void 0===l?function(){}:l,s=e.themeProps,f=e.size;return i().createElement(En,{value:r,noTooltipWhenDisabled:!0,pullRight:("right"===a||"full"===f||"large"===f)&&!c,glyph:"dropper",tooltipId:"geostory.contentToolbar.contentTheme",disabled:n,shouldClose:function(e,t){var n,r;return In()(e)&&"ms-color-picker-cover"!==(null==t||null===(n=t.target)||void 0===n||null===(r=n.getAttribute)||void 0===r?void 0:r.call(n,"class"))||S()(e)||void 0===e},hideMenuItem:function(e,t){return"custom"===(null==e?void 0:e.value)&&"custom"!==(null==t?void 0:t.value)},options:[{value:"",isActive:function(e){return void 0===e||""===e||In()(e)&&(void 0===e.value||""===e.value)},label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.defaultThemeLabel"})},{value:"bright",isActive:function(e){return"bright"===(null==e?void 0:e.value)||"bright"===e},label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.brightThemeLabel"})},{value:"dark",isActive:function(e){return"dark"===(null==e?void 0:e.value)||"dark"===e},label:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.darkThemeLabel"})},{value:"custom",Component:function(e){return i().createElement(Tn.H,Dn({},e,{disableBackgroundAlpha:null==s?void 0:s.disableBackgroundAlpha,disableShadow:null==s?void 0:s.disableShadow,disableTextColor:null==s?void 0:s.disableTextColor,onUpdate:u,storyTheme:o}))}}],onSelect:function(e){return u("theme",Mn(Mn({},In()(r)&&r),{},{value:e}))}})},Bn=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.forceDelBtnDisable,o=void 0!==r&&r,a=e.path,c=e.remove,l=void 0===c?function(){}:c,u=e.bsStyle;return i().createElement(Zn,{glyph:"trash",visible:!0,noTooltipWhenDisabled:!0,disabled:n||o,className:"".concat("square-button-md no-border"," ").concat(u&&Fn[u]),tooltipId:"geostory.contentToolbar.remove",confirmTitle:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.removeConfirmTitle"}),confirmContent:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.removeConfirmContent"}),onClick:function(){l(a)}})},zn=n(455877),Wn=n.n(zn);function Gn(e){return Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(e)}var Hn=["editMap","map","update"],qn=["tools","children"];function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Gn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var $n={size:function(e){return{renderButton:i().createElement(Ln,e)}},align:function(e){return{renderButton:i().createElement(Nn,e)}},theme:function(e){return{renderButton:i().createElement(Un,e)}},fit:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.fit,o=e.update,i=void 0===o?function(){}:o;return{value:r,glyph:"contain"===r?"fit-cover":"fit-contain",disabled:n,visible:!0,tooltipId:"contain"===r?"geostory.contentToolbar.cover":"geostory.contentToolbar.fit",onClick:function(){return i("fit","contain"===r?"cover":"contain")}}},cover:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.cover,o=e.updateSection,i=void 0===o?function(){}:o;return{value:r,glyph:r?"height-auto":"height-view",visible:!0,disabled:n,tooltipId:r?"geostory.contentToolbar.contentHeightAuto":"geostory.contentToolbar.contentHeightView",onClick:function(){return i({cover:!r},"merge")}}},editMedia:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.path,o=e.editMedia,i=void 0===o?function(){}:o,a=e.sectionType;return{glyph:"pencil","data-button":"pencil",visible:!0,disabled:n,tooltipId:"geostory.contentToolbar.editMedia",onClick:function(){i({path:r},r?a:"")}}},remove:function(e){return{renderButton:i().createElement(Bn,e)}},editMap:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.map,o=e.update,i=void 0===o?function(){}:o,a=Qn(e,Hn);return{glyph:"map-edit",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editMap",onClick:function(){var e=null!=r?r:a,t=e.center,o=e.zoom,c=e.resolution;i("editMap",!n),!n&&i("map",{center:t,zoom:o,mapStateSource:Wn()(),resolution:c,resetPanAndZoom:!1},"merge")}}},editURL:function(e){var t=e.editURL,n=void 0!==t&&t,r=e.path,o=e.editWebPage,i=void 0===o?function(){}:o;return{glyph:"pencil",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editURL",onClick:function(){i({path:r})}}},muted:function(e){var t=e.update,n=e.muted;return{glyph:n?"muted":"audio",visible:!0,active:!n,tooltipId:n?"geostory.contentToolbar.enableAudio":"geostory.contentToolbar.disableAudio",onClick:function(){t("muted",!n)}}},autoplay:function(e){var t=e.update,n=e.autoplay;return{glyph:"play-circle",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableAutoplay":"geostory.contentToolbar.enableAutoplay",onClick:function(){t("autoplay",!n)}}},loop:function(e){var t=e.update,n=e.loop;return{glyph:"loop",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableLoop":"geostory.contentToolbar.enableLoop",onClick:function(){t("loop",!n)}}},showCaption:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.update,o=e.showCaption,i=e.caption,a=e.description;return{glyph:"caption",visible:!(!i&&!a),disabled:n,active:!(!o||n),tooltipId:o?"geostory.contentToolbar.hideCaption":"geostory.contentToolbar.showCaption",onClick:function(){r("showCaption",!o)}}},add:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.addDisabled,o=void 0!==r&&r,i=e.add,a=void 0===i?function(){}:i,c=e.bsStyle;return{glyph:"plus",visible:!0,bsStyle:void 0===c?"default":c,tooltipId:"geostory.contentToolbar.add",disabled:n||o,onClick:a}},edit:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.edit,o=void 0===r?function(){}:r,i=e.bsStyle;return{glyph:"pencil",visible:!0,bsStyle:void 0===i?"default":i,tooltipId:"geostory.contentToolbar.edit",disabled:n,onClick:o}},marker:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.markerDisabled,o=void 0!==r&&r,i=e.marker,a=void 0===i?function(){}:i,c=e.bsStyle;return{glyph:"map-marker",visible:!0,tooltipId:"geostory.contentToolbar.marker",bsStyle:void 0===c?"default":c,disabled:n||o,onClick:a}},closeDraw:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.bsStyle,o=void 0===r?"default":r,i=e.update,a=void 0===i?function(){}:i,c=e.onEnableDraw,l=void 0===c?function(){}:c;return{glyph:"1-close",visible:!0,tooltipId:"geostory.contentToolbar.closeMapEditing",bsStyle:o,disabled:!n,onClick:function(){l(null),a("editMap",!n)}}}};function Kn(e){var t=e.tools,n=void 0===t?[]:t,r=e.children,o=Qn(e,qn);return i().createElement("div",{className:"ms-content-toolbar"},i().createElement(Ut.Z,{btnDefaultProps:{className:"square-button-md no-border",noTooltipWhenDisabled:!0},buttons:n.filter((function(e){return(null==e?void 0:e.id)&&$n[e.id]||$n[e]})).map((function(e){return(null==e?void 0:e.id)&&$n[e.id](_n(_n({},o),e))||$n[e](o)}))}),r)}function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}var Jn=["id","inViewRef","innerRef","children","type","contentWrapperStyle","contentToolbar","mode"];function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){nr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Xn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rr=function(e){var t=e.id,n=e.inViewRef,r=e.innerRef,o=e.children,a=e.type,c=e.contentWrapperStyle,l=e.contentToolbar,u=e.mode,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Jn),d=l||Kn;return i().createElement("div",{id:t,ref:n,style:tr(tr({},c),s.hideContent&&{display:"none"}),className:"ms-content ms-content-".concat(a).concat((0,f.w)(s))},i().createElement("div",{className:"ms-content-body",ref:r,style:(0,f.cy)(s)},u===f.nl.EDIT&&i().createElement(d,s),o))};function or(e){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(e)}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=or(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==or(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cr=(0,Ze.compose)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Ze.nest.apply(void 0,t.concat([e]))}}(rr),(0,Ze.setDisplayName)("ColumnContent"))(Lt),lr=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})};const ur=(0,Ze.compose)((0,Ze.branch)((function(e){var t=e.type,n=e.sectionType;return[f.ID.IMMERSIVE,f.ID.CAROUSEL].includes(n)&&t===f.bT.COLUMN}),dn({threshold:[0,.25,.5,.75]})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Ze.nest.apply(void 0,t.concat([e]))}}(rr),(0,Ze.setDisplayName)("SectionContent"),(0,Ze.branch)((function(e){return e.type===f.bT.COLUMN}),(0,Ze.renderComponent)((function(e){var t=e.viewWidth,n=e.viewHeight,r=e.contents,o=void 0===r?[]:r,a=e.mode,c=e.add,l=void 0===c?function(){}:c,u=e.editMedia,s=void 0===u?function(){}:u,d=e.editWebPage,p=void 0===d?function(){}:d,y=e.update,m=void 0===y?function(){}:y,v=e.remove,b=void 0===v?function(){}:v,g=e.bubblingTextEditing,h=void 0===g?function(){}:g,O=e.expandable,w=e.mediaViewer,S=e.contentToolbar,P=e.sections,E=void 0===P?[]:P,j=e.sectionType,T=e.overrideTools,C=void 0===T?function(e){return e}:T,I=e.storyFonts;return i().createElement(cn,{className:"ms-column-contents",ContentComponent:cr,contents:o,mode:a,add:l,editMedia:s,editWebPage:p,update:m,remove:b,viewWidth:t,viewHeight:n,bubblingTextEditing:h,sectionType:j,contentProps:{expandable:O,mediaViewer:w,contentToolbar:S},sections:E,storyFonts:I,tools:C(ar(ar(ar(ar(ar({},f.bT.TEXT,["remove"]),f.Tr.IMAGE,["editMedia",lr(),"showCaption","remove"]),f.Tr.MAP,["editMedia","editMap",lr(!0),"showCaption","remove"]),f.bT.WEBPAGE,[lr(!0,{sizeType:"horizontal"}),"editURL",lr(!0,{sizeType:"vertical",filterOptions:function(e){return"v-full"!==e.value}}),"remove"]),f.Tr.VIDEO,["editMedia","muted","autoplay","loop","showCaption","remove"])),addButtons:[{glyph:"sheet",tooltipId:"geostory.addTextContent",template:f.bT.TEXT},{glyph:"picture",tooltipId:"geostory.addMediaContent",template:f.bT.MEDIA},{glyph:"webpage",tooltipId:"geostory.addWebPageContent",template:f.bT.WEBPAGE}]})}))))(Lt),sr=(0,Ze.compose)((0,Ze.defaultProps)({ContentComponent:ur}),(0,Ze.withHandlers)({editMedia:function(e){var t=e.editMedia,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},editWebPage:function(e){var t=e.editWebPage,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},add:function(e){var t=e.add,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},update:function(e){var t=e.update,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},remove:function(e){var t=e.remove,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}}}),(0,Ze.setDisplayName)("SectionContents"))(cn);var fr=n(630998),dr=n.n(fr),pr=n(84753),yr=n.n(pr);function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=mr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Ze.setObservableConfig)(Fe.Z);var Or=function(e,t){var n=dr()(e,{id:t});return e[-1!==n&&n?n:0]},wr=(0,Ze.withProps)((function(e){var t=e.id,n=e.backgroundId,r=e.contents,o=Or(void 0===r?[]:r,n)||{},i=o&&o.id;return{background:k()(o,"background")||{type:"none"},contentId:i,sectionId:t,path:'sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(i,'"}].background')}})),Sr=(0,Ze.withHandlers)({updateBackground:function(e){var t=e.sectionId,n=e.contentId,r=e.update,o=void 0===r?function(){}:r;return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return o.apply(void 0,['sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(n,'"}].background.')+e].concat(i))}},updateSection:function(e){var t=e.sectionId,n=e.update,r=void 0===n?function(){}:n;return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,['sections[{"id": "'.concat(t,'"}]')].concat(n))}}}),Pr=(0,Ze.compose)(wr,Sr),Er=(0,Ze.mapPropsStream)((function(e){var t=(0,Ze.createEventHandler)(),n=t.handler,r=t.stream;return v.Observable.combineLatest(e,function(e,t){var n=e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return gr(gr({},e),{},hr({},n,{visible:r,entry:o}))}),{}).debounceTime(100).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{maxItem:yr()(Object.keys(e),(function(t){return e[t].visible?k()(e[t],"entry.intersectionRatio"):-1/0})),items:e}}));return v.Observable.merge(n.pluck("maxItem").distinctUntilChanged().map((function(e){return{backgroundId:e}})),n.map((function(e){var t=e.maxItem,n=e.items;return 0===k()(n[t],"entry.intersectionRatio")?"EMPTY":t})).withLatestFrom(t.pluck("updateCurrentPage")).do((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return vr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vr(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return i&&i({columnId:o})})).ignoreElements())}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return gr(gr({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return gr(gr({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{onVisibilityChange:n})}))}));const jr=(0,Ze.compose)(Er,Pr);var Tr=n(689438);function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir.apply(null,arguments)}function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){Fr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lr(r.key),r)}}function xr(e,t,n){return t=Rr(t),function(e,t){if(t&&("object"==Cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dr()?Reflect.construct(t,n||[],Rr(e).constructor):t.apply(e,n))}function Dr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dr=function(){return!!e})()}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rr(e)}function Zr(e,t){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zr(e,t)}function Fr(e,t,n){return(t=Lr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lr(e){var t=function(e,t){if("object"!=Cr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cr(t)?t:t+""}var Nr=n(356936),Ur=n(683255),Br=n.n(Ur);function zr(e){return zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zr(e)}function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){$r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hr(){return Hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hr.apply(null,arguments)}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kr(r.key),r)}}function Vr(e,t,n){return t=Yr(t),function(e,t){if(t&&("object"==zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_r()?Reflect.construct(t,n||[],Yr(e).constructor):t.apply(e,n))}function _r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_r=function(){return!!e})()}function Yr(e){return Yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yr(e)}function Qr(e,t){return Qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qr(e,t)}function $r(e,t,n){return(t=Kr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kr(e){var t=function(e,t){if("object"!=zr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zr(t)?t:t+""}var Xr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vr(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=(0,f.cy)(this.props),t=!this.props.disableToolbarPortal&&this.refs&&this.refs.div&&this.refs.div.parentNode,n=this.props.sectionType===f.ID.TITLE?["editMedia","cover"]:["editMedia"],r=this.props.contentToolbar||Kn,o=i().createElement(r,Hr({},this.props,{themeProps:{disableBackgroundAlpha:!0,disableTextColor:!0,disableShadow:!0},tools:this.props.tools&&this.props.type&&this.props.tools[this.props.type]||this.props.sectionType===f.ID.BANNER&&[].concat(n,["cover","remove"])||n}),this.props.contentToolbarChildren),a="".concat(this.props.sectionId||"ms","-media-").concat(this.props.id||this.props.resourceId);return i().createElement("div",{ref:"div",className:"ms-section-background",style:Gr({},this.props.style)},i().createElement("div",{className:"ms-section-background-container".concat((0,f.w)(this.props)),ref:this.props.innerRef,style:Gr(Gr({height:this.props.height},e),null!==et.Ln&&void 0!==et.Ln&&et.Ln[this.props.type]?{}:this.props.backgroundPlaceholder)},i().createElement(et.ZP,Hr({id:a},this.props,{enableFullscreen:!1,descriptionEnabled:!1,mediaViewer:this.props.mediaViewer,containerInView:this.props.inView}),this.props.children),this.props.mode===f.nl.EDIT&&(t?i().createElement(Nr.h_,{container:t},o):o)))}}])&&qr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component);$r(Xr,"propTypes",{id:Xe().string,resourceId:Xe().string,sectionId:Xe().string,mode:Xe().string,fit:Xe().string,size:Xe().string,path:Xe().string,credits:Xe().string,description:Xe().string,height:Xe().number,width:Xe().number,tools:Xe().object,style:Xe().object,add:Xe().func,editMedia:Xe().func,update:Xe().func,updateSection:Xe().func,remove:Xe().func,type:Xe().oneOf(f.lg.MediaTypes),disableToolbarPortal:Xe().bool,backgroundPlaceholder:Xe().object,sectionType:Xe().string,src:Xe().string,theme:Xe().string,mediaViewer:Xe().func,contentToolbar:Xe().func,inView:Xe().bool,sections:Xe().array,innerRef:Xe().oneOfType([Xe().func,Xe().object]),contentToolbarChildren:Xe().node}),$r(Xr,"defaultProps",{height:0,size:"full",width:0,style:{},backgroundPlaceholder:{background:"url(".concat(Br(),")"),backgroundSize:"256px auto"}});const Jr=(eo=Xr,to=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Fr(e=xr(this,t,[].concat(r)),"state",{style:{}}),Fr(e,"update",(function(t){if(e._stickybits){var n=document.querySelector(t);-1===e._stickybits.definePosition().indexOf("sticky")&&n&&(e._stickybits.update(),setTimeout((function(){var t=n.getBoundingClientRect(),r=t.top,o=t.left;e.setState({style:{top:r,left:o,width:n.scrollWidth-2}})})))}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zr(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._stickybits=this._node&&(0,Tr.Z)(this._node,{scrollEl:this.props.scrollContainerSelector,noStyles:!0,useGetBoundingClientRect:!0}),this.update(this.props.scrollContainerSelector)}},{key:"componentWillReceiveProps",value:function(e){!this._stickybits||e.viewWidth===this.props.viewWidth&&e.viewHeight===this.props.viewHeight||this.update(e.scrollContainerSelector)}},{key:"componentWillUnmount",value:function(){this._stickybits&&this._stickybits.cleanup()}},{key:"render",value:function(){var e=this;return i().createElement(eo,Ir({ref:function(t){t&&t.refs&&t.refs[e.props.refId]&&(e._node=t.refs[e.props.refId])},style:kr({},this.state.style)},this.props),this.props.children)}}])&&Mr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component),Fr(to,"propTypes",{scrollContainerSelector:Xe().string,height:Xe().number,width:Xe().number,refId:Xe().string}),Fr(to,"defaultProps",{scrollContainerSelector:"body",height:0,width:0,refId:"div"}),to);var eo,to,no=n(911636),ro=n.n(no);function oo(e){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oo(e)}function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},io.apply(null,arguments)}function ao(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=oo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const co=(0,Ze.compose)(jr,(0,Ze.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.add,n=void 0===t?function(){}:t,r=e.editMedia,o=void 0===r?function(){}:r,a=e.editWebPage,c=void 0===a?function(){}:a,l=e.onVisibilityChange,u=void 0===l?function(){}:l,s=e.update,d=void 0===s?function(){}:s,p=e.updateBackground,y=void 0===p?function(){}:p,m=e.updateCurrentPage,v=void 0===m?function(){}:m,b=e.remove,g=void 0===b?function(){}:b,h=e.id,O=e.background,w=void 0===O?{}:O,S=e.path,P=e.contents,E=void 0===P?[]:P,j=e.mode,T=e.sectionType,C=e.inViewRef,I=e.viewWidth,A=e.viewHeight,M=e.focusedContent,x=e.contentId,D=e.bubblingTextEditing,R=void 0===D?function(){}:D,Z=e.textEditorActiveClass,F=void 0===Z?"":Z,L=e.expandableMedia,N=void 0!==L&&L,U=e.storyTheme,B=e.mediaViewer,z=e.contentToolbar,W=e.inView,G=e.sections,H=void 0===G?[]:G,q=e.storyFonts,V=M&&M.hideContent&&k()(M,"target.id")===x,_=V?"hidden":"visible",Y=N&&w&&"map"===w.type?" ms-expandable-background":"",Q=(null==U?void 0:U.overlay)||{},$=(null==U?void 0:U.general)||{};return i().createElement("section",{className:"ms-section ms-section-immersive".concat(Y),id:h,ref:C},i().createElement(Jr,io({},w,{mode:j,disableToolbarPortal:!0,tools:ao(ao(ao({},f.Tr.IMAGE,["editMedia","fit","size","align","theme"]),f.Tr.MAP,["editMedia","editMap","size","align","theme"]),f.Tr.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),scrollContainerSelector:"#ms-sections-container",add:n,editMedia:o,expandable:N,path:S,update:y,updateCurrentPage:v,remove:g,sectionType:T,sectionId:h,backgroundId:w.id,key:w.id,width:I,height:A,backgroundPlaceholder:{background:"url(".concat(ro(),")"),backgroundSize:"600px auto"},storyTheme:$,mediaViewer:B,contentToolbar:z,inView:W})),i().createElement(sr,{tools:ao({},f.bT.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(F),contents:E,mode:j,add:n,updateCurrentPage:v,editMedia:o,editWebPage:c,update:d,remove:g,sectionId:h,viewWidth:I,viewHeight:A,contentProps:{onVisibilityChange:u,contentWrapperStyle:{minHeight:A,visibility:_},expandable:N,mediaViewer:B,contentToolbar:z},focusedContent:M,bubblingTextEditing:R,sectionType:T,storyTheme:Q,sections:H,storyFonts:q}),j===f.nl.EDIT&&!V&&i().createElement(Xt,{containerWidth:I,containerHeight:A,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){n("sections",h,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){n("sections",h,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){n("sections",h,f.ID.PARAGRAPH)}},{glyph:"story-immersive-content",tooltipId:"geostory.addImmersiveContent",onClick:function(){n('sections[{"id": "'.concat(h,'"}].contents'),void 0,f.bT.COLUMN,"geostory.builder.defaults.titleImmersiveContent")}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){n("sections",h,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){n("sections",h,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){n("sections",h,f.tQ.WEBPAGE)}}]}))}));function lo(e){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(e)}function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=lo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=lo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const po=function(e){var t=e.id,n=e.contents,r=e.mode,o=e.add,a=void 0===o?function(){}:o,c=e.update,l=void 0===c?function(){}:c,u=e.editMedia,s=void 0===u?function(){}:u,d=e.editWebPage,p=void 0===d?function(){}:d,y=e.remove,m=void 0===y?function(){}:y,v=e.inViewRef,b=e.viewWidth,g=e.viewHeight,h=e.expandableMedia,O=e.mediaViewer,w=e.contentToolbar,S=e.sections,P=void 0===S?[]:S,E=e.sectionType,j=e.storyFonts;return i().createElement("section",{className:"ms-section ms-section-paragraph",id:t,ref:v},i().createElement(sr,{className:"ms-section-contents",contents:n,mode:r,add:a,editMedia:s,editWebPage:p,update:l,remove:m,sectionId:t,viewWidth:b,viewHeight:g,sectionType:E,contentProps:{expandable:h,mediaViewer:O,contentToolbar:w,overrideTools:function(e){return so(so({},e),{},fo({},f.bT.TEXT,[(!0,{id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:true}),"remove"]))}},sections:P,storyFonts:j}),r===f.nl.EDIT&&i().createElement(Xt,{containerWidth:b,containerHeight:g,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){a("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){a("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",t,f.tQ.WEBPAGE)}}]}))};var yo=n(875492),mo=n.n(yo);function vo(e){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(e)}function bo(){return bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bo.apply(null,arguments)}function go(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=vo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ho=(0,Ze.compose)(Pr,(0,Ze.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.contents,a=void 0===o?[]:o,c=e.mode,l=e.contentId,u=e.path,s=e.sectionType,d=e.cover,p=e.viewWidth,y=e.viewHeight,m=e.inViewRef,v=e.add,b=void 0===v?function(){}:v,g=e.update,h=void 0===g?function(){}:g,O=e.updateSection,w=void 0===O?function(){}:O,S=e.remove,P=void 0===S?function(){}:S,E=e.updateBackground,j=void 0===E?function(){}:E,T=e.editMedia,C=void 0===T?function(){}:T,I=e.focusedContent,A=e.bubblingTextEditing,M=void 0===A?function(){}:A,x=e.textEditorActiveClass,D=void 0===x?"":x,R=e.expandableMedia,Z=void 0!==R&&R,F=e.storyTheme,L=e.mediaViewer,N=e.contentToolbar,U=e.inView,B=e.sections,z=void 0===B?[]:B,W=e.storyFonts,G=k()(I,"target.id")===l,H=G?"hidden":"visible",q=Z&&r&&"map"===r.type?" ms-expandable-background":"",V=(null==F?void 0:F.overlay)||{},_=(null==F?void 0:F.general)||{};return i().createElement("section",{ref:m,className:"ms-section ms-section-title".concat(q),id:t},i().createElement(Re.Z,null,(function(e){var t=e.height;return i().createElement(Jr,bo({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:c,id:l,path:u,update:j,add:b,editMedia:C,expandable:Z,updateSection:w,cover:d,remove:P,width:p,sectionType:s,backgroundPlaceholder:{background:"url(".concat(d?Br():mo(),")"),backgroundSize:"".concat(d?64:600,"px auto")},tools:go(go(go({},f.Tr.IMAGE,["editMedia","cover","fit","size","align","theme"]),f.Tr.MAP,["editMedia","cover","editMap","size","align","theme"]),f.Tr.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop"]),height:t>=y?y:t,storyTheme:_,mediaViewer:L,contentToolbar:N,inView:U}))})),i().createElement(sr,{className:"ms-section-contents".concat(D),contents:a,mode:c,add:b,sectionType:s,update:h,remove:P,sectionId:t,contentProps:{contentWrapperStyle:d?{minHeight:y,visibility:H}:{visibility:H},mediaViewer:L,contentToolbar:N},tools:go({},f.bT.TEXT,["size","align","theme","remove"]),focusedContent:I,bubblingTextEditing:M,storyTheme:V,sections:z,storyFonts:W}),c===f.nl.EDIT&&!G&&i().createElement(Xt,{containerWidth:p,containerHeight:y,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){b("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){b("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){b("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){b("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){b("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){b("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){b("sections",t,f.tQ.WEBPAGE)}}]}))}));function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wo.apply(null,arguments)}function So(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Oo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Po=(0,Ze.compose)(Pr,(0,Ze.withStateHandlers)({textEditorActive:!1}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.mode,a=e.contentId,c=e.path,l=e.sectionType,u=void 0===l?f.ID.BANNER:l,s=e.cover,d=e.viewWidth,p=e.viewHeight,y=e.inViewRef,m=e.add,v=void 0===m?function(){}:m,b=e.updateSection,g=void 0===b?function(){}:b,h=e.remove,O=void 0===h?function(){}:h,w=e.updateBackground,S=void 0===w?function(){}:w,P=e.editMedia,E=void 0===P?function(){}:P,j=e.focusedContent,T=e.expandableMedia,C=void 0!==T&&T,I=e.storyTheme,A=e.mediaViewer,M=e.contentToolbar,x=e.inView,D=k()(j,"target.id")===a,R=C&&r&&"map"===r.type?" ms-expandable-background":"",Z=c.replace(".background","");return i().createElement("section",{ref:y,className:"ms-section ms-section-banner".concat(R),id:t},i().createElement(Re.Z,null,(function(e){var t=e.height;return i().createElement(Jr,wo({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:o,id:a,path:c,update:S,add:v,editMedia:E,expandable:C,updateSection:g,cover:s,remove:function(){return O(Z)},width:d,sectionType:u,backgroundPlaceholder:{background:"url(".concat(s?Br():mo(),")"),backgroundSize:"".concat(s?64:600,"px auto")},tools:So(So(So({},f.Tr.IMAGE,["editMedia","cover","fit","size","align","theme","remove"]),f.Tr.MAP,["editMedia","cover","editMap","size","align","theme","remove"]),f.Tr.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop","remove"]),height:t>=p?p:t,storyTheme:I,mediaViewer:A,contentToolbar:M,inView:x}))})),i().createElement("div",{style:{minHeight:s?p:300,pointerEvents:"none"}}),o===f.nl.EDIT&&!D&&i().createElement(Xt,{containerWidth:d,containerHeight:p,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){v("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){v("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){v("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){v("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){v("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){v("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){v("sections",t,f.tQ.WEBPAGE)}}]}))}));var Eo=n(294184),jo=n.n(Eo),To=n(771335),Co=n(694745),Io=n(993451);function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ko(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ko(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Mo=(0,Io.Z)("placeholder")(nt.NI);const xo=function(e){var t,n,r,a=Ao((0,o.useState)([]),2),c=a[0],l=a[1],u=Ao((0,o.useState)({data:null==e||null===(t=e.thumbnail)||void 0===t?void 0:t.image}),2),s=u[0],f=u[1],d=Ao((0,o.useState)(null==e?void 0:e.title),2),p=d[0],y=d[1];return i().createElement(Co.Z,{fitContent:!0,title:i().createElement(ot.Z,{msgId:e.editing?"geostory.carouselEditTitle":"geostory.carouselAddTitle"}),show:!0,fade:!0,clickOutEnabled:!1,bodyClassName:"ms-flex modal-properties-container background-dialog",onClose:e.onClose,buttons:e.loading?[]:[{text:i().createElement(ot.Z,{msgId:e.editing?"save":"backgroundDialog.add"}),bsStyle:"primary",onClick:function(){e.update("thumbnail",{image:s.data}),e.update("title",p),e.onClose()}}]},i().createElement(nt.l0,{style:{width:"100%"}},(r={FORMAT:i().createElement(ot.Z,{msgId:"map.errorFormat"}),SIZE:i().createElement(ot.Z,{msgId:"map.errorSize"})},c.length>0?i().createElement("div",{className:"dropzone-errorBox alert-danger"},i().createElement("p",null,i().createElement(ot.Z,{msgId:"map.error"})),c.map((function(e){return i().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},r[e])}))):null),i().createElement(To.Z,{onUpdate:function(e,t){return f({data:e,url:t})},onError:function(e){return l(e)},message:i().createElement(ot.Z,{msgId:"backgroundDialog.imageUploadMessage"}),suggestion:"",map:{newThumbnail:k()(s,"url")||(null===(n=e.thumbnail)||void 0===n?void 0:n.image)||"NODATA"},thumbnailOptions:{contain:!1,width:128,height:128,quality:1,type:"image/jpeg"}}),i().createElement(nt.cw,null,i().createElement(nt.J$,null,i().createElement(ot.Z,{msgId:"layerProperties.title"})),i().createElement(Mo,{value:p,placeholder:"backgroundDialog.titlePlaceholder",onChange:function(e){return y(e.target.value)}}))))};var Do=n(625311),Ro=n(245567),Zo=n(773723),Fo=n.n(Zo),Lo=n(615402);const No=function(e){return t=e.type,n="",r="","addMap"===t?(n="ms-carousel-map-info",r="geostory.carouselAddMapInfo"):"addMarker"===t?(n="ms-carousel-marker-info",r="geostory.carouselPlaceMarkerInfo"):(n="ms-carousel-add-info",r="geostory.carouselAddItemInfo"),i().createElement("div",{className:n},i().createElement(Lo.Z,{msgId:r}));var t,n,r};var Uo=n(81593);function Bo(e){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bo(e)}var zo=["title","thumbnail","index","isSelected"],Wo=["onSort","sectionId","contents","onEnableDraw","isEditMap","isDrawEnabled"];function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Bo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Bo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vo.apply(null,arguments)}function _o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Qo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var $o=(0,Do.Z)((function(e){var t=e.title,n=e.thumbnail,r=e.index,o=e.isSelected,a=Qo(e,zo),c=i().createElement("div",{className:jo()("ms-geo-carousel-item",{"ms-geo-carousel-item-selected":o}),onClick:a.onClick},i().createElement("div",{className:"ms-geo-carousel-item-inner-wrapper",style:{backgroundImage:"url(".concat((null==n?void 0:n.image)||Fo(),")")}},i().createElement("span",{className:"ms-geo-carousel-item-inner"},t||"Item ".concat(r+1)),i().createElement("span",{className:"ms-geo-carousel-item-inner-index"},r+1)));return a.isDraggable&&a.connectDragSource?a.connectDragSource(c):c})),Ko=(0,Ro.Z)((function(e){var t=e.mode,n=e.add,r=e.update,a=void 0===r?function(){}:r,c=e.remove,l=e.sectionId,u=e.isMapBackground,s=e.contentId,d=e.items,p=e.contentToolbar,y=void 0===p?Kn:p,m=e.cardComponent,v=e.containerWidth,b=e.isDrawEnabled,g=e.onEnableDraw,h=e.isEditMap,O=e.innerRef,w=e.deltaSwipeSize,S=void 0===w?200:w,P=e.transition,E=void 0===P?300:P,j=e.style,T=e.controlStyle,C=_o((0,o.useState)(!1),2),I=C[0],A=C[1],k=_o((0,o.useState)(void 0),2),M=k[0],x=k[1],D=_o((0,o.useState)(""),2),Z=D[0],F=D[1],L=_o((0,o.useState)({}),2),N=L[0],U=L[1],B=(0,Uo.Z)({direction:"horizontal",width:v,deltaScroll:S,transition:E},[d.length]),z=B.isStartControlActive,W=B.isEndControlActive,G=B.containerPropsHandlers,H=B.contentPropsHandlers,q=B.itemPropsHandlers,V=B.moveToDeltaSize,_=B.moveItemInViewById,Y=t===f.nl.EDIT;(0,o.useEffect)((function(){s&&_(s,{margin:32})}),[s]);var Q=!(u&&!vn()(d,(function(e){var t;return 0===((null==e||null===(t=e.features)||void 0===t?void 0:t.length)||0)})));return i().createElement(i().Fragment,null,i().createElement("div",{ref:O,style:j,className:"ms-geo-carousel"},Y&&1===d.length&&Q&&!h&&i().createElement(No,{type:"addInfo"}),h&&Y&&b&&!!vn()(d,(function(e){var t;return e.id===s&&0===((null==e||null===(t=e.features)||void 0===t?void 0:t.length)||0)}))&&i().createElement(No,{type:"addMarker"}),Y&&i().createElement(y,{addDisabled:Q,add:n,editMap:h,remove:function(){return c('sections[{"id":"'.concat(l,'"}]'))},tools:["add","remove"]}),i().createElement("div",Vo({},G(),{className:"ms-horizontal-menu"}),i().createElement("div",H(),d.map((function(e,t){var r=q({id:e.id,onClick:h?void 0:function(){a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(e.id,'"}].carouselToggle'),!0)}});return i().createElement("div",Vo({key:t},r,{className:"ms-geo-carousel-item-wrapper",style:h?{pointerEvents:"none"}:{}}),Y&&i().createElement(y,{editMap:h,markerDisabled:!u||(null==e?void 0:e.id)!==s,edit:function(t){t.stopPropagation(),function(e){x(null==e?void 0:e.id),A(!0),U(null==e?void 0:e.thumbnail),F(null==e?void 0:e.title)}(e)},remove:function(){var n,r,o,i;return o=null==e?void 0:e.id,i=0===t&&d.length>0?null===(n=d[t+1])||void 0===n?void 0:n.id:null===(r=d[t-1])||void 0===r?void 0:r.id,c('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(o,'"}]')),void(s===o&&a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(i,'"}].hideContent'),!1))},forceDelBtnDisable:(null==e?void 0:e.id)===s,add:n,marker:function(t){t.stopPropagation(),g(e)},tools:["edit","remove","marker"]}),i().createElement(m,Vo({key:t,index:t,items:d,update:a,sectionId:l,selectedId:s,isSelected:(null==e?void 0:e.id)===s},e)))}))),z&&i().createElement(rt.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:Ho(Ho({},T),{},{position:"absolute"}),onClick:function(){return V(S)}},i().createElement(nt.gG,{glyph:"chevron-left"})),W&&i().createElement(rt.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:Ho(Ho({},T),{},{position:"absolute",right:0}),onClick:function(){return V(-S)}},i().createElement(nt.gG,{glyph:"chevron-right"})))),I&&i().createElement(xo,{title:Z,thumbnail:N,update:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=R()(e)?"":".".concat(e);a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(n,'"}]')+o,t,r)},onClose:function(){return A(!1)}}))}));const Xo=function(e){var t=e.onSort,n=e.sectionId,r=e.contents,o=void 0===r?[]:r,a=e.onEnableDraw,c=void 0===a?function(){}:a,l=e.isEditMap,u=e.isDrawEnabled,s=Qo(e,Wo);return i().createElement(Ko,Vo({containerId:n,isDraggable:s.mode===f.nl.EDIT,onSort:function(e,r,o,i){if(o.containerId===i.containerId){var a='sections[{ "id": "'.concat(n,'" }].contents[{"id":"').concat(i.id,'"}]'),c='sections[{ "id": "'.concat(n,'" }].contents'),l=e,u=Wn()();t(a,c,l,u,'sections[{ "id": "'.concat(n,'" }].contents[{"id":"').concat(u,'"}]'))}}},Ho(Ho({},s),{},{sectionId:n}),{cardComponent:$o,items:o.map((function(e){var t=e.id,n=e.thumbnail;return{id:t,thumbnail:void 0===n?{}:n,features:e.features,title:e.title}})),isDrawEnabled:u,onEnableDraw:c,isEditMap:l}))};var Jo=n(743837),ei=n(240986);const ti=function(e){var t=e.currentIndex,n=e.contents,r=void 0===n?[]:n,o=e.onTraverseCard,a=void 0===o?function(){}:o;return i().createElement(i().Fragment,null,i().createElement(rt.Z,{className:"ms-carousel-slider left-arrow",disabled:0===t,onClick:function(){return a()}},i().createElement(nt.gG,{style:{fontSize:22},glyph:"chevron-left"})),i().createElement(rt.Z,{className:"ms-carousel-slider right-arrow",onClick:function(){return a("right")},disabled:t===r.length-1},i().createElement(nt.gG,{style:{fontSize:22},glyph:"chevron-right"})))};function ni(e){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ni(e)}function ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ii(){return ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ii.apply(null,arguments)}function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach((function(t){li(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function li(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ni(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ni(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ui=(0,Ze.compose)(Er,(function(e){return function(t){var n=Or(t.contents||[],t.backgroundId)||{},r=n&&n.id,o=gr(gr({},t),{},{contentId:r,sectionId:t.id,path:'sections[{"id": "'.concat(t.id,'"}].background')});return i().createElement(e,o)}}),(function(e){return function(t){var n=gr(gr({},t),{},{updateBackground:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.update.apply(t,['sections[{"id": "'.concat(t.sectionId,'"}].background.')+e].concat(r))},updateSection:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.update.apply(t,['sections[{"id": "'.concat(t.sectionId,'"}]')].concat(n))}});return i().createElement(e,n)}}),(function(e){return function(t){var n=ri((0,o.useState)(""),2),r=n[0],a=n[1];return i().createElement(e,ii({},t,{textEditorActiveClass:r,bubblingTextEditing:function(e){return a(e?" ms-text-editor-active":"")}}))}}))((function(e){var t,n,r=e.add,a=void 0===r?function(){}:r,c=e.editMedia,l=void 0===c?function(){}:c,u=e.editWebPage,s=void 0===u?function(){}:u,d=e.onVisibilityChange,p=void 0===d?function(){}:d,y=e.update,m=void 0===y?function(){}:y,v=e.updateBackground,b=void 0===v?function(){}:v,g=e.updateCurrentPage,h=void 0===g?function(){}:g,O=e.remove,w=void 0===O?function(){}:O,S=e.id,P=e.background,E=void 0===P?{}:P,j=e.path,T=e.contents,C=void 0===T?[]:T,I=e.mode,A=e.sectionType,M=e.inViewRef,x=e.viewWidth,D=e.viewHeight,R=e.focusedContent,Z=e.contentId,F=e.bubblingTextEditing,L=void 0===F?function(){}:F,N=e.textEditorActiveClass,U=void 0===N?"":N,B=e.expandableMedia,z=void 0!==B&&B,W=e.storyTheme,G=e.mediaViewer,H=e.contentToolbar,q=e.inView,V=e.sections,_=void 0===V?[]:V,Y=e.storyFonts,Q=e.onSort,$=void 0===Q?function(){}:Q,K=e.onEnableDraw,X=void 0===K?function(){}:K,J=e.isDrawEnabled,ee=e.defaultMarkerStyle,te=void 0===ee?{iconColor:"cyan",iconShape:"circle"}:ee,ne=e.highlightedMarkerStyle,re=void 0===ne?{iconColor:"green",iconShape:"circle"}:ne,oe=(0,o.useRef)(),ie=(0,o.useRef)(),ae=(0,o.useRef)();function ce(e,t){return t-(e.left+e.right)<128?{top:0,left:0,bottom:0,right:0}:e}var le=R&&R.hideContent&&k()(R,"target.id")===S,ue=le?"hidden":"visible",se=z&&E&&"map"===E.type?" ms-expandable-background":"",fe=ci(ci({},null==W?void 0:W.overlay),I===f.nl.VIEW&&{maxHeight:D-350,overflowY:"auto"})||{},de=(null==W?void 0:W.general)||{},pe=D-(I===f.nl.EDIT?220:200),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(vn()(C,{id:Z})||{}).contents,n=void 0===t?[]:t;return e.filter((function(e){return f.ID.CAROUSEL===A&&1===n.length?"remove"!==e:e}))},me=(null==E?void 0:E.type)===f.Tr.MAP,ve=(C.find((function(e){return e.id===Z}))||{}).features,be=void 0===ve?[]:ve,ge=dr()(C,(function(e){var t=e.id;return Z===t})),he=(0,f.Yh)({id:S,contents:C.filter((function(e){return e.id!==Z})),featureStyle:function(e){var t=e.content,n=e.feature;return(0,f.c0)(te,C,t,Z,n)}}),Oe=(0,f.Yh)({id:"".concat(S,"-highlighted"),contents:C.filter((function(e){return e.id===Z})),featureStyle:function(e){var t=e.content,n=e.feature;return(0,f.c0)(re,C,t,Z,n)}});return i().createElement("section",{className:"ms-section ms-section-carousel".concat(se),id:S,ref:M},i().createElement(Jr,ii({},E,{mode:I,innerRef:oe,disableToolbarPortal:!0,tools:li(li(li({},f.Tr.IMAGE,["editMedia","fit","size","align","theme"]),f.Tr.MAP,["editMedia","editMap","size","align","theme"].concat(J?"closeDraw":[])),f.Tr.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),scrollContainerSelector:"#ms-sections-container",add:a,editMedia:l,expandable:z,path:j,update:b,updateCurrentPage:h,remove:w,sectionType:A,sectionId:S,backgroundId:E.id,key:E.id,width:x,height:D,backgroundPlaceholder:{background:"url(".concat(ro(),")"),backgroundSize:"600px auto"},storyTheme:de,mediaViewer:G,contentToolbar:H,inView:q,layers:[he,Oe],isDrawEnabled:J,onEnableDraw:X,contentToolbarChildren:!me&&I===f.nl.EDIT&&i().createElement(No,{type:"addMap"})}),i().createElement(Jo.Z,{active:J,features:be,method:"Point",onChange:function(e,t){m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(Z,'"}].features'),t)}}),i().createElement(ei.Z,{active:!(J||null!=E&&E.editMap),geometry:null==be||null===(t=be[0])||void 0===t||null===(n=t.geometry)||void 0===n?void 0:n.coordinates,padding:function(){var e={top:0,left:0,bottom:0,right:0},t=oe.current&&oe.current.querySelector(".ms-media-map"),n=ie.current&&ie.current.querySelector("[id='".concat(Z,"']"));if(t&&n){var r=oe.current.getBoundingClientRect()||{},o=t.getBoundingClientRect()||{},i=n.getBoundingClientRect()||{};if(ae.current){var a=ae.current.getBoundingClientRect()||{};e.bottom=r.height-(a.top-r.top)}var c=o.left-r.left,l=c+o.width,u=i.left-r.left,s=u+i.width;if(u>=c&&s<=l){var f=u-c,d=l-s;return d>=f?e.left=f+i.width:e.right=d+i.width,ce(e,o.width)}if(s>=c&&s<=l)return e.left=s-c,ce(e,o.width);if(u>=c&&u<=l)return e.right=l-u,ce(e,o.width)}return e}(),fixedZoom:!0,duration:300})),i().createElement(sr,{innerRef:ie,tools:li({},f.bT.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(U),contents:C,mode:I,add:a,updateCurrentPage:h,editMedia:l,editWebPage:s,update:m,remove:w,sectionId:S,viewWidth:x,viewHeight:D,contentProps:{onVisibilityChange:p,contentWrapperStyle:{minHeight:pe,visibility:ue},expandable:z,mediaViewer:G,contentToolbar:H,overrideTools:function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=ri(e,2),n=t[0],r=t[1];return[n,ye(r)]})))}},focusedContent:R,bubblingTextEditing:L,sectionType:A,storyTheme:fe,sections:_,storyFonts:Y}),i().createElement(Xo,{innerRef:ae,style:null!=W&&W.overlay?ci({},W.overlay):{},controlStyle:de?ci({},de):{},sectionId:S,contentId:Z,contents:C,update:m,remove:w,expandable:z,add:function(){return e=ci(ci({},(0,f.nq)(f.bT.COLUMN)),{},{title:"Item "+(C.length+1),background:{}}),a('sections[{"id": "'.concat(S,'"}].contents'),void 0,e,"geostory.builder.defaults.titleGeocarouselContent"),void m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(Z,'"}].hideContent'),!0);var e},contentToolbar:H,mode:I,onSort:$,isMapBackground:me,isEditMap:null==E?void 0:E.editMap,containerWidth:x,isDrawEnabled:J,onEnableDraw:function(e){m('sections[{"id":"'.concat(S,'"}].background.editMap'),!0,"replace"),X({contentId:e.id,sectionId:S})}}),I===f.nl.VIEW&&!z&&i().createElement(ti,{currentIndex:ge,contents:C,onTraverseCard:function(){var e,t,n;e="left"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left")?null==C||null===(t=C[0===ge?0:ge-1])||void 0===t?void 0:t.id:null==C||null===(n=C[ge===C.length-1?ge:ge+1])||void 0===n?void 0:n.id,m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(e,'"}].carouselToggle'),!0)}}),I===f.nl.EDIT&&!le&&i().createElement(Xt,{containerWidth:x,containerHeight:D,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",S,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",S,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",S,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){return a("sections",S,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){a("sections",S,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",S,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",S,f.tQ.WEBPAGE)}}]}))}));function si(e){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},si(e)}function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bi(r.key),r)}}function di(e,t,n){return t=yi(t),function(e,t){if(t&&("object"==si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pi()?Reflect.construct(t,n||[],yi(e).constructor):t.apply(e,n))}function pi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pi=function(){return!!e})()}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yi(e)}function mi(e,t){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mi(e,t)}function vi(e,t,n){return(t=bi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e){var t=function(e,t){if("object"!=si(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==si(t)?t:t+""}var gi=vi(vi(vi(vi(vi(vi(vi(vi({},f.ID.IMMERSIVE,co),f.ID.CAROUSEL,ui),f.ID.PARAGRAPH,po),f.tQ.MEDIA,po),f.tQ.WEBPAGE,po),f.ID.TITLE,ho),f.ID.BANNER,Po),"UNKNOWN",(function(e){var t=e.type,n=e.inViewRef;return i().createElement("div",{ref:n,className:"ms-section ms-section-unknown"},"WARNING: unknown session of type ",t)})),hi=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return vi(e=di(this,t,[].concat(r)),"state",{height:0}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mi(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=gi[this.props.type]||gi.UNKNOWN;return i().createElement(e,{sectionType:this.props.type,id:this.props.id,add:this.props.add,update:this.props.update,inViewRef:this.props.inViewRef,editMedia:this.props.editMedia,expandableMedia:this.props.expandableMedia,editWebPage:this.props.editWebPage,updateCurrentPage:this.props.updateCurrentPage,remove:this.props.remove,mode:this.props.mode,cover:this.props.cover,contents:this.props.contents,viewWidth:this.props.viewWidth,viewHeight:this.props.viewHeight,focusedContent:this.props.focusedContent,storyTheme:this.props.storyTheme,mediaViewer:this.props.mediaViewer,contentToolbar:this.props.contentToolbar,inView:this.props.inView,sections:this.props.sections,storyFonts:this.props.storyFonts,onSort:this.props.onSort,isDrawEnabled:this.props.isDrawEnabled,background:this.props.background,onEnableDraw:this.props.onEnableDraw,defaultMarkerStyle:this.props.defaultMarkerStyle,highlightedMarkerStyle:this.props.highlightedMarkerStyle})}}])&&fi(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i().Component);vi(hi,"propTypes",{id:Xe().string,type:Xe().oneOf(f.lg.SectionTypes),storyType:Xe().oneOf(f.lg.StoryTypes),add:Xe().func,update:Xe().func,editMedia:Xe().func,editWebPage:Xe().func,remove:Xe().func,updateCurrentPage:Xe().func,mode:Xe().oneOf(f.lg.Modes),contents:Xe().array,viewHeight:Xe().number,viewWidth:Xe().number,inViewRef:Xe().func,excludeClassName:Xe().string,cover:Xe().bool,focusedContent:Xe().object,expandableMedia:Xe().bool,storyTheme:Xe().object,mediaViewer:Xe().func,contentToolbar:Xe().func,inView:Xe().bool,sections:Xe().array,storyFonts:Xe().array,onSort:Xe().func,isDrawEnabled:Xe().bool,onEnableDraw:Xe().func,background:Xe().object,defaultMarkerStyle:Xe().object,highlightedMarkerStyle:Xe().object}),vi(hi,"defaultProps",{id:"",add:function(){},update:function(){},editMedia:function(){},editWebPage:function(){},updateCurrentPage:function(){},remove:function(){},onSort:function(){},storyType:f.Ln.CASCADE,viewHeight:0,viewWidth:0,mode:f.nl.VIEW,expandableMedia:!1,sections:[],storyFonts:[],onEnableDraw:function(){}});const Oi=dn({threshold:[0,.25,.5,.75,1],rootMargin:"-200px 0px 0px 0px"})(hi);function wi(e){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function Si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ii(r.key),r)}}function Pi(e,t,n){return t=ji(t),function(e,t){if(t&&("object"==wi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ei()?Reflect.construct(t,n||[],ji(e).constructor):t.apply(e,n))}function Ei(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ei=function(){return!!e})()}function ji(e){return ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ji(e)}function Ti(e,t){return Ti=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ti(e,t)}function Ci(e,t,n){return(t=Ii(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ii(e){var t=function(e,t){if("object"!=wi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=wi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wi(t)?t:t+""}var Ai=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Ci(e=Pi(this,t,[].concat(r)),"getAdjustedSelector",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/#\d|^#-\d/g,(function(e,t){return t?"#\\"+t[1]+t[2]:"#\\3"+e[1]+" "}))})),Ci(e,"getFocusedTarget",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.targets,n=e.props.padding,r=void 0===n?{}:n;return t.map((function(t){var n=t.selector,o=null;try{var i=window.document.querySelector(e.getAdjustedSelector(n));if(i){var a=i.getBoundingClientRect(),c=a.top,l=a.right,u=a.bottom,s=a.left;o={x:s-r,y:c-r,w:l-s+2*r,h:u-c+2*r}}}catch(e){console.warn(e)}finally{return o}})).filter((function(e){return e}))})),Ci(e,"getHolePath",(function(t){var n=t.x,r=t.y,o=t.w,i=t.h,a=e.props.borderRadius,c=void 0===a?8:a;return"M ".concat(n," ").concat(r+c," q 0 -").concat(c," ").concat(c," -").concat(c," h ").concat(o-2*c," q ").concat(c," 0 ").concat(c," ").concat(c," v ").concat(i-2*c," q 0 ").concat(c," -").concat(c," ").concat(c," h-").concat(o-2*c," q -").concat(c," 0 -").concat(c," -").concat(c," v-").concat(i-2*c)})),Ci(e,"getPath",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getFocusedTarget();return"M 0 0 h ".concat(n," v ").concat(t," h -").concat(n," v -").concat(t)+r.map(e.getHolePath).join(" ")})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ti(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this,t=this.props,n=t.onMaskClicked,r=t.stopEventsOnTargets,o=void 0!==r&&r,a=t.targets,c=this.getFocusedTarget(a.filter((function(e){var t=e.stopEventsOnTarget;return o||t})));return i().createElement("div",{style:{position:"fixed",height:"100vh",width:"100vw",top:0,left:0,zIndex:1e6,pointerEvents:"none"}},i().createElement(Re.Z,null,(function(t){var r=t.width,o=t.height;return i().createElement("svg",{width:r,height:o,xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:e.getPath(o,r),fill:"rgba(0,0,0,0.7)",fillRule:"evenodd",pointerEvents:"visiblePainted",onClick:n}),c.map((function(t,n){return i().createElement("path",{key:n,d:e.getHolePath(t),fill:"transparent",pointerEvents:"visiblePainted"})})))})))}}],r&&Si(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i().Component);function ki(e){return ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ki(e)}function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){Di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Di(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ki(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ki(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ci(Ai,"propTypes",{targets:Xe().arrayOf(Xe().shape({selector:Xe().string,stopEventsOnTarget:Xe().bool})),padding:Xe().number,borderRadius:Xe().number,onMaskClicked:Xe().func,stopEventsOnTargets:Xe().bool}),Ci(Ai,"defaultProps",{targets:[],padding:0,borderRadius:8,onMaskClicked:function(){},stopEventsOnTargets:!1});var Ri=(0,Ge.Z)((function(e){var t=e.sections;return 0===(void 0===t?[]:t).length}),(function(e){var t=e.add,n=void 0===t?function(){}:t;return{iconFit:!1,style:{position:"relative",width:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},glyph:"geostory",title:i().createElement(ot.Z,{msgId:"geostory.emptyTitle"}),description:i().createElement(ot.Z,{msgId:"geostory.emptyDescription"}),content:i().createElement(Xt,{addButtonClassName:"square-button-md",containerWidth:"100%",containerHeight:"100%",buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){n("sections",0,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){n("sections",0,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){n("sections",0,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveContent",onClick:function(){n("sections",0,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselContent",onClick:function(){n("sections",0,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){n("sections",0,f.tQ.MEDIA)}},{glyph:"code",tooltipId:"geostory.addWebPageSection",onClick:function(){n("sections",0,f.tQ.WEBPAGE)}}]})}}))(Re.Z),Zi=function(e){var t=e.width;return e.mode===f.nl.EDIT?"":t<640?"sm":t>=640&&t<1024?"md":""};const Fi=(0,Ze.compose)(We,$e,function(e){var t=e.showFocusMask,n=void 0===t?function(){}:t,r=e.defaultTargets,o=void 0===r?{selector:".ms-geostory-map-editor"}:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=a.padding,l=void 0===c?0:c,u=a.borderRadius,s=void 0===u?8:u,f=a.stopEventsOnTargets,d=void 0!==f&&f,p=a.onMaskClicked,y=void 0===p?function(){}:p;return(0,Ze.branch)(n,(function(e){return(0,Ze.nest)((function(e){var t=e.focusedContent,n=e.children;return i().createElement(i().Fragment,null,n,i().createElement(Ai,{targets:[t,o],padding:l,borderRadius:s,stopEventsOnTargets:d,onMaskClicked:y}))}),e)}))}({showFocusMask:function(e){var t=e.focusedContent,n=(void 0===t?{}:t).target;return(void 0===n?{}:n).id}}))((function(e){var t=e.mode,n=void 0===t?f.nl.VIEW:t,r=e.sections,o=void 0===r?[]:r,a=e.add,c=void 0===a?function(){}:a,l=e.onVisibilityChange,u=void 0===l?function(){}:l,s=e.updateCurrentPage,d=void 0===s?function(){}:s,p=e.editMedia,y=void 0===p?function(){}:p,m=e.editWebPage,v=void 0===m?function(){}:m,b=e.update,g=void 0===b?function(){}:b,h=e.remove,O=void 0===h?function(){}:h,w=e.focusedContent,S=e.isContentFocused,P=void 0!==S&&S,E=e.getSize,j=void 0===E?Zi:E,T=e.theme,C=void 0===T?{}:T,I=e.mediaViewer,A=e.contentToolbar,k=e.storyFonts,M=e.onSort,x=void 0===M?function(){}:M,D=e.isDrawEnabled,R=void 0!==D&&D,Z=e.onEnableDraw,F=void 0===Z?function(){}:Z,L=e.defaultMarkerStyle,N=e.highlightedMarkerStyle;return i().createElement(De.Z,{className:"ms-cascade-story ms-".concat(n)},i().createElement(Ri,{sections:o,add:c},(function(e){var t,r=e.width,a=e.height,l=j({width:r,height:a,mode:n}),s=l?" ms-".concat(l):"",f="sm"===l,p=C&&In()(C)&&C||{};return i().createElement("div",{id:"ms-sections-container",className:"ms-sections-container".concat(s," ms-sections-hyperlinks"),style:xi(xi({},null==p?void 0:p.general),P&&{overflow:"hidden"})},(null==p||null===(t=p.link)||void 0===t?void 0:t.color)&&i().createElement("style",{dangerouslySetInnerHTML:{__html:"\n            .ms-sections-hyperlinks .ms-text-editor-main a,\n            .ms-sections-hyperlinks .ms-text-wrapper a,\n            .ms-sections-hyperlinks .ms-text-editor-main a:link,\n            .ms-sections-hyperlinks .ms-text-wrapper a:link,\n            .ms-sections-hyperlinks .ms-text-editor-main a:visited,\n            .ms-sections-hyperlinks .ms-text-wrapper a:visited,\n            .ms-sections-hyperlinks .ms-text-editor-main a:active,\n            .ms-sections-hyperlinks .ms-text-wrapper a:active {\n                color: ".concat(p.link.color,";\n                opacity: 1;\n            }\n            .ms-sections-hyperlinks .ms-text-editor-main a:hover,\n            .ms-sections-hyperlinks .ms-text-wrapper a:hover {\n                color: ").concat(p.link.color,";\n                opacity: 0.75;\n            }\n        ")}}),o.map((function(e){var t=e.contents,l=void 0===t?[]:t,s=e.id,m=e.type,b=e.cover,h=e.background;return i().createElement(Oi,{focusedContent:w,onVisibilityChange:u,add:c,editMedia:y,expandableMedia:f,editWebPage:v,updateCurrentPage:d,update:g,remove:O,key:s,id:s,viewHeight:a,viewWidth:r,type:m,mode:n,contents:l,cover:b,storyTheme:p,mediaViewer:I,contentToolbar:A,sections:o,storyFonts:k,onSort:x,isDrawEnabled:R,onEnableDraw:F,background:h,defaultMarkerStyle:L,highlightedMarkerStyle:N})})))})))}));var Li=n(957557),Ni=n.n(Li),Ui=n(648860);function Bi(e){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bi(e)}function zi(e){return function(e){if(Array.isArray(e))return Wi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Wi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gi.apply(null,arguments)}function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach((function(t){Vi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Bi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Bi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _i=(0,jn.Z)(pn.Z);const Yi=(0,Ze.compose)((0,a.connect)((0,c.P1)(q.jq,q.z7,(function(e,t){return{resources:e,isContentFocused:t}}))),(0,Ze.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.map,o=void 0===r?{}:r,i=qi(qi({},o),{},{layers:(o.layers||[]).map((function(e){return e||void 0}))}),a=vn()(t,{id:n})||{};return{map:(0,f.oH)(Ni()(a.data,["context"]),i)}})));var Qi=(0,Ze.compose)((0,a.connect)((0,c.P1)(q.GC,(function(){return{focusedEl:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))),(0,Ze.withProps)((function(e){var t=e.focusedEl,n=void 0===t?{}:t,r=n.resourceId,o=n.map;return{map:o||{},resourceId:r,disableReset:!o}}))),$i=(0,Ze.withHandlers)({onChangeMap:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t("".concat(r.path,".map.").concat(e),n,"merge")}},onChange:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"merge";t(r.path+".".concat(e),n,o)}}}),Ki=(0,Ze.withHandlers)({toggleEditing:function(e){var t=e.editMap,n=e.update,r=e.focusedContent;return function(){return n(r.path+".editMap",!t)}},onReset:function(e){var t=e.update,n=e.focusedContent,r=(void 0===n?{}:n).path,o=void 0===r?"":r;return function(){t(o+".map",void 0)}}}),Xi=function(e){return i().createElement(_i,Gi({glyph:"repeat",bsStyle:"primary",className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.resetMap",confirmTitle:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.resetMapConfirm"}),confirmContent:i().createElement(ot.Z,{msgId:"geostory.contentToolbar.resetConfirmContent"})},e))},Ji=(0,Ze.compose)((0,Ze.withProps)((function(e){var t=e.disableReset,n=e.onReset,r=e.buttonItems,o=void 0===r?[]:r,a=e.map;return{buttons:[{renderButton:i().createElement(Xi,{disabled:t,onClick:n})}].concat(zi(o.map((function(e){var t=e.Component;return{renderButton:i().createElement(t,{map:a})}}))))}})),Ui.Z,(0,Ze.withStateHandlers)((function(){return{editNode:void 0}}),{setEditNode:function(){return function(e){return{editNode:e}}},closeNodeEditor:function(){return function(){return{editNode:void 0}}}}),(0,Ze.branch)((function(e){return!!e.editNode}),(0,Ze.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.closeNodeEditor,o=void 0===r?function(){}:r;return{buttons:[{visible:1===n.length,tooltipId:"close",glyph:"1-close",onClick:o}]}})),(0,Ze.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.setEditNode,o=void 0===r?function(){}:r,i=e.buttons,a=void 0===i?[]:i;return{buttons:[{visible:1===n.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){o(n[0])}}].concat(zi(a))}})))),ea=(0,Ze.compose)((0,Ze.withPropsOnChange)(["focusedContent"],(function(e){var t=e.map,n=e.focusedEl;return{contentMap:(void 0===n?{}:n).map,lastSavedMap:t}})),(0,Ze.withPropsOnChange)(["map"],(function(e){var t=e.map,n=e.lastSavedMap;return{pendingChanges:!On()(n,t)}}))),ta=(0,Ze.compose)((0,Ze.withProps)((function(e){var t=e.toggleEditing;return{CloseBtn:function(e){return i().createElement(pn.Z,Gi({onClick:t},e))}}}))),na=(0,Ze.mapPropsStream)((function(e){var t=(0,Ze.createEventHandler)(),n=t.stream,r=t.handler;return e.pluck("map").distinctUntilChanged((function(e,t){return On()(e,t)})).switchMap((function(e){return n.map((function(t){return{map:qi(qi({},e),t)}})).startWith({map:e})})).combineLatest(e,(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map;return qi(qi({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{onMapViewLocalChanges:r,map:e})}))})),ra=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},oa=(0,Ze.withHandlers)({onMapViewChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.update,n=e.editMap,r=void 0!==n&&n,o=e.onMapViewLocalChanges,i=e.map,a=void 0===i?{}:i,c=a.center,l=void 0===c?{}:c,u=a.zoom,s=a.mapStateSource,f=a.resolution,d=a.resetPanAndZoom;return function(e){var n=e.center,i=void 0===n?{}:n,a=e.zoom,c=e.mapStateSource,p=e.resolution,y=ra(l.x,i.x)&&ra(l.y,i.y);!r||y&&u===a?d?t("map",{center:l,zoom:u,mapStateSource:s,resolution:f,resetPanAndZoom:!1},"merge"):o({center:i,zoom:a,mapStateSource:c,resolution:p}):t("map",{center:i,zoom:a,mapStateSource:Wn()(),resolution:p,resetPanAndZoom:!1},"merge")}}}),ia=n(5993),aa=n(75927),ca=n(910336),la=n(815135),ua=["tabs","activeTab","width","setActiveTab"];function sa(){return sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sa.apply(null,arguments)}var fa=(0,la.Z)(nt.LY);var da=n(979105),pa=n(743129),ya=n(898631),ma=n(145869),va=n(487320),ba=["map","onChangeMap"],ga=(0,Io.Z)(["placeholder","options"])(pa.ZP);const ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{zoomControl:!0,mapInfoControl:!1}:t,r=e.onChangeMap,o=void 0===r?function(){}:r,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ba),c=n&&n.mapOptions||{},l=(0,f.kn)({mapOptions:c,zoomControl:!!E()(n.zoomControl)||n.zoomControl,mapInfoControl:!E()(n.mapInfoControl)&&n.mapInfoControl}),u=(0,ya.kq)(n);return i().createElement(nt.l0,{className:"ms-geostory-map-controls"},!u&&i().createElement(nt.cw,null,i().createElement(nt.J$,null,i().createElement(ot.Z,{msgId:"geostory.mapEditor.zoom"})),i().createElement(ma.Z,{onChange:function(){var e=!l.zoomControl;o("zoomControl",e),o("mapOptions.interactions",{doubleClickZoom:e,shiftDragZoom:e,pinchZoom:e})},className:"ms-geostory-map-controls-switch",checked:l.zoomControl}),i().createElement(ga,{options:[{label:"geostory.mapEditor.topLeft",value:"topLeft"},{label:"geostory.mapEditor.topRight",value:"topRight"},{label:"geostory.mapEditor.bottomLeft",value:"bottomLeft"},{label:"geostory.mapEditor.bottomRight",value:"bottomRight"}],wrapperStyle:{marginTop:"10px"},value:l.mapOptions&&l.mapOptions.zoomPosition||"topLeft",clearable:!1,disabled:!l.zoomControl,onChange:function(e){return o("mapOptions.zoomPosition",e&&e.value?e.value:"topLeft")},placeholder:"geostory.builder.settings.titlePlaceholder"})),i().createElement(nt.cw,null,i().createElement(nt.J$,null,i().createElement(ot.Z,{msgId:"geostory.mapEditor.pan"})),i().createElement(ma.Z,{onChange:function(){var e=!(l.mapOptions&&l.mapOptions.interactions&&l.mapOptions.interactions.dragPan);o("mapOptions.interactions",{dragPan:e,keyboardPan:e})},className:"ms-geostory-map-controls-switch",checked:l.mapOptions&&l.mapOptions.interactions&&l.mapOptions.interactions.dragPan})),!u&&i().createElement(nt.cw,null,i().createElement(nt.J$,null,i().createElement(ot.Z,{msgId:"geostory.mapEditor.identify"})),i().createElement(ma.Z,{onChange:function(){var e=!l.mapInfoControl;o("mapInfoControl",e)},className:"ms-geostory-map-controls-switch",checked:l.mapInfoControl}),l.mapInfoControl&&!a.hideIdentifyOptions&&i().createElement(va.Z,{disabled:!l.mapInfoControl,popoverMessage:"geostory.builder.settings.templateTooltip",infoFormat:l.mapOptions&&l.mapOptions.mapInfoFormat||"application/json",onInfoFormatChange:function(e){return o("mapOptions.mapInfoFormat",e)},selectProps:{wrapperStyle:{marginTop:10}}})))};var Oa=n(618300),wa=(0,Ze.withProps)((function(e){return{tabs:e.tabs||[{id:"toc",titleId:"geostory.mapEditor.toc",tooltipId:"geostory.mapEditor.toc",glyph:"1-layer",visible:!0,Component:Oa.Z},{id:"settings",titleId:"geostory.mapEditor.settings",tooltipId:"geostory.mapEditor.settings",glyph:"wrench",visible:!0,Component:ha}]}}));const Sa=(0,Ze.compose)((0,da.Z)("activeTab","setActiveTab","toc"),wa);var Pa=(0,Ze.compose)(ca.Z,(0,Ze.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),(0,ia.Z)("title"))((function(e){var t=e.title,n=e.description;return i().createElement("div",{className:"text-center"},i().createElement("div",{className:"mapstore-step-title"},t),i().createElement("div",{className:"mapstore-step-description"},n))})),Ea=(0,ca.Z)(aa.Z),ja=Sa((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tabs,n=void 0===t?[]:t,r=e.activeTab,o=(e.width,e.setActiveTab),a=void 0===o?function(){}:o,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ua);return i().createElement("div",{key:"ms-geostory-map-settings-navbar",className:"ms-row-tab"},i().createElement("div",null,i().createElement(nt.JL,{bsStyle:"tabs",activeKey:r,justified:!0},n.map((function(e){return i().createElement(fa,{key:"ms-tab-settings-"+e.id,tooltipId:e.tooltipId,eventKey:e.id,onClick:function(){return a(e.id)}},i().createElement(nt.gG,{glyph:e.glyph}))})))),i().createElement("div",null,n.filter((function(e){return e.id&&e.id===r})).filter((function(e){return e.Component})).map((function(e){return i().createElement(e.Component,sa({},c,{key:"ms-geostory-tab-settings-body-"+e.id}))}))))}));const Ta=(0,Ze.branch)((function(e){var t=e.focusedContent;return(void 0===t?{}:t).path}),(0,Ze.compose)((0,Ze.defaultProps)({isFocused:!0,editMap:!0}),Qi,Yi,ea,$i,Ki,Ji,ta))((function(e){var t=e.mode,n=void 0===t?f.nl.VIEW:t,r=e.isFocused,o=void 0!==r&&r,a=e.map,c=void 0===a?{}:a,l=e.onChange,u=void 0===l?function(){}:l,s=e.onChangeMap,d=void 0===s?function(){}:s,p=e.onNodeSelect,y=void 0===p?function(){}:p,m=e.selectedNodes,v=e.buttons,b=void 0===v?[]:v,g=e.editNode,h=e.closeNodeEditor,O=e.CloseBtn,w=void 0===O?function(){return null}:O,S=e.isDrawEnabled,P=e.hideIdentifyOptions;return n===f.nl.EDIT&&o?i().createElement("div",{key:"left-column",style:{order:-1,width:400,position:"relative"}},!S&&i().createElement(De.Z,{className:"ms-geostory-map-editor",header:i().createElement("div",{className:"ms-geostory-map-editor-header text-center"},i().createElement(nt.X2,null,i().createElement(nt.JX,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},i().createElement(w,{glyph:"1-close",className:"pull-left on-close-btn square-button no-border ",tooltipId:"geostory.contentToolbar.closeMapEditing"}),i().createElement("div",{className:"mapstore-step-title"},i().createElement(ot.Z,{msgId:"geostory.mapEditor.configureMapOptions"})))),i().createElement(Ut.Z,{transitionProps:!1,btnGroupProps:{className:"ms-geostory-map-editor-toolbar"},btnDefaultProps:{className:"square-button-md no-border",bsStyle:"primary",noTooltipWhenDisabled:!0},buttons:b}))},!!g&&[i().createElement(Pa,{map:c,editNode:g}),i().createElement(Ea,{closeNodeEditor:h,editNode:g,map:c,onChange:u})]||[i().createElement(ja,{map:c,onChange:u,onChangeMap:d,selectedNodes:m,onSelect:y,hideIdentifyOptions:P})])):null}));var Ca=n(264721),Ia=n.n(Ca),Aa=n(916788),ka=n(437034),Ma=n(452826),xa=n(624262);function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ra.apply(null,arguments)}function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){La(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function La(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Da(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Da(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Na=function(e){var t=function(){return i().createElement("div",{className:"ms-media-error"},i().createElement(nt.gG,{glyph:"exclamation-sign"}))},n=function(e){var t=e.style,n=void 0===t?{}:t;return i().createElement("div",{style:n,className:"ms-media-loader"},i().createElement(Ot.Z,{size:52}))};return function(r){var o={},a=r.sectionType;if((a===f.ID.PARAGRAPH||a===f.ID.IMMERSIVE||a===f.ID.CAROUSEL)&&r.type===f.Tr.IMAGE){var c=((null==r?void 0:r.imgHeight)||9)/((null==r?void 0:r.imgWidth)||16)*100;o={paddingTop:"".concat(c,"%")}}return r.lazy?i().createElement(ht,{key:r.loadingId,id:r.loadingId,debounceTime:r.debounceTime,loading:r.isLoading,onLoad:function(e){return r.onLoad(Fa(Fa({},r.loading),{},La({},e,!1)))},loaderComponent:n,loaderStyle:o},i().createElement(e,Ra({},r,{type:r.type,loaderComponent:n,loaderStyle:o,errorComponent:t}))):i().createElement(e,Ra({},r,{key:r.id,type:r.mediaType||r.type,loaderComponent:n,errorComponent:t}))}};var Ua=n(507848),Ba=n(819983),za=n(323010),Wa=["autoplay"],Ga=["type"];function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function qa(){return qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qa.apply(null,arguments)}function Va(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(n),!0).forEach((function(t){Qa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ha(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ha(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ha(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $a=(0,Ze.branch)((function(e){return e.resourceId}),(0,Ze.compose)((0,a.connect)((0,c.P1)(q.jq,(function(e){return{resources:e}}))),(0,Ze.withProps)((function(e){var t=e.resources,n=e.resourceId;return(vn()(t,{id:n})||{}).data}))),(0,Ge.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==f.ID.TITLE&&!Ia()([f.ID.IMMERSIVE,f.ID.CAROUSEL],r)}),(function(){return{glyph:"picture"}})))(Na(Aa.Z)),Ka=(0,Ze.compose)((0,Ze.branch)((function(e){return e.resourceId}),Yi),(0,Ze.withProps)((function(e){var t=e.map,n=void 0===t?{}:t;return{map:Ya(Ya({},n),{},{layers:n.layers&&n.layers.map((function(e){if(e.tileMatrixSet&&n.sources){var t=(0,xa.gv)(n.sources,e);return Ya(Ya({},e),t)}return e}))})}})),Ua.Z,Ba.Z,na,oa,za.d)(Na(ka.Z)),Xa={image:$a,map:Ka,video:(0,Ze.branch)((function(e){return e.resourceId}),(0,Ze.compose)((0,a.connect)((0,c.P1)(q.jq,(function(e){return{resources:e}}))),(0,Ze.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.autoplay,o=(vn()(t,{id:n})||{}).data||{},i=o.autoplay;return Ya(Ya({},Va(o,Wa)),{},{autoplay:void 0!==r?r:i})}))),(0,Ge.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==f.ID.TITLE&&!Ia()([f.ID.IMMERSIVE,f.ID.CAROUSEL],r)}),(function(){return{glyph:"play"}})))(Na(Ma.Z))};const Ja=function(e){var t=e.type,n=Va(e,Ga),r=Xa[t];return r?i().createElement(r,qa({type:t},n)):null};var ec=["resources"];function tc(){return tc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tc.apply(null,arguments)}const nc=(0,a.connect)((0,c.P1)(q.jq,(function(e){return{resources:e}})))((function(e){var t=e.resources,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ec);if(n.resourceId){var r=(vn()(t,{id:n.resourceId})||{}).data||{};return i().createElement(Kn,tc({},r,n))}return i().createElement(Kn,n)}));var rc=["story","mode","onAdd","messages","fontFamilies","storyFonts","webFont","onUpdate","onBasicError","onUpdateMediaEditorSetting","mediaEditorSettings"];function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oc.apply(null,arguments)}var ic=function(e){var t,n=e.story,r=e.mode,a=void 0===r?f.nl.VIEW:r,c=e.onAdd,l=e.messages,s=e.fontFamilies,p=void 0===s?[]:s,y=e.storyFonts,m=void 0===y?[]:y,v=e.webFont,b=void 0===v?u():v,g=e.onUpdate,h=void 0===g?function(){}:g,O=e.onBasicError,w=void 0===O?function(){}:O,S=e.onUpdateMediaEditorSetting,P=e.mediaEditorSettings,E=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,rc),j=(0,o.useCallback)((function(e){return(0,d.S$)(l,e)}),[l]),T=function(e,t,n,r){return c(e,t,n,r?j(r):j)};return(0,o.useEffect)((function(){window.__geostory_interaction=function(e,t){"scrollTo"===e&&(0,f.M1)(t,{behavior:"smooth"})}}),[]),(0,o.useEffect)((function(){h("settings.theme.fontFamilies",p,"merge",{uniqueByKey:"family"}),P&&S(P)}),[]),(0,o.useEffect)((function(){m.length>0&&m.filter((function(e){var t=e.src;return t&&!document.head.querySelector("link[href='".concat(t,"']"))})).length>0&&b.load((0,f.bm)(m,(function(){}),(function(){return w({message:"geostory.builder.settings.webFontLoadError"})})))}),[m]),i().createElement(De.Z,{className:"ms-geostory",columns:[i().createElement(Ta,oc({},E,{buttonItems:null===(t=E.items)||void 0===t?void 0:t.filter((function(e){return"mapEditorToolbar"===e.target})),add:T,update:h,mode:a,hideIdentifyOptions:E.hideIdentifyOptions}))]},i().createElement(Fi,oc({},n,E,{storyFonts:(0,f._R)(m),add:T,update:h,mode:a,mediaViewer:Ja,contentToolbar:nc})))};ic.defaultProps={storyFonts:[],fontFamilies:[],onUpdateMediaEditorSetting:function(){}};const ac=(0,s.rx)("GeoStory",{component:(0,a.connect)((0,c.zB)({mode:q.eK,story:q.Kg,messages:Me.Ps,focusedContent:q.FW,isContentFocused:q.z7,theme:function(e){var t;return(null===(t=(0,q.TQ)(e))||void 0===t?void 0:t.theme)||{}},storyFonts:q.mm,isDrawEnabled:q.HB}),{onAdd:y.IH,onUpdate:y.Vx,updateCurrentPage:y.RZ,onUpdateSetting:y.m7,remove:y.Od,onSort:y.pB,editMedia:m.Ql,editWebPage:y.o2,onBasicError:p.d,onUpdateMediaEditorSetting:y.Fu,onEnableDraw:y.EE})(ic),reducers:{geostory:xe.Z},epics:r})},166190:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n(227361),o=n.n(r),i=n(747037),a=n.n(i),c=n(281763),l=n.n(c),u=n(630998),s=n.n(u),f=n(313311),d=n.n(f),p=n(968630),y=n.n(p),m=n(701469),v=n.n(m),b=n(984596),g=n.n(b),h=n(545578),O=n.n(h),w=n(761868),S=n(192579),P=n(134990);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=function e(t,n,r){var o=r.contents,i=r.background,a=r.id,c=r.resourceId,l=[],u=n+'{"id": "'.concat(a,'"}]');return c===t?[u]:(i&&i.resourceId===t&&l.push(u+".background"),o?o.reduce((function(n,r){return[].concat(I(n),I(e(t,u+".contents[",r)))}),l):l)},M={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.D7:var n=t.id,r=t.path,i=t.position,c=t.element,u=(0,S.Ll)("currentStory.".concat(r),e),f=o()(e,u,[]),p=function(e,t){var n=e.length,r=0;return t||0===t||(r=n),a()(t)?r=s()(e,{id:t})+1:l()(t)&&(r=Math.min(t,e.length)),r}(f,i),m=f.slice();return m.splice(p,0,T({id:n},c)),(0,w.t8)(u,m,e);case P.mN:var b=t.id,h=t.mediaType,E=t.data;return(0,w.t8)("currentStory.resources",O()([{id:b,type:h,data:E}].concat(I(e.currentStory&&e.currentStory.resources||[])),"id"),e);case P.vb:return(0,w.t8)("mode",t.mode,e);case P.QK:var j=t.id,A=t.mediaType,x=t.data,D=(0,w.cc)("currentStory.resources",{id:j,type:A,data:x},{id:j},e);return A===S.Tr.MAP&&e.currentStory.sections.filter((function(e){return e.type!==S.ID.CAROUSEL})).reduce((function(e,t){return[].concat(I(e),I(k(j,"sections[",t)))}),[]).map((function(t){var n=(0,S.Ll)("currentStory.".concat(t,".map"),e);D=(0,w.t8)(n,void 0,D)})),D;case P.Ro:var R=t.id,Z=t.mediaType,F=(0,w.z6)("currentStory.resources",{id:R},e);return e.currentStory.sections.reduce((function(e,t){return[].concat(I(e),I(k(R,"sections[",t)))}),[]).map((function(t){var n=(0,S.Ll)("currentStory.".concat(t,".resourceId"),e);if(F=(0,w.zN)(n,F),Z===S.Tr.MAP){var r=(0,S.Ll)("currentStory.".concat(t,".map"),e);F=(0,w.zN)(r,F)}})),F;case P.lX:return(0,w.t8)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,(0,w.t8)("loading",t.value,e));case P.Dq:var L=t.path,N=(0,S.Ll)("currentStory.".concat(L),e),U=I(N),B=U.pop(),z=o()(e,U);return v()(z)?(a()(B)&&(B=parseInt(B,10)),(0,w.t8)(U,[].concat(I(z.slice(0,B)),I(z.slice(B+1))),e)):(0,w.zN)(N,e);case P.ij:var W,G,H,q,V,_=e.defaultSettings||{},Y=t.story.settings||_,Q=(null===(W=Y)||void 0===W||null===(G=W.theme)||void 0===G?void 0:G.fontFamilies)||[],$=null===(H=e.currentStory)||void 0===H||null===(q=H.settings)||void 0===q||null===(V=q.theme)||void 0===V?void 0:V.fontFamilies;return $&&$.length>0&&(Y=(0,w.t8)("theme.fontFamilies",O()([].concat(I($),I(Q)),"family"),Y)),(0,w.t8)("currentStory",T(T({},t.story),{},{settings:Y}),e);case P.i2:return(0,w.t8)("selectedCard",e.selectedCard===t.card?"":t.card,e);case P.IY:var K=t.control,X=t.value;return(0,w.t8)("controls.".concat(K),X,e);case P.Zf:var J=t.resource,ee=e.currentStory&&e.currentStory.settings||{};return(0,w.qC)((0,w.t8)("resource",J),(0,w.t8)("currentStory.settings.storyTitle",ee.storyTitle||J.name))(e);case P.si:case P.KT:return(0,w.zN)("errors.save",e);case P.SW:return(0,w.t8)("errors.save",g()(t.error),e);case P.Mk:return(0,w.t8)("isCollapsed",!e.isCollapsed,e);case P.NZ:var te=o()(e,"currentStory.settings.".concat(t.option));return(0,w.t8)("currentStory.settings.".concat(t.option),!te,e);case P.c:var ne=!e.isSettingsEnabled,re=e.currentStory&&e.currentStory.settings||{};return(0,w.qC)((0,w.t8)("isSettingsEnabled",ne),(0,w.t8)("oldSettings",ne?re:{}),(0,w.t8)("currentStory.settings",ne?T({},re):t.withSave?re:e.oldSettings))(e);case P.wb:var oe=t.path,ie=t.mode,ae=t.options,ce=t.element,le=(0,S.Ll)("currentStory.".concat(oe),e),ue=o()(e,le);return y()(ue)&&y()(ce)&&"merge"===ie&&(ce=T(T({},ue),ce)),v()(ue)&&v()(ce)&&"merge"===ie&&(ce=null!=ae&&ae.uniqueByKey?O()([].concat(I(ue),I(ce)),ae.uniqueByKey):[].concat(I(ue),I(ce))),(0,w.t8)(le,ce,e);case P.km:return(0,w.t8)("currentStory.settings.".concat(t.prop),t.value,e);case P.un:if(t.columnId){var se=d()(e.currentStory.sections,(function(e){return d()(e.contents,{id:t.columnId})}));return se&&d()(se.contents,{id:t.columnId})?(0,w.t8)("currentPage",T(T({},e.currentPage),{},{columns:T(T({},e.currentPage.columns),{},C({},se.id,t.columnId))}),e):e}return(0,w.t8)("currentPage",T(T({},e.currentPage),{},{sectionId:t.sectionId}),e);case P.Cx:var fe=t.status,de=t.target,pe=t.selector,ye=void 0===pe?"":pe,me=t.hideContent,ve=void 0!==me&&me,be=t.path,ge=fe?{target:de,selector:ye,hideContent:ve,path:be}:void 0;return(0,w.t8)("focusedContent",ge,e);case P.jr:return(0,w.t8)("pendingChanges",t.value,e);case P.ZY:return(0,w.t8)("updateUrlOnScroll",t.value,e);case P.EQ:return(0,w.t8)("mediaEditorSettings",t.mediaEditorSettings,e);case P.W$:if(t.sectionId){var he=d()(e.currentStory.sections,(function(e){return d()(e.contents,{id:t.showContentId})}));return he&&d()(he.contents,{id:t.showContentId})?(0,w.t8)("currentStory",T(T({},e.currentStory),{},{sections:(0,S.eI)(e.currentStory.sections,t)}),e):e}return e;case P.mk:return(0,w.t8)("drawOptions",t.drawOptions,e);default:return e}}},866113:(e,t,n)=>{"use strict";n.d(t,{$F:()=>E,eg:()=>j,Kg:()=>T,PR:()=>C,eK:()=>I,pu:()=>A,Lu:()=>M,W5:()=>x,TQ:()=>D,KR:()=>R,sY:()=>Z,vv:()=>F,jq:()=>L,Tr:()=>N,w:()=>U,CK:()=>B,u5:()=>z,z7:()=>W,FW:()=>G,GC:()=>H,yL:()=>q,_O:()=>_,JM:()=>Y,bU:()=>Q,mm:()=>$,X6:()=>K,NR:()=>X,I0:()=>J,eB:()=>ee,HB:()=>te});var r=n(227361),o=n.n(r),i=n(313311),a=n.n(i),c=n(630998),l=n.n(c),u=n(618446),s=n.n(u),f=n(944908),d=n.n(f),p=n(264721),y=n.n(p),m=n(192579),v=n(274621),b=n(324684);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){return function(t){return o()(t,(0,m.Ll)("geostory.currentStory.".concat(e),t),"")}},j=function(e){return o()(e,"geostory.isCollapsed",!1)},T=function(e){return o()(e,"geostory.currentStory")},C=function(e){return o()(e,"geostory.currentPage",{})},I=function(e){return o()(e,"geostory.mode")},A=function(e){return function(e){return o()(function(e){return o()(e,"geostory.resource")}(e),"canEdit",!1)}(e)||(0,v.qg)(e)},k=function(e){return o()(T(e),"sections",[])},M=function(e){return k(e).length>0},x=function(e){return o()(e,"geostory.isSettingsEnabled",!1)},D=function(e){var t=o()(T(e),"settings",{}),n=k(e).filter((function(e){var t=e.type;return y()([m.ID.CAROUSEL,m.ID.IMMERSIVE],t)})),r=t.checked||[],i=d()(r.map((function(e){return(0,m.Un)(n,e)})).filter((function(e){return e})));return S(S({},t),{},{expanded:i})},R=function(e){return!s()(o()(T(e),"settings",{}),function(e){return o()(e,"geostory.oldSettings",{})}(e))},Z=function(e){return o()(e,"geostory.selectedCard","")},F=function(e){return function(t){return E("".concat(e,".resourceId"))(t)}},L=function(e){return o()(T(e),"resources",[])},N=function(e){return function(t){return a()(L(t),{id:e})}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withImmersiveSection,n=void 0!==t&&t,r=e.includeAlways,i=void 0===r||r;return function(e){var t=k(e),r=function(e){return o()(D(e),"checked",[]).reduce((function(e,t){return S(S({},e),{},P({},t,!0))}),{})}(e);return t.reduce((function(e,t){if(t.type===m.ID.TITLE&&(i||r[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.PARAGRAPH&&(i||r[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.BANNER&&(i||r[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.CAROUSEL&&(i||r[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.IMMERSIVE){var o=t.contents&&t.contents.reduce((function(e,t){return i||r[t.id]?[].concat(h(e),[S(S({},t),{},{sectionId:e.id})]):e}),[])||[];return n?[].concat(h(e),[t],h(o)):[].concat(h(e),h(o))}return e}),[])}},B=function(e){return U({includeAlways:!0})(e).length},z=function(e){var t=function(e){var t=C(e);return l()(U({includeAlways:!0})(e),{id:t.columns&&t.columns[t.sectionId]?t.columns[t.sectionId]:t.sectionId||""})}(e);return-1!==t?t:l()(U({includeAlways:!0})(e),{id:C(e).sectionId})},W=function(e){return void 0!==o()(e,"geostory.focusedContent.target")},G=function(e){return o()(e,"geostory.focusedContent")},H=function(e){return E(o()(e,"geostory.focusedContent.path",""))(e)},q=function(e){return k(e).reduce((function(e,t){if(y()([m.ID.IMMERSIVE,m.ID.CAROUSEL],t.type)){var n=t.contents&&t.contents.map((function(e){return{label:e.title||"",value:e.id}}))||[];return[].concat(h(e),[S({label:t.title||"",value:t.id},t.type===m.ID.IMMERSIVE&&{children:n})])}return[].concat(h(e),[{label:t.title||"",value:t.id}])}),[])},V=function e(t,n){var r=n.contents,o=n.background;return n.resourceId===t||!(!o||o.resourceId!==t)||!!r&&!!a()(r,(function(n){return e(t,n)}))},_=function(e,t){return!!a()(k(e),(function(e){return V(t,e)}))},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.F)(e).includes("geostory/shared")},Q=function(e){return o()(e,"geostory.updateUrlOnScroll",!1)},$=function(e){return o()(e,"geostory.currentStory.settings.theme.fontFamilies",[])},K=function(e){return o()(e,"geostory.mediaEditorSettings")},X=function(e){var t;return((null===(t=T(e))||void 0===t?void 0:t.sections)||[]).filter((function(e){return e.type===m.ID.CAROUSEL}))},J=function(e){return function(t){return!!a()(X(t),{id:e})}},ee=function(e){return function(t){var n=a()(X(t)||[],{id:e});return(null==n?void 0:n.contents)||[]}},te=function(e){var t;return!(null==e||null===(t=e.geostory)||void 0===t||!t.drawOptions)}},443143:(e,t,n)=>{"use strict";n.d(t,{qH:()=>s,qj:()=>f,qq:()=>d,TM:()=>p});var r,o=n(717621),i=n.n(o),a=n(14841),c=n.n(a),l=n(264721),u=n.n(l),s=function(e,t,n,o){var i=e;isNaN(parseFloat(e))&&(i=r.hexToHsv(e)[0]);var a=.5/(n-1),c=t/(n-1),l=[];1===n&&(a=.5,c=t/2);for(var u=0;u<n;u++){var s=i+u*c-t/2,f=a*u+.3,d=f;o&&(s=o.h||s,f=o.s||f,d=o.v||d),l.push(r.hsvToHex(s,f,d,u))}return l},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},d=function(e,t,n){var r=i()(e);return e&&r.setAlpha(c()(void 0!==t?t:r.getAlpha())).toRgbString()||n},p=function e(t){var n=Math.round,o=Math.random,i=[n(255*o()),n(255*o()),n(255*o())],a=r.rgbToHex(i);if(t)for(;u()(t,a)||"#000000"===a||"#FFFFFF"===a;)e(t);return a};r={decToHex:function(e){var t="0123456789ABCDEF",n=parseInt(e,10);return n=isNaN(n)?0:n,t.charAt(((n=n>255||n<0?0:n)-n%16)/16)+t.charAt(n%16)},rgbToHex:function(e,t,n){return e instanceof Array?r.rgbToHex(e[0],e[1],e[2]):"#"+r.decToHex(e)+r.decToHex(t)+r.decToHex(n)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,n){if(e instanceof Array)return r.rgbToHsv(e[0],e[1],e[2]);var o,i,a,c,l,u=e/255,s=t/255,f=n/255;switch(o=Math.min(Math.min(u,s),f),a=(i=Math.max(Math.max(u,s),f))-o,i){case o:c=0;break;case u:c=60*(s-f)/a,s<f&&(c+=360);break;case s:c=60*(f-u)/a+120;break;case f:c=60*(u-s)/a+240}return l=0===i?0:1-o/i,[Math.round(c),l,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),n=[],o=function e(t,n,o){var i=e(t,n,o);return r.rgbToHex(i)},i=0;i<e;i++)n.push(o(t*i,.57,.63));return n},sameToneRangeColors:s,hsvToRgb:function(e,t,n){if(e instanceof Array)return r.hsvToRgb(e[0],e[1],e[2]);var o,i,a,c=Math.floor(e/60%6),l=e/60-c,u=n*(1-t),s=n*(1-l*t),f=n*(1-(1-l)*t);switch(c){case 0:o=n,i=f,a=u;break;case 1:o=s,i=n,a=u;break;case 2:o=u,i=n,a=f;break;case 3:o=u,i=s,a=n;break;case 4:o=f,i=u,a=n;break;case 5:o=n,i=u,a=s}return[r.realToDec(o),r.realToDec(i),r.realToDec(a)]},hsvToHex:function(e,t,n){var o=r.hsvToRgb(e,t,n);return r.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var n=r.hexToRgb(t);return r.rgbToHsv(n)}return null},hexToRgb:function(e){var t,n,r,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),n=o.charAt(2)+o.charAt(3),r=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(n,16),parseInt(r,16)]},colorToHexStr:f,colorToRgbaStr:d,generateRandomHexColor:p}},196958:(e,t,n)=>{"use strict";n.d(t,{t3:()=>k,WQ:()=>x,dM:()=>D,rK:()=>R,Lo:()=>F,gP:()=>B,S9:()=>z,AV:()=>W,Sc:()=>G,a3:()=>H,IC:()=>q,wT:()=>V,cZ:()=>_,ek:()=>Y,Qc:()=>Q,Cf:()=>K,dJ:()=>X,DR:()=>J,f1:()=>ee,Pf:()=>te,_Q:()=>ne,DC:()=>re,fK:()=>oe,NJ:()=>ae,BF:()=>ce});var r=n(406557),o=n.n(r),i=n(92742),a=n.n(i),c=n(819873),l=n.n(c),u=n(630998),s=n.n(u),f=n(227361),d=n.n(f),p=n(701469),y=n.n(p),m=n(414293),v=n.n(m),b=n(747037),g=n.n(b),h=n(968630),O=n.n(h),w=n(264721),S=n.n(w),P=n(378889),E=n(285547);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e,t,n){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return s()(e,(function(e){return e<=n&&n<e+t}))}(t,n,e);return-1===r?r:r*n+e-t[r]},M={id:"empty_row",get:function(){}},x=function(e,t){return t[k(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3?arguments[3]:void 0)]||I({},M)},D=function(e,t){return t[e]},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y()(e)?e.reduce((function(e,t){return I(I({},e),{},A({},t.id,I(I({},e[t.id]),t.updated)))}),{}):{}},Z=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=s()(t,n);return o>=0?t.map((function(e,t){return t===o?r:e})):[].concat(function(e){if(Array.isArray(e))return T(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[r])},F=function(e){return((0,P.getFeatureTypeProperties)(e)||[]).filter((function(e){return!(0,P.isGeometryType)(e)}))},L=function(e){var t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(r){return t<=r&&r<=n?0:Math.abs(r-e)})).reduce((function(e,t,n,r){return t>r[e]&&n||e}),0)},N=function(e,t){return t.filter((function(t,n){return n!==e}))},U=function(e,t,n){return e.filter((function(e,r){return r<t||r>=t+n}))},B=function(e,t,n,r){for(var o,i,a=e;a<=t&&void 0===o;a++)-1===k(a*r,n,r)&&(o=a);for(var c=t;c>=e&&void 0===i;c--)-1===k(c*r,n,r)&&(i=c);return[o,i].filter((function(e){return void 0!==e}))},z=function(e,t,n){var r=e.startPage,o=e.endPage,i=B(r,o,t,n),a=i[1]-i[0]+1;return{startIndex:i[0]*n,maxFeatures:a*n}},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.editable,i=void 0!==o&&o,a=r.sortable,c=void 0===a||a,l=r.resizable,u=void 0===l||l,s=r.filterable,f=void 0===s||s,d=r.defaultSize,p=void 0===d?200:d,y=r.options,m=void 0===y?[]:y,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},b=v.getEditor,g=void 0===b?function(){}:b,h=v.getFilterRenderer,O=void 0===h?function(){}:h,w=v.getFormatter,S=void 0===w?function(){}:w,P=v.getHeaderRenderer,j=void 0===P?function(){}:P,T=v.isWithinAttrTbl,C=void 0!==T&&T;return F(e).filter((function(e){return!(t[e.name]&&t[e.name].hide)})).map((function(e){var r=m.find((function(t){return t.name===e.name})),o=n.find((function(t){return t.name===e.name})),a={sortable:c,key:e.name,width:t[e.name]&&t[e.name].width||p||void 0,name:t[e.name]&&t[e.name].label||e.name,description:(null==r?void 0:r.description)||"",title:(0,E.s8)((null==r?void 0:r.title)||(null==o?void 0:o.alias),e.name),headerRenderer:j(),showTitleTooltip:!(null==r||!r.description),resizable:u,editable:i,filterable:f,editor:g(e,o),formatter:S(e,o),filterRenderer:O(e,o)};return C&&(a.width=300),a}))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},i=(0,P.findGeometryProperty)(n);return e.map((function(e){return I(I({},e),{},{events:e.events&&Object.keys(e.events).reduce((function(o,i){return I(I({},o),{},A({},i,(function(o,a){return e.events[i](t(a.rowIdx),a,n,r)})))}),{})},"geometry"===e.key&&i?{filterRenderer:o(I(I({},i),{},{localType:"geometry"}),i.name),filterable:!0,geometryPropName:i.name}:{})}))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce((function(i,a){return I(I({},i),{},A({},a,(function(){for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return e[a].apply(e,c.concat([t,n,r,o]))})))}),{})},q=function(e,t){return!!(0,P.getPropertyDescriptor)(e,t)},V=function(e,t,n){return(0,P.isValidValueForPropertyName)(e,(o=n,"geometry"===(r=t)?function(e){return d()((0,P.findGeometryProperty)(e),"name")}(o):r),n);var r,o},_=function(){return"EPSG:4326"},Y=function(e,t,n){return function(r){return t.length>0?r._new:!e||e&&!!n[r.id]}},Q=function(e){return t=e,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[e.id]||{},r=Object.keys(n).filter((function(e){return"geometry"!==e})).reduce((function(e,t){return I(I({},e),{},A({},t,n[t]))}),{}),o=Object.keys(n).filter((function(e){return"geometry"===e})).reduce((function(e,t){return I(I({},e),{},A({},t,n[t]))}),{}),I(I(I({},t),o),{},{properties:I(I({},t&&t.properties||{}),r)});var t,n,r,o},$=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/,K=function(e,t){if("string"===t)return{newVal:a()(e),operator:"ilike"};var n,r=$.exec(e),o="=";return r?("!=="===(o=r[1]||"=")|"!="===o?o="<>":"==="===o|"=="===o&&(o="="),n=parseFloat(r[2])):n=parseFloat(e,10),{newVal:n,operator:o}},X=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.attribute,a=r.operator,c=r.value,l=r.type,u=r.filters,s=void 0===u?[]:u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(null===(e=f.groupFields)||void 0===e?void 0:e.filter((function(e){return i!==e.id&&1!==e.id})))||[];if(("string"===l||"number"===l)&&g()(c)&&-1!==(null==c?void 0:c.indexOf(","))){var p,m,b,h=(null==c?void 0:c.split(",").filter(o()))||[],O=(null===(p=f.filterFields)||void 0===p?void 0:p.filter((function(e){return i!==e.attribute})))||[];return I(I({},f),{},{groupFields:d.concat([{id:i,logic:"OR",groupId:1,index:0}]),filters:(null!==(m=null==f||null===(b=f.filters)||void 0===b?void 0:b.filter((function(e){return i!==(null==e?void 0:e.attribute)})))&&void 0!==m?m:[]).concat(s),filterFields:O.concat(h.map((function(e){var t=K(e,l),n=t.operator,r=t.newVal;return{attribute:i,rowId:Date.now(),type:l,groupId:i,operator:n,value:r}}))),spatialField:f.spatialField,spatialFieldOperator:f.spatialFieldOperator})}return I(I({},f),{},{groupFields:d.concat([{id:1,logic:"AND",groupId:1,index:0}]),filters:(null!==(t=null==f||null===(n=f.filters)||void 0===n?void 0:n.filter((function(e){return i!==(null==e?void 0:e.attribute)})))&&void 0!==t?t:[]).concat(s),filterFields:"geometry"===l?f.filterFields:v()(c)&&"isNull"!==a?(f.filterFields||[]).filter((function(e){return e.attribute!==i})):Z(f.filterFields||[],{attribute:i},{attribute:i,rowId:Date.now(),type:l,groupId:1,operator:a,value:c}),spatialField:"geometry"===l?c:f.spatialField,spatialFieldOperator:y()(c)?"OR":""})},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,n=void 0===t?0:t,r=e.maxFeatures,o=void 0===r?1:r,i=e.totalFeatures,a=void 0===i?0:i,c=e.resultSize;return{page:Math.ceil(n/o),resultSize:c,size:o,total:a,maxPages:Math.ceil(a/o)-1}},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.endPage,r=t.startPage,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.pages,a=o.features,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=c.size,s=c.maxStoredPages,f=c.startIndex,p=B(r,n,i,u),y=p[1]-p[0]+1,m=d()(e,"features",[]);m.length!==y*u&&(m=m.concat(l()(Array(y*u-m.length>0?y*u-m.length:m.length),!1)));var v=i,b=a,g=v.length+y-Math.max(s,n-r+1);if(g>0)for(var h=r*u,O=n*u,w=h+(O-h)/2,S=0;S<g;S++){var P=L(w,i,h,O),E=P*u;v=N(P,v),b=U(a,E,u)}for(var j=[],T=0;T<y;T++)j.push(f+u*T);return{pages:v.concat(j),features:b.concat(m)}},te=function(e,t){var n=void 0;return t&&e&&(n=e.filter((function(e){var n,r;return!(null!==(n=null===(r=t[e.attribute])||void 0===r?void 0:r.hide)&&void 0!==n&&n)})).map((function(e){return e.attribute}))).length===e.length&&(n=void 0),n},ne=function(e){return null==e?void 0:e.map((function(e){return O()(e)?e.name:e}))},re={DATE_TIME:"date-time",TIME:"time",DATE:"date"},oe={"date-time":"YYYY-MM-DDTHH:mm:ss[Z]",time:"HH:mm:ss[Z]",date:"YYYY-MM-DD[Z]"},ie=["wms","wfs"],ae=function(e){return S()(ie,null==e?void 0:e.type)},ce=function(e){return!(null!=e&&e.disableFeaturesEditing)&&ae(e)}},192579:(e,t,n)=>{"use strict";n.d(t,{gg:()=>D,Ln:()=>R,ID:()=>Z,bT:()=>F,tQ:()=>L,Tr:()=>N,nl:()=>U,ZX:()=>B,lg:()=>z,w:()=>W,cy:()=>G,lt:()=>H,M1:()=>q,kn:()=>_,oH:()=>Y,Aq:()=>$,nq:()=>K,Ll:()=>X,ln:()=>J,Un:()=>ee,NC:()=>te,t4:()=>ne,NP:()=>re,bm:()=>oe,_R:()=>ie,Km:()=>ae,of:()=>ce,u0:()=>le,eI:()=>ue,Yh:()=>se,c0:()=>fe});var r=n(227361),o=n.n(r),i=n(630998),a=n.n(i),c=n(30084),l=n.n(c),u=n(701469),s=n.n(u),f=n(252628),d=n.n(f),p=n(763105),y=n.n(p),m=n(682492),v=n.n(m),b=n(747037),g=n.n(b),h=n(513218),O=n.n(h),w=n(264721),S=n.n(w),P=n(313880),E=n.n(P),j=n(455877),T=n.n(j);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D="EMPTY_CONTENT",R={CASCADE:"cascade"},Z={TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner",CAROUSEL:"carousel"},F={TEXT:"text",MEDIA:"media",WEBPAGE:"webPage",COLUMN:"column"},L={MEDIA:"template-media",WEBPAGE:"template-web-page"},N={IMAGE:"image",MAP:"map",VIDEO:"video"},U={EDIT:"edit",VIEW:"view"},B={SHOW_SAVE:"save.show",SHOW_DELETE:"delete.show",LOADING:"loading"},z={StoryTypes:d()(R),SectionTypes:d()(Z),MediaTypes:d()(N),Modes:d()(U)},W=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.align,o=void 0===r?"center":r,i=e.size,a=void 0===i?"full":i,c=(null==n?void 0:n.value)||g()(n)&&n,l=c&&"custom"!==c&&g()(c)&&" ms-".concat(c)||"",u=" ms-align-".concat(o),s=a.split(",").map((function(e){return" ms-size-".concat(e)})).join("");return"".concat(l).concat(u).concat(s)},G=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.storyTheme;if(""===n||""===(null==n?void 0:n.value))return O()(r)?r:{};var o=null==n?void 0:n.value,i=null==n?void 0:n[o];return O()(i)&&i||{}},H=function(e){return e.type===Z.PARAGRAPH&&e&&s()(e.contents)&&e.contents.length&&s()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===F.MEDIA},q=function(e,t){var n=function(e){var t=e.split("?");return 2===t.length?t[0]:e}(e),r=document.getElementById(n);r&&r.scrollIntoView(t)},V={zoomControl:!0,mapInfoControl:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!0}}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v()({},V,e)},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v()({},e,t)},Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(t,"i");return!t||n.test(e)},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(t,"i");return y()(e,(function(e){return Q(e.data&&(e.data.title||e.data.name),t,n)||Q(e.data&&e.data.description,t,n)}))},K=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};switch(t){case Z.TITLE:return{id:T()(),type:Z.TITLE,title:n("geostory.builder.defaults.titleTitle"),cover:!1,contents:[{id:T()(),type:F.TEXT,html:"",size:"large",align:"center",theme:"",background:{fit:"cover",size:"full",align:"center"}}]};case Z.BANNER:return{id:T()(),type:Z.BANNER,title:n("geostory.builder.defaults.titleBanner"),cover:!1,contents:[{id:T()(),background:{fit:"cover",size:"full",align:"center"}}]};case Z.PARAGRAPH:return{id:T()(),type:Z.PARAGRAPH,title:n("geostory.builder.defaults.titleParagraph"),contents:[{id:T()(),type:F.COLUMN,size:"full",align:"center",contents:[{id:T()(),type:F.TEXT,html:""}]}]};case Z.IMMERSIVE:return{id:T()(),type:Z.IMMERSIVE,title:n("geostory.builder.defaults.titleImmersive"),contents:[e(F.COLUMN,n("geostory.builder.defaults.titleImmersiveContent"))]};case Z.CAROUSEL:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleGeocarousel"),template:t,background:{fit:"cover",size:"full",align:"center"},contents:[e(F.COLUMN,n("geostory.builder.defaults.titleGeocarouselContent"))]};case L.MEDIA:return{id:T()(),type:Z.PARAGRAPH,title:n("geostory.builder.defaults.titleMedia"),contents:[{id:T()(),type:F.COLUMN,contents:[{id:T()(),type:F.MEDIA,size:"large",align:"center"}]}]};case L.WEBPAGE:return{id:T()(),type:Z.PARAGRAPH,title:n("geostory.builder.defaults.titleWebPageSection"),contents:[{id:T()(),type:F.COLUMN,contents:[{id:T()(),type:F.WEBPAGE,size:"h-medium,v-medium",align:"center"}]}]};case F.COLUMN:return{id:T()(),type:F.COLUMN,align:"left",size:"small",theme:"",title:n,contents:[{id:T()(),type:F.TEXT,html:""}],background:{fit:"cover",size:"full",align:"center"}};case F.TEXT:return{id:T()(),type:F.TEXT,title:n("geostory.builder.defaults.titleText"),html:""};case F.IMAGE:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleMedia"),size:"full",align:"center"};case F.WEBPAGE:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleWebPage"),size:"h-full,v-medium",align:"center"};case F.MEDIA:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleUnknown"),size:"large",align:"center"};default:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleUnknown"),size:"full",align:"center"}}},X=function(e,t){return l()(e).reduce((function(e,n){if(n&&0===n.indexOf("{")){var r=JSON.parse(n),i=o()(t,e),c=a()(i,r);return c>=0?[].concat(M(e),[c]):e}return[].concat(M(e),[n])}),[])},J=function(e,t){return l()(e).reduce((function(e,n){var r=e.path,i=e.flatPath;if(n&&0===n.indexOf("{")){var c=JSON.parse(n),l=o()(t,r),u=a()(l,c);if(u>=0){var s=l[u],f=s.id,d=s.type;return{path:[].concat(M(r),[u]),flatPath:[].concat(M(i),[{id:f,type:r[r.length-1],contentType:d}])}}return{path:r,flatPath:i}}return{path:[].concat(M(r),[n]),flatPath:i}}),{path:[],flatPath:[]})},ee=function(e,t){return e.reduce((function(e,n){return S()(n.contents.map((function(e){return e.id})),t)?n.id:e}),null)},te=function(e){return e.type===Z.PARAGRAPH&&!1!==e.editURL&&e&&s()(e.contents)&&e.contents.length&&s()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===F.WEBPAGE&&!1!==e.contents[0].contents[0].editURL},ne=function(e,t){if(t)switch(e){case"small":return.4*t;case"medium":return.6*t;case"large":return.8*t;default:return t}return 0},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!t.includes(n))return null;var i=t.substring(t.indexOf(n)).split("/");return r&&n?i.length>1&&i[2]&&Number(i[0])===n?5===i.length?E()(e,"".concat(i[2],"/column/").concat(i[4]),"".concat(r)):E()(e,"".concat(i[2]),"".concat(r)):(t.includes("shared"),""!==i[1]?"".concat(e,"/section/").concat(r):"".concat(e,"section/").concat(r)):!r&&o&&g()(o)&&"EMPTY"!==o&&i.length>1?t.includes("shared")&&!i[2]?e:5===i.length?E()(e,"".concat(i[4]),"".concat(o)):"".concat(e,"/column/").concat(o):null},oe=function(e,t,n){var r={active:t,inactive:n,custom:{families:[],urls:[]}};return e.filter((function(e){return!!e.src})).forEach((function(e,t){r.custom.families[t]=e.family,r.custom.urls[t]=e.src})),r},ie=function(e){return e.map((function(e){return e.family}))},ae=["inherit","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],ce=function(){return window.location.href.match("geostory-embedded")?"geostoryEmbedded":"geostory"},le=function(e){var t=function(e){try{var t;return null===(t=JSON.parse(e))||void 0===t?void 0:t.id}catch(e){return null}},n=l()(e)||[];return{sectionId:t(null==n?void 0:n[1]),contentId:t(null==n?void 0:n[3]),innerContentId:t(null==n?void 0:n[5])}},ue=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return e.sectionId===t.id?A(A({},t),{},{contents:(t.contents||[]).map((function(t){return A(A({},t),{},{hideContent:t.id!==e.showContentId})}))}):t}))};function se(e){var t=e.id,n=e.contents,r=e.featureStyle;return A(A({visibility:!0,handleClickOnLayer:!0},e.layerOptions),{},{id:"geostory-vector-".concat(t),name:"geostory-vector-".concat(t),type:"vector",features:n.reduce((function(e,n,o){return[].concat(M(e),M(((null==n?void 0:n.features)||[]).map((function(e){return A(A({},e),{},{properties:A(A({},e.properties),{},{title:n.title,sectionId:t,contentId:n.id}),contentRefId:n.id},r&&{style:r({content:n,feature:e},o)})}))||[]))}),[]).reverse()})}var fe=function(e,t,n,r,o){return A(A(A({},e),{},{iconText:"".concat(a()(t,(function(e){var t=e.id;return n.id===t}))+1)},o.style),{},{highlight:r===n.id})}},531398:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var r=n(197395),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=void 0===t?"notification.warning":t,o=e.autoDismiss,i=void 0===o?6:o,a=e.position,c=void 0===a?"tc":a,l=e.message,u=void 0===l?"Error":l;return(0,r.vU)({title:n,autoDismiss:i,position:c,message:u})}},166287:(e,t,n)=>{"use strict";n.r(t),n.d(t,{flattenFeatures:()=>C,isAttrPresent:()=>k,isStrokeStyle:()=>M,isFillStyle:()=>x,isTextStyle:()=>D,isCircleStyle:()=>R,isMarkerStyle:()=>Z,isSymbolStyle:()=>F,getStylerTitle:()=>L,geometryFunctions:()=>N,getGeometryFunction:()=>U,registerGeometryFunctions:()=>B,addOpacityToColor:()=>z,hashCode:()=>W,registerStyle:()=>H,setSymbolsStyles:()=>q,fetchStyle:()=>V,getSymbolsStyles:()=>_,hashAndStringify:()=>Y,domNodeToString:()=>Q,createSvgUrl:()=>$,createStylesAsync:()=>K,getStyleParser:()=>X,layerToGeoStylerStyle:()=>ee,getStyle:()=>te});var r=n(414293),o=n.n(r),i=n(385564),a=n.n(i),c=n(441609),l=n.n(c),u=n(984596),s=n.n(u),f=n(606162),d=n.n(f),p=n(701469),y=n.n(p),m=n(761868),v=n(443143),b=n(409669),g=n.n(b),h=n(433506);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function w(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=y()(e)?e:null==e?void 0:e.features;return a()((n||[]).map((function(e){return"FeatureCollection"===e.type?e.features||[]:[e]}))).map(t)};function I(e,t){return new(0,e.default)(t)}var A={sld:function(){return n.e(12290).then(n.t.bind(n,212290,23)).then(I)},css:function(){return n.e(11125).then(n.t.bind(n,411125,23)).then(I)},openlayers:function(){return Promise.all([n.e(18672),n.e(52043),n.e(15265),n.e(47202),n.e(69141),n.e(51554),n.e(80651),n.e(22343),n.e(30049),n.e(3526)]).then(n.bind(n,903526)).then(I)},"3dtiles":function(){return n.e(41547).then(n.bind(n,641547)).then(I)},cesium:function(){return Promise.all([n.e(65792),n.e(48764),n.e(80651),n.e(29379),n.e(45477),n.e(84182),n.e(30049),n.e(33122)]).then(n.bind(n,833122)).then(I)},leaflet:function(){return Promise.all([n.e(80651),n.e(45243),n.e(30049),n.e(7809),n.e(54175)]).then(n.bind(n,810375)).then(I)},geostyler:function(){return n.e(45688).then(n.bind(n,645688)).then(I)}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(arguments.length>1?arguments[1]:void 0).filter((function(t){return!o()(e[t])})).length>0},M=function(){return k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["color","opacity","dashArray","dashOffset","lineCap","lineJoin","weight"])},x=function(){return k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["fillColor","fillOpacity"])},D=function(){return k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["label","font","fontFamily","fontSize","fontStyle","fontWeight","textAlign","textRotationDeg"])},R=function(){return k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["radius"])},Z=function(){return k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["iconGlyph","iconShape","iconUrl"])},F=function(){return k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["symbolUrl"])},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Z(e)?"Marker":F(e)?"Symbol":D(e)?"Text":R(e)||"Circle Style"===e.title?"Circle":x(e)?"Polygon":M(e)?"Polyline":""},N={centerPoint:{type:"Point",func:function(){}},lineToArc:{type:"LineString",func:function(){}},startPoint:{type:"Point",func:function(){}},endPoint:{type:"Point",func:function(){}}},U=function(e,t){return N[e]&&N[e][t]},B=function(e,t,n){if(!(e&&t&&n))throw new Error("specify all the params: functionName, func, type");N[e]={func:t,type:n}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#FFCC33",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;return(0,m.t8)("a",t,e)},W=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},G={},H=function(e,t){if(!e||!t)throw new Error("specify all the params: sha, style");G[e]=t},q=function(){G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style";return G[e]&&G[e][t]},_=function(){return G},Y=function(e){if(e)return W(JSON.stringify(e));throw new Error("hashAndStringify: specify mandatory params: style")},Q=function(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return F(e)&&e.symbolUrl?g().get(t,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(t){var n=window.URL||window.webkitURL||window,r=(new DOMParser).parseFromString(t.data,"image/svg+xml").firstElementChild;r.setAttribute("fill",e.fillColor||"#FFCC33"),r.setAttribute("fill-opacity",o()(e.fillOpacity)?.2:e.fillOpacity),r.setAttribute("stroke",(0,v.qq)(e.color||"#FFCC33",o()(e.opacity)?1:e.opacity)),r.setAttribute("stroke-opacity",o()(e.opacity)?1:e.opacity),r.setAttribute("stroke-width",e.weight||1),r.setAttribute("width",e.size||32),r.setAttribute("height",e.size||32),r.setAttribute("stroke-dasharray",e.dashArray||"none");var i=new Blob([Q(r)],{type:"image/svg+xml;charset=utf-8"}),a=n.createObjectURL(i),c=document.createElement("canvas");c.width=e.size,c.height=e.size;var l=c.getContext("2d"),u=new Image;u.src=a;var s="",f=Y(e);return u.onload=function(){try{l.drawImage(u,c.width/2-u.width/2,c.height/2-u.height/2),s=c.toDataURL("image/png"),c=null,H(f,{style:j(j({},e),{},{symbolUrlCustomized:a}),base64:s})}catch(e){return}},H(f,{style:j(j({},e),{},{symbolUrlCustomized:a}),svg:r,base64:s}),a})).catch((function(){return n(570898)})):new Promise((function(e){e(null)}))},K=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return F(e)&&!V(Y(e))?$(e,e.symbolUrl||e.symbolUrlCustomized).then((function(t){return t?j(j({},e),{},{symbolUrlCustomized:t}):V(Y(e))})).catch((function(){return j(j({},e),{},{symbolUrlCustomized:n(570898)})})):new Promise((function(t){t(F(e)?V(Y(e)):e)}))}))},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sld";return A[e]?A[e]():Promise.resolve(null)};function J(e,t){var n,r;if(D(e)&&null!=t&&null!==(n=t.properties)&&void 0!==n&&n.valueText){var o=(e.font||"").split(" ");return Promise.resolve({kind:"Text",label:t.properties.valueText,font:[o[o.length-1]],size:parseFloat(e.fontSize),fontStyle:e.fontStyle,fontWeight:e.fontWeight,color:e.fillColor,haloColor:e.color,haloWidth:1,msHeightReference:"none",msBringToFront:!0})}if("Mark"===e.symbolizerKind)return Promise.resolve({kind:"Mark",color:e.fillColor,fillOpacity:e.fillOpacity,strokeColor:e.color,strokeOpacity:e.opacity,strokeWidth:e.weight,radius:null!==(r=e.radius)&&void 0!==r?r:10,wellKnownName:"Circle",msHeightReference:"none",msBringToFront:!0});if(k(e,["iconUrl"])&&!e.iconGlyph&&!e.iconShape)return Promise.resolve(j({kind:"Icon",image:e.iconUrl,size:d()(e.iconSize||[32]),opacity:1,rotate:0,msHeightReference:"none",msBringToFront:!0,anchor:"bottom"},e.leaderLine&&{msLeaderLineColor:"#333333",msLeaderLineOpacity:1,msLeaderLineWidth:1}));if(Z(e))return Promise.resolve({kind:"Icon",image:h.Z.extraMarkers.markerToDataUrl(e),size:45,opacity:1,rotate:0,msHeightReference:"none",msBringToFront:!0});if(F(e)){var i=V(Y(e));return(null!=i&&i.symbolUrlCustomized?Promise.resolve(null==i?void 0:i.symbolUrlCustomized):$(e,e.symbolUrl||e.symbolUrlCustomized)).then((function(t){return{kind:"Icon",image:t,size:e.size,opacity:1,rotate:0,msHeightReference:"none",msBringToFront:!0}})).catch((function(){return{}}))}return R(e)||"Circle Style"===e.title||x(e)?Promise.resolve({kind:"Fill",color:e.fillColor,opacity:e.fillOpacity,fillOpacity:e.fillOpacity,outlineColor:e.color,outlineOpacity:e.opacity,outlineWidth:e.weight}):M(e)?Promise.resolve(j({kind:"Line",color:e.color,opacity:e.opacity,width:e.weight},(null==e?void 0:e.dashArray)&&{dasharray:e.dashArray.map((function(e){return parseFloat(e)}))})):Promise.resolve({})}function ee(e){var t,n,r,o=C((null==e?void 0:e.features)||[]);if(o.find((function(e){var t;return!l()((null==e?void 0:e.style)||{})&&(null==e||null===(t=e.properties)||void 0===t?void 0:t.id)}))){var i=o.filter((function(e){var t;return(null==e?void 0:e.style)&&(null==e||null===(t=e.properties)||void 0===t?void 0:t.id)}));return Promise.all(a()(i.map((function(e){return s()(e.style).map((function(t){return J(t,e).then((function(t){return{symbolizer:t,filter:["==","id",e.properties.id]}}))}))})))).then((function(e){return{format:"geostyler",body:{name:"",rules:e.map((function(e){return{name:"",filter:e.filter,symbolizers:[e.symbolizer]}}))},metadata:{editorType:"visual"}}}))}return l()(e.style)||null!=e&&null!==(t=e.style)&&void 0!==t&&t.format||null!=e&&null!==(n=e.style)&&void 0!==n&&n.body?Promise.resolve(e.style):Promise.all((r=s()(e.style),a()(r.map((function(e){var t,n,r,o,i,a,c,l,u;return[].concat(w(k(e,["iconUrl"])?[{iconAnchor:e.iconAnchor,iconSize:e.iconSize,iconUrl:e.iconUrl,popupAnchor:e.popupAnchor,shadowSize:e.shadowSize,shadowUrl:e.shadowUrl}]:[]),w(x(e)&&e.radius?[{symbolizerKind:"Mark",fillColor:e.fillColor,fillOpacity:null!==(t=e.fillOpacity)&&void 0!==t?t:1,color:e.color,opacity:null!==(n=e.opacity)&&void 0!==n?n:1,weight:null!==(r=e.weight)&&void 0!==r?r:1,radius:null!==(o=e.radius)&&void 0!==o?o:10}]:[]),w(M(e)?[{color:e.color,opacity:null!==(i=e.opacity)&&void 0!==i?i:1,weight:null!==(a=e.weight)&&void 0!==a?a:1,dashArray:e.dashArray}]:[]),w(x(e)?[{fillColor:e.fillColor,fillOpacity:null!==(c=e.fillOpacity)&&void 0!==c?c:1,color:e.color,opacity:null!==(l=e.opacity)&&void 0!==l?l:1,weight:null!==(u=e.weight)&&void 0!==u?u:1}]:[]))})))).map((function(e){return J(e)}))).then((function(t){var n={point:["Mark","Icon","Text"],linestring:["Line"],polygon:["Fill"]};return{format:"geostyler",body:{name:"",rules:t.filter((function(t){var r=t.kind;return!n[e.geometryType]||n[e.geometryType].includes(r)})).map((function(e){return{name:"",symbolizers:[e]}}))},metadata:{editorType:"visual"}}}))}function te(e,t){var n=e.style,r=e.features,o=n||{},i=o.format,a=void 0===i?"geostyler":i,c=o.body;return a&&c?"geostyler"===a?X(t).then((function(e){return e.writeStyle(c)})):Promise.all([X(a),X(t)]).then((function(e){var t,n,o=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||S(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return i.readStyle(c).then((function(e){return a.writeStyle(e,{features:r})}))})):Promise.resolve(null)}},830049:(e,t,n)=>{"use strict";n.d(t,{H2:()=>w,R9:()=>S,_P:()=>j,st:()=>C,NG:()=>I,xV:()=>A,kD:()=>M,kf:()=>R,$O:()=>Z,mL:()=>F,vg:()=>N});var r=n(717621),o=n.n(r),i=n(409669),a=n.n(i),c=n(414293),l=n.n(c),u=n(513218),s=n.n(u),f=n(433506);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["image"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){return["between","double2bool","in","parseBoolean","strEndsWith","strEqualsIgnoreCase","strMatches","strStartsWith"].includes(null==e?void 0:e.name)},w=function(e){return["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","modulo","pi","pow","random","rint","round","sin","sqrt","strIndexOf","strLastIndexOf","strLength","tan","toDegrees","toRadians"].includes(null==e?void 0:e.name)},S=function(e){return["numberFormat","strAbbreviate","strCapitalize","strConcat","strDefaultIfBlank","strReplace","strStripAccents","strSubstring","strSubstringStart","strToLowerCase","strToUpperCase","strTrim"].includes(null==e?void 0:e.name)},P=function(e){return["property"].includes(null==e?void 0:e.name)},E=function(e){return"attribute"===(null==e?void 0:e.type)||["msMarkerIcon"].includes(null==e?void 0:e.name)},j=function(e){return O(e)||w(e)||S(e)||P(e)||E(e)},T=function(e){return(null!=e&&e.getProperties?e.getProperties():null==e?void 0:e.properties)||{}},C={evaluateFunction:function(e,t){var n=T(t);if("property"===e.name){if(!t)throw new Error("Could not evalute 'property' function. Feature ".concat(t," is not defined."));return S(e.args[0])?n[C.evaluateStringFunction(e.args[0],t)]:n[e.args[0]]}return S(e)?C.evaluateStringFunction(e,t):w(e)?C.evaluateNumberFunction(e,t):O(e)?C.evaluateBooleanFunction(e,t):P(e)?C.evaluateUnknownFunction(e,t):E(e)?C.evaluateMapStoreFunction(e,t):null},evaluateBooleanFunction:function(e,t){var n=e.args.map((function(e){return j(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"between":return n[0]>=n[1]&&n[0]<=n[2];case"double2bool":default:return!1;case"in":return n.slice(1).includes(n[0]);case"parseBoolean":return!!n[0];case"strEndsWith":return n[0].endsWith(n[1]);case"strEqualsIgnoreCase":return n[0].toLowerCase()===n[1].toLowerCase();case"strMatches":return new RegExp(n[1]).test(n[0]);case"strStartsWith":return n[0].startsWith(n[1])}},evaluateNumberFunction:function(e,t){if("pi"===e.name)return Math.PI;if("random"===e.name)return Math.random();var n=e.args.map((function(e){return j(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"abs":return Math.abs(n[0]);case"acos":return Math.acos(n[0]);case"asin":return Math.asin(n[0]);case"atan":return Math.atan(n[0]);case"atan2":case"rint":default:return n[0];case"ceil":return Math.ceil(n[0]);case"cos":return Math.cos(n[0]);case"exp":return Math.exp(n[0]);case"floor":return Math.floor(n[0]);case"log":return Math.log(n[0]);case"max":return Math.max.apply(Math,b(n));case"min":return Math.min.apply(Math,b(n));case"modulo":return n[0]%n[1];case"pow":return Math.pow(n[0],n[1]);case"round":return Math.round(n[0]);case"sin":return Math.sin(n[0]);case"sqrt":return Math.sqrt(n[0]);case"strIndexOf":return n[0].indexOf(n[1]);case"strLastIndexOf":return n[0].lastIndexOf(n[1]);case"strLength":return n[0].length;case"tan":return Math.tan(n[0]);case"toDegrees":return n[0]*(180/Math.PI);case"toRadians":return n[0]*(Math.PI/180)}},evaluateUnknownFunction:function(e,t){var n=e.args.map((function(e){return j(e)?C.evaluateFunction(e,t):e})),r=T(t);return"property"===e.name?r[n[0]]:n[0]},evaluateStringFunction:function(e,t){var n,r=e.args.map((function(e){return j(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"numberFormat":case"strAbbreviate":default:return r[0];case"strCapitalize":var o,i=r[0].toLowerCase().split(" "),a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(i);try{for(a.s();!(o=a.n()).done;){var c=o.value;c=c.charAt(0).toUpperCase()+c.substring(1)}}catch(e){a.e(e)}finally{a.f()}return i.join(" ");case"strConcat":return r.join();case"strDefaultIfBlank":return(null===(n=r[0])||void 0===n?void 0:n.length)<1?r[1]:r[0];case"strReplace":return!0===r[3]?r[0].replaceAll(r[1],r[2]):r[0].replace(r[1],r[2]);case"strStripAccents":return r[0].normalize("NFKD").replace(/[\u0300-\u036f]/g,"");case"strSubstring":return r[0].substring(r[1],r[2]);case"strSubstringStart":return r[0].substring(r[1]);case"strToLowerCase":return r[0].toLowerCase();case"strToUpperCase":return r[0].toUpperCase();case"strTrim":return r[0].trim()}},evaluateMapStoreFunction:function(e,t){if("attribute"===e.type)return C.evaluateFunction({name:"property",args:[e.name]},t);var n=e.args.map((function(e){return j(e)?C.evaluateFunction(e,t):e}));return"msMarkerIcon"===e.name?f.Z.markers.extra.markerToDataUrl({iconColor:n[0].color,iconShape:n[0].shape,iconGlyph:n[0].glyph}):n[0]}},I=function e(t,n){var r=T(t),o=!0,i=!1;({"&&":!0,"||":!0,"!":!0})[n[0]]&&(i=!0);try{var a,c,l;if(i)switch(n[0]){case"&&":a=!0,n.slice(1).forEach((function(n){e(t,n)||(a=!1)})),o=a;break;case"||":a=!1,n.slice(1).forEach((function(n){e(t,n)&&(a=!0)})),o=a;break;case"!":o=!undefined.geoStylerFilterToOlParserFilter(t,n[1]);break;default:throw new Error("Cannot parse Filter. Unknown combination or negation operator.")}else switch(c=j(n[1])?C.evaluateFunction(n[1],t):r[n[1]],l=j(n[2])?r[C.evaluateFunction(n[2],t)]:n[2],n[0]){case"==":o=""+c==""+l;break;case"*=":"string"==typeof l&&"string"==typeof c&&(o=!(l.length>c.length)&&-1!==c.indexOf(l));break;case"!=":o=""+c!=""+l;break;case"<":o=Number(c)<Number(l);break;case"<=":o=Number(c)<=Number(l);break;case">":o=Number(c)>Number(l);break;case">=":o=Number(c)>=Number(l);break;default:throw new Error("Cannot parse Filter. Unknown comparison operator.")}}catch(e){throw new Error("Cannot parse Filter. Invalid structure.")}return o},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n.v.",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return t},o=T(e),i=t||"",a=new RegExp("\\{\\{(.*?)\\}\\}","g"),c=i.match(a);return c&&c.forEach((function(e){for(var t=0,a=0,c=Object.entries(o);a<c.length;a++){var l=(f=c[a],d=2,function(e){if(Array.isArray(e))return e}(f)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(f,d)||g(f,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],s=l[1];if(e.slice(2,e.length-2).toLowerCase()===u.toLowerCase()){i=i.replace(e,r(u,s));break}t++}var f,d;t===Object.keys(o).length&&(i=i.replace(e,n))})),i},k={},M=function(e,t){var n,r,o,i,a,c,l,u,s,f,d,p,y,m,v,b,g;return s=(r="msMarkerIcon"===(null==t||null===(n=t.image)||void 0===n?void 0:n.name)?t:e).image,f=r.color,d=r.fillOpacity,p=r.strokeColor,y=r.strokeOpacity,m=r.strokeWidth,v=r.strokeDasharray,b=r.radius,g=r.wellKnownName,s?"msMarkerIcon"===(null==s?void 0:s.name)?"msMarkerIcon:".concat(null==s||null===(o=s.args)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.color,":").concat(null==s||null===(a=s.args)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.shape,":").concat(null==s||null===(l=s.args)||void 0===l||null===(u=l[0])||void 0===u?void 0:u.glyph):s:[g,f,d,p,y,(v||[]).join("_"),m,b].join(":")},x=function(e){var t=e.image,n=M(e);return k[n]?Promise.resolve(k[n]):new Promise((function(e,r){var o=new Image,i=t;if(s()(i)&&"msMarkerIcon"===i.name)try{var a=i.args[0];i=f.Z.markers.extra.markerToDataUrl({iconColor:a.color,iconShape:a.shape,iconGlyph:a.glyph})}catch(e){r(n)}o.crossOrigin="anonymous",o.onload=function(){k[n]={id:n,image:o,src:i,width:o.naturalWidth,height:o.naturalHeight},e(k[n])},o.onerror=function(){r(n)},o.src=i}))},D=function(e,t,n,r,o){var i=r*o/2,a=r/2;e.moveTo(t-i,n-a),e.lineTo(t+i,n-a),e.lineTo(t+i,n-i),e.lineTo(t+a,n-i),e.lineTo(t+a,n+i),e.lineTo(t+i,n+i),e.lineTo(t+i,n+a),e.lineTo(t-i,n+a),e.lineTo(t-i,n+i),e.lineTo(t-a,n+i),e.lineTo(t-a,n-i),e.lineTo(t-i,n-i),e.closePath()},R=function(e){var t=M(e);if(k[t]){var n=k[t],r=n.image;return m(m({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,p)),{},{canvas:r})}var i=!(null==e||!e.strokeWidth||null==e||!e.strokeOpacity),a=!(null==e||!e.fillOpacity||(e.wellKnownName||"").includes("shape://")),c=document.createElement("canvas"),l=c.getContext("2d"),u=e.radius,s=i?e.strokeWidth/2:4,f=s,d=s,y=u+s,v=u+s,b=2*e.radius,g=2*e.radius;if(c.setAttribute("width",b+2*s),c.setAttribute("height",g+2*s),a){var h=o()(e.color);h.setAlpha(e.fillOpacity),l.fillStyle=h.toRgbString()}if(i){var O=o()(e.strokeColor);O.setAlpha(e.strokeOpacity),l.strokeStyle=O.toRgbString(),l.lineWidth=e.strokeWidth,l.lineJoin="round",l.lineCap="round",e.strokeDasharray&&l.setLineDash(e.strokeDasharray)}switch(e.wellKnownName){case"Circle":default:l.arc(y,v,u,0,2*Math.PI);break;case"Square":l.rect(f,d,b,g);break;case"Triangle":var w=Math.sqrt(3)*u,S=w/3,P=(g-w)/2;l.moveTo(y,v+P-2*S),l.lineTo(y+u,v+P+S),l.lineTo(y-u,v+P+S),l.closePath();break;case"Star":!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,c=t,l=n,u=Math.PI/r;e.moveTo(t,n-o);for(var s=0;s<r;s++)c=t+Math.cos(a)*o,l=n+Math.sin(a)*o,e.lineTo(c,l),a+=u,c=t+Math.cos(a)*i,l=n+Math.sin(a)*i,e.lineTo(c,l),a+=u;e.lineTo(t,n-o),e.closePath()}(l,y,v,5,u,u/2);break;case"Cross":D(l,y,v,2*u,.2);break;case"X":l.translate(y,v),l.rotate(45*Math.PI/180),l.translate(-y,-v),D(l,y,v,2*u,.2);break;case"shape://vertline":l.moveTo(y,d),l.lineTo(y,g),l.closePath();break;case"shape://horline":l.moveTo(f,v),l.lineTo(b,v),l.closePath();break;case"shape://slash":l.translate(y,v),l.rotate(45*Math.PI/180),l.translate(-y,-v),l.moveTo(y,d),l.lineTo(y,g),l.closePath();break;case"shape://backslash":l.translate(y,v),l.rotate(-45*Math.PI/180),l.translate(-y,-v),l.moveTo(y,d),l.lineTo(y,g);break;case"shape://dot":l.moveTo(y-1,v-1),l.lineTo(y+1,v+1),l.closePath();break;case"shape://plus":l.moveTo(y,d),l.lineTo(y,g),l.moveTo(f,v),l.lineTo(b,v),l.closePath();break;case"shape://times":l.translate(y,v),l.rotate(45*Math.PI/180),l.translate(-y,-v),l.moveTo(y,d),l.lineTo(y,g),l.moveTo(f,v),l.lineTo(b,v),l.closePath();break;case"shape://oarrow":l.moveTo(f,d),l.lineTo(b,v),l.lineTo(f,g);break;case"shape://carrow":l.moveTo(f,d),l.lineTo(b,v),l.lineTo(f,g),l.closePath()}return a&&l.fill(),i&&l.stroke(),{width:b,height:g,canvas:c}},Z=function(e){var t=M(e);return k[t]?Promise.resolve(k[t]):new Promise((function(n,r){var o,i,c,u;if(null!==(o=document)&&void 0!==o&&o.createElement||r(t),null!=e&&null!==(i=e.wellKnownName)&&void 0!==i&&i.includes(".svg"))(c=e.wellKnownName,u={fillColor:e.color,fillOpacity:e.fillOpacity,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth,strokeDasharray:e.strokeDasharray,size:2*e.radius},new Promise((function(e,t){a().get(c,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(n){var r,o=window.URL||window.webkitURL||window,i=(new DOMParser).parseFromString(n.data,"image/svg+xml").firstElementChild,a=u.size||32,c=null!==(r=u.strokeWidth)&&void 0!==r?r:1,s=a+c,f=a+c;i.setAttribute("fill",u.fillColor||"#FFCC33"),i.setAttribute("fill-opacity",l()(u.fillOpacity)?.2:u.fillOpacity),i.setAttribute("stroke",u.strokeColor||"#FFCC33"),i.setAttribute("stroke-opacity",l()(u.strokeOpacity)?1:u.strokeOpacity),i.setAttribute("stroke-width",c),i.setAttribute("width",s),i.setAttribute("height",f),i.setAttribute("stroke-dasharray",u.strokeDasharray||"none");var d=document.createElement("div");d.appendChild(i);var p=new Blob([d.innerHTML],{type:"image/svg+xml;charset=utf-8"}),y=o.createObjectURL(p),m=new Image;m.onload=function(){try{var n=document.createElement("canvas");n.width=s,n.height=f,n.getContext("2d").drawImage(m,n.width/2-m.width/2,n.height/2-m.height/2),e({width:s,height:f,canvas:n})}catch(e){t(e)}},m.onerror=function(e){t(e)},m.src=y})).catch((function(e){t(e)}))}))).then((function(e){var r=e.width,o=e.height,i=e.canvas;k[t]={id:t,image:i,src:i.toDataURL(),width:r,height:o},n(k[t])})).catch((function(){r(t)}));else{var s=R(e),f=s.width,d=s.height,p=s.canvas;k[t]={id:t,image:p,src:p.toDataURL(),width:f,height:d},n(k[t])}}))},F=function(e,t){return e?Object.keys(e).reduce((function(n,r){return m(m({},n),{},v({},r,j(e[r])?C.evaluateFunction(e[r],t):e[r]))}),{}):{}},L=!1,N=function(e,t){var r=(e||{}).rules,o=(void 0===r?[]:r).reduce((function(e,n){var r=((null==n?void 0:n.symbolizers)||[]).filter((function(e){var t=e.kind;return["Mark","Icon"].includes(t)}));if(!r.some((function(e){return Object.keys(e).some((function(t){var n;return!(null===(n=e[t])||void 0===n||!n.name)}))})))return[].concat(b(e),b(r));var o=t.features||[],i=void 0===n.filter?o:o.filter((function(e){return I(e,n.filter)}));return[].concat(b(e),b(r.reduce((function(e,t){return[].concat(b(e),b((i||[]).map((function(e){var n;return m(m({},F(t,e)),"msMarkerIcon"===(null==t||null===(n=t.image)||void 0===n?void 0:n.name)&&{image:t.image})}))))}),[])))}),[]),i=o.filter((function(e){return"Mark"===e.kind})),a=o.filter((function(e){return"Icon"===e.kind}));return(L?Promise.resolve():n.e(50957).then(n.bind(n,950957)).then((function(){return document.fonts.load("1rem FontAwesome").then((function(){return L=!0}))}))).then((function(){return new Promise((function(e){i.length>0||a.length>0?Promise.all([].concat(b(i.map(Z)),b(a.map(x)))).then((function(t){e(t)})):e([])}))}))}},683255:(e,t,n)=>{e.exports=n.p+"grid.svg"},911636:(e,t,n)=>{e.exports=n.p+"world.svg"},570898:(e,t,n)=>{e.exports=n.p+"symbolMissing.svg"},773723:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/geostory/contents/carousel/img/default.jpg"},875492:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"},51205:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII="},438097:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAYAAABqBU3hAAABIUlEQVRIS+3UsYoCMRDG8f8q+EBid5WNnc019la2Vr6Ala1g4SvY+RTXiVdcJQgHV9jJIdhKZCNx2GwyibCNW4bd+X47k6Sg4adoOJ83wNcBsz4CvoGfF4zpEzgCO1mrCmDWpsAC+Af6wD4DMQGWwBUYAF9uLQlww1vli+cMhA1vl7UuEuECqsItNgUhw22tJ4QLGANrwP657LoG4Qt3EV3g4ALMfLZAp2beMYhQuCn/B/SAk9wDQ2CTgYgN/wB+jaTqFKQi1OE+gFnXIpLC6wAaxAqYAfaoVW0hM/NH2+vuAflxTCdCd5Q3PNQBWzgHURseC4gdh+xEMFwD0CKiwrWAWER0eAoghFCFpwJ8CHV4DkAiksJzARYxL2/O+92ufW42SVMYbhcsEwAAAABJRU5ErkJgggAA"}}]);