(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[50172],{550172:(e,o,r)=>{"use strict";r.d(o,{KF:()=>G,c4:()=>L,XI:()=>R,jy:()=>N,WX:()=>B,p9:()=>U,uN:()=>_,U2:()=>z,xB:()=>W,ir:()=>H});var t=r(35961),i=r(545477),n=r(156905),a=r(331097),l=r(935173),c=r(730617),u=r(44799),d=r(420171),s=r(759398),p=r(670594),f=r(816715),y=r(71880),m=r(660904),h=r(370271),v=r(6853),w=r(659635),g=r(720794),Z=r(341633),b=r(234871),P=r(65792),A=r.n(P),F=r(545578),O=r.n(F),j=r(976337),T=r(407578);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,t)}return r}function x(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?C(Object(r),!0).forEach((function(o){M(e,o,r[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}function M(e,o,r){return(o=function(e){var o=function(e){if("object"!=k(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(o)?o:o+""}(o))in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function I(e,o){return function(e){if(Array.isArray(e))return e}(e)||function(e,o){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,n,a,l=[],c=!0,u=!1;try{if(n=(r=r.call(e)).next,0===o){if(Object(r)!==r)return;c=!1}else for(;!(c=(t=n.call(r)).done)&&(l.push(t.value),l.length!==o);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,o)||D(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,o){if(e){if("string"==typeof e)return E(e,o);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,o):void 0}}function E(e,o){(null==o||o>e.length)&&(o=e.length);for(var r=0,t=Array(o);r<o;r++)t[r]=e[r];return t}var G=function(e){var o=e.color,r=e.opacity,i=I(A()(o).gl(),4),n=i[0],a=i[1],l=i[2],c=i[3];return void 0!==r?new t.Z(n,a,l,r):new t.Z(n,a,l,c)},L=function(e){var o=e.coordinates,r=e.width,t=void 0===r?4:r,s=e.color,p=void 0===s?"#ff00ff":s,f=e.opacity,y=void 0===f?1:f,m=e.depthFailColor,h=e.depthFailOpacity,v=e.dashLength,w=e.clampToGround,g=e.allowPicking,Z=void 0!==g&&g,b=e.geodesic,P=e.id,A=e.modelMatrix;return new i[w?"GroundPolylinePrimitive":"Primitive"](x(x({geometryInstances:new n.Z({id:P,geometry:w?new a.Z({positions:S(o),width:t}):new l.Z({positions:S(o),width:t,arcType:b?c.Z.GEODESIC:c.Z.NONE}),modelMatrix:A}),appearance:new u.Z({material:v?d.Z.fromType("PolylineDash",{color:G({color:p,opacity:y}),dashLength:v}):d.Z.fromType("Color",{color:G({color:p,opacity:y})})})},m&&{depthFailAppearance:new u.Z({material:v?d.Z.fromType("PolylineDash",{color:G({color:m,opacity:h}),dashLength:v}):d.Z.fromType("Color",{color:G({color:m,opacity:h})})})}),{},{allowPicking:Z,asynchronous:!1}))},R=function(e){var o=e.id,r=e.coordinates,t=e.color,i=void 0===t?"#ff00ffAA":t,a=e.opacity,l=void 0===a?1:a,c=e.depthFailColor,u=e.depthFailOpacity,m=e.allowPicking,h=void 0!==m&&m,v=e.geodesic;return new s.Z(x(x({geometryInstances:new n.Z({id:o,geometry:new p.Z({polygonHierarchy:new f.Z(S(r)),perPositionHeight:!v})}),appearance:new y.Z({material:d.Z.fromType("Color",{color:G({color:i,opacity:l})}),faceForward:!0})},c&&{depthFailAppearance:new y.Z({material:d.Z.fromType("Color",{color:G({color:c,opacity:u})}),faceForward:!0})}),{},{allowPicking:h,asynchronous:!1}))},N=function(e){var o=e.width,r=void 0===o?4:o,t=e.coordinates,i=e.color,n=void 0===i?"#ff00ff":i,a=e.opacity,l=void 0===a?1:a,c=e.depthFailColor,u=e.depthFailOpacity,d=e.dashLength,s=e.clampToGround,p=e.allowPicking,f=void 0!==p&&p,y=e.id,h=e.radius,v=e.semiMajorAxis,w=e.semiMinorAxis,g=e.geodesic,Z=j.Z.computeEllipsePositions({granularity:.02,semiMajorAxis:h||v,semiMinorAxis:h||w,rotation:0,center:t},!1,!0).outerPositions,b=m.Z.unpackArray(Z);return L({coordinates:[].concat(S(b),[b[0]]),width:r,color:n,opacity:l,depthFailColor:c,depthFailOpacity:u,dashLength:d,clampToGround:s,allowPicking:f,id:y,geodesic:g})},B=function(e){var o=e.id,r=e.coordinates,t=e.color,a=void 0===t?"#ff00ffAA":t,l=e.opacity,c=void 0===l?1:l,u=e.depthFailColor,s=e.depthFailOpacity,p=e.allowPicking,f=void 0!==p&&p,m=e.clampToGround,v=e.radius,w=e.semiMajorAxis,g=e.semiMinorAxis;return new i[m?"GroundPrimitive":"Primitive"](x(x({geometryInstances:new n.Z({id:o,geometry:new h.Z({center:r,semiMajorAxis:v||w,semiMinorAxis:v||g})}),appearance:new y.Z({material:d.Z.fromType("Color",{color:G({color:a,opacity:c})}),faceForward:!0})},u&&{depthFailAppearance:new y.Z({material:d.Z.fromType("Color",{color:G({color:u,opacity:s})}),faceForward:!0})}),{},{allowPicking:f,asynchronous:!1}))},U=function(e){var o=e.id,r=e.coordinates,t=e.color,i=void 0===t?"#ff00ffAA":t,a=e.opacity,l=void 0===a?1:a,c=e.depthFailColor,u=e.depthFailOpacity,p=e.allowPicking,f=void 0!==p&&p,h=e.length,Z=e.radius,b=e.topRadius,P=e.bottomRadius;return new s.Z(x(x({geometryInstances:new n.Z({id:o,geometry:new v.Z({length:null!=h?h:.1,topRadius:null!=b?b:Z,bottomRadius:null!=P?P:Z}),modelMatrix:w.Z.multiplyByTranslation(g.Z.eastNorthUpToFixedFrame(r),new m.Z(0,0,0),new w.Z)}),appearance:new y.Z({material:d.Z.fromType("Color",{color:G({color:i,opacity:l})}),faceForward:!0})},c&&{depthFailAppearance:new y.Z({material:d.Z.fromType("Color",{color:G({color:c,opacity:u})}),faceForward:!0})}),{},{allowPicking:f,asynchronous:!1}))},_=function(e){var o=e.id,r=e.coordinates,t=e.color,i=void 0===t?"#ff00ffAA":t,n=e.opacity,a=void 0===n?1:n,l=e.depthFailColor,c=e.depthFailOpacity,u=e.allowPicking,d=void 0!==u&&u,s=e.length,p=e.radius,f=e.dashLength,y=e.clampToGround,h=e.geodesic,v=e.width,Z=e.slices,b=void 0===Z?128:Z,P=e.topRadius,A=e.bottomRadius,F=w.Z.multiplyByTranslation(g.Z.eastNorthUpToFixedFrame(r),new m.Z(0,0,0),new w.Z),O=T.Z.computePositions(null!=s?s:0,null!=P?P:p,null!=A?A:p,b,!1),j=m.Z.unpackArray(O);return L({coordinates:s?j:[].concat(S(j.splice(0,Math.ceil(j.length/2))),[j[0]]),width:v,color:i,opacity:a,depthFailColor:l,depthFailOpacity:c,dashLength:f,clampToGround:y,allowPicking:d,id:o,geodesic:h,modelMatrix:F})},z=function(e,o){var r;null!=e&&null!==(r=e.scene)&&void 0!==r&&r.primitives&&o&&!o.isDestroyed()&&(o.removeAll(),e.scene.primitives.remove(o))},W=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.stroke,t=o.strokeWidth,i=void 0===t?1:t,n=o.fill,a=void 0===n?"#ffffff":n,l=r?e+2*i:e,c=document.createElement("canvas");c.setAttribute("width",l),c.setAttribute("height",l);var u=c.getContext("2d");return u.beginPath(),a&&(u.fillStyle=a),r&&(u.strokeStyle=r,u.lineWidth=i),u.arc(l/2,l/2,e/2,0,2*Math.PI),a&&u.fill(),r&&u.stroke(),c},H=function(e,o,t){return r.e(29982).then(r.bind(r,729982)).then((function(i){var n,a,l=i.default,c=(t?e:l(e)).geometry;return(a=S((null==c||null===(n=c.coordinates)||void 0===n?void 0:n[0])||[]),r.e(29014).then(r.bind(r,529014)).then((function(e){return(0,e.default)({type:"Feature",geometry:{type:"LineString",coordinates:a},properties:{}})?a:S(a).reverse()}))).then((function(e){for(var r=O()(o?e:e.reverse(),(function(e){return"".concat(e[0]).concat(e[1])})).map((function(e){var o=I(e,3),r=o[0],t=o[1],i=o[2],n=void 0===i?0:i;return m.Z.fromDegrees(r,t,n)})),t=r.length,i=[],n=0;n<t;++n){var a=(n+1)%t,l=m.Z.add(r[n],r[a],new m.Z);l=m.Z.multiplyByScalar(l,.5,l);var c=m.Z.normalize(l,new m.Z),u=m.Z.subtract(r[a],l,new m.Z);u=m.Z.normalize(u,u);var d=m.Z.cross(u,c,new m.Z);d=m.Z.normalize(d,d);var s=new Z.Z(d,0),p=Z.Z.getPointDistance(s,l);i.push(new b.Z(d,p))}return i}))}))}}}]);