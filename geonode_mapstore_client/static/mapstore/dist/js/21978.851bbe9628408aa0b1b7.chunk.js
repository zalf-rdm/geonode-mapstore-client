(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[21978],{501157:(e,t,r)=>{"use strict";r.d(t,{ID:()=>S,en:()=>T,Xv:()=>x,FU:()=>C,gs:()=>k,tt:()=>_,jY:()=>q,T6:()=>R,ZP:()=>B});var o=r(472500),n=r.n(o),i=r(701469),l=r.n(i),a=r(984596),u=r.n(a),p=r(227361),c=r.n(p),s=r(505055),d=r.n(s),f=r(375875),y=r.n(f),b=r(737275),m=r(916651),v=r(577215);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){var o,n,i,l;o=e,n=t,i=r[t],l=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=g(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n),(n="symbol"==g(l)?l:l+"")in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F={},P="1.3.0",S="1.1.1",T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{service:"WMS",version:P,request:"GetCapabilities"},r=arguments.length>2?arguments[2]:void 0,o=(l()(e)&&e||e.split(","))[0],i=n().parse(o,!0);return n().format(E(E({},i),{},{search:null,query:E(E(E({},t),i.query),(null==r?void 0:r.query)||{})}))},j=function(e){var t=e&&e.Title,r=e.LogoURL&&E(E({},c()(e,"LogoURL.$")||{}),{},{format:c()(e,"LogoURL.Format")}),o=c()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:r,imageUrl:c()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:o}},x=function e(t){var r,o,n=null!==(r=null==t?void 0:t.Layer)&&void 0!==r?r:null==t?void 0:t.layer,i=null!==(o=null==t?void 0:t.Name)&&void 0!==o?o:null==t?void 0:t.name;return n?u()(n).reduce((function(t,r){var o,n,i=null!==(o=r.Layer)&&void 0!==o?o:r.layer,l=null!==(n=r.Name)&&void 0!==n?n:r.name;return[].concat(h(t),h(e(r)),h(i&&l?[r]:[]))}),[]):i&&[t]||[]},D=function(){var e,t,r,o,n,i,a,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,f=p.Capability,y=p.Service,b=(a=f).Request&&a.Request.GetMap&&a.Request.GetMap.DCPType&&a.Request.GetMap.DCPType.HTTP&&a.Request.GetMap.DCPType.HTTP.Get&&a.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&a.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,m=f.Layer&&(null===(e=f.Layer.SRS||f.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],v=f.Layer&&f.Layer.Attribution&&j(f.Layer.Attribution),g=u()((null==f||null===(t=f.Request)||void 0===t||null===(r=t.GetMap)||void 0===r?void 0:r.Format)||[]),h=u()((null==f||null===(o=f.Request)||void 0===o||null===(n=o.GetFeatureInfo)||void 0===n?void 0:n.Format)||[]),w=x(f),O=(l()(w)?w:[w]).filter((function(e){return!d||-1!==e.Name.toLowerCase().indexOf(d.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(d.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(d.toLowerCase())}));return{numberOfRecordsMatched:O.length,numberOfRecordsReturned:Math.min(s,O.length),nextRecord:c+Math.min(s,O.length)+1,service:y,layerOptions:{version:(null==p||null===(i=p.$)||void 0===i?void 0:i.version)||P},records:O.filter((function(e,t){return t>=c-1&&t<c-1+s})).map((function(e){return E(E({},e),{},{getMapFormats:g,getFeatureInfoFormats:h,onlineResource:b,SRS:m,credits:e.Attribution?j(e.Attribution):v})}))}},C=function(e){return y().get(T(e,{service:"WMS",version:P,request:"GetCapabilities"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t.WMS_Capabilities||t.WMT_MS_Capabilities||{}}))},I=function(e,t,r,o){var n=F[e];return n&&(new Date).getTime()<n.timestamp+1e3*((0,b.u8)("cacheExpire")||60)?new Promise((function(e){e(D(n.data,t,r,o))})):C(e).then((function(n){return F[e]={timestamp:(new Date).getTime(),data:n},D(n,t,r,o)}))},k=function(e,t){return y().get(T(e,{service:"WMS",version:S,layers:t,request:"DescribeLayer"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,r){t=r&&r.WMS_DescribeLayerResponse&&r.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return E(E({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:E({},e&&e.query&&e.query.$||{})})}))}))},_=function(e,t,r,o){return I(e,t,r,o)},q=function(e,t){for(var r=e,o=r.EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,m.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;!o&&r.Layer&&r.Layer.length;)o=(r=r.Layer[0]).EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,m.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;o||(o={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var n={extent:[o.westBoundLongitude||o.minx,o.southBoundLatitude||o.miny,o.eastBoundLongitude||o.maxx,o.northBoundLatitude||o.maxy],crs:"EPSG:4326"};return t?{crs:n.crs,bounds:{minx:n.extent[0],miny:n.extent[1],maxx:n.extent[2],maxy:n.extent[3]}}:n},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return C(e).then((function(e){var r,o,n,i,l=e.Capability,a=u()((null==l||null===(r=l.Request)||void 0===r||null===(o=r.GetMap)||void 0===o?void 0:o.Format)||[]).filter(v.F0);return t?{imageFormats:a,infoFormats:u()((null==l||null===(n=l.Request)||void 0===n||null===(i=n.GetFeatureInfo)||void 0===i?void 0:i.Format)||[]).filter(v.cP)}:a})).catch((function(){return t?{imageFormats:[],infoFormats:[]}:[]}))};const B={flatLayers:x,parseUrl:T,getDimensions:function(e){return u()(e.Dimension||e.dimension||[]).map((function(t,r){var o=e.Extent&&u()(e.Extent)[r]||e.extent&&u()(e.extent)[r];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||o&&o.$.default,values:t._&&t._.split(",")||o&&o._&&o._.split(",")}}))},getCapabilities:C,describeLayer:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y().get(T(e,{service:"WMS",version:S,layers:t,request:"DescribeLayer"},r)).then((function(e){var t,r,o;d().parseString(e.data,{explicitArray:!1},(function(e,t){o=t}));var n=(null===(t=o)||void 0===t||null===(r=t.WMS_DescribeLayerResponse)||void 0===r?void 0:r.LayerDescription)&&u()(o.WMS_DescribeLayerResponse.LayerDescription)[0];return n&&E(E({},null==n?void 0:n.$),(null==n?void 0:n.Query)&&{query:u()(n.Query).map((function(e){return E({},null==e?void 0:e.$)}))})}))},getRecords:I,describeLayers:k,textSearch:_,parseLayerCapabilities:function(e,t){var r=e.Capability;return x(r).find((function(e){var r=e.Name;return 2===t.name.split(":").length&&r&&2===r.split(":").length?t.name===r&&e:r&&2===r.split(":").length?t.name===r.split(":")[1]&&e:2===t.name.split(":").length?t.name.split(":")[1]===r&&e:t.name===r&&e}))},getBBox:q,reset:function(){Object.keys(F).forEach((function(e){delete F[e]}))},getSupportedFormat:R}},531071:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ft});var o=r(124852),n=r.n(o),i=r(45697),l=r.n(i),a=r(480681),u=r(80717),p=r(950966),c=r(704201),s=r(727418),d=r.n(s),f=r(993451);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,O(o.key),o)}}function m(e,t,r){return t=g(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function w(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var E=(0,f.Z)("placeholder")((0,f.Z)("fieldOptions","label","object")(c.Z)),F=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return w(e=m(this,t,[].concat(o)),"renderOperatorField",(function(){return n().createElement(c.Z,{dropUp:e.props.dropUp,fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),w(e,"renderValueField",(function(t){return n().cloneElement(n().Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],d()({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),w(e,"updateExceptionFieldElement",(function(t,r){e.props.onUpdateExceptionField(t,r)})),w(e,"updateFieldElement",(function(t,r,o,n,i){var l;if("attribute"===r){var a=(l=e.props.attributes.filter((function(e){return e.attribute===o}))[0])&&l.type||n;e.props.onUpdateField(t,r,o,a,i),"array"===a&&e.props.onUpdateField(t,"operator","contains",a,i)}else e.props.onUpdateField(t,r,o,"boolean"===n?"string":n,i);if("value"===r){var u=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));u.length>0&&e.props.onChangeCascadingValue(u)}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return n().createElement("div",{className:"filter-field-row"},n().createElement("div",{className:"filter-field-attribute"},n().createElement(E,{dropUp:this.props.dropUp,valueField:"attribute",textField:"label",fieldOptions:this.props.attributes,placeholder:"queryform.attributefilter.combo_placeholder",fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),n().createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),n().createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?n().createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&b(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);w(F,"propTypes",{dropUp:l().bool,attributes:l().array,filterField:l().object,operatorOptions:l().array,onUpdateField:l().func,maxFeaturesWPS:l().number,toggleMenu:l().func,deleteButton:l().node,onUpdateExceptionField:l().func,onChangeCascadingValue:l().func}),w(F,"contextTypes",{messages:l().object}),w(F,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}});const P=F;var S=r(868195),T=r(867076),j=r(414293),x=r.n(j),D=r(441609),C=r.n(D),I=r(730381),k=r.n(I),_=r(93054),q=r.n(_),R=r(55237),B=r(86638),L=r(143146),M=r(805346),N=r(586266),U=r(786903),A=r(196958);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,X(o.key),o)}}function Z(e,t,r){return t=$(t),function(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,W()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function Q(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=V(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}q()(k());var z=[{type:A.DC.DATE,value:"{today}+P0D",labelId:"queryform.attributefilter.datefield.quickSelectors.today"},{type:A.DC.DATE,value:"{today}-P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.yesterday"},{type:A.DC.DATE,value:"{today}+P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.tomorrow"},{type:A.DC.DATE_TIME,value:"{now}+P0D",labelId:"queryform.attributefilter.datefield.quickSelectors.now"},{type:A.DC.DATE_TIME,value:"{now}-P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.yesterday"},{type:A.DC.DATE_TIME,value:"{now}+P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.tomorrow"},{type:A.DC.DATE,value:"{today}/{today}",labelId:"queryform.attributefilter.datefield.quickSelectors.today"},{type:A.DC.DATE,value:"{thisWeekStart}/{thisWeekEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisWeek"},{type:A.DC.DATE,value:"{thisMonthStart}/{thisMonthEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisMonth"},{type:A.DC.DATE,value:"{today}/{today}+P7D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:A.DC.DATE,value:"{today}/{today}+P30D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:A.DC.DATE,value:"{today}/{today}+P90D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:A.DC.DATE_TIME,value:"{now}/{now}",labelId:"queryform.attributefilter.datefield.quickSelectors.now"},{type:A.DC.DATE_TIME,value:"{thisWeekStart}/{thisWeekEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisWeek"},{type:A.DC.DATE_TIME,value:"{thisMonthStart}/{thisMonthEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisMonth"},{type:A.DC.DATE_TIME,value:"{now}/{now}+P7D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:A.DC.DATE_TIME,value:"{now}/{now}+P30D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:A.DC.DATE_TIME,value:"{now}/{now}+P90D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"}],K=(0,L.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(N.Z),Y=(0,L.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(U.Z),J=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return Q(e=Z(this,t,[].concat(o)),"handleChange",(function(t){e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,{startDate:t},e.props.attType)})),Q(e,"handleChangeRangeFilter",(function(t,r){var o,n,i={};i="end"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start")?{startDate:null===(o=e.props.fieldValue)||void 0===o?void 0:o.startDate,endDate:t}:{startDate:t,endDate:null===(n=e.props.fieldValue)||void 0===n?void 0:n.endDate},e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,i,e.props.attType)})),Q(e,"getQuickTimeSelectors",(function(t){var r;return null===(r=e.props.quickDateTimeSelectors)||void 0===r?void 0:r.filter((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.type,n=r.value;if(!C()(n)&&o===e.props.attType){var i,l=null===(i=n.split("/"))||void 0===i?void 0:i[1];return t?!x()(l):x()(l)}return!1}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e,t=(0,R.V$)(this.context.locale,this.props.attType),r=(0,B.S$)(this.context.messages,this.props.placeholderMsgId)||"Insert date",o=this.props.intl&&this.props.intl.formatMessage({id:"".concat(this.props.tooltipMsgId)},{format:t})||"Insert date in ".concat(t," format");return"><"===this.props.operator?n().createElement("div",{className:"query-field"},n().createElement(Y,{isWithinAttrTbl:!0,key:"query-range",className:this.props.className,format:t,placeholder:r,value:this.props.fieldValue,toolTip:o,operator:this.props.operator,popupPosition:"bottom",type:this.props.attType,time:this.props.attType===A.DC.TIME,calendar:this.props.attType===A.DC.DATE_TIME||this.props.attType===A.DC.DATE,onChange:this.handleChangeRangeFilter,quickDateTimeSelectors:this.getQuickTimeSelectors(!0)})):n().createElement("div",null,this.props.showLabels&&n().createElement(M.Z,{msgId:"queryform.date"}),n().createElement(K,{isWithinAttrTbl:!0,key:"query-single",className:this.props.className,format:t,placeholder:r,value:null===(e=this.props.fieldValue)||void 0===e?void 0:e.startDate,toolTip:o,operator:this.props.operator,type:this.props.attType,popupPosition:"bottom",time:this.props.attType===A.DC.DATE_TIME||this.props.attType===A.DC.TIME,calendar:this.props.attType===A.DC.DATE_TIME||this.props.attType===A.DC.DATE,onChange:this.handleChange,quickDateTimeSelectors:this.getQuickTimeSelectors()}))}}])&&G(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);Q(J,"propTypes",{attType:l().string,dateEnabled:l().bool,fieldName:l().string,fieldRowId:l().number,fieldValue:l().object,fieldException:l().string,operator:l().string,onUpdateField:l().func,onUpdateExceptionField:l().func,showLabels:l().bool,timeEnabled:l().bool,quickDateTimeSelectors:l().array,placeholderMsgId:l().string,tooltipMsgId:l().string,className:l().string}),Q(J,"contextTypes",{messages:l().object,locale:l().string}),Q(J,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1,className:"query-date",placeholderMsgId:"queryform.attributefilter.datefield.placeholder",tooltipMsgId:"queryform.attributefilter.datefield.tooltip",quickDateTimeSelectors:z});const ee=(0,T.getContext)({intl:S.intlShape})(J);var te=r(509886),re=r.n(te),oe=r(200020);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ae.apply(this,arguments)}function ue(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ye(o.key),o)}}function pe(e,t,r){return t=se(t),function(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ce()?Reflect.construct(t,r||[],se(e).constructor):t.apply(e,r))}function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ce=function(){return!!e})()}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function fe(e,t,r){return(t=ye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=ne(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}re()();var be=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return fe(e=pe(this,t,[].concat(o)),"renderPicker",(function(t){var r=e.props.label?n().createElement("label",null,e.props.label):null,o=e.props.lowLabel?n().createElement("label",null,e.props.lowLabel):null,i=e.props.upLabel?n().createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?n().createElement("div",{className:"query-field"},n().createElement("div",{className:"query-field-value"},o,n().createElement(oe.NumberPicker,ae({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),n().createElement("div",{className:"query-field-value"},i,n().createElement(oe.NumberPicker,ae({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):n().createElement("div",null,r,n().createElement(oe.NumberPicker,ae({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),fe(e,"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,B.S$)(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,B.S$)(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=le(le({},this.props.style),{},{borderColor:"#FF0000"})),n().createElement(p.Z,{placement:"bottom",overlay:this.props.fieldException?n().createElement(a.u,{id:this.props.fieldRowId+"_tooltip"},n().createElement("strong",null,this.props.fieldException)):n().createElement("noscript",null)},this.renderPicker(e))}}])&&ue(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);fe(be,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().oneOfType([l().number,l().object]),fieldException:l().oneOfType([l().object,l().bool,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,isRequired:l().bool,label:l().string,lowLabel:l().string,upLabel:l().string,options:l().shape({format:l().string,min:l().number,max:l().number,step:l().number,precision:l().number}),style:l().object}),fe(be,"contextTypes",{messages:l().object}),fe(be,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}});const me=be;var ve=r(615402),ge=r(86686);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function we(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Te(o.key),o)}}function Oe(e,t,r){return t=Fe(t),function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ee()?Reflect.construct(t,r||[],Fe(e).constructor):t.apply(e,r))}function Ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ee=function(){return!!e})()}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function Se(e,t,r){return(t=Te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e){var t=function(e,t){if("object"!=he(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=he(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}var je=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Se(e=Oe(this,t,[].concat(o)),"renderField",(function(){var t,r=(0,B.S$)(e.context.messages,"queryform.attributefilter.text_placeholder"),o=n().createElement(a.u,{id:"textField-tooltip"+e.props.fieldRowId},n().createElement(ve.Z,{msgId:null!==(t=e.props.tooltipMessage)&&void 0!==t?t:"queryform.attributefilter.tooltipTextField"})),i=n().createElement(a.NI,{disabled:"isNull"===e.props.operator,placeholder:r,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return(0,ge.isLikeOrIlike)(e.props.operator)?n().createElement(p.Z,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:o},i):i})),Se(e,"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?n().createElement("label",null,this.props.label):n().createElement("span",null);return n().createElement("div",{className:"textField"},e,this.renderField())}}])&&we(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);Se(je,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().string,label:l().string,tooltipMessage:l().string,fieldException:l().oneOfType([l().object,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,style:l().object}),Se(je,"contextTypes",{messages:l().object}),Se(je,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}});const xe=je;var De=r(848384),Ce=r(749902);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function ke(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Me(o.key),o)}}function _e(e,t,r){return t=Re(t),function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qe()?Reflect.construct(t,r||[],Re(e).constructor):t.apply(e,r))}function qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qe=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}function Le(e,t,r){return(t=Me(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=Ie(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ie(t)?t:t+""}var Ne=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Le(e=_e(this,t,[].concat(o)),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),Le(e,"getPagination",(function(t){if(!e.props.filterField.options)return{};var r=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),o=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,n=e.props.filterField.fieldOptions.currentPage===r||!e.props.filterField.fieldOptions.currentPage;return d()({},e.props.pagination,{paginated:0!==t.length&&!(o&&1===t.length),firstPage:o,lastPage:n,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),Le(e,"getTooltip",(function(){return d()({},e.props.tooltip,{enabled:(0,ge.isLikeOrIlike)(e.props.filterField.operator),id:"autocompleteField-tooltip"+e.props.filterField&&e.props.filterField.rowId,message:n().createElement(ve.Z,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:"autocompleteField-overlay"+e.props.filterField&&e.props.filterField.rowId,placement:"top"})})),Le(e,"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var r=e.getOptions()?e.getOptions().slice(0):[];return n().createElement(Ce.Z,{dropUp:e.props.dropUp,busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:r,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(r)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(r)},pagination:e.getPagination(r),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),Le(e,"handleSelect",(function(){e.selected=!0})),Le(e,"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),Le(e,"handleFocus",(function(t){e.loadWithoutfilter(t)})),Le(e,"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),Le(e,"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this.props.label?n().createElement("label",null,this.props.label):n().createElement("span",null);return n().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&ke(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);Le(Ne,"propTypes",{dropUp:l().bool,disabled:l().bool,filterField:l().object,label:l().string,itemComponent:l().oneOfType([l().object,l().func]),maxFeaturesWPS:l().number,onUpdateField:l().func,pagination:l().object,textField:l().string,tooltip:l().object,toggleMenu:l().func,valueField:l().string}),Le(Ne,"contextTypes",{messages:l().object}),Le(Ne,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:De.Z,toggleMenu:function(){},filterField:{fieldOptions:{}}});const Ue=Ne;var Ae=r(112346),Ve=r(313311),Ge=r.n(Ve);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function We(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ke(o.key),o)}}function $e(e,t,r){return t=Qe(t),function(e,t){if(t&&("object"===Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,He()?Reflect.construct(t,r||[],Qe(e).constructor):t.apply(e,r))}function He(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(He=function(){return!!e})()}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe(e)}function Xe(e,t){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xe(e,t)}function ze(e,t,r){return(t=Ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=Ze(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ze(t)?t:t+""}var Ye=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return ze(e=$e(this,t,[].concat(o)),"state",{open:!1}),ze(e,"getSelected",(function(){return Ge()(e.props.options,e.getFindFunciton())})),ze(e,"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),ze(e,"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),ze(e,"getFindFunciton",(function(){return e.props.valueField?ze({},e.props.valueField,e.props.value):e.props.value})),ze(e,"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),ze(e,"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),ze(e,"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xe(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this;return n().createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},n().createElement("span",{onClick:this.handleClick},n().createElement("strong",null,this.renderLabel(this.getSelected())),n().createElement(a.gG,{glyph:"chevron-down"})),this.state.open&&n().createElement("div",{className:"m-options"},n().createElement("ul",null,this.props.options.map((function(t,r){return n().createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&We(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);ze(Ye,"propTypes",{options:l().array,value:l().any,onSelect:l().func,valueField:l().string,labelField:l().string,labelRenderer:l().any}),ze(Ye,"defaultProps",{onSelect:function(){},options:[]});const Je=Ye;var et=r(838167),tt=r(38560);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function it(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,st(o.key),o)}}function lt(e,t,r){return t=ut(t),function(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,at()?Reflect.construct(t,r||[],ut(e).constructor):t.apply(e,r))}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pt(e,t)}function ct(e,t,r){return(t=st(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function st(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=rt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:t+""}var dt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ct(e=lt(this,t,[].concat(o)),"getComboValues",(function(t,r){if(t&&t.dependson){var o=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(o&&o.value){var n=r.filter((function(e){return e.attribute===o.attribute}))[0],i=n.values.filter((function(e){return e[n.valueId]===o.value}))[0][t.dependson.from],l=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?l.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),ct(e,"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;case"array":return e.props.arrayOperators;default:return e.props.defaultOperators}})),ct(e,"renderFilterField",(function(t){var r=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],o=e.getComboValues(r,e.props.attributes),i=t.exception?n().createElement(p.Z,{placement:"bottom",overlay:n().createElement(a.u,{id:t.rowId+"tooltip"},n().createElement("strong",null,n().createElement(et.ZP.Message,{msgId:t.exception||""})))},n().createElement(tt.Z,{id:"remove-filter-field",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},n().createElement(a.gG,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):n().createElement(p.Z,{placement:"top",overlay:n().createElement(a.u,{id:t.rowId+"tooltip"},n().createElement("strong",null,n().createElement(et.ZP.Message,{msgId:"queryform.attributefilter.delete"})))},n().createElement(tt.Z,{id:"remove-filter-field",bsStyle:e.props.buttonStyle,className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},n().createElement(a.gG,{glyph:e.props.removeButtonIcon})));return n().createElement(P,{dropUp:e.props.dropUp,key:t.rowId,deleteButton:i,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(r),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},n().createElement(c.Z,{dropUp:e.props.dropUp,attType:"list",valueField:"id",textField:"name",fieldOptions:o||[],comboFilter:"contains"}),n().createElement(ee,{attType:"date",dateEnabled:!0,operator:t.operator,quickDateTimeSelectors:e.props.quickDateTimeSelectors}),n().createElement(ee,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator,quickDateTimeSelectors:e.props.quickDateTimeSelectors}),n().createElement(xe,{attType:"array",operator:t.operator}),n().createElement(ee,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),n().createElement(me,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?n().createElement(Ue,{dropUp:e.props.dropUp,filterField:t,attType:"string"}):n().createElement(xe,{tooltipMessage:e.props.textFieldTooltipMessageId,operator:t.operator,attType:"string"}),n().createElement(c.Z,{dropUp:e.props.dropUp,fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),ct(e,"renderGroupButtons",(function(t){var r=[];return t.index<=e.props.groupLevels&&r.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),r.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&r.push({key:"remove-group",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.deleteGroup",glyph:e.props.removeGroupButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),n().createElement(u.Z,{buttons:r,btnDefaultProps:{}})})),ct(e,"renderGroupHeader",(function(t){return n().createElement("div",{className:"logicHeader filter-logic-header"},n().createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},n().createElement("span",{className:"group_label_a"},n().createElement(et.ZP.Message,{msgId:"queryform.attributefilter.group_label_a"})),"Â ",n().createElement(Je,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(r){return e.props.actions.onUpdateLogicCombo(t.id,r)},labelRenderer:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name;return n().createElement(et.ZP.Message,{msgId:e})}}),"Â ",n().createElement("span",{className:"group_label_b"},n().createElement(et.ZP.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),ct(e,"renderGroupField",(function(t){var r=e.props.filterFields.filter((function(e){return e.groupId===t.id})),o=e.props.groupFields.filter((function(e){return e.groupId===t.id})),i=[].concat(ot(r),ot(o)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return n().createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),n().createElement("div",{className:"query-content"},i))})),ct(e,"renderHeader",(function(){return(0,B.S$)(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),ct(e,"updateLogicCombo",(function(t,r,o){var n=e.props.logicComboOptions.filter((function(t){return o===(0,B.S$)(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,n)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this;return this.props.withContainer?n().createElement(Ae.Z,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):n().createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&it(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);ct(dt,"propTypes",{dropUp:l().bool,groupLevels:l().number,withContainer:l().bool,autocompleteEnabled:l().bool,maxFeaturesWPS:l().number,groupFields:l().array,filterFields:l().array,attributes:l().array,fieldWidth:l().string,removeButtonIcon:l().string,addButtonIcon:l().string,removeGroupButtonIcon:l().string,buttonStyle:l().string,logicComboOptions:l().array,attributePanelExpanded:l().bool,actions:l().object,arrayOperators:l().array,listOperators:l().array,stringOperators:l().array,booleanOperators:l().array,defaultOperators:l().array,comboOptions:l().object,textFieldTooltipMessageId:l().string}),ct(dt,"contextTypes",{messages:l().object}),ct(dt,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",removeGroupButtonIcon:"trash",bsStyle:"default",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","<>","like","ilike","isNull"],arrayOperators:["contains"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><","isNull"],textFieldTooltipMessageId:"queryform.attributefilter.tooltipTextField"});const ft=dt},82110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var o=r(124852),n=r.n(o),i=r(496259),l=r(532425);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){var o,n,i,l;o=e,n=t,i=r[t],l=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n),(n="symbol"==a(l)?l:l+"")in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const c=function(e){var t=e.width,r=e.height,o=e.className,a=void 0===o?"loader-container":o,u=e.contentStyle,c=void 0===u?{}:u;return n().createElement("div",{className:a},n().createElement(i.Z,null,(function(e){var o=e.width,i=void 0===o?200:o,a=e.height,u=void 0===a?200:a,s=t||(u>0?Math.min(i,u):i),d=r||(u>0?Math.min(i,u):i),f=Math.min(s,d);return n().createElement(l.Z,{size:f,style:p({padding:f/10,margin:"auto",display:"flex"},c)})})))}},399534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(461365),n=r(356936);const i=(0,o.Z)(n.h_)}}]);