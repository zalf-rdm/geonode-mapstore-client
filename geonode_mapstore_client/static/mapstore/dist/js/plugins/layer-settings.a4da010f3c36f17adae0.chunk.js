(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[43166,7654],{580416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>n,Zz:()=>o,ms:()=>i,ih:()=>a,OX:()=>l,sb:()=>u,K$:()=>c,k7:()=>s,cX:()=>p,x9:()=>f,vs:()=>y,oE:()=>d,Po:()=>m,qv:()=>b,cI:()=>v,g6:()=>g,I4:()=>h,l$:()=>O,Xv:()=>E,k3:()=>P,CQ:()=>w,R8:()=>j,HN:()=>S,sH:()=>L,c7:()=>C,_7:()=>A,eF:()=>R,O6:()=>x,ED:()=>T,RP:()=>D,sF:()=>I,VP:()=>_,He:()=>k,vO:()=>Z,WO:()=>N,bh:()=>M,pV:()=>F,MK:()=>B,ZF:()=>G,tV:()=>z,Dv:()=>U,Yz:()=>q,kI:()=>Y,XG:()=>$,A4:()=>W,Rp:()=>H,$o:()=>V,ct:()=>Q,oh:()=>K,$h:()=>X,ud:()=>J,Qr:()=>ee,LR:()=>te,nN:()=>re,UG:()=>ne,F5:()=>oe,c9:()=>ie,Jh:()=>ae,Xy:()=>le});var n="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",a="TOGGLE_NODE",l="SORT_NODE",u="REMOVE_NODE",c="UPDATE_NODE",s="MOVE_NODE",p="LAYER_LOADING",f="LAYER_LOAD",y="LAYER_ERROR",d="ADD_LAYER",m="ADD_GROUP",b="REMOVE_LAYER",v="SHOW_SETTINGS",g="HIDE_SETTINGS",h="UPDATE_SETTINGS",O="REFRESH_LAYERS",E="LAYERS:UPDATE_LAYERS_DIMENSION",P="LAYERS_REFRESHED",w="LAYERS_REFRESH_ERROR",j="LAYERS:BROWSE_DATA",S="LAYERS:DOWNLOAD",L="LAYERS:CLEAR_LAYERS",C="LAYERS:SELECT_NODE",A="LAYERS:FILTER_LAYERS",R="LAYERS:SHOW_LAYER_METADATA",x="LAYERS:HIDE_LAYER_METADATA",T="LAYERS:UPDATE_SETTINGS_PARAMS";function D(e,t,r){return{type:v,node:e,nodeType:t,options:r}}function I(){return{type:g}}function _(e){return{type:h,options:e}}function k(e,t){return{type:n,newProperties:t,layer:e}}function Z(e,t){return{type:o,layer:e,params:t}}function N(e,t){return{type:i,newProperties:t,group:e}}function M(e,t,r){return{type:a,node:e,nodeType:t,status:!r}}function F(e){return{type:"CONTEXT_NODE",node:e}}function B(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:l,node:e,order:t,sortLayers:r}}function G(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:u,node:e,nodeType:t,removeEmpty:r}}function z(e,t,r){return{type:c,node:e,nodeType:t,options:r}}function U(e,t,r){return{type:s,node:e,groupId:t,index:r}}function q(e){return{type:p,layerId:e}}function Y(e,t){return{type:f,layerId:e,error:t}}function $(e,t,r){return{type:y,layerId:e,tilesCount:t,tilesErrorCount:r}}function W(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:d,layer:e,foreground:t}}function H(e,t,r){return{type:m,group:e,parent:t,options:r}}function V(e){return{type:b,layerId:e}}function Q(e,t){return{type:n,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function K(e){return{type:P,layers:e}}function X(e,t){return{type:w,layers:e,error:t}}function J(e,t,r,n){return{type:E,dimension:e,value:t,options:r,layers:n}}function ee(e){return{type:j,layer:e}}function te(e){return{type:S,layer:e}}function re(){return{type:L}}function ne(e,t,r){return{type:C,id:e,nodeType:t,ctrlKey:r}}function oe(e){return{type:A,text:e}}function ie(e,t){return{type:R,metadataRecord:e,maskLoading:t}}function ae(){return{type:x}}function le(e,t){return{type:T,newParams:e,update:t}}},362520:(e,t,r)=>{"use strict";r.d(t,{dn:()=>n,Kn:()=>o,FV:()=>i,yS:()=>a});var n="MAP_LAYOUT:UPDATE_MAP_LAYOUT",o="MAP_LAYOUT:FORCE_UPDATE_MAP_LAYOUT";function i(e){return{type:n,layout:e}}function a(){return{type:o}}},501157:(e,t,r)=>{"use strict";r.d(t,{en:()=>x,FU:()=>k,gs:()=>N,tt:()=>M,jY:()=>F,QQ:()=>B,B8:()=>G,T6:()=>z,ZP:()=>U});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),l=r(984596),u=r.n(l),c=r(227361),s=r.n(c),p=r(441609),f=r.n(p),y=r(264721),d=r.n(y),m=r(944908),b=r.n(m),v=r(727418),g=r.n(v),h=r(505055),O=r.n(h),E=r(375875),P=r.n(E),w=r(737275),j=r(986267),S=r(396606);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R={},x=function(e){var t=(a()(e)&&e||e.split(","))[0],r=o().parse(t,!0);return o().format(g()({},r,{search:null},{query:g()({service:"WMS",version:"1.3.0",request:"GetCapabilities"},r.query)}))},T=function(e){var t=e&&e.Title,r=e.LogoURL&&C(C({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),n=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:r,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:n}},D=function e(t){return t.Layer?(a()(t.Layer)&&t.Layer||[t.Layer]).reduce((function(t,r){return t.concat(e(r)).concat(r.Layer&&r.Name?[r]:[])}),[]):t.Name&&[t]||[]},I=function(e){return e.Request&&e.Request.GetMap&&e.Request.GetMap.DCPType&&e.Request.GetMap.DCPType.HTTP&&e.Request.GetMap.DCPType.HTTP.Get&&e.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&e.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0},_=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,u=(n.WMS_Capabilities||n.WMT_MS_Capabilities||{}).Capability,c=(n.WMS_Capabilities||n.WMT_MS_Capabilities||{}).Service,s=I(u),p=u.Layer&&(null===(e=u.Layer.SRS||u.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],f=u.Layer&&u.Layer.Attribution&&T(u.Layer.Attribution),y=u.Request&&u.Request.GetMap&&u.Request.GetMap.Format||[],d=D(u),m=a()(d)?d:[d],b=m.filter((function(e){return!l||-1!==e.Name.toLowerCase().indexOf(l.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(l.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(l.toLowerCase())}));return{numberOfRecordsMatched:b.length,numberOfRecordsReturned:Math.min(i,b.length),nextRecord:o+Math.min(i,b.length)+1,service:c,layerOptions:{version:(null===(t=n.WMS_Capabilities||n.WMT_MS_Capabilities)||void 0===t||null===(r=t.$)||void 0===r?void 0:r.version)||"1.3.0"},records:b.filter((function(e,t){return t>=o-1&&t<o-1+i})).map((function(e){return g()({},e,{formats:y,onlineResource:s,SRS:p,credits:e.Attribution?T(e.Attribution):f})}))}},k=function(e,t){var n=o().parse(e,!0),i=o().format(g()({},n,{query:g()({service:"WMS",version:"1.1.1",request:"GetCapabilities"},n.query)}));return new Promise((function(e){Promise.all([r.e(99942),r.e(67260)]).then(function(){var n=r(967260).unmarshaller;e(P().get(x(i)).then((function(e){var r;if(t)return O().parseString(e.data,{explicitArray:!1},(function(e,t){r=t})),r;var o=n.unmarshalString(e.data);return o&&o.value})))}.bind(null,r)).catch(r.oe)}))},Z=function(e,t,r,n){var o=R[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,w.u8)("cacheExpire")||60)?new Promise((function(e){e(_(o.data,t,r,n))})):P().get(x(e)).then((function(o){var i;return O().parseString(o.data,{explicitArray:!1},(function(e,t){i=t})),R[e]={timestamp:(new Date).getTime(),data:i},_(i,t,r,n)}))},N=function(e,t){var r=o().parse(e,!0),n=o().format(g()({},r,{query:g()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},r.query)}));return P().get(x(n)).then((function(e){var t;return O().parseString(e.data,{explicitArray:!1},(function(e,r){t=r&&r.WMS_DescribeLayerResponse&&r.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return C(C({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:C({},e&&e.query&&e.query.$||{})})}))}))},M=function(e,t,r,n){return Z(e,t,r,n)},F=function(e,t){for(var r=e,n=r.EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,j.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;!n&&r.Layer&&r.Layer.length;)n=(r=r.Layer[0]).EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,j.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;n||(n={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[n.westBoundLongitude||n.minx,n.southBoundLatitude||n.miny,n.eastBoundLongitude||n.maxx,n.northBoundLatitude||n.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},B=[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/vnd.jpeg-png8",value:"image/vnd.jpeg-png8"},{label:"image/gif",value:"image/gif"}],G=function(){return b()(Object.values((0,S.eq)()))},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return k(e).then((function(e){var r,n,o=s()(e,"capability.request.getMap.format",[]);if(f()(o))r=B;else{var i=B.map((function(e){return e.value}));r=(o=o.map((function(e){var t=e.value;return{label:t,value:t}}))).filter((function(e){var t=e.value;return d()(i,t)}))||[]}if(t){var a=s()(e,"capability.request.getFeatureInfo.format",[]),l=G();f()(a)?n=l:(a=a.map((function(e){return e.value})),n=b()(a.filter((function(e){return d()(l,e)})))||[])}return t?{imageFormats:r,infoFormats:n}:r})).catch((function(){return t?{imageFormats:B,infoFormats:G()}:B}))};const U={flatLayers:D,parseUrl:x,getDimensions:function(e){return u()(e.Dimension||e.dimension||[]).map((function(t,r){var n=e.Extent&&u()(e.Extent)[r]||e.extent&&u()(e.extent)[r];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||n&&n.$.default,values:t._&&t.split(",")||n&&n._&&n.split(",")}}))},getCapabilities:k,describeLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o().parse(e,!0),a=o().format(g()({},i,{query:g()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},i.query,n.query||{})}));return new Promise((function(e){Promise.all([r.e(99942),r.e(67260)]).then(function(){var t=r(967260).unmarshaller;e(P().get(x(a)).then((function(e){var r=t.unmarshalString(e.data);return r&&r.value&&r.value.layerDescription&&r.value.layerDescription[0]})))}.bind(null,r)).catch(r.oe)}))},getRecords:Z,describeLayers:N,textSearch:M,parseLayerCapabilities:function e(t,r,n){return u()(n||s()(t,"capability.layer.layer")).reduce((function(n,o){return n||(!o.name&&o.layer?e(t,r,u()(o.layer)):2===r.name.split(":").length&&o.name&&2===o.name.split(":").length?r.name===o.name&&o:o.name&&2===o.name.split(":").length?r.name===o.name.split(":")[1]&&o:2===r.name.split(":").length?r.name.split(":")[1]===o.name&&o:r.name===o.name&&o)}),null)},getBBox:F,reset:function(){Object.keys(R).forEach((function(e){delete R[e]}))},getUniqueInfoFormats:G,getSupportedFormat:z}},490079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),l=r(727418),u=r.n(l),c=r(675263),s=r.n(c),p=r(124852),f=r.n(p),y=r(233044),d=r(805346);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function h(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(c,e);var t,r,n,i,l=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(n);if(i){var r=E(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return h(this,e)});function c(){var e;b(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(O(e=l.call.apply(l,[this].concat(r))),"state",{error:!1}),P(O(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),P(O(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var r=e.layer,n=t||a()(r.url)&&Math.floor(Math.random()*r.url.length),i=a()(r.url)?r.url[n]:r.url.replace(/[?].*$/g,""),l=o().parse(i),c=(0,y.clearNilValuesForParams)(r.params),s=u()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},r.legendParams||{},e.language&&r.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,y.addAuthenticationToSLD)(c||{},e.layer),c&&c.SLD_BODY?{SLD_BODY:c.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,y.addAuthenticationParameter)(i,s),o().format({host:l.host,protocol:l.protocol,pathname:l.pathname,query:s})}return""})),P(O(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=c,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?f().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):f().createElement(d.Z,{msgId:"layerProperties.legenderror"})}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(f().Component);P(w,"propTypes",{layer:s().object,legendHeight:s().number,legendWidth:s().number,legendOptions:s().string,style:s().object,currentZoomLvl:s().number,scales:s().array,scaleDependent:s().bool,language:s().string}),P(w,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const j=w},710615:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),l=r(480681),u=r(807654),c=r.n(u),s=r(414293),p=r.n(s),f=r(743129),y=r(993451),d=r(80717),m=r(145869),b=r(680833),v=r(805346),g=r(552259),h=["labelId"];function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=(0,y.Z)(["placeholder","noResultsText"])(f.ZP.Creatable),C=(0,y.Z)(["placeholder","noResultsText"])(f.ZP);function A(e){var t,r=e.label,n=e.showArrow,i=e.limitsType;return o().createElement("span",null,(t=r,"scale"===i?"1 : "+Math.round(t):t),n&&o().createElement(o().Fragment,null," ",o().createElement(l.Glyphicon,{glyph:"arrow-left"})))}function R(e){var t=e.id,r=e.value,n=e.placeholderId,i=e.noResultsTextId,a=e.createTextId,l=e.options,u=e.isValidNewOption,s=void 0===u?function(){return!0}:u,p=e.onChange,f=void 0===p?function(){}:p,y=e.disabled,d=e.loading;return o().createElement(L,{inputProps:{id:t},placeholder:n,noResultsText:i,value:r,isLoading:d,options:l,disabled:y,optionRenderer:A,valueRenderer:A,promptTextCreator:function(e){return o().createElement(v.Z,{msgId:a,msgParams:{label:e}})},isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!c()(t)&&s(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);f(c()(t)?void 0:j(j({},e),{},{value:t}))}})}function x(e){var t=e.title,r=e.layer,i=e.zoom,a=e.projection,u=e.resolutions,c=void 0===u?(0,g.getResolutions)():u,s=e.defaultLimitsType,f=e.limitsTypesOptions,y=e.dpi,w=e.onChange,S=O((0,n.useState)(s||f[0].value),2),L=S[0],A=S[1],x=r.maxResolution,T=r.minResolution,D=r.disableResolutionLimits,I=(0,g.dpi2dpu)(y,a);function _(e,t){var r,n=e.map((function(e){return e[L]}));return p()(t[L])||-1!==n.indexOf(t[L])?e:[t].concat((r=e,function(e){if(Array.isArray(e))return P(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||E(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e[L]>t[L]?-1:1}))}function k(e,t){return(0,g.getResolutionObject)(e,t,{projection:a,resolutions:c})}var Z=O((0,n.useState)([]),2),N=Z[0],M=Z[1],F=O((0,n.useState)(x&&{resolution:x,scale:x*I,zoom:(0,g.getZoomFromResolution)(x,c)}),2),B=F[0],G=F[1],z=O((0,n.useState)(T&&{resolution:T,scale:T*I,zoom:(0,g.getZoomFromResolution)(T,c)}),2),U=z[0],q=z[1],Y=O((0,n.useState)(!1),2),$=Y[0],W=Y[1],H=O((0,n.useState)(),2),V=H[0],Q=H[1],K=O((0,n.useState)(),2),X=K[0],J=K[1],ee=(0,n.useRef)();function te(){J(void 0),Q(void 0)}function re(e,t){var r,n,o=(r=e,n=t,p()(r)&&p()(n)?"layerProperties.visibilityLimits.serverValuesUpdateUndefined":p()(r)&&!p()(n)?"layerProperties.visibilityLimits.serverValuesUpdateMinScale":!p()(r)&&p()(n)?"layerProperties.visibilityLimits.serverValuesUpdateMaxScale":"layerProperties.visibilityLimits.serverValuesUpdate");Q(o)}function ne(e,t){e<t&&J("layerProperties.visibilityLimits.rangeError")}(0,n.useEffect)((function(){return ee.current=!0,function(){ee.current=!1}}),[]);var oe=c.join(",");return(0,n.useEffect)((function(){var e=T&&{resolution:T,scale:T*I,zoom:(0,g.getZoomFromResolution)(T,c)},t=x&&{resolution:x,scale:x*I,zoom:(0,g.getZoomFromResolution)(x,c)},r=[e,t].filter((function(e){return e})).reduce(_,c.map((function(e,t){return{resolution:e,scale:e*I,zoom:t}})));G(t),q(e),M(r),te()}),[I,oe]),(0,n.useEffect)((function(){!ee.current||p()(x)&&p()(T)||(re(x,T),ne(x,T))}),[ee]),o().createElement("div",{className:"ms-visibility-limits-form"},o().createElement("div",{className:"ms-visibility-limits-form-title",style:{display:"flex",alignItems:"center"}},o().createElement("div",{style:{flex:1}},t),o().createElement(d.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"refresh",disabled:!(!D&&!$),visible:"wms"===r.type,onClick:function(){"wms"!==r.type||$||(W(!0),te(),(0,b.kB)(r).toPromise().then((function(e){if(ee.current){var t,r,n=e.maxScaleDenominator,o=e.minScaleDenominator,i=!p()(n)&&k(n,"scale"),a=!p()(o)&&k(o,"scale");re(n,o),a&&q(a),i&&G(i),w(j(j({},i&&{maxResolution:i.resolution}),a&&{minResolution:a.resolution}));var l=(null===(t=a||U)||void 0===t?void 0:t.resolution)||-1/0;ne((null===(r=i||B)||void 0===r?void 0:r.resolution)||1/0,l),W(!1)}})).catch((function(){ee.current&&(W(!1),J("layerProperties.visibilityLimits.serverValuesError"))})))},tooltipId:"layerProperties.visibilityLimits.updateWMSCapabilities"},{Element:function(){return o().createElement(m.Z,{checked:!D,onClick:function(){w({disableResolutionLimits:!D}),te()}})}}]})),o().createElement("label",{htmlFor:"ms-visibility-limits-max"},o().createElement(v.Z,{msgId:"layerProperties.visibilityLimits.maxValue"})),o().createElement(R,{id:"ms-visibility-limits-max",value:(null==B?void 0:B[L])&&{value:B[L],label:B[L],zoom:B.zoom,limitsType:L},placeholderId:"layerProperties.visibilityLimits.maxValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:$,isValidNewOption:function(e){return e>=((null==U?void 0:U[L])||0)},options:N.map((function(e){return j(j({},e),{},{value:e[L]+(e.delta||0),label:e[L],showArrow:e.zoom===i,disabled:!p()(null==U?void 0:U[L])&&e[L]<=U[L],limitsType:L})})),disabled:D||$,onChange:function(e){var t=void 0===e.value?{}:p()(e.zoom)?k(e.value,L):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(w({maxResolution:t.resolution}),G(t),void 0!==e.value&&p()(e.zoom)){var r=_(N,t);M(r)}te()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-min"},o().createElement(v.Z,{msgId:"layerProperties.visibilityLimits.minValue"})),o().createElement(R,{id:"ms-visibility-limits-min",value:(null==U?void 0:U[L])&&{value:U[L],label:U[L],zoom:U.zoom,limitsType:L},placeholderId:"layerProperties.visibilityLimits.minValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:$,isValidNewOption:function(e){return e<=((null==B?void 0:B[L])||1/0)},options:N.map((function(e){return j(j({},e),{},{value:e[L],label:e[L],showArrow:e.zoom===i,disabled:!p()(null==B?void 0:B[L])&&e[L]>=B[L],limitsType:L})})),disabled:D||$,onChange:function(e){var t=void 0===e.value?{}:p()(e.zoom)?k(e.value,L):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(w({minResolution:t.resolution}),q(t),void 0!==e.value&&p()(e.zoom)){var r=_(N,t);M(r)}te()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-type"},o().createElement(v.Z,{msgId:"layerProperties.visibilityLimits.type"})),o().createElement(C,{inputProps:{id:"ms-visibility-limits-type"},value:L,clearable:!1,options:f.map((function(e){var t=e.labelId;return j(j({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,h)),t&&{label:o().createElement(v.Z,{msgId:t})})})),disabled:D||$,onChange:function(e){var t=e.value;A(t),te()}}),V&&o().createElement(l.Alert,{bsStyle:"success"},o().createElement(v.Z,{msgId:V})),X&&o().createElement(l.Alert,{bsStyle:"danger"},o().createElement(v.Z,{msgId:X})))}x.propTypes={layer:a().object,zoom:a().number,onChange:a().func,resolutions:a().array,limitsTypesOptions:a().array,projection:a().string,dpi:a().number,defaultLimitsType:a().string},x.defaultProps={layer:{},onChange:function(){},limitsTypesOptions:[{value:"scale",labelId:"layerProperties.visibilityLimits.scale"},{value:"resolution",labelId:"layerProperties.visibilityLimits.resolution"}],dpi:g.DEFAULT_SCREEN_DPI};const T=x},352595:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(461365).Z)(r(480681).Overlay)},993451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(86638),o=r(675263),i=r.n(o),a=r(984596),l=r.n(a),u=r(701469),c=r.n(u),s=r(414293),p=r.n(s),f=r(747037),y=r.n(f),d=r(867076),m=["messages"];function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(t))return t.map((function(o){var i=(0,n.S$)(e,o[r]||y()(o)&&o||"");return g(g({},o),{},h({},r,p()(i)?t:i))}));var o=(0,n.S$)(e,t);return p()(o)?t:o},E=function(e,t,r){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return g(g({},n),{},h({},o,e[o]&&O(t,e[o],r)))}};const P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,d.compose)((0,d.getContext)({messages:i().object}),(0,d.mapProps)((function(r){var n=r.messages,o=b(r,m);return g(g({},o),l()(e).reduce(E(o,n,t),{}))})))}},145869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(i){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function l(){return u(this,l),a.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this;return o().createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},o().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),o().createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component);y(d,"propTypes",{disabled:a().bool,className:a().string,checked:a().bool,onChange:a().func,onClick:a().func}),y(d,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}});const m=d},202576:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(124852),o=r.n(n),i=r(180307),a=r.n(i),l=r(675263),u=r.n(l),c=r(480681),s=r(352595),p=r(950966);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(u,e);var t,r,n,i,l=(n=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(i){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function u(){return y(this,u),l.apply(this,arguments)}return t=u,(r=[{key:"renderPopover",value:function(){return o().createElement(c.Popover,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title},this.props.text)}},{key:"renderContent",value:function(){var e=this;return o().createElement(c.Glyphicon,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return o().createElement("span",{className:"mapstore-info-popover"},this.props.trigger?o().createElement(p.Z,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),o().createElement(s.Z,{placement:this.props.placement,show:!0,target:function(){return a().findDOMNode(e.target)}},this.renderPopover())])}}])&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(o().Component);g(h,"propTypes",{id:u().string,title:u().string,text:u().string,glyph:u().string,bsStyle:u().string,placement:u().string,left:u().number,top:u().number,trigger:u().oneOfType([u().array,u().bool])}),g(h,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]});const O=h},680833:(e,t,r)=>{"use strict";r.d(t,{kB:()=>b,HI:()=>v});var n=r(472500),o=r.n(n),i=(r(91175),r(490173)),a=r(49977),l=r(501157),u=r(375875),c=r.n(u),s=(r(986267),r(624262)),p=r(510284),f=r(233044);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.default;var b=function(e){return a.Observable.defer((function(){return l.ZP.getCapabilities((0,s.Fh)(e))})).let(p.oB).map((function(t){return l.ZP.parseLayerCapabilities(t,e)}))},v=function(e){return function(e){return a.Observable.defer((function(){return c().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=o().parse(n.url||i,!0);return o().format(d(d({},a),{},{search:void 0,query:d(d({},a.query),{},{service:"WMS",version:"1.1.1",layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(p.oB)}(e).map((function(e){var t=e.data,r=void 0===t?{}:t;return r&&r.layerDescriptions[0]})).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.owsURL;return d(d({},e),{},{params:{},search:r?{type:"wfs",url:(0,f.cleanAuthParamsFromURL)(r)}:void 0})}))}},55105:(e,t,r)=>{"use strict";r.d(t,{Ss:()=>s,Nr:()=>p,ic:()=>f,Jz:()=>d,VM:()=>m,CF:()=>b});var n=r(91175),o=r.n(n),i=r(800827),a=r(552259);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},p=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){return u(u({},e),{},c({},t,r[t]))}),{})||{}},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=s(e),n=!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})));return n},d=function(e){return y(e,[{key:"right",value:658}])},m=function(e){return y(e,[{key:"bottom",value:30,type:"not"}])},b=function(e){var t=(0,i.Od)(e),r=p(e);return r&&t&&t.size&&{left:(0,a.parseLayoutValue)(r.left,t.size.width),bottom:(0,a.parseLayoutValue)(r.bottom,t.size.height),right:(0,a.parseLayoutValue)(r.right,t.size.width),top:(0,a.parseLayoutValue)(r.top,t.size.height)}}},510284:(e,t,r)=>{"use strict";r.d(t,{sw:()=>v,oB:()=>g});var n=r(49977),o=r.n(n),i=r(227361),a=r.n(i),l=r(505055),u=r(507526);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){var t="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return f(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},p(e)}function f(e,t,r){return f=y()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&d(o,r.prototype),o},f.apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}r(849843);var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,e);var t,r,n,o=(t=i,r=y(),function(){var e,n=m(t);if(r){var o=m(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e)).name="OGCError",r.code=t,r}return n=i,Object.defineProperty(n,"prototype",{writable:!1}),n}(p(Error)),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[u.stripPrefix],explicitArray:!1,mergeAttrs:!0};return o().Observable.bindNodeCallback((function(e,r){return(0,l.parseString)(e,t,r)}))(e)},g=function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?o().Observable.bindNodeCallback((function(e,t){return(0,l.parseString)(e,{tagNameProcessors:[u.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data).map((function(e){var t=a()(e,"ExceptionReport.Exception.ExceptionText");throw new b(t||"Undefined OGC Service Error",a()(e,"ExceptionReport.Exception.exceptionCode"))})):o().Observable.of(e)}))}},632247:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(124852);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const i=function(e,t){var r,i,a=function(){if("undefined"==typeof window)return t;try{var r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.log("Error to get item key “".concat(e,"”:"),r),t}},l=(r=(0,n.useState)(a),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(r,i)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],c=l[1];return(0,n.useEffect)((function(){c(a())}),[]),(0,n.useEffect)((function(){var e=function(){c(a())};return window.addEventListener("localStorage",e),function(){window.removeEventListener("localStorage",e)}}),[]),[u,function(t){try{var r=t instanceof Function?t(u):t;c(r),window.localStorage.setItem(e,JSON.stringify(r)),window.dispatchEvent(new Event("localStorage"))}catch(t){console.log("Error “".concat(e,"”:"),t)}}]}},678833:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(124852),o=r.n(n),i=r(598611),a=r.n(i),l=r(322843);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const y=function(e){var t=e.items,r=e.loadedPlugins,i=e.loaderComponent,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];function s(e){return p(e.items).sort((function(e,t){return e.position>t.position?1:-1})).map((function(t){return c(c({},t),{},{Component:t.Component||(0,l.KB)(t,e.loadedPlugins,e.loaderComponent||o().createElement("div",null))})}))||[]}var f=(0,n.useRef)({});f.current={items:t,loadedPlugins:r,loaderComponent:i};var y=a()(Object.keys(r||{}),","),d=(0,n.useMemo)((function(){return s(f.current)}),[y].concat(p(u)));return d}},720432:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_e});var n=r(124852),o=r.n(n),i=r(322843),a=r(171703),l=r(22222),u=r(441609),c=r.n(u),s=r(480681),p=r(303744),f=r(580416),y=r(675110),d=r(800827),m=r(308316),b=r(805346),v=r(55105),g=r(359112),h=r(675263),O=r.n(h),E=r(747037),P=r.n(E),w=r(513218),j=r.n(w),S=r(545578),L=r.n(S),C=r(743129),A=r(86638);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e){var t,r,n,i,a=e.node,l=e.allowNew,u=void 0!==l&&l,c=e.groups,s=e.currentLocale,p=e.onChange,f=u?C.ZP.Creatable:C.ZP,y=function(e){return(0,g.YQ)(e,s)},d=function(e,t){return(0,g.fu)(y(e),t)},m=c&&(0,g.yQ)(c),b=(t=c&&(0,g.yQ)(c,0,!0),r=(null==a?void 0:a.group)||"Default",n=t.find((function(e){return e.id===r}))||{},y(n.title));return o().createElement(f,{clearable:!1,key:"group-dropdown",options:L()([{value:"Default",label:"Default"}].concat((i=(m||(null==a?void 0:a.group)||[]).map((function(e){return j()(e)?x(x({},e),{},{label:d(e.label,m)}):{label:d(e,m),value:e}})),function(e){if(Array.isArray(e))return D(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),"value"),isValidNewOption:g.gP,newOptionCreator:function(e){var t,r=e.valueKey,n=e.label,o=e.labelKey;return T(t={},r,n.replace(/\./g,"${dot}").replace(/\//g,".")),T(t,o,n),T(t,"className","Select-create-option-placeholder"),t},value:{label:d(b,m),value:b},placeholder:d(b,m),onChange:function(e){var t=e.value;return p({group:t||"Default"})}})}function _(e,t){var r,n,i=e.node,a=void 0===i?{}:i,l=e.nodeType,u=e.showTooltipOptions,c=void 0===u||u,p=e.onChange,f=void 0===p?function(){}:p,y=e.groups,d=e.currentLocale,m=[{value:"title",label:(0,A.S$)(t.messages,"layerProperties.tooltip.title")},{value:"description",label:(0,A.S$)(t.messages,"layerProperties.tooltip.description")},{value:"both",label:(0,A.S$)(t.messages,"layerProperties.tooltip.both")},{value:"none",label:(0,A.S$)(t.messages,"layerProperties.tooltip.none")}],v=[{value:"top",label:(0,A.S$)(t.messages,"layerProperties.tooltip.top")},{value:"right",label:(0,A.S$)(t.messages,"layerProperties.tooltip.right")},{value:"bottom",label:(0,A.S$)(t.messages,"layerProperties.tooltip.bottom")}],h=a||{},O=h.title,E=h.description,w=void 0===E?"":E,S=h.tooltipOptions,L=void 0===S?"title":S,R=h.tooltipPlacement,D=void 0===R?"top":R,_=P()(O)?O:null!==(r=null!==(n=(0,g.YQ)(O,d))&&void 0!==n?n:null==O?void 0:O.default)&&void 0!==r?r:"";return o().createElement(o().Fragment,null,o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"layerProperties.title"})),o().createElement(s.FormControl,{defaultValue:_,key:"title",type:"text",onBlur:function(e,t){var r="default"===e&&P()(a.title)?t.target.value:x(x({},j()(a.title)?a.title:{default:a.title||""}),{},T({},e,t.target.value));f({title:r})}.bind(null,"default")})),o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"layerProperties.description"})),o().createElement(s.FormControl,{defaultValue:w,key:"description",type:"text",onBlur:function(e){return f({description:e.target.value})}})),"layer"===l?o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"layerProperties.group"})),o().createElement(I,{node:a,onChange:f,groups:y,currentLocale:d})):null,c&&o().createElement(o().Fragment,null,o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"gnviewer.nodeTooltipContent"})),o().createElement(C.ZP,{clearable:!1,key:"tooltips-dropdown",options:m,value:m.find((function(e){return e.value===L})),onChange:function(e){var t=e.value;return f({tooltipOptions:t||"title"})}})),o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"gnviewer.nodeTooltipPlacement"})),o().createElement(C.ZP,{clearable:!1,key:"tooltips-placement-dropdown",options:v,value:v.find((function(e){return e.value===D})),onChange:function(e){var t=e.value;return f({tooltipPlacement:t||"top"})}}))))}_.contextTypes={messages:O().object};const k=_;function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const N=function(e){var t,r,i=e.expanded,a=e.title,l=e.children,u=e.onChange,c=(t=(0,n.useState)(i),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=c[0],f=c[1];return(0,n.useEffect)((function(){u&&u(p)}),[p]),o().createElement(o().Fragment,null,o().createElement("div",{className:"gn-layer-settings-section-title",onClick:function(){return f(!p)}},o().createElement(s.Glyphicon,{glyph:"chevron-".concat(p?"down":"right")})," ",a),p?l:null,o().createElement("hr",null))};var M=r(632247);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var U=r(974691),q=r.n(U),Y=r(710615),$=r(794192);const W=function(e){var t=e.node,r=void 0===t?{}:t,n=e.resolutions,i=e.projection,a=e.onChange,l=void 0===a?function(){}:a,u=e.zoom,c=r.opacity,p=void 0===c?1:c;return o().createElement(o().Fragment,null,o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"opacity"})," %"),o().createElement($.Z,{type:"number",min:0,max:100,name:"opacity",value:100*p,onChange:function(e){return l({opacity:q()(Math.round(e),0,100)/100})}})),o().createElement(s.FormGroup,null,o().createElement(Y.Z,{title:o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return l(e)},projection:i,resolutions:n,zoom:u})))};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var X=r(281763),J=r.n(X),ee=r(202576),te=r(501157),re=r(737275),ne=r(490079);function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ce=r(535721);function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},se.apply(this,arguments)}function pe(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){var t=e.canEdit,r=e.label,n=e.style,i=e.value,a=e.buttons,l=void 0===a?[]:a;return o().createElement("div",{style:de({display:"flex",width:"100%",alignItems:"center"},n)},o().createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis"}},r),l.map((function(e){var r=e.Component,n=e.name;return o().createElement(r,{key:n,status:"LAYER",btnProps:{variant:"default",className:"",size:""},hide:!t,selectedStyle:i})})))}var ve=r(678833),ge=r(362520),he=r(226735);function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const we={gnUpdateLayerSettingsMapLayout:function(e,t){return e.ofType(ge.dn,f.cI).filter((function(){var e,r,n;return null===(e=t.getState())||void 0===e||null===(r=e.layers)||void 0===r||null===(n=r.settings)||void 0===n?void 0:n.expanded})).filter((function(e){return e.source!==he.O.PANEL})).map((function(e){var r=e.layout,n=(0,re.u8)("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}},o=(0,ge.FV)(Ee(Ee(Ee({},(0,v.Ss)(t.getState())),r),{},{left:n.left.sm,boundingMapRect:Ee(Ee({},(null==r?void 0:r.boundingMapRect)||{}),{},{left:n.left.sm})}));return Ee(Ee({},o),{},{source:he.O.PANEL})}))}};var je=r(815135),Se=["node","onChange","style","selectedNodes","onClose","items"];function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ae.apply(this,arguments)}var Re=(0,je.Z)(p.Z),xe={group:function(e){var t,r,n=e.node,i=e.onChange,a=e.groups,l=e.currentLocale,u=(t=(0,M.Z)("settings-section",{general:!0}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],s=u[1];return o().createElement(N,{title:o().createElement(b.Z,{msgId:"gnviewer.generalSettings"}),expanded:null==c?void 0:c.general,onChange:function(e,t){s(B(B({},c),{},G({},e,t)))}.bind(null,"general")},o().createElement(k,{node:n,onChange:i,nodeType:"group",groups:a,currentLocale:l}))},baseLayer:function(e){var t,r,n=e.node,i=void 0===n?{}:n,a=e.resolutions,l=e.projection,u=e.onChange,c=void 0===u?function(){}:u,s=e.zoom,p=e.groups,f=void 0===p?[]:p,y=e.currentLocale,d=(t=(0,M.Z)("settings-section",{general:!0,visibility:!1}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=d[0],v=d[1];function g(e,t){v(V(V({},m),{},Q({},e,t)))}return o().createElement(o().Fragment,null,o().createElement(N,{title:o().createElement(b.Z,{msgId:"gnviewer.generalSettings"}),expanded:null==m?void 0:m.general,onChange:g.bind(null,"general")},o().createElement(k,{node:i,onChange:c,nodeType:"layer",groups:f,currentLocale:y})),o().createElement(N,{title:o().createElement(b.Z,{msgId:"gnviewer.visibilitySettings"}),expanded:null==m?void 0:m.visibility,onChange:g.bind(null,"visibility")},o().createElement(W,{node:i,resolutions:a,projection:l,onChange:c,zoom:s})))},wms:function(e){var t=e.node,r=void 0===t?{}:t,i=e.resolutions,a=e.projection,l=e.onChange,u=void 0===l?function(){}:l,c=e.zoom,f=e.formats,y=e.isLocalizedLayerStylesEnabled,d=e.currentLocaleLanguage,m=e.groups,v=void 0===m?[]:m,g=e.currentLocale,h=e.styleSelectorComponent,O=r.singleTile,E=void 0!==O&&O,P=r.tiled,w=void 0===P||P,j=r.transparent,S=void 0===j||j,L=r.localizedLayerStyles,A=void 0!==L&&L,R=r.imageFormats,x=r.format,T=void 0===x?(0,re.u8)("defaultLayerFormat")||"image/png":x,D=r.url,I=r.legendOptions,_=void 0===I?{legendWidth:12,legendHeight:12}:I,Z=le((0,n.useState)(),2),F=Z[0],B=Z[1],G=le((0,M.Z)("settings-section",{general:!0,visibility:!1,style:!1,tiling:!1}),2),z=G[0],U=G[1];function Y(e,t){U(ie(ie({},z),{},ae({},e,t)))}var H=(0,n.useRef)();function V(e){return _&&_[e]&&parseInt(_[e],10)<12?"error":null}function Q(){return"error"!==V("legendWidth")&&"error"!==V("legendHeight")&&J()(_.legendHeight)&&J()(_.legendWidth)}function K(e){var t=e.target.value&&Math.round(e.target.value),r=e.target.name;u({legendOptions:ie(ie({},_),{},ae({},r,t>=12?t:""))})}return(0,n.useEffect)((function(){return H.current=!0,function(){H.current=!1}}),[]),o().createElement(o().Fragment,null,o().createElement(N,{title:o().createElement(b.Z,{msgId:"gnviewer.generalSettings"}),expanded:null==z?void 0:z.general,onChange:Y.bind(null,"general")},o().createElement(k,{node:r,onChange:u,nodeType:"layer",groups:v,currentLocale:g})),o().createElement(N,{title:o().createElement(b.Z,{msgId:"gnviewer.visibilitySettings"}),expanded:null==z?void 0:z.visibility,onChange:Y.bind(null,"visibility")},o().createElement(W,{node:r,resolutions:i,projection:a,onChange:u,zoom:c})),o().createElement(N,{title:o().createElement(b.Z,{msgId:"gnviewer.styleSettings"}),expanded:null==z?void 0:z.style,onChange:Y.bind(null,"style")},h,o().createElement(s.FormGroup,{validationState:V("legendWidth")},o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"gnviewer.legendWidth"})),o().createElement($.Z,{value:_.legendWidth,name:"legendWidth",type:"number",min:12,max:1e3,onChange:function(e){return u({legendOptions:ie(ie({},_),{},{legendWidth:e&&q()(Math.round(e),0,1e3)})})},onKeyPress:function(e){return"-"===e.key&&e.preventDefault()},onBlur:K})),o().createElement(s.FormGroup,{validationState:V("legendHeight")},o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"gnviewer.legendHeight"})),o().createElement($.Z,{value:_.legendHeight,name:"legendHeight",type:"number",min:12,max:1e3,onChange:function(e){return u({legendOptions:ie(ie({},_),{},{legendHeight:e&&q()(Math.round(e),0,1e3)})})},onKeyPress:function(e){return"-"===e.key&&e.preventDefault()},onBlur:K})),o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"gnviewer.legendPreview"})),o().createElement("div",{style:{width:"100%",overflow:"auto"}},o().createElement(ne.Z,{style:{maxWidth:"none"},layer:r,legendHeight:Q()&&_.legendHeight||void 0,legendWidth:Q()&&_.legendWidth||void 0,language:y?d:void 0})))),o().createElement(N,{title:o().createElement(b.Z,{msgId:"gnviewer.tilingSettings"}),expanded:null==z?void 0:z.tiling,onChange:Y.bind(null,"tiling")},o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"layerProperties.format.title"})),o().createElement("div",{className:"ms-format-container"},o().createElement(C.ZP,{className:"format-select",key:"format-dropdown",clearable:!1,noResultsText:o().createElement(b.Z,{msgId:F?"layerProperties.format.loading":"layerProperties.format.noOption"}),isLoading:!!F,options:F?[]:(null==f?void 0:f.map((function(e){return{value:e,label:e}})))||R||te.QQ,value:T,onChange:function(e){var t=e.value;return u({format:t})}}),o().createElement(p.Z,{tooltipId:"layerProperties.format.refresh",className:"square-button-md no-border format-refresh",onClick:function(){return e=D,void(F||(B(!0),(0,te.T6)(e).then((function(e){H.current&&(u({imageFormats:e}),B(!1))})).catch((function(){H.current&&B(!1)}))));var e},key:"format-refresh"},o().createElement(s.Glyphicon,{glyph:"refresh"})))),o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,"Size"),o().createElement(C.ZP,{key:"wsm-layersize-dropdown",clearable:!1,options:[{value:256,label:256},{value:512,label:512}],value:(null==r?void 0:r.tileSize)||256,onChange:function(e){var t=e.value;return u({tileSize:t})}})),o().createElement(s.FormGroup,null,o().createElement(s.Checkbox,{key:"transparent",checked:S,onChange:function(e){return u({transparent:e.target.checked})}},o().createElement(b.Z,{msgId:"layerProperties.transparent"})),o().createElement(s.Checkbox,{value:"tiled",key:"tiled",disabled:!!E,onChange:function(e){return u({tiled:e.target.checked})},checked:w},o().createElement(b.Z,{msgId:"layerProperties.cached"})),o().createElement(s.Checkbox,{key:"singleTile",value:"singleTile",checked:E,onChange:function(e){return u({singleTile:e.target.checked})}},o().createElement(b.Z,{msgId:"layerProperties.singleTile"})),y?o().createElement(s.Checkbox,{key:"localizedLayerStyles",value:"localizedLayerStyles","data-qa":"display-lacalized-layer-styles-option",checked:A,onChange:function(e){return u({localizedLayerStyles:e.target.checked})}},o().createElement(b.Z,{msgId:"layerProperties.enableLocalizedLayerStyles.label"})," ",o().createElement(ee.Z,{text:o().createElement(b.Z,{msgId:"layerProperties.enableLocalizedLayerStyles.tooltip"})})):null)))}},Te=(0,a.connect)((0,l.P1)([],(function(){return{}})),{})((function(e){var t,r,n,i,a,l,u,c,p,f,y,d,m,v,g,h=e.node,O=e.onChange,E=e.buttons,P=(d=((null==(r=h)||null===(n=r.extendedParams)||void 0===n||null===(i=n.mapLayer)||void 0===i||null===(a=i.extra_params)||void 0===a?void 0:a.styles)||[]).map((function(e){return de(de({},e),{},{canEdit:!0})})),m=(null==r||null===(l=r.extendedParams)||void 0===l||null===(u=l.mapLayer)||void 0===u||null===(c=u.dataset)||void 0===c?void 0:c.styles)||[],v=null==r||null===(p=r.extendedParams)||void 0===p||null===(f=p.mapLayer)||void 0===f||null===(y=f.dataset)||void 0===y?void 0:y.default_style,g=(null==r?void 0:r.availableStyles)||[],(0,ce.CF)([].concat(pe(v?[v]:[]),pe(m),pe(d),pe(g))).map((function(e){return{value:e.name,label:e.title,canEdit:e.canEdit}}))),w=P.find((function(e){return e.value===h.style}))||{};return null!=h&&null!==(t=h.extendedParams)&&void 0!==t&&t.mapLayer?o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,o().createElement(b.Z,{msgId:"gnviewer.style"})),o().createElement(C.ZP,{key:"style-selector",clearable:!1,options:P.map((function(e){var t=e.value,r=e.label,n=e.canEdit;return{value:t,label:o().createElement(be,{value:t,label:r,canEdit:n,buttons:E})}})),value:{value:h.style,label:o().createElement(be,se({},w,{style:{width:"calc(100% - 16px)"},buttons:E}))},onChange:function(e){var t=e.value;return O({style:t})}})):null})),De=(0,a.connect)((0,l.P1)([y.Ci,d.Od,y.Bt,m.Pz,m.KV,function(e){return(0,v.ic)(e,{height:!0})},y.Ci],(function(e,t,r,n,o,i){return{node:e,zoom:null==t?void 0:t.zoom,projection:null==t?void 0:t.projection,groups:r,currentLocale:n,currentLocaleLanguage:o,style:i}})),{onChange:f.tV,onClose:f.sF})((function(e,t){var r=e.node,n=e.onChange,i=e.style,a=(e.selectedNodes,e.onClose),l=e.items,u=void 0===l?[]:l,p=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Se),f=t.loadedPlugins,y=(0,ve.Z)({items:u,loadedPlugins:f});if(c()(r))return null;var d=!(null==r||!r.nodes),m=d?xe.group:xe[null==r?void 0:r.type]||xe.baseLayer,b=(null==r?void 0:r.title)&&(0,g.YQ)(r.title,p.currentLocale)||r.name;function v(e){n(r.id,d?"groups":"layers",e)}return o().createElement("div",{className:"gn-layer-settings",style:i},o().createElement("div",{className:"gn-layer-settings-head"},o().createElement("div",{className:"gn-layer-settings-title"},b),o().createElement(Re,{className:"square-button",onClick:function(){return a()}},o().createElement(s.Glyphicon,{glyph:"1-close"}))),o().createElement("div",{className:"gn-layer-settings-body"},o().createElement(m,Ae({},p,{node:r,onChange:v,styleSelectorComponent:o().createElement(Te,Ae({},p,{node:r,onChange:v,buttons:(y||[]).filter((function(e){return"style-button"===e.target}))}))}))))})),Ie=(0,a.connect)((0,l.P1)([],(function(){return{}})))((function(e){var t=e.status,r=e.onToolsActions,n=e.selectedLayers,i=e.selectedGroups;return"LAYER"!==t&&"GROUP"!==t?null:o().createElement(Re,{variant:"primary",className:"square-button-md",onClick:function(){"LAYER"===t||"LAYER_LOAD_ERROR"===t?r.onSettings(n[0].id,"layers",{opacity:parseFloat(void 0!==n[0].opacity?n[0].opacity:1)}):"GROUP"===t&&r.onSettings(i[i.length-1].id,"groups",{})},tooltipId:o().createElement(b.Z,{msgId:"toc.toolLayerSettingsTooltip"})},o().createElement(s.Glyphicon,{glyph:"wrench"}))}));const _e=(0,i.rx)("LayerSettings",{component:De,containers:{TOC:{target:"toolbar",Component:Ie}},epics:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},we),reducers:{}})},226735:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var n={PANEL:"PANEL"}},923645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&o[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),t.push(u))}},t}},974691:(e,t,r)=>{var n=r(829750),o=r(14841);e.exports=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=o(r))==r?r:0),void 0!==t&&(t=(t=o(t))==t?t:0),n(o(e),t,r)}},807654:(e,t,r)=>{var n=r(281763);e.exports=function(e){return n(e)&&e!=+e}},819081:(e,t,r)=>{"use strict";e.exports=r(1174)},893379:(e,t,r)=>{"use strict";var n,o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),i=[];function a(e){for(var t=-1,r=0;r<i.length;r++)if(i[r].identifier===e){t=r;break}return t}function l(e,t){for(var r={},n=[],o=0;o<e.length;o++){var l=e[o],u=t.base?l[0]+t.base:l[0],c=r[u]||0,s="".concat(u," ").concat(c);r[u]=c+1;var p=a(s),f={css:l[1],media:l[2],sourceMap:l[3]};-1!==p?(i[p].references++,i[p].updater(f)):i.push({identifier:s,updater:m(f,t),references:1}),n.push(s)}return n}function u(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=r.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,s=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=s(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t,r){var n=r.css,o=r.media,i=r.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var y=null,d=0;function m(e,t){var r,n,o;if(t.singleton){var i=d++;r=y||(y=u(t)),n=p.bind(null,r,i,!1),o=p.bind(null,r,i,!0)}else r=u(t),n=f.bind(null,r,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var o=a(r[n]);i[o].references--}for(var u=l(e,t),c=0;c<r.length;c++){var s=a(r[c]);0===i[s].references&&(i[s].updater(),i.splice(s,1))}r=u}}}}}]);