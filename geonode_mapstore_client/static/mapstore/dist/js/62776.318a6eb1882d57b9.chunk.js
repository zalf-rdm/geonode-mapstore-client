(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62776,82582,64456,65417,42452],{285944:(t,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>x});var i=r(124852),e=r(64678),o=r(922556),a=r(191736),h=r(81090),u=r(960188),s=r(447539),l=r(81332),c=r(369813),f=r.n(c),m=r(65792),p=r.n(m);function d(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=Array(n);r<n;r++)i[r]=t[r];return i}var v=new e.Z;const x=function(t){var n=t.location,r=t.pov,e=t.map,c=t.markerColor,m=void 0===c?"rgba(255, 0, 0, 0.6)":c,x=t.onUpdate,g=void 0===x?function(){}:x,y=(n||{}).latLng||{},M=y.lat,Y=y.lng,_=y.h,X=void 0===_?0:_,B=(r||{}).heading,b=void 0===B?0:B,w=(0,i.useRef)();return(0,i.useEffect)((function(){var t=new h.Z({geometry:new u.Z(0,0)}),n=new a.Z({zIndex:99999,source:new o.Z({features:[t]})});e&&e.addLayer(n),t.setGeometry(null);var r=function(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,e,o,a,h=[],u=!0,s=!1;try{if(o=(r=r.call(t)).next,0===n){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=o.call(r)).done)&&(h.push(i.value),h.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw e}}return h}}(t,n)||function(t,n){if(t){if("string"==typeof t)return d(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(p()(m).rgba(),4),i=r[0],c=r[1],v=r[2],x=r[3];return t.setStyle(new s.ZP({image:new l.Z({color:"rgb(".concat(i,", ").concat(c,", ").concat(v,")"),opacity:x,width:64,height:64,src:f()})})),w.current=t,function(){e&&n&&e.removeLayer(n),w.current=void 0}}),[]),(0,i.useEffect)((function(){if(w.current&&void 0!==M&&void 0!==Y){var t=e.getView().getProjection().getCode(),n=v.readFeature({type:"Feature",properties:{},geometry:{type:"Point",coordinates:[Y,M,X]}},{dataProjection:"EPSG:4326",featureProjection:t});w.current.setGeometry(n.getGeometry()),w.current.getStyle().getImage().setRotation(b*Math.PI/180),g()}}),[M,Y,X,b]),null}},369813:(t,n,r)=>{t.exports=r.p+"marker.svg"},382582:function(t){t.exports=function(){"use strict";function t(t,i,e,o,a){!function t(r,i,e,o,a){for(;o>e;){if(o-e>600){var h=o-e+1,u=i-e+1,s=Math.log(h),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(h-l)/h)*(u-h/2<0?-1:1);t(r,i,Math.max(e,Math.floor(i-u*l/h+c)),Math.min(o,Math.floor(i+(h-u)*l/h+c)),a)}var f=r[i],m=e,p=o;for(n(r,e,i),a(r[o],f)>0&&n(r,e,o);m<p;){for(n(r,m,p),m++,p--;a(r[m],f)<0;)m++;for(;a(r[p],f)>0;)p--}0===a(r[e],f)?n(r,e,p):n(r,++p,o),p<=i&&(e=p+1),i<=p&&(o=p-1)}}(t,i,e||0,o||t.length-1,a||r)}function n(t,n,r){var i=t[n];t[n]=t[r],t[r]=i}function r(t,n){return t<n?-1:t>n?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,n,r){if(!r)return n.indexOf(t);for(var i=0;i<n.length;i++)if(r(t,n[i]))return i;return-1}function o(t,n){a(t,0,t.children.length,n,t)}function a(t,n,r,i,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o=n;o<r;o++){var a=t.children[o];h(e,t.leaf?i(a):a)}return e}function h(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function u(t,n){return t.minX-n.minX}function s(t,n){return t.minY-n.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function m(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(n,r,i,e,o){for(var a=[r,i];a.length;)if(!((i=a.pop())-(r=a.pop())<=e)){var h=r+Math.ceil((i-r)/e/2)*e;t(n,h,r,i,o),a.push(r,h,h,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var n=this.data,r=[];if(!m(t,n))return r;for(var i=this.toBBox,e=[];n;){for(var o=0;o<n.children.length;o++){var a=n.children[o],h=n.leaf?i(a):a;m(t,h)&&(n.leaf?r.push(a):f(t,h)?this._all(a,r):e.push(a))}n=e.pop()}return r},i.prototype.collides=function(t){var n=this.data;if(!m(t,n))return!1;for(var r=[];n;){for(var i=0;i<n.children.length;i++){var e=n.children[i],o=n.leaf?this.toBBox(e):e;if(m(t,o)){if(n.leaf||f(t,o))return!0;r.push(e)}}n=r.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=p([]),this},i.prototype.remove=function(t,n){if(!t)return this;for(var r,i,o,a=this.data,h=this.toBBox(t),u=[],s=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],r=s.pop(),o=!0),a.leaf){var l=e(t,a.children,n);if(-1!==l)return a.children.splice(l,1),u.push(a),this._condense(u),this}o||a.leaf||!f(a,h)?i?(r++,a=i.children[r],o=!1):a=null:(u.push(a),s.push(r),r=0,i=a,a=a.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,n){return t.minX-n.minX},i.prototype.compareMinY=function(t,n){return t.minY-n.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,n){for(var r=[];t;)t.leaf?n.push.apply(n,t.children):r.push.apply(r,t.children),t=r.pop();return n},i.prototype._build=function(t,n,r,i){var e,a=r-n+1,h=this._maxEntries;if(a<=h)return o(e=p(t.slice(n,r+1)),this.toBBox),e;i||(i=Math.ceil(Math.log(a)/Math.log(h)),h=Math.ceil(a/Math.pow(h,i-1))),(e=p([])).leaf=!1,e.height=i;var u=Math.ceil(a/h),s=u*Math.ceil(Math.sqrt(h));d(t,n,r,s,this.compareMinX);for(var l=n;l<=r;l+=s){var c=Math.min(l+s-1,r);d(t,l,c,u,this.compareMinY);for(var f=l;f<=c;f+=u){var m=Math.min(f+u-1,c);e.children.push(this._build(t,f,m,i-1))}}return o(e,this.toBBox),e},i.prototype._chooseSubtree=function(t,n,r,i){for(;i.push(n),!n.leaf&&i.length-1!==r;){for(var e=1/0,o=1/0,a=void 0,h=0;h<n.children.length;h++){var u=n.children[h],s=l(u),c=(f=t,m=u,(Math.max(m.maxX,f.maxX)-Math.min(m.minX,f.minX))*(Math.max(m.maxY,f.maxY)-Math.min(m.minY,f.minY))-s);c<o?(o=c,e=s<e?s:e,a=u):c===o&&s<e&&(e=s,a=u)}n=a||n.children[0]}var f,m;return n},i.prototype._insert=function(t,n,r){var i=r?t:this.toBBox(t),e=[],o=this._chooseSubtree(i,this.data,n,e);for(o.children.push(t),h(o,i);n>=0&&e[n].children.length>this._maxEntries;)this._split(e,n),n--;this._adjustParentBBoxes(i,e,n)},i.prototype._split=function(t,n){var r=t[n],i=r.children.length,e=this._minEntries;this._chooseSplitAxis(r,e,i);var a=this._chooseSplitIndex(r,e,i),h=p(r.children.splice(a,r.children.length-a));h.height=r.height,h.leaf=r.leaf,o(r,this.toBBox),o(h,this.toBBox),n?t[n-1].children.push(h):this._splitRoot(r,h)},i.prototype._splitRoot=function(t,n){this.data=p([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,n,r){for(var i,e,o,h,u,s,c,f=1/0,m=1/0,p=n;p<=r-n;p++){var d=a(t,0,p,this.toBBox),v=a(t,p,r,this.toBBox),x=(e=d,o=v,void 0,void 0,void 0,void 0,h=Math.max(e.minX,o.minX),u=Math.max(e.minY,o.minY),s=Math.min(e.maxX,o.maxX),c=Math.min(e.maxY,o.maxY),Math.max(0,s-h)*Math.max(0,c-u)),g=l(d)+l(v);x<f?(f=x,i=p,m=g<m?g:m):x===f&&g<m&&(m=g,i=p)}return i||r-n},i.prototype._chooseSplitAxis=function(t,n,r){var i=t.leaf?this.compareMinX:u,e=t.leaf?this.compareMinY:s;this._allDistMargin(t,n,r,i)<this._allDistMargin(t,n,r,e)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,n,r,i){t.children.sort(i);for(var e=this.toBBox,o=a(t,0,n,e),u=a(t,r-n,r,e),s=c(o)+c(u),l=n;l<r-n;l++){var f=t.children[l];h(o,t.leaf?e(f):f),s+=c(o)}for(var m=r-n-1;m>=n;m--){var p=t.children[m];h(u,t.leaf?e(p):p),s+=c(u)}return s},i.prototype._adjustParentBBoxes=function(t,n,r){for(var i=r;i>=0;i--)h(n[i],t)},i.prototype._condense=function(t){for(var n=t.length-1,r=void 0;n>=0;n--)0===t[n].children.length?n>0?(r=t[n-1].children).splice(r.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},i}()},531015:(t,n,r)=>{"use strict";function i(t){return Math.pow(t,3)}function e(t){return 1-i(1-t)}function o(t){return 3*t*t-2*t*t*t}function a(t){return t}r.d(n,{YQ:()=>i,Vv:()=>e,rd:()=>o,GE:()=>a})},560828:(t,n,r)=>{"use strict";r.d(n,{h$:()=>e,YP:()=>o,gE:()=>a,Gw:()=>h});var i=r(733983);function e(t){if(void 0!==t)return 0}function o(t){if(void 0!==t)return t}function a(t){const n=2*Math.PI/t;return function(t,r){return r?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function h(t){return t=t||(0,i.Yr)(5),function(n,r){return r?n:void 0!==n?Math.abs(n)<=t?0:n:void 0}}}}]);