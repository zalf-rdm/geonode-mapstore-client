"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[89922,47310],{921914:(e,t,r)=>{r.d(t,{XL:()=>o,km:()=>i,Ih:()=>u,Xw:()=>a,Pn:()=>c,DZ:()=>l,e8:()=>f,E0:()=>y,F9:()=>p,X_:()=>b,pb:()=>s,Re:()=>d,ih:()=>v,xy:()=>m,jL:()=>O,oz:()=>g,ph:()=>E,lF:()=>h,gG:()=>I,cb:()=>T,GI:()=>P,B1:()=>S,fv:()=>_,gc:()=>A,zX:()=>w,ZF:()=>j,Zb:()=>D,DW:()=>F,Xp:()=>N,Fm:()=>R,sV:()=>k,LU:()=>M,XP:()=>C,WU:()=>G,mK:()=>L,g:()=>U,ws:()=>Y,HP:()=>H,aN:()=>q,Pg:()=>W,u0:()=>Z,TM:()=>B,PM:()=>K,lK:()=>z,sv:()=>J,MO:()=>Q,oO:()=>V,Mc:()=>x,Zw:()=>$,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>oe,Qu:()=>ie,kT:()=>ue});var n=r(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",u="EXCEPTIONS_FEATURE_INFO",a="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",l="PURGE_MAPINFO_RESULTS",f="CHANGE_MAPINFO_FORMAT",y="SHOW_MAPINFO_MARKER",p="HIDE_MAPINFO_MARKER",b="SHOW_REVERSE_GEOCODE",s="HIDE_REVERSE_GEOCODE",d="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",m="FEATURE_INFO_CLICK",O="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",g="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",E="TOGGLE_MAPINFO_STATE",h="UPDATE_CENTER_TO_MARKER",I="IDENTIFY:CHANGE_PAGE",T="IDENTIFY:CLOSE_IDENTIFY",P="IDENTIFY:CHANGE_FORMAT",S="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",_="IDENTIFY:EDIT_LAYER_FEATURES",A="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",w="IDENTIFY:SET_MAP_TRIGGER",j="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",D="IDENTIFY:SET_SHOW_IN_MAP_POPUP",F="IDENTIFY:IDENTIFY_IS_MOUNTED",N="IDENTIFY:INIT_PLUGIN";function R(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function k(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function M(){return{type:d}}function C(){return{type:v}}function G(e,t){return{type:c,reqId:e,request:t}}function L(e){return{type:a,enabled:e}}function U(){return{type:l}}function Y(e){return{type:f,infoFormat:e}}function H(){return{type:y}}function q(){return{type:p}}function X(e){return{type:b,reverseGeocodeData:e.data}}function W(e){return function(t){n.Z.reverseGeocode(e).then((function(e){t(X(e))})).catch((function(e){t(X(e))}))}}function Z(){return{type:s}}function B(){return{type:E}}function K(e){return{type:h,status:e}}function z(e,t){return{type:m,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function J(e){return{type:O,point:e}}function Q(e){return{type:g,enabled:e}}function V(e){return{type:I,index:e}}var x=function(){return{type:T}},$=function(e){return{type:P,format:e}},ee=function(e){return{type:S,showCoordinateEditor:e}},te=function(e){return{type:_,layer:e}},re=function(e){return{type:A,query:e}},ne=function(e){return{type:w,trigger:e}},oe=function(e){return{type:D,value:e}},ie=function(e){return{type:F,isMounted:e}},ue=function(e){return{type:N,cfg:e}}},647310:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(375875),o=r.n(n),i=r(472500),u=r.n(i),a=r(727418),c=r.n(a),l={format:"json",bounded:0,polygon_geojson:1,priority:5};const f={geocode:function(e,t){var r=c()({q:e},l,t||{}),n=u().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=c()({lat:e.lat,lon:e.lng},t||{},l),n=u().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},879504:(e,t,r)=>{r.d(t,{Z:()=>P});var n=r(49977),o=r.n(n),i=r(91175),u=r.n(i),a=r(53001),c=r(782904),l=r(931273),f=r(580416),y=r(675110),p=r(31935),b=r(680833),s=r(577215),d=r(603475),v=r(707294);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function O(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return(t=function(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const P={accessMetadataExplorer:function(e){return e.ofType(a.xT).switchMap((function(){return o().Observable.of((0,c.Xg)("metadataexplorer","enabled",!0),(0,a.vw)(!1),(0,l.Dw)("default_map_backgrounds"))}))},addBackgroundPropertiesEpic:function(e){return e.ofType(a.oQ).switchMap((function(e){var t,r=e.modalParams,n=o().Observable.of((0,a.$c)(I(I({},r),{},{loading:!1}))),i=!r.editing&&(null==r||null===(t=r.layer)||void 0===t?void 0:t.remoteTileGrids);return r.layer&&"wms"===r.layer.type?o().Observable.of((0,a.$c)(I(I({},r),{},{loading:!0}))).concat(o().Observable.forkJoin((0,b.kB)(r.layer),i?o().Observable.defer((function(){return(0,d.hn)((0,v.EG)(r.layer),r.layer.name,r.layer)})).catch((function(){return o().Observable.of(null)})):o().Observable.of(null)).switchMap((function(e){var t,n,i=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,n)||g(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=i[0],c=i[1],l=c?(0,s.TS)(c):{};return o().Observable.of((0,a.$c)(I(I({},r),{},{layer:I(I({},r.layer),l),loading:!1,capabilities:(0,s.Br)(u)})))})).catch((function(){return n}))):n}))},setCurrentBackgroundLayerEpic:function(e,t){return e.ofType(a.Wv).switchMap((function(e){var r,n=e.layerId,i=t.getState(),u=(0,y.CA)(i,n);return(r=o().Observable).of.apply(r,O(u&&"background"===u.group?[(0,c.Xg)("backgroundSelector","tempLayer",u),(0,c.Xg)("backgroundSelector","currentLayer",u)]:[]))}))},updateTempBackgroundLayerEpic:function(e,t){return e.ofType(a.R3).take(1).switchMap((function(r){var n=r.id;return e.ofType(f.K$).switchMap((function(){var e,r=t.getState(),i=(0,y.CA)(r,n);return(0,y.DP)(r).id===i.id?(e=o().Observable).of.apply(e,O(i&&"background"===i.group?[(0,c.Xg)("backgroundSelector","tempLayer",i),(0,c.Xg)("backgroundSelector","currentLayer",i)]:[])):o().Observable.of((0,c.Xg)("backgroundSelector","tempLayer",i))}))}))},backgroundAddedEpic:function(e,t){return e.ofType(a.gC).mergeMap((function(e){var r=e.layerId,n=t.getState(),i=(0,y.CA)(n,r);return i?o().Observable.of((0,f.He)(i.id,{visibility:!0}),(0,a.ke)(i.id),(0,a.V3)()):o().Observable.empty()}))},backgroundEditedEpic:function(e,t){return e.ofType(a.dG).mergeMap((function(e){var r=e.layerId,n=t.getState();return(0,y.CA)(n,r)?o().Observable.of((0,a.V3)()):o().Observable.empty()}))},backgroundRemovedEpic:function(e,t){return e.ofType(a.H_).mergeMap((function(e){var r=e.backgroundId,n=t.getState(),i=(0,y.CA)(n,r),c=(0,p.TP)(n)||[],l=(0,y.DP)(n)||{},b=r===l.id?u()(c.filter((function(e){return e.id!==r&&!e.invalid}))):l;return i?o().Observable.of((0,f.ZF)(r,"layers"),(0,f.He)(b.id,{visibility:!0}),(0,a.ke)(b.id)):o().Observable.empty()}))},syncSelectedBackgroundEpic:function(e){return e.ofType(a.K2).take(1).switchMap((function(t){var r=t.id;return e.ofType(f.oE).filter((function(e){return e.layer.id===r})).switchMap((function(){return o().Observable.of((0,a.pW)(r))})).takeUntil(e.ofType(a.gC))}))}}},680833:(e,t,r)=>{r.d(t,{kB:()=>O,HI:()=>g});var n=r(472500),o=r.n(n),i=(r(91175),r(490173)),u=r(49977),a=r(501157),c=r(375875),l=r.n(c),f=(r(307887),r(624262)),y=r(510284),p=r(233044),b=r(611847);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.default;var O=function(e){return u.Observable.defer((function(){return a.ZP.getCapabilities((0,f.Fh)(e))})).let(y.oB).map((function(t){return a.ZP.parseLayerCapabilities(t,e)}))},g=function(e){return function(e){return u.Observable.defer((function(){return l().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,u=o().parse((0,b.eW)(n.url||i),!0);return o().format(v(v({},u),{},{search:void 0,query:v(v({},u.query),{},{service:"WMS",version:a.ID,layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(y.oB)}(e).map((function(e){var t=e.data,r=void 0===t?{}:t;return r&&r.layerDescriptions[0]})).map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return v(v({},e),{},{params:{},search:t?{type:"wfs",url:(0,p.cleanAuthParamsFromURL)(t)}:void 0})}))}},55105:(e,t,r)=>{r.d(t,{Ss:()=>s,Nr:()=>d,QJ:()=>v,ic:()=>m,Jz:()=>O,VM:()=>g,CF:()=>E,Ju:()=>h,Fc:()=>I,gQ:()=>T});var n=r(91175),o=r.n(n),i=r(288306),u=r.n(i),a=r(800827),c=r(552259),l=r(737275);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},d=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},m=u()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=s(e),o=v(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return p(p({},e),{},b({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(s(e))+JSON.stringify(v(e))+JSON.stringify(t)+(r?"_isDock":"")})),O=function(e){var t;return!(null===(t=s(e))||void 0===t||!t.rightPanel)},g=function(e){var t,r=l.ZP.getConfigProp("mapLayout")||c.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=s(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},E=function(e){var t=(0,a.Od)(e),r=d(e);return r&&t&&t.size&&{left:(0,c.pb)(r.left,t.size.width),bottom:(0,c.pb)(r.bottom,t.size.height),right:(0,c.pb)(r.right,t.size.width),top:(0,c.pb)(r.top,t.size.height)}},h=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},I=function(e){return m(e,{height:!0,right:!0},!0)},T=function(e){return m(e,{right:!0},!0)}}}]);