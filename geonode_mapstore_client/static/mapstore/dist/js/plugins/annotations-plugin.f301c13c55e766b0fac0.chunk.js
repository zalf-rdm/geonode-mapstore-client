(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[76759],{881808:(e,t,n)=>{"use strict";n.d(t,{eD:()=>r,AM:()=>o,ok:()=>i,Gg:()=>a,nT:()=>l,TL:()=>s,KS:()=>c,EB:()=>u,DZ:()=>p,Aw:()=>f,V_:()=>d,H0:()=>y,jW:()=>m,JZ:()=>g,fQ:()=>b,HK:()=>h,YO:()=>v,I6:()=>S});var r="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",i="MAP_CONFIG_LOADED",a="MAP_CONFIG_LOAD_ERROR",l="MAP_LOAD_INFO",s="MAP_INFO_LOAD_START",c="MAP_INFO_LOADED",u="MAP_INFO_LOAD_ERROR",p="MAP:MAP_SAVE_ERROR",f="MAP:MAP_SAVED",d="MAP:RESET_MAP_SAVE_ERROR";function y(e,t,n){return{type:i,config:e,legacy:!!t,mapId:t,zoomToExtent:n}}function m(e,t){return{type:a,error:e,mapId:t}}function g(e,t,n,r,i){return{type:o,configName:e,mapId:t,config:n,mapInfo:r,overrideConfig:i}}function b(e,t){return{type:c,mapId:t,info:e}}function h(e,t){return{type:u,mapId:e,error:t}}function v(e){return{type:s,mapId:e}}function S(e){return{type:l,mapId:e}}},497844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(124852),o=n.n(r),i=n(675263),a=n.n(i),l=n(1036),s=n(414293),c=n.n(s),u=n(701469),p=n.n(u);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t=g(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function h(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:String(t)}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o().createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip&&o().createElement(l.Z,{disabled:this.props.disabled,start:[c()(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){p()(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}})||o().createElement(l.Z,{disabled:this.props.disabled,start:[c()(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}])&&d(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);h(S,"propTypes",{opacity:a().number,disabled:a().bool,hideTooltip:a().bool,onChange:a().func}),h(S,"defaultProps",{opacity:1,onChange:function(){},visibility:!0});const w=S},501262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(727418),o=n.n(r),i=n(675263),a=n.n(i),l=n(124852),s=n.n(l),c=n(180307),u=n.n(c),p=n(480681),f=n(38560),d=n(805346),y=n(807472);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function b(e,t,n){return t=v(t),function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function E(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:String(t)}var C=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return E(S(e=b(this,t,[].concat(r))),"setConfirmRef",(function(t){return e.confirm=t,e.confirm})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.focusConfirm&&u().findDOMNode(this.confirm).focus()}},{key:"render",value:function(){return s().createElement(y.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:o()({},this.props.style,{display:this.props.show?"block":"none"})},s().createElement("span",{role:"header"},s().createElement("span",{className:"user-panel-title"},this.props.title),s().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?s().createElement(p.Glyphicon,{glyph:this.props.closeGlyph}):s().createElement("span",null,"Ã—"))),s().createElement("div",{role:"body"},this.props.children),s().createElement("div",{role:"footer"},s().createElement(p.ButtonGroup,null,s().createElement(f.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),s().createElement(f.Z,{onClick:this.props.onClose},this.props.closeText))))}}])&&g(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(s().Component);E(C,"propTypes",{show:a().bool,draggable:a().bool,onClose:a().func,onConfirm:a().func,onSave:a().func,modal:a().bool,closeGlyph:a().string,style:a().object,buttonSize:a().string,inputStyle:a().object,title:a().node,confirmButtonContent:a().node,confirmButtonDisabled:a().bool,closeText:a().node,confirmButtonBSStyle:a().string,focusConfirm:a().bool}),E(C,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:s().createElement(d.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:s().createElement(d.Z,{msgId:"confirm"})||"Confirm",closeText:s().createElement(d.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const P=C},698772:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(893379),o=n.n(r),i=n(172704);o()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;var a=n(675263),l=n.n(a),s=n(124852),c=n.n(s),u=n(480681);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function d(e,t,n){return t=m(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(e,y()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function h(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}var S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return h(g(e=d(this,t,[].concat(r))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),h(g(e),"onClear",(function(){e.props.onFilter("")})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.filterText?c().createElement(u.OverlayTrigger,{placement:"bottom",overlay:c().createElement(u.Tooltip,{id:"mapstore-toc-filter"},this.props.tooltipClear)},c().createElement(u.Glyphicon,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):c().createElement(u.Glyphicon,{className:"text-primary",glyph:"filter"});return c().createElement(u.FormGroup,{className:"mapstore-filter"},c().createElement(u.InputGroup,null,c().createElement(u.FormControl,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),c().createElement(u.InputGroup.Addon,{className:"square-button-md"},this.props.loading?c().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&f(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(c().Component);h(S,"propTypes",{loading:l().bool,filterText:l().string,filterPlaceholder:l().oneOfType([l().object,l().string]),onFilter:l().func,onFocus:l().func,tooltipClear:l().oneOfType([l().object,l().string])}),h(S,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const w=S},82110:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(124852),o=n.n(r),i=n(496259),a=n(532425);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=function(e){var t=e.width,n=e.height,r=e.className,l=void 0===r?"loader-container":r,s=e.contentStyle,u=void 0===s?{}:s;return o().createElement("div",{className:l},o().createElement(i.Z,null,(function(e){var r=e.width,i=void 0===r?200:r,l=e.height,s=void 0===l?200:l,p=t||(s>0?Math.min(i,s):i),f=n||(s>0?Math.min(i,s):i),d=Math.min(p,f);return o().createElement(a.Z,{size:d,style:c({padding:d/10,margin:"auto",display:"flex"},u)})})))}},399534:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(461365),o=n(356936);const i=(0,r.Z)(o.h_)},1036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(618446),o=n.n(r);const i=(0,n(867076).shouldUpdate)((function(e,t){return!o()(e.start,t.start)||e.disabled!==t.disabled}))(n(185552))},638064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(675263),o=n.n(r),i=n(124852),a=n.n(i),l=n(480681),s=n(876424);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function f(e,t,n){return t=y(t),function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:String(t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,n=e.items,r=e.colProps,o=e.onItemClick,i=e.size,c=t||s.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(l.Row,{className:"items-list"},n.map((function(e,t){return a().createElement(l.Col,u({key:e.id||t},r),a().createElement(c,u({onClick:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.apply(void 0,[e].concat(n))},size:i},e)))}))))}}],r&&p(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(a().Component);g(h,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),g(h,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]});const v=h},218291:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(124852),o=n.n(r);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fallback,n=void 0===t?null:t;return function(t){return(0,r.forwardRef)((function(a,l){return void 0===e||e(a)?o().createElement(r.Suspense,{fallback:n},o().createElement(t,i({ref:l},a))):null}))}}},983717:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(124852),o=n.n(r),i=n(675263),a=n.n(i),l=n(480681),s=n(24198),c=n(717621),u=n.n(c),p=n(290702);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t,n,i=e.value,a=e.format,l=e.onChangeColor,c=e.text,y=e.line,m=e.disabled,g=e.pickerProps,b=e.containerNode,h=e.onOpen,v=e.placement,S=(t=(0,r.useState)(),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=S[0],E=S[1],O=u()(i).toString();(0,r.useEffect)((function(){var e=w&&u()(w).toString();e&&O&&O!==e&&E(i)}),[O]);var C=(0,r.useRef)();C.current=function(e){h(e),e||m||!w||l(a?u()(w).toString(a):w)};var P,j,T=m?" ms-disabled":"";return o().createElement(p.Z,{disabled:m,onOpen:function(e){return C.current(e)},placement:v,containerNode:b,content:o().createElement(s.xS,f({},g,{className:"ms-sketch-picker",styles:{picker:{width:200,padding:"10px 10px 0",boxSizing:"initial"}},color:u()(w||i).toRgb(),onChange:function(e){return E(e.rgb)}}))},o().createElement("div",{className:"ms-color-picker".concat(T)},o().createElement("div",{className:"ms-color-picker-swatch",style:(P=w||i||"transparent",j=u()(P).toRgbString(),y?{boxSizing:"border-box",border:"4px solid ".concat(j),backgroundColor:"transparent"}:{color:"transparent"===P?"#000000":u().mostReadable(j,["#000000"],{includeFallbackColors:!0}).toHexString(),backgroundColor:j})},c)))}y.propTypes={value:a().oneOfType([a().string,a().shape({r:a().number,g:a().number,b:a().number,a:a().number})]),format:a().string,onChangeColor:a().func,text:a().string,line:a().bool,disabled:a().bool,pickerProps:a().object,containerNode:a().oneOfType([a().node,a().func]),onOpen:a().function,placement:a().string},y.defaultProps={disabled:!1,line:!1,onChangeColor:function(){},pickerProps:{},onOpen:function(){}};const m=y;function g(e){var t=e.color,n=e.format,r=e.line,i=e.onChangeColor,a=e.disableAlpha,s=e.containerNode,c=e.onOpen,u=e.disabled,p=e.presetColors,f=e.placement;return o().createElement("div",{className:"ms-color-selector"},o().createElement(m,{text:o().createElement(l.Glyphicon,{glyph:"dropper"}),format:n,line:r,value:t,onChangeColor:i,pickerProps:{disableAlpha:a,presetColors:p},containerNode:s,disabled:u,onOpen:c,placement:f}))}g.propTypes={color:a().oneOfType([a().string,a().shape({r:a().number,g:a().number,b:a().number,a:a().number})]),format:a().string,line:a().bool,onChangeColor:a().func,disableAlpha:a().bool,containerNode:a().node,disabled:a().bool,onOpen:a().func,presetColors:a().array,placement:a().string},g.defaultProps={line:!1,onChangeColor:function(){},onOpen:function(){}};const b=g},886056:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(675263),o=n.n(r),i=n(124852),a=n.n(i),l=n(743129),s=n(598611),c=n.n(s);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function d(e,t,n){return t=m(t),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(e,y()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function h(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:String(t)}var S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return h(g(e=d(this,t,[].concat(r))),"styleRenderer",(function(t,n,r){var o=e.props.styleRendererPattern||a().createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},a().createElement("path",{className:"ms-dash-array",strokeWidth:e.props.defaultStrokeWidth,strokeDasharray:r||t.value,d:"M0 12.5, 300 12.5"}));return a().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},o)})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t=this,n=c()(this.props.dashArray||"1 0"," "),r=this.props.options.find((function(e){return e.value===n}))?this.props.options:[{value:n}].concat(function(e){if(Array.isArray(e))return p(e)}(e=this.props.options)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=this.props.creatable?l.ZP.Creatable:l.ZP;return a().createElement(o,{options:r,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:n,isValidNewOption:this.props.isValidNewOption,onChange:function(e){if(e){var n=e.value.split(" ");t.props.onChange(n)}}})}}])&&f(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(a().Component);h(S,"propTypes",{dashArray:o().array,menuPlacement:o().string,clearable:o().bool,value:o().string,optionRenderer:o().func,styleRendererPattern:o().node,valueRenderer:o().func,disabled:o().bool,onChange:o().func,options:o().array,creatable:o().bool,isValidNewOption:o().func,defaultStrokeWidth:o().number}),h(S,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:function(){},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4});const w=S},290702:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(124852),o=n.n(r),i=n(180307),a=n(974691),l=n.n(a),s=n(737275),c=n(623560),u=n.n(c);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var f=["open","onOpen"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==p(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){var t=e.containerNode,n=void 0===t?function(){return document.querySelector("."+((0,s.u8)("themePrefix")||"ms2")+" > div")||document.body}:t,a=e.placement,c=e.content,p=e.children,f=e.open,d=e.onOpen,y=void 0===d?function(){}:d,b=e.disabled,h=10,v=u()(n)?n():n,S=(0,r.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),w=g((0,r.useState)(S.current),2),E=w[0],O=w[1],C=(0,r.useRef)(),P=(0,r.useRef)(),j=(0,r.useRef)(),T=(0,r.useCallback)((function(){var e,t,n,r,o,i;if(!f)return S.current;var s={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===a)return s;var c=null==C||null===(e=C.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),u=null==P||null===(n=P.current)||void 0===n||null===(r=n.getBoundingClientRect)||void 0===r?void 0:r.call(n),p=null==j||null===(o=j.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i?void 0:i.call(o);if(c&&u&&p){var d,y,m,g,b=p.width,v=p.height,w=u.top,E=u.left,O=u.width,T=u.height,k=c.top,x=c.left,F=c.width,M=c.height,A=b+20<O,_=v+20<T,Z={top:{filter:function(){return A&&k-w>v+h},styles:function(){var e=x+F/2-b/2-E;return{picker:{position:"absolute",top:k-v-h-w,left:l()(e,E+h,E+O-b-h)},overlay:{},arrow:{top:k+2,left:x+F/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return _&&E+O-(x+F)>b+h},styles:function(){var e=k-v/2-w+M/2,t=x+F+h-E;return{picker:{position:"absolute",top:l()(e,w+h,w+T-v-h),left:t},overlay:{},arrow:{top:k+M/2,left:x+F-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return A&&w+T-(k+M)>v+h},styles:function(){var e=x+F/2-b/2-E;return{picker:{position:"absolute",top:k+M+h-w,left:l()(e,E+h,E+O-b-h)},overlay:{},arrow:{top:k+M-2,left:x+F/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return _&&x-E>b+h},styles:function(){var e=k-v/2-w+M/2,t=x-b-h-E;return{picker:{position:"absolute",top:l()(e,w+h,w+T-v-h),left:t},overlay:{},arrow:{top:k+M/2,left:x+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null!=Z&&null!==(d=Z[a])&&void 0!==d&&null!==(y=d.filter)&&void 0!==y&&y.call(d))return null==Z||null===(m=Z[a])||void 0===m||null===(g=m.styles)||void 0===g?void 0:g.call(m);if("top"!==a&&Z.top.filter())return Z.top.styles();if("right"!==a&&Z.right.filter())return Z.right.styles();if("bottom"!==a&&Z.bottom.filter())return Z.bottom.styles();if("left"!==a&&Z.left.filter())return Z.left.styles()}return s}),[a,f]);(0,r.useEffect)((function(){O(T());var e=function(){return O(T())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[T]);var k=(0,r.useRef)();return k.current={open:f},(0,r.useEffect)((function(){function e(e){var t=j.current,n=C.current,r=e.target&&(t&&t.contains(e.target)||n&&n.contains(e.target));if(k.current.open&&!r){var o,i,a=e.clientX,l=e.clientY,s=(null==j||null===(o=j.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i?void 0:i.call(o))||{},c=s.left,u=s.top,p=s.width,f=s.height;void 0!==a&&void 0!==l&&!(a>=c&&a<=c+p&&l>=u&&l<=u+f)&&y(!1)}}return window.addEventListener("click",e,!0),window.addEventListener("wheel",e,!0),window.addEventListener("scroll",e,!0),function(){window.removeEventListener("click",e,!0),window.removeEventListener("wheel",e,!0),window.removeEventListener("scroll",e,!0)}}),[]),o().createElement(o().Fragment,null,o().createElement("div",{className:"ms-popover",ref:C},(0,r.cloneElement)(p,{onClick:function(e){b||(e.stopPropagation(),y(!f))}})),v&&f?(0,i.createPortal)(o().createElement("div",{className:"ms-popover-overlay",ref:P,style:m({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none"},null==E?void 0:E.overlay)},o().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),o().createElement("div",{ref:j,style:m({pointerEvents:"auto"},null==E?void 0:E.picker)},c),o().createElement("div",{className:"ms-popover-arrow",style:m({position:"absolute",borderTop:"".concat(12,"px solid transparent"),borderBottom:"".concat(12,"px solid transparent"),borderRight:"".concat(12,"px solid #ffffff"),filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))"},null==E?void 0:E.arrow)})),v):null)}const v=function(e){var t=e.open,n=e.onOpen,i=void 0===n?function(){}:n,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,f),l=g((0,r.useState)(t),2),s=l[0],c=l[1];return o().createElement(h,d({},a,{open:s,onOpen:function(e){c(e),i(e)}}))}},835420:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(124852);const o=(0,n(218291).Z)()((0,r.lazy)((function(){return Promise.all([n.e(72555),n.e(71167),n.e(11915)]).then(n.bind(n,811915))})))},610794:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Pi});var r=n(124852),o=n.n(r),i=n(727418),a=n.n(i),l=n(675263),s=n.n(l),c=n(22222),u=n(441609),p=n.n(u),f=n(322843),d=n(782904),y=n(91175),m=n.n(y),g=n(623560),b=n.n(g),h=n(352353),v=n.n(h),S=n(480681),w=n(835420),E=n(658767),O=n(162192),C=n(805346),P=n(501262),j=n(399534),T=n(80717),k=n(409669),x=n.n(k),F=n(984596),M=n.n(F),A=n(763105),_=n.n(A),Z=n(313311),D=n.n(Z),I=n(630998),N=n.n(I),G=n(414293),R=n.n(G),B=n(717621),U=n.n(B),V=n(423570),L=n.n(V),z=n(761868),W=n(166287),H=n(112346),q=n(747037),Y=n.n(q),$=n(903918),X=n.n($);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function J(e,t,n){return t=te(t),function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}(e,ee()?Reflect.construct(t,n||[],te(e).constructor):t.apply(e,n))}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function oe(e,t,n){return(t=ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:String(t)}var ae=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return oe(ne(e=J(this,t,[].concat(o))),"paint",(function(t){t.save(),t.beginPath();var n=e.props.shapeStyle,r=n.color,o=n.fill;switch(t.fillStyle=o?Y()(o)?o:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(o.a,")"):null,t.strokeStyle=r?Y()(r)?r:"rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a,")"):null,t.lineWidth=e.props.shapeStyle.width||e.props.shapeStyle.weight,e.props.shapeStyle.dashArray&&e.props.shapeStyle.dashArray.length&&t.setLineDash(e.props.shapeStyle.dashArray),e.props.geomType){case"Polygon":e.paintPolygon(t);break;case"Polyline":e.paintPolyline(t);break;case"Point":e.paintPoint(t,e.props.shapeStyle.markName);break;case"Circle":e.paintPoint(t,"circle");break;case"Marker":e.paintMarker(t);break;case"Text":e.paintText(t);break;case"Symbol":e.paintSymbol(t);break;default:return}t.restore()})),oe(ne(e),"drawSymbol",(function(t,r){r.clearRect(0,0,600,600);var o=new Image,i=new Image;i.src=n(218845),o.src=t||e.props.shapeStyle.symbolUrl,o.onload=function(){try{r.drawImage(o,e.props.width/2-o.width/2,e.props.height/2-o.height/2)}catch(e){return}},o.onerror=function(){i.onload=function(){try{r.drawImage(i,e.props.width/2-i.width/2,e.props.height/2-i.height/2)}catch(e){return}}}})),oe(ne(e),"paintSymbol",(function(t){(0,W.isSymbolStyle)(e.props.originalStyle)?e.props.originalStyle.symbolUrlCustomized&&e.props.originalStyle.symbolUrl?e.drawSymbol(e.props.originalStyle.symbolUrlCustomized,t):(0,W.createSvgUrl)(e.props.originalStyle,e.props.originalStyle.symbolUrlCustomized||e.props.originalStyle.symbolUrl).then((function(n){return e.drawSymbol(n,t)})):e.drawSymbol(null,t)})),oe(ne(e),"paintText",(function(t){var n=e.props,r=n.width,o=n.height,i=e.props.shapeStyle,a=i.textAlign,l=void 0===a?"center":a,s=i.label,c=i.font,u=void 0===c?"14px Arial":c;return t.textAlign=l,t.font=u,"start"===l?(t.strokeText(s||"New",r/2.5,o/2),void t.fillText(s||"New",r/2.5,o/2)):"end"===l?(t.strokeText(s||"New",r/1.5,o/2),void t.fillText(s||"New",r/1.5,o/2)):(t.strokeText(s||"New",r/2,o/2),void t.fillText(s||"New",r/2,o/2))})),oe(ne(e),"paintPolygon",(function(e){e.transform(1,0,0,1,-27.5,0),e.moveTo(55,8),e.lineTo(100,8),e.lineTo(117.5,40),e.lineTo(100,72),e.lineTo(55,72),e.lineTo(37.5,40),e.closePath(),e.fill(),e.stroke()})),oe(ne(e),"paintPolyline",(function(e){e.transform(1,0,0,1,0,0),e.moveTo(10,20),e.bezierCurveTo(40,40,70,0,90,20),e.stroke()})),oe(ne(e),"paintPoint",(function(t,n){var r=e.props.shapeStyle.radius,o=r/2;switch(n){case"square":t.rect(50-o,48.5-o,r,r);break;case"circle":t.arc(50,48.5,o,0,2*Math.PI);break;case"triangle":var i=Math.sqrt(3)*r/2/3;t.moveTo(50,48.5-2*i),t.lineTo(50+o,48.5+i),t.lineTo(50-o,48.5+i),t.closePath();break;case"star":e.paintStar(t,50,48.5,5,o,o/2);break;case"cross":e.paintCross(t,50,48.5,r,.23);break;case"x":t.translate(50,48.5),t.rotate(45*Math.PI/180),t.translate(-50,-48.5),e.paintCross(t,50,48.5,r,.23);break;default:t.arc(50,48.5,r,0,2*Math.PI)}t.fill(),t.stroke()})),oe(ne(e),"paintMarker",(function(e){var t=new Image;t.src=X();try{e.drawImage(t,42.5,24)}catch(e){return}})),oe(ne(e),"paintStar",(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,l=t,s=n,c=Math.PI/r;e.moveTo(t,n-o);for(var u=0;u<r;u++)l=t+Math.cos(a)*o,s=n+Math.sin(a)*o,e.lineTo(l,s),a+=c,l=t+Math.cos(a)*i,s=n+Math.sin(a)*i,e.lineTo(l,s),a+=c;e.lineTo(t,n-o),e.closePath()})),oe(ne(e),"paintCross",(function(e,t,n,r,o){var i=r*o/2,a=r/2;e.moveTo(t-i,n-a),e.lineTo(t+i,n-a),e.lineTo(t+i,n-i),e.lineTo(t+a,n-i),e.lineTo(t+a,n+i),e.lineTo(t+i,n+i),e.lineTo(t+i,n+a),e.lineTo(t-i,n+a),e.lineTo(t-i,n+i),e.lineTo(t-a,n+i),e.lineTo(t-a,n-i),e.lineTo(t-i,n-i),e.closePath()})),e}var r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(t,e),r=t,(i=[{key:"componentDidMount",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"render",value:function(){return o().createElement("canvas",{ref:"styleCanvas",style:this.props.style,width:this.props.width,height:this.props.height})}}])&&K(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);oe(ae,"propTypes",{originalStyle:s().object,style:s().object,shapeStyle:s().object,geomType:s().oneOf(["Polygon","Polyline","Point","Marker","Text","Symbol","Circle",void 0]),width:s().number,height:s().number}),oe(ae,"defaultProps",{originalStyle:{},style:{},shapeStyle:{},geomType:"Polygon",width:100,height:80});const le=ae;var se=n(509886),ce=n.n(se),ue=n(497844),pe=n(983717);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ve(r.key),r)}}function ye(e,t,n){return t=ge(t),function(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,me()?Reflect.construct(t,n||[],ge(e).constructor):t.apply(e,n))}function me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(me=function(){return!!e})()}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function he(e,t,n){return(t=ve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:String(t)}ce()();var Se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.style;return o().createElement("div",null,o().createElement(S.Row,null,o().createElement(S.Col,{xs:12},o().createElement("strong",null,o().createElement(C.Z,{msgId:"draw.fill"})))),o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.color"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement(pe.Z,{color:(0,W.addOpacityToColor)(U()(t.fillColor||this.props.defaultColor).toRgb(),t.fillOpacity),width:this.props.width,onChangeColor:function(n){if(!R()(n)){var r=U()(n).toHexString(),o=n.a;e.props.onChange(t.id,{fillColor:r,fillOpacity:o})}}}))),o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.opacity"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement(ue.Z,{opacity:t.fillOpacity,onChange:function(n){e.props.onChange(t.id,{fillOpacity:n})}}))))}}])&&de(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);he(Se,"propTypes",{style:s().object,defaultColor:s().string,onChange:s().func,width:s().number}),he(Se,"defaultProps",{style:{},onChange:function(){}});const we=Se;var Ee=n(698772),Oe=n(290702);function Ce(e){var t=e.disabled,n=e.containerNode,r=e.onOpen,i=e.placement,a=e.children,l=e.triggerNode,s=t?" ms-disabled":"";return o().createElement(Oe.Z,{containerNode:n,placement:i,disabled:t,onOpen:function(e){return r(e)},content:o().createElement("div",{className:"ms-picker-node shadow-soft"},a)},o().createElement("div",{className:"ms-property-picker".concat(s)},o().createElement("div",{className:"ms-property-picker-swatch",style:{padding:0,boxShadow:"none"}},l)))}Ce.propTypes={value:s().oneOfType([s().string,s().shape({r:s().number,g:s().number,b:s().number,a:s().number})]),format:s().string,onChangeColor:s().func,text:s().string,line:s().bool,disabled:s().bool,pickerProps:s().object,containerNode:s().node,onOpen:s().function,placement:s().string},Ce.defaultProps={disabled:!1,line:!1,onChangeColor:function(){},pickerProps:{},onOpen:function(){}};const Pe=Ce;function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Te(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ge(r.key),r)}}function Ae(e,t,n){return t=Ze(t),function(e,t){if(t&&("object"===je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return De(e)}(e,_e()?Reflect.construct(t,n||[],Ze(e).constructor):t.apply(e,n))}function _e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_e=function(){return!!e})()}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Ne(e,t,n){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){var t=function(e,t){if("object"!=je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==je(t)?t:String(t)}var Re=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ne(De(e=Ae(this,t,[].concat(r))),"renderMarkers",(function(t){return t.map((function(t){return t.markers?e.renderMarkers(t.markers,t.name+"-"):o().createElement("div",{onClick:function(){return e.selectStyle(t)},className:e.isCurrentStyle(t)?"ms-marker-selected":"",style:Fe({},t.thumbnailStyle)})}))})),Ne(De(e),"isCurrentStyle",(function(t){return e.props.markersOptions.markersConfig.matches(e.props.style,t.style)})),Ne(De(e),"selectStyle",(function(t){return e.props.onChange(e.props.style.id,Fe({},e.props.markersOptions.markersConfig.getStyle(t.style)))})),Ne(De(e),"filterMarkerGlyph",(function(t){var n,r;return t&&-1!==t.toLowerCase().indexOf((null===(n=e.props.markersOptions)||void 0===n||null===(r=n.filter)||void 0===r?void 0:r.toLowerCase())||"")})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.markersOptions.markers.reduce((function(e,t){var n=t.markers;return[].concat(Te(e),Te(n))}),[]).find((function(t){return e.isCurrentStyle(t)}))||{};return o().createElement("div",{className:"marker-container"},o().createElement("div",{className:"marker-icon"},o().createElement("div",{style:{flex:1}},o().createElement(C.Z,{msgId:"draw.marker.icon"})),o().createElement("div",{style:{flex:1}},o().createElement(Pe,{triggerNode:o().createElement("div",{style:{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,cursor:"pointer",margin:"auto"}},o().createElement("i",{className:"fa fa-".concat(this.props.style.iconGlyph)}))},o().createElement("div",{className:"ms-marker-icon-content",style:{width:256,height:256,overflow:"auto",position:"relative"}},o().createElement("div",{style:{position:"sticky",top:0}},o().createElement(Ee.Z,{filterPlaceholder:"Filter icons...",filterText:this.props.markersOptions.filter,onFilter:this.props.markersOptions.onFilterMarker})),o().createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},this.props.markersOptions.glyphs.map((function(t){return e.filterMarkerGlyph(t)?o().createElement("div",{className:t===e.props.style.iconGlyph?"ms-marker-selected":"",style:{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,cursor:"pointer"},onClick:function(){e.props.onChange(e.props.style.id,{iconGlyph:t})}},o().createElement("i",{className:"fa fa-".concat(t)})):null}))))))),o().createElement("div",{className:"marker-shape"},o().createElement("div",{style:{flex:1}},o().createElement(C.Z,{msgId:"draw.marker.shape"})),o().createElement("div",{style:{flex:1}},o().createElement(Pe,{triggerNode:o().createElement("div",{style:Fe(Fe({},t.thumbnailStyle),{},{margin:"auto"})})},o().createElement("div",{className:"ms-marker-shape-content",style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:256,height:256,overflow:"auto"}},this.renderMarkers(this.props.markersOptions.markers))))))}}])&&Me(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);Ne(Re,"propTypes",{style:s().object,markersOptions:s().object,onChange:s().func,width:s().number}),Ne(Re,"defaultProps",{style:{},onChange:function(){}});const Be=Re;var Ue=n(743129);function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function ze(e,t,n){return t=He(t),function(e,t){if(t&&("object"===Ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,We()?Reflect.construct(t,n||[],He(e).constructor):t.apply(e,n))}function We(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(We=function(){return!!e})()}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qe(e,t)}function Ye(e,t,n){return(t=$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e){var t=function(e,t){if("object"!=Ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ve(t)?t:String(t)}var Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ze(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o().createElement("div",null,o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement("strong",null,o().createElement(C.Z,{msgId:"draw.marker.type"}))),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement(Ue.ZP,{clearable:!1,options:this.props.options,value:this.props.pointType||"marker",onChange:function(t){var n=t&&t.value;e.props.onChangeType(e.props.style.id,n)}}))))}}])&&Le(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);Ye(Xe,"propTypes",{style:s().object,pointType:s().string,options:s().array,onChangeType:s().func,width:s().number}),Ye(Xe,"defaultProps",{style:{},options:[{label:"Marker",value:"marker"},{label:"Symbol",value:"symbol"}],pointType:"marker",onChangeType:function(){}});const Qe=Xe;var Ke=n(701469),Je=n.n(Ke),et=n(618446),tt=n.n(et),nt=n(1036);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pt(r.key),r)}}function it(e,t,n){return t=lt(t),function(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return st(e)}(e,at()?Reflect.construct(t,n||[],lt(e).constructor):t.apply(e,n))}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ct(e,t)}function ut(e,t,n){return(t=pt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:String(t)}var ft=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return ut(st(e=it(this,t,[].concat(r))),"loadSymbolsList",(function(t){var n=e.props.symbolsPath+"symbols.json";x().get(n,{"Content-type":"application/json"}).then((function(n){var r=n.data;Je()(r)?e.props.onUpdateOptions(r.map((function(t){return{label:t.label||t.name,value:t.name,symbolUrl:e.props.symbolsPath+t.name+".svg?_t="+Math.random()}})),!0):e.props.onUpdateOptions([{label:t,value:t,symbolUrl:e.props.symbolsPath+t+".svg"}]),e.checkSymbolUrl(e.props),e.props.onChange(e.props.style.id);var o=e.props.symbolErrors.length?_()(e.props.symbolErrors,(function(e){return"loading_symbols_path"!==e})):[];e.props.onLoadingError(o)})).catch((function(){(0,E.ZA)(e.props.symbolErrors)||e.props.onLoadingError(e.props.symbolErrors.concat(["loading_symbols_path"]))})),e.forceUpdate()})),ut(st(e),"checkSymbolUrl",(function(t){var n=t.style,r=t.symbolErrors,o=t.onLoadingError;x().get(n.symbolUrl).then((function(){var e=r.length?_()(r,(function(e){return e!=="loading_symbol"+n.shape})):[];e=e.length?_()(e,(function(e){return"loading_symbols_path"!==e})):[],o(e)})).catch((function(){(0,E.ZA)(e.props.symbolErrors,"loading_symbol"+n.shape)||o(r.concat(["loading_symbol"+n.shape]))}))})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}(t,e),n=t,r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;if(Je()(this.props.options)&&0===this.props.options.length){var t=this.props.options&&this.props.options.length?D()(this.props.options,(function(t){return t.value===e.props.defaultShape}))&&this.props.defaultShape:E.xw;this.loadSymbolsList(t)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(tt()(e.style,this.props.style)||this.checkSymbolUrl(e),!tt()(e.symbolErrors,this.props.symbolErrors)){var n=this.props.options&&this.props.options.length?D()(this.props.options,(function(e){return e.value===t.props.defaultShape}))&&this.props.defaultShape:E.xw;this.loadSymbolsList(n)}}},{key:"render",value:function(){var e=this,t=function(e){return o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("img",{src:e.symbolUrl||e.iconUrl,width:15,height:15}),o().createElement("span",{style:{flex:1,paddingLeft:4}}," ",e.label))},n=this.props.options&&this.props.options.length?D()(this.props.options,(function(t){return t.value===e.props.defaultShape}))&&this.props.defaultShape:E.xw;return o().createElement("div",null,o().createElement(S.Row,null,o().createElement(S.Col,{xs:12},o().createElement(C.Z,{msgId:"draw.marker.layout"}))),(0,E.ZA)(this.props.symbolErrors)?o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.marker.shape"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement(S.Alert,{bsStyle:"warning"},o().createElement(C.Z,{msgId:"annotations.errorLoadingSymbols"})))):o().createElement("div",null,o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.marker.shape"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement(S.InputGroup,null,o().createElement(Ue.ZP,{clearable:!1,options:this.props.options,value:this.props.style.shape,onChange:function(t){var n=t&&t.value;e.props.onChange(e.props.style.id,{symbolUrl:e.props.symbolsPath+n+".svg",shape:n})},optionRenderer:t,valueRenderer:t}),o().createElement(S.InputGroup.Addon,{className:"btn",onClick:function(){return e.loadSymbolsList(n)}},o().createElement(S.Glyphicon,{glyph:"refresh"}))))),!((0,E.ZA)(this.props.symbolErrors,"loading_symbol"+this.props.style.shape)||(0,E.ZA)(this.props.symbolErrors,"loading_symbol"+this.props.defaultShape))&&o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.marker.size"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement("div",{className:"mapstore-slider with-tooltip"},o().createElement(nt.Z,{tooltips:!0,step:1,start:[this.props.style.size||this.props.defaultShapeSize],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}},range:{min:1,max:64},onChange:function(t){var n=parseInt(t[0].replace(" px",""),10);e.props.onChange(e.props.style.id,{size:n})}}))))))}}],r&&ot(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);ut(ft,"propTypes",{style:s().object,options:s().array,defaultShape:s().string,defaultShapeSize:s().number,onChange:s().func,onUpdateOptions:s().func,onLoadingError:s().func,symbolErrors:s().array,width:s().number,symbolsPath:s().string}),ut(ft,"contextTypes",{messages:s().object}),ut(ft,"defaultProps",{symbolsPath:E.Fi,style:{},defaultShape:E.xw,defaultShapeSize:64,options:[],symbolErrors:[],onChange:function(){},onUpdateOptions:function(){}});const dt=ft;var yt=n(185552),mt=n.n(yt),gt=n(886056);function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ct(r.key),r)}}function vt(e,t,n){return t=wt(t),function(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,St()?Reflect.construct(t,n||[],wt(e).constructor):t.apply(e,n))}function St(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(St=function(){return!!e})()}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}function Et(e,t){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Et(e,t)}function Ot(e,t,n){return(t=Ct(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e){var t=function(e,t){if("object"!=bt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bt(t)?t:String(t)}ce()();var Pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vt(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}(t,e),n=t,r=[{key:"shouldComponentUpdate",value:function(e){return!tt()(this.props.style,e.style)||!tt()(this.props.lineDashOptions,e.lineDashOptions)}},{key:"render",value:function(){var e=this,t=this.props.style;return o().createElement("div",null,o().createElement(S.Row,null,o().createElement(S.Col,{xs:12},o().createElement("strong",null,o().createElement(C.Z,{msgId:"draw.stroke"})))),o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.lineDash"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement(gt.Z,{options:this.props.lineDashOptions,dashArray:t.dashArray,onChange:function(n){e.props.onChange(t.id,{dashArray:n})}}))),o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.color"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement(pe.Z,{color:(0,W.addOpacityToColor)(U()(t.color||this.props.defaultColor).toRgb(),t.opacity),width:this.props.width,onChangeColor:function(n){if(!R()(n)){var r=U()(n).toHexString(),o=n.a;e.props.onChange(t.id,{color:r,opacity:o})}}}))),o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.opacity"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement(ue.Z,{opacity:R()(t.opacity)?.2:t.opacity,onChange:function(n){e.props.onChange(t.id,{opacity:n})}}))),o().createElement(S.Row,null,o().createElement(S.Col,{xs:6},o().createElement(C.Z,{msgId:"draw.width"})),o().createElement(S.Col,{xs:6,style:{position:"static"}},o().createElement("div",{className:"mapstore-slider with-tooltip"},o().createElement(mt(),{tooltips:!0,step:1,start:[t.weight||t.width||1],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}},range:{min:R()(this.props.constraints&&this.props.constraints.minWidth)?1:this.props.constraints.maxWidth,max:this.props.constraints&&this.props.constraints.maxWidth||15},onChange:function(n){var r=parseInt(n[0].replace(" px",""),10);e.props.onChange(t.id,{weight:r})}})))))}}],r&&ht(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);Ot(Pt,"propTypes",{style:s().object,defaultColor:s().string,lineDashOptions:s().array,onChange:s().func,width:s().number,constraints:s().object}),Ot(Pt,"defaultProps",{style:{},constraints:{maxWidth:15,minWidth:1},onChange:function(){}});const jt=Pt;var Tt=n(200020),kt=n(794192),xt=n(86638);function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bt(r.key),r)}}function Zt(e,t,n){return t=It(t),function(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nt(e)}(e,Dt()?Reflect.construct(t,n||[],It(e).constructor):t.apply(e,n))}function Dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dt=function(){return!!e})()}function It(e){return It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},It(e)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gt(e,t){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gt(e,t)}function Rt(e,t,n){return(t=Bt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){var t=function(e,t){if("object"!=Ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ft(t)?t:String(t)}ce()();var Ut=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Rt(Nt(e=Zt(this,t,[].concat(r))),"state",{fontFamily:"Arial"}),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this,t={emptyList:(0,xt.S$)(this.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:(0,xt.S$)(this.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,xt.S$)(this.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},n=this.props.style;return o().createElement("div",{className:"ms-text-style"},o().createElement("div",{className:"content"},o().createElement("strong",null,o().createElement(C.Z,{msgId:"draw.fontTitle"}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(C.Z,{msgId:"draw.font.family"})),o().createElement("div",{className:"right"},o().createElement(Tt.Combobox,{value:this.state.fontFamily||"Arial",textField:"value",valueField:"value",messages:t,data:this.props.fontFamilyValues,onChange:function(t){var r=t.value?t.value:t;""===r&&(r="Arial"),e.setState({fontFamily:r});var o=(0,E.vh)(At(At({},n),{},{fontFamily:r}));e.props.onChange(n.id,{fontFamily:r,font:o})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(C.Z,{msgId:"draw.font.size"})),o().createElement("div",{className:"right",style:{display:"flex"}},o().createElement("div",{className:"left font-size"},o().createElement(kt.Z,{value:n.fontSize||14,placeholder:"",onChange:function(t){var r=t||14,o=(0,E.vh)(At(At({},n),{},{fontSize:r}));e.props.onChange(n.id,{fontSize:r,font:o})},type:"number"})),o().createElement(Tt.Combobox,{className:"font-uom",value:n.fontSizeUom||"px",textField:"value",valueField:"value",messages:t,data:this.props.uomValues,onChange:function(t){var r=t.value?t.value:t;-1===e.props.uomValues.map((function(e){return e.value})).indexOf(r)&&(r="px");var o=(0,E.vh)(At(At({},n),{},{fontSizeUom:r}));e.props.onChange(n.id,{fontSizeUom:r,font:o})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(C.Z,{msgId:"draw.font.style"})),o().createElement("div",{className:"right"},o().createElement(Tt.Combobox,{value:n.fontStyle||"normal",textField:"value",valueField:"value",messages:t,data:this.props.fontStyleValues,onChange:function(t){var r=t.value?t.value:t;-1===e.props.fontStyleValues.map((function(e){return e.value})).indexOf(r)&&(r=n.fontStyle);var o=(0,E.vh)(At(At({},n),{},{fontStyle:r}));e.props.onChange(n.id,{fontStyle:r,font:o})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(C.Z,{msgId:"draw.font.weight"})),o().createElement("div",{className:"right"},o().createElement(Tt.Combobox,{value:n.fontWeight||"normal",textField:"value",valueField:"value",messages:t,data:this.props.fontWeightValues,onChange:function(t){var r=t.value?t.value:t;-1===e.props.fontWeightValues.map((function(e){return e.value})).indexOf(r)&&(r=n.fontWeight);var o=(0,E.vh)(At(At({},n),{},{fontWeight:r}));e.props.onChange(n.id,{fontWeight:r,font:o})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement("strong",null,o().createElement(C.Z,{msgId:"draw.text"})))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(C.Z,{msgId:"draw.font.textAlign"})),o().createElement("div",{className:"right"},o().createElement(Tt.Combobox,{value:n.textAlign||"center",textField:"label",valueField:"value",messages:t,data:this.props.alignValues,onChange:function(t){var r=t.value?t.value:t;-1===e.props.alignValues.map((function(e){return e.value})).indexOf(r)&&(r="center"),e.props.onChange(n.id,{textAlign:r})}}))),o().createElement("div",{className:"content"},o().createElement("div",{className:"left"},o().createElement(C.Z,{msgId:"draw.textRotation"})),o().createElement("div",{className:"right"},o().createElement("div",{className:"mapstore-slider with-tooltip"},o().createElement(mt(),{tooltips:!0,step:this.props.rotationStep,start:[n.textRotationDeg||0],format:{from:function(e){return Math.round(parseFloat(e))},to:function(e){return Math.round(e)+" &deg;"}},range:{min:0,max:359},onChange:function(t){var r=parseInt(t[0].replace(" &deg;",""),10);e.props.onChange(n.id,{textRotationDeg:r})}})))))}}],r&&_t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);Rt(Ut,"propTypes",{style:s().object,onChange:s().func,addOpacityToColor:s().func,width:s().number,uomValues:s().array,alignValues:s().array,fontStyleValues:s().array,fontWeightValues:s().array,fontFamilyValues:s().array,shapeStyle:s().object,rotationStep:s().number}),Rt(Ut,"contextTypes",{messages:s().object}),Rt(Ut,"defaultProps",{style:{},onChange:function(){},uomValues:[{value:"px"},{value:"em"}],fontWeightValues:[{value:"normal"},{value:"bold"}],alignValues:[{value:"start",label:"left"},{value:"center",label:"center"},{value:"end",label:"right"}],fontStyleValues:[{value:"normal"},{value:"italic"}],fontFamilyValues:[{value:"Arial"},{value:"Helvetica"},{value:"sans-serif"},{value:"Courier"}],shapeStyle:{},rotationStep:5});const Vt=Ut;function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zt.apply(this,arguments)}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,en(r.key),r)}}function Yt(e,t,n){return t=Xt(t),function(e,t){if(t&&("object"===Lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qt(e)}(e,$t()?Reflect.construct(t,n||[],Xt(e).constructor):t.apply(e,n))}function $t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($t=function(){return!!e})()}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function Qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e,t){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kt(e,t)}function Jt(e,t,n){return(t=en(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e){var t=function(e,t){if("object"!=Lt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Lt(t)?t:String(t)}var tn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Jt(Qt(e=Yt(this,t,[].concat(r))),"state",{}),Jt(Qt(e),"renderPanelStyle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i={style:t,onChange:e.change,width:e.props.width},l=(0,W.isTextStyle)(t)||(0,W.isSymbolStyle)(t),s=!((0,W.isMarkerStyle)(t)||(0,W.isSymbolStyle)(t)&&((0,E.ZA)(e.props.symbolErrors)||(0,E.ZA)(e.props.symbolErrors,"loading_symbol"+t.shape)))&&o().createElement("div",{className:"ms-marker-preview",style:{display:"flex",width:"100%",height:90}},o().createElement(le,{style:Ht({padding:0,margin:"auto",display:"block",width:l?"100%":"auto"},l&&{transform:"scaleX(2.2) scaleY(2.5)"}),originalStyle:t,shapeStyle:a()({},t,{color:(0,W.addOpacityToColor)(U()(t.color).toRgb(),R()(t.opacity)?1:t.opacity),fill:(0,W.addOpacityToColor)(U()(t.fillColor||"#FFCC33").toRgb(),R()(t.fillOpacity)?1:t.fillOpacity),radius:75}),geomType:(0,W.getStylerTitle)(t),width:l?600:90,height:120})),c=(0,W.isStrokeStyle)(t)&&(0,W.isSymbolStyle)(t)&&((0,E.ZA)(e.props.symbolErrors)||(0,E.ZA)(e.props.symbolErrors,"loading_symbol"+t.shape))?null:(0,W.isStrokeStyle)(t)?o().createElement(jt,zt({},i,{defaultColor:e.props.defaultShapeStrokeColor,lineDashOptions:e.props.lineDashOptions,constraints:{maxWidth:(0,W.isSymbolStyle)(t)?5:15},key:"stroke"+r})):null,u=(0,W.isFillStyle)(t)&&(0,W.isSymbolStyle)(t)&&((0,E.ZA)(e.props.symbolErrors)||(0,E.ZA)(e.props.symbolErrors,"loading_symbol"+t.shape))?null:(0,W.isFillStyle)(t)&&o().createElement(we,zt({},i,{defaultColor:e.props.defaultShapeFillColor,key:"fill"+r}))||null,p=(0,W.isTextStyle)(t)&&o().createElement(Vt,zt({},i,{rotationStep:e.props.textRotationStep}))||null,f=((0,W.isMarkerStyle)(t)||(0,W.isSymbolStyle)(t))&&o().createElement(Qe,zt({},i,{pointType:(0,W.isSymbolStyle)(t)?"symbol":"marker",onChangeType:e.changeSymbolType}))||null,d=(0,W.isMarkerStyle)(t)&&o().createElement(Be,zt({},i,{markersOptions:e.props.markersOptions}))||null,y=(0,W.isSymbolStyle)(t)&&o().createElement(dt,zt({},i,{style:Ht({},t),symbolsPath:e.props.symbolsPath,defaultShape:e.props.defaultShape,defaultShapeSize:e.props.defaultShapeSize,onUpdateOptions:function(t){e.props.onUpdateSymbols(t)},options:e.props.symbolList,symbolErrors:e.props.symbolErrors,onLoadingError:e.props.onSetErrorSymbol}))||null,m=o().createElement("hr",null),g=[f,s,y,d,p,u,c];return o().createElement(S.Grid,{fluid:!0,style:{width:"100%"},className:"ms-style",key:"grid"+r},o().createElement(H.Z,zt({},n,{key:"switchPanel"+r}),g.reduce((function(e,t,n){return[e,e&&t&&o().createElement("span",{key:"separator"+n},m),t]}))))})),Jt(Qt(e),"change",(function(t,n){var r=M()(e.props.style),o=Ht(Ht({},D()(r,{id:t})),n);(0,W.isSymbolStyle)(o)?(0,W.fetchStyle)((0,W.hashAndStringify)(o))?e.updateStyles(t,(0,W.fetchStyle)((0,W.hashAndStringify)(o)),r,!0):(0,W.createSvgUrl)(o,o.symbolUrl).then((function(n){e.updateStyles(t,Ht(Ht({},o),{},{symbolUrlCustomized:n}),r,!0)})):e.updateStyles(t,o,r,!0)})),Jt(Qt(e),"updateStyles",(function(t,n,r){(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(0,W.registerStyle)((0,W.hashAndStringify)(n),n);var o=(0,z.cc)(!1,n,{id:t},r);e.props.onChangeStyle(o)})),Jt(Qt(e),"changeSymbolType",(function(t,n){var r;e.updateStylesAndType(t,n,null===(r=e.props.defaultStyles.POINT)||void 0===r?void 0:r[n])})),Jt(Qt(e),"updateStylesAndType",(function(t,n,r){var o=M()(e.props.style),i=N()(o,{id:t});if(-1!==i){var a=o.map((function(e,t){return t===i?Ht(Ht({},r),{},{id:e.id,title:e.title,geometry:e.geometry,filtering:e.filtering}):e}));e.props.onChangeStyle(a)}})),Jt(Qt(e),"checkSymbolUrl",(function(t){var n=t.style,r=t.symbolErrors,o=t.onLoadingError,i=void 0===o?e.props.onSetErrorSymbol:o;x().get(n.symbolUrl).then((function(){if(!(0,E.ZA)(e.props.symbolErrors,"loading_symbol"+n.shape)){var t=_()(r,(function(e){return e!=="loading_symbol"+n.shape}));i(t)}})).catch((function(){(0,E.ZA)(e.props.symbolErrors,"loading_symbol"+n.shape)||i(r.concat(["loading_symbol"+n.shape]))}))})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kt(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=M()(this.props.style),n=t.map((function(e,t){return 0===t||e.filtering})),r=t.map((function(e,t){return 0===t}));this.setState({expanded:n,locked:r}),t.filter((function(e){return"Point"===e.type})).forEach((function(t){e.checkSymbolUrl(Ht(Ht({},e.props),{},{style:t}))}))}},{key:"render",value:function(){var e=this,t=M()(this.props.style);return o().createElement("div",{className:"ms-style-manager"},t.map((function(n,r){return e.renderPanelStyle(Ht(Ht({},n),{},{id:n.id||L()()}),{expanded:e.state.expanded[r],locked:e.state.locked[r],onSwitch:function(){e.setState((function(){return{expanded:e.state.expanded.map((function(t,n){return r===n?!e.state.expanded[r]:e.state.expanded[n]}))}}));var n=t.map((function(t,n){return n===r?Ht(Ht({},t),{},{filtering:!e.state.expanded[r]}):t}));e.props.onChangeStyle(n)},title:n.title||(0,W.getStylerTitle)(n)+" Style"},r)})))}}])&&qt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);Jt(tn,"propTypes",{style:s().object,switchPanelOptions:s().array,lineDashOptions:s().array,onChangeStyle:s().func,pointType:s().string,onUpdateSymbols:s().func,onSetErrorSymbol:s().func,width:s().number,symbolsPath:s().string,defaultShape:s().string,defaultShapeSize:s().number,defaultShapeFillColor:s().string,defaultShapeStrokeColor:s().string,defaultStyles:s().object,symbolList:s().array,symbolErrors:s().array,defaultSymbol:s().object,defaultMarker:s().object,markersOptions:s().object,textRotationStep:s().number}),Jt(tn,"defaultProps",{style:{},defaultShape:E.xw,symbolsPath:E.Fi,defaultShapeSize:64,defaultShapeFillColor:"#000000",defaultShapeStrokeColor:"#000000",symbolErrors:[],onChangeStyle:function(){},onUpdateSymbols:function(){},defaultStyles:{},switchPanelOptions:[]});const nn=tn;var rn=n(433506),on=rn.Z.markers.extra.icons[0],an=rn.Z.markers.extra.getGrid();const ln={fields:[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}],markers:an,markerIcon:on,markersConfig:rn.Z.markers.extra,multiGeometry:!1,glyphs:Object.keys(rn.Z.getGlyphs("fontawesome")),getGlyphClassName:function(e){return"fa fa-"+e.iconGlyph},getMarkerFromStyle:function(e){return an.filter((function(t){return t.name===e.iconShape}))[0].markers.filter((function(t){return t.name===e.iconColor}))[0]}};var sn=n(813292),cn=n.n(sn),un=n(950966),pn=n(294184),fn=n.n(pn),dn=n(227361),yn=n.n(dn);function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}function gn(){return gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gn.apply(this,arguments)}function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=mn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==mn(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vn=function(e){var t,n,r,i,a=e.editing,l=e.onAddGeometry,s=e.onSetStyle,c=e.onStartDrawing,u=e.onAddText,p=e.onStyleGeometry,f=e.setTabValue,d=e.isMeasureEditDisabled,y=e.onSetAnnotationMeasurement,m=e.showPopupWarning,g=e.setPopupWarning,b=e.geodesic,h=e.defaultStyles,v=e.defaultPointType,w=e.onValidateFeature,O=e.validateFeatures,P=(a||{}).features,j=void 0===P?[]:P,k=yn()(e,"selected.properties.isValidFeature",!0),x=O(),F=function(e,t){p(!1),l(e),"Text"===e&&u(),s(t),c({geodesic:b}),f("coordinates"),w()},M="symbol"===v?null===(t=h.POINT)||void 0===t?void 0:t[v]:E.z4.Point,A="symbol"===v?[hn(hn({},null===(n=h.POINT)||void 0===n?void 0:n[v]),{},{highlight:!0,iconAnchor:[.5,.5],type:"Point",title:"StartPoint Style",geometry:"startPoint",filtering:!1,id:L()()}),hn(hn({},null===(r=h.POINT)||void 0===r?void 0:r[v]),{},{highlight:!0,iconAnchor:[.5,.5],type:"Point",title:"EndPoint Style",geometry:"endPoint",filtering:!1,id:L()()})]:(0,E.N_)();return o().createElement(o().Fragment,null,o().createElement("div",{className:"geometries-toolbar"},o().createElement(S.ControlLabel,null,o().createElement(C.Z,{msgId:"annotations.geometries"})),o().createElement(T.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:null==a||null===(i=a.properties)||void 0===i?void 0:i.iconGlyph,visible:!d,disabled:!k,onClick:function(){m?g(!0):y()},tooltip:o().createElement(C.Z,{msgId:"annotations.editMeasurement"})},{glyph:"point-plus",visible:d,disabled:!k,onClick:function(){var e,t=[hn(hn({},null===(e=h.POINT)||void 0===e?void 0:e[v]),{},{highlight:!0,id:L()()})];F("Point",t)},tooltip:o().createElement(C.Z,{msgId:"annotations.titles.marker"})},{glyph:"polyline-plus",visible:d,disabled:!k,onClick:function(){var e=[hn(hn({},E.z4.LineString),{},{highlight:!0,id:L()()})].concat(A);F("LineString",e)},tooltip:o().createElement(C.Z,{msgId:"annotations.titles.line"})},{glyph:"polygon-plus",visible:d,disabled:!k,onClick:function(){var e=[hn(hn({},E.z4.Polygon),{},{highlight:!0,id:L()()})];F("Polygon",e)},tooltip:o().createElement(C.Z,{msgId:"annotations.titles.polygon"})},{glyph:"font-add",visible:d,disabled:!k,onClick:function(){var e=[hn(hn({},E.z4.Text),{},{highlight:!0,type:"Text",title:"Text Style",id:L()()})];F("Text",e)},tooltip:o().createElement(C.Z,{msgId:"annotations.titles.text"})},{glyph:"1-circle-add",visible:d,disabled:!k,onClick:function(){var e=[hn(hn({},E.z4.Circle),{},{highlight:!0,type:"Circle",title:"Circle Style",id:L()()}),hn(hn({},M),{},{highlight:!0,iconAnchor:[.5,.5],type:"Point",title:"Center Style",filtering:!1,geometry:"centerPoint",id:L()()})];F("Circle",e)},tooltip:o().createElement(C.Z,{msgId:"annotations.titles.circle"})}]})),j&&0===j.length&&o().createElement("div",{style:{textAlign:"center"}},o().createElement(C.Z,{msgId:"annotations.addGeometry"})),null==j?void 0:j.map((function(t,n){return o().createElement(Sn,gn({disabled:!x,onValidateFeature:w,feature:t,key:n},e))})))},Sn=function(e){var t,n=e.feature,r=e.selected,i=e.disabled,a=e.onDeleteGeometry,l=e.onZoom,s=e.maxZoom,c=e.onSelectFeature,u=e.onUnselectFeature,p=e.setTabValue,f=e.isMeasureEditDisabled,d=e.onStyleGeometry,y=e.onGeometryHighlight,m=e.onValidateFeature,g=(0,E.q9)(n),b=n.properties,h=(0,E.XL)(g),v=h.glyph,w=h.label,O=(null==r||null===(t=r.properties)||void 0===t?void 0:t.id)===(null==b?void 0:b.id),P=yn()(r,"properties.isValidFeature",!0),j=null==b?void 0:b.isValidFeature,k=!O&&P,x=o().createElement("div",{className:fn()("geometry-card",{"ms-selected":O,"ms-disabled":i&&!O}),onMouseEnter:function(){return k&&y(b.id)},onMouseLeave:function(){return k&&y(b.id,!1)},onClick:function(){O&&j?(u(),y(b.id)):i||(c([n]),p(f?"coordinates":"style"),d(!f)),m()}},o().createElement("div",{className:"geometry-card-preview"},o().createElement(S.Glyphicon,{glyph:v})),o().createElement("div",{className:"geometry-card-label"},o().createElement("div",null,(null==b?void 0:b.geometryTitle)||w||(null==b?void 0:b.id))),o().createElement(T.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"zoom-to",visible:j,className:fn()({inactive:i&&!O,"square-button-md no-border":!0}),tooltip:o().createElement(C.Z,{msgId:"annotations.zoomToGeometry"}),onClick:function(e){e.stopPropagation();var t=cn()(n);l(t,"EPSG:4326",s)}},{glyph:"trash",className:fn()({inactive:i&&!O,"square-button-md no-border":!0}),tooltip:o().createElement(C.Z,{msgId:"annotations.removeGeometry"}),onClick:function(e){e.stopPropagation(),a(null==b?void 0:b.id)}}]}));return i&&!O?function(e){return o().createElement(un.Z,{placement:"left",overlay:o().createElement(S.Tooltip,null,o().createElement(C.Z,{msgId:"annotations.resolveAllErrors"}))},e)}(x):x};vn.defaultProps={onAddGeometry:function(){},onSetStyle:function(){},onStartDrawing:function(){},onAddText:function(){},onStyleGeometry:function(){},onSetAnnotationMeasurement:function(){},onSelectFeature:function(){},setTabValue:function(){},isMeasureEditDisabled:!0,defaultPointType:"marker",defaultStyles:{},onValidateFeature:function(){},validateFeatures:function(){return!0}};const wn=vn;var En=n(260024);function On(e){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(e)}function Cn(){return Cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cn.apply(this,arguments)}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mn(r.key),r)}}function jn(e,t,n){return t=kn(t),function(e,t){if(t&&("object"===On(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tn()?Reflect.construct(t,n||[],kn(e).constructor):t.apply(e,n))}function Tn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tn=function(){return!!e})()}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}function Fn(e,t,n){return(t=Mn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e){var t=function(e,t){if("object"!=On(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=On(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==On(t)?t:String(t)}var An=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jn(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o().createElement(En.Z,Cn({},this.props.options,{items:[],isDraggable:!0,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,E.OQ)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onValidateFeature:this.props.onValidateFeature,onChange:function(t,n,r,o){var i=t.map((function(e){return[e.lon,e.lat]}));e.props.onChange(i,n,r,o),e.props.onValidateFeature()}}))}}])&&Pn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);Fn(An,"propTypes",{components:s().array,options:s().object,onRemove:s().func,onChange:s().func,transitionProps:s().object,selected:s().object,featureType:s().string,format:s().string,mapProjection:s().string,onComplete:s().func,onHighlightPoint:s().func,onChangeFormat:s().func,onChangeRadius:s().func,onSetInvalidSelected:s().func,aeronauticalOptions:s().object,onChangeText:s().func,renderer:s().string,onValidateFeature:s().func}),Fn(An,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},onValidateFeature:function(){}});const _n=An;var Zn=n(415124),Dn=["newFeature"];function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function Nn(){return Nn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nn.apply(this,arguments)}function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qn(r.key),r)}}function Un(e,t,n){return t=Ln(t),function(e,t){if(t&&("object"===In(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zn(e)}(e,Vn()?Reflect.construct(t,n||[],Ln(e).constructor):t.apply(e,n))}function Vn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vn=function(){return!!e})()}function Ln(e){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ln(e)}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e,t){return Wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wn(e,t)}function Hn(e,t,n){return(t=qn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qn(e){var t=function(e,t){if("object"!=In(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=In(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==In(t)?t:String(t)}var Yn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Hn(zn(e=Un(this,t,[].concat(r))),"state",{editedFields:{},removing:null,textValue:"",tabValue:"coordinates",showPopupWarning:!1}),Hn(zn(e),"getConfig",(function(){return Rn(Rn(Rn({},ln),e.props.config),{},{onFilterMarker:e.props.onFilterMarker})})),Hn(zn(e),"getBodyItems",(function(t){return e.getConfig().fields.filter((function(e){return!t||e.editable})).map((function(n){var r=t&&e.props.errors[n.name],i=r?"field-error":"";return o().createElement("div",{key:n.name,className:"mapstore-annotations-info-viewer-item mapstore-annotations-info-viewer-"+n.name+" "+i},n.showLabel?o().createElement("label",null,o().createElement(C.Z,{msgId:"annotations.field."+n.name})):null,r?e.renderErrorOn(n.name):"",e.renderProperty(n,e.props[n.name]||n.value,t))}))})),Hn(zn(e),"getValidator",(function(e){return b()(e)?e:(0,f.CU)({},{},"{(function(value) {return "+e+";})}")})),Hn(zn(e),"renderViewButtons",(function(){return o().createElement(S.Grid,{fluid:!0,style:e.props.styling?{width:"100%",boxShadow:"none"}:{width:"100%"}},o().createElement(S.Row,{className:"noTopMargin"},o().createElement(S.Col,{xs:12,className:"text-center"},o().createElement(T.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",tooltipId:"annotations.back",visible:e.props.showBack,onClick:function(){var t,n;e.props.onCancelEdit(null===(t=e.props)||void 0===t||null===(n=t.feature)||void 0===n?void 0:n.properties),e.props.onCancel(),e.props.onCleanHighlight()}},{glyph:"pencil",tooltipId:"annotations.edit",visible:e.props.showEdit,multiGeometry:e.props.config.multiGeometry,onClick:function(){e.props.onEdit(e.props.id)},disabled:!e.props.config.multiGeometry&&e.props.editing&&e.props.editing.features&&e.props.editing.features.length,bsStyle:e.props.drawing?"success":"primary"},{glyph:"trash",tooltipId:"annotations.remove",visible:!0,onClick:function(){e.setState({removing:e.props.id})}},{glyph:"download",tooltip:o().createElement(C.Z,{msgId:"annotations.downloadcurrenttooltip"}),visible:!0,onClick:function(){e.props.onDownload(e.props.features)}}]}))))})),Hn(zn(e),"renderEditingCoordButtons",(function(){var t,n,r,i,a,l=e.validateFeatures();return o().createElement(S.Grid,{className:"mapstore-annotations-info-viewer-buttons",fluid:!0},o().createElement(S.Row,{className:"text-center noTopMargin"},o().createElement(S.Col,{xs:12},o().createElement(T.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",tooltipId:"annotations.back",tooltipPosition:"bottom",visible:!0,disabled:(null===(t=e.props)||void 0===t||null===(n=t.selected)||void 0===n?void 0:n.properties)&&!(null!==(r=e.props)&&void 0!==r&&null!==(i=r.selected)&&void 0!==i&&null!==(a=i.properties)&&void 0!==a&&a.isValidFeature)||!1,onClick:function(){if(e.props.styling&&e.isMeasureEditDisabled())e.props.unsavedStyle?e.props.onToggleUnsavedStyleModal():e.props.onCancelStyle();else if(e.props.unsavedGeometry)e.props.onToggleUnsavedGeometryModal();else if(e.props.unsavedChanges)e.props.onToggleUnsavedChangesModal();else{var t;e.props.onResetCoordEditor(),e.props.onCancelEdit(null===(t=e.props.editing)||void 0===t?void 0:t.properties),e.setState(Rn(Rn({},e.state),{},{tabValue:"coordinates"}))}}},{glyph:"trash",tooltipId:"annotations.remove",tooltipPosition:"bottom",disabled:!e.props.annotations.length,visible:!e.props.selected,onClick:function(){e.setState({removing:e.props.id})}},{glyph:"floppy-disk",tooltipPosition:"bottom",tooltipId:l?p()(e.props.selected)?"annotations.save":"annotations.saveGeometry":"annotations.annotationSaveGeometryError",disabled:e.props.selected&&e.props.selected.properties&&!e.props.selected.properties.isValidFeature||!l,onClick:function(){return e.save()}},{glyph:"download",tooltip:o().createElement(C.Z,{msgId:"annotations.downloadcurrenttooltip"}),tooltipPosition:"bottom",disabled:0!==Object.keys(e.validate()).length||e.props.unsavedChanges,visible:!e.props.selected,onClick:function(){var t=e.props.editing,n=(t.newFeature,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Dn));e.props.onDownload(n)}}]}))))})),Hn(zn(e),"renderButtons",(function(t){var n;return n=t?e.renderEditingCoordButtons():e.renderViewButtons(),o().createElement("div",{className:"mapstore-annotations-info-viewer-buttons"},n)})),Hn(zn(e),"renderProperty",(function(t,n,r){var i=void 0===e.props.editedFields[t.name]?n:e.props.editedFields[t.name];if(r)switch(t.type){case"html":return o().createElement(w.Z,{value:i||"",onChange:function(n){e.change(t.name,n),e.props.unsavedChanges||e.props.onSetUnsavedChanges(!0)}});case"component":var a=i;return o().createElement("prop",{editing:!0,value:o().createElement(a,{annotation:e.props.feature}),onChange:function(n){e.change(t.name,n.target.value),e.props.unsavedChanges||e.props.onSetUnsavedChanges(!0)}});default:return o().createElement(S.FormControl,{value:i||"",onChange:function(n){e.change(t.name,n.target.value),e.props.unsavedChanges||e.props.onSetUnsavedChanges(!0)}})}switch(t.type){case"html":return o().createElement("span",{dangerouslySetInnerHTML:{__html:i}});case"component":var l=i;return o().createElement(l,{annotation:e.props.feature});default:return o().createElement("p",null,i)}})),Hn(zn(e),"renderErrorOn",(function(t){return o().createElement("div",{className:"annotations-edit-error"},o().createElement(C.Z,{msgId:e.props.errors[t]}))})),Hn(zn(e),"renderMarkers",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.map((function(t){return t.markers?o().createElement("div",{className:"mapstore-annotations-info-viewer-marker-group mapstore-annotations-info-viewer-marker-"+n+t.name},e.renderMarkers(t.markers,t.name+"-")):o().createElement("div",{onClick:function(){return e.selectStyle(t)},className:"mapstore-annotations-info-viewer-marker mapstore-annotations-info-viewer-marker-"+n+t.name+(e.isCurrentStyle(t)?" mapstore-annotations-info-viewer-marker-selected":""),style:t.thumbnailStyle})}))})),Hn(zn(e),"renderBody",(function(t){var n=e.getBodyItems(t);return 0===n.length?null:o().createElement("div",{className:"mapstore-annotations-info-viewer-items"+(e.props.styling?" mapstore-annotations-info-viewer-styler":"")},o().createElement("div",null,n,t&&o().createElement(wn,{editing:e.props.editing,selected:e.props.selected,onAddGeometry:e.props.onAddGeometry,onSetStyle:e.props.onSetStyle,onStartDrawing:e.props.onStartDrawing,onAddText:e.props.onAddText,onDeleteGeometry:e.props.onDeleteGeometry,onZoom:e.props.onZoom,maxZoom:e.props.maxZoom,setTabValue:e.setTabValue,styling:e.props.styling,onStyleGeometry:e.props.onStyleGeometry,onSelectFeature:e.props.onSelectFeature,drawing:e.props.drawing,onUnselectFeature:e.props.onUnSelectFeature,onGeometryHighlight:e.props.onGeometryHighlight,isMeasureEditDisabled:e.isMeasureEditDisabled(),onSetAnnotationMeasurement:e.setAnnotationMeasurement,setPopupWarning:e.setPopupWarning,showPopupWarning:e.props.showPopupWarning,geodesic:e.props.geodesic,defaultPointType:e.getConfig().defaultPointType,defaultStyles:e.props.defaultStyles,onValidateFeature:e.props.onValidateFeature,validateFeatures:e.validateFeatures})))})),Hn(zn(e),"renderError",(function(t){return t?Object.keys(e.props.errors).filter((function(t){return 0===e.getConfig().fields.filter((function(e){return e.name===t})).length})).map((function(t){return e.renderErrorOn(t)})):null})),Hn(zn(e),"renderModals",(function(){return e.props.closing?o().createElement(j.Z,null,o().createElement(P.Z,{show:!0,modal:!0,onClose:e.props.onCancelClose,onConfirm:function(){var t;return e.props.onConfirmClose(null===(t=e.props.editing)||void 0===t?void 0:t.properties)},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(C.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(C.Z,{msgId:"annotations.cancel"})},o().createElement(C.Z,{msgId:"annotations.undo"}))):e.props.showUnsavedChangesModal?o().createElement(j.Z,null,o().createElement(P.Z,{show:!0,modal:!0,onClose:e.props.onToggleUnsavedChangesModal,onConfirm:function(){var t;e.props.selected&&e.props.onResetCoordEditor(),e.props.onCancelEdit(null===(t=e.props.editing)||void 0===t?void 0:t.properties),e.props.onToggleUnsavedChangesModal()},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(C.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(C.Z,{msgId:"annotations.cancel"})},o().createElement(C.Z,{msgId:"annotations.undo"}))):e.props.showUnsavedGeometryModal?o().createElement(j.Z,null,o().createElement(P.Z,{show:!0,modal:!0,onClose:e.props.onToggleUnsavedGeometryModal,onConfirm:function(){var t;e.props.onResetCoordEditor(),e.props.onCancelEdit(null===(t=e.props.editing)||void 0===t?void 0:t.properties)},confirmButtonBSStyle:"default",closeGlyph:"1-close",title:o().createElement(C.Z,{msgId:"annotations.titleUndoGeom"}),confirmButtonContent:o().createElement(C.Z,{msgId:"annotations.confirmGeom"}),closeText:o().createElement(C.Z,{msgId:"annotations.cancelModalGeom"})},o().createElement(C.Z,{msgId:"annotations.undoGeom"}))):e.props.showUnsavedStyleModal?o().createElement(j.Z,null,o().createElement(P.Z,{show:!0,modal:!0,onClose:e.props.onToggleUnsavedStyleModal,onConfirm:function(){e.props.onCancelStyle(),e.props.onToggleUnsavedStyleModal(),e.isMeasureEditDisabled()?e.setTabValue("coordinates"):e.setTabValue("style")},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(C.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(C.Z,{msgId:"annotations.cancel"})},o().createElement(C.Z,{msgId:"annotations.undo"}))):e.props.showDeleteFeatureModal?o().createElement(j.Z,null,o().createElement(P.Z,{show:!0,modal:!0,onClose:e.props.onToggleDeleteFtModal,onConfirm:function(){e.props.onConfirmDeleteFeature(),e.props.onToggleDeleteFtModal()},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(C.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(C.Z,{msgId:"annotations.cancel"})},o().createElement(C.Z,{msgId:"annotations.undoDeleteFeature"}))):e.state.removing||e.props.removing?o().createElement(j.Z,null,o().createElement(P.Z,{show:!0,modal:!0,onClose:function(){e.state.removing&&e.setState({removing:null}),e.props.onCancelRemove()},focusConfirm:e.props.removing,onConfirm:function(){e.state.removing?(e.setState({removing:null}),e.props.onConfirmRemove(e.state.removing,"features")):e.props.onConfirmRemove(e.props.removing,"geometry")},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(C.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(C.Z,{msgId:"annotations.cancel"})},"editing"===e.props.mode?o().createElement(C.Z,{msgId:"annotations.removegeometry"}):o().createElement(C.Z,{msgId:"annotations.removeannotation",msgParams:{title:null===(t=e.props)||void 0===t||null===(n=t.feature)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.title}}))):e.state.showPopupWarning&&e.props.showPopupWarning?o().createElement(j.Z,null,o().createElement(P.Z,{show:!0,modal:!0,title:o().createElement(C.Z,{msgId:"annotations.warning"}),onClose:e.hideWarning,onConfirm:e.setAnnotationMeasurement,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:o().createElement(C.Z,{msgId:"annotations.confirm"}),closeText:o().createElement(C.Z,{msgId:"annotations.cancel"})},o().createElement("span",null,o().createElement("p",null,o().createElement(C.Z,{msgId:"annotations.measureWarningText"})),o().createElement("p",null,o().createElement(S.Checkbox,{checked:e.props.showAgain,onClick:e.props.onToggleShowAgain},o().createElement(C.Z,{msgId:"annotations.notShowAgain"})))))):null;var t,n,r})),Hn(zn(e),"validateFeatures",(function(){var t,n,r=!0;return Array.isArray(null===(t=e.props)||void 0===t||null===(n=t.editing)||void 0===n?void 0:n.features)&&(r=e.props.editing.features.every((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.isValidFeature}))),r})),Hn(zn(e),"change",(function(t,n){e.props.onChangeProperties(t,n)})),Hn(zn(e),"isCurrentStyle",(function(t){return e.getConfig().markersConfig.matches(e.props.editing.style.MultiPoint,t.style)})),Hn(zn(e),"selectStyle",(function(t){return e.props.onSetStyle(a()({},{Point:Rn(Rn({},e.getConfig().markersConfig.getStyle(t.style)),{},{iconGlyph:e.props.editing.style.Point&&e.props.editing.style.Point.iconGlyph}),MultiPoint:Rn(Rn({},e.getConfig().markersConfig.getStyle(t.style)),{},{iconGlyph:e.props.editing.style.MultiPoint&&e.props.editing.style.MultiPoint.iconGlyph})}))})),Hn(zn(e),"selectGlyph",(function(t){return e.props.onSetStyle(a()({},e.props.editing.style,{Point:Rn(Rn({},e.props.editing.style.Point),{},{iconGlyph:t&&t.value||""}),MultiPoint:Rn(Rn({},e.props.editing.style.MultiPoint),{},{iconGlyph:t&&t.value||""})}))})),Hn(zn(e),"validate",(function(){return a()(e.getConfig().fields.filter((function(e){return e.editable})).reduce((function(t,n){var r=void 0===e.props.editedFields[n.name]?e.props[n.name]:e.props.editedFields[n.name];return n.validator&&!e.getValidator(n.validator)(r)?a()(t,Hn({},n.name,n.validateError)):t}),{}),e.props.editing.features&&e.props.editing.features.length?{}:{geometry:"annotations.emptygeometry"})})),Hn(zn(e),"validateText",(function(e,t){if(e&&e.length){var n=m()(e);return!!t&&(0,E.Tl)(n)}return!1})),Hn(zn(e),"save",(function(){if(p()(e.props.selected)){var t=e.validate();0===Object.keys(t).length?(e.props.onError({}),e.props.onSave(e.props.id,a()({},e.props.editedFields),e.props.editing.features,e.props.editing.style,e.props.editing.newFeature||!1,Rn(Rn({},e.props.editing.properties),{},{visibility:v()(e.props.editing.properties.visibility)?e.props.editing.visibility:e.props.editing.properties.visibility}))):e.props.onError(t)}else e.props.onAddNewFeature()})),Hn(zn(e),"setTabValue",(function(t){e.state.tabValue!==t&&e.setState(Rn(Rn({},e.state),{},{tabValue:t}))})),Hn(zn(e),"setPopupWarning",(function(t){e.setState(Rn(Rn({},e.state),{},{showPopupWarning:t}))})),Hn(zn(e),"isMeasureEditDisabled",(function(){var t,n,r=(null===(t=e.props.editing)||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.type)===O.zE||!1;return!e.props.measurementAnnotationEdit||!r})),Hn(zn(e),"setAnnotationMeasurement",(function(){var t;e.props.onSetAnnotationMeasurement(e.props.editing.features.filter((function(e){return"Point"!==e.geometry.type&&!e.properties.isCircle})),null===(t=e.props.editing)||void 0===t?void 0:t.properties),e.hideWarning()})),Hn(zn(e),"hideWarning",(function(){if(e.props.showAgain){try{(0,Zn.ac)().setItem("showPopupWarning",!1)}catch(e){console.error(e)}e.props.onHideMeasureWarning()}e.setPopupWarning(!1)})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.onInitPlugin()}},{key:"render",value:function(){var e,t,n,r,i,a,l,s,c,u=this,f=this.props.editing&&this.props.editing.properties.id===this.props.id,d=this.props.mouseHoverEvents?{onMouseEnter:function(){u.props.onHighlight(u.props.id)},onMouseLeave:function(){u.props.onCleanHighlight()}}:{},y=this.props.selected?(0,E.q9)(this.props.selected):"",m=p()(y)?{}:(0,E.XL)(y),g=m.glyph,b=void 0===g?"":g,h=m.label,v=void 0===h?"":h;return o().createElement("div",Nn({style:{display:"flex"},className:"mapstore-annotations-info-viewer"+(this.props.mouseHoverEvents?" hover-background":"")},d),o().createElement("div",{style:{flex:1}},this.renderButtons(f),this.renderError(f),this.renderModals(),this.renderBody(f)),!p()(this.props.selected)&&o().createElement("div",{className:"mapstore-annotations-info-viewer-expanded"},o().createElement("div",{style:{padding:8,display:"flex",alignItems:"center"}},o().createElement(S.Glyphicon,{glyph:b,style:{fontSize:20,paddingRight:8}}),o().createElement("div",{style:{flex:1}},o().createElement(S.FormControl,{value:(null===(e=this.props.selected)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.geometryTitle)||v||(null===(n=this.props.selected)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.id),name:"text",placeholder:"Enter geometry title",onChange:function(e){var t=e.target.value.trim();u.props.onChangeGeometryTitle(t||v)},type:"text"}))),(null===(i=this.props.selected)||void 0===i||null===(a=i.properties)||void 0===a?void 0:a.isText)&&o().createElement("div",{style:{padding:8}},o().createElement(S.FormGroup,null,o().createElement(S.FormGroup,{validationState:null!==(l=this.props.selected)&&void 0!==l&&l.properties.valueText?null:"error"},o().createElement(S.ControlLabel,null,o().createElement(C.Z,{msgId:"annotations.editor.text"})),o().createElement(S.FormControl,{value:(null===(s=this.props.selected)||void 0===s||null===(c=s.properties)||void 0===c?void 0:c.valueText)||"",name:"text",placeholder:"text value",onChange:function(e){var t,n,r,o,i=e.target.value,a=null!==(t=u.props)&&void 0!==t&&null!==(n=t.selected)&&void 0!==n&&null!==(r=n.geometry)&&void 0!==r&&null!==(o=r.coordinates)&&void 0!==o&&o.length?(0,E.OQ)(u.props.selected.geometry):[];u.validateText(a,i)||""!==i?u.props.onChangeText(i,a.map(E.bh)):(u.props.onChangeText("",a.map(E.bh)),u.props.onSetInvalidSelected("text",a.map(E.bh)))},type:"text"})))),o().createElement(S.Nav,{bsStyle:"tabs",activeKey:this.state.tabValue,justified:!0},this.isMeasureEditDisabled()&&o().createElement(S.NavItem,{key:"coordinates",eventKey:"coordinates",onClick:function(){u.setTabValue("coordinates"),u.props.onStyleGeometry(!1)}},o().createElement(C.Z,{msgId:"annotations.tabCoordinates"})),o().createElement(S.NavItem,{key:"style",eventKey:"style",onClick:function(){u.setTabValue("style"),u.props.onStyleGeometry(!0)}},o().createElement(C.Z,{msgId:"annotations.tabStyle"}))),o().createElement("div",{className:"tab-container"},"coordinates"===this.state.tabValue&&o().createElement(_n,{options:this.props.config&&this.props.config.geometryEditorOptions,drawing:this.props.drawing,aeronauticalOptions:this.props.aeronauticalOptions,selected:this.props.selected,featureType:this.props.featureType,format:this.props.format,mapProjection:this.props.mapProjection,onChange:this.props.onChangeSelected,onChangeRadius:this.props.onChangeRadius,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:"annotations",onValidateFeature:this.props.onValidateFeature}),"style"===this.state.tabValue&&o().createElement(nn,{onChangeStyle:function(e){u.props.onSetStyle(e),u.props.onSetUnsavedStyle(!0),u.props.onSetUnsavedChanges(!0)},pointType:this.props.pointType,style:this.props.selected&&this.props.selected.style||this.props.editing.style,width:this.props.width,symbolsPath:this.props.symbolsPath,onSetErrorSymbol:this.props.onSetErrorSymbol,symbolErrors:this.props.symbolErrors,onUpdateSymbols:this.props.onUpdateSymbols,symbolList:this.props.symbolList,defaultShape:this.props.defaultShape,defaultShapeSize:this.props.defaultShapeSize,defaultShapeFillColor:this.props.defaultShapeFillColor,defaultShapeStrokeColor:this.props.defaultShapeStrokeColor,defaultStyles:this.props.defaultStyles,lineDashOptions:this.props.lineDashOptions,markersOptions:this.getConfig(),textRotationStep:this.props.textRotationStep}))))}}])&&Bn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);Hn(Yn,"displayName","AnnotationsEditor"),Hn(Yn,"propTypes",{id:s().string,onEdit:s().func,onCancelEdit:s().func,onCancelStyle:s().func,onCleanHighlight:s().func,onHighlight:s().func,onAddText:s().func,onCancel:s().func,onConfirmDeleteFeature:s().func,onRemove:s().func,onSave:s().func,onSaveStyle:s().func,onError:s().func,onAddGeometry:s().func,onToggleUnsavedChangesModal:s().func,onToggleUnsavedGeometryModal:s().func,onToggleUnsavedStyleModal:s().func,onToggleDeleteFtModal:s().func,onSetUnsavedChanges:s().func,onSetUnsavedStyle:s().func,onChangeProperties:s().func,onChangeSelected:s().func,onConfirmClose:s().func,onCancelRemove:s().func,onConfirmRemove:s().func,onChangeRadius:s().func,onChangeText:s().func,onChangeGeometryTitle:s().func,onCancelClose:s().func,onSetInvalidSelected:s().func,onDeleteGeometry:s().func,onAddNewFeature:s().func,onStyleGeometry:s().func,onResetCoordEditor:s().func,onHighlightPoint:s().func,onSetStyle:s().func,onStartDrawing:s().func,onZoom:s().func,editing:s().object,editedFields:s().object,drawingText:s().object,drawing:s().bool,unsavedChanges:s().bool,unsavedGeometry:s().bool,unsavedStyle:s().bool,mouseHoverEvents:s().bool,coordinateEditorEnabled:s().bool,styling:s().bool,closing:s().bool,removing:s().bool,errors:s().object,stylerType:s().string,featureType:s().string,showBack:s().bool,showEdit:s().bool,showUnsavedChangesModal:s().bool,showUnsavedStyleModal:s().bool,showDeleteFeatureModal:s().bool,showUnsavedGeometryModal:s().bool,config:s().object,feature:s().object,features:s().object,selected:s().object,mode:s().string,maxZoom:s().number,width:s().number,onDownload:s().func,onChangeFormat:s().func,onSelectFeature:s().func,mapProjection:s().string,format:s().string,aeronauticalOptions:s().object,onDeleteFeature:s().func,pointType:s().string,symbolsPath:s().string,onUpdateSymbols:s().func,onSetErrorSymbol:s().func,symbolErrors:s().array,lineDashOptions:s().array,symbolList:s().array,defaultShape:s().string,defaultShapeSize:s().number,defaultShapeFillColor:s().string,defaultShapeStrokeColor:s().string,defaultStyles:s().object,textRotationStep:s().number,onSetAnnotationMeasurement:s().func,onFilterMarker:s().func,annotations:s().array,measurementAnnotationEdit:s().bool,geodesic:s().bool,onHideMeasureWarning:s().func,showAgain:s().bool,showPopupWarning:s().bool,onToggleShowAgain:s().func,onInitPlugin:s().func,onGeometryHighlight:s().func,onUnSelectFeature:s().func,onValidateFeature:s().func}),Hn(Yn,"defaultProps",{config:ln,errors:{},selected:null,editedFields:{},showBack:!1,showEdit:!0,coordinateEditorEnabled:!1,feature:{},maxZoom:18,format:"decimal",pointType:"marker",stylerType:"marker",annotations:[],measurementAnnotationEdit:!1,geodesic:!0,onInitPlugin:function(){}});const $n=Yn;var Xn=n(549995),Qn=n.n(Xn),Kn=n(3674),Jn=n.n(Kn),er=n(252628),tr=n.n(er),nr=n(965539),rr=n(638064),or=n(532425),ir=n(882702),ar=n(855033),lr=n.n(ar),sr=n(472986),cr=n.n(sr),ur=n(989077),pr=n(694745);function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sr(r.key),r)}}function yr(e,t,n){return t=gr(t),function(e,t){if(t&&("object"===fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return br(e)}(e,mr()?Reflect.construct(t,n||[],gr(e).constructor):t.apply(e,n))}function mr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mr=function(){return!!e})()}function gr(e){return gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gr(e)}function br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hr(e,t){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hr(e,t)}function vr(e,t,n){return(t=Sr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sr(e){var t=function(e,t){if("object"!=fr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=fr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fr(t)?t:String(t)}var wr=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vr(br(e=yr(this,t,[].concat(r))),"state",{override:!1,loading:!1}),vr(br(e),"renderError",(function(){return o().createElement("div",{className:"ms-alert-center text-center"},o().createElement("div",{className:"alert alert-danger",role:"alert",style:{margin:15,flex:1}},o().createElement(C.Z,{msgId:e.state.error})))})),vr(br(e),"setError",(function(){e.setState((function(){return{error:e.props.errorMessage,loading:!1}}))})),vr(br(e),"checkfile",(function(t){e.setState((function(){return{loading:!0}})),ir.Promise.all(t.map((function(e){return(0,ur.UC)(e)}))).then((function(t){e.state.error&&e.setState((function(){return{error:null}}));var n=t.filter((function(e){var t=e.geoJSON,n=e.errors;return 0===(void 0===n?[]:n).length||t.type===E.Mc})).reduce((function(e,t){var n=t.geoJSON;return e.concat(n.features||n)}),[]);if(0===n.length)throw new Error;e.props.onFileChoosen(n,e.state.override),e.setState((function(){return{loading:!1}})),e.props.onClose()})).catch((function(){e.setError()}))})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o().createElement(pr.Z,{title:this.props.title,bodyClassName:"ms-flex",show:this.props.show,showClose:!0,onClose:this.props.onClose,size:"sm"},o().createElement("div",{className:"",style:{flexDirection:"column"}},this.state.error&&this.renderError(),o().createElement(lr(),{onDropRejected:this.checkfile,rejectClassName:"ms-alert ms-alert-center text-center alert-danger",className:"ms-alert ms-alert-center text-center",onDrop:this.checkfile},o().createElement("div",{className:"alert alert-info",role:"alert",style:{margin:15,flex:1}},this.state.loading&&o().createElement(cr(),{spinnerName:"circle",overrideSpinnerClassName:"spinner"}),this.props.text)),o().createElement("div",{style:{margin:15,flex:1}},o().createElement(S.Checkbox,{disabled:this.props.disableOvveride,checked:this.state.override,onChange:function(){return e.setState((function(){return{override:!e.state.override}}))}},o().createElement(C.Z,{msgId:"annotations.loadoverride"})))))}}])&&dr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);vr(wr,"propTypes",{show:s().bool,text:s().oneOfType([s().string,s().element]),onFileChoosen:s().func,error:s().oneOfType([s().string,s().element]),errorMessage:s().string,onClose:s().func,title:s().node,closeGlyph:s().string,disableOvveride:s().bool}),vr(wr,"contextTypes",{messages:s().object}),vr(wr,"defaultProps",{show:!1,text:o().createElement(C.Z,{msgId:"annotations.selectfiletext"}),onFileChoosen:function(){},onClose:function(){},closeGlyph:"",errorMessage:"annotations.loaderror",title:o().createElement(C.Z,{msgId:"annotations.loadtitle"}),disableOvveride:!1});const Er=wr;var Or=n(38560);function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Pr(){return Pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pr.apply(this,arguments)}function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){Zr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dr(r.key),r)}}function xr(e,t,n){return t=Mr(t),function(e,t){if(t&&("object"===Cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ar(e)}(e,Fr()?Reflect.construct(t,n||[],Mr(e).constructor):t.apply(e,n))}function Fr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fr=function(){return!!e})()}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}function Ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _r(e,t){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_r(e,t)}function Zr(e,t,n){return(t=Dr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(e){var t=function(e,t){if("object"!=Cr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cr(t)?t:String(t)}var Ir=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Zr(Ar(e=xr(this,t,[].concat(r))),"state",{selectFile:!1}),Zr(Ar(e),"getConfig",(function(){return a()({},ln,e.props.config)})),Zr(Ar(e),"renderField",(function(t,n){return o().createElement("div",{className:"mapstore-annotations-panel-card-"+t.name},e.renderFieldValue(t,n))})),Zr(Ar(e),"renderFieldValue",(function(e,t){var n,r,o=t.properties[e.name]||"";return"html"===e.type?(null===(n=(new DOMParser).parseFromString(o,"text/html").documentElement.lastElementChild)||void 0===n||null===(r=n.firstChild)||void 0===r?void 0:r.textContent)||"":o})),Zr(Ar(e),"renderThumbnail",(function(t){var n=t.featureType,r=t.geometry,i=t.properties,a=void 0===i?{}:i;return"Measure"===(null==a?void 0:a.type)?o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(S.Glyphicon,{glyph:"1-ruler"})):"LineString"===n||"MultiLineString"===n?o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(S.Glyphicon,{glyph:"polyline"}),";"):"Polygon"===n||"MultiPolygon"===n?o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(S.Glyphicon,{glyph:"polygon"}),";"):"Circle"===n?o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(S.Glyphicon,{glyph:"1-circle"}),";"):"GeometryCollection"===n||"FeatureCollection"===n?o().createElement("span",{className:"mapstore-annotations-panel-card"},(!!(r.geometries||r.features||[]).filter((function(e){return"MultiPoint"!==e.type})).length||a.textValues&&a.textValues.length)&&e.getGeomsThumbnail(r)):o().createElement("span",{className:"mapstore-annotations-panel-card"},o().createElement(S.Glyphicon,{glyph:"point"}),";")})),Zr(Ar(e),"renderItems",(function(t){var n=t.features,r=t.properties,i={onMouseEnter:function(){e.props.onHighlight(r.id)},onMouseLeave:e.props.onCleanHighlight,onClick:function(){return e.props.onEdit(r.id)}},l=!(r&&!v()(r.visibility))||r.visibility;return Tr(Tr({},e.getConfig().fields.reduce((function(n,r){return a()({},n,Zr({},r.name,e.renderField(r,t)))}),{})),{},{preview:e.renderThumbnail({featureType:"FeatureCollection",geometry:{features:n},properties:r}),tools:o().createElement(T.Z,{btnDefaultProps:{className:"square-button-md no-border"},btnGroupProps:{style:{margin:10,whiteSpace:"nowrap"}},buttons:[{glyph:"zoom-to",tooltipId:"annotations.zoomTo",onClick:function(n){n.stopPropagation();var r=cn()(t);e.props.onZoom(r,"EPSG:4326",e.props.maxZoom)}},{glyph:l?"eye-open":"eye-close",tooltipId:l?"annotations.hide":"annotations.show",onClick:function(t){t.stopPropagation(),e.props.onToggleVisibility(null==r?void 0:r.id)}}]})},i)})),Zr(Ar(e),"renderCards",(function(){if(e.props.loading)return o().createElement("div",{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"}},o().createElement(or.Z,{size:250}));if("list"===e.props.mode){var t=!!e.props.annotations.length;return o().createElement(o().Fragment,null,o().createElement("div",{style:{display:"flex",margin:"auto",justifyContent:"center"},className:"text-center"},o().createElement(T.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"upload",tooltip:o().createElement(C.Z,{msgId:"annotations.loadtooltip"}),visible:"list"===e.props.mode,onClick:function(){e.setState((function(){return{selectFile:!0}}))}},{glyph:"plus",tooltip:o().createElement(C.Z,{msgId:"annotations.add"}),visible:"list"===e.props.mode,onClick:function(){e.props.onAdd()}},{glyph:"download",disabled:!t,tooltip:o().createElement(C.Z,{msgId:"annotations.downloadtooltip"}),visible:"list"===e.props.mode,onClick:function(){e.props.onDownload()}}]})),o().createElement("div",{style:{padding:"0 8px",margin:"10px 0 0"}},o().createElement(Ee.Z,{filterPlaceholder:(0,xt.S$)(e.context.messages,"annotations.filter"),filterText:e.props.filter,onFilter:e.props.onFilter})),o().createElement("div",{id:"ms-annotations-panel-card",className:!t&&"annotations-empty-panel"},!t&&o().createElement(C.Z,{msgId:"annotations.empty"}),t&&o().createElement(rr.Z,{size:"sm",items:e.props.annotations&&e.props.annotations.filter(e.applyFilter).map((function(t){return e.renderItems(t)}))})))}var n=e.props.annotations&&m()(e.props.annotations.filter((function(t){return t.properties.id===e.props.current}))),r=e.props.editor;return"detail"===e.props.mode?o().createElement(r,Pr({feature:n,geodesic:e.props.geodesic,showBack:!0,id:e.props.current,config:e.props.config,width:e.props.width},n.properties)):e.props.editing&&o().createElement(r,Pr({feature:n,id:e.props.editing.properties&&e.props.editing.properties.id||L()(),width:e.props.width,config:e.props.config},e.props.editing.properties,{lineDashOptions:e.props.lineDashOptions,symbolsPath:e.props.symbolsPath,onUpdateSymbols:e.props.onUpdateSymbols,onSetErrorSymbol:e.props.onSetErrorSymbol,symbolErrors:e.props.symbolErrors,symbolList:e.props.symbolList,defaultShape:e.props.defaultShape,defaultShapeSize:e.props.defaultShapeSize,defaultShapeFillColor:e.props.defaultShapeFillColor,defaultShapeStrokeColor:e.props.defaultShapeStrokeColor,defaultStyles:e.props.defaultStyles,textRotationStep:e.props.textRotationStep,annotations:e.props.annotations,measurementAnnotationEdit:e.props.measurementAnnotationEdit,geodesic:e.props.geodesic}))})),Zr(Ar(e),"applyFilter",(function(t){return!e.props.filter||e.getConfig().fields.reduce((function(n,r){return-1!==(t.properties[r.name]||"").toUpperCase().indexOf(e.props.filter.toUpperCase())||n}),!1)})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_r(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.onLoadDefaultStyles(this.props.defaultShape,this.props.defaultShapeSize,this.props.defaultShapeFillColor,this.props.defaultShapeStrokeColor,this.props.symbolsPath)}},{key:"getGeomsThumbnail",value:function(e){var t,n,r=null==e?void 0:e.features.reduce((function(e,t){return t.properties&&t.properties.isCircle?Tr(Tr({},e),{},{Circle:!0}):t.properties&&t.properties.isText?Tr(Tr({},e),{},{Text:!0}):Tr(Tr({},e),{},Zr({},t.geometry.type,!0))}),{Circle:!1,Text:!1});if((null===(t=Qn()(tr()(r)))||void 0===t?void 0:t.true)>1)n="geometry-collection";else{var i,a=Jn()(r).find((function(e){return!0===r[e]}));n=null===(i=(0,E.XL)(a))||void 0===i?void 0:i.glyph}return o().createElement(S.Glyphicon,{glyph:n})}},{key:"renderHeader",value:function(){return o().createElement("div",{style:this.props.styling||{width:"100%"}},o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("div",null,o().createElement(Or.Z,{className:"square-button no-border",onClick:this.props.toggleControl},o().createElement(S.Glyphicon,{glyph:"1-close"}))),o().createElement("div",{style:{flex:"1 1 0%",padding:8,textAlign:"center"}},o().createElement("h4",null,o().createElement(C.Z,{msgId:"annotations.title"}))),o().createElement("div",null,o().createElement(Or.Z,{className:"square-button no-events"},o().createElement(S.Glyphicon,{glyph:"comment"})))))}},{key:"render",value:function(){var e,t=this;return e=this.state.selectFile?o().createElement(Er,{text:o().createElement(C.Z,{msgId:"annotations.selectfiletext"}),onFileChoosen:this.props.onLoadAnnotations,show:this.state.selectFile,disableOvveride:!(this.props.annotations&&this.props.annotations.length>0),onClose:function(){return t.setState((function(){return{selectFile:!1}}))}}):o().createElement("span",null," ",this.renderCards()," "),o().createElement(nr.Z,{id:this.props.id,header:this.renderHeader()},e)}}])&&kr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);Zr(Ir,"propTypes",{id:s().string,styling:s().bool,toggleControl:s().func,loading:s().bool,closing:s().bool,showUnsavedChangesModal:s().bool,showUnsavedStyleModal:s().bool,editing:s().object,removing:s().object,onCancelRemove:s().func,onConfirmRemove:s().func,onCancelClose:s().func,onToggleUnsavedChangesModal:s().func,onToggleUnsavedStyleModal:s().func,onResetCoordEditor:s().func,onAddNewFeature:s().func,onToggleUnsavedGeometryModal:s().func,onConfirmClose:s().func,onCancelEdit:s().func,onCancelStyle:s().func,onAdd:s().func,onZoom:s().func,onHighlight:s().func,onCleanHighlight:s().func,onDetail:s().func,mode:s().string,editor:s().func,annotations:s().array,current:s().string,config:s().object,filter:s().string,onFilter:s().func,classNameSelector:s().func,width:s().number,onDownload:s().func,onLoadAnnotations:s().func,onUpdateSymbols:s().func,onSetErrorSymbol:s().func,onToggleVisibility:s().func,onEdit:s().func,symbolErrors:s().array,lineDashOptions:s().array,symbolList:s().array,defaultShape:s().string,symbolsPath:s().string,maxZoom:s().number,defaultShapeSize:s().number,defaultShapeFillColor:s().string,defaultShapeStrokeColor:s().string,defaultStyles:s().object,onLoadDefaultStyles:s().func,textRotationStep:s().number,measurementAnnotationEdit:s().bool,geodesic:s().bool}),Zr(Ir,"contextTypes",{messages:s().object}),Zr(Ir,"defaultProps",{mode:"list",config:ln,classNameSelector:function(){return""},toggleControl:function(){},onUpdateSymbols:function(){},onSetErrorSymbol:function(){},onLoadAnnotations:function(){},annotations:[],maxZoom:18,onLoadDefaultStyles:function(){}});const Nr=Ir;var Gr=n(925677),Rr=n(242780),Br=n(49977),Ur=n.n(Br),Vr=n(178598),Lr=n(881808),zr=n(580416),Wr=n(589602),Hr=n(197395),qr=n(921914),Yr=n(604206),$r=n(986267),Xr=n(675110),Qr=n(800827),Kr=n(93152),Jr=n(307877),eo=n(737275);function to(e){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(e)}function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ro=(0,c.P1)([Xr.l2],(function(e){return m()(e.filter((function(e){return"annotations"===e.id})))})),oo=function(e){return yn()(e,"annotations.config.multiGeometry",!1)},io=function(e){return yn()(e,"annotations.removing")},ao=function(e){return yn()(e,"annotations.format")},lo=function(e){return yn()(e,"annotations.aeronauticalOptions")},so=function(e){return yn()(e,"annotations.showUnsavedChangesModal",!1)},co=function(e){return yn()(e,"annotations.showUnsavedStyleModal",!1)},uo=function(e){return yn()(e,"annotations.showUnsavedGeometryModal",!1)},po=function(e){return yn()(e,"annotations.showDeleteFeatureModal",!1)},fo=function(e){return!!yn()(e,"annotations.closing")},yo=function(e){return yn()(e,"annotations.editing")},mo=function(e){return yn()(e,"annotations.editGeometry",!0)},go=function(e){return yn()(e,"annotations.featureType")},bo=function(e){return yn()(e,"annotations.coordinateEditorEnabled")},ho=function(e){return!!yn()(e,"annotations.drawing")},vo=function(e){return yn()(e,"annotations.stylerType")},So=function(e){return yn()(e,"annotations.drawingText")},wo=function(e){return yn()(e,"annotations.editedFields",{})},Eo=function(e){return!!yn()(e,"annotations.styling")},Oo=function(e){return yn()(e,"annotations.selected",null)},Co=function(e){return yn()(e,"annotations.unsavedChanges",!1)},Po=function(e){return yn()(e,"annotations.unsavedGeometry",!1)},jo=function(e){return yn()(e,"annotations.unsavedStyle",!1)},To=function(e){return yn()(e,"annotations.validationErrors",{})},ko=function(e){return yn()(e,"annotations.config",{})},xo=function(e){return yn()(e,"annotations.symbolList",[])},Fo=function(e){return yn()(e,"annotations.symbolErrors",[])},Mo=function(e){return(yo(e)?"editing":ro(e)&&function(e){return yn()(e,"annotations.current")}(e)&&"detail")||"list"},Ao=function(e){return yn()(e,"annotations.showAgain",!1)},_o=function(e){return yn()(e,"annotations.showPopupWarning",!0)},Zo=function(e){return a()({},{symbolErrors:Fo(e),showEdit:(0,Kr.m6)(e),canEdit:mo(e),mouseHoverEvents:(0,Jr.Qp)(e),closing:fo(e),format:ao(e)||(0,eo.u8)("defaultCoordinateFormat"),aeronauticalOptions:lo(e),config:ko(e),drawing:ho(e),drawingText:So(e),errors:To(e),editing:yo(e),coordinateEditorEnabled:bo(e),editedFields:wo(e),mode:Mo(e),selected:Oo(e),featureType:go(e),removing:io(e),mapProjection:(0,Qr.uy)(e),showUnsavedChangesModal:so(e),showDeleteFeatureModal:po(e),showUnsavedGeometryModal:uo(e),showUnsavedStyleModal:co(e),stylerType:vo(e),styling:Eo(e),unsavedChanges:Co(e),unsavedGeometry:Po(e),unsavedStyle:jo(e),symbolList:xo(e),showAgain:Ao(e),showPopupWarning:_o(e)})},Do=(0,c.P1)([Zo,function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=to(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=to(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==to(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.annotations||{})},ro,Mo],(function(e,t,n,r){return a()({},{format:t.format,aeronauticalOptions:t.aeronauticalOptions,removing:t.removing,showUnsavedChangesModal:t.showUnsavedChangesModal,showUnsavedGeometryModal:t.showUnsavedGeometryModal,showUnsavedStyleModal:t.showUnsavedStyleModal,showDeleteFeatureModal:t.showDeleteFeatureModal,closing:!!t.closing,mode:r,annotations:n&&n.features||[],current:t.current||null,editing:e.editing,selected:e.selected,filter:t.filter||"",defaultStyles:t.defaultStyles,loading:t.loading},e.config?{config:e.config}:{})})),Io=((0,c.P1)([Do],(function(e){var t=e.current;return{annotation:m()(e.annotations.filter((function(e){return e.properties.id===t})))}})),n(570898)),No=n.n(Io),Go=n(998869),Ro=["symbolUrlCustomized"],Bo=["style"];function Uo(e){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(e)}function Vo(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function Lo(e){return function(e){if(Array.isArray(e))return zo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return zo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ho(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Uo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Uo(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yo=function(e){var t=e.features.map((function(e){var t=[];return e.geometry?(t="LineString"===e.geometry.type||"MultiPoint"===e.geometry.type?e.geometry.coordinates.filter(E.qs):"Polygon"===e.geometry.type?e.geometry.coordinates[0]?[e.geometry.coordinates[0].filter(E.qs)]:[[]]:(t=[e.geometry.coordinates].filter(E.qs)).length?t[0]:[],(0,z.t8)("geometry.coordinates",t,e)):e}));return(0,z.t8)("features",t,e)},$o=function(e){return yn()(e.annotations,"config.geodesic",!1)},Xo=function(e){var t=e.annotations.editing,n={featureProjection:"EPSG:4326",stopAfterDrawing:!oo(e),editEnabled:!1,selectEnabled:!0,drawEnabled:!1,translateEnabled:!1,transformToFeatureCollection:!0,geodesic:$o(e)};return t=Yo(t),(0,Yr.Yf)("drawOrEdit",e.draw.drawMethod,E.jB,[t],n,a()({},t.style,{highlight:!1}))},Qo=function(e){var t=e.annotations.editing,n={featureProjection:"EPSG:4326",stopAfterDrawing:!oo(e),editEnabled:!0,selectEnabled:!1,drawEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},translateEnabled:!1,addClickCallback:!0,useSelectedStyle:!0,transformToFeatureCollection:!0,geodesic:$o(e)};return t=Yo(t),(0,Yr.Yf)("drawOrEdit",e.draw.drawMethod,E.jB,[t],n,t.style)},Ko=function e(t){return"FeatureCollection"===t[0].type?t[0]:t.reduce((function(t,n){return"Empty"===t.type?"FeatureCollection"===n.type?e(n.features):n.geometry:"Point"===t.type?{type:"MultiPoint",coordinates:[t.coordinates,n.geometry.coordinates]}:{type:"MultiPoint",coordinates:t.coordinates.concat([n.geometry.coordinates])}}),{type:"Empty"})},Jo=function(e){return{type:"FeatureCollection",properties:a()({},e.properties,e.fields,{id:e.id},{visibility:!0}),features:e.geometry,style:a()({},e.style,{highlight:!1})}};const ei={addAnnotationsLayerEpic:function(e,t){return e.ofType(Lr.ok).switchMap((function(){var e=ro(t.getState());if(e){var n=e.visibility,r=void 0!==n&&n,o=e.features,i=(void 0===o?[]:o).map((function(e){return qo(qo({},e),{},{style:{},features:(e.features||[]).map((function(t){var n=(t.properties.isCircle?"Circle":t.properties.isText&&"Text")||t.geometry.type,r=[];return"Circle"===n&&r.push(qo(qo({},E.z4.Point),{},{iconAnchor:[.5,.5],type:"Point",title:"Center Style",filtering:!1,geometry:"centerPoint"})),"LineString"===n&&r.push((0,E.N_)()),qo(qo({},t),{},{style:Je()(t.style)?t.style.map((function(e){return e.symbolUrlCustomized,Wo(e,Ro)})):[qo(qo({},e.style[n]),{},{id:e.style[n].id||L()(),symbolUrlCustomized:void 0})].concat(r)})}))})}));return Ur().Observable.of((0,zr.tV)(E.jB,"layer",{features:i,style:{},visibility:r}))}return Ur().Observable.empty()}))},editAnnotationEpic:function(e,t){return e.ofType(Rr.A1).switchMap((function(){var e,n,r=t.getState(),o=r.annotations.editing,i=r.annotations.featureType,l={featureProjection:"EPSG:4326",stopAfterDrawing:!oo(r),editEnabled:!1,selectEnabled:!0,drawEnabled:!1,transformToFeatureCollection:!0,geodesic:$o(r)},s=(null===(e=o.properties)||void 0===e?void 0:e.type)===O.zE||!1,c=[(0,Rr.r1)(null==o||null===(n=o.properties)||void 0===n?void 0:n.id,!1),(0,Yr.Yf)("drawOrEdit",i,E.jB,[o],l,a()({},o.style,{highlight:!1})),(0,qr.aN)()];return c=s?c.concat((0,Wr.Bd)({geomType:null})):c,Ur().Observable.from(c)}))},newAnnotationEpic:function(e){return e.ofType(Rr.CD).switchMap((function(){return Ur().Observable.from([(0,qr.aN)()])}))},addAnnotationEpic:function(e,t){return e.ofType(Rr.NV).switchMap((function(){var e,n=t.getState().annotations.editing;return Ur().Observable.from([(0,Rr.r1)(null==n||null===(e=n.properties)||void 0===e?void 0:e.id,!1),Xo(t.getState()),(0,qr.aN)()])}))},setEditingFeatureEpic:function(e,t){return e.ofType(Rr.Ns).switchMap((function(e){var n=e.feature||{},r=n.properties,o=n.visibility;return Ur().Observable.of((0,Rr.r1)(r.id,o),Xo(t.getState()),(0,qr.aN)())}))},disableInteractionsEpic:function(e,t){return e.ofType(Rr.Ge).switchMap((function(){var e,n,r,o=t.getState()&&t.getState().annotations&&t.getState().annotations.styling;return Ur().Observable.from([o?(e=t.getState(),n=e.annotations.editing,r={featureProjection:"EPSG:4326",stopAfterDrawing:!oo(e),editEnabled:!1,selectEnabled:!1,translateEnabled:!1,drawEnabled:!1,transformToFeatureCollection:!0,geodesic:$o(e)},n=Yo(n),(0,Yr.Yf)("drawOrEdit",e.draw.drawMethod,E.jB,[n],r,n.style)):Qo(t.getState())])}))},removeAnnotationEpic:function(e,t){return e.ofType(Rr.c4).switchMap((function(e){if("geometry"===e.attribute){var n=t.getState(),r=(0,E.HG)(n.annotations.selected,n.annotations.editing).editing,o=n.annotations.featureType,i={featureProjection:"EPSG:4326",stopAfterDrawing:!oo(n),editEnabled:!0,drawEnabled:!1,selectEnabled:!0,editFilter:function(e){return e.getProperties().canEdit},useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:$o(n)};return Ur().Observable.from([(0,Yr.Yf)("replace",o,E.jB,[r],{}),(0,Yr.Yf)("drawOrEdit",o,E.jB,[r],i,a()({},r.style,{highlight:!1}))])}var l=ro(t.getState()).features.filter((function(t){return t.properties.id!==e.id}));return Ur().Observable.from([(0,zr.tV)(E.jB,"layer",{features:l}),(0,qr.aN)(),(0,qr.g)(),(0,qr.Mc)()].concat(0===l.length?[(0,zr.$o)(E.jB)]:[]))}))},openEditorEpic:function(e){return e.ofType(Rr.Mf).switchMap((function(e){return Ur().Observable.from([(0,qr.Mc)(),(0,d.Xg)(E.jB,"enabled",!0),(0,Rr.MQ)(e.id),(0,Rr.VR)(e.id)])}))},saveAnnotationEpic:function(e,t){return e.ofType(Rr.Lv).switchMap((function(e){var n,r=m()(t.getState().layers.flat.filter((function(e){return e.id===E.jB}))),o=e.geometry;return Ur().Observable.from((r?[(0,zr.tV)(E.jB,"layer",{features:ro(t.getState()).features.map((function(t){return a()({},t,{properties:t.properties.id===e.id?a()({},t.properties,e.properties,e.fields):t.properties,features:t.properties.id===e.id?o:t.features,style:t.properties.id===e.id?e.style:t.style})})).concat(e.newFeature?[Jo(e)]:[]),visibility:!v()(null==e||null===(n=e.properties)||void 0===n?void 0:n.visibility)&&e.properties.visibility})]:[(0,zr.A4)({type:"vector",visibility:!0,id:E.jB,name:"Annotations",hideLoading:!0,style:e.style,features:[Jo(e)],handleClickOnLayer:!0})]).concat([(0,Yr.Yf)("clean",t.getState().annotations.featureType||"",E.jB,[],{})].concat(Lo(e.newFeature?[(0,Rr.r1)(e.id,!0)]:[]))))}))},cancelEditAnnotationEpic:function(e,t){return e.ofType(Rr.hv).switchMap((function(e){var n=(null==e?void 0:e.properties)||{},r=n.id,o=n.visibility;return Ur().Observable.from([(0,Yr.Yf)("clean",t.getState().annotations.featureType||"",E.jB,[],{}),(0,Rr.r1)(r,o)])}))},purgeMapInfoEpic:function(e,t){return e.ofType(qr.DZ).filter((function(){return yn()(t.getState(),"draw.drawOwner","")===E.jB})).switchMap((function(){return Ur().Observable.from([(0,Yr.Yf)("clean",t.getState().annotations.featureType||"",E.jB,[],{})])}))},startDrawingMultiGeomEpic:function(e,t){return e.ofType(Rr.Np).filter((function(){return t.getState().annotations.editing.features&&!!t.getState().annotations.editing.features.length||"Circle"===t.getState().annotations.featureType})).switchMap((function(){var e=t.getState(),n=e.annotations.editing,r=e.annotations.featureType,o=e.annotations.defaultTextAnnotation,i={featureProjection:"EPSG:4326",stopAfterDrawing:!oo,editEnabled:"Circle"!==r,translateEnabled:!1,drawEnabled:"Circle"===r,useSelectedStyle:!0,editFilter:function(e){return e.getProperties().canEdit},defaultTextAnnotation:o,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:$o(e)};return Ur().Observable.of((0,Yr.Yf)("drawOrEdit",r,E.jB,[n],i,a()({},n.style,{highlight:!1})))}))},endDrawGeomEpic:function(e,t){return e.ofType(Yr.DI).filter((function(e){return e.owner===E.jB})).switchMap((function(e){return Ur().Observable.from([(0,Rr.nY)(Ko(e.features),e.textChanged,e.circleChanged)].concat(!oo(t.getState())&&t.getState().annotations.drawing?[(0,Rr.kg)()]:[]))}))},setAnnotationStyleEpic:function(e,t){return e.ofType(Rr.sL).switchMap((function(){var e=Yo(t.getState().annotations.editing).features,n=t.getState().annotations.selected,r=D()(e,(function(e){return e.properties.id===n.properties.id})),o=(0,$r.reprojectGeoJson)(r,"EPSG:4326","EPSG:3857");return Ur().Observable.from([(0,Yr.Yf)("updateStyle",t.getState().annotations.featureType,E.jB,[o],{},a()({},n.style,{highlight:!1}))])}))},restoreStyleEpic:function(e,t){return e.ofType(Rr.B6).switchMap((function(){var e=t.getState().annotations,n=e.styling,r=e.editing,o=r.style,i=Wo(r,Bo);return Ur().Observable.from([(0,Yr.Yf)("replace",t.getState().annotations.featureType,E.jB,[i],{},o),(0,Rr.A_)(t.getState().annotations.originalStyle),Xo(t.getState()),(0,Rr.ob)(!n)])}))},highlightAnnotationEpic:function(e,t){return e.ofType(Rr.X2).switchMap((function(e){return Ur().Observable.of((0,zr.tV)(E.jB,"layer",{features:ro(t.getState()).features.map((function(t){return t.properties.id===e.id?a()({},t,{features:t.features&&t.features.length&&t.features.map((function(e){return a()({},e,{style:M()(e.style).map((function(e){return a()({},e,{highlight:!0})}))})}))||[]}):t}))}))}))},showHideAnnotationEpic:function(e,t){return e.ofType(Rr.cM,zr.yS).filter((function(e){return e.type===zr.yS&&e.layer===E.jB&&!v()(e.newProperties.visibility)||e.type===Rr.cM})).switchMap((function(e){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a()({},e,{properties:qo(qo({},e.properties),{},{visibility:t})})},r=t.getState(),o=e.layer===E.jB,i=ro(r),l=!p()(yo(r));if(!p()(i)){var s,c,u=(i.features||[]).map((function(e){return qo(qo({},e),{},{properties:qo(qo({},e.properties),{},{visibility:!!v()(e.properties.visibility)||e.properties.visibility})})})),f=!(null===(s=u=u.map((function(t){var r;return o?n(t,null==e||null===(r=e.newProperties)||void 0===r?void 0:r.visibility):t.properties.id===e.id?n(t,v()(e.visibility)?!t.properties.visibility:e.visibility):t})))||void 0===s||null===(c=s.filter((function(e){return e.properties.visibility})))||void 0===c||!c.length);return Ur().Observable.of((0,zr.tV)(E.jB,"layer",qo({features:u},!l&&{visibility:f})))}return Ur().Observable.empty()}))},hideAnnotationGroupEpic:function(e,t){return e.ofType(zr.ms).filter((function(e){var n=m()(((0,Xr.Bt)(t.getState())||[]).filter((function(t){return t.id===e.group})));return-1!==N()(n.nodes,(function(e){return e.id===E.jB}))&&!v()(e.newProperties.visibility)})).switchMap((function(e){var n=t.getState(),r=ro(n);if(!p()(r)&&!p()(r.features)){var o=r.features.map((function(t){return qo(qo({},t),{},{properties:qo(qo({},t.properties),{},{visibility:e.newProperties.visibility})})}));return Ur().Observable.of((0,zr.tV)(E.jB,"layer",{features:o}))}return Ur().Observable.empty()}))},cleanHighlightAnnotationEpic:function(e,t){return e.ofType(Rr.dC).switchMap((function(){var e=ro(t.getState());return e&&e.features&&e.features.length?Ur().Observable.of((0,zr.tV)(E.jB,"layer",{features:e.features.map((function(e){return a()({},e,{features:e.features&&e.features.length&&e.features.map((function(e){return a()({},e,{style:M()(e.style).map((function(e){return a()({},e,{highlight:!1})}))})}))||[]})}))})):Ur().Observable.empty()}))},tearDownByDrawingToolsEpic:function(e,t){return(0,Go.U)(e,t,"annotations",(function(){return Ur().Observable.of((0,qr.g)())}))},closeAnnotationsEpic:function(e,t){return e.ofType(d.kM).filter((function(e){return e.control===E.jB&&!t.getState().controls.annotations.enabled})).switchMap((function(){var e;return Ur().Observable.from([(0,Rr.Rx)(),(0,Yr.Yf)("clean",(null===(e=t.getState().annotations)||void 0===e?void 0:e.featureType)||"",E.jB,[],{})])}))},confirmCloseAnnotationsEpic:function(e,t){return e.ofType(Rr.bI).switchMap((function(e){var n=(null==e?void 0:e.properties)||{},r=n.id,o=n.visibility;return Ur().Observable.from((t.getState().controls.annotations&&t.getState().controls.annotations.enabled?[(0,d.Xi)(E.jB),(0,Rr.r1)(r,o)]:[]).concat([(0,qr.g)()]))}))},downloadAnnotations:function(e,t){var n=t.getState;return e.ofType(Rr.HN).switchMap((function(e){var t=e.annotation;try{var r=t&&[t]||ro(n()).features,o=(0,Qr.Zs)(n());return(0,Vr.saveAs)(new Blob([JSON.stringify({features:r,type:E.Mc})],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||"Annotations",".json")),Ur().Observable.empty()}catch(e){return Ur().Observable.of((0,Hr.vU)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}}))},onLoadAnnotations:function(e,t){var n=t.getState;return e.ofType(Rr.Bm).switchMap((function(e){var t=e.features,r=e.override,o=ro(n()),i=(n().locale||{}).messages,a=void 0===i?{}:i,l=o&&o.features||[],s=t.map((function(e){return(0,E.TW)(e,a)})),c=r?s:l.concat(s),u=o?(0,zr.tV)(E.jB,"layer",{features:(0,E.be)(c)}):(0,zr.A4)({type:"vector",visibility:!0,id:E.jB,name:"Annotations",hideLoading:!0,features:c,handleClickOnLayer:!0});return Ur().Observable.of(u)}))},onChangedSelectedFeatureEpic:function(e,t){var n=t.getState;return e.ofType(Rr.Kz).switchMap((function(e){var t,r;Vo(e);var o=n(),i=(0,E.HG)(o.annotations.selected,o.annotations.editing),l=i.selected,s=i.editing,c=l.geometry.type;null!==(t=l.properties)&&void 0!==t&&t.isCircle&&(c="Circle"),null!==(r=l.properties)&&void 0!==r&&r.isText&&(c="Text");var u=oo(o),p=s.style,f=(0,Yr.Yf)("drawOrEdit",c,E.jB,[s],{featureProjection:"EPSG:4326",stopAfterDrawing:!u,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},useSelectedStyle:!0,drawEnabled:!1,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:$o(o)},a()({},p,{highlight:!1}));return Ur().Observable.of(f)}))},onBackToEditingFeatureEpic:function(e,t){var n=t.getState;return e.ofType(Rr.gT,Rr.op,Rr.cv).switchMap((function(e){Vo(e);var t=n(),r=t.annotations.editing,o=oo(t),i=r.style,l=(0,Yr.Yf)("drawOrEdit","",E.jB,[r],{featureProjection:"EPSG:4326",stopAfterDrawing:!o,editEnabled:!1,drawEnabled:!1,selectEnabled:!0,transformToFeatureCollection:!0},a()({},i,{highlight:!1}));return Ur().Observable.of(l)}))},redrawOnChangeTextEpic:function(e,t){var n=t.getState;return e.ofType(Rr.CO).switchMap((function(){var e=n(),t=e.annotations.editing,r=e.annotations.selected,o=oo(e),i=t.style;r=(0,z.t8)("geometry.coordinates",[r.geometry.coordinates].filter(E.qs)[0]||[],r),r=(0,z.t8)("geometry.type","Point",r);var l=N()(t.features,(function(e){return e.properties.id===r.properties.id}));(0,E.qs)(r.geometry.coordinates)?t=-1===l?(0,z.t8)("features",t.features.concat([r]),t):(0,z.t8)("features[".concat(l,"]"),r,t):(r=(0,z.t8)("geometry",null,r),t=-1!==l?(0,z.t8)("features[".concat(l,"]"),r,t):(0,z.t8)("features",t.features.concat([r]),t));var s=(0,Yr.Yf)("drawOrEdit","Text",E.jB,[t],{featureProjection:"EPSG:4326",stopAfterDrawing:!o,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},drawEnabled:!1,useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0},a()({},i,{highlight:!1}));return Ur().Observable.of(s)}))},redrawOnChangeRadiusEpic:function(e,t){var n=t.getState;return e.ofType(Rr.JT).switchMap((function(){var e=n(),t=e.annotations.editing,r=e.annotations.selected,o=oo(e),i=t.style,l=N()(t.features,(function(e){return e.properties.id===r.properties.id}));r=r.properties.isValidFeature?(0,z.t8)("geometry",r.properties.polygonGeom,r):(0,z.t8)("geometry",{type:"Polygon",coordinates:[[]]},r),t=-1===l?(0,z.t8)("features",t.features.concat([r]),t):(0,z.t8)("features[".concat(l,"]"),r,t);var s=(0,Yr.Yf)("drawOrEdit","Circle",E.jB,[t],{featureProjection:"EPSG:4326",stopAfterDrawing:!o,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},drawEnabled:!1,useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:$o(e)},a()({},i,{highlight:!1}));return Ur().Observable.of(s)}))},editSelectedFeatureEpic:function(e,t){var n=t.getState;return e.ofType(Yr.iU).switchMap((function(){var e=n(),t=e.annotations.editing,r=e.annotations.selected,o=oo(e),i=t.style,l=r.geometry.type;r.properties.isCircle&&(l="Circle"),r.properties.isText&&(l="Text");var s=(0,Yr.Yf)("drawOrEdit",l,E.jB,[t],{featureProjection:"EPSG:4326",stopAfterDrawing:!o,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},drawEnabled:!1,useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:$o(e)},a()({},i,{highlight:!1}));return Ur().Observable.of((0,Yr.Yf)("clean"),s)}))},highlightGeometryEpic:function(e,t){var n=t.getState;return e.ofType(Rr.qX).switchMap((function(e){var t=e.id,r=void 0===t?"":t,o=e.state,i=void 0===o||o,l=n().annotations,s=l.editing,c=l.featureType,u=N()(s.features,(function(e){return e.properties.id===r})),p=s.features[u],f=M()(p.style).map((function(e){return qo(qo({},e),{},{highlight:i})})),d=(0,Yr.Yf)("updateStyle",c,E.jB,[(0,z.t8)("features[".concat(u,"]"),(0,z.t8)("style",f,p),s)],{transformToFeatureCollection:!0},a()({},s.style,{highlight:!1}));return Ur().Observable.of((0,Yr.Yf)("clean"),d)}))},editCircleFeatureEpic:function(e,t){var n=t.getState;return e.ofType(Yr.W7).filter((function(e){return e.features[0].properties&&e.features[0].properties.isCircle})).delay(300).switchMap((function(){var e=n(),t=e.annotations.editing,r=oo(e),o=t.style,i=(0,Yr.Yf)("drawOrEdit","Circle",E.jB,[t],{featureProjection:"EPSG:4326",stopAfterDrawing:!r,editEnabled:!0,translateEnabled:!1,editFilter:function(e){return e.getProperties().canEdit},drawEnabled:!1,useSelectedStyle:!0,transformToFeatureCollection:!0,addClickCallback:!0,geodesic:$o(e)},a()({},o,{highlight:!1}));return Ur().Observable.of(i)}))},loadDefaultAnnotationsStylesEpic:function(e,t){return e.ofType(Rr.it).switchMap((function(e){var n,r=e.shape,o=void 0===r?E.xw:r,i=e.size,a=void 0===i?64:i,l=e.fillColor,s=void 0===l?"#000000":l,c=e.strokeColor,u=void 0===c?"#000000":c,p=e.symbolsPath,f=void 0===p?E.Fi:p,d=Fo(t.getState())||[],y={symbol:function(){var e=qo(qo({},E.j5),{},{shape:o,size:a,fillColor:s,color:u,symbolUrl:f+o+".svg"});return Ur().Observable.defer((function(){return x().get(e.symbolUrl).then((function(){return(0,W.createSvgUrl)(e,e.symbolUrlCustomized||e.symbolUrl)}))})).map((function(t){return(0,Rr.WB)("POINT.symbol",qo(qo({},e),{},{symbolUrlCustomized:t}))})).catch((function(){return Ur().Observable.of((0,Rr.Y5)(d.concat(["loading_symbol"+o])),(0,Rr.WB)("POINT.symbol",qo(qo({},e),{},{symbolUrlCustomized:No(),symbolUrl:f+o+".svg",shape:o})))}))},marker:function(){return Ur().Observable.of((0,Rr.WB)("POINT.marker",E.bi))}};return(n=Ur().Observable).merge.apply(n,Lo(tr()(y).map((function(e){return e()})))).startWith((0,Rr.V_)(!0)).concat(Ur().Observable.of((0,Rr.V_)(!1)))}))}};var ti=n(801550),ni=n(55105),ri=n(396606),oi=n(51736);function ii(e){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ii(e)}function ai(){return ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ai.apply(this,arguments)}function li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mi(r.key),r)}}function si(e,t,n){return t=ui(t),function(e,t){if(t&&("object"===ii(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ci()?Reflect.construct(t,n||[],ui(e).constructor):t.apply(e,n))}function ci(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ci=function(){return!!e})()}function ui(e){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ui(e)}function pi(e,t){return pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pi(e,t)}function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yi(e,t,n){return(t=mi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mi(e){var t=function(e,t){if("object"!=ii(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ii(t)?t:String(t)}var gi={onUpdateSymbols:Rr.z_,onSetErrorSymbol:Rr.Y5,onEdit:Rr.VR,onCancelEdit:Rr.QD,onChangeFormat:Rr.Zw,onConfirmDeleteFeature:Rr.pv,onCleanHighlight:Rr.Rx,onHighlightPoint:Rr.aS,onHighlight:Rr.CH,onError:Rr.Bp,onSave:Rr.xD,onRemove:Rr._x,onAddGeometry:Rr.kg,onAddText:Rr.F4,onSetUnsavedChanges:Rr.if,onSetUnsavedStyle:Rr.tp,onChangeProperties:Rr.Om,onToggleDeleteFtModal:Rr.Ay,onToggleUnsavedChangesModal:Rr.ts,onToggleUnsavedGeometryModal:Rr.UJ,onToggleUnsavedStyleModal:Rr.yw,onAddNewFeature:Rr.TA,onResetCoordEditor:Rr.nz,onStyleGeometry:Rr.ob,onCancelStyle:Rr.nk,onChangeSelected:Rr.i9,onSaveStyle:Rr.ob,onSetStyle:Rr.A_,onStartDrawing:Rr.y$,onDeleteGeometry:Rr.dT,onZoom:ti.Px,onSelectFeature:Yr.KD,onChangeRadius:Rr.om,onSetInvalidSelected:Rr.$f,onChangeText:Rr.XW,onChangeGeometryTitle:Rr.Dd,onCancelRemove:Rr.iY,onCancelClose:Rr.Hl,onConfirmClose:Rr.L0,onConfirmRemove:Rr.jw,onDownload:Rr.LR,onFilterMarker:Rr.TW,onGeometryHighlight:Rr.$,onSetAnnotationMeasurement:Wr.pO,onHideMeasureWarning:Rr.Y_,onToggleShowAgain:Rr.Ib,onInitPlugin:Rr.QT,onUnSelectFeature:Rr.RC,onValidateFeature:Rr._n},bi=(0,f.$j)(Zo,di({onCancel:Rr.l7},gi))($n),hi=(0,f.$j)(Zo,di(di({},gi),{},{onEdit:Rr.bM}))($n),vi=(0,c.P1)([Do],(function(e){return di(di({},e),{},{editor:bi})})),Si=(0,f.$j)(vi,{onCancelRemove:Rr.iY,onCancelStyle:Rr.nk,onCancelEdit:Rr.QD,onToggleUnsavedChangesModal:Rr.ts,onToggleUnsavedStyleModal:Rr.yw,onToggleUnsavedGeometryModal:Rr.UJ,onConfirmRemove:Rr.jw,onToggleVisibility:Rr.r1,onCancelClose:Rr.Hl,onConfirmClose:Rr.L0,onAdd:Rr.A9,onEdit:Rr.VR,onHighlight:Rr.CH,onCleanHighlight:Rr.Rx,onDetail:Rr.MQ,onFilter:Rr.VP,onDownload:Rr.LR,onZoom:ti.Px,onLoadAnnotations:Rr.wP,onLoadDefaultStyles:Rr.pI})(Nr),wi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),si(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pi(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){(0,ri.j9)(E.jB,hi)}},{key:"componentWillUnmount",value:function(){(0,ri.j9)(E.jB,void 0)}},{key:"render",value:function(){return this.props.active?o().createElement(oi.Z,ai({containerId:"annotations-panel",className:"ms-annotations-panel",containerStyle:this.props.dockStyle,hideHeader:!0,style:this.props.dockStyle,open:this.props.active,size:this.props.width},this.props.dockProps),o().createElement(Si,ai({},this.props,{width:this.props.width}))):null}}])&&li(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);yi(wi,"propTypes",{id:s().string,active:s().bool,wrap:s().bool,wrapWithPanel:s().bool,panelStyle:s().object,panelClassName:s().string,toggleControl:s().func,closeGlyph:s().string,buttonStyle:s().object,style:s().object,dockProps:s().object,dockStyle:s().object,width:s().number}),yi(wi,"defaultProps",{id:"mapstore-annotations-panel",active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"annotations-panel",toggleControl:function(){},closeGlyph:"1-close",width:300,dockProps:{dimMode:"none",position:"left",zIndex:1030},dockStyle:{}});var Ei=d.on.bind(null,(0,d.Xi)("annotations",null),(function(e){return!(e.controls&&e.controls.annotations&&e.controls.annotations.enabled&&e.annotations&&e.annotations.editing)}),Rr.g),Oi=(0,c.P1)([function(e){return e.controls&&e.controls.annotations&&e.controls.annotations.enabled||e.annotations&&e.annotations.closing||!1},function(e){return(0,ni.ic)(e,{height:!0})},Do],(function(e,t,n){return{active:e,dockStyle:t,width:p()(null==n?void 0:n.selected)?300:600}})),Ci=(0,f.$j)(Oi,{toggleControl:Ei})(wi);const Pi=(0,f.rx)("Annotations",{component:a()(Ci,{disablePluginIf:"{state('mapType') === 'cesium' || state('mapType') === 'leaflet' }"}),containers:{TOC:{doNotHide:!0,name:"Annotations",target:"toolbar",selector:function(){return!0},Component:(0,f.$j)((function(){}),{onClick:Ei})((function(e){var t,n=e.onClick,r=e.layers,i=e.selectedLayers;return"DESELECT"===e.status&&0===r.filter((function(e){return"annotations"===e.id})).length?o().createElement(un.Z,{key:"annotations",placement:"top",overlay:o().createElement(S.Tooltip,{id:"legend-tooltip-annotations"},o().createElement(C.Z,{msgId:"toc.addAnnotations"}))},o().createElement(Or.Z,{key:"annotations",bsStyle:"primary",className:"square-button-md",onClick:n},o().createElement(S.Glyphicon,{glyph:"comment"}))):"annotations"===(null===(t=i[0])||void 0===t?void 0:t.id)&&o().createElement(un.Z,{key:"annotations-edit",placement:"top",overlay:o().createElement(S.Tooltip,{id:"legend-tooltip-annotations-edit"},o().createElement(C.Z,{msgId:"toc.editAnnotations"}))},o().createElement(Or.Z,{key:"annotations",bsStyle:"primary",className:"square-button-md",onClick:n},o().createElement(S.Glyphicon,{glyph:"pencil"})))}))},BurgerMenu:{name:"annotations",position:40,text:o().createElement(C.Z,{msgId:"annotationsbutton"}),tooltip:"annotations.tooltip",icon:o().createElement(S.Glyphicon,{glyph:"comment"}),action:Ei,priority:2,doNotHide:!0}},reducers:{annotations:Gr.Z},epics:ei})},925677:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(727418),o=n.n(r),i=n(986267),a=n(168898),l=n(921914),s=n(782904),c=n(604206),u=n(242780),p=n(658767),f=n(761868),d=n(984596),y=n.n(d),m=n(630998),g=n.n(m),b=n(227361),h=n.n(b),v=n(91175),S=n.n(v),w=n(414293),E=n.n(w),O=n(512571),C=n.n(O),P=n(455877),j=n.n(P),T=n(415124);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){var r;return r=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==k(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e,t){switch(t){case"Polygon":return[e];case"LineString":case"MultiPoint":return e;default:return e[0]}};const _=function(){var e,t,n,r,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{validationErrors:{}},m=arguments.length>1?arguments[1]:void 0;switch(m.type){case u.Xp:try{return F(F({},d),{},{showPopupWarning:null===(0,T.ac)().getItem("showPopupWarning")||"true"===(0,T.ac)().getItem("showPopupWarning")})}catch(e){return console.error(e),d}case u.Kz:var b,v=(0,f.t8)("unsavedGeometry",!0,d),w=m.coordinates,O=m.radius,P=m.text,k=g()(d.editing.features,(function(e){return e.properties.id===d.selected.properties.id})),x=-1===k?{type:"Feature",geometry:{type:d.selected.geometry.type},properties:F({},d.selected.properties)}:o()({},d.editing.features[k]);(x.geometry&&!x.geometry.type||!x.geometry)&&(x=(0,f.t8)("geometry.type",d.selected.geometry.type,x)),E()(w)||(b=w,x.geometry.type,x=o()({},x,{geometry:o()({},x.geometry,{coordinates:A(b,x.geometry.type)})}));var _,Z=o()({},x);if(Z.properties.isCircle){var D,I=E()(w)?d.selected.properties.center:b[0];Z=o()({},F(F({},Z),{},{properties:F(F({},d.selected.properties),{},{center:I,radius:E()(O)?Z.properties.radius:O})})),_=d.editing.features.map((function(e){return e.properties.id===d.selected.properties.id?Z:e})),Z=F(F({},Z),{},{geometry:{coordinates:I,type:"Circle"}});var N={type:"Polygon",coordinates:[[[]]]};if((0,p.qs)(Z.properties.center)){var G;D=Z.properties.center;var R=null!==(G=m.radius)&&void 0!==G?G:1e-4;N=(0,a.Z)(D,"EPSG:4326"===m.crs?R:R/1e3,{steps:100,units:"EPSG:4326"===m.crs?"degrees":"kilometers"}).geometry}else Z=(0,f.t8)("properties.center",[],Z);Z=(0,f.t8)("properties.polygonGeom",N,Z)}else if(Z.properties.isText){var B=E()(w)?d.selected.geometry.coordinates:b[0];Z=o()({},F(F({},Z),{},{properties:F(F({},d.selected.properties),{},{valueText:E()(P)?d.selected.properties.valueText:P})})),_=d.editing.features.map((function(e){return e.properties.id===d.selected.properties.id?Z:e})),Z=F(F({},Z),{},{geometry:{coordinates:B,type:"Point"}})}else _=d.editing.features.map((function(e){return e.properties.id===d.selected.properties.id?Z:e})),Z=F(F({},Z),{},{geometry:F(F({},Z.geometry),{},{coordinates:A(E()(w)?Z.geometry.coordinates:w,Z.geometry.type)})});return Z=(0,f.t8)("properties.isValidFeature",(0,p._n)({properties:Z.properties,components:(0,p.OQ)(Z.geometry),type:Z.geometry.type}),Z),o()({},v,{editing:F(F({},v.editing),{},{features:_}),selected:Z,unsavedChanges:!0});case c.iU:var U=d,V=S()(m.features)||null;if(!V)return d;(V=(0,f.t8)("properties.canEdit",!0,V))&&V.properties&&V.properties.isCircle&&(V=(0,f.t8)("geometry.coordinates",V.properties.center,V),V=(0,f.t8)("geometry.type","Circle",V)),V&&V.properties&&V.properties.isText&&(V=(0,f.t8)("geometry.type","Text",V));var L=g()(d.editing.features,(function(e){return e.properties.id===V.properties.id})),z=V;return V&&V.properties&&V.properties.isCircle?V.properties.polygonGeom?z=(0,f.t8)("geometry",V.properties.polygonGeom,z):(z=(0,f.t8)("geometry.coordinates",[],z),z=(0,f.t8)("geometry.type","Polygon",z)):V&&V.properties&&V.properties.isText&&(z=(0,f.t8)("geometry.type","Point",z)),U=(0,f.t8)("editing.features",d.editing.features.map((function(e){return(0,f.t8)("properties.canEdit",!1,e)})),d),U=(0,f.t8)("editing.tempFeatures",U.editing.features,U),U=(0,f.t8)("editing",(0,p.Rj)(U.editing,{highlight:!1}),U),-1===L?U=(0,f.t8)("editing.features",U.editing.features.concat([z]),U):(z=(0,f.t8)("style",y()(U.editing.features[L].style).map((function(e){return F(F({},e),{},{highlight:!0})})),z),U=(0,f.t8)("editing.features[".concat(L,"]"),z,U),V=(0,f.t8)("style",U.editing.features[L].style,V)),o()({},U,{selected:V,coordinateEditorEnabled:!!V,featureType:V.geometry.type});case c.W7:var W=S()(m.features)||null;W=(0,f.t8)("style",d.selected.style,W);var H=d;W&&W.properties&&W.properties.isCircle?(W=(0,f.t8)("properties.polygonGeom",W.geometry,W),W=(0,f.t8)("geometry",{coordinates:W.properties.center,type:"Circle"},W)):W&&W.properties&&W.properties.isText&&(W=(0,f.t8)("geometry.type","Text",W)),W=(0,f.t8)("properties.isValidFeature",(0,p._n)({properties:W.properties,components:(0,p.OQ)(W.geometry),type:W.geometry.type}),W),W=(0,f.t8)("properties.canEdit",!0,W),H=(0,f.t8)("editing.features",d.editing.features.map((function(e){return(0,f.t8)("properties.canEdit",!1,e)})),d);var q=g()(d.editing.features,(function(e){return e.properties.id===W.properties.id})),Y=W;return W&&W.properties&&W.properties.isCircle?W.properties.polygonGeom?Y=(0,f.t8)("geometry",W.properties.polygonGeom,Y):(Y=(0,f.t8)("geometry.coordinates",[],Y),Y=(0,f.t8)("geometry.type","Polygon",Y)):W&&W.properties&&W.properties.isText&&(Y=(0,f.t8)("geometry.type","Point",Y)),H=(0,f.t8)("unsavedGeometry",!0,H),H=-1===q?(0,f.t8)("editing.features",H.editing.features.concat([Y]),H):(0,f.t8)("editing.features[".concat(q,"]"),Y,H),o()({},H,{selected:W,unsavedChanges:!0,stylerType:S()((0,p.Gk)((0,p.qS)(W.geometry)))});case u.DX:return o()({},d,{removing:m.id});case u.JT:var $,X=(0,f.t8)("properties.radius",m.radius,d.selected);X=(0,f.t8)("properties.isValidFeature",(0,p._n)({properties:X.properties,components:(0,p.OQ)({coordinates:m.components[0]||[],type:"Circle"}),type:"Circle"}),X),X=(0,f.t8)("properties.center",m.components[0],X),X=(0,f.t8)("geometry.coordinates",m.components[0],X);var Q=(0,a.Z)(X.properties.center,"EPSG:4326"===m.crs?m.radius:m.radius/1e3,{steps:100,units:"EPSG:4326"===m.crs?"degrees":"kilometers"});X=(0,f.t8)("properties.polygonGeom",Q.geometry,X);var K=g()(d.editing.features,(function(e){return e.properties.id===d.selected.properties.id})),J=(0,f.t8)("geometry",X.properties.polygonGeom,X);return $=(0,f.t8)("editing.features",d.editing.features.map((function(e){return(0,f.t8)("properties.canEdit",!1,e)})),d),$=(0,f.t8)("unsavedGeometry",!0,$),$=-1===K?(0,f.t8)("editing.features",$.editing.features.concat([J]),$):(0,f.t8)("editing.features[".concat(K,"]"),J,$),o()({},$,{selected:X,unsavedChanges:!0,circleCoordinates:m.components[0]});case u.CO:var ee,te=(0,f.t8)("properties.valueText",m.text,d.selected);te=(0,f.t8)("style[0].label",m.text,te),te=(0,f.t8)("properties.isValidFeature",(0,p._n)({properties:te.properties,components:(0,p.OQ)({coordinates:m.components[0]||[],type:"Text"}),type:"Text"}),te),te=(0,f.t8)("properties.isText",!0,te),te=(0,f.t8)("geometry.coordinates",m.components[0]||[[]],te);var ne=g()(d.editing.features,(function(e){return e.properties.id===d.selected.properties.id})),re=(0,f.t8)("geometry.type","Point",te);return ee=(0,f.t8)("editing.features",d.editing.features.map((function(e){return(0,f.t8)("properties.canEdit",!1,e)})),d),ee=(0,f.t8)("unsavedGeometry",!0,ee),ee=-1===ne?(0,f.t8)("editing.features",ee.editing.features.concat([re]),ee):(0,f.t8)("editing.features[".concat(ne,"]"),re,ee),o()({},ee,{selected:te,unsavedChanges:!0});case u.gT:var oe=(0,f.t8)("editing.features",d.editing.features.map((function(e){return(0,f.t8)("properties.canEdit",!1,e)})),d),ie=oe.editing.features,ae=oe.editing.tempFeatures;return"Circle"!==d.featureType&&d.drawing&&(ae=C()(ie,0,ie.length-1)),o()({},oe,{editing:F(F({},oe.editing),{},{features:ae}),drawing:!1,coordinateEditorEnabled:!1,unsavedGeometry:!1,selected:null,showUnsavedGeometryModal:!1});case u.cv:var le=d.editing,se=d.selected,ce=g()(le.features,(function(e){return e.properties.id===se.properties.id})),ue=le.features[ce],pe=y()(ue.style).map((function(e){return F(F({},e),{},{highlight:!1})}));le=(0,f.t8)("features[".concat(ce,"]"),(0,f.t8)("style",pe,ue),le);var fe=(0,f.t8)("editing.features",le.features.map((function(e){return(0,f.t8)("properties.canEdit",!1,e)})),d);return o()({},fe,{drawing:!1,coordinateEditorEnabled:!1,unsavedGeometry:!1,selected:null,showUnsavedGeometryModal:!1});case u.NV:var de=d.selected,ye=d;de.properties&&de.properties.isCircle&&(de=(0,f.t8)("geometry",de.properties.polygonGeom,de)),de.properties&&de.properties.isText&&(de=(0,f.t8)("geometry.type","Point",de)),de.properties&&de.properties.useGeodesicLines&&(de=(0,f.t8)("properties.geometryGeodesic",{type:"LineString",coordinates:(0,i.transformLineToArcs)(de.geometry.coordinates)},de)),de=(0,f.t8)("properties.canEdit",!1,de);var me=g()(d.editing.features,(function(e){return e.properties.id===d.selected.properties.id}));return-1===me?ye=(0,f.t8)("editing.features",ye.editing.features.concat([de]),ye):(de=(0,f.t8)("style",y()(ye.editing.features[me].style).map((function(e){return F(F({},e),{},{highlight:!1})})),de),ye=(0,f.t8)("editing.features[".concat(me,"]"),de,ye)),ye=F(F({},ye=(0,f.t8)("editing.tempFeatures",ye.editing.features,ye)),{},{editing:F(F({},ye.editing),{},{properties:F(F({},ye.editing.properties),ye.editedFields)})}),o()({},ye,{coordinateEditorEnabled:!1,drawing:!1,unsavedGeometry:!1,selected:null,config:F(F({},ye.config),{},{filter:""})});case u.Ns:if(!m.feature||"FeatureCollection"!==m.feature.type)return d;var ge=(0,f.t8)("features",m.feature.features.map((function(e){return(0,f.t8)("properties.canEdit",!1,e)})),m.feature),be=(0,f.t8)("newFeature",h()(m.feature,"newFeature",!0),(0,f.t8)("properties.canEdit",!1,(0,f.t8)("tempFeatures",ge.features,ge))),he=(0,f.t8)("editing",be,d);return o()({},he,{coordinateEditorEnabled:!1,drawing:!1,unsavedGeometry:!1,selected:null,config:F(F({},he.config),{},{filter:""})});case u.Nj:return(0,f.t8)("showDeleteFeatureModal",!d.showDeleteFeatureModal,d);case u.op:var ve=(0,f.t8)("editing.features",d.editing.features.filter((function(e){return e.properties.id!==d.selected.properties.id})),d);return ve=(0,f.t8)("unsavedChanges",!0,ve),ve=(0,f.t8)("drawing",!1,ve),(0,f.t8)("coordinateEditorEnabled",!1,ve);case u.eK:return o()({},d,{drawingText:F(F({},d.drawingText),{},{drawing:!0})});case u.vG:var Se=(0,f.t8)("properties.isValidFeature",!1,d.selected);switch(m.errorFrom){case"text":Se=(0,f.t8)("properties.valueText",void 0,Se);break;case"radius":Se=(0,f.t8)("properties.radius",void 0,Se);break;case"coords":Se=(0,f.t8)("geometry.coordinates",A(m.coordinates,Se.geometry.type),Se)}return o()({},d,{selected:Se});case u.GW:return o()({},d,{removing:m.id,unsavedChanges:!0});case u.A1:var we=(0,p.KM)(m.feature.features),Ee=S()(m.feature.features),Oe=Ee&&Ee.geometry&&Ee.geometry.type;return Ee&&Ee.properties&&Ee.properties.isCircle&&(Oe="Circle"),Ee&&Ee.properties&&Ee.properties.isText&&(Oe="Text"),o()({},d,{editing:(0,p.Rj)(o()({},m.feature,{features:we}),{highlight:!1}),stylerType:S()((0,p.Gk)((0,p.qS)(m.feature.geometry||m.feature))),originalStyle:null,featureType:Oe});case u.CD:var Ce=j().v1();return o()({},d,{editing:{type:"FeatureCollection",id:Ce,geometry:null,features:[],newFeature:!0,properties:{id:Ce}},selected:{},originalStyle:null});case u.c4:var Pe=(null===(e=d.editing)||void 0===e||null===(t=e.features)||void 0===t?void 0:t.filter((function(e){return e.properties.id!==m.id})))||[],je=(null==d||null===(n=d.selected)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.id)===m.id||!1;return o()({},d,F(F({removing:null,stylerType:"",current:null},je&&{selected:null}),{},{editing:d.editing?o()({},d.editing,{features:Pe,style:{type:d.featureType}}):null}));case u.Hf:var Te=d,ke=g()(d.editing.features,(function(e){return e.properties.id===d.selected.properties.id})),xe=(0,f.t8)("properties.geometryTitle",m.title,d.editing.features[ke]),Fe=(0,f.t8)("properties.geometryTitle",m.title,d.selected);return F(F({},Te=(0,f.t8)("editing.features[".concat(ke,"]"),xe,Te)),{},{selected:Fe});case u.Ne:return o()({},d,{removing:null});case u.eY:return o()({},d,{closing:!0});case u.pC:return o()({},d,{unsavedChanges:m.unsavedChanges});case u.$l:return o()({},d,{unsavedStyle:m.unsavedStyle});case u.bI:return o()({},d,{closing:!1,coordinateEditorEnabled:!1});case u.Rr:return o()({},d,{closing:!1});case u.iO:return o()({},d,{showUnsavedChangesModal:!d.showUnsavedChangesModal});case u.R_:return o()({},d,{showUnsavedGeometryModal:!!d.unsavedGeometry&&!d.showUnsavedGeometryModal});case u.qO:return o()({},d,{showUnsavedStyleModal:!d.showUnsavedStyleModal});case u.zT:return o()({},d,{editedFields:o()({},d.editedFields,M({},m.field,m.value))});case u.hv:return o()({},d,{editing:null,drawing:!1,styling:!1,originalStyle:null,validationErrors:{},editedFields:{},unsavedChanges:!1});case u.Lv:return o()({},d,{editing:null,current:null,drawing:!1,styling:!1,originalStyle:null,validationErrors:{},editedFields:{},unsavedChanges:!1});case l.DZ:return o()({},d,{editing:null,removing:null,validationErrors:{},styling:!1,drawing:!1,originalStyle:null,selected:null,filter:null,unsavedChanges:!1,editedFields:{}});case u.mA:var Me,Ae,_e,Ze,De,Ie=m.featureType||d.featureType,Ne={id:j().v1(),isValidFeature:!1,canEdit:!0};"Text"===Ie&&(Ne=(0,f.t8)("isText",!0,Ne)),"Circle"===Ie&&(Ne=(0,f.t8)("isCircle",!0,Ne),Ne=(0,f.t8)("isDrawing",!0,Ne));var Ge={type:"Feature",geometry:{type:Ie,coordinates:(0,p.fo)(Ie)},properties:Ne,style:F(F({},"symbol"===(null===(Me=d.config)||void 0===Me?void 0:Me.defaultPointType)?null===(Ae=d.defaultStyles)||void 0===Ae||null===(_e=Ae.POINT)||void 0===_e?void 0:_e.symbol:null===(Ze=d.defaultStyles)||void 0===Ze?void 0:Ze.POINT.marker),{},{id:j().v1()})},Re=(0,f.t8)("geometry.type","Text"===Ie?"Point":"Circle"===Ie?"Polygon":Ie,Ge);Re=(0,f.t8)("geometry.coordinates","Circle"===Ie?[[]]:[],Re),Re=(0,f.t8)("geometry","Point"===Ie||"Text"===Ie?null:Re.geometry,Re);var Be=null===(De=d.editing.features.filter((function(e){var t,n=e.properties;return(null==n?void 0:n.id)!==(null==Ge||null===(t=Ge.properties)||void 0===t?void 0:t.id)})))||void 0===De?void 0:De.map((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.style=(null==t||null===(e=t.style)||void 0===e?void 0:e.map((function(e){return e.highlight=!1,e})))||[],t})),Ue=(0,f.t8)("editing.tempFeatures",Be,d);return o()({},d,{drawing:!Ue.drawing,featureType:Ie,drawingText:{show:!1,drawing:!1},validationErrors:{},coordinateEditorEnabled:!0,editing:o()({},Ue.editing,{features:Ue.editing.features.map((function(e){return(0,f.t8)("properties.canEdit",!1,e)})).concat([Re])}),stylerType:S()((0,p.Gk)((0,p.qS)(Ge.geometry))),selected:Ge});case u.Ge:var Ve=m.styling;return F(F({},d),{},{styling:Ve,originalStyle:Ve?d.selected&&d.selected.style:d.originalStyle,selected:(0,f.t8)("style",y()(d.selected&&d.selected.style).map((function(e){return F(F({},e),{},{highlight:!Ve})})),d.selected),editing:(0,f.t8)("features",(d.editing&&d.editing.features||[]).map((function(e){return F(F({},e),{},{style:y()(e.style).map((function(t){return F(F({},t),{},{highlight:!Ve&&e.properties.id===(d.selected&&d.selected.properties.id)})}))})})),d.editing)});case u.QY:return o()({},d,{validationErrors:m.errors});case u.sL:var Le=(0,f.t8)("style",m.style,d.selected),ze=g()(d.editing&&d.editing.features,(function(e){return e.properties.id===d.selected.properties.id}));if(-1!==ze){var We=(0,f.t8)("features[".concat(ze,"].style"),m.style,d.editing);return o()({},d,{selected:Le,editing:We})}return o()({},d,{selected:Le});case u.wq:return o()({},d,{current:m.id});case u.x9:return o()({},d,{current:null});case s.kM:return"annotations"===m.control?o()({},d,{current:null,editing:null,removing:null,validationErrors:{},styling:!1,drawing:!1,coordinateEditorEnabled:!1,filter:null,editedFields:{},originalStyle:null,selected:null}):d;case u.Fz:return m.point?o()({},d,{clickPoint:{latlng:{lat:m.point.lat,lng:m.point.lon}},showMarker:!0}):F(F({},d),{},{clickPoint:null,showMarker:!1});case u.GI:return F(F({},d),{},{format:m.format});case u.Cg:return F(F({},d),{},{symbolList:m.symbols||[]});case u.bO:return o()({},d,{filter:m.filter});case u.WD:return F(F({},d),{},{symbolErrors:m.symbolErrors});case u.rb:return(0,f.t8)("defaultStyles.".concat(m.path),m.style,d);case u.br:return(0,f.t8)("loading"===m.name?"loading":"loadFlags.".concat(m.name),m.value,(0,f.t8)("loading",m.value,d));case u.Ps:return F(F({},d),{},{config:F(F({},d.config),{},{filter:m.filter})});case u.aH:return F(F({},d),{},{showAgain:!d.showAgain});case u.U7:return F(F({},d),{},{showPopupWarning:!1});case u.Np:return F(F({},d),{},{config:F(F({},d.config),{},{geodesic:h()(m.options,"geodesic",!1)})});case u.M_:var He=d.editing.features.map((function(e){var t=(0,p._n)({properties:e.properties,components:(0,p.OQ)(e.geometry),type:(0,p.q9)(e)});return(0,f.t8)("properties.isValidFeature",t,e)}));return o()({},d,{editing:F(F({},d.editing),{},{features:He})});default:return d}}},172704:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""]);const i=o},218845:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/style/vector/iconNotFound.png"}}]);