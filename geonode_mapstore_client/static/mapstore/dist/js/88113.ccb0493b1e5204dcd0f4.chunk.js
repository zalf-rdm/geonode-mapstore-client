(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[88113],{501157:(e,t,n)=>{"use strict";n.d(t,{en:()=>C,FU:()=>G,gs:()=>$,tt:()=>k,jY:()=>F,QQ:()=>A,B8:()=>W,T6:()=>U,ZP:()=>N});var r=n(472500),a=n.n(r),o=n(701469),i=n.n(o),u=n(984596),c=n.n(u),l=n(227361),s=n.n(l),f=n(441609),p=n.n(f),g=n(264721),m=n.n(g),y=n(944908),v=n.n(y),d=n(727418),b=n.n(d),S=n(505055),h=n.n(S),L=n(375875),O=n.n(L),x=n(737275),w=n(986267),B=n(396606);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===P(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q={},C=function(e){var t=(i()(e)&&e||e.split(","))[0],n=a().parse(t,!0);return a().format(b()({},n,{search:null},{query:b()({service:"WMS",version:"1.3.0",request:"GetCapabilities"},n.query)}))},_=function(e){var t=e&&e.Title,n=e.LogoURL&&M(M({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),r=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:n,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:r}},D=function e(t){return t.Layer?(i()(t.Layer)&&t.Layer||[t.Layer]).reduce((function(t,n){return t.concat(e(n)).concat(n.Layer&&n.Name?[n]:[])}),[]):t.Name&&[t]||[]},T=function(){var e,t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,u=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,l=(a.WMS_Capabilities||a.WMT_MS_Capabilities||{}).Capability,s=(a.WMS_Capabilities||a.WMT_MS_Capabilities||{}).Service,f=(r=l).Request&&r.Request.GetMap&&r.Request.GetMap.DCPType&&r.Request.GetMap.DCPType.HTTP&&r.Request.GetMap.DCPType.HTTP.Get&&r.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&r.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,p=l.Layer&&(null===(e=l.Layer.SRS||l.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],g=l.Layer&&l.Layer.Attribution&&_(l.Layer.Attribution),m=l.Request&&l.Request.GetMap&&l.Request.GetMap.Format||[],y=D(l),v=(i()(y)?y:[y]).filter((function(e){return!c||-1!==e.Name.toLowerCase().indexOf(c.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(c.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(c.toLowerCase())}));return{numberOfRecordsMatched:v.length,numberOfRecordsReturned:Math.min(u,v.length),nextRecord:o+Math.min(u,v.length)+1,service:s,layerOptions:{version:(null===(t=a.WMS_Capabilities||a.WMT_MS_Capabilities)||void 0===t||null===(n=t.$)||void 0===n?void 0:n.version)||"1.3.0"},records:v.filter((function(e,t){return t>=o-1&&t<o-1+u})).map((function(e){return b()({},e,{formats:m,onlineResource:f,SRS:p,credits:e.Attribution?_(e.Attribution):g})}))}},G=function(e,t){var r=a().parse(e,!0),o=a().format(b()({},r,{query:b()({service:"WMS",version:"1.1.1",request:"GetCapabilities"},r.query)}));return new Promise((function(e){Promise.all([n.e(99942),n.e(67260)]).then(function(){var r=n(967260).unmarshaller;e(O().get(C(o)).then((function(e){var n;if(t)return h().parseString(e.data,{explicitArray:!1},(function(e,t){n=t})),n;var a=r.unmarshalString(e.data);return a&&a.value})))}.bind(null,n)).catch(n.oe)}))},E=function(e,t,n,r){var a=q[e];return a&&(new Date).getTime()<a.timestamp+1e3*((0,x.u8)("cacheExpire")||60)?new Promise((function(e){e(T(a.data,t,n,r))})):O().get(C(e)).then((function(a){var o;return h().parseString(a.data,{explicitArray:!1},(function(e,t){o=t})),q[e]={timestamp:(new Date).getTime(),data:o},T(o,t,n,r)}))},$=function(e,t){var n=a().parse(e,!0),r=a().format(b()({},n,{query:b()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},n.query)}));return O().get(C(r)).then((function(e){var t;return h().parseString(e.data,{explicitArray:!1},(function(e,n){t=n&&n.WMS_DescribeLayerResponse&&n.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return M(M({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:M({},e&&e.query&&e.query.$||{})})}))}))},k=function(e,t,n,r){return E(e,t,n,r)},F=function(e,t){for(var n=e,r=n.EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,w.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;!r&&n.Layer&&n.Layer.length;)r=(n=n.Layer[0]).EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,w.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;r||(r={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var a={extent:[r.westBoundLongitude||r.minx,r.southBoundLatitude||r.miny,r.eastBoundLongitude||r.maxx,r.northBoundLatitude||r.maxy],crs:"EPSG:4326"};return t?{crs:a.crs,bounds:{minx:a.extent[0],miny:a.extent[1],maxx:a.extent[2],maxy:a.extent[3]}}:a},A=[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/vnd.jpeg-png8",value:"image/vnd.jpeg-png8"},{label:"image/gif",value:"image/gif"}],W=function(){return v()(Object.values((0,B.eq)()))},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return G(e).then((function(e){var n,r,a=s()(e,"capability.request.getMap.format",[]);if(p()(a))n=A;else{var o=A.map((function(e){return e.value}));n=(a=a.map((function(e){var t=e.value;return{label:t,value:t}}))).filter((function(e){var t=e.value;return m()(o,t)}))||[]}if(t){var i=s()(e,"capability.request.getFeatureInfo.format",[]),u=W();p()(i)?r=u:(i=i.map((function(e){return e.value})),r=v()(i.filter((function(e){return m()(u,e)})))||[])}return t?{imageFormats:n,infoFormats:r}:n})).catch((function(){return t?{imageFormats:A,infoFormats:W()}:A}))};const N={flatLayers:D,parseUrl:C,getDimensions:function(e){return c()(e.Dimension||e.dimension||[]).map((function(t,n){var r=e.Extent&&c()(e.Extent)[n]||e.extent&&c()(e.extent)[n];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||r&&r.$.default,values:t._&&t.split(",")||r&&r._&&r.split(",")}}))},getCapabilities:G,describeLayer:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a().parse(e,!0),i=a().format(b()({},o,{query:b()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},o.query,r.query||{})}));return new Promise((function(e){Promise.all([n.e(99942),n.e(67260)]).then(function(){var t=n(967260).unmarshaller;e(O().get(C(i)).then((function(e){var n=t.unmarshalString(e.data);return n&&n.value&&n.value.layerDescription&&n.value.layerDescription[0]})))}.bind(null,n)).catch(n.oe)}))},getRecords:E,describeLayers:$,textSearch:k,parseLayerCapabilities:function e(t,n,r){return c()(r||s()(t,"capability.layer.layer")).reduce((function(r,a){return r||(!a.name&&a.layer?e(t,n,c()(a.layer)):2===n.name.split(":").length&&a.name&&2===a.name.split(":").length?n.name===a.name&&a:a.name&&2===a.name.split(":").length?n.name===a.name.split(":")[1]&&a:2===n.name.split(":").length?n.name.split(":")[1]===a.name&&a:n.name===a.name&&a)}),null)},getBBox:F,reset:function(){Object.keys(q).forEach((function(e){delete q[e]}))},getUniqueInfoFormats:W,getSupportedFormat:U}},788113:(e,t,n)=>{"use strict";n.d(t,{b6:()=>p,PG:()=>g,_x:()=>m,Mm:()=>y,dP:()=>v,SX:()=>d,ZL:()=>b,_S:()=>S,iH:()=>h,R7:()=>L,Q7:()=>O,n7:()=>x,bA:()=>w,hm:()=>B,E2:()=>P,Cb:()=>j,eK:()=>M,Im:()=>R,e8:()=>q,JF:()=>C,kS:()=>_,y:()=>D,l2:()=>T,HN:()=>G,BM:()=>E,am:()=>$,LV:()=>k,CK:()=>F,jU:()=>A});var r=n(22222),a=n(227361),o=n.n(a),i=n(800827),u=n(501157);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return o()(e,"catalog.services")},g=(0,r.P1)((function(e){return o()(e,"catalog.default.staticServices")}),p,(function(e,t){var n=null==e?void 0:e.default_map_backgrounds;return n?(n.readOnly=!0,s(s({},t),{},{default_map_backgrounds:n})):t})),m=function(e){return o()(e,"catalog.default.tileSizes",[256,512])},y=function(e){return o()(e,"controls.metadataexplorer.group")},v=function(e){return o()(e,"catalog.saving")},d=function(e){return o()(e,"catalog.result")},b=function(e){return o()(e,"catalog.openCatalogServiceList")},S=function(e){return o()(e,"catalog.newService")},h=function(e){return o()(e,"catalog.newService.type","csw")},L=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"]'))},O=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"].type'),function(e){return o()(e,'catalog.default.staticServices["'.concat(o()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},x=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"].layerOptions'),{})},w=function(e){return o()(e,"catalog.searchOptions")},B=function(e){return o()(e,"catalog.loadingError")},P=function(e){return o()(e,"catalog.loading",!1)},j=function(e){return o()(e,"catalog.selectedService")},M=function(e){return o()(e,"catalog.mode","view")},R=function(e){return o()(e,"catalog.layerError")},q=function(e){return o()(e,"catalog.searchOptions.text","")},C=function(e){return"metadataexplorer"===o()(e,"controls.toolbar.active")||o()(e,"controls.metadataexplorer.enabled")},_=function(e){return(o()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},D=function(e){return o()(e,"catalog.pageSize",4)},T=function(e){return o()(e,"catalog.delayAutoSearch",1e3)},G=(0,r.zB)({projection:i.uy}),E=function(e){return o()(e,"catalog.formatsLoading",!1)},$=function(e){return o()(e,"catalog.newService.supportedFormats.imageFormats",u.QQ)},k=function(e){return o()(e,"catalog.newService.supportedFormats.infoFormats",(0,u.B8)())},F=function(e){return o()(e,"catalog.newService.formatUrlUsed","")},A=function(e){return o()(e,"catalog.isNewServiceAdded",!1)}}}]);