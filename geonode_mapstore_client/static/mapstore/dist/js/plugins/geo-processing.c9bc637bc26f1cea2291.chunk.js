(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[76375],{460604:(e,t,r)=>{"use strict";r.d(t,{hn:()=>n,yg:()=>o,vD:()=>i,jJ:()=>a,oy:()=>u,am:()=>l,W:()=>c,B1:()=>s,YP:()=>f,fU:()=>d,cY:()=>p});var n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",u="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",l="ADDITIONALLAYER:MERGE_OPTIONS_BY_OWNER",c=function(e,t){return{type:a,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},s=function(e,t){return{type:u,owner:e,options:t}},f=function(e,t){return{type:l,owner:e,options:t}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:o,id:t,owner:r}},p=function(e){return{type:i,owner:e}}},604206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>u,uB:()=>s,Rh:()=>f,G_:()=>d,vU:()=>p,Vw:()=>y,KD:()=>v,uj:()=>m,lo:()=>b,Yf:()=>g,fo:()=>h,PY:()=>P,bp:()=>S,oJ:()=>O,k4:()=>E,sc:()=>w,Li:()=>I});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",u="DRAW:DRAW_SUPPORT_STOPPED",l="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",f="DRAW:SNAPPING_IS_LOADING",d="DRAW:TOGGLE_SNAPPING",p="DRAW:SET_SNAPPING_CONFIG";function y(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function v(){return{type:l,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function m(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:u}}function g(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function P(e){return{type:i,currentStyle:e}}var S=function(e){return g("clean","",e,[],{})};function O(){return{type:d}}function E(e){return{type:s,snappingLayer:e}}function w(){return{type:f}}function I(e,t,r){return{type:p,value:e,prop:t,pluginCfg:r}}},690825:(e,t,r)=>{"use strict";r.d(t,{H:()=>I,k:()=>T});var n=r(580416),o=r(501157),i=r(577215),a=r(432420),u=r(375875),l=r.n(u),c=r(472500),s=r.n(c),f=r(727418),d=r.n(f),p=r(505055),y=r.n(p),v=r(611847);const m={describeCoverage:function(e,t){var r=s().parse((0,v.eW)(e),!0),n=s().format(d()({},r,{query:d()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return l().get(n).then((function(e){var t;return y().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))}};var b=r(624262),g=r(227361),h=r.n(g),P=r(838848);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t,r){return function(i){return o.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?a.v$(e,r.name).then((function(e){return r.geometryType=(0,P.mI)(e),i((0,n.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&m.describeCoverage(e,r.name).then((function(e){var o=h()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),i((0,n.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return i((0,n.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function T(e){var t=(0,b.Fh)(e);return function(r){return r((0,n.tV)(e.id,"id",{capabilitiesLoading:!0})),o.ZP.getCapabilities(t).then((function(t){var a=o.ZP.parseLayerCapabilities(t,e);r(a?(0,n.tV)(e.id,"id",E(E({},(0,i.Br)(a)),{},{capabilitiesLoading:null})):(0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){r((0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},801550:(e,t,r)=>{"use strict";r.d(t,{pP:()=>n,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>u,Qy:()=>l,IL:()=>c,Li:()=>s,OW:()=>f,ZO:()=>d,Um:()=>p,TF:()=>y,Ls:()=>v,Ec:()=>m,Eu:()=>b,JJ:()=>g,nZ:()=>h,YD:()=>P,GI:()=>S,Jb:()=>O,Uh:()=>E,e$:()=>w,eh:()=>I,$j:()=>T,bJ:()=>A,Mk:()=>j,xy:()=>L,o6:()=>C,NH:()=>G,FP:()=>R,Mo:()=>x,sO:()=>D,Px:()=>N,hd:()=>F,y9:()=>_,Ju:()=>Z,BV:()=>M,SO:()=>k,H0:()=>B,$X:()=>W,ou:()=>U,NE:()=>q,Lq:()=>H,aN:()=>$});var n="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",u="PAN_TO",l="ZOOM_TO_EXTENT",c="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",f="CHANGE_MAP_SCALES",d="CHANGE_MAP_STYLE",p="CHANGE_ROTATION",y="CREATION_ERROR_LAYER",v="UPDATE_VERSION",m="INIT_MAP",b="RESIZE_MAP",g="CHANGE_MAP_LIMITS",h="SET_MAP_RESOLUTIONS",P="REGISTER_EVENT_LISTENER",S="UNREGISTER_EVENT_LISTENER",O="MOUSE_MOVE",E="MOUSE_OUT",w="MAP:MAP_PLUGIN_LOAD",I="MAP:ORIENTATION",T="MAP:UPDATE_MAP_VIEW",A="MAP:UPDATE_MAP_OPTIONS";function j(e,t,r,n){return{type:w,mapType:t,loading:e,loaded:r,error:n}}function L(e,t,r){return{type:c,pos:e,zoom:t,crs:r}}function C(e,t,r,o,i,a,u,l){return{type:n,center:e,zoom:t,bbox:r,size:o,mapStateSource:i,projection:a,viewerOptions:u,resolution:l}}function G(e){return{type:s,crs:e}}function R(e,t){return{type:o,point:e,layer:t}}function x(e){return{type:i,pointer:e}}function D(e,t){return{type:a,zoom:e,mapStateSource:t}}function N(e,t,r,n){return{type:l,extent:e,crs:t,maxZoom:r,options:n}}function F(e,t){return{type:d,style:e,mapStateSource:t}}function _(e){return{type:m,disableFeedbackMask:e}}function Z(){return{type:b}}function M(e){var t=e.restrictedExtent,r=e.crs,n=e.minZoom;return{type:g,restrictedExtent:t,crs:r,minZoom:n}}function k(e){return{type:h,resolutions:e}}var B=function(e,t){return{type:P,eventName:e,toolName:t}},W=function(e,t){return{type:S,eventName:e,toolName:t}},U=function(e){return{type:O,position:e}},q=function(){return{type:E}},H=function(e){return{type:I,orientation:e}},$=function(e){return{type:A,configUpdate:e}}},362520:(e,t,r)=>{"use strict";r.d(t,{dn:()=>n,NS:()=>o,Kn:()=>i,FV:()=>a,Vd:()=>u,yS:()=>l});var n="MAP_LAYOUT:UPDATE_MAP_LAYOUT",o="MAP_LAYOUT:UPDATE_DOCK_PANELS",i="MAP_LAYOUT:FORCE_UPDATE_MAP_LAYOUT";function a(e){return{type:n,layout:e}}function u(e){return{type:o,name:e,action:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",location:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right"}}function l(){return{type:i}}},501157:(e,t,r)=>{"use strict";r.d(t,{ID:()=>T,en:()=>A,Xv:()=>L,FU:()=>R,gs:()=>D,tt:()=>N,jY:()=>F,T6:()=>_,hZ:()=>M,ZP:()=>k});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),u=r(984596),l=r.n(u),c=r(227361),s=r.n(c),f=r(505055),d=r.n(f),p=r(375875),y=r.n(p),v=r(737275),m=r(916651),b=r(577215);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w={},I="1.3.0",T="1.1.1",A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{service:"WMS",version:I,request:"GetCapabilities"},r=arguments.length>2?arguments[2]:void 0,n=(a()(e)&&e||e.split(","))[0],i=o().parse(n,!0);return o().format(O(O({},i),{},{search:null,query:O(O(O({},t),i.query),(null==r?void 0:r.query)||{})}))},j=function(e){var t=e&&e.Title,r=e.LogoURL&&O(O({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),n=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:r,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:n}},L=function e(t){var r,n,o=null!==(r=null==t?void 0:t.Layer)&&void 0!==r?r:null==t?void 0:t.layer,i=null!==(n=null==t?void 0:t.Name)&&void 0!==n?n:null==t?void 0:t.name;return o?l()(o).reduce((function(t,r){var n,o,i=null!==(n=r.Layer)&&void 0!==n?n:r.layer,a=null!==(o=r.Name)&&void 0!==o?o:r.name;return[].concat(h(t),h(e(r)),h(i&&a?[r]:[]))}),[]):i&&[t]||[]},C=function(e){var t,r,n,o,i=e.Capability;return{imageFormats:l()((null==i||null===(t=i.Request)||void 0===t||null===(r=t.GetMap)||void 0===r?void 0:r.Format)||[]).filter(b.F0),infoFormats:l()((null==i||null===(n=i.Request)||void 0===n||null===(o=n.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]).filter(b.cP)}},G=function(){var e,t,r,n,o,i,u,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,p=c.Capability,y=c.Service,v=(u=p).Request&&u.Request.GetMap&&u.Request.GetMap.DCPType&&u.Request.GetMap.DCPType.HTTP&&u.Request.GetMap.DCPType.HTTP.Get&&u.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&u.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,m=p.Layer&&(null===(e=p.Layer.SRS||p.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],b=p.Layer&&p.Layer.Attribution&&j(p.Layer.Attribution),g=l()((null==p||null===(t=p.Request)||void 0===t||null===(r=t.GetMap)||void 0===r?void 0:r.Format)||[]),h=l()((null==p||null===(n=p.Request)||void 0===n||null===(o=n.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]),P=L(p),S=(a()(P)?P:[P]).filter((function(e){return!d||-1!==e.Name.toLowerCase().indexOf(d.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(d.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(d.toLowerCase())}));return{numberOfRecordsMatched:S.length,numberOfRecordsReturned:Math.min(f,S.length),nextRecord:s+Math.min(f,S.length)+1,service:y,layerOptions:{version:(null==c||null===(i=c.$)||void 0===i?void 0:i.version)||I},records:S.filter((function(e,t){return t>=s-1&&t<s-1+f})).map((function(e){return O(O({},e),{},{getMapFormats:g,getFeatureInfoFormats:h,onlineResource:v,SRS:m,credits:e.Attribution?j(e.Attribution):b})}))}},R=function(e){return y().get(A(e,{service:"WMS",version:I,request:"GetCapabilities"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t.WMS_Capabilities||t.WMT_MS_Capabilities||{}}))},x=function(e,t,r,n){var o=w[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,v.u8)("cacheExpire")||60)?new Promise((function(e){e(G(o.data,t,r,n))})):R(e).then((function(o){return w[e]={timestamp:(new Date).getTime(),data:o},G(o,t,r,n)}))},D=function(e,t){return y().get(A(e,{service:"WMS",version:T,layers:t,request:"DescribeLayer"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,r){t=r&&r.WMS_DescribeLayerResponse&&r.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return O(O({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:O({},e&&e.query&&e.query.$||{})})}))}))},N=function(e,t,r,n){return x(e,t,r,n)},F=function(e,t){for(var r=e,n=r.EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,m.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;!n&&r.Layer&&r.Layer.length;)n=(r=r.Layer[0]).EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,m.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;n||(n={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[n.westBoundLongitude||n.minx,n.southBoundLatitude||n.miny,n.eastBoundLongitude||n.maxx,n.northBoundLatitude||n.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return R(e).then((function(e){var r=C(e),n=r.imageFormats,o=r.infoFormats;return t?{imageFormats:n,infoFormats:o}:n})).catch((function(){return t?{imageFormats:[],infoFormats:[]}:[]}))},Z={},M=function(e){return(Z[e]?function(){return Promise.resolve(Z[e])}:function(){return y().get(e).then((function(t){var r,n;if("string"==typeof(null==t?void 0:t.data)&&t.data.includes("Exception"))throw new Error("Faild to get json legend");return Z[e]=null==t||null===(r=t.data)||void 0===r?void 0:r.Legend,(null==t||null===(n=t.data)||void 0===n?void 0:n.Legend)||[]}))})().then((function(e){return e})).catch((function(e){throw e}))};const k={flatLayers:L,parseUrl:A,getDimensions:function(e){return l()(e.Dimension||e.dimension||[]).map((function(t,r){var n=e.Extent&&l()(e.Extent)[r]||e.extent&&l()(e.extent)[r];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||n&&n.$.default,values:t._&&t._.split(",")||n&&n._&&n._.split(",")}}))},getCapabilities:R,describeLayer:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y().get(A(e,{service:"WMS",version:T,layers:t,request:"DescribeLayer"},r)).then((function(e){var t,r,n;d().parseString(e.data,{explicitArray:!1},(function(e,t){n=t}));var o=(null===(t=n)||void 0===t||null===(r=t.WMS_DescribeLayerResponse)||void 0===r?void 0:r.LayerDescription)&&l()(n.WMS_DescribeLayerResponse.LayerDescription)[0];return o&&O(O({},null==o?void 0:o.$),(null==o?void 0:o.Query)&&{query:l()(o.Query).map((function(e){return O({},null==e?void 0:e.$)}))})}))},getRecords:x,describeLayers:D,textSearch:N,parseLayerCapabilities:function(e,t){var r=e.Capability,n=L(r).find((function(e){var r=e.Name;return 2===t.name.split(":").length&&r&&2===r.split(":").length?t.name===r&&e:r&&2===r.split(":").length?t.name===r.split(":")[1]&&e:2===t.name.split(":").length?t.name.split(":")[1]===r&&e:t.name===r&&e}));if(n){var o=C(e),i=o.imageFormats,a=o.infoFormats;return O(O({},n),{},{layerOptions:{imageFormats:i,infoFormats:a}})}return null},getBBox:F,reset:function(){Object.keys(w).forEach((function(e){delete w[e]}))},getSupportedFormat:_}},249243:(e,t,r)=>{"use strict";r.d(t,{y:()=>g});var n=r(747037),o=r.n(n),i=r(414293),a=r.n(i),u=r(49977),l=r(454037),c=r(375875),s=r.n(c),f=r(916651),d=r(453005);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=i.attachJSON,p=i.itemId,v=void 0===p?null:p,b=(0,l.pf)(r,e,t)?function(t){return(0,l.pf)(r,e,t)}:function(t){return u.Observable.defer((function(){return s().get(e,{params:t})}))};return c&&!(0,l.Ku)(t)?u.Observable.forkJoin(b(t),b(m(m({},t),{},{info_format:null!=r&&null!==(n=r.infoFormats)&&void 0!==n&&n.includes(d.qk)?d.qk:d.CV})).map((function(e){return e.data})).catch((function(){return u.Observable.of({})}))).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return m(m({},o),{},{features:i&&i.features&&i.features.filter((function(e){return!!a()(v)||e.id===v})),featuresCrs:i&&i.crs&&(0,f.parseURN)(i.crs)})})):b(t).map((function(e){return e.data})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{data:o()(e)?e:m(m({},e),{},{features:e.features&&e.features.filter((function(e){return!v||e.id===v}))}),features:e.features&&e.features.filter((function(e){return!v||e.id===v})),featuresCrs:e&&e.crs&&(0,f.parseURN)(e.crs)}}))}},38560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(480681),o=r(124852),i=r.n(o),a=r(294184),u=r.n(a),l=["disabled","className","onClick"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(null,arguments)}var s=r(815135);const f=(d=n.zx,i().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,a=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return i().createElement(d,c({ref:t,className:r?u()("disabled",n):n,onClick:function(){r||a.apply(void 0,arguments)}},s),s.children)})));var d;(0,s.Z)(n.zx)},638445:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(124852),o=r.n(n),i=r(480681),a=r(697111),u=r(993451),l=["debounceTime"],c=["fallbackValue"];function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(null,arguments)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var y=(0,a.Z)("onChange","value")((0,u.Z)("placeholder")((function(e){e.debounceTime;var t=p(e,l);return o().createElement(i.NI,d({},t,{onChange:function(e){return t.onChange(e.target.value)}}))})));const v=function(e){var t,r,i=e.fallbackValue,a=p(e,c),u=s((0,n.useState)(null!==(t=a.value)&&void 0!==t?t:i),2),l=u[0],f=u[1],v=s((0,n.useState)(null!==(r=a.value)&&void 0!==r?r:i),2),m=v[0],b=v[1],g=s((0,n.useState)(0),2),h=g[0],P=g[1],S=(0,n.useRef)(!1),O=(0,n.useRef)();function E(e){var t=!isNaN(parseFloat(e));return t&&void 0!==a.min&&e<a.min?{changed:!0,value:a.min}:t&&void 0!==a.max&&e>a.max?{changed:!0,value:a.max}:{changed:!1,value:t?parseFloat(e):e}}return O.current=l,(0,n.useEffect)((function(){var e;O.current!==a.value&&f(null!==(e=a.value)&&void 0!==e?e:i)}),[a.value]),o().createElement(y,d({},a,{key:h,value:l,onChange:function(e){if(S.current){var t=e,r=!0;if("number"===a.type){var n=E(t).changed;(""===t||n)&&(r=!1)}f(t),r&&a.onChange(t)}},onChangeNoDebounce:b,onBlur:function(){if("number"===a.type)if(""===m)a.onChange(void 0),f(i),P((function(e){return e+1}));else{var e=E(m).value;a.onChange(e),P((function(e){return e+1})),f(e)}S.current=!1},onFocus:function(){S.current=!0}}))}},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(727418),o=r.n(n),i=r(45697),a=r.n(i),u=r(124852),l=r.n(u),c=r(485294),s=r.n(c),f=r(472986),d=r.n(f),p=r(805346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function g(e,t,r){return t=P(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,r||[],P(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function O(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return O(e=g(this,t,[].concat(n)),"renderLoading",(function(){return e.props.maskLoading?l().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},l().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},l().createElement(p.Z,{msgId:"loading"}),l().createElement(d(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),O(e,"renderRole",(function(t){return l().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),O(e,"hasRole",(function(t){return l().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),O(e,"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=l().createElement("div",{id:this.props.id,style:m({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},l().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),l().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?l().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):l().createElement("span",null)),r=this.props.draggable?l().createElement(s(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?l().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&b(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(l().Component);O(w,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),O(w,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const I=w},532425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(45697),o=r.n(n),i=r(124852),a=r.n(i);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){return e>100?"full":e>40?"medium":"small"},d=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:c({width:t,height:t,overflow:"hidden"},n)},!i&&a().createElement("div",{className:"mapstore-".concat(f(t),"-size-loader")}))};d.propTypes={size:o().number,className:o().string,style:o().object};const p=d},82110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),i=r(496259),a=r(532425);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=function(e){var t=e.width,r=e.height,n=e.className,u=void 0===n?"loader-container":n,l=e.contentStyle,s=void 0===l?{}:l;return o().createElement("div",{className:u},o().createElement(i.Z,null,(function(e){var n=e.width,i=void 0===n?200:n,u=e.height,l=void 0===u?200:u,f=t||(l>0?Math.min(i,l):i),d=r||(l>0?Math.min(i,l):i),p=Math.min(f,d);return o().createElement(a.Z,{size:p,style:c({padding:p/10,margin:"auto",display:"flex"},s)})})))}},843614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(727418),o=r.n(n),i=r(480681),a=r(461365);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function s(e,t,r){return t=d(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),r=t,n=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}],n&&l(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i.u_);const v=o()((0,a.Z)(y),{Body:i.u_.Body,Dialog:i.u_.Dialog,Footer:i.u_.Footer,Header:i.u_.Header,Title:i.u_.Title})},212610:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(124852),o=r.n(n),i=r(867076),a=r(957557),u=r.n(a),l=r(815135);const c=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,r=e.noTooltipWhenDisabled;return!(void 0!==r&&r&&t)}),l.Z,(function(e){return function(t){return o().createElement(e,u()(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},993451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(86638),o=r(285547),i=r(45697),a=r.n(i),u=r(984596),l=r.n(u),c=r(701469),s=r.n(c),f=r(414293),d=r.n(f),p=r(747037),y=r.n(p),v=r(867076),m=["messages","locale"];function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"msgId";return(0,v.compose)((0,v.getContext)({messages:a().object,locale:a().string}),(0,v.mapProps)((function(i){var a=i.messages,u=i.locale,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(i,m);return h(h({},c),l()(e).reduce(function(e,t,r){var i=t.messages,a=t.locale,u=t.mode;return function(){var t=arguments.length>1?arguments[1]:void 0;return h(h({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},P({},t,"msgId"===u?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(s()(t))return t.map((function(o){var i=(0,n.S$)(e,o[r]||y()(o)&&o||"");return h(h({},o),{},P({},r,d()(i)?t:i))}));var o=t?(0,n.S$)(e,t):t;return d()(o)?t:o}(i,e[t],r):function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(s()(e))return e.map((function(n){var i=(0,o.Z)(n[r]||y()(n)&&n||"",t);return h(h({},n),{},P({},r,d()(i)?e:i))}));var n=(0,o.Z)(e,t);return d()(n)?e:n}(e[t],a,r)))}}(c,{locale:u,messages:a,mode:r},t),{}))})))}},617252:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(124852),o=r.n(n),i=r(867076),a=r(45697),u=r.n(a),l=r(957557),c=r.n(l),s=r(480681),f=r(950966);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function y(e,t,r){return t=m(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}const P=(0,i.branch)((function(e){return e.popover}),(function(e){var t;return t=function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),y(this,r,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(r,t),n=r,(a=[{key:"renderPopover",value:function(){return o().createElement(s.J2,c()(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,c()(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(f.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&p(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}(o().Component),g(t,"propTypes",{popover:u().object}),g(t,"defaultProps",{popover:{trigger:!0}}),t}))},697111:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(124852),o=r.n(n),i=r(45697),a=r.n(i),u=r(23279),l=r.n(u);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const y=function(e,t){return function(r){function i(i){var a,u,c=(0,n.useRef)(),s=(a=(0,n.useState)(i[t]),u=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(a,u)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(a,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=s[0],v=s[1],m=(0,n.useRef)();m.current=y,(0,n.useEffect)((function(){if(m.current!==i[t]){v(i[t]);var r=i["".concat(e,"NoDebounce")];r&&r(i[t])}}),[i[t]]),(0,n.useEffect)((function(){return c.current=l()((function(t){var r=t.newProps,n=t.newValue;r[e](n)}),i.debounceTime),function(){c.current.cancel()}}),[i.debounceTime]);var b=f(f({},i),{},d(d({},t,y),e,(function(t){v(t);var r=i["".concat(e,"NoDebounce")];r&&r(t),c.current&&(c.current.cancel(),c.current({newProps:i,newValue:t}))})));return o().createElement(r,b)}return i.propTypes={debounceTime:a().number},i.defaultProps={debounceTime:300},i.displayName=r.displayName+"WithDebounceOnCallback",i}}},80717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),i=r(819081),a=r.n(i),u=r(480681),l=r(90085),c=["visible","Element","renderButton"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,r=void 0===t?[]:t,n=e.btnGroupProps,i=void 0===n?{}:n,f=e.btnDefaultProps,d=void 0===f?{}:f,p=e.transitionProps,y=void 0===p?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:p,v=function(){return r.map((function(e,t){var r=e.visible,n=void 0===r||r,i=e.Element,a=e.renderButton,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,c);return n?a||i&&o().createElement(i,s({key:u.key||t},u))||o().createElement(l.Z,s({key:u.key||t},d,u)):null}))};return o().createElement(u.hE,i,y?o().createElement(a(),y,v()):v())}},90085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(124852),o=r.n(n),i=r(867076),a=r(805346),u=r(957557),l=r.n(u),c=r(480681),s=r(532425),f=r(212610),d=r(617252),p=r(38560),y=["glyph","loading","text","textId","glyphClassName","loaderProps","children"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}const m=(0,i.compose)(f.Z,d.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,r=e.loading,n=e.text,i=void 0===n?"":n,u=e.textId,f=e.glyphClassName,d=void 0===f?"":f,m=e.loaderProps,b=void 0===m?{}:m,g=e.children,h=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,y);return o().createElement(p.Z,l()(h,["pullRight","confirmNo","confirmYes"]),t&&!r?o().createElement(c.gG,{glyph:t,className:d}):null,u?o().createElement(a.Z,{msgId:u}):i,r?o().createElement(s.Z,v({className:"ms-loader".concat(h.bsStyle&&" ms-loader-"+h.bsStyle||"").concat(h.bsSize&&" ms-loader-"+h.bsSize||"")},b)):null,g)}))},962909:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(124852),o=r.n(n),i=r(843614),a=r(805346),u=r(38560);const l=function(e){var t=e.title,r=void 0===t?o().createElement(a.Z,{msgId:"warning"}):t,n=e.cancelText,l=void 0===n?o().createElement(a.Z,{msgId:"no"}):n,c=e.confirmText,s=void 0===c?o().createElement(a.Z,{msgId:"yes"}):c,f=e.onClose,d=void 0===f?function(){}:f,p=e.onConfirm,y=void 0===p?function(){}:p,v=e.show,m=e.children,b=e.className,g=void 0===b?"":b,h=e.buttonSize,P=e.running,S=void 0!==P&&P,O=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(u.Z,{disabled:S,className:g,key:"confirmButton",bsStyle:"primary",bsSize:h,onClick:function(){y()}},s),o().createElement(u.Z,{key:"cancelButton",bsSize:h,disabled:S,onClick:d},l));return o().createElement(i.Z,{show:v,onHide:d},o().createElement(i.Z.Header,{key:"dialogHeader",closeButton:!0},o().createElement(i.Z.Title,null,r)),o().createElement(i.Z.Body,null,m),o().createElement(i.Z.Footer,null,O))}},886850:(e,t,r)=>{"use strict";r.d(t,{V6:()=>k,Mc:()=>W,v$:()=>U,ED:()=>q});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),u=r(984596),l=r.n(u),c=r(414293),s=r.n(c),f=r(513218),d=r.n(f),p=r(49977),y=r.n(p),v=r(505055),m=r(507526),b=r(375875),g=r.n(b),h=r(86686),P=r(624262),S=r(510284),O=r(439156),E=r.n(O),w=r(611847),I=["totalFeatures","features"],T=["sortOptions","propertyName"];function A(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=E()({wfsVersion:"1.1.0"}),N=D.getFeature,F=D.query,_=D.sortBy,Z=D.propertyName,M=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",i=(0,h.getWFSFilterData)(t,r),a=o().parse((0,w.eW)(e),!0),u=d()(a.query)?a.query:{};u.service="WFS",u.outputFormat=n;var l=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:u});return r.layer&&"vector"===r.layer.type?y().Observable.defer((function(){return new Promise((function(e){var n,o=function(e,t){if(t.filterFields&&0!==t.filterFields.length){var r=e.features.filter((0,h.createFeatureFilter)(t));e.features=r,e.numberMatched=r.length,e.numberReturned=r.length,e.totalFeatures=r.length}return t.sortOptions&&t.sortOptions.sortBy&&t.sortOptions.sortOrder&&"NONE"!==t.sortOptions.sortOrder&&e.features.sort((function(e,r){var n=e.properties[t.sortOptions.sortBy],o=r.properties[t.sortOptions.sortBy],i=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===t.sortOptions.sortOrder?i:-1*i})),e}({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(n=r.layer.features).length,numberReturned:n.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:n.length,type:"FeatureCollection",features:n},t);e(o)}))})):{data:i,queryString:l}},k=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(r.layer&&"vector"===r.layer.type)return M(e,t,r,n);var o=M(e,t,r,n),i=o.data,a=o.queryString;return y().Observable.defer((function(){return g().post(a,i,{timeout:6e4,responseType:"arraybuffer",headers:{Accept:"application/xml","Content-Type":"application/xml"}})}))},B=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return M(e,t,r);var n=M(e,t,r),o=n.data,i=n.queryString;return y().Observable.defer((function(){return g().post(i,o,R({timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}},null==r?void 0:r.requestOptions))})).let(S.oB).map((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=C(e,I),o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).startIndex,i=arguments.length>2?arguments[2]:void 0;return i>t&&i===o+r.length&&t===r.length?R(R({},n),{},{features:r,totalFeatures:i}):R(R({},n),{},{features:r,totalFeatures:t})}(e.data,function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!s()(e.startIndex)&&!s()(e.maxFeatures)&&{startIndex:e.startIndex,maxFeatures:e.maxFeatures}}(t,r),r.totalFeatures)}))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,i=arguments.length>1?arguments[1]:void 0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=u.sortOptions,s=u.propertyName,f=C(u,T);return B(r.url||n,i&&"object"===L(i)?R(R({},i),{},{typeName:o||i.typeName}):N(F(o,[].concat(A(c?[_(c.sortBy,c.sortOrder)]:[]),A(s?[Z(s)]:[]),A(i?l()(i):[]))),f),f).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!c&&s&&s[0])return B(r.url||n,i&&"object"===L(i)?R(R({},i),{},{typeName:o||i.typeName}):N(F(o,[_(a()(s)?s[0]:s)].concat(A(s?[Z(s)]:[]),A(i?l()(i):[]))),f),f);throw e}))},U=function(e){var t=e.layer;return y().Observable.defer((function(){return g().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,u=o().parse((0,w.eW)(a||n.url||i),!0);return o().format(R(R({},u),{},{search:void 0,query:R(R({},u.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(S.oB)},q=function(e){var t=e.layer;return y().Observable.defer((function(){return g().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=(0,P.Fh)({name:t,url:n&&n.url||i}),u=o().parse(a,!0);return o().format(R(R({},u),{},{search:void 0,query:R(R({},u.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(S.oB).switchMap((function(e){return y().Observable.bindNodeCallback((function(e,t){return(0,v.parseString)(e,{tagNameProcessors:[m.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},199767:(e,t,r)=>{"use strict";r.d(t,{qP:()=>b,XA:()=>g,fA:()=>h,gN:()=>P,p5:()=>S,Rr:()=>O,DK:()=>E,En:()=>w,Tr:()=>I,t$:()=>T,XJ:()=>A,Dx:()=>j,Jy:()=>C});var n=r(472500),o=r.n(n),i=r(666654),a=r.n(i),u=r(747037),l=r.n(u),c=r(701469),s=r.n(c),f=r(683608),d=r.n(f);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e,t){return"<wps:Input>"+"<ows:Identifier>".concat(e,"</ows:Identifier>")+t+"</wps:Input>"},g=function(e){return"<wps:Data>".concat(e,"</wps:Data>")},h=function(e,t,r,n){return'<wps:Reference mimeType="'.concat(e,'" xlink:href="').concat(t,'" method="').concat(r,'"').concat("POST"===r?"":"/",">")+("POST"===r?"<wps:Body>".concat(n,"</wps:Body></wps:Reference>"):"")},P=function(e){return"<wps:LiteralData>".concat(e,"</wps:LiteralData>")},S=function(e,t,r){return"<wps:ComplexData".concat(t?' mimeType="'.concat(t,'"'):"").concat(r?' encoding="'.concat(r,'"'):"",">").concat(e,"</wps:ComplexData>")},O=function(e){return/\bCDATA\b/.test(e)?e:"<![CDATA[".concat(e,"]]>")},E=function(e){return"<wps:ResponseForm>".concat(e,"</wps:ResponseForm>")},w=function(e,t){return"<wps:RawDataOutput".concat(t?' mimeType="'.concat(t,'"'):"",">")+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"</wps:RawDataOutput>"},I=function(e,t,r){return"<wps:ResponseDocument".concat(e?' storeExecuteResponse="true"':"").concat(t?' status="true"':"",">")+r+"</wps:ResponseDocument>"},T=function(e,t,r,n,o){return"<wps:Output".concat(e?' mimeType="'.concat(e,'"'):"").concat(t?' asReference="true"':"",">")+"<ows:Identifier>".concat(r,"</ows:Identifier>")+(n?"<ows:Title>".concat(n,"</ows:Title>"):"")+(o?"<ows:Abstract>".concat(o,"</ows:Abstract>"):"")+"</wps:Output>"},A=function(e){return b("writeParameters",g(S("<dwn:Parameters>".concat(e,"</dwn:Parameters>"))))},j=function(e,t){return'<dwn:Parameter key="'.concat(e,'">').concat(t,"</dwn:Parameter>")},L=function(e,t){var r=o().parse(e,!0),n=r.pathname;return(a()(r.pathname,"wfs")||a()(r.pathname,"wms"))&&(n=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),o().format(v(v({},r),{},{search:null,pathname:n,query:v(v({service:"WPS"},t),r.query)}))},C=function(e,t){if(e&&l()(e))return L(e,t);if(s()(e)){var r=d()(0,e.length-1);return L(e[r],t)}return e}},472747:(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var n=r(49977),o=r(375875),i=r.n(o),a=r(510284),u=r(199767),l=function(e,t){return n.Observable.defer((function(){return i().get((0,u.Jy)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(a.oB)}},27835:(e,t,r)=>{"use strict";r.d(t,{Uh:()=>O,W5:()=>E,ai:()=>T,RW:()=>A,dr:()=>j,mG:()=>L,ZP:()=>C});var n=r(406557),o=r.n(n),i=r(49977),a=r(505055),u=r(507526),l=r(375875),c=r.n(l),s=r(199767);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function b(e){var t="function"==typeof Map?new Map:void 0;return b=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(g())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&h(o,r.prototype),o}(e,arguments,P(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)},b(e)}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var S=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,r){return t=P(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,r||[],P(e).constructor):t.apply(e,r))}(this,t,[e])).name="WPSExecuteError",n.code=r||e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(b(Error)),O=function(e,t,r){return'<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:dwn="http://geoserver.org/wps/download" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"<wps:DataInputs>"+(t||[]).join("")+"</wps:DataInputs>"+(r||"")+"</wps:Execute>"},E=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Observable.defer((function(){return c().get((0,s.Jy)(e,{version:"1.0.0",REQUEST:"GetExecutionStatus",executionId:t}),y({headers:{Accept:"application/xml"}},r))}))},w=function(e,t){var r,n,i=function(e){var t,r,n,i,a,u,l,c,s,f,d,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o(),y=null==e||null===(t=e.ExecuteResponse)||void 0===t||null===(r=t.Status)||void 0===r?void 0:r[0];return null!=y&&y.ProcessAccepted?{status:"ProcessAccepted"}:null!=y&&y.ProcessStarted?{status:"ProcessStarted"}:null!=y&&y.ProcessSucceeded?{status:"ProcessSucceeded",data:p(null===(n=e.ExecuteResponse.ProcessOutputs)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.Output)}:null!=y&&y.ProcessFailed?{status:"ProcessFailed",exceptionReport:null==y||null===(a=y.ProcessFailed)||void 0===a||null===(u=a[0])||void 0===u||null===(l=u.ExceptionReport)||void 0===l||null===(c=l[0])||void 0===c||null===(s=c.Exception)||void 0===s||null===(f=s[0])||void 0===f||null===(d=f.ExceptionText)||void 0===d?void 0:d[0]}:null!=y&&y.ProcessPaused?{status:"ProcessPaused"}:{status:"UnexpectedStatus"}}(e,t);if("ProcessFailed"===i.status)throw new S(i.exceptionReport,"ProcessFailed");if("UnexpectedStatus"===i.status)throw new S("UnexpectedProcessStatus");if("ProcessSucceeded"===i.status)return{succeeded:!0,data:i.data};var a=null==e||null===(r=e.ExecuteResponse)||void 0===r||null===(n=r.$)||void 0===n?void 0:n.statusLocation;if(!a)throw new S("NoStatusLocation");var u=a.indexOf("executionId=");if(-1===u)throw new S("NoExecutionId");var l=a.slice(u+12),c=l.indexOf("&");return{succeeded:!1,executionId:-1===c?l:l.slice(0,c)}},I=function(e){var t,r;return null!=e&&null!==(t=e.Identifier)&&void 0!==t&&t[0]?{identifier:null==e||null===(r=e.Identifier)||void 0===r?void 0:r[0]}:null},T=function(e){var t,r,n,o,i;return null!=e&&null!==(t=e.Data)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.LiteralData?{data:null==e||null===(n=e.Data)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.LiteralData)||void 0===i?void 0:i[0]}:null},A=function(e){var t,r,n,o,i,a;return null!=e&&e.Reference?{href:null==e||null===(t=e.Reference)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.$)||void 0===n?void 0:n.href,mimeType:null==e||null===(o=e.Reference)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.$)||void 0===a?void 0:a.mimeType}:null},j=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return[I].concat((r=t||[],function(e){if(Array.isArray(e))return d(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(t){return t(e)})).reduce((function(e,t){return t?y(y({},e),t):e}),{});var r}))}},L=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.executeStatusUpdateInterval,l=void 0===o?2e3:o,f=r.outputsExtractor,d=function(e){return i.Observable.defer((function(){return new Promise((function(t,r){return(0,a.parseString)(e,{tagNameProcessors:[u.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))};return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Observable.defer((function(){return c().post((0,s.Jy)(e,{version:"1.0.0",REQUEST:"Execute"}),t,y({headers:{"Content-Type":"application/xml"}},r))}))}(e,t,n).catch((function(e){if(e.__CANCEL__)throw e;throw new S("ExecuteProcessXHRFailed")})).switchMap((function(e){return"application/xml"===e.headers["content-type"]||"text/xml"===e.headers["content-type"]?d(e.data).map((function(t){return{data:t,type:"application/xml",originalData:e.data}})):i.Observable.of({data:e.data,type:e.headers["content-type"]})})).flatMap((function(t){var r=t.data,n=t.type,o=t.originalData;if("application/xml"!==n)return i.Observable.of(r);if(null==r||!r.ExecuteResponse)return i.Observable.of(o);var a=w(r,f),u=a.succeeded,c=a.data,s=a.executionId;if(u)return i.Observable.of(c);var p=i.Observable.interval(l).take(1).flatMap((function(){return E(e,s).catch((function(){throw new S("GetExecutionStatusXHRFailed")})).flatMap((function(e){return d(e.data).flatMap((function(e){var t=w(e,f);return t.succeeded?i.Observable.of(t.data):p}))}))}));return p}))};const C=L},28895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ln});var n={};r.r(n),r.d(n,{LPlongitudinalMapLayoutGPTEpic:()=>Sn,checkWPSAvailabilityGPTEpic:()=>ln,clickToSelectFeatureGPTEpic:()=>Pn,disableIdentifyGPTEpic:()=>hn,getFeatureDataGPTEpic:()=>sn,getFeaturesGPTEpic:()=>cn,getIntersectionFeatureDataGPTEpic:()=>fn,removeHighlightsOnResetGPTEpic:()=>On,resetIntersectHighlightGPTEpic:()=>yn,resetSourceHighlightGPTEpic:()=>pn,runBufferProcessGPTEpic:()=>dn,runIntersectProcessGPTEpic:()=>vn,toggleHighlightLayersGPTEpic:()=>mn,toggleHighlightLayersOnOpenCloseGPTEpic:()=>bn,unRegisterEventListenerOnReset:()=>gn});var o=r(124852),i=r.n(o),a=r(480681),u=r(805346),l=r(45697),c=r.n(l),s=r(171703),f=r(22222),d=r(965539),p=r(51736),y=r(743129),v=r(313311),m=r.n(v),b=r(441609),g=r.n(b),h="buffer",P="intersection",S="GeoProcessing",O="gpt-layer",E="gpt-layer-intersection",w="intersection_group",I="buffered_group",T="GPT:CHECK_WPS_AVAILABILITY",A="GPT:CHECKING_WPS_AVAILABILITY",j="GPT:CHECKING_WPS_AVAILABILITY_INTERSECTION",L="GPT:GET_FEATURES",C="GPT:ERROR_LOADING_DFT",G="GPT:INIT_PLUGIN",R="GPT:RUNNING_PROCESS",x="GPT:RESET",D="GPT:RUN_PROCESS",N="GPT:SET_BUFFER_DISTANCE",F="GPT:SET_BUFFER_DISTANCE_UOM",_="GPT:SET_BUFFER_QUADRANT_SEGMENTS",Z="GPT:SET_BUFFER_CAP_STYLE",M="GPT:SET_FEATURES",k="GPT:SET_FEATURE_SOURCE_LOADING",B="GPT:SET_FEATURE_INTERSECTION_LOADING",W="GPT:SET_INVALID_LAYER",U="GPT:SET_WPS_AVAILABILITY",q="GPT:SET_SELECTED_TOOL",H="GPT:SET_SOURCE_LAYER_ID",$="GPT:SET_SOURCE_FEATURE",J="GPT:SET_SOURCE_FEATURE_ID",Y="GPT:SET_INTERSECTION_LAYER_ID",V="GPT:SET_INTERSECTION_FEATURE_ID",X="GPT:SET_INTERSECTION_FEATURE",K="GPT:SET_INTERSECTION_FIRST_ATTRIBUTE",z="GPT:SET_INTERSECTION_SECOND_ATTRIBUTE",Q="GPT:SET_INTERSECTION_MODE",ee="GPT:SET_INTERSECTION_PERCENTAGES_ENABLED",te="GPT:SET_INTERSECTION_AREAS_ENABLED",re="GPT:SET_SELECTED_LAYER_TYPE",ne="GPT:TOGGLE_HIGHLIGHT_LAYERS",oe=function(e,t){return{type:T,layerId:e,source:t}},ie=function(e){return{type:A,status:e}},ae=function(e){return{type:j,status:e}},ue=function(e,t){return{type:L,layerId:e,source:t,page:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},le=function(e){return{type:R,status:e}},ce=function(e){return{type:D,process:e}},se=function(e,t,r,n,o){return{type:M,layerId:e,source:t,data:r,nextPage:n,geometryProperty:o}},fe=function(e){return{type:k,status:e}},de=function(e){return{type:B,status:e}},pe=function(e,t){return{type:W,status:t,layerId:e}},ye=function(e,t,r){return{type:U,layerId:e,status:t,source:r}},ve=function(e){return{type:J,featureId:e}},me=function(e){return{type:$,feature:e}},be=function(e){return{type:V,featureId:e}},ge=function(e){return{type:X,feature:e}},he=function(e){return{type:re,source:e}},Pe=function(){return{type:ne}},Se=r(962909),Oe=r(532425),Ee=r(38560),we=r(202576),Ie=r(86638),Te=[{id:h,optionItem:{value:h,labelMsgId:"GeoProcessing.bufferTool"},actions:{isRunDisabled:function(e){return e.runningProcess||e.isSourceLayerInvalid||!(e.sourceLayerId&&e.distance&&e.areAllWPSAvailableForSourceLayer)},runProcess:function(e){e.showHighlightLayers&&e.onToggleHighlightLayers(),g()(e.sourceFeature)?e.onShowWarning(!0):e.onRunProcess(h)},runProcessConfirm:function(e){e.onShowWarning(!1),e.onRunProcess(h)}},RunComponent:function(e){return i().createElement("div",{className:"run"},i().createElement(Ee.Z,{disabled:e.isRunDisabled(e),onClick:function(){return e.runProcess(e)}},i().createElement(u.Z,{msgId:"GeoProcessing.run"}),e.runningProcess?i().createElement(Oe.Z,{size:14,style:{margin:"0 auto"}}):null),i().createElement(we.Z,{bsStyle:e.isSourceLayerInvalid?"danger":"info",text:e.isSourceLayerInvalid?(0,Ie.S$)(e.messages,"GeoProcessing.tooltip.invalidLayers"):(0,Ie.S$)(e.messages,"GeoProcessing.tooltip.fillRequiredDataBuffer")}))},ConfirmModal:function(e){return i().createElement(Se.Z,{show:e.showWarning,onClose:e.handleCloseWarningModal,onConfirm:e.handleConfirmRunProcess,title:i().createElement(u.Z,{msgId:"GeoProcessing.warningTitle"}),fitContent:!0,confirmText:i().createElement(u.Z,{msgId:"GeoProcessing.warningConfirmText"}),cancelText:i().createElement(u.Z,{msgId:"GeoProcessing.warningCancel"})},i().createElement("div",{className:"ms-detail-body"},i().createElement(u.Z,{msgId:"GeoProcessing.warningBody"})))}},{id:P,optionItem:{value:P,labelMsgId:"GeoProcessing.intersectionTool"},actions:{isRunDisabled:function(e){return e.runningProcess||!(e.isIntersectionEnabled&&e.intersectionLayerId&&e.sourceLayerId&&e.areAllWPSAvailableForSourceLayer&&e.areAllWPSAvailableForIntersectionLayer)||e.isIntersectionLayerInvalid||e.isSourceLayerInvalid},runProcess:function(e){e.showHighlightLayers&&e.onToggleHighlightLayers(),g()(e.sourceFeature)||g()(e.intersectionFeature)?e.onShowWarning(!0):e.onRunProcess(P)},runProcessConfirm:function(e){e.onShowWarning(!1),e.onRunProcess(P)}},RunComponent:function(e){return i().createElement("div",{className:"run"},i().createElement(Ee.Z,{disabled:e.isRunDisabled(e),onClick:function(){return e.runProcess(e)}},i().createElement(u.Z,{msgId:"GeoProcessing.run"}),e.runningProcess?i().createElement(Oe.Z,{size:14,style:{margin:"0 auto"}}):null),i().createElement(we.Z,{bsStyle:!e.isIntersectionEnabled||e.isIntersectionLayerInvalid||e.isSourceLayerInvalid?"danger":"info",text:e.isIntersectionEnabled?e.isIntersectionLayerInvalid||e.isSourceLayerInvalid?(0,Ie.S$)(e.messages,"GeoProcessing.tooltip.invalidLayers"):(0,Ie.S$)(e.messages,"GeoProcessing.tooltip.fillRequiredDataIntersection"):(0,Ie.S$)(e.messages,"GeoProcessing.tooltip.pointAndPolygon")}))},ConfirmModal:function(e){return i().createElement(Se.Z,{show:e.showWarning,onClose:e.handleCloseWarningModal,onConfirm:e.handleConfirmRunProcess,title:i().createElement(u.Z,{msgId:"GeoProcessing.warningTitle"}),fitContent:!0,confirmText:i().createElement(u.Z,{msgId:"GeoProcessing.warningConfirmText"}),cancelText:i().createElement(u.Z,{msgId:"GeoProcessing.warningCancel"})},i().createElement("div",{className:"ms-detail-body"},i().createElement(u.Z,{msgId:"GeoProcessing.warningBody"})))}}],Ae=r(145869),je=r(638445),Le=r(112346),Ce=r(815135),Ge=r(227361),Re=r.n(Ge),xe=r(91175),De=r.n(xe),Ne=r(288306),Fe=r.n(Ne),_e=r(800827),Ze=r(675110),Me=r(624262),ke=r(610928),Be=r.n(ke),We=r(189734),Ue=r.n(We),qe=r(916651);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=He(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==He(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ve=function(e){switch(e){case"Point":case"MultiPoint":return"point";case"LineString":case"MultiLineString":return"line";case"Polygon":case"MultiPolygon":return"polygon";default:return e}},Xe=function(e){return{type:"FeatureCollection",features:e}},Ke=function(e,t){var r=Ue()(null==e?void 0:e.filter((function(e){return e.group===t})),["name"]);return r.length?Number(Be()(r).name.match(/\d/)[0])+1:0},ze=function(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.geodesic&&"LineString"===e.geometry.type?Je(Je({},e),{},{geometry:Je(Je({},e.geometry),{},{coordinates:(0,qe.transformLineToArcs)(e.geometry.coordinates)})}):e},Qe=function(e){var t;if("Circle"===(null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType)){var r=e.properties.center||e.geometry.coordinates,n=(0,qe.getPolygonFromCircle)(r,e.properties.radius||1,"meters");return Je(Je({},e),n)}return e};function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ot=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.buffer)||void 0===r?void 0:r.distance)||100},it=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.buffer)||void 0===r?void 0:r.distanceUom)||"m"},at=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.buffer)||void 0===r?void 0:r.quadrantSegments},ut=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.buffer)||void 0===r?void 0:r.capStyle},lt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.layerId},ct=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.feature},st=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.features)||[]},ft=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.totalCount)||0},dt=function(e){var t,r,n,o=lt(e);return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||null===(n=r.invalid)||void 0===n||!n[o])},pt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.layerId},yt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.feature},vt=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.features)||[]},mt=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.totalCount)||0},bt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.firstAttributeToRetain},gt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.secondAttributeToRetain},ht=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.intersectionMode},Pt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.percentagesEnabled},St=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.areasEnabled},Ot=function(e){var t,r,n,o=pt(e);return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||null===(n=r.invalid)||void 0===n||!n[o])},Et=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedTool},wt=function(e){var t,r,n,o=lt(e);return o?null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||null===(n=r.wpsAvailability)||void 0===n?void 0:n[o]:null},It=function(e){var t,r,n,o=pt(e);return o?null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||null===(n=r.wpsAvailabilityIntersection)||void 0===n?void 0:n[o]:null},Tt=function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.runningProcess)},At=function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.showHighlightLayers)},jt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedLayerType},Lt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.wpsUrl},Ct=Fe()((function(e){return(0,Ze.l2)(e).filter((function(e){return"background"!==e.group})).filter((function(e){return(0,Me.jZ)(e)||"vector"===e.type})).map((function(e){var t,r;return null!=e&&null!==(t=e.features)&&void 0!==t&&t.length?rt(rt({},e),{},{features:null==e||null===(r=e.features)||void 0===r?void 0:r.map(ze).map(Qe)}):e}))}),(function(e){return JSON.stringify((0,Ze.l2)(e).filter((function(e){return"background"!==e.group})).filter((function(e){return(0,Me.jZ)(e)||"vector"===e.type})))})),Gt=function(e,t){var r,n=De()(Ct(e).filter((function(e){return e.id===t})));return rt(rt({},n),{},{features:null==n||null===(r=n.features)||void 0===r?void 0:r.filter((function(e){var t;return!(null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureId)}))})},Rt=(0,Ce.Z)(a.BZ.Addon),xt=function(e){var t=e.areAllWPSAvailableForSourceLayer,r=e.checkingWPSAvailability,n=e.runningProcess,l=e.layers,c=e.isSourceLayerInvalid,s=e.sourceFeatureId,f=e.sourceLayerId,d=e.sourceFeatures,p=e.sourceTotalCount,v=e.sourceCurrentPage,m=e.selectedLayerType,b=e.isSourceFeaturesLoading,g=e.onGetFeatures,h=e.onCheckWPSAvailability,P=e.onSetSourceFeatureId,S=e.onSetSourceLayerId,O=e.onSetSelectedLayerType;(0,o.useEffect)((function(){f&&h(f,"source")}),[f]);var E=!f||b||r;return i().createElement(i().Fragment,null,i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.sourceLayer"})),i().createElement(a.BZ,null,i().createElement(y.ZP,{disabled:n,clearable:!0,value:f,noResultsText:i().createElement(u.Z,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){var t;(null==e?void 0:e.value)!==f&&S(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:l.map((function(e){return{value:e.id,label:e.title||e.name||e.id}}))}),i().createElement(Rt,{tooltipId:f?t&&!c?"GeoProcessing.tooltip.validLayer":"GeoProcessing.tooltip.invalidLayer":"GeoProcessing.tooltip.selectLayer",tooltipPosition:"left",bsStyle:"primary"},r?i().createElement(Oe.Z,{size:14,style:{margin:"0 auto"}}):i().createElement(a.gG,{glyph:f?t&&!c?"ok-sign":"exclamation-mark":"question-sign",className:f?t&&!c?"text-success":"text-danger":"text-info"})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.sourceFeature"})),i().createElement(a.BZ,{className:"infinite-select-scroll"},i().createElement(y.ZP,{disabled:r||b||n||c,clearable:!0,noResultsText:i().createElement(u.Z,{msgId:"GeoProcessing.noMatchedFeature"}),onChange:function(e){var t;(null==e?void 0:e.value)!==s&&P(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:d.map((function(e,t){var r,n;return{value:(0,Me.C4)(e).id,label:null!=e&&null!==(r=e.properties)&&void 0!==r&&r.measureType?"".concat(null==e||null===(n=e.properties)||void 0===n?void 0:n.measureType," #").concat(t):(0,Me.C4)(e).id}})),value:s,onOpen:function(){"source"!==m&&0===d.length&&g(f,"source",0)},onMenuScrollToBottom:function(){p>d.length&&g(f,"source",v+1)}}),i().createElement(Rt,{tooltipId:s?t?"GeoProcessing.tooltip.validFeature":"GeoProcessing.tooltip.invalidFeature":"GeoProcessing.tooltip.selectFeature",tooltipPosition:"left",bsStyle:"primary"},b?i().createElement(Oe.Z,{size:14,style:{margin:"0 auto"}}):i().createElement(a.gG,{glyph:s?c?"exclamation-mark":"ok-sign":"question-sign",className:s?c?"text-danger":"text-success":"text-info"})),i().createElement(Rt,{disabled:E,onClick:function(){E||O("source"===m?"":"source")},tooltipId:"GeoProcessing.tooltip.clickToSelectFeature",tooltipPosition:"left",className:"btn",bsStyle:"source"===m?"success":"primary"},i().createElement(a.gG,{glyph:"map-marker",className:"source"===m?"":"text-info"})))))};xt.propTypes={areAllWPSAvailableForSourceLayer:c().bool,checkingWPSAvailability:c().bool,layers:c().array,runningProcess:c().bool,sourceFeatureId:c().string,sourceFeatures:c().array,sourceTotalCount:c().number,sourceCurrentPage:c().number,isSourceFeaturesLoading:c().bool,isSourceLayerInvalid:c().bool,selectedLayerType:c().string,sourceLayerId:c().string,onCheckWPSAvailability:c().func,onSetSourceLayerId:c().func,onSetSelectedLayerType:c().func,onGetFeatures:c().func,onSetSourceFeatureId:c().func};var Dt=(0,s.connect)((0,f.P1)([wt,Tt,Ct,lt,function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.featureId},st,ft,function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.currentPage)||0},function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r?void 0:r.featuresSourceLoading},dt,function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.checkingWPSAvailability)},jt],(function(e,t,r,n,o,i,a,u,l,c,s,f){return{areAllWPSAvailableForSourceLayer:e,runningProcess:t,layers:r,sourceLayerId:n,sourceFeatureId:o,sourceFeatures:i,sourceTotalCount:a,sourceCurrentPage:u,isSourceFeaturesLoading:l,isSourceLayerInvalid:c,checkingWPSAvailability:s,selectedLayerType:f}})),{onCheckWPSAvailability:oe,onSetSourceLayerId:function(e){return{type:H,layerId:e}},onGetFeatures:ue,onSetSelectedLayerType:he,onSetSourceFeatureId:ve})(xt);Dt.displayName="SourceLayer";const Nt=Dt;function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ft.apply(null,arguments)}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Zt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Mt=(0,Ce.Z)(a.BZ.Addon),kt=function(e,t){var r=e.areAllWPSAvailableForSourceLayer,n=e.distance,l=e.distanceUom,c=e.quadrantSegments,s=e.capStyle,f=e.isSourceLayerInvalid,d=e.process,p=e.runningProcess,v=e.showHighlightLayers,m=e.sourceLayerId,b=e.sourceFeature,g=e.onRunProcess,h=e.onSetBufferDistance,P=e.onSetBufferDistanceUom,S=e.onSetBufferQuadrantSegments,O=e.onSetBufferCapStyle,E=e.onToggleHighlightLayers,w=t.messages,I=_t((0,o.useState)(!1),2),T=I[0],A=I[1],j=_t((0,o.useState)(!1),2),L=j[0],C=j[1];return i().createElement(i().Fragment,null,i().createElement(Nt,null),i().createElement("div",{className:"gpt-distance"},i().createElement("div",{className:"value"},i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.distance"})),i().createElement(a.BZ,{className:"distance"},i().createElement(je.Z,{disabled:p,type:"number",value:n,onChange:function(e){h(e)}}),i().createElement(y.ZP,{clearable:!1,disabled:p,value:l,noResultsText:i().createElement(u.Z,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){P((null==e?void 0:e.value)||"")},options:[{value:"m",label:i().createElement(u.Z,{msgId:"GeoProcessing.m"})},{value:"km",label:i().createElement(u.Z,{msgId:"GeoProcessing.km"})}]}))))),i().createElement(Le.Z,{disabled:p,useToolbar:!0,title:i().createElement(u.Z,{msgId:"GeoProcessing.advancedSettings"}),expanded:T,onSwitch:A},i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.quadrantSegments"})),i().createElement(a.BZ,null,i().createElement(je.Z,{disabled:p,type:"number",value:c,onChange:function(e){S(e)}}),i().createElement(Mt,null,i().createElement(we.Z,{bsStyle:"info",placement:"left",text:(0,Ie.S$)(w,"GeoProcessing.quadrantSegmentsTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.capStyle"})),i().createElement(a.BZ,null,i().createElement(y.ZP,{disabled:p,clearable:!0,value:s,noResultsText:i().createElement(u.Z,{msgId:"GeoProcessing.noMatchedStyle"}),onChange:function(e){O((null==e?void 0:e.value)||"")},options:[{value:"Round",label:i().createElement(u.Z,{msgId:"GeoProcessing.round"})},{value:"Flat",label:i().createElement(u.Z,{msgId:"GeoProcessing.flat"})},{value:"Square",label:i().createElement(u.Z,{msgId:"GeoProcessing.square"})}]}),i().createElement(Mt,null,i().createElement(we.Z,{bsStyle:"info",placement:"left",text:(0,Ie.S$)(w,"GeoProcessing.capStyleTooltip")}))))),i().createElement(a.cw,{className:"highlight"},i().createElement(Ae.Z,{disabled:p,checked:v,onClick:function(){E()}}),i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.highlight"}))),i().createElement(d.RunComponent,Ft({areAllWPSAvailableForSourceLayer:r,runningProcess:p,isSourceLayerInvalid:f,sourceLayerId:m,distance:n,showHighlightLayers:v,sourceFeature:b,onRunProcess:g,onToggleHighlightLayers:E,onShowWarning:C,messages:w},d.actions)),i().createElement(d.ConfirmModal,{showWarning:L,handleCloseWarningModal:function(){C(!1)},handleConfirmRunProcess:function(){v&&E(),d.actions.runProcessConfirm({onShowWarning:C,onRunProcess:g})}}))};kt.propTypes={areAllWPSAvailableForSourceLayer:c().bool,distance:c().number,distanceUom:c().string,quadrantSegments:c().number,capStyle:c().string,isSourceLayerInvalid:c().bool,sourceLayerId:c().string,sourceFeature:c().object,process:c().object,runningProcess:c().bool,showHighlightLayers:c().bool,onSetBufferDistance:c().func,onRunProcess:c().func,onSetBufferDistanceUom:c().func,onSetBufferQuadrantSegments:c().func,onSetBufferCapStyle:c().func,onToggleHighlightLayers:c().func};var Bt=(0,s.connect)((0,f.P1)([wt,ot,it,dt,lt,ct,at,ut,Tt,At],(function(e,t,r,n,o,i,a,u,l,c){return{areAllWPSAvailableForSourceLayer:e,distance:t,distanceUom:r,isSourceLayerInvalid:n,sourceLayerId:o,sourceFeature:i,quadrantSegments:a,capStyle:u,runningProcess:l,showHighlightLayers:c}})),{onSetBufferDistance:function(e){return{type:N,distance:e}},onSetBufferDistanceUom:function(e){return{type:F,uom:e}},onSetBufferQuadrantSegments:function(e){return{type:_,quadrantSegments:e}},onSetBufferCapStyle:function(e){return{type:Z,capStyle:e}},onToggleHighlightLayers:Pe,onRunProcess:ce})(kt);kt.contextTypes={messages:c().object};const Wt=Bt;var Ut=(0,Ce.Z)(a.BZ.Addon),qt=function(e){var t=e.areAllWPSAvailableForIntersectionLayer,r=e.checkingWPSAvailabilityIntersection,n=e.layers,l=e.isIntersectionLayerInvalid,c=e.intersectionLayerId,s=e.intersectionFeatureId,f=e.intersectionFeatures,d=e.isIntersectionFeaturesLoading,p=e.runningProcess,v=e.selectedLayerType,m=e.intersectionCurrentPage,b=e.intersectionTotalCount,g=e.onGetFeatures,h=e.onCheckWPSAvailability,P=e.onSetIntersectionLayerId,S=e.onSetIntersectionFeatureId,O=e.onSetSelectedLayerType;(0,o.useEffect)((function(){c&&h(c,"intersection")}),[c]);var E=!c||d||r;return i().createElement(i().Fragment,null,i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.intersectionLayer"})),i().createElement(a.BZ,null,i().createElement(y.ZP,{disabled:p,clearable:!0,value:c,noResultsText:i().createElement(u.Z,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){var t;(null==e?void 0:e.value)!==c&&P(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:n.map((function(e){return{value:e.id,label:e.title||e.name||e.id}}))}),i().createElement(Ut,{tooltipId:c?t&&!l?"GeoProcessing.tooltip.validLayer":"GeoProcessing.tooltip.invalidLayer":"GeoProcessing.tooltip.selectLayer",tooltipPosition:"left",bsStyle:"primary"},r?i().createElement(Oe.Z,{size:14,style:{margin:"0 auto"}}):i().createElement(a.gG,{glyph:c?t&&!l?"ok-sign":"exclamation-mark":"question-sign",className:c?t&&!l?"text-success":"text-danger":"text-info"})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.intersectionFeature"})),i().createElement(a.BZ,null,i().createElement(y.ZP,{disabled:r||d||p||l,clearable:!0,value:s,noResultsText:i().createElement(u.Z,{msgId:"GeoProcessing.noMatchedFeature"}),onChange:function(e){var t;(null==e?void 0:e.value)!==s&&S(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:f.map((function(e,t){var r,n;return{value:(0,Me.C4)(e).id,label:null!=e&&null!==(r=e.properties)&&void 0!==r&&r.measureType?"".concat(null==e||null===(n=e.properties)||void 0===n?void 0:n.measureType," #").concat(t):(0,Me.C4)(e).id}})),onOpen:function(){"intersection"!==v&&0===f.length&&g(c,"intersection",0)},onMenuScrollToBottom:function(){b>f.length&&g(c,"intersection",m+1)}}),i().createElement(Ut,{tooltipId:s?t?"GeoProcessing.tooltip.validFeature":"GeoProcessing.tooltip.invalidFeature":"GeoProcessing.tooltip.selectFeature",tooltipPosition:"left",bsStyle:"primary"},d?i().createElement(Oe.Z,{size:14,style:{margin:"0 auto"}}):i().createElement(a.gG,{glyph:s?l?"exclamation-mark":"ok-sign":"question-sign",className:s?l?"text-danger":"text-success":"text-info"})),i().createElement(Ut,{disabled:E,onClick:function(){E||O("intersection"===v?"":"intersection")},tooltipId:"GeoProcessing.tooltip.clickToSelectFeature",tooltipPosition:"left",className:"btn",bsStyle:"intersection"===v?"success":"primary"},i().createElement(a.gG,{glyph:"map-marker",className:"intersection"===v?"":"text-info"})))))};qt.propTypes={areAllWPSAvailableForIntersectionLayer:c().bool,checkingWPSAvailabilityIntersection:c().bool,intersectionFeatureId:c().string,intersectionFeatures:c().array,intersectionTotalCount:c().number,intersectionCurrentPage:c().number,intersectionLayerId:c().string,isIntersectionFeaturesLoading:c().bool,layers:c().array,runningProcess:c().bool,isIntersectionLayerInvalid:c().bool,selectedLayerType:c().string,onCheckWPSAvailability:c().func,onSetIntersectionLayerId:c().func,onSetIntersectionFeatureId:c().func,onGetFeatures:c().func,onSetSelectedLayerType:c().func},qt.contextTypes={messages:c().object};var Ht=(0,s.connect)((0,f.P1)([It,Ct,function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r?void 0:r.featuresIntersectionLoading},pt,function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.featureId},vt,mt,function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.currentPage)||0},Tt,function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.checkingIntersectionWPSAvailability)},Ot,jt],(function(e,t,r,n,o,i,a,u,l,c,s,f){return{areAllWPSAvailableForIntersectionLayer:e,layers:t,isIntersectionFeaturesLoading:r,intersectionLayerId:n,intersectionFeatureId:o,intersectionFeatures:i,intersectionTotalCount:a,intersectionCurrentPage:u,runningProcess:l,checkingWPSAvailabilityIntersection:c,isIntersectionLayerInvalid:s,selectedLayerType:f}})),{onCheckWPSAvailability:oe,onSetIntersectionLayerId:function(e){return{type:Y,layerId:e}},onSetIntersectionFeatureId:be,onGetFeatures:ue,onSetSelectedLayerType:he})(qt);const $t=Ht;function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jt.apply(null,arguments)}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Xt=(0,Ce.Z)(a.BZ.Addon),Kt=function(e,t){var r=e.areAllWPSAvailableForIntersectionLayer,n=e.areAllWPSAvailableForSourceLayer,l=e.areasEnabled,c=e.firstAttributeToRetain,s=e.intersectionFeature,f=e.intersectionLayerId,d=e.intersectionMode,p=e.isIntersectionEnabled,v=e.isIntersectionLayerInvalid,m=e.isSourceLayerInvalid,b=e.percentagesEnabled,g=e.process,h=e.runningProcess,P=e.secondAttributeToRetain,S=e.showHighlightLayers,O=e.sourceFeature,E=e.sourceLayerId,w=e.onSetIntersectionFirstAttribute,I=e.onSetIntersectionSecondAttribute,T=e.onSetIntersectionMode,A=e.onSetIntersectionPercentagesEnabled,j=e.onSetIntersectionAreasEnabled,L=e.onToggleHighlightLayers,C=e.onRunProcess,G=t.messages,R=Yt((0,o.useState)(!1),2),x=R[0],D=R[1],N=Yt((0,o.useState)(!1),2),F=N[0],_=N[1];return i().createElement(i().Fragment,null,i().createElement(Nt,null),i().createElement($t,null),i().createElement(Le.Z,{disabled:h,useToolbar:!0,title:i().createElement(u.Z,{msgId:"GeoProcessing.advancedSettings"}),expanded:x,onSwitch:D},i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.firstAttributeToRetain"})),i().createElement(a.BZ,null,i().createElement(je.Z,{disabled:h,type:"text",value:c,onChange:function(e){w(e)}}),i().createElement(Xt,null,i().createElement(we.Z,{placement:"left",bsStyle:"info",text:(0,Ie.S$)(G,"GeoProcessing.firstAttributeToRetainTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.secondAttributeToRetain"})),i().createElement(a.BZ,null,i().createElement(je.Z,{disabled:h,type:"text",value:P,onChange:function(e){I(e)}}),i().createElement(Xt,null,i().createElement(we.Z,{placement:"left",bsStyle:"info",text:(0,Ie.S$)(G,"GeoProcessing.secondAttributeToRetainTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.intersectionMode"})),i().createElement(a.BZ,null,i().createElement(y.ZP,{disabled:h,clearable:!0,value:d,noResultsText:i().createElement(u.Z,{msgId:"GeoProcessing.noMatchedMode"}),onChange:function(e){T((null==e?void 0:e.value)||"")},options:[{value:"INTERSECTION",label:i().createElement(u.Z,{msgId:"GeoProcessing.INTERSECTION"})},{value:"FIRST",label:i().createElement(u.Z,{msgId:"GeoProcessing.FIRST"})},{value:"SECOND",label:i().createElement(u.Z,{msgId:"GeoProcessing.SECOND"})}]}),i().createElement(Xt,null,i().createElement(we.Z,{placement:"left",bsStyle:"info",text:(0,Ie.S$)(G,"GeoProcessing.intersectionModeTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.percentagesEnabled"})),i().createElement(a.BZ,null,i().createElement(y.ZP,{disabled:h,clearable:!1,value:b,onChange:function(e){A((null==e?void 0:e.value)||"")},options:[{value:"true",label:i().createElement(u.Z,{msgId:"GeoProcessing.true"})},{value:"false",label:i().createElement(u.Z,{msgId:"GeoProcessing.false"})}]}),i().createElement(Xt,null,i().createElement(we.Z,{placement:"left",bsStyle:"info",text:(0,Ie.S$)(G,"GeoProcessing.percentagesEnabledTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.areasEnabled"})),i().createElement(a.BZ,null,i().createElement(y.ZP,{disabled:h,clearable:!1,value:l,onChange:function(e){j((null==e?void 0:e.value)||"")},options:[{value:"true",label:i().createElement(u.Z,{msgId:"GeoProcessing.true"})},{value:"false",label:i().createElement(u.Z,{msgId:"GeoProcessing.false"})}]}),i().createElement(Xt,null,i().createElement(we.Z,{placement:"left",bsStyle:"info",text:(0,Ie.S$)(G,"GeoProcessing.areasEnabledTooltip")}))))),i().createElement(a.cw,{className:"highlight"},i().createElement(Ae.Z,{disabled:h,checked:S,onClick:function(){L()}}),i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.highlight"}))),i().createElement(g.RunComponent,Jt({areAllWPSAvailableForIntersectionLayer:r,areAllWPSAvailableForSourceLayer:n,intersectionFeature:s,intersectionLayerId:f,isIntersectionLayerInvalid:v,isSourceLayerInvalid:m,onRunProcess:C,onToggleHighlightLayers:L,onShowWarning:_,runningProcess:h,showHighlightLayers:S,sourceFeature:O,sourceLayerId:E,messages:G,isIntersectionEnabled:p},g.actions)),i().createElement(g.ConfirmModal,{showWarning:F,handleCloseWarningModal:function(){_(!1)},handleConfirmRunProcess:function(){S&&L(),g.actions.runProcessConfirm({onShowWarning:_,onRunProcess:C})}}))};Kt.propTypes={areasEnabled:c().string,firstAttributeToRetain:c().string,intersectionMode:c().string,isIntersectionLayerInvalid:c().bool,isSourceLayerInvalid:c().bool,isIntersectionEnabled:c().bool,percentagesEnabled:c().string,runningProcess:c().bool,process:c().object,sourceLayerId:c().string,intersectionLayerId:c().string,secondAttributeToRetain:c().string,showHighlightLayers:c().bool,areAllWPSAvailableForSourceLayer:c().bool,areAllWPSAvailableForIntersectionLayer:c().bool,sourceFeature:c().object,intersectionFeature:c().object,onSetIntersectionFirstAttribute:c().func,onSetIntersectionSecondAttribute:c().func,onSetIntersectionMode:c().func,onSetIntersectionPercentagesEnabled:c().func,onSetIntersectionAreasEnabled:c().func,onToggleHighlightLayers:c().func,onRunProcess:c().func},Kt.contextTypes={messages:c().object};var zt=(0,s.connect)((0,f.P1)([wt,It,Tt,bt,gt,ht,function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.isIntersectionEnabled)},lt,pt,Ot,dt,Pt,St,At,ct,yt],(function(e,t,r,n,o,i,a,u,l,c,s,f,d,p,y,v){return{areAllWPSAvailableForSourceLayer:e,areAllWPSAvailableForIntersectionLayer:t,runningProcess:r,firstAttributeToRetain:n,secondAttributeToRetain:o,intersectionMode:i,isIntersectionEnabled:a,sourceLayerId:u,intersectionLayerId:l,isIntersectionLayerInvalid:c,isSourceLayerInvalid:s,percentagesEnabled:f,areasEnabled:d,showHighlightLayers:p,sourceFeature:y,intersectionFeature:v}})),{onSetIntersectionFirstAttribute:function(e){return{type:K,firstAttributeToRetain:e}},onSetIntersectionSecondAttribute:function(e){return{type:z,secondAttributeToRetain:e}},onSetIntersectionMode:function(e){return{type:Q,intersectionMode:e}},onSetIntersectionPercentagesEnabled:function(e){return{type:ee,percentagesEnabled:e}},onSetIntersectionAreasEnabled:function(e){return{type:te,areasEnabled:e}},onToggleHighlightLayers:Pe,onRunProcess:ce})(Kt);Kt.contextTypes={messages:c().object};const Qt=zt;var er=function(e,t){var r=e.runningProcess,n=e.selectedTool,o=e.onReset,l=e.onSetSelectedTool,c=t.messages,s=function(e){return m()(Te,(function(t){return t.id===e}))};return i().createElement(i().Fragment,null,i().createElement("div",{className:"map-templates-all"},i().createElement(a.l0,null,i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(u.Z,{msgId:"GeoProcessing.tool"}))),i().createElement(a.cw,null,i().createElement(y.ZP,{disabled:r,clearable:!1,value:n,onChange:function(e){l((null==e?void 0:e.value)||""),(null==e?void 0:e.value)!==n&&o()},options:Te.map((function(e){var t=e.optionItem;return{value:t.value,label:(0,Ie.S$)(c,t.labelMsgId)}}))})),n===h?i().createElement(Wt,{process:s(h)}):null,n===P?i().createElement(Qt,{process:s(P)}):null)))};er.propTypes={selectedTool:c().string,runningProcess:c().bool,onReset:c().func,onSetSelectedTool:c().func},er.contextTypes={messages:c().object};var tr=(0,s.connect)((0,f.P1)([Et,Tt],(function(e,t){return{selectedTool:e,runningProcess:t}})),{onReset:function(){return{type:x}},onSetSelectedTool:function(e){return{type:q,tool:e}}})(er);const rr=tr;var nr=r(782904),or=r(607147),ir=r(55105),ar=function(e){var t=e.dockStyle,r=e.enabled,n=e.pluginCfg,a=e.onClose,l=e.onMount;return(0,o.useEffect)((function(){l(n)}),[]),r?i().createElement(p.Z,{containerStyle:t,containerClassName:"dock-container",containerId:"GeoProcessing-root",open:r,size:550,dock:!0,position:"right",bsStyle:"primary",title:i().createElement(u.Z,{msgId:"GeoProcessing.title"}),onClose:a,glyph:"globe-settings",style:t},i().createElement(d.Z,{key:"gpt-BorderLayout",className:"geo-processing-tool-panel"},i().createElement(rr,null))):null};ar.propTypes={enabled:c().bool,dockStyle:c().object,pluginCfg:c().object,onClose:c().func,onMount:c().func};const ur=(0,s.connect)((0,f.P1)([or.dK,ir.Fc],(function(e,t){return{enabled:e,dockStyle:t}})),{onMount:function(e){return{type:G,cfg:e}},onClose:nr.Xi.bind(null,"GeoProcessing",null)})(ar);var lr=r(984596),cr=r.n(lr),sr=r(630998),fr=r.n(sr),dr=r(414293),pr=r.n(dr),yr=r(49977),vr=r.n(yr),mr=r(423570),br=r.n(mr),gr=r(505055),hr=r(507526),Pr=r(362520),Sr=r(892322),Or=r(640271);var Er=r(460604),wr=r(604206),Ir=r(690825),Tr=r(580416),Ar=r(801550),jr=r(921914),Lr=r(197395),Cr=r(886850),Gr=r(199767),Rr=r(27835);function xr(e){return function(e){if(Array.isArray(e))return Dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Dr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Nr=r(439156),Fr=r.n(Nr)()({wfsVersion:"1.1.0"}),_r=Fr.getFeature,Zr=Fr.query;const Mr=function(e){var t=e.name,r=e.featureCollection,n=(0,Gr.fA)("test/xml","http://geoserver/wfs","POST",_r(Zr(t)));return r&&(n=(0,Gr.XA)((0,Gr.p5)((0,Gr.Rr)(JSON.stringify(r)),"application/json"))),(0,Rr.Uh)("gs:CollectGeometries",[(0,Gr.qP)("features",n)],(0,Gr.DK)((0,Gr.En)("result","application/json")))};var kr=r(472747);function Br(e){return function(e){if(Array.isArray(e))return Wr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Wr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ur=r(569893),qr=r(307877),Hr=r(454037),$r=r(598223),Jr=r(249243),Yr=r(432420),Vr=r(378889),Xr=r(663240);function Kr(e){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function zr(e){return function(e){if(Array.isArray(e))return en(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(e,t){if(e){if("string"==typeof e)return en(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?en(e,t):void 0}}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tn(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach((function(t){on(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function on(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Kr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var an=[(0,wr.Yf)("stop"),(0,wr.Yf)("clean","",S)],un=[{filter:["==","geomType","polygon"],symbolizers:[{kind:"Fill",outlineWidth:3,outlineColor:"#ffac12",outlineOpacity:1,color:"#ffffff",fillOpacity:.3}]},{filter:["==","geomType","line"],symbolizers:[{kind:"Line",width:3,color:"#ffac12",opacity:.3}]},{filter:["==","geomType","point"],symbolizers:[{kind:"Mark",wellKnownName:"Circle",color:"#ffffff",fillOpacity:.3,strokeColor:"#ffac12",strokeOpacity:1,strokeWidth:3,radius:8}]}],ln=function(e,t){return e.ofType(T).mergeMap((function(r){var n,o,i,a=r.layerId,u=r.source,l=t.getState(),c=Gt(l,a),s=Lt(l)||De()(cr()(c.url)),f="source"===u?ie:ae;return"vector"===c.type?vr().Observable.from([ye(a,!0,u),se(a,u,c,0,(null==c||null===(n=c.features)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.geometry)||void 0===i?void 0:i.type)||""),f(!1)]):(0,kr.l)(s,"geo:buffer,gs:IntersectionFeatureCollection,gs:CollectGeometries").mergeMap((function(e){return vr().Observable.defer((function(){return new Promise((function(t,r){return(0,gr.parseString)(e.data,{tagNameProcessors:[hr.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))})).flatMap((function(t){var r,n,o,i,l,d,p,y,v,m,b,g,h=[null==t||null===(r=t.ProcessDescriptions)||void 0===r||null===(n=r.ProcessDescription)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.Identifier)||void 0===i?void 0:i[0],null==t||null===(l=t.ProcessDescriptions)||void 0===l||null===(d=l.ProcessDescription)||void 0===d||null===(p=d[1])||void 0===p||null===(y=p.Identifier)||void 0===y?void 0:y[0],null==t||null===(v=t.ProcessDescriptions)||void 0===v||null===(m=v.ProcessDescription)||void 0===m||null===(b=m[2])||void 0===b||null===(g=b.Identifier)||void 0===g?void 0:g[0]];return["geo:buffer","gs:IntersectionFeatureCollection","gs:CollectGeometries"].reduce((function(e,t){return e&&fr()(h,(function(e){return e===t}))>-1}),!0)?c.describeFeatureType?vr().Observable.from([ye(a,!0,u),ue(a,u,0),f(!1)]):vr().Observable.from([ye(a,!0,u),(0,Ir.H)(s,c,{},u),f(!1)]).merge(vr().Observable.race(e.ofType(Tr.K$).filter((function(e){return e.node===a})),vr().Observable.timer(1e4).mapTo("timeout")).switchMap((function(e){return"timeout"===e||null!=e&&e.error?vr().Observable.of(pe(a,u)):vr().Observable.of(ue(a,u,0))}))):vr().Observable.from([pe(a,u),ye(a,!1,u),f(!1)])})).catch((function(e){return(0,$r.H)(e),vr().Observable.of(ye(a,!1,u),f(!1))})).startWith(f(!0))}))},cn=function(e,t){return e.ofType(L).filter((function(e){var r,n,o=e.source,i=t.getState();return"source"===o?(n=ft(i),r=st(i)):(r=vt(i),n=mt(i)),0===n||n>r.length})).mergeMap((function(e){var r,n,o,i,a=e.layerId,u=e.source,l=e.page,c=t.getState(),s="source"===u?fe:de,f=Gt(c,a);if("vector"===f.type)return vr().Observable.from([se(a,u,f,0,(null==f||null===(n=f.features)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.geometry)||void 0===i?void 0:i.type)||"")]);var d=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.maxFeatures)||10}(c);if(pr()(null==f?void 0:f.describeFeatureType))return vr().Observable.of(function(e){return{type:C,layerId:e}}(a));var p={propertyName:(0,Vr.findNonGeometryProperty)(f.describeFeatureType)[0].name,startIndex:l*d,maxFeatures:d},y=(0,Vr.findGeometryProperty)(f.describeFeatureType);return vr().Observable.merge((0,Cr.Mc)(nn(nn({},f),{},{name:null==f?void 0:f.name,search:nn(nn({},null!==(r=null==f?void 0:f.search)&&void 0!==r?r:{}),{},{url:f.url})}),null,p).map((function(e){return se(a,u,e,l,y)})).catch((function(e){return(0,$r.H)(e),vr().Observable.of(se(a,u,e,l,y),(0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFeaturesList",autoDismiss:6,position:"tc",values:{layerName:f.name+" - "+f.title}}))})).startWith(s(!0)).concat(vr().Observable.of(s(!1))))}))},sn=function(e,t){return e.ofType(J).filter((function(e){return e.featureId&&""!==e.featureId})).switchMap((function(e){var r=e.featureId,n=t.getState(),o=lt(n),i=(0,qr.kn)(n),a=At(n),u=Gt(n,o);return vr().Observable.defer((function(){return"vector"===u.type?vr().Observable.of(u):(0,Yr.DH)(u.search.url,{typeName:u.name,featureID:r,outputFormat:"application/json",srsName:"EPSG:4326"})})).switchMap((function(e){var t=e.features,n=m()(t,(function(e){return e.id===r})),o=a?[(0,Ar.Px)((0,qe.getGeoJSONExtent)(n.geometry),"EPSG:4326")]:[];return vr().Observable.from([me(n),(0,Er.W)(O,"gpt","overlay",{type:"vector",name:"highlight-gpt-features",visibility:a,features:t.filter((function(e){return e.id===r})).map((0,qr.X8)(i))})].concat(o))})).catch((function(e){return(0,$r.H)(e),vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGetFeature",autoDismiss:6,position:"tc"}))}))}))},fn=function(e,t){return e.ofType(V).filter((function(e){return""!==e.featureId})).switchMap((function(e){var r=e.featureId,n=t.getState(),o=pt(n),i=(0,qr.kn)(n),a=At(n),u=Gt(n,o);return vr().Observable.defer((function(){return"vector"===u.type?vr().Observable.of(u):(0,Yr.DH)(u.search.url,{typeName:u.name,featureID:r,outputFormat:"application/json",srsName:"EPSG:4326"})})).switchMap((function(e){var t=e.features,n=m()(t,(function(e){return e.id===r})),o=a?[(0,Ar.Px)((0,qe.getGeoJSONExtent)(n.geometry),"EPSG:4326")]:[];return vr().Observable.from([ge(n),(0,Er.W)(E,"gpt","overlay",{type:"vector",name:"highlight-gpt-intersection-features",visibility:a,features:t.filter((function(e){return e.id===r})).map((0,qr.X8)(i))})].concat(o))})).catch((function(e){return(0,$r.H)(e),vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGetFeature",autoDismiss:6,position:"tc"}))}))}))},dn=function(e,t){return e.ofType(D).filter((function(e){return e.process===h})).switchMap((function(e){tn(e);var r=t.getState(),n=lt(r),o=Gt(r,n),i=Ct(r),a=Lt(r)||De()(cr()(o.url)),u=at(r),l=ut(r),c={},s=ot(r);"km"===it(r)&&(s*=1e3);var f=Ke(i,I),d=[];if(a||d.push(o.name+" - "+o.title),d.length)return vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorMissingUrl",autoDismiss:6,position:"tc",values:{layerName:d.join(", ")}}));var p=function(e,t){return vr().Observable.defer((function(){return function(e,t){var r=function(e,t){void 0===t&&(t={});var r=0,n=0,o=0;return(0,Sr.pZ)(e,(function(e){r+=e[0],n+=e[1],o++}),!0),(0,Or.xm)([r/o,n/o],t.properties)}(t),n=(0,qe.reprojectGeoJson)(r,"EPSG:4326","EPSG:3857"),o=(0,qe.reprojectGeoJson)({type:"Feature",geometry:nn(nn({},n.geometry),{},{coordinates:[n.geometry.coordinates[0]-1e3,n.geometry.coordinates[1]]})},"EPSG:3857","EPSG:4326"),i=(0,qe.calculateDistance)([r.geometry.coordinates,o.geometry.coordinates]);return s*=1e3/i,(0,Rr.ZP)(a,function(e){var t=e.geometry3857,r=e.distance,n=void 0===r?100:r,o=e.quadrantSegments,i=e.capStyle,a=[(0,Gr.qP)("geom",(0,Gr.XA)((0,Gr.p5)((0,Gr.Rr)(t),"application/wkt"))),(0,Gr.qP)("distance",(0,Gr.XA)((0,Gr.gN)(n)))].concat(xr(o?[(0,Gr.qP)("quadrantSegments",(0,Gr.XA)((0,Gr.gN)(o)))]:[]),xr(i?[(0,Gr.qP)("capStyle",(0,Gr.XA)((0,Gr.gN)(i)))]:[]));return(0,Rr.Uh)("geo:buffer",a,(0,Gr.DK)((0,Gr.En)("result","application/json")))}({geometry3857:e,distance:s,quadrantSegments:u,capStyle:l}),c,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}})}(e,t).switchMap((function(e){var t=(0,Ze.Bt)(r),n=m()(t,(function(e){return"Default"===e.id})),o=m()((null==n?void 0:n.nodes)||[],(function(e){return e.id===I}))||m()(t,(function(e){return e.id===I})),i=[(0,qe.reprojectGeoJson)({id:0,geometry:e,type:"Feature"},"EPSG:3857","EPSG:4326")],a=(0,qe.getGeoJSONExtent)({features:i,type:"FeatureCollection"});return(o?vr().Observable.empty():vr().Observable.of((0,Tr.Rp)("Buffered layers",null,{id:I},!0))).concat(vr().Observable.of((0,Tr.A4)({id:br()(),type:"vector",name:"Buffer Layer "+f,title:"Buffer Layer "+f,visibility:!0,group:I,bbox:{crs:"EPSG:4326",bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]}},features:i.map((function(e){return nn(nn({},e),{},{properties:nn(nn({},e.properties),{},{geomType:Ve(e.geometry.type)})})})),style:{format:"geostyler",body:{name:"",rules:un}}}),(0,Ar.Px)(a,"EPSG:4326"),(0,Lr.Vp)({title:"notification.success",message:"GeoProcessing.notifications.successfulBuffer",autoDismiss:6,position:"tc"})))})).catch((function(e){return(0,$r.H)(e),vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorBuffer",autoDismiss:6,position:"tc"}))}))}))},y=ct(r);if(g()(y))return(0,Rr.ZP)(a,Mr({name:o.name,featureCollection:"vector"===o.type?Xe(o.features):null}),c,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch((function(e){return(0,$r.H)(e),vr().Observable.of({error:e,layerName:o.name,layerTitle:o.title})})).switchMap((function(e){if(e.error)return e.error.message.includes("Failed to retrieve value for input features")?(console.error("layerName "+e.layerName+" - "+e.layerTitle),vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:e.layerName+" - "+e.layerTitle}}))):vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorBuffer",autoDismiss:6,position:"tc"}));var t={type:"Feature",geometry:e},r=(0,qe.reprojectGeoJson)(t,"EPSG:4326","EPSG:3857"),n=(0,Xr.Z)(r.geometry);return p(n,t)})).startWith(le(!0)).concat(vr().Observable.of(le(!1)));var v=(0,qe.reprojectGeoJson)(y,"EPSG:4326","EPSG:3857"),b=(0,Xr.Z)(v.geometry);return p(b,y).startWith(le(!0)).concat(vr().Observable.of(le(!1)))}))},pn=function(e){return e.ofType(H,J).filter((function(e){return e.type===H||""===e.featureId})).switchMap((function(e){return tn(e),vr().Observable.of((0,Er.fU)({id:O}))}))},yn=function(e){return e.ofType(Y,V).filter((function(e){return e.type===Y||""===e.featureId})).switchMap((function(e){return tn(e),vr().Observable.of((0,Er.fU)({id:E}))}))},vn=function(e,t){return e.ofType(D).filter((function(e){return e.process===P})).switchMap((function(e){tn(e);var r,n,o=t.getState(),i=lt(o),a=Gt(o,i),u=Ct(o),l=Lt(o)||De()(cr()(a.url)),c=ct(o),s={},f=yt(o),d=Ke(u,w);r=g()(c)?(0,Rr.ZP)(l,Mr({name:a.name,featureCollection:"vector"===a.type?Xe(a.features):null}),s,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch((function(e){return(0,$r.H)(e),vr().Observable.of({error:e,layerName:a.name,layerTitle:a.title})})):vr().Observable.of(c.geometry);var p=pt(o),y=Gt(o,p),v=Lt(o)||De()(cr()(y.url));return n=g()(f)?(0,Rr.ZP)(v,Mr({name:y.name,featureCollection:"vector"===y.type?Xe(y.features):null}),s,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch((function(e){return(0,$r.H)(e),vr().Observable.of({error:e,layerName:y.name,layerTitle:y.title})})):vr().Observable.of(f.geometry),vr().Observable.forkJoin(r,n).switchMap((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,r)||Qr(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],u=n[1];if(null!=i&&i.error||null!=u&&u.error){var c,f,p,b,g=[];return null!=i&&null!==(c=i.error)&&void 0!==c&&null!==(f=c.message)&&void 0!==f&&f.includes("Failed to retrieve value for input features")&&((0,$r.H)(i.error),g.push((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:i.layerName+" - "+i.layerTitle}}))),null!=u&&null!==(p=u.error)&&void 0!==p&&null!==(b=p.message)&&void 0!==b&&b.includes("Failed to retrieve value for input features")&&((0,$r.H)(u.error),g.push((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:u.layerName+" - "+u.layerTitle}}))),g.push((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorIntersectGFI",autoDismiss:6,position:"tc"})),vr().Observable.from(g)}var h=bt(o),P=gt(o),S=ht(o),O=Pt(o),E=St(o);return(0,Rr.ZP)(l||v,function(e){var t=e.firstFC,r=e.secondFC,n=e.firstAttributeToRetain,o=void 0===n?"":n,i=e.secondAttributeToRetain,a=void 0===i?"":i,u=e.intersectionMode,l=void 0===u?"INTERSECTION":u,c=e.percentagesEnabled,s=void 0!==c&&c,f=e.areasEnabled,d=void 0!==f&&f;return(0,Rr.Uh)("gs:IntersectionFeatureCollection",[(0,Gr.qP)("first feature collection",(0,Gr.XA)((0,Gr.p5)((0,Gr.Rr)(JSON.stringify(t)),"application/json"))),(0,Gr.qP)("second feature collection",(0,Gr.XA)((0,Gr.p5)((0,Gr.Rr)(JSON.stringify(r)),"application/json")))].concat(Br(o?[(0,Gr.qP)("first attributes to retain",(0,Gr.XA)((0,Gr.gN)(o)))]:[]),Br(a?[(0,Gr.qP)("second attributes to retain",(0,Gr.XA)((0,Gr.gN)(a)))]:[]),Br(l?[(0,Gr.qP)("intersectionMode",(0,Gr.XA)((0,Gr.gN)(l)))]:[]),[(0,Gr.qP)("percentagesEnabled",(0,Gr.XA)((0,Gr.gN)(s))),(0,Gr.qP)("areasEnabled",(0,Gr.XA)((0,Gr.gN)(d)))]),(0,Gr.DK)((0,Gr.En)("result","application/json")))}({firstFC:{type:"FeatureCollection",features:[{type:"Feature",geometry:i}]},secondFC:{type:"FeatureCollection",features:[{type:"Feature",geometry:u}]},firstAttributeToRetain:h,secondAttributeToRetain:P,intersectionMode:S,percentagesEnabled:O,areasEnabled:E}),s,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).switchMap((function(e){var t=(0,Ze.Bt)(o);if("string"==typeof e){var r=e.substring(e.indexOf("<ows:ExceptionText>")+19,e.indexOf("</ows:ExceptionText>"));return console.error(e),vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:r,autoDismiss:6,position:"tc"}))}var n=m()(t,(function(e){return"Default"===e.id})),i=m()((null==n?void 0:n.nodes)||[],(function(e){return e.id===w}))||m()(t,(function(e){return e.id===w})),a=(0,qe.getGeoJSONExtent)(e);return a.some((function(e){return e===1/0}))?vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.emptyIntersection",autoDismiss:6,position:"tc"})):(i?vr().Observable.empty():vr().Observable.of((0,Tr.Rp)("Intersected Layers",null,{id:w},!0))).concat(vr().Observable.of((0,Tr.A4)({id:br()(),type:"vector",name:"Intersection Layer "+d,group:w,title:"Intersection Layer "+d,visibility:!0,features:e.features.map((function(e,t){return nn(nn({},e),{},{id:"Feature #"+t,properties:nn(nn({},e.properties),{},{geomType:Ve(e.geometry.type)})})})),bbox:{crs:"EPSG:4326",bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]}},style:{format:"geostyler",body:{name:"",rules:un}}}),(0,Ar.Px)(a,"EPSG:4326"),(0,Lr.Vp)({title:"notification.success",message:"GeoProcessing.notifications.successfulIntersection",autoDismiss:6,position:"tc"})))})).catch((function(e){(0,$r.H)(e);var t=[];return l||t.push(a.name+" - "+a.title),v||t.push(y.name+" - "+y.title),t.length?vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorMissingUrl",autoDismiss:6,position:"tc",values:{layerName:t.join(", ")}})):vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorIntersectGFI",autoDismiss:6,position:"tc"}))}))})).startWith(le(!0)).concat(vr().Observable.of(le(!1)))}))},mn=function(e,t){return e.ofType(ne).switchMap((function(){var e=At(t.getState());return vr().Observable.of((0,Er.YP)("gpt",{visibility:e}))}))},bn=function(e,t){return e.ofType(nr.kM).filter((function(e){return e.control===S})).switchMap((function(){var e,r=t.getState(),n=At(r),o=(0,or.dK)(r);if(Et(r)===h){var i,a,u=(0,Ur.K)(r),l=m()(u,(function(e){return e.id===O}));return null!=l&&l.id?(i=vr().Observable).of.apply(i,[(0,Er.W)(l.id,l.owner,l.actionType,nn(nn({},l.options),{},{visibility:!!o&&n})),(0,Ar.$X)("click",S)].concat(zr(o?[]:[(0,jr.mK)(!0),he("")]))):(a=vr().Observable).of.apply(a,[(0,Ar.$X)("click",S)].concat(zr(o?[]:[(0,jr.mK)(!0),he("")])))}return vr().Observable.of((0,Er.YP)("gpt",{visibility:!!o&&n})).concat((e=vr().Observable).of.apply(e,[(0,Ar.$X)("click",S)].concat(zr(o?[]:[(0,jr.mK)(!0),he("")]))))}))},gn=function(e){return e.ofType(x).switchMap((function(){return vr().Observable.of((0,Ar.$X)("click",S))}))},hn=function(e,t){var r=t.getState;return e.ofType(re).filter((function(e){return!!e.source})).switchMap((function(e){var t=e.source,n=r();return vr().Observable.from([(0,jr.g)(),(0,jr.aN)()].concat(zr(Re()(n,"draw.drawOwner","")===S?an:[]),[(0,Ar.H0)("click",S)],zr((0,qr.yg)(n)?[(0,jr.mK)(!1)]:[(0,jr.mK)(!t)])))}))},Pn=function(e,t){var r=t.getState;return e.ofType(Ar.TR).filter((function(){return e=r(),!!Re()((0,_e.Od)(e),"eventListeners.click",[]).find((function(e){return e===S}));var e})).switchMap((function(e){var t,n=e.point,o=r(),i=(0,_e.Od)(o),a=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedLayerId}(o),u=jt(o),l="source"===u?me:ge,c="source"===u?ve:be,s=Gt(o,a),f=(0,Hr.Fm)(s,{format:"application/json",map:i,point:n}),d=f.url,p=f.request,y=d,v=nn({},p);if(d)return("client"!==d?(0,Jr.y)(y,v,s,{attachJSON:!0}):vr().Observable.defer((function(){var e,t,r,n,o,i,a;return vr().Observable.of(null!=p&&null!==(e=p.features)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(r=t.properties)&&void 0!==r&&null!==(n=r.features)&&void 0!==n&&n.length?null==p||null===(o=p.features)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.properties:null!=p&&null!==(a=p.features)&&void 0!==a&&a.length?p:{features:[]})}))).switchMap((function(e){var t=e.features;return null!=t&&t.length?vr().Observable.from([l(t[0]),c(t[0].id),(0,Lr.Vp)({title:"notification.success",message:"GeoProcessing.notifications.featureFound",autoDismiss:10,position:"tc"})]):vr().Observable.of((0,Lr.Kp)({title:"notification.warning",message:"GeoProcessing.notifications.noFeatureInPoint",autoDismiss:10,position:"tc"}))})).catch((function(e){return(0,$r.H)(e),vr().Observable.of((0,Lr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGFI",autoDismiss:6,position:"tc"}))}));var m=(null!==(t=null==n?void 0:n.intersectedFeatures)&&void 0!==t?t:[]).find((function(e){return e.id===s.id})),b=null==m?void 0:m.features[0];return b?vr().Observable.of(l(b),c(b.id)):vr().Observable.of((0,Lr.Kp)({title:"notification.warning",message:"longitudinalProfile.warnings.noFeatureInPoint",autoDismiss:10,position:"tc"}))}))},Sn=function(e,t){return e.ofType(Pr.dn).filter((function(e){var r=e.source;return(0,or.dK)(t.getState())&&r!==S})).map((function(e){var t,r,n,o,i=e.layout,a=(0,Pr.FV)(nn(nn({},i),{},{right:550+(null!==(t=null==i||null===(r=i.boundingSidebarRect)||void 0===r?void 0:r.right)&&void 0!==t?t:0),boundingMapRect:nn(nn({},i.boundingMapRect||{}),{},{right:550+(null!==(n=null==i||null===(o=i.boundingSidebarRect)||void 0===o?void 0:o.right)&&void 0!==n?n:0)}),rightPanel:!0}));return nn(nn({},a),{},{source:S})}))},On=function(e){return e.ofType(x).switchMap((function(){return vr().Observable.of((0,Er.fU)({id:O}),(0,Er.fU)({id:E}))}))},En=r(275982);function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function In(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?In(Object(r),!0).forEach((function(t){An(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function An(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=wn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jn={source:{},buffer:{},selectedLayerId:"",selectedLayerType:"",intersection:{intersectionMode:"INTERSECTION"},flags:{showHighlightLayers:!0,isIntersectionEnabled:!0,runningProcess:!1}};const Ln=(0,r(322843).rx)("GeoProcessing",{component:ur,containers:{SidebarMenu:{name:"GeoProcessing",position:2100,doNotHide:!0,tooltip:"GeoProcessing.tooltip.siderBarBtn",text:i().createElement(u.Z,{msgId:"GeoProcessing.title"}),icon:i().createElement(a.gG,{glyph:"globe-settings"}),action:nr.Xi.bind(null,"GeoProcessing",null),priority:10,toggle:!0},BurgerMenu:{name:"GeoProcessing",position:2100,doNotHide:!0,tooltip:"GeoProcessing.tooltip.siderBarBtn",text:i().createElement(u.Z,{msgId:"GeoProcessing.title"}),icon:i().createElement(a.gG,{glyph:"globe-settings"}),action:nr.Xi.bind(null,"GeoProcessing",null),priority:12,toggle:!0}},reducers:{geoProcessing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tn({selectedTool:h||P},jn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Tn(Tn({},e),{},{flags:Tn(Tn({},e.flags),{},{checkingWPSAvailability:t.status})});case j:return Tn(Tn({},e),{},{flags:Tn(Tn({},e.flags),{},{checkingWPSAvailabilityIntersection:t.status})});case C:return Tn(Tn({},e),{},{errorLoadingDFT:An({},t.layerId,!0)});case G:return Tn(Tn(Tn({},e),t.cfg),{},{cfg:t.cfg,buffer:Tn(Tn({},e.buffer),t.cfg.buffer||{}),intersection:Tn(Tn({},e.intersection),t.cfg.intersection||{})});case x:case nr.l:case En.nk:return Tn(Tn(Tn({},e),jn),{},{buffer:Tn(Tn({},e.cfg.buffer||{}),jn.buffer),intersection:Tn(Tn({},e.cfg.intersection||{}),jn.intersection),source:Tn({},jn.source)});case R:return Tn(Tn({},e),{},{flags:Tn(Tn({},e.flags),{},{runningProcess:t.status})});case N:return Tn(Tn({},e),{},{buffer:Tn(Tn({},e.buffer),{},{distance:Number(t.distance)})});case F:return Tn(Tn({},e),{},{buffer:Tn(Tn({},e.buffer),{},{distanceUom:t.uom})});case _:return Tn(Tn({},e),{},{buffer:Tn(Tn({},e.buffer),{},{quadrantSegments:Number(t.quadrantSegments)})});case Z:return Tn(Tn({},e),{},{buffer:Tn(Tn({},e.buffer),{},{capStyle:t.capStyle})});case M:var r,n;return t.data.features?Tn(Tn({},e),{},An(An({},t.source,Tn(Tn({},e[t.source]),{},{features:(e[t.source].features||[]).concat(t.data.features||[]).filter((function(e){var t;return!(null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureId)})),totalCount:t.data.totalFeatures,currentPage:t.nextPage})),"flags",Tn(Tn({},e.flags),{},{isIntersectionEnabled:"source"===t.source?!(null!==(r=t.geometryProperty)&&void 0!==r&&null!==(n=r.type)&&void 0!==n&&n.includes("Point")):e.flags.isIntersectionEnabled}))):Tn(Tn({},e),{},An({},t.source,Tn(Tn({},e[t.source]),{},{error:t.data})));case k:return Tn(Tn({},e),{},{flags:Tn(Tn({},e.flags),{},{featuresSourceLoading:t.status})});case B:return Tn(Tn({},e),{},{flags:Tn(Tn({},e.flags),{},{featuresIntersectionLoading:t.status})});case W:return Tn(Tn({},e),{},{flags:Tn(Tn({},e.flags),{},{invalid:Tn(Tn({},e.flags.invalid),{},An({},t.layerId,t.status))})});case U:return Tn(Tn({},e),{},{flags:Tn(Tn({},e.flags),"source"===t.source?{wpsAvailability:Tn(Tn({},e.flags.wpsAvailability),{},An({},t.layerId,t.status))}:{wpsAvailabilityIntersection:Tn(Tn({},e.flags.wpsAvailabilityIntersection),{},An({},t.layerId,t.status))})});case q:return Tn(Tn({},e),{},{selectedTool:t.tool});case H:var o,i,a,u,l,c,s,f,d,p;return Tn(Tn({},e),{},{selectedLayerType:t.layerId||"source"!==e.selectedLayerType?e.selectedLayerType:"",selectedLayerId:"source"===e.selectedLayerType?t.layerId:e.selectedLayerId,source:Tn(Tn({},e.source),{},{layerId:t.layerId,features:t.layerId!==(null===(o=e.source)||void 0===o?void 0:o.layerId)?[]:null==e||null===(i=e.source)||void 0===i?void 0:i.features,totalCount:t.layerId!==(null===(a=e.source)||void 0===a?void 0:a.layerId)?0:null==e||null===(u=e.source)||void 0===u?void 0:u.totalCount,currentPage:t.layerId!==(null===(l=e.source)||void 0===l?void 0:l.layerId)?0:null==e||null===(c=e.source)||void 0===c?void 0:c.currentPage,feature:t.layerId!==(null===(s=e.source)||void 0===s?void 0:s.layerId)||null==e||null===(f=e.source)||void 0===f?void 0:f.feature,featureId:t.layerId!==(null===(d=e.source)||void 0===d?void 0:d.layerId)?"":null==e||null===(p=e.source)||void 0===p?void 0:p.featureId})});case J:var y,v,b;return Tn(Tn({},e),{},{source:Tn(Tn({},e.source),{},{featureId:t.featureId,currentPage:""===t.featureId?0:null==e||null===(y=e.source)||void 0===y?void 0:y.currentPage,features:""===t.featureId?[]:null==e||null===(v=e.source)||void 0===v?void 0:v.features,feature:""===t.featureId?{}:null==e||null===(b=e.source)||void 0===b?void 0:b.feature})});case $:return Tn(Tn({},e),{},{source:Tn(Tn({},e.source),{},{feature:t.feature,features:m()(e.source.features,(function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.feature)||void 0===r?void 0:r.id)}))?e.source.features:[t.feature]})});case Y:var g,S,O,E,w,I,T,L,D,oe;return Tn(Tn({},e),{},{selectedLayerType:t.layerId||"intersection"!==e.selectedLayerType?e.selectedLayerType:"",selectedLayerId:"intersection"===e.selectedLayerType?t.layerId:e.selectedLayerId,intersection:Tn(Tn({},e.intersection),{},{layerId:t.layerId,features:t.layerId!==(null===(g=e.intersection)||void 0===g?void 0:g.layerId)?[]:null==e||null===(S=e.intersection)||void 0===S?void 0:S.features,totalCount:t.layerId!==(null===(O=e.intersection)||void 0===O?void 0:O.layerId)?0:null==e||null===(E=e.intersection)||void 0===E?void 0:E.totalCount,currentPage:t.layerId!==(null===(w=e.intersection)||void 0===w?void 0:w.layerId)?0:null==e||null===(I=e.intersection)||void 0===I?void 0:I.currentPage,feature:t.layerId!==(null===(T=e.intersection)||void 0===T?void 0:T.layerId)||null==e||null===(L=e.intersection)||void 0===L?void 0:L.feature,featureId:t.layerId!==(null===(D=e.intersection)||void 0===D?void 0:D.layerId)?"":null==e||null===(oe=e.intersection)||void 0===oe?void 0:oe.featureId})});case V:var ie,ae,ue;return Tn(Tn({},e),{},{intersection:Tn(Tn({},e.intersection),{},{featureId:t.featureId,currentPage:""===t.featureId?0:null==e||null===(ie=e.intersection)||void 0===ie?void 0:ie.currentPage,features:""===t.featureId?[]:null==e||null===(ae=e.intersection)||void 0===ae?void 0:ae.features,feature:""===t.featureId?{}:null==e||null===(ue=e.intersection)||void 0===ue?void 0:ue.feature})});case X:return Tn(Tn({},e),{},{intersection:Tn(Tn({},e.intersection),{},{feature:t.feature,features:m()(e.intersection.features,(function(e){return e.id===t.feature.id}))?e.intersection.features:[t.feature]})});case K:return Tn(Tn({},e),{},{intersection:Tn(Tn({},e.intersection),{},{firstAttributeToRetain:t.firstAttributeToRetain})});case z:return Tn(Tn({},e),{},{intersection:Tn(Tn({},e.intersection),{},{secondAttributeToRetain:t.secondAttributeToRetain})});case Q:return Tn(Tn({},e),{},{intersection:Tn(Tn({},e.intersection),{},{intersectionMode:t.intersectionMode})});case ee:return Tn(Tn({},e),{},{intersection:Tn(Tn({},e.intersection),{},{percentagesEnabled:t.percentagesEnabled})});case te:return Tn(Tn({},e),{},{intersection:Tn(Tn({},e.intersection),{},{areasEnabled:t.areasEnabled})});case re:return Tn(Tn({},e),{},{selectedLayerType:t.source,selectedLayerId:"source"===t.source?e.source.layerId:e.intersection.layerId});case ne:var le;return Tn(Tn({},e),{},{flags:Tn(Tn({},e.flags),{},{showHighlightLayers:!(null!=e&&null!==(le=e.flags)&&void 0!==le&&le.showHighlightLayers)})});default:return e}}},epics:n})},569893:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(227361),o=r.n(n),i=function(e){return o()(e,"additionallayers")||[]}},769877:e=>{var t=Math.floor,r=Math.random;e.exports=function(e,n){return e+t(r()*(n-e+1))}},23279:(e,t,r)=>{var n=r(513218),o=r(707771),i=r(14841),a=Math.max,u=Math.min;e.exports=function(e,t,r){var l,c,s,f,d,p,y=0,v=!1,m=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var r=l,n=c;return l=c=void 0,y=t,f=e.apply(n,r)}function h(e){var r=e-p;return void 0===p||r>=t||r<0||m&&e-y>=s}function P(){var e=o();if(h(e))return S(e);d=setTimeout(P,function(e){var r=t-(e-p);return m?u(r,s-(e-y)):r}(e))}function S(e){return d=void 0,b&&l?g(e):(l=c=void 0,f)}function O(){var e=o(),r=h(e);if(l=arguments,c=this,p=e,r){if(void 0===d)return function(e){return y=e,d=setTimeout(P,t),v?g(e):f}(p);if(m)return clearTimeout(d),d=setTimeout(P,t),g(p)}return void 0===d&&(d=setTimeout(P,t)),f}return t=i(t)||0,n(r)&&(v=!!r.leading,s=(m="maxWait"in r)?a(i(r.maxWait)||0,t):s,b="trailing"in r?!!r.trailing:b),O.cancel=function(){void 0!==d&&clearTimeout(d),y=0,l=p=c=d=void 0},O.flush=function(){return void 0===d?f:S(o())},O}},707771:(e,t,r)=>{var n=r(555639);e.exports=function(){return n.Date.now()}},683608:(e,t,r)=>{var n=r(769877),o=r(816612),i=r(418601),a=parseFloat,u=Math.min,l=Math.random;e.exports=function(e,t,r){if(r&&"boolean"!=typeof r&&o(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=i(e),void 0===t?(t=e,e=0):t=i(t)),e>t){var c=e;e=t,t=c}if(r||e%1||t%1){var s=l();return u(e+s*(t-e+a("1e-"+((s+"").length-1))),t)}return n(e,t)}}}]);