(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[42734],{64758:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ve});var n=r(124852),o=r.n(n),a=r(532425),i=r(271418),l=r(624847),c=r(965539),s=r(805346),u=r(414293),p=r.n(u),d=r(202576);const m=function(e){var t=e.children,r=e.service,n=e.onChangeServiceProperty,a=void 0===n?function(){}:n,l=e.onToggleThumbnail,c=void 0===l?function(){}:l;return o().createElement(o().Fragment,null,o().createElement(i.cw,{controlId:"autoload",key:"autoload"},void 0!==r.autoload&&o().createElement(i.XZ,{value:"autoload",onChange:function(e){return a("autoload",e.target.checked)},checked:!p()(r.autoload)&&r.autoload},o().createElement(s.Z,{msgId:"catalog.autoload"}))),o().createElement(i.cw,{controlId:"thumbnail",key:"thumbnail"},o().createElement(i.XZ,{onChange:function(){return c()},checked:!!p()(r.hideThumbnail)||!r.hideThumbnail},o().createElement(s.Z,{msgId:"catalog.showPreview"}))),!p()(r.type)&&"wfs"===r.type&&o().createElement(i.cw,{controlId:"allowUnsecureLayers",key:"allowUnsecureLayers"},o().createElement(i.XZ,{onChange:function(e){return a("allowUnsecureLayers",e.target.checked)},checked:!p()(r.allowUnsecureLayers)&&r.allowUnsecureLayers},o().createElement(s.Z,{msgId:"catalog.allowUnsecureLayers.label"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"catalog.allowUnsecureLayers.tooltip"})}))),!p()(r.type)&&"cog"===r.type&&o().createElement(i.cw,{controlId:"fetchMetadata",key:"fetchMetadata"},o().createElement(i.XZ,{onChange:function(e){return a("fetchMetadata",e.target.checked)},checked:!!p()(r.fetchMetadata)||r.fetchMetadata},o().createElement(s.Z,{msgId:"catalog.fetchMetadata.label"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"catalog.fetchMetadata.tooltip"})}))),t)};var f=r(405785),y=r(618446),g=r.n(y),v=r(677306),S=r(615402),A={options:{}};const b=function(e){var t=e.service,r=void 0===t?{}:t,n=e.setValid,a=void 0===n?function(){}:n,l=e.onToggleThumbnail,c=void 0===l?function(){}:l,u=e.onChangeServiceProperty,m=void 0===u?function(){}:u,f=r.options||r.variants?{options:r.options||{},variants:r.variants}:void 0;return o().createElement("div",null,o().createElement(i.cw,{controlId:"autoload",key:"autoload"},void 0!==r.autoload&&o().createElement(i.XZ,{key:"autoload",value:"autoload",onChange:function(e){return m("autoload",e.target.checked)},checked:!p()(r.autoload)&&r.autoload},o().createElement(s.Z,{msgId:"catalog.autoload"})),o().createElement(i.XZ,{key:"thumbnail",value:"thumbnail",onChange:function(){return c()},checked:!!p()(r.hideThumbnail)||!r.hideThumbnail},o().createElement(s.Z,{msgId:"catalog.showPreview"})),"tms"===r.provider?o().createElement(i.XZ,{key:"forceDefaultTileGrid",value:"forceDefaultTileGrid",onChange:function(e){return m("forceDefaultTileGrid",e.target.checked)},checked:!p()(r.forceDefaultTileGrid)&&r.forceDefaultTileGrid},o().createElement(s.Z,{msgId:"catalog.tms.forceDefaultTileGrid"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"catalog.tms.forceDefaultTileGridDescription"})})):null,r.provider&&"custom"!==r.provider?null:o().createElement("div",null,o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.tms.customTMSConfiguration"}),"  ",o().createElement(d.Z,{text:o().createElement(S.Z,{msgId:"catalog.tms.customTMSConfigurationHint"})})),o().createElement(v.Z,{json:f||A,onValid:function(e){var t=e.options,n=e.variants;g()(t,r.options)||m("options",t),g()(n,r.variants)||m("variants",n),a(!0)},onError:function(){r.options&&m("options",void 0),r.variants&&m("variants",void 0),a(!1)}}))))};var h=r(743129),E=r(968929),w=r.n(E),O=r(993451),T=r(835420),P=r(624262),j=r(298854),C=r(659551),k=r(950966);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I.apply(null,arguments)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return(t=function(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M={mode:"xml",theme:"material",lineNumbers:!0,lineWrapping:!0,autoRefresh:!0,indentUnit:2,tabSize:2},F=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.className,a=void 0===n?"":n,l=e.tooltip;return o().createElement(k.Z,{placement:"bottom",overlay:l},o().createElement(i.gG,{style:{marginLeft:4},glyph:r,className:a}))},D=function(e){var t="catalog.filter.".concat(e,".info");return"error"===e&&(t="catalog.filter.error"),o().createElement(i.u,{id:"filter"},o().createElement(s.Z,{msgId:t}))},U=o().createElement(F,{tooltip:D("error"),glyph:"exclamation-mark",className:"text-danger"}),z=o().createElement(i.Qb,{style:{fontSize:12}},o().createElement(s.Z,{msgId:"catalog.filter.dynamic.helpText"})),_=function(e){var t=e.type,r=e.code,n=e.setCode,a=e.error,l="".concat(t,"Filter");return o().createElement(i.cw,null,o().createElement("div",{className:"label-pre-textarea"},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.filter.".concat(t,".label")})),o().createElement(F,{tooltip:D(t)}),a[t]&&U),o().createElement("div",{className:"textarea-code"},o().createElement(j.Z,{value:r[l],options:M,onBeforeChange:function(e,t,o){n(N(N({},r),{},R({},l,o)))}}),"dynamic"===t&&z))};const G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChangeServiceProperty,r=void 0===t?function(){}:t,a=e.filter,i=void 0===a?{}:a,l=i.staticFilter,c=i.dynamicFilter,s=L((0,n.useState)({}),2),u=s[0],p=s[1],d=L((0,n.useState)({staticFilter:l,dynamicFilter:c}),2),m=d[0],f=d[1],y={code:m,setCode:f,error:u},v=function(e){var t,r,n=(0,C._b)({filterXml:e,startPosition:1,maxRecords:4,sortBy:""});return!(null!==(t=(new DOMParser).parseFromString(n,"application/xml"))&&void 0!==t&&null!==(r=t.getElementsByTagName("parsererror"))&&void 0!==r&&r.length)};return(0,n.useEffect)((function(){var e=v(m.staticFilter);e&&!g()(m.staticFilter,l)&&r("filter.staticFilter",m.staticFilter),p(N(N({},u),{},{static:!e}))}),[m.staticFilter]),(0,n.useEffect)((function(){var e=v(m.dynamicFilter);e&&!g()(m.dynamicFilter,c)&&r("filter.dynamicFilter",m.dynamicFilter),p(N(N({},u),{},{dynamic:!e}))}),[m.dynamicFilter]),o().createElement("div",{className:"catalog-csw-filters",style:{position:"relative",zIndex:0}},o().createElement(_,I({type:"static"},y)),o().createElement(_,I({type:"dynamic"},y)))};var Q=r(23279),$=r.n(Q),X=r(884238),V=r.n(X),J=r(435161),W=r.n(J),H=r(957557),q=r.n(H),K=r(640554),Y=r.n(K),ee=r(815135);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){return(t=function(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const le=function(e){var t=e.onChangeServiceProperty,r=void 0===t?function(){}:t,a=e.service,l=(0,ee.Z)(i.zx),c=ae((0,n.useState)(V()(a.domainAliases)?a.domainAliases:{0:""}),2),u=c[0],p=c[1],m=ae((0,n.useState)(1),2),f=m[0],y=m[1],g=(0,n.useCallback)($()((function(e){r("domainAliases",e)}),300),[]);(0,n.useEffect)((function(){g(u)}),[u]);var v=function(e){return function(t){var r=t.target;return p((function(t){return ne(ne({},t),{},oe({},e,r.value))}))}},S=function(e){return function(){return p((function(t){return ne({},q()(t,[e]))}))}},A=W()(u,(function(e,t){return o().createElement("div",{className:"form-group alias-item"},o().createElement(i.NI,{id:"alias-".concat(t),key:"alias-".concat(t),type:"text",value:e,onChange:v(t)}),0!==Y()(t)&&o().createElement(l,{tooltip:o().createElement(s.Z,{msgId:"catalog.domainAliases.removeAliasTooltip"}),tooltipid:"add-alias-button",tooltipPosition:"left",className:"remove-alias",onClick:S(t)},o().createElement(i.gG,{glyph:"minus"})))}));return o().createElement(i.cw,{key:"domain-aliases",className:"mapstore-catalog-domain-aliases"},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.domainAliases.title"}))," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"catalog.domainAliases.helpTooltip"})}),A,o().createElement(l,{className:"add-alias",tooltip:o().createElement(s.Z,{msgId:"catalog.domainAliases.addAliasTooltip"}),tooltipid:"add-alias-button",tooltipPosition:"right",onClick:function(){y((function(e){return e+1})),p((function(e){return ne(ne({},e),{},oe({},f,""))}))}},o().createElement(i.gG,{glyph:"plus"})))};var ce=r(212610),se=r(638445),ue=r(737275);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}var de=["showFormatError","service","formatOptions","infoFormatOptions","onChangeServiceFormat","onChangeServiceProperty","currentWMSCatalogLayerSize","selectedService","onFormatOptionsFetch","advancedRasterSettingsStyles","tileSizeOptions","isLocalizedLayerStylesEnabled","onChangeMetadataTemplate","onToggleTemplate"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},me.apply(null,arguments)}function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return(t=function(e){var t=function(e){if("object"!=pe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve=(0,ce.Z)(i.zx),Se=(0,O.Z)("noResultsText")(h.ZP),Ae=function(e){return e.map((function(e){return{label:"".concat(e,"x").concat(e),value:e}}))};const be=function(e){var t,r,a,l,c,u,f,y,g,v,S,A,b,h=e.showFormatError,E=e.service,O=e.formatOptions,j=void 0===O?[]:O,C=e.infoFormatOptions,x=void 0===C?[]:C,I=e.onChangeServiceFormat,L=void 0===I?function(){}:I,Z=e.onChangeServiceProperty,B=void 0===Z?function(){}:Z,N=(e.currentWMSCatalogLayerSize,e.selectedService,e.onFormatOptionsFetch),R=void 0===N?function(){}:N,M=e.advancedRasterSettingsStyles,F=void 0===M?{}:M,D=e.tileSizeOptions,U=void 0===D?[256,512]:D,z=e.isLocalizedLayerStylesEnabled,_=e.onChangeMetadataTemplate,Q=void 0===_?function(){}:_,$=e.onToggleTemplate,X=void 0===$?function(){}:$,V=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,de);(0,n.useEffect)((function(){E.isNew&&B("autoSetVisibilityLimits",V.autoSetVisibilityLimits)}),[V.autoSetVisibilityLimits]);var J=(0,ue.Qo)("experimentalInteractiveLegend",!1),W=Ae(U),H=Object.keys(P.z$).map((function(e){return{label:o().createElement(s.Z,{msgId:"layerProperties.serverTypeOption.".concat(w()(e))}),value:P.z$[e]}})),q=!(["csw"].includes(E.type)&&(null===(t=E.layerOptions)||void 0===t?void 0:t.serverType)===P.z$.NO_VENDOR);return o().createElement(m,me({},V,{onChangeServiceProperty:B,service:E}),!(!z||p()(E.type))&&"wms"===E.type&&o().createElement(i.cw,{controlId:"localized-styles",key:"localized-styles"},o().createElement(i.XZ,{"data-qa":"service-lacalized-layer-styles-option",onChange:function(e){return B("localizedLayerStyles",e.target.checked)},checked:!p()(E.localizedLayerStyles)&&E.localizedLayerStyles},o().createElement(s.Z,{msgId:"catalog.enableLocalizedLayerStyles.label"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"catalog.enableLocalizedLayerStyles.tooltip"})}))),o().createElement(i.cw,{controlId:"autoSetVisibilityLimits",key:"autoSetVisibilityLimits"},o().createElement(i.XZ,{onChange:function(e){return B("autoSetVisibilityLimits",e.target.checked)},checked:!p()(E.autoSetVisibilityLimits)&&E.autoSetVisibilityLimits},o().createElement(s.Z,{msgId:"catalog.autoSetVisibilityLimits.label"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"catalog.autoSetVisibilityLimits.tooltip"})}))),!p()(E.type)&&"wms"===E.type&&o().createElement(i.cw,{controlId:"singleTile",key:"singleTile"},o().createElement(i.XZ,{onChange:function(e){return B("layerOptions",ye(ye({},E.layerOptions),{},{singleTile:e.target.checked}))},checked:!p()(null==E||null===(r=E.layerOptions)||void 0===r?void 0:r.singleTile)&&E.layerOptions.singleTile},o().createElement(s.Z,{msgId:"layerProperties.singleTile"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"catalog.singleTile.tooltip"})}))),!p()(E.type)&&"wms"===E.type&&o().createElement(i.cw,{controlId:"allowUnsecureLayers",key:"allowUnsecureLayers"},o().createElement(i.XZ,{onChange:function(e){return B("allowUnsecureLayers",e.target.checked)},checked:!p()(E.allowUnsecureLayers)&&E.allowUnsecureLayers},o().createElement(s.Z,{msgId:"catalog.allowUnsecureLayers.label"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"catalog.allowUnsecureLayers.tooltip"})}))),!p()(E.type)&&"csw"===E.type&&!E.excludeShowTemplate&&o().createElement(i.cw,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},o().createElement(i.XZ,{onChange:function(){return X()},checked:E&&E.showTemplate},o().createElement(s.Z,{msgId:"catalog.showTemplate"})),o().createElement("br",null),E&&E.showTemplate&&o().createElement("div",null,o().createElement("span",null,o().createElement("p",null,o().createElement(s.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),"  "),o().createElement("pre",null,o().createElement(s.Z,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),o().createElement("div",null,E&&E.showTemplate&&o().createElement(T.Z,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:E.metadataTemplate||"",onChange:function(e){Q(e&&"<p><br></p>"!==e?e:"")}}))),o().createElement(i.cw,{style:F,className:"form-group-flex"},o().createElement(i.J$,{className:"strong"},o().createElement(s.Z,{msgId:"layerProperties.serverType"})),o().createElement(i.BZ,null,o().createElement(Se,{value:null===(a=E.layerOptions)||void 0===a?void 0:a.serverType,options:H,onChange:function(e){(null==e?void 0:e.value)===P.z$.NO_VENDOR&&B("layerOptions",ye(ye({},E.layerOptions),{},{enableInteractiveLegend:void 0})),B("layerOptions",ye(ye({},E.layerOptions),{},{serverType:null==e?void 0:e.value}))}}))),J&&![P.z$.NO_VENDOR].includes(null===(l=E.layerOptions)||void 0===l?void 0:l.serverType)&&["wms","csw"].includes(E.type)&&o().createElement(i.cw,{controlId:"enableInteractiveLegend",key:"enableInteractiveLegend"},o().createElement(i.XZ,{"data-qa":"display-interactive-legend-option",onChange:function(e){return B("layerOptions",ye(ye({},E.layerOptions),{},{enableInteractiveLegend:e.target.checked}))},checked:!p()(null===(c=E.layerOptions)||void 0===c?void 0:c.enableInteractiveLegend)&&(null===(u=E.layerOptions)||void 0===u?void 0:u.enableInteractiveLegend)},o().createElement(s.Z,{msgId:"layerProperties.enableInteractiveLegendInfo.label"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"layerProperties.enableInteractiveLegendInfo.info"})}))),![P.z$.NO_VENDOR].includes(null===(f=E.layerOptions)||void 0===f?void 0:f.serverType)&&"wms"===E.type&&o().createElement(i.cw,{controlId:"useCacheOption",key:"useCacheOption"},o().createElement(i.XZ,{"data-qa":"display-interactive-legend-option",onChange:function(e){return B("layerOptions",ye(ye({},E.layerOptions),{},{remoteTileGrids:e.target.checked}))},checked:!p()(null===(y=E.layerOptions)||void 0===y?void 0:y.remoteTileGrids)&&(null===(g=E.layerOptions)||void 0===g?void 0:g.remoteTileGrids)},o().createElement(s.Z,{msgId:"layerProperties.useCacheOptionInfo.label"})," ",o().createElement(d.Z,{text:o().createElement(s.Z,{msgId:"layerProperties.useCacheOptionInfo.info"})}))),o().createElement("hr",{style:{margin:"8px 0"}}),o().createElement(i.cw,{style:F,className:"form-group-flex"},o().createElement(i.J$,{className:"strong"},o().createElement(s.Z,{msgId:"layerProperties.format.title"})),o().createElement("div",{className:"format-toolbar"},h?o().createElement(d.Z,{bsStyle:"danger",placement:"top",showOnRender:!0,title:o().createElement(s.Z,{msgId:"errorTitleDefault"}),text:o().createElement(s.Z,{msgId:"layerProperties.formatError"})}):null,o().createElement(ve,{disabled:V.formatsLoading||!q,tooltipId:"catalog.format.refresh",className:"square-button-md no-border",onClick:function(){return R(E.url,!0)},key:"format-refresh"},o().createElement(i.gG,{glyph:"refresh"})))),o().createElement(i.cw,{style:F,className:"form-group-flex"},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"layerProperties.format.tile"})),o().createElement(i.BZ,null,o().createElement(Se,{disabled:!q,isLoading:V.formatsLoading,onOpen:function(){return R(E.url)},value:E&&E.format,clearable:!0,noResultsText:V.formatsLoading?"catalog.format.loading":"catalog.format.noOption",options:V.formatsLoading?[]:j.map((function(e){return null!=e&&e.value?e:{value:e,label:e}})),onChange:function(e){return L(e&&e.value)}}))),o().createElement(i.cw,{style:F,className:"form-group-flex"},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"layerProperties.format.information"})),o().createElement(i.BZ,null,o().createElement(Se,{disabled:!q,isLoading:V.formatsLoading,onOpen:function(){return R(E.url)},value:E&&E.infoFormat,clearable:!0,options:V.formatsLoading?[]:x.map((function(e){return{value:e,label:e}})),onChange:function(e){return B("infoFormat",e&&e.value)}}))),o().createElement("hr",{style:{margin:"8px 0"}}),o().createElement(i.cw,{style:F,className:"form-group-flex"},o().createElement(i.J$,{className:"strong"},o().createElement(s.Z,{msgId:"layerProperties.wmsLayerTileSize"})),o().createElement(i.BZ,null,o().createElement(Se,{value:Ae([(null===(v=E.layerOptions)||void 0===v?void 0:v.tileSize)||256])[0],options:W,onChange:function(e){return B("layerOptions",ye(ye({},E.layerOptions),{},{tileSize:e&&e.value}))}}))),!p()(E.type)&&"csw"===E.type&&o().createElement(o().Fragment,null,o().createElement("hr",{style:{margin:"8px 0"}}),o().createElement(i.cw,{className:"form-group-flex sort-by"},o().createElement(i.J$,{className:"strong",style:{display:"flex",alignItems:"center"}},o().createElement(s.Z,{msgId:"catalog.sortBy.label"}),o().createElement(k.Z,{placement:"bottom",overlay:o().createElement(i.u,{id:"sortby"},o().createElement(s.Z,{msgId:"catalog.sortBy.tooltip"}))},o().createElement(i.gG,{style:{marginLeft:4},glyph:"info-sign"}))),o().createElement(i.BZ,{style:{display:"flex"}},o().createElement(se.Z,{type:"text",placeholder:"catalog.sortBy.placeholder",style:{textOverflow:"ellipsis",flex:1.5},value:null==E||null===(S=E.sortBy)||void 0===S?void 0:S.name,onChange:function(e){return B("sortBy",ye(ye({},null==E?void 0:E.sortBy),{},{name:e}))}}),o().createElement(Se,{clearable:!1,wrapperStyle:{flex:1},value:null!==(A=null==E||null===(b=E.sortBy)||void 0===b?void 0:b.order)&&void 0!==A?A:"ASC",options:["ASC","DESC"].map((function(e){return{value:e,label:e}})),onChange:function(e){return B("sortBy",ye(ye({},null==E?void 0:E.sortBy),{},{order:e&&e.value}))}}))),o().createElement(G,{filter:null==E?void 0:E.filter,onChangeServiceProperty:B})),!p()(E.type)&&"wms"===E.type&&o().createElement(le,{service:E,onChangeServiceProperty:B}))};var he=["onToggleAdvancedSettings"];const Ee=function(e){var t=e.onToggleAdvancedSettings,r=void 0===t?function(){}:t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,he),a=n.service,i=void 0===a?{}:a,l=function(e){switch(e){case"tms":return b;case"wmts":case"wfs":default:return m;case"wms":case"csw":return be}}(i.type);return o().createElement(f.Z,{useToolbar:!0,title:o().createElement(s.Z,{msgId:"catalog.advancedSettings"}),expanded:!p()(i.showAdvancedSettings)&&i.showAdvancedSettings,onSwitch:r},o().createElement(l,n))};var we=r(227361),Oe=r.n(we),Te=r(313311),Pe=r.n(Te),je=r(441609),Ce=r.n(je),ke=r(472500),xe=r.n(ke);function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Le=function(e){for(var t=0,r=Object.entries({wfs:"e.g. https://mydomain.com/geoserver/wfs",wmts:"e.g. https://mydomain.com/geoserver/gwc/service/wmts",wms:"e.g. https://mydomain.com/geoserver/wms",csw:"e.g. https://mydomain.com/geoserver/csw",tms:"e.g. https://mydomain.com/geoserver/gwc/service/tms/1.0.0","3dtiles":"e.g. https://mydomain.com/tileset.json",cog:"e.g. https://mydomain.com/cog.tif",model:"e.g. https://mydomain.com/filename.ifc",arcgis:"e.g. https://mydomain.com/arcgis/rest/services"});t<r.length;t++){var n=(i=r[t],l=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(i,l)||function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ie(e,t):void 0}}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];if(o===e.type)return a}var i,l;return!0},Ze=r(836882);function Be(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Re=(0,O.Z)("placeholder")(i.NI),Me="custom",Fe="tms",De=function(e){var t=e.service,r=void 0===t?{}:t,n=e.onChangeUrl,a=void 0===n?function(){}:n;return o().createElement(i.cw,{controlId:"URL"},o().createElement(i.JX,{xs:12},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.url"})),o().createElement(Re,{type:"text",style:{textOverflow:"ellipsis"},placeholder:Le(r),value:r&&r.url,onChange:function(e){return a(e.target.value)}})))},Ue=function(e){return e===Fe?"TMS 1.0.0":e},ze=function(e){var t,r,n,a,l=e.serviceTypes,c=void 0===l?[]:l,u=e.onChangeServiceProperty,p=e.service,m=void 0===p?{}:p,f=e.onChangeUrl,y=void 0===f?function(){}:f,g=e.onChangeTitle,v=void 0===g?function(){}:g,A=(0,ue.u8)("allowedProviders")||Oe()(Pe()(c||[],{name:"tms"}),"allowedProviders")||[],b=Object.keys(Ze.Z).filter((function(e){return"ALL"===A||A.indexOf(e)>=0})),h=m===Fe?m:null==m||null===(t=m.provider)||void 0===t||null===(r=t.split)||void 0===r||null===(n=r.call(t,"."))||void 0===n?void 0:n[0],E=!h||h===Me,w=h===Fe,O=w||E;return o().createElement(i.cw,null,o().createElement(i.JX,{xs:12,sm:E?3:12,md:O?3:12},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.tms.provider"})),o().createElement(Re,{onChange:function(e){var t=e.target.value;u("provider","".concat(t)),t!==Me&&t!==Fe?v(t):E||w||v("")},value:h,componentClass:"select"},[Me,Fe].concat((a=b,function(e){if(Array.isArray(e))return Ne(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||Be(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e){return{name:e,label:Ue(e)}})).map((function(e){return o().createElement("option",{value:e.name,key:e.name},e.label)})))),o().createElement(i.JX,{xs:12,sm:9,md:9},E?o().createElement(o().Fragment,null,o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.tms.urlTemplate"}),"  ",o().createElement(d.Z,{text:o().createElement(S.Z,{msgId:"catalog.tms.urlTemplateHint"})})),o().createElement(Re,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"e.g. https://{s}.myUrl.com/{variant}/{z}/{x}/{y}",value:m&&m.url,onChange:function(e){return y(e.target.value)}})):w?o().createElement(o().Fragment,null,o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.url"})),o().createElement(Re,{type:"text",style:{textOverflow:"ellipsis"},placeholder:Le(m),value:m&&m.url,onChange:function(e){return y(e.target.value)}})):null))},_e=function(e){var t,r=e.service,n=void 0===r?{}:r,a=e.onChangeServiceProperty,l=void 0===a?function(){}:a;return o().createElement(i.cw,{controlId:"URL"},o().createElement(i.JX,{xs:12},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.urls"}),"  ",o().createElement(d.Z,{text:o().createElement(S.Z,{msgId:"catalog.cog.urlTemplateHint"})})),o().createElement(Re,{type:"text",style:{textOverflow:"ellipsis"},placeholder:Le(n),value:n&&n.records&&(null===(t=n.records.map((function(e){return null==e?void 0:e.url})))||void 0===t?void 0:t.join(",")),onChange:function(e){var t,r,n,o=e.target.value||"";o=null===(t=o)||void 0===t||null===(r=t.split(","))||void 0===r||null===(n=r.map((function(e){return null==e?void 0:e.trim()})))||void 0===n?void 0:n.map((function(e,t){var r,n;return{url:e,title:(null==e||null===(r=e.split("/"))||void 0===r||null===(n=r.pop())||void 0===n?void 0:n.replace(".tif",""))||"COG_".concat(t)}})),l("records",o)}})))};const Ge=function(e){var t,r,a=e.service,l=void 0===a?{}:a,c=e.serviceTypes,u=e.onChangeTitle,p=e.onChangeUrl,d=e.onChangeServiceProperty,m=e.onChangeType,f=e.setValid,y=void 0===f?function(){}:f,g=(t=(0,n.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||Be(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=g[0],S=g[1];function A(e){if(p(e),e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;try{var n=xe().parse(null!=t?t:window.location.href).protocol,o=xe().parse(e).protocol;return"https:"===n&&o?n===o||r?{valid:!0}:{valid:!1,errorMsgId:"catalog.invalidUrlHttpProtocol"}:{valid:!0}}catch(e){return{valid:!1,errorMsgId:"catalog.invalidArrayUsageForUrl"}}}(e,null,null==l?void 0:l.allowUnsecureLayers),r=t.valid,n=t.errorMsgId;S(r?null:n),y(r)}}(0,n.useEffect)((function(){!Ce()(l.url)&&A(l.url)}),[null==l?void 0:l.allowUnsecureLayers]);var b="tms"===l.type?ze:"cog"===l.type?_e:De;return o().createElement(i.l0,{horizontal:!0},o().createElement(i.cw,{controlId:"title",key:"type-title-row"},o().createElement(i.JX,{key:"type",xs:12,sm:3,md:3},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.type"})),o().createElement(Re,{onChange:function(e){return m(e.target.value)},value:l&&l.type,componentClass:"select"},c.map((function(e){return o().createElement("option",{value:e.name,key:e.name},e.label)})))),o().createElement(i.JX,{key:"title",xs:12,sm:9,md:9},o().createElement(i.J$,null,o().createElement(s.Z,{msgId:"catalog.serviceTitle"})),o().createElement(Re,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.serviceTitlePlaceholder",value:l&&l.title,onChange:function(e){return u(e.target.value)}}))),o().createElement(b,{key:"url-row",serviceTypes:c,service:l,onChangeUrl:A,onChangeTitle:u,onChangeServiceProperty:d}),v?o().createElement(i.bZ,{bsStyle:"danger"},o().createElement(s.Z,{msgId:v})):null)};function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qe.apply(null,arguments)}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Ve=(Je=function(e){var t=e.service,r=void 0===t?{title:"",type:"wms",url:"",format:"image/png"}:t,u=e.serviceTypes,p=void 0===u?[{name:"csw",label:"CSW"}]:u,d=e.onChangeTitle,m=void 0===d?function(){}:d,f=e.onChangeUrl,y=void 0===f?function(){}:f,g=e.onChangeType,v=void 0===g?function(){}:g,S=e.id,A=e.urlTooltip,b=e.formatOptions,h=e.buttonStyle,E=e.saving,w=e.showFormatError,O=e.onChangeServiceFormat,T=void 0===O?function(){}:O,P=e.onChangeMetadataTemplate,j=void 0===P?function(){}:P,C=e.onToggleAdvancedSettings,k=void 0===C?function(){}:C,x=e.onChangeServiceProperty,I=void 0===x?function(){}:x,L=e.onToggleTemplate,Z=void 0===L?function(){}:L,B=e.onToggleThumbnail,N=void 0===B?function(){}:B,R=e.onDeleteService,M=void 0===R?function(){}:R,F=e.onCancel,D=void 0===F?function(){}:F,U=e.onSaveService,z=void 0===U?function(){}:U,_=e.onFormatOptionsFetch,G=void 0===_?function(){}:_,Q=e.selectedService,$=e.isLocalizedLayerStylesEnabled,X=e.tileSizeOptions,V=void 0===X?[256,512]:X,J=e.formatsLoading,W=e.layerOptions,H=void 0===W?{}:W,q=e.infoFormatOptions,K=e.services,Y=e.autoSetVisibilityLimits,ee=void 0!==Y&&Y,te=e.disabled,re=$e((0,n.useState)(!0),2),ne=re[0],oe=re[1];return o().createElement(c.Z,{bodyClassName:"ms2-border-layout-body catalog",header:o().createElement(Ge,{setValid:oe,service:r,serviceTypes:p,onChangeTitle:m,onChangeUrl:y,onChangeType:v,onChangeServiceProperty:I,urlTooltip:A})},o().createElement(i.l0,null,o().createElement(Ee,{setValid:oe,id:S,service:r,formatOptions:b,buttonStyle:h,saving:E,onChangeServiceFormat:T,onChangeMetadataTemplate:j,onToggleAdvancedSettings:k,onChangeServiceProperty:I,onToggleTemplate:Z,onToggleThumbnail:N,isLocalizedLayerStylesEnabled:$,tileSizeOptions:V,currentWMSCatalogLayerSize:H.tileSize?H.tileSize:256,selectedService:Q,onFormatOptionsFetch:G,showFormatError:w,formatsLoading:J,infoFormatOptions:q,autoSetVisibilityLimits:ee}),o().createElement(i.cw,{controlId:"buttons",key:"buttons"},o().createElement(i.JX,{xs:12},o().createElement(l.Z,{style:h,disabled:E||!ne,onClick:z,key:"catalog_add_service_button"},E?o().createElement(a.Z,{size:12,style:{display:"inline-block"}}):null,o().createElement(s.Z,{msgId:"save"})),r&&!r.isNew?o().createElement(l.Z,{style:h,disabled:E,onClick:function(){return M(r,K)},key:"catalog_delete_service_button"},o().createElement(s.Z,{msgId:"catalog.delete"})):null,o().createElement(l.Z,{style:h,disabled:te,onClick:D,key:"catalog_back_view_button"},o().createElement(s.Z,{msgId:"cancel"}))))))},function(e){var t=$e((0,n.useState)(null),2),r=t[0],a=t[1];return o().createElement(Je,Qe({},e,{onCancel:function(){return r&&e.saving?null==r?void 0:r.abort():e.onChangeCatalogMode("view")},onSaveService:function(){var t="cog"===e.format?new AbortController:null;return a(t),e.onAddService({save:!0,controller:t})},disabled:!r&&e.saving}))});var Je},677306:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(124852),o=r.n(n),a=r(805346),i=r(298854);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const s=function(e){var t=e.onValid,r=e.onError,c=e.editorRef,s=e.json,u=void 0===s?{}:s,p=e.editorWillUnmount,d=void 0===p?function(){}:p,m=l((0,n.useState)(JSON.stringify(u,!0,2)),2),f=m[0],y=m[1],g=l((0,n.useState)(),2),v=g[0],S=g[1];return(0,n.useEffect)((function(){try{var e=JSON.parse(f);S(),t(e)}catch(e){S(e),r(e)}}),[f]),o().createElement("div",{className:"code-editor"},o().createElement(i.Z,{ref:c,editorWillUnmount:function(){return d(f)},value:f,onBeforeChange:function(e,t,r){y(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),v&&o().createElement("div",{className:"error-area"},o().createElement("div",{className:"error-area-header"},o().createElement(a.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),o().createElement("div",{className:"error-area-body"},o().createElement(a.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:v.message}},(function(e){return o().createElement("pre",{className:"error-msg"},e)})))))}},298854:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(124852);const o=(0,r(218291).Z)()((0,n.lazy)((function(){return Promise.all([r.e(39935),r.e(89782)]).then(r.bind(r,789782))})))},835420:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(124852);const o=(0,r(218291).Z)()((0,n.lazy)((function(){return Promise.all([r.e(72555),r.e(71167),r.e(99739)]).then(r.bind(r,399739))})))},842734:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_ALLOWED_PROVIDERS:()=>jt,default:()=>Zt});var n=r(893379),o=r.n(n),a=r(452702);o()(a.Z,{insert:"head",singleton:!1}),a.Z.locals;var i=r(727418),l=r.n(i),c=r(45697),s=r.n(c),u=r(124852),p=r.n(u),d=r(271418),m=r(171703),f=r(867076),y=r(22222),g=r(53001),v=r(931273),S=r(782904),A=r(580416),b=r(458183),h=r(414293),E=r.n(h),w=r(624847),O=r(743129),T=r(965539),P=r(86638),j=r(805346),C=r(513218),k=r.n(C),x=r(91175),I=r.n(x),L=r(701469),Z=r.n(L),B=r(92742),N=r.n(B),R=r(441609),M=r.n(R),F=r(815135),D=r(576712),U=r(307887),z=r(121222),_=r(59286),G=r(950966),Q=r(774855),$=r.n(Q),X=r(233044);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function K(e,t,r){return(t=Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}var ee=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return K(e=function(e,t,r){return t=H(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,W()?Reflect.construct(t,r||[],H(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{showCopiedToolTip:!1}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this;if(!this.props.url)return null;var t=this.props.addAuthentication?(0,X.addAuthenticationToUrl)(this.props.url):this.props.url,r=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",n=p().createElement(d.u,{id:"tooltip"},p().createElement(j.Z,{msgId:r})),o=p().createElement($(),{text:t,onCopy:this.props.onCopy},p().createElement(G.Z,{placement:"right",overlay:n,onExited:function(){return e.setState({showCopiedToolTip:!1})}},p().createElement(w.Z,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:function(){return e.setState({showCopiedToolTip:!0})}},p().createElement(d.gG,{glyph:"paperclip"})," ",this.props.labelId&&p().createElement(j.Z,{msgId:this.props.labelId}))));return p().createElement("div",{className:"link-sharing"},p().createElement(d.cw,{bsSize:this.props.bsSize},p().createElement(d.NI,{className:"link-input",type:"text",value:t,onChange:function(){}}),o))}}],n&&J(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(p().Component);K(ee,"propTypes",{url:s().string.isRequired,labelId:s().string,onCopy:s().func,bsSize:s().string,addAuthentication:s().bool}),K(ee,"defaultProps",{onCopy:function(){},bsSize:"small",addAuthentication:!1});const te=ee;var re=["links","buttonSize"];function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oe.apply(null,arguments)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,se(n.key),n)}}function ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ie=function(){return!!e})()}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function se(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}var ue,pe,de,me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=le(t),function(e,t){if(t&&("object"==ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ie()?Reflect.construct(t,r||[],le(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(t,e),r=t,n=[{key:"render",value:function(){if(!this.props.links||0===this.props.links.length)return null;var e=this.props,t=e.links,r=e.buttonSize,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,re),o=t.map((function(e,t){return p().createElement(te,oe({key:t,url:e.url,labelId:e.labelId},n))})),a=p().createElement(d.J2,{className:"links-popover",id:"links-popover"},p().createElement("h5",null,p().createElement(j.Z,{msgId:"catalog.share"})),o);return p().createElement(G.Z,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:a},p().createElement(w.Z,{bsSize:r,className:"square-button-md",bsStyle:"primary"},p().createElement(d.gG,{glyph:"link"})))}}],n&&ae(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(p().Component);ue=me,pe="propTypes",de={links:s().array,onCopy:s().func,messages:s().object,locale:s().string,buttonSize:s().string,popoverContainer:s().object,addAuthentication:s().bool},(pe=se(pe))in ue?Object.defineProperty(ue,pe,{value:de,enumerable:!0,configurable:!0,writable:!0}):ue[pe]=de;const fe=me;var ye=r(876424),ge=r(80717),ve=r(203932),Se=r.n(ve),Ae=r(507872),be=r(728753),he=r.n(be),Ee=r(552259),we=r(532425);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Te(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){Ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Be(n.key),n)}}function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xe=function(){return!!e})()}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ie(e)}function Le(e,t){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Le(e,t)}function Ze(e,t,r){return(t=Be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(e){var t=function(e){if("object"!=Oe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:t+""}var Ne=(0,F.Z)(d.aW),Re=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ze(e=function(e,t,r){return t=Ie(t),function(e,t){if(t&&("object"==Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xe()?Reflect.construct(t,r||[],Ie(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{visibleExpand:!1,loading:!1}),Ze(e,"getTitle",(function(t){return k()(t)?t[e.props.currentLocale]||t.default:t||""})),Ze(e,"renderThumb",(function(t,r){var n=t||Se();return p().createElement(d.Ee,{className:"preview",src:n,alt:r&&e.getTitle(r.title)})})),Ze(e,"isSRSNotAllowed",(function(t){var r;if("cog"!==t.serviceType){var n,o=t.ogcReferences||{SRS:[]},a=(null==o||null===(n=o.SRS)||void 0===n?void 0:n.length)>0&&(0,D.n0)(o.SRS);return a&&!(0,U.isAllowedSRS)(e.props.crs,a)}var i=null==t||null===(r=t.sourceMetadata)||void 0===r?void 0:r.crs;return i&&!(0,U.isSRSAllowed)(i)})),Ze(e,"onAddToMap",(function(t){var r,n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.serviceType;return e.isSRSNotAllowed(t)?e.props.onError("catalog.srs_not_allowed"):(e.setState({loading:!0}),b.Z[a].getLayerFromRecord(t,{fetchCapabilities:!!t.fetchCapabilities,service:Ce(Ce({},e.props.service),{},{format:null!==(r=null===(n=e.props)||void 0===n||null===(o=n.service)||void 0===o?void 0:o.format)&&void 0!==r?r:e.props.defaultFormat}),layerBaseConfig:e.props.layerBaseConfig,removeParams:e.props.authkeyParamNames,catalogURL:"csw"===e.props.catalogType&&e.props.catalogURL?e.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+t.identifier:null,map:{projection:e.props.crs,resolutions:(0,Ee.MR)()}},!0).then((function(r){r&&e.addLayer(r,t)})).finally((function(){e.setState({loading:!1})})))})),Ze(e,"getButtons",(function(t){var r=e.props.showGetCapLinks?(0,D.F8)(t):[],n=!M()(t.additionalOGCServices);return[].concat(Te(n?[{Element:function(){var r;return p().createElement(Ne,{id:"add-layer-button",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",title:e.state.loading?p().createElement(we.Z,{className:"ms-loader ms-loader-primary"}):p().createElement(d.gG,{glyph:"plus"}),onClick:function(){return e.onAddToMap(t)},pullRight:"left",disabled:e.state.loading},p().createElement(d.sN,{onClick:function(){return e.onAddToMap(t)}},p().createElement(j.Z,{msgId:"catalog.additionalOGCServices.wms"})),Object.keys(null!==(r=t.additionalOGCServices)&&void 0!==r?r:{}).map((function(r){return p().createElement(d.sN,{id:"ogc-".concat(r),onClick:function(){return e.onAddToMap(t.additionalOGCServices[r],r)}},p().createElement(j.Z,{msgId:"catalog.additionalOGCServices.".concat(r)}))})))}}]:[{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",disabled:e.state.loading,loading:e.state.loading,glyph:"plus",onClick:function(){return e.onAddToMap(t)}}]),Te(r.length>0?[{Element:function(){return p().createElement(fe,{key:"sharing-links",popoverContainer:e,links:r,onCopy:e.props.onCopy,buttonSize:e.props.buttonSize,addAuthentication:e.props.addAuthentication})}}]:[]))})),Ze(e,"renderDescription",(function(t){if(!t)return null;var r=(0,P.S$)(e.context.messages,"catalog.notAvailable");return e.state.fullText&&t.metadataTemplate?p().createElement("div",{className:"catalog-metadata ql-editor"},p().createElement(z.Z,{html:(0,_.ox)(t.metadataTemplate,t.metadata,(function(e){return"".concat(N()(e.substring(2,e.length-1))," ").concat(r)}))})):t.metadataTemplate?"":Z()(t.description)?t.description.join(", "):t.description})),Ze(e,"isLinkCopied",(function(t){return e.state[t]})),Ze(e,"setLinkCopiedStatus",(function(t,r){e.setState(Ze({},t,r))})),Ze(e,"addLayer",(function(t){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).background;if("backgroundSelector"===e.props.source)r?(e.props.onLayerAdd(Ce(Ce({},t),{},{group:"background"}),{source:e.props.source}),e.props.onAddBackground(t.id)):e.props.onAddBackgroundProperties({editing:!1,layer:t},!0);else{var n=e.props.zoomToLayer;e.props.onLayerAdd(t,{zoomToLayer:n})}})),Ze(e,"displayExpand",(function(){return(e.descriptionRuler?e.descriptionRuler.clientWidth:0)>(e.sideCardDesc?e.sideCardDesc.clientWidth:0)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(t,e),function(e,t){return t&&ke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){var e=(0,P.S$)(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&(0,_.ox)(t.metadataTemplate,t.metadata,(function(t){return"".concat(N()(t.substring(2,t.length-1))," ").concat(e)}))))})}},{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.props.record,r=t&&t.background,n=r&&I()((this.props.layers||[]).filter((function(e){return e.id===r.name||e.type===r.type&&e.source===r.source&&e.name===r.name})));return t?p().createElement("div",null,p().createElement(ye.Z,{style:{transform:"none",opacity:n?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(t&&t.thumbnail||r&&(r.name||r.source?Ae.Z[r.source][r.name]:he()),t),title:t&&this.getTitle(t.title),description:p().createElement("span",null,p().createElement("div",{className:!0,ref:function(t){e.sideCardDesc=t}},this.renderDescription(t))),caption:p().createElement("div",null,!this.props.hideIdentifier&&p().createElement("div",{className:"identifier"},t&&t.identifier),p().createElement("div",null,!t.isValid&&p().createElement("small",{className:"text-danger"},p().createElement(j.Z,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&p().createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:function(t){e.descriptionRuler=t}},this.renderDescription(t))),tools:p().createElement(ge.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[{visible:!!n,Element:function(){return p().createElement(j.Z,{msgId:"catalog.backgroundAlreadyAdded"})}}].concat(Te(null!=t&&t.references&&!n?this.getButtons(t):[]),[{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:function(){return e.setState({fullText:!e.state.fullText})}}])})})):null}}])}(p().Component);Ze(Re,"propTypes",{addAuthentication:s().bool,authkeyParamNames:s().array,buttonSize:s().string,catalogURL:s().string,catalogType:s().string,crs:s().string,currentLocale:s().string,hideThumbnail:s().bool,hideExpand:s().bool,hideIdentifier:s().bool,layerBaseConfig:s().object,onCopy:s().func,onError:s().func,onLayerAdd:s().func,record:s().object,showGetCapLinks:s().bool,zoomToLayer:s().bool,onPropertiesChange:s().func,onLayerChange:s().func,layers:s().array,onAdd:s().func,source:s().string,onAddBackgroundProperties:s().func,deletedId:s().string,clearModal:s().func,service:s().service,showTemplate:s().bool,defaultFormat:s().string}),Ze(Re,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onAddBackgroundProperties:function(){},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:function(){},onError:function(){},onLayerAdd:function(){},onPropertiesChange:function(){},onLayerChange:function(){},clearModal:function(){},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:function(){},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:function(){},defaultFormat:"image/png"}),Ze(Re,"contextTypes",{messages:s().object});const Me=Re;function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},De.apply(null,arguments)}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$e(n.key),n)}}function ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ze=function(){return!!e})()}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function Qe(e,t,r){return(t=$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e){var t=function(e){if("object"!=Fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fe(t)?t:t+""}var Xe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qe(e=function(e,t,r){return t=_e(t),function(e,t){if(t&&("object"==Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ze()?Reflect.construct(t,r||[],_e(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"renderRecordItem",(function(t){var r=e.props.recordItem||Me;return p().createElement(d.JX,De({},e.props.column,{key:t.identifier}),p().createElement(r,{crs:e.props.crs,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,onAddBackground:e.props.onAddBackground,source:e.props.source,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,hideThumbnail:e.props.hideThumbnail,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onError:e.props.onError,catalogURL:e.props.catalogURL,catalogType:e.props.catalogType,service:e.props.service,showTemplate:e.props.showTemplate,record:t,authkeyParamNames:e.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,defaultFormat:e.props.defaultFormat,layerBaseConfig:e.props.layerBaseConfig}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(t,e),function(e,t){return t&&Ue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){if(this.props.records){var e=this.props.records instanceof Array?this.props.records:[this.props.records];return p().createElement(d.rj,{className:"record-grid",fluid:!0,style:this.props.style},p().createElement(d.X2,null,e.map(this.renderRecordItem)))}return null}}])}(p().Component);Qe(Xe,"propTypes",{crs:s().string,recordItem:s().element,catalogURL:s().string,catalogType:s().string,zoomToLayer:s().bool,onLayerAdd:s().func,onPropertiesChange:s().func,onError:s().func,records:s().array,authkeyParamNames:s().array,style:s().object,showGetCapLinks:s().bool,addAuthentication:s().bool,column:s().object,currentLocale:s().string,hideThumbnail:s().bool,hideIdentifier:s().bool,hideExpand:s().bool,source:s().string,onAddBackgroundProperties:s().func,modalParams:s().object,layers:s().object,clearModal:s().func,onAddBackground:s().func,showTemplate:s().bool,service:s().object,defaultFormat:s().string,layerBaseConfig:s().object}),Qe(Xe,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:function(){},onPropertiesChange:function(){},onError:function(){},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"});const Ve=Xe;function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},We.apply(null,arguments)}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nt(n.key),n)}}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function rt(e,t,r){return(t=nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){var t=function(e){if("object"!=Je(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Je(t)?t:t+""}var ot=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rt(e=function(e,t,r){return t=et(t),function(e,t){if(t&&("object"==Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ye()?Reflect.construct(t,r||[],et(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{catalogURL:null}),rt(e,"onSearchTextChange",(function(t){e.props.onChangeText(t.target.value)})),rt(e,"onKeyDown",(function(t){13===t.keyCode&&e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})})),rt(e,"getServices",(function(){return Object.keys(e.props.services).map((function(t){var r=e.props.services[t];return l()({},{label:r.titleMsgId?(0,P.S$)(e.context.messages,r.titleMsgId):r.title,value:t})}))})),rt(e,"renderResult",(function(){return e.props.result?0===e.props.result.numberOfRecordsMatched?p().createElement("div",null,p().createElement(j.Z,{msgId:"catalog.noRecordsMatched"})):e.renderRecords():e.props.loadingError?e.renderError(e.props.loadingError):null})),rt(e,"renderError",(function(e){return p().createElement(d.bZ,{bsStyle:"danger"},p().createElement(j.Z,{msgId:e||"catalog.error"}))})),rt(e,"renderLoading",(function(){return p().createElement("div",{className:"catalog-results loading"},p().createElement(we.Z,{size:176}))})),rt(e,"renderPagination",(function(){if(e.props.result&&!e.props.isNewServiceAdded){var t=e.props.result.numberOfRecordsMatched,r=e.props.result.numberOfRecordsReturned,n=e.props.searchOptions.startPosition,o=e.props.pageSize,a=Math.floor(n/o),i=Math.ceil(t/o);return p().createElement("div",{className:"catalog-pagination"},p().createElement(d.tl,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:i,maxButtons:5,activePage:a+1,onSelect:e.handlePage}),p().createElement("div",{className:"push-right"},p().createElement(j.Z,{msgId:"catalog.pageInfo",msgParams:{start:n,end:n+r-1,total:t}})))}return null})),rt(e,"renderRecords",(function(){var t="",r=!1,n=!1;if(e.props.services&&e.props.services[e.props.selectedService]){var o=e.props.services[e.props.selectedService];E()(o.metadataTemplate)||E()(o.showTemplate)||(r=o.showTemplate,t=o.metadataTemplate),E()(o.hideThumbnail)||(n=o.hideThumbnail)}var a=e.props.isNewServiceAdded?[]:e.props.records.map((function(e){return r&&t?qe(qe({},e),{},{metadataTemplate:t}):e}));return p().createElement("div",{className:"catalog-results"},p().createElement(Ve,We({},e.props.gridOptions,{crs:e.props.crs,key:"records",hideThumbnail:n,records:a,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,source:e.props.source,authkeyParamNames:e.props.authkeyParamNames,catalogURL:e.isValidServiceSelected()&&e.props.services[e.props.selectedService].url||"",service:e.props.services[e.props.selectedService],catalogType:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].type,showTemplate:e.props.services[e.props.selectedService].showTemplate,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,onError:e.props.onError,showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,recordItem:e.props.recordItem,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onAddBackground:e.props.onAddBackground,defaultFormat:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].format,layerBaseConfig:e.props.layerBaseConfig,onAdd:function(){e.search({services:e.props.services,selectedService:e.props.selectedService})}})))})),rt(e,"renderButtons",(function(){var t=[];return e.props.includeSearchButton&&t.push(p().createElement(w.Z,{bsStyle:"primary",style:e.props.buttonStyle,onClick:function(){return e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})},className:e.props.buttonClassName,key:"catalog_search_button",disabled:e.props.loading||!e.isValidServiceSelected()},p().createElement(j.Z,{msgId:"catalog.search"}))),e.props.includeResetButton&&t.push(p().createElement(w.Z,{style:e.props.buttonStyle,onClick:e.reset,key:"catalog_reset_button"},p().createElement(j.Z,{msgId:"catalog.reset"}))),t})),rt(e,"renderTextSearch",(function(){var t=p().createElement(d.NI,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:e.props.searchText,placeholder:(0,P.S$)(e.context.messages,"catalog.textSearchPlaceholder"),onChange:e.onSearchTextChange,onKeyDown:e.onKeyDown});return e.props.wrapOptions?p().createElement(d.s_,{collapsible:!0,defaultExpanded:!1,header:(0,P.S$)(e.context.messages,"catalog.options")},t):t})),rt(e,"isValidServiceSelected",(function(){return void 0!==e.props.services[e.props.selectedService]})),rt(e,"search",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.services,n=t.selectedService,o=t.start,a=void 0===o?1:o,i=t.searchText,l=void 0===i?"":i,c=(0,D.p8)(r[n]),s=r[n].type;e.props.isNewServiceAdded&&e.props.setNewServiceStatus(!1),e.props.isNewServiceAdded&&""===l||e.props.onSearch({format:s,url:c,startPosition:a,maxRecords:e.props.pageSize,text:l||"",options:{service:e.props.services[n]}})})),rt(e,"reset",(function(){e.props.onReset()})),rt(e,"handlePage",(function(t){if(t){var r=(t-1)*e.props.pageSize+1;e.search({services:e.props.services,selectedService:e.props.selectedService,start:r,searchText:e.props.searchText})}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(t,e),function(e,t){return t&&Ke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}},{key:"render",value:function(){var e,t,r=this;return p().createElement(T.Z,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:p().createElement(d.l0,null,p().createElement(d.cw,{controlId:"labelService",key:"labelService"},p().createElement(d.J$,null,p().createElement(j.Z,{msgId:"catalog.service"}))),p().createElement(d.cw,{controlId:"service",key:"service"},p().createElement(d.BZ,{style:{width:"100%"}},p().createElement(O.ZP,{clearValueText:(0,P.S$)(this.context.messages,"catalog.clearValueText"),noResultsText:(0,P.S$)(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:function(e){return r.props.onChangeSelectedService(e&&e.value?e.value:"")},placeholder:(0,P.S$)(this.context.messages,"catalog.servicePlaceholder")}),this.props.canEdit&&this.isValidServiceSelected()&&!this.props.services[this.props.selectedService].readOnly?p().createElement(d.BZ.Addon,{className:"btn",onClick:function(){return r.props.onChangeCatalogMode("edit",!1)}},p().createElement(d.gG,{glyph:"pencil"})):null,this.props.canEdit&&p().createElement(d.BZ.Addon,{className:"btn",onClick:function(){return r.props.onChangeCatalogMode("edit",!0)}},p().createElement(d.gG,{glyph:"plus"})))),"3dtiles"!==(null===(e=this.props.services)||void 0===e||null===(t=e[this.props.selectedService])||void 0===t?void 0:t.type)&&p().createElement(d.cw,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),p().createElement(d.cw,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult())}}])}(p().Component);rt(ot,"propTypes",{active:s().bool,searchText:s().string,addAuthentication:s().bool,buttonClassName:s().string,buttonStyle:s().object,currentLocale:s().string,loading:s().bool,format:s().string,crs:s().string,gridOptions:s().object,includeSearchButton:s().bool,includeResetButton:s().bool,loadingError:s().object,layerError:s().string,mode:s().string,onChangeCatalogMode:s().func,onChangeText:s().func,onChangeFormat:s().func,onChangeSelectedService:s().func,onPropertiesChange:s().func,onError:s().func,onLayerAdd:s().func,onReset:s().func,onSearch:s().func,onAddBackground:s().func,pageSize:s().number,records:s().array,authkeyParamNames:s().array,recordItem:s().element,result:s().object,searchOptions:s().object,selectedService:s().string,services:s().object,showGetCapLinks:s().bool,wrapOptions:s().bool,zoomToLayer:s().bool,hideThumbnail:s().bool,hideIdentifier:s().bool,hideExpand:s().bool,source:s().string,onAddBackgroundProperties:s().func,modalParams:s().object,layers:s().array,clearModal:s().func,layerBaseConfig:s().object,service:s().object,isNewServiceAdded:s().bool,setNewServiceStatus:s().func,canEdit:s().func}),rt(ot,"contextTypes",{messages:s().object}),rt(ot,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",onChangeCatalogMode:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeSelectedService:function(){},onPropertiesChange:function(){},onError:function(){},onLayerAdd:function(){},onReset:function(){},onSearch:function(){},changeLayerProperties:function(){},setNewServiceStatus:function(){},pageSize:4,records:[],loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857",service:{}});const at=ot;var it=r(64758),lt=r(31935),ct=r(788113),st=r(675110),ut=r(308316),pt=r(607147),dt=r(38842),mt=r(800827),ft=r(55105),yt=r(628665),gt=["onClick","selectedNodes","status","itemComponent","statusTypes","config"];function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},St.apply(null,arguments)}function At(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pt(n.key),n)}}function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bt=function(){return!!e})()}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}function Et(e,t){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Et(e,t)}function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){Tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tt(e,t,r){return(t=Pt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e){var t=function(e){if("object"!=vt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vt(t)?t:t+""}var jt=["OpenStreetMap","OpenSeaMap","Stamen"],Ct=(0,y.zB)({searchOptions:ct.bA,showFormatError:ct.Qg,result:ct.SX,loadingError:ct.hm,selectedService:ct.Cb,mode:ct.eK,services:ct.b6,servicesWithBackgrounds:ct.PG,layerError:ct.Im,active:ct.JF,dockStyle:function(e){return(0,ft.ic)(e,{height:!0,right:!0},!0)},searchText:ct.e8,group:ct.Mm,source:lt.YL,layers:st.l2,modalParams:lt.B0,authkeyParamNames:ct.kS,saving:ct.dP,openCatalogServiceList:ct.ZL,service:ct._S,format:ct.iH,selectedFormat:ct.Q7,options:ct.bA,layerOptions:ct.n7,tileSizeOptions:ct._x,currentLocale:ut.Pz,locales:ut.Ps,pageSize:ct.y,loading:ct.E2,crs:mt.uy,isLocalizedLayerStylesEnabled:dt.wk,formatsLoading:ct.BM,formatOptions:ct.am,infoFormatOptions:ct.LV,isNewServiceAdded:ct.jU,canEdit:ct.$c}),kt=(0,f.compose)((0,f.withProps)((function(e){var t=e.result,r=e.selectedFormat,n=e.options,o=e.layerOptions,a=e.services,i=e.selectedService,l=e.locales;return{records:t&&b.Z[r].getCatalogRecords(t,Ot(Ot({},n),{},{layerOptions:o,service:a[i]}),l)||[]}})),(0,f.defaultProps)({buttonStyle:{marginBottom:"10px",marginRight:"5px"},formatOptions:[],advancedRasterStyles:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}}),(0,f.branch)((function(e){return"edit"===e.mode}),(0,f.renderComponent)(it.Z)))(at),xt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=ht(t),function(e,t){if(t&&("object"==vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bt()?Reflect.construct(t,r||[],ht(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}(t,e),function(e,t){return t&&At(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.props.onInitPlugin({editingAllowedRoles:this.props.editingAllowedRoles,editingAllowedGroups:this.props.editingAllowedGroups})}},{key:"componentWillUnmount",value:function(){this.props.closeCatalog()}},{key:"render",value:function(){var e=this,t={group:this.props.group||void 0},r=p().createElement(kt,St({layerBaseConfig:t},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services}));return p().createElement(yt.Z,{containerStyle:this.props.dockStyle,containerId:"catalog-root",containerClassName:this.props.active?"catalog-active":"",open:this.props.active,size:this.props.width,position:"right",bsStyle:"primary",title:p().createElement(j.Z,{msgId:"catalog.title"}),onClose:function(){return e.props.closeCatalog()},glyph:"folder-open",style:this.props.dockStyle},p().createElement(d.s_,{id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},r))}}])}(p().Component);Tt(xt,"propTypes",{id:s().string,source:s().string,active:s().bool,searchOnStartup:s().bool,serviceTypes:s().array,wrap:s().bool,wrapWithPanel:s().bool,panelStyle:s().object,panelClassName:s().string,closeCatalog:s().func,closeGlyph:s().string,buttonStyle:s().object,services:s().object,servicesWithBackgrounds:s().object,selectedService:s().string,style:s().object,dockProps:s().object,zoomToLayer:s().bool,isLocalizedLayerStylesEnabled:s().bool,width:s().number,dockStyle:s().object,group:s().string,onInitPlugin:s().func,editingAllowedRoles:s().array,editingAllowedGroups:s().array}),Tt(xt,"defaultProps",{id:"mapstore-metadata-explorer",serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:jt},{name:"wfs",label:"WFS"},{name:"3dtiles",label:"3D Tiles"},{name:"model",label:"IFC Model"},{name:"arcgis",label:"ArcGIS"}],active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",closeCatalog:function(){},onInitPlugin:function(){},closeGlyph:"1-close",zoomToLayer:!0,width:550,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{},editingAllowedRoles:["ALL"]});var It=(0,m.connect)(Ct,{clearModal:g.V3,onSearch:v.tt,onLayerAdd:v.A4,closeCatalog:v.wl,onChangeFormat:v.BG,onChangeServiceFormat:v.i3,onChangeUrl:v.X7,onChangeType:v.XM,onChangeTitle:v.r1,onChangeMetadataTemplate:v.Wf,onChangeText:v.XW,onChangeServiceProperty:v.L8,onChangeSelectedService:v.Dw,onChangeCatalogMode:v.In,onAddService:v.M3,onToggleAdvancedSettings:v.Ts,onToggleThumbnail:v.XS,onToggleTemplate:v.IT,onDeleteService:v.wo,onError:v.vG,onAddBackgroundProperties:g.US,onFocusServicesList:v.dL,onPropertiesChange:A.He,onAddBackground:g.pW,onFormatOptionsFetch:v.tx,onToggle:S.Xi.bind(null,"backgroundSelector",null),onLayerChange:S.Xg.bind(null,"backgroundSelector"),onStartChange:S.Xg.bind(null,"backgroundSelector","start"),setNewServiceStatus:v.zX,onInitPlugin:v.QT})(xt),Lt=(0,m.connect)((function(){return{}}),{onClick:S.pu.bind(null,"metadataexplorer","enabled",!0,"group")})((function(e){var t=e.onClick,r=e.selectedNodes,n=e.status,o=e.itemComponent,a=e.statusTypes,i=e.config,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,gt),c=o;if(!1===i.activateAddLayerButton)return null;if([a.DESELECT,a.GROUP].includes(n)){var s,u=null==r||null===(s=r[0])||void 0===s?void 0:s.id;return p().createElement(c,St({},l,{glyph:"add-layer",tooltipId:n===a.GROUP?"toc.addLayerToGroup":"toc.addLayer",onClick:function(){return t(u)}}))}return null}));const Zt={MetadataExplorerPlugin:l()(It,{BurgerMenu:{name:"metadataexplorer",position:5,text:p().createElement(j.Z,{msgId:"catalog.title"}),tooltip:"catalog.tooltip",icon:p().createElement(d.gG,{glyph:"folder-open"}),action:S.Xg.bind(null,"metadataexplorer","enabled",!0,!0),doNotHide:!0,priority:1},BackgroundSelector:{name:"MetadataExplorer",doNotHide:!0,priority:1},TOC:{name:"MetadataExplorer",doNotHide:!0,priority:1,target:"toolbar",Component:Lt,position:2},SidebarMenu:{name:"metadataexplorer",position:5,text:p().createElement(j.Z,{msgId:"catalog.title"}),tooltip:"catalog.tooltip",icon:p().createElement(d.gG,{glyph:"folder-open"}),action:S.Xg.bind(null,"metadataexplorer","enabled",!0,!0),selector:function(e){return{style:{display:(0,pt.$)(e)?"none":null}}},toggle:!0,doNotHide:!0,priority:1}}),reducers:{catalog:r(618163).Z},epics:r(856175).Z(b.Z)}},507872:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(670570),o=r.n(n),a=r(904925),i=r.n(a),l=r(650277),c=r.n(l),s=r(25518),u=r.n(s),p=r(464322),d=r.n(p),m=r(535339),f=r.n(m),y=r(507790),g=r.n(y),v=r(728753),S=r.n(v),A=r(378465),b=r.n(A),h=r(328424),E=r.n(h),w=r(76886),O=r.n(w),T=r(337679),P=r.n(T),j=r(807909),C=r.n(j);const k={google:{HYBRID:P(),ROADMAP:o(),TERRAIN:i(),SATELLITE:c()},bing:{Aerial:u(),AerialWithLabels:E()},osm:{mapnik:d()},mapquest:{osm:C()},ol:{undefined:g()},nasagibs:{Night2012:b()},OpenTopoMap:{OpenTopoMap:O()},unknown:S(),s2cloudless:{"s2cloudless:s2cloudless":f()}}},618163:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(931273),o=r(881808),a=r(761868),i=r(414293),l=r.n(i),c=r(727418),s=r.n(c),u=r(455877),p=r.n(u),d=["isNew"];function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={url:"",type:"wms",title:"",isNew:!0,autoload:!1,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>"};const S=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:{services:{},selectedService:"",newService:{}},delayAutoSearch:1e3,loading:!1,showFormatError:!1,pageSize:4,services:{},selectedService:"",newService:{}},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case n.Xp:return y(y({},r),{},{editingAllowedRoles:(null==i||null===(e=i.options)||void 0===e?void 0:e.editingAllowedRoles)||r.editingAllowedRoles,editingAllowedGroups:(null==i||null===(t=i.options)||void 0===t?void 0:t.editingAllowedGroups)||r.editingAllowedGroups});case n.eA:return y(y({},r),{},{saving:i.status});case n.HR:return s()({},r,{result:i.result,searchOptions:i.searchOptions,loadingError:null,layerError:null,loading:!1});case n.xi:return s()({},r,{result:null,loadingError:null,searchOptions:null});case n.vK:return s()({},r,{result:null,searchOptions:null,loadingError:i.error,loading:!1,layerError:null});case n.nm:return s()({},r,{result:null,loadingError:null,format:i.format,layerError:null});case n.QF:return s()({},r,{layerError:i.error});case n.uN:return s()({},r,{newService:i.isNew?v:s()({},r.services&&r.services[r.selectedService||""]||{},{oldService:r.selectedService||""}),mode:i.mode,result:null,showFormatError:!1,loadingError:null,layerError:null});case o.ok:return r&&!l()(r.default)?i.config&&!l()(i.config.catalogServices)?s()({},r,{services:i.config.catalogServices.services,selectedService:i.config.catalogServices.selectedService}):s()({},r,{services:r.default.services,selectedService:r.default.selectedService}):r;case n.YO:return(0,a.t8)("openCatalogServiceList",i.status,r);case n.CO:return(0,a.t8)("searchOptions.text",i.text,r);case n.Mt:return(0,a.t8)("newService.".concat(i.property),i.value,r);case n.im:return(0,a.t8)("newService.title",i.title,r);case n.PR:return(0,a.t8)("newService.url",i.url,(0,a.t8)("showFormatError",!1,r));case n.Oq:return(0,a.t8)("newService.format",i.format,r);case n.$X:var c=i.newType.toLowerCase(),u={};return"csw"!==c&&(u={showTemplate:!1,metadataTemplate:""}),s()({},r,{newService:s()({},r.newService,y({type:c},u))});case n.wI:var m=i.service,f=m.isNew,S=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(m,d),A=f?S.title+p()():r.selectedService,b=s()({},r.services,g({},A,S));return s()({},r,{services:b,selectedService:A,mode:"view",result:null,loadingError:null,searchOptions:s()({},r.searchOptions,{text:""}),layerError:null});case n.zZ:return i.service!==r.selectedService?s()({},r,{selectedService:i.service,result:null,loadingError:null,layerError:null}):r;case n.bv:var h,E="";return delete(h=s()({},r.services))[i.service],Object.keys(h).length&&(E=h[Object.keys(h)[0]].title),s()({},r,{services:h,selectedService:E,mode:"view",result:null,loadingError:null,layerError:null});case n.Kz:return(0,a.t8)("newService.hideThumbnail",!r.newService.hideThumbnail,r);case n.cS:return(0,a.t8)("loading",i.loading,r);case n.Bz:return(0,a.t8)("newService.metadataTemplate",i.metadataTemplate,r);case n.l3:var w=(0,a.t8)("newService.showTemplate",!r.newService.showTemplate,r);return w.newService.showTemplate&&(w=(0,a.t8)("newService.metadataTemplate",w.newService.metadataTemplate||"<p>${description}</p>",w)),w;case n.vg:return(0,a.t8)("newService.showAdvancedSettings",!r.newService.showAdvancedSettings,r);case n.do:return(0,a.t8)("formatsLoading",i.loading,r);case n.l7:return(0,a.t8)("showFormatError",i.status,r);case n.lb:return(0,a.t8)("newService.supportedFormats",i.formats,(0,a.t8)("newService.formatUrlUsed",i.url,r));case n.yu:return(0,a.t8)("isNewServiceAdded",i.status,r);default:return r}}},452702:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(923645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".msgapi div.record-grid {\n    padding-left: 0;\n    padding-right: 0;\n}\n\n.msgapi div.record-grid .record-item{\n    height: auto;\n}\n.msgapi div.record-grid .record-item .panel-body{\n    padding: 0;\n}\n\n.msgapi #mapstore-catalog-panel button.search-button {\n    margin-bottom: 10px;\n}\n\n.msgapi #mapstore-catalog-panel .record-item {\n    min-height: 150px;\n}\n\n/*\n!important is needed because the library we used\nuse inline style which cannot be overridden unless\nwe use !important*/\n@media (max-width: 500px) {\n    .msgapi div .catalog-sidebar.nav-menu {\n        width: 100% !important\n    }\n}\n\n.msgapi #mapstore-metadata-explorer{\n    margin-bottom: 0\n}\n",""]);const a=o},203932:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/catalog/img/default.jpg"},25518:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/Aerial.jpg"},328424:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/AerialWithLabels.jpg"},337679:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/HYBRID.jpg"},378465:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/NASA_NIGHT.jpg"},76886:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/OpenTopoMap.jpg"},670570:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/ROADMAP.jpg"},650277:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/SATELLITE.jpg"},904925:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/TERRAIN.jpg"},728753:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/dafault.jpg"},464322:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/mapnik.jpg"},807909:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/mapquest-osm.jpg"},507790:e=>{e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAD1APUDAREAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGwgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEAAQUCcH//xAAUEQEAAAAAAAAAAAAAAAAAAACQ/9oACAEDAQE/AXB//8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAgEBPwFwf//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEABj8CcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/IXB//9oADAMBAAIAAwAAABCSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSf/8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAwEBPxBwf//EABQRAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQIBAT8QcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/EHB//9k="},535339:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/plugins/background/assets/img/s2cloudless.jpg"}}]);