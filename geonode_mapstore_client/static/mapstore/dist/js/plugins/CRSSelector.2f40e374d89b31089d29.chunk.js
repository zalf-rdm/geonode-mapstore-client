(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[7330],{801550:(e,t,r)=>{"use strict";r.d(t,{pP:()=>n,TR:()=>o,N7:()=>i,mq:()=>u,uv:()=>c,Qy:()=>l,IL:()=>a,Li:()=>s,OW:()=>p,ZO:()=>f,Um:()=>y,TF:()=>b,Ls:()=>d,Ec:()=>v,Eu:()=>m,JJ:()=>O,nZ:()=>S,YD:()=>g,GI:()=>h,Jb:()=>E,Uh:()=>N,e$:()=>P,eh:()=>j,$j:()=>A,bJ:()=>w,Mk:()=>T,xy:()=>_,o6:()=>R,NH:()=>I,FP:()=>C,Mo:()=>M,sO:()=>L,Px:()=>k,hd:()=>D,y9:()=>x,Ju:()=>G,BV:()=>U,SO:()=>Z,H0:()=>V,$X:()=>z,ou:()=>H,NE:()=>B,Lq:()=>F,aN:()=>J});var n="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",u="CHANGE_ZOOM_LVL",c="PAN_TO",l="ZOOM_TO_EXTENT",a="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",p="CHANGE_MAP_SCALES",f="CHANGE_MAP_STYLE",y="CHANGE_ROTATION",b="CREATION_ERROR_LAYER",d="UPDATE_VERSION",v="INIT_MAP",m="RESIZE_MAP",O="CHANGE_MAP_LIMITS",S="SET_MAP_RESOLUTIONS",g="REGISTER_EVENT_LISTENER",h="UNREGISTER_EVENT_LISTENER",E="MOUSE_MOVE",N="MOUSE_OUT",P="MAP:MAP_PLUGIN_LOAD",j="MAP:ORIENTATION",A="MAP:UPDATE_MAP_VIEW",w="MAP:UPDATE_MAP_OPTIONS";function T(e,t,r,n){return{type:P,mapType:t,loading:e,loaded:r,error:n}}function _(e,t,r){return{type:a,pos:e,zoom:t,crs:r}}function R(e,t,r,o,i,u,c,l){return{type:n,center:e,zoom:t,bbox:r,size:o,mapStateSource:i,projection:u,viewerOptions:c,resolution:l}}function I(e){return{type:s,crs:e}}function C(e,t){return{type:o,point:e,layer:t}}function M(e){return{type:i,pointer:e}}function L(e,t){return{type:u,zoom:e,mapStateSource:t}}function k(e,t,r,n){return{type:l,extent:e,crs:t,maxZoom:r,options:n}}function D(e,t){return{type:f,style:e,mapStateSource:t}}function x(e){return{type:v,disableFeedbackMask:e}}function G(){return{type:m}}function U(e){var t=e.restrictedExtent,r=e.crs,n=e.minZoom;return{type:O,restrictedExtent:t,crs:r,minZoom:n}}function Z(e){return{type:S,resolutions:e}}var V=function(e,t){return{type:g,eventName:e,toolName:t}},z=function(e,t){return{type:h,eventName:e,toolName:t}},H=function(e){return{type:E,position:e}},B=function(){return{type:N}},F=function(e){return{type:j,orientation:e}},J=function(e){return{type:w,configUpdate:e}}},38560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(480681),o=r(124852),i=r.n(o),u=r(294184),c=r.n(u),l=["disabled","className","onClick"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(null,arguments)}var s=r(815135);const p=(f=n.zx,i().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,u=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return i().createElement(f,a({ref:t,className:r?c()("disabled",n):n,onClick:function(){r||u.apply(void 0,arguments)}},s),s.children)})));var f;(0,s.Z)(n.zx)},14281:(e,t,r)=>{"use strict";r.d(t,{A1:()=>n,HN:()=>o,Bm:()=>i,CD:()=>u,eY:()=>c,bI:()=>l,Rr:()=>a,DX:()=>s,e7:()=>p,QN:()=>f,Nd:()=>y,VR:()=>b,LR:()=>d,wP:()=>v,A9:()=>m,pC:()=>O,L0:()=>S,Hl:()=>g,_x:()=>h,x$:()=>E,Dm:()=>N,ym:()=>P});var n="ANNOTATIONS:EDIT",o="ANNOTATIONS:DOWNLOAD",i="ANNOTATIONS:LOAD_ANNOTATIONS",u="ANNOTATIONS:NEW",c="ANNOTATIONS:CLOSE",l="ANNOTATIONS:CONFIRM_CLOSE",a="ANNOTATIONS:CANCEL_CLOSE",s="ANNOTATIONS:REMOVE",p="ANNOTATIONS:STORE_SESSION",f="ANNOTATIONS:MERGE_FEATURES",y="ANNOTATIONS:SELECT_FEATURE",b=function(e){return{type:n,id:e}},d=function(e){return{type:o,annotations:e}},v=function(e){return{type:i,features:e,override:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},m=function(){return{type:u}},O=function(){return{type:c}},S=function(e){return{type:l,layer:e}},g=function(){return{type:a}},h=function(e){return{type:s,id:e}},E=function(e){return{type:p,session:e}},N=function(e,t){return{type:f,id:e,annotation:t}},P=function(e){return{type:y,id:e}}},838398:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(14281);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.e7:return u(u({},e),{},{session:t.session});case n.Nd:return u(u({},e),{},{featureId:t.id});case n.CD:case n.A1:return u(u({},e),{},{editing:!0,closeId:0});case n.eY:return u(u({},e),{},{closeId:(e.closeId||0)+1});case n.bI:return u(u({},e),{},{editing:!1,closeId:0,session:null});case n.Rr:return u(u({},e),{},{closeId:0});default:return e}}},902054:(e,t,r)=>{"use strict";r.d(t,{sB:()=>u,Yu:()=>c,F3:()=>l,cM:()=>a,Gu:()=>s,qs:()=>p});var n=r(22222),o=r(675110),i=r(900012),u=(0,n.P1)([o.l2],(function(e){return e.find(i.cO)})),c=(0,n.P1)([o.l2],(function(e){return e.filter(i.cO)})),l=function(e){var t=(0,o.Iz)(e);return t&&(0,i.cO)(t)?t:null},a=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.editing},s=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.session},p=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.featureId}},67925:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>re});var n=r(218721),o=r.n(n),i=r(264721),u=r.n(i),c=r(103651),l=r.n(c),a=r(727418),s=r.n(a),p=r(45697),f=r.n(p),y=r(124852),b=r.n(y),d=r(480681),v=r(322843),m=r(22222),O="CHANGE_CRS_INPUT_VALUE",S=r(801550),g=r(197395),h=r(805346),E=r(86638);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function j(e,t,r){return t=w(t),function(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function _(e,t,r){return(t=R(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}var I=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _(e=j(this,t,[].concat(n)),"handleChange",(function(t){e.props.changeInputValue(t.target.value)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.children;return b().createElement("div",{className:"dropdown-menu",style:{left:"auto",right:0}},b().createElement(d.WI,{className:"ms-prj-header",bsSize:"sm"},b().createElement("div",null,b().createElement(h.Z,{msgId:"crsSelectorSelectedCRS"})),b().createElement("div",null,this.props.selected)),b().createElement(d.NX,{style:{maxHeight:150,overflowY:"auto",marginBottom:0}},t.filter((function(t){return!e.props.value.trim()||-1!==t.props.children.indexOf(e.props.value)}))),b().createElement(d.NI,{ref:function(t){e.input=t},type:"text",placeholder:(0,E.S$)(this.context.messages,"crsSelectorFilterPlaceholder"),onChange:this.handleChange,value:this.props.value}))}}])&&P(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(b().Component);_(I,"propTypes",{selected:f().string,value:f().string,changeInputValue:f().func}),_(I,"contextTypes",{messages:f().object}),_(I,"defaultProps",{value:"",changeInputValue:function(){}});const C=I;var M=r(815135);var L=r(838398),k=r(902054),D=r(607147),x=r(731255),G=r(675110),U=r(800827),Z=r(55105),V=r(93152),z=r(274621),H=r(916651),B=r(38560);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function W(e,t,r){return t=$(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function X(e,t,r){return(t=q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var K=(0,M.Z)(B.Z),ee=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return X(e=W(this,t,[].concat(n)),"state",{toggled:!1}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this,t=[],r={};for(var n in Object.keys(this.props.availableCRS).length&&(r=(0,H.filterCRSList)(this.props.availableCRS,this.props.filterAllowedCRS,this.props.additionalCRS,this.props.projectionDefs)),r)r.hasOwnProperty(n)&&t.push({value:n});var i=(0,H.normalizeSRS)(this.props.selected,this.props.filterAllowedCRS),c=["EPSG:4326","EPSG:3857","EPSG:900913"],a=["wms","osm","tileprovider","empty"],s=u()(this.props.allowedRoles,"ALL")||u()(this.props.allowedRoles,this.props.currentRole);return this.props.enabled&&s?b().createElement(d.Lt,{dropup:!0,className:"ms-prj-selector",onToggle:function(t){return e.setState({toggled:t})}},b().createElement(K,{bsRole:"toggle",bsStyle:"primary",className:"map-footer-btn btn-".concat(this.state.toggled?"success":"primary"),tooltip:b().createElement(h.Z,{msgId:"showCrsSelector"}),tooltipPosition:"top"},b().createElement(d.gG,{glyph:"crs"})),b().createElement(C,{bsRole:"menu",value:this.props.value,selected:i,projectionDefs:this.props.projectionDefs,filterAllowedCRS:this.props.filterAllowedCRS,additionalCRS:this.props.additionalCRS,changeInputValue:function(t){return e.props.typeInput(t)}},t.map((function(t){return b().createElement(d.WI,{key:t.value,active:i===t.value,onClick:function(t){return function(t){l()(c,t)>-1||l()(a,e.props.currentBackground.type)>-1||e.props.currentBackground.allowedSRS&&o()(e.props.currentBackground.allowedSRS,t)?e.props.setCrs(t):e.props.onError({title:"error",message:"notification.incompatibleBackgroundAndProjection",action:{label:"close"},position:"tc",uid:"3"})}(t.target.textContent)},eventKey:t.value},t.value)})))):null}}],n&&J(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(b().Component);X(ee,"propTypes",{selected:f().string,value:f().string,projections:f().array,availableCRS:f().object,filterAllowedCRS:f().array,projectionDefs:f().array,additionalCRS:f().object,setCrs:f().func,typeInput:f().func,enabled:f().bool,currentBackground:f().object,onError:f().func,allowedRoles:f().array,currentRole:f().string}),X(ee,"defaultProps",{availableCRS:(0,H.getAvailableCRS)(),setCrs:function(){},typeInput:function(){},enabled:!0,allowedRoles:["ALL"]});var te=(0,v.$j)((0,m.P1)(z.L3,G.DP,U.uy,U.pb,(function(e){return e&&e.crsselector&&e.crsselector.value}),x.eK,V.c0,Z.VM,D.QF,D._d,D.h,k.cM,(function(e,t,r,n,o,i,u,c,l,a,s,p){return{currentRole:e,currentBackground:t,selected:r,projectionDefs:n,value:o,enabled:!("EDIT"===i||u||c||l||a||s||p)}})),{typeInput:function(e){return{type:O,value:e}},setCrs:S.NH,onError:g.vU})(ee);const re={CRSSelectorPlugin:s()(te,{disablePluginIf:"{state('mapType') === 'leaflet'}",MapFooter:{name:"crsSelector",position:10,tool:!0,priority:1}}),reducers:{crsselector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{projections:[]},t=arguments.length>1?arguments[1]:void 0;return t.type===O?s()({},e,{value:t.value}):e},annotations:L.Z},epics:{}}},55105:(e,t,r)=>{"use strict";r.d(t,{Ss:()=>b,Nr:()=>d,QJ:()=>v,ic:()=>m,Jz:()=>O,VM:()=>S,CF:()=>g,Ju:()=>h,Fc:()=>E,gQ:()=>N});var n=r(91175),o=r.n(n),i=r(288306),u=r.n(i),c=r(800827),l=r(552259),a=r(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){return e.maplayout&&e.maplayout.layout||{}},d=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},m=u()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=b(e),o=v(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return f(f({},e),{},y({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(b(e))+JSON.stringify(v(e))+JSON.stringify(t)+(r?"_isDock":"")})),O=function(e){var t;return!(null===(t=b(e))||void 0===t||!t.rightPanel)},S=function(e){var t,r=a.ZP.getConfigProp("mapLayout")||l.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=b(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},g=function(e){var t=(0,c.Od)(e),r=d(e);return r&&t&&t.size&&{left:(0,l.pb)(r.left,t.size.width),bottom:(0,l.pb)(r.bottom,t.size.height),right:(0,l.pb)(r.right,t.size.width),top:(0,l.pb)(r.top,t.size.height)}},h=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},E=function(e){return m(e,{height:!0,right:!0},!0)},N=function(e){return m(e,{right:!0},!0)}},103651:(e,t,r)=>{var n=r(442118),o=r(640554),i=Math.max;e.exports=function(e,t,r){var u=null==e?0:e.length;if(!u)return-1;var c=null==r?0:o(r);return c<0&&(c=i(u+c,0)),n(e,t,c)}}}]);