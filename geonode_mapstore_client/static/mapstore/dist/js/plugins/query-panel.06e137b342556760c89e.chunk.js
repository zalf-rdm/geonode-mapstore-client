(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[38973,47310],{243120:(e,t,r)=>{var n={"./cesium.js":[61133,17621,65792,48764,29379,45477,27962,66287,23474,50172,23857,65794,89437],"./leaflet.js":[48507,17621,96259,45243,42201,51410,84766,66287,24226,23474,88181,35701,83436,49967,37161],"./openlayers.js":[434637,17621,96259,18672,52043,15265,47202,69141,51554,49414,85828,72445,37974,54678,95773,38225,52210,1577,53563,21611,24372,62366,55211,66287,24226,23474,93546,13581,39151,70890,6909,3498,84590,5904,16037],"./sink.js":[871405,5442]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=243120,e.exports=o},604206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>l,uB:()=>c,Rh:()=>p,G_:()=>f,vU:()=>d,Vw:()=>y,KD:()=>m,uj:()=>b,lo:()=>v,Yf:()=>g,fo:()=>h,PY:()=>O,bp:()=>w,oJ:()=>P,k4:()=>j,sc:()=>F,Li:()=>E});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",c="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",d="DRAW:SET_SNAPPING_CONFIG";function y(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function m(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:s,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:l}}function g(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function O(e){return{type:i,currentStyle:e}}var w=function(e){return g("clean","",e,[],{})};function P(){return{type:f}}function j(e){return{type:c,snappingLayer:e}}function F(){return{type:p}}function E(e,t,r){return{type:d,value:e,prop:t,pluginCfg:r}}},690825:(e,t,r)=>{"use strict";r.d(t,{H:()=>F,k:()=>E});var n=r(580416),o=r(501157),i=r(577215),a=r(432420),l=r(375875),u=r.n(l),s=r(472500),c=r.n(s),p=r(727418),f=r.n(p),d=r(505055),y=r.n(d),m=r(611847);const b={describeCoverage:function(e,t){var r=c().parse((0,m.eW)(e),!0),n=c().format(f()({},r,{query:f()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return u().get(n).then((function(e){var t;return y().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))}};var v=r(624262),g=r(227361),h=r.n(g),O=r(838848);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==w(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return function(i){return o.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?a.v$(e,r.name).then((function(e){return r.geometryType=(0,O.mI)(e),i((0,n.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&b.describeCoverage(e,r.name).then((function(e){var o=h()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),i((0,n.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return i((0,n.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function E(e){var t=(0,v.Fh)(e);return function(r){return r((0,n.tV)(e.id,"id",{capabilitiesLoading:!0})),o.ZP.getCapabilities(t).then((function(t){var a=o.ZP.parseLayerCapabilities(t,e);r(a?(0,n.tV)(e.id,"id",j(j({},(0,i.Br)(a)),{},{capabilitiesLoading:null})):(0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){r((0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},807878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>a,vo:()=>l,l1:()=>u,J9:()=>s,U:()=>c,z8:()=>p,ql:()=>f,O_:()=>d,M$:()=>y,Ug:()=>m,p5:()=>b,Fz:()=>v,WZ:()=>g,bP:()=>h,On:()=>O,d_:()=>w,xM:()=>P,bl:()=>j,Wi:()=>F,PN:()=>E,_M:()=>S,Wm:()=>x,Eg:()=>T,V1:()=>C,cY:()=>D,RD:()=>I,Hl:()=>N,co:()=>L,uY:()=>_,H8:()=>R,je:()=>q,go:()=>k,_8:()=>A,xd:()=>M,o7:()=>G,Nr:()=>B,Gf:()=>U,nh:()=>z,Rf:()=>Z,Xp:()=>V,D6:()=>W,Sm:()=>X,Ef:()=>H,qu:()=>Q,LY:()=>J,ZC:()=>$,c1:()=>Y,jW:()=>K,kQ:()=>ee,JG:()=>te,js:()=>re,q$:()=>ne,OZ:()=>oe,Nc:()=>ie,NV:()=>ae,I5:()=>le,QL:()=>ue,I:()=>se,ku:()=>ce,EU:()=>pe,IV:()=>fe,HT:()=>de,lg:()=>ye,ds:()=>me,VF:()=>be,DD:()=>ve,uo:()=>ge,Ry:()=>he,ZH:()=>Oe,AQ:()=>we,yC:()=>Pe,F:()=>je,mc:()=>Fe,uM:()=>Se,eJ:()=>xe,uP:()=>Te,N5:()=>Ce,bn:()=>De,Bm:()=>Ie,F2:()=>Ne,jR:()=>Le,$J:()=>_e,ln:()=>Re});var n=r(375875),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var a="ADD_FILTER_FIELD",l="REMOVE_FILTER_FIELD",u="UPDATE_FILTER_FIELD",s="UPDATE_EXCEPTION_FIELD",c="ADD_GROUP_FIELD",p="UPDATE_LOGIC_COMBO",f="REMOVE_GROUP_FIELD",d="CHANGE_CASCADING_VALUE",y="EXPAND_ATTRIBUTE_PANEL",m="EXPAND_SPATIAL_PANEL",b="QUERYFORM:EXPAND_CROSS_LAYER",v="QUERYFORM:SET_CROSS_LAYER_PARAMETER",g="QUERYFORM:RESET_CROSS_LAYER_FILTER",h="SELECT_SPATIAL_METHOD",O="SELECT_VIEWPORT_SPATIAL_METHOD",w="UPDATE_GEOMETRY",P="SELECT_SPATIAL_OPERATION",j="CHANGE_SPATIAL_ATTRIBUTE",F="CHANGE_SPATIAL_FILTER_VALUE",E="REMOVE_SPATIAL_SELECT",S="SHOW_SPATIAL_DETAILS",x="QUERY_FORM_SEARCH",T="QUERY_FORM_RESET",C="SHOW_GENERATED_FILTER",D="CHANGE_DWITHIN_VALUE",I="ZONE_SEARCH",N="ZONE_SEARCH_ERROR",L="ZONE_FILTER",_="ZONE_CHANGE",R="ZONES_RESET",q="SIMPLE_FILTER_FIELD_UPDATE",k="ADD_SIMPLE_FILTER_FIELD",A="REMOVE_SIMPLE_FILTER_FIELD",M="REMOVE_ALL_SIMPLE_FILTER_FIELDS",G="UPDATE_FILTER_FIELD_OPTIONS",B="LOADING_FILTER_FIELD_OPTIONS",U="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",z="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",Z="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",V="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD_OPTIONS",W="SET_AUTOCOMPLETE_MODE",X="TOGGLE_AUTOCOMPLETE_MENU",H="QUERYFORM:LOAD_FILTER",Q="QUERYFORM:UPSERT_FILTERS",J="QUERYFORM:REMOVE_FILTERS",$="QUERYFORM:CHANGE_MAP_EDITOR",Y=function(e){return{type:$,mapData:e}};function K(e){return{type:a,groupId:e}}function ee(e,t){return{type:c,groupId:e,index:t}}function te(e){return{type:l,rowId:e}}function re(e,t){return{type:X,rowId:e,status:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function ne(e,t,r,n){return{type:u,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function oe(e,t){return{type:s,rowId:e,exceptionMessage:t}}function ie(e,t){return{type:p,groupId:e,logic:t}}function ae(e){return{type:W,status:e}}function le(e){return{type:f,groupId:e}}function ue(e){return{type:d,attributes:e}}function se(e){return{type:y,expand:e}}function ce(e){return{type:m,expand:e}}function pe(e){return{type:b,expand:e}}function fe(e,t){return{type:v,key:e,value:t}}function de(e,t){return{type:h,fieldName:t,method:e}}function ye(){return{type:O}}function me(e){return{type:w,geometry:e}}function be(e,t){return{type:P,fieldName:t,operation:e}}function ve(e){return{type:j,attribute:e}}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:F,value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function he(){return{type:E}}function Oe(e){return{type:S,show:e}}function we(e){return{type:D,distance:e}}function Pe(e,t){return{type:x,searchUrl:e,filterObj:t}}function je(e){return{type:H,filter:e}}function Fe(e){return{type:T,skip:e}}function Ee(e,t){return{type:N,error:e,id:t}}function Se(e,t){return{type:I,active:e,id:t}}function xe(e,t,r){return function(n){return o().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var a=o.data;if("object"!==i(a))try{a=JSON.parse(a)}catch(o){n(Ee("Search result broken ("+e+":   "+t+"): "+o.message,r))}n(function(e,t){return{type:L,data:e,id:t}}(a,r)),n(Se(!1,r))})).catch((function(e){n(Ee(e,r))}))}}function Te(e,t){return{type:_,id:e,value:t}}function Ce(e){return{type:U,rowId:(new Date).getTime(),groupId:e}}function De(e,t,r,n){return{type:z,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function Ie(e){return{type:Z,rowId:e}}function Ne(){return{type:g}}function Le(e,t){return{type:B,status:e,filterField:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function _e(e,t,r){return{type:G,filterField:e,options:t,valuesCount:r}}function Re(e,t,r){return{type:V,filterField:e,options:t,valuesCount:r}}},647310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(375875),o=r.n(n),i=r(472500),a=r.n(i),l=r(727418),u=r.n(l),s={format:"json",bounded:0,polygon_geojson:1,priority:5};const c={geocode:function(e,t){var r=u()({q:e},s,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=u()({lat:e.lat,lon:e.lng},t||{},s),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},115047:(e,t,r)=>{"use strict";r.d(t,{b:()=>y});var n=r(727418),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){var n,o,a,l;n=e,o=t,a=r[t],l=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(l)?l:l+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=r(59286),s=r(432420),c=["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"];var p=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,l=e.predicate,s=(0,u.Iz)(n||"")(i),c=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===c.length&&(c=r?[r]:[]),c.length>0&&(t="(".concat(c.map((function(e){return a.map((function(t){return"".concat(t," ").concat(l," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(s):s||null},f={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(647310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:null===(r=e.data)?[]:r.map((function(e){return{properties:l({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}));var r}))},wfs:function(e,t){var r=t.url,n=t.typeName,i=t.queriableAttributes,a=void 0===i?[]:i,l=t.outputFormat,u=void 0===l?"application/json":l,f=t.predicate,d=void 0===f?"ILIKE":f,y=t.staticFilter,m=void 0===y?"":y,b=t.blacklist,v=void 0===b?[]:b,g=t.item,h=t.fromTextToFilter,O=void 0===h?p:h,w=t.returnFullData,P=void 0!==w&&w,j=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,c),F=O({searchText:e,staticFilter:m,blacklist:v,item:g,queriableAttributes:a,predicate:d});return s.DH(r,o()({maxFeatures:10,typeName:n,outputFormat:u,cql_filter:F},j)).then((function(e){return P?e:e.features}))}},d={setService:function(e,t){f[e]=t},getService:function(e){return f[e]?f[e]:null}},y={Services:f,Utils:d}},615402:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(45697),o=r.n(n),i=r(124852),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var m=r(868195).FormattedHTMLMessage,b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(m,{id:this.props.msgId,values:this.props.msgParams}):a().createElement("span",null,this.props.msgId||"")}}])&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);d(b,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),d(b,"contextTypes",{intl:o().object});const v=b},838167:(e,t,r)=>{"use strict";r.d(t,{k9:()=>P,v0:()=>w,ZP:()=>F});var n=r(45697),o=r.n(n),i=r(124852),a=r.n(i),l=r(868195);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function p(e,t,r){return t=d(t),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(l.FormattedDate,s({value:this.props.value},this.props.dateParams)):a().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&c(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);m(v,"propTypes",{value:o().object,dateParams:o().object}),m(v,"contextTypes",{intl:o().object}),m(v,"defaultProps",{value:new Date});const g=v;var h=r(615402),O=r(805346),w=O.Z,P=h.Z,j=g;const F={Message:O.Z,HTML:P,DateFormat:j}},848384:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(124852),o=r.n(n),i=r(45697),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var y,m,b,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.item;return e.pagination?o().createElement("span",null,e[this.props.textField]," ",e.pagination," "):o().createElement("span",null,e[this.props.textField])}}])&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);y=v,m="propTypes",b={item:a().object,textField:a().string,valueField:a().string},(m=d(m))in y?Object.defineProperty(y,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[m]=b;const g=v},965539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){var n,o,a,l;n=e,o=t,a=r[t],l=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(l)?l:l+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const u=function(e){var t=e.id,r=e.children,n=e.header,i=e.footer,a=e.columns,u=e.height,s=e.style,c=void 0===s?{}:s,p=e.className,f=e.bodyClassName,d=void 0===f?"ms2-border-layout-body":f;return o().createElement("div",{id:t,className:p,style:l({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},c)},n,o().createElement("div",{className:d,style:{display:"flex",flex:1,overflowY:"auto"}},o().createElement("main",{className:"ms2-border-layout-content",style:{flex:1,overflowX:"hidden"}},u?o().createElement("div",{style:{height:u}},r):r),u?o().createElement("div",{style:{height:u}},a):a),i)}},461928:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(124852),o=r.n(n),i=r(45697),a=r.n(i),l=r(747037),u=r.n(l),s=["impl","name"];function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function y(e,t,r){return t=b(t),function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var O=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return g(e=y(this,t,[].concat(n)),"getTool",(function(t){var r=e.props.plugins;return u()(t)?{name:t,impl:r.tools[t]}:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:t.name,impl:r.tools[t.name]},t)})),g(e,"renderLayers",(function(){var t=e.props.map&&e.props.map.projection||"EPSG:3857",r=e.props.plugins.Layer;return e.props.layers.map((function(n,i){return o().createElement(r,{type:n.type,srs:t,position:i,key:n.id||n.name,options:n,env:n.localizedLayerStyles?e.props.env:[]},e.renderLayerContent(n,t))}))})),g(e,"renderLayerContent",(function(t,r){if(t.features&&"vector"===t.type){var n=e.props.plugins.Feature;return t.features.map((function(e){return o().createElement(n,{key:e.id,msId:e.id,type:e.type,crs:r,geometry:e.geometry,features:e.features,featuresCrs:t.featuresCrs||"EPSG:4326",layerStyle:t.style,style:e.style||t.style||null,properties:e.properties})}))}return null})),g(e,"renderTools",(function(){return e.props.tools.filter((function(t){var r,n,o;return null===(r=e.props)||void 0===r||null===(n=r.plugins)||void 0===n||null===(o=n.tools)||void 0===o?void 0:o[u()(t)?t:null==t?void 0:t.name]})).map((function(t){var r=e.getTool(t),n=r.impl,i=r.name,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,s);return o().createElement(n,p({key:i},a))}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.plugins.Map,t=this.props.map&&this.props.map.projection||"EPSG:3857";return this.props.map&&e?o().createElement(e,p({projectionDefs:this.props.projectionDefs,style:this.props.styleMap,id:this.props.id,zoomControl:this.props.zoomControl,center:{x:0,y:0},zoom:1,hookRegister:this.props.hookRegister,mapStateSource:this.props.mapStateSource||this.props.id},this.props.options,this.props.map,{projection:t},this.props.eventHandlers),this.renderLayers(),this.renderTools(),this.props.children):null}}])&&d(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);g(O,"propTypes",{id:a().string,options:a().object,map:a().object,mapStateSource:a().string,eventHandlers:a().object,styleMap:a().object,layers:a().array,hookRegister:a().object,projectionDefs:a().array,plugins:a().any,tools:a().array,getLayerProps:a().func,env:a().array,zoomControl:a().bool}),g(O,"defaultProps",{id:"__base_map__",options:{},map:{},styleMap:{},tools:[],projectionDefs:[],eventHandlers:{onMapViewChanges:function(){},onClick:function(){},onMouseMove:function(){},onLayerLoading:function(){},onLayerError:function(){}},env:[],zoomControl:!1});const w=O},507848:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(124852),o=r.n(n),i=r(898631);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}const l=function(e){return function(t){var r;return o().createElement(e,a({mapType:(0,i._1)(null==t||null===(r=t.map)||void 0===r?void 0:r.visualizationMode)},t))}}},91812:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(867076),o=r(438482);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){var n,o,a,l;n=e,o=t,a=r[t],l=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(l)?l:l+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,n.compose)((0,n.withStateHandlers)((function(){return{resize:0}}),{onResize:function(e){var t=e.resize,r=void 0===t?0:t;return function(){return{resize:r+1}}}}),(0,o.Z)({debounceTime:e}),(0,n.withProps)((function(e){var t=e.options,r=e.resize;return{options:l(l({},t),{},{resize:r})}})))}},319180:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),i=r(45697),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function c(e,t,r){return t=f(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}const b=function(e){var t=function(t){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return y(e=c(this,n,[].concat(r)),"state",{plugins:{}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(n,t),i=n,(a=[{key:"componentDidMount",value:function(){this.setPlugins(this.props),this._isMounted=!0}},{key:"componentWillUpdate",value:function(e){e.mapType!==this.props.mapType&&this.setPlugins(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.state.plugins;return o().createElement(e,u({},this.props,{plugins:t}))}},{key:"setPlugins",value:function(e){var t=this;e.mapType&&r(243120)("./"+e.mapType+".js").then((function(e){t._isMounted&&(t.setState({plugins:e.default()}),t.props.onMapTypeLoaded())}))}}])&&s(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,a}(o().Component);return y(t,"propTypes",{mapType:a().string,onMapTypeLoaded:a().func}),y(t,"defaultProps",{onMapTypeLoaded:function(){}}),t.displayName="".concat(e.displayName,"WithMapType"),t}},469705:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(867076);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){var n,i,a,l;n=e,i=t,a=r[t],l=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i),(i="symbol"==o(l)?l:l+"")in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l=(0,n.compose)((0,n.withHandlers)({onMapViewChanges:function(e){var t=e.map,r=void 0===t?{}:t,n=e.onMapViewChanges,o=void 0===n?function(){}:n;return function(e,t,n,i,l,u,s,c,p,f){o(a(a({},r),{},{center:e,bbox:a(a({},r.bbox),n),zoom:t,size:i,mapStateSource:l,projection:u,resolution:c,orientate:p,zoomToExtentHandler:f}))}}}),(0,n.withPropsOnChange)(["onMapViewChanges","eventHandlers"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapViewChanges,r=void 0===t?function(){}:t,n=e.eventHandlers;return{eventHandlers:a(a({},void 0===n?{}:n),{},{onMapViewChanges:r})}})))},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(727418),o=r.n(n),i=r(45697),a=r.n(i),l=r(124852),u=r.n(l),s=r(485294),c=r.n(s),p=r(472986),f=r.n(p),d=r(805346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function g(e,t,r){return t=O(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function P(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var F=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return P(e=g(this,t,[].concat(n)),"renderLoading",(function(){return e.props.maskLoading?u().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},u().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},u().createElement(d.Z,{msgId:"loading"}),u().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),P(e,"renderRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),P(e,"hasRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),P(e,"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=u().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},u().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),u().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?u().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):u().createElement("span",null)),r=this.props.draggable?u().createElement(c(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?u().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&v(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);P(F,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),P(F,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const E=F},975480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(124852),o=r.n(n);const i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return o().createElement("div",{style:t,className:"mapstore-inline-loader"})}},694745:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),i=r(294184),a=r.n(i),l=r(480681),u=r(807472),s=r(80717),c=r(867076),p=r(819081),f=r.n(p),d=r(975480),y={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},m={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const b=(0,c.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,r=void 0!==t&&t,n=e.loading,i=e.loadingText,c=e.onClose,p=void 0===c?function(){}:c,b=e.title,v=void 0===b?"":b,g=e.clickOutEnabled,h=void 0===g||g,O=e.showClose,w=void 0===O||O,P=e.disabledClose,j=void 0!==P&&P,F=e.showFullscreen,E=void 0!==F&&F,S=e.fullscreenType,x=void 0===S?"full":S,T=e.buttons,C=void 0===T?[]:T,D=e.size,I=void 0===D?"":D,N=e.bodyClassName,L=void 0===N?"":N,_=e.children,R=e.draggable,q=void 0!==R&&R,k=e.fullscreenState,A=e.onFullscreen,M=e.fade,G=void 0!==M&&M,B=e.fitContent,U=e.modalClassName,z=void 0===U?"":U,Z=e.dialogClassName,V=void 0===Z?"":Z,W=e.enableFooter,X=void 0===W||W,H=y[I]||"",Q=E&&"expanded"===k&&m.className[x]||"",J=r?o().createElement("div",{className:"modal-fixed ".concat(z," ")+(q?"ms-draggable":"")},o().createElement(u.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:h?p:function(){},containerClassName:"ms-resizable-modal",draggable:q,modal:!0,className:a()("modal-dialog modal-content",H,Q,V,{"ms-fit-content":B})},o().createElement("span",{role:"header"},o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"ms-title"},v),E&&m.className[x]&&o().createElement(l.gG,{className:"ms-header-btn",onClick:function(){return A("expanded"===k?"collapsed":"expanded")},glyph:m.glyph[k][x]}),w&&p&&o().createElement(l.gG,{glyph:"1-close",className:"ms-header-btn",onClick:p,disabled:j}))),o().createElement("div",{role:"body",className:L},_),X&&o().createElement("div",{style:{display:"flex"},role:"footer"},o().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},n?o().createElement(d.Z,null):null),o().createElement("div",{className:"ms-resizable-modal-loading-text"},n?i:null),o().createElement(s.Z,{buttons:C})))):null;return G?o().createElement(f(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},J):J}))},749902:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(45697),o=r.n(n),i=r(124852),a=r.n(i),l=r(200020),u=r(480681),s=r(86638),c=r(950966),p=r(848384);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function m(e,t,r){return t=v(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function h(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return h(e=m(this,t,[].concat(n)),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return a().createElement(r,null,t)}var n=a().createElement(u.u,{id:e.props.tooltip.id},e.props.tooltip.message);return a().createElement(c.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),h(e,"renderTooltipCheckbox",(function(){var t=e.props,r=t.onFilterChange,n=t.anyFieldVal,o=a().createElement("input",{onChange:function(e){r({column:{key:e.target.name},filterTerm:!e.target.checked})},type:"checkbox",checked:!("boolean"!=typeof n||n),name:e.props.anyFilterRuleMode}),i=a().createElement(u.u,{id:e.props.tooltip.id+n?"checked":"unchecked"},"boolean"!=typeof n||n?e.props.unCheckedAnyField:e.props.checkedAnyField);return a().createElement(c.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:i},o)})),h(e,"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return a().createElement("div",{className:"autocomplete-toolbar"},!t&&a().createElement(u.gG,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadPrevPage()}}),!r&&a().createElement(u.gG,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadNextPage()}}))})),h(e,"renderField",(function(){var t={emptyList:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},r=[];e.props.data&&e.props.data.length>0&&(r=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&r.length>0&&r.push(h(h(h(h({},e.props.textField,""),e.props.valueField,""),"disabled",!0),"pagination",e.renderPagination()));var n=e.props.loading?[]:r,o=e.props.itemComponent,i=a().createElement(l.Combobox,{placeholder:e.props.placeholder,dropUp:e.props.dropUp,busy:e.props.busy,data:n,disabled:e.props.disabled,itemComponent:function(t){return a().createElement(o,d({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||t,open:e.props.open,filter:e.props.filter,onChange:function(t){return e.props.onChange(t)},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){return e.props.onSelect(t)},onToggle:function(t){return e.props.onToggle(t)},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(i):i})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),r=t,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props.attribute;t!==e.attribute&&this.props.onChangeAttribute(t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.selectedValue,n=t.disabled,o=t.onReset,i=t.label,l=t.clearable,u=t.onFilterChange,s=i?a().createElement("label",null,i):a().createElement("span",null);return a().createElement("div",{className:"autocompleteField ".concat(this.props.anyFilterRuleMode?"d-flex":"")},s,l?a().createElement("div",{className:"rw-combo-clearable ".concat(n?"disabled":"")},this.renderField(),a().createElement("span",{className:"rw-combo-clear ".concat(r?"":"hidden"),onClick:function(){var t;e.props.anyFilterRuleMode?u({column:{key:null===(t=e.props.column)||void 0===t?void 0:t.key},filterTerm:void 0,isResetField:!0}):o()}},"x")):this.renderField(),this.props.anyFilterRuleMode?a().createElement(a().Fragment,null,"",a().createElement("div",{className:"checkbox-any-field"},this.renderTooltipCheckbox())):null)}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);h(w,"propTypes",{busy:o().bool,data:o().array,disabled:o().bool,dropUp:o().bool,itemComponent:o().oneOfType([o().object,o().func]),label:o().string,loading:o().bool,filter:o().oneOfType([o().string,o().bool]),messages:o().object,onChange:o().func,onFocus:o().func,onSelect:o().func,onToggle:o().func,onChangeAttribute:o().func,open:o().bool,pagination:o().object,nextPageIcon:o().string,prevPageIcon:o().string,selectedValue:o().string,textField:o().string,tooltip:o().object,valueField:o().string,placeholder:o().string,stopPropagation:o().bool,clearable:o().bool,onReset:o().func,attribute:o().string,anyFilterRuleMode:o().string,onFilterChange:o().func,anyFieldVal:o().bool,column:o().object,checkedAnyField:o().string,unCheckedAnyField:o().string}),h(w,"contextTypes",{messages:o().object}),h(w,"defaultProps",{stopPropagation:!1,dropUp:!1,itemComponent:p.Z,loading:!1,label:null,filter:"",pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onSelect:function(){},onReset:function(){},onChangeAttribute:function(){},textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value",clearable:!1,anyFilterRuleMode:"",onFilterChange:function(){},column:{},checkedAnyField:"",unCheckedAnyField:""});const P=w},993451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(86638),o=r(285547),i=r(45697),a=r.n(i),l=r(984596),u=r.n(l),s=r(701469),c=r.n(s),p=r(414293),f=r.n(p),d=r(747037),y=r.n(d),m=r(867076),b=["messages","locale"];function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){var n;return n=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==v(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"msgId";return(0,m.compose)((0,m.getContext)({messages:a().object,locale:a().string}),(0,m.mapProps)((function(i){var a=i.messages,l=i.locale,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(i,b);return h(h({},s),u()(e).reduce(function(e,t,r){var i=t.messages,a=t.locale,l=t.mode;return function(){var t=arguments.length>1?arguments[1]:void 0;return h(h({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},O({},t,"msgId"===l?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(t))return t.map((function(o){var i=(0,n.S$)(e,o[r]||y()(o)&&o||"");return h(h({},o),{},O({},r,f()(i)?t:i))}));var o=t?(0,n.S$)(e,t):t;return f()(o)?t:o}(i,e[t],r):function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(e))return e.map((function(n){var i=(0,o.Z)(n[r]||y()(n)&&n||"",t);return h(h({},n),{},O({},r,f()(i)?e:i))}));var n=(0,o.Z)(e,t);return f()(n)?e:n}(e[t],a,r)))}}(s,{locale:l,messages:a,mode:r},t),{}))})))}},273849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(867076),o=r(828878),i=r(49977),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=(0,n.mapPropsStreamWithConfig)(o.Z);const p=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:function(){return a().Observable.of({})}}),c((function(e){return e.take(1).switchMap((function(t){return t.dataStreamFactory(e.startWith(t),t)})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(s({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e)}))})))},438482:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(124852),o=r.n(n),i=r(23279),a=r.n(i),l=r(45697),u=r.n(l),s=r(180307),c=r.n(s),p=r(391033);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function y(e,t,r){return t=b(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}const O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debounceTime,r=e.querySelector,n=e.closest,i=void 0!==n&&n;return function(e){var n;return n=function(n){function l(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),g(n=y(this,l,[e]),"findDomNode",(function(){if(!n.isMounded)return null;var e=c().findDOMNode(n);return e&&i&&r?e.closest(r||"*"):e&&(r?e.querySelector(r):e)})),n.width=void 0,n.height=void 0,n.skipOnMount=e.skipOnMount,n.div=null,n.onResize=a()((function(){var e;return(e=n.props).onResize.apply(e,arguments)}),void 0!==t?t:e.debounceTime||1e3),n.ro=new p.Z((function(e){e.forEach((function(e){var t=e.contentRect,r=t.width,o=t.height,i=n.props.handleWidth&&n.width!==r,a=n.props.handleHeight&&n.height!==o;n.skipOnMount||!i&&!a||n.onResize({width:r,height:o}),n.width=r,n.height=o,n.skipOnMount=!1}))})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,n),u=l,(s=[{key:"componentDidMount",value:function(){this.isMounded=!0,this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentDidUpdate",value:function(){this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentWillUnmount",value:function(){var e=this.findDomNode();e&&this.ro&&this.ro.unobserve&&this.ro.unobserve(e)}},{key:"render",value:function(){return o().createElement(e,this.props)}}])&&d(u.prototype,s),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,s}(o().Component),g(n,"propTypes",{handleWidth:u().bool,handleHeight:u().bool,onResize:u().func}),g(n,"defaultProps",{onResize:function(){},handleWidth:!0,handleHeight:!0}),n}}},145869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),i=r(45697),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return o().createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},o().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),o().createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);d(m,"propTypes",{disabled:a().bool,className:a().string,checked:a().bool,onChange:a().func,onClick:a().func}),d(m,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}});const b=m},290702:(e,t,r)=>{"use strict";r.d(t,{z:()=>g,Z:()=>h});var n=r(124852),o=r.n(n),i=r(180307),a=r(974691),l=r.n(a),u=r(737275),s=r(623560),c=r.n(s);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var f=["open","onOpen"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==p(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t=e.containerNode,r=void 0===t?function(){return document.querySelector("."+((0,u.u8)("themePrefix")||"ms2")+" > div")||document.body}:t,a=e.placement,s=e.content,p=e.children,f=e.open,d=e.onOpen,y=void 0===d?function(){}:d,v=e.onClick,g=void 0===v?function(){}:v,h=e.disabled,O=e.triggerScrollableElement,w=10,P=c()(r)?r():r,j=(0,n.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),F=b((0,n.useState)(j.current),2),E=F[0],S=F[1],x=(0,n.useRef)(),T=(0,n.useRef)(),C=(0,n.useRef)(),D=(0,n.useCallback)((function(){var e,t,r,n,o,i;if(!f)return j.current;var u={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===a)return u;var s=null==x||null===(e=x.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),c=null==T||null===(r=T.current)||void 0===r||null===(n=r.getBoundingClientRect)||void 0===n?void 0:n.call(r),p=null==C||null===(o=C.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i?void 0:i.call(o);if(s&&c&&p){var d,y,m,b,v=p.width,g=p.height,h=c.top,O=c.left,P=c.width,F=c.height,E=s.top,S=s.left,D=s.width,I=s.height,N=v+20<P,L=g+20<F,_={top:{filter:function(){return N&&E-h>g+w},styles:function(){var e=S+D/2-v/2-O;return{picker:{position:"absolute",top:E-g-w-h,left:l()(e,O+w,O+P-v-w)},overlay:{},arrow:{top:E+2,left:S+D/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return L&&O+P-(S+D)>v+w},styles:function(){var e=E-g/2-h+I/2,t=S+D+w-O;return{picker:{position:"absolute",top:l()(e,h+w,h+F-g-w),left:t},overlay:{},arrow:{top:E+I/2,left:S+D-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return N&&h+F-(E+I)>g+w},styles:function(){var e=S+D/2-v/2-O;return{picker:{position:"absolute",top:E+I+w-h,left:l()(e,O+w,O+P-v-w)},overlay:{},arrow:{top:E+I-2,left:S+D/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return L&&S-O>v+w},styles:function(){var e=E-g/2-h+I/2,t=S-v-w-O;return{picker:{position:"absolute",top:l()(e,h+w,h+F-g-w),left:t},overlay:{},arrow:{top:E+I/2,left:S+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null!=_&&null!==(d=_[a])&&void 0!==d&&null!==(y=d.filter)&&void 0!==y&&y.call(d))return null==_||null===(m=_[a])||void 0===m||null===(b=m.styles)||void 0===b?void 0:b.call(m);if("top"!==a&&_.top.filter())return _.top.styles();if("right"!==a&&_.right.filter())return _.right.styles();if("bottom"!==a&&_.bottom.filter())return _.bottom.styles();if("left"!==a&&_.left.filter())return _.left.styles()}return u}),[a,f]);(0,n.useEffect)((function(){S(D());var e=function(){return S(D())};return window.addEventListener("resize",e),O&&f&&O.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),O&&O.removeEventListener("scroll",e)}}),[D]);var I=(0,n.useRef)();return I.current={open:f},(0,n.useEffect)((function(){function e(e){var t=C.current,r=x.current,n=e.target&&(t&&t.contains(e.target)||r&&r.contains(e.target));if(I.current.open&&!n){var o,i,a=e.clientX,l=e.clientY,u=(null==C||null===(o=C.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i?void 0:i.call(o))||{},s=u.left,c=u.top,p=u.width,f=u.height;void 0!==a&&void 0!==l&&!(a>=s&&a<=s+p&&l>=c&&l<=c+f)&&y(!1)}}return window.addEventListener("click",e,!0),window.addEventListener("wheel",e,!0),window.addEventListener("scroll",e,!0),function(){window.removeEventListener("click",e,!0),window.removeEventListener("wheel",e,!0),window.removeEventListener("scroll",e,!0)}}),[]),o().createElement(o().Fragment,null,o().createElement("div",{className:"ms-popover",ref:x},(0,n.cloneElement)(p,{onClick:function(e){h||(e.stopPropagation(),y(!f),g())}})),P&&f?(0,i.createPortal)(o().createElement("div",{className:"ms-popover-overlay",ref:T,style:m({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none"},null==E?void 0:E.overlay)},o().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),o().createElement("div",{ref:C,style:m({pointerEvents:"auto"},null==E?void 0:E.picker)},s),o().createElement("div",{className:"ms-popover-arrow",style:m({position:"absolute",borderTop:"".concat(12,"px solid transparent"),borderBottom:"".concat(12,"px solid transparent"),borderRight:"".concat(12,"px solid #ffffff"),filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))"},null==E?void 0:E.arrow)})),P):null)}const h=function(e){var t=e.open,r=e.onOpen,i=void 0===r?function(){}:r,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,f),l=b((0,n.useState)(t),2),u=l[0],s=l[1];return o().createElement(g,d({},a,{open:u,onOpen:function(e){s(e),i(e)}}))}},576364:(e,t,r)=>{"use strict";r.d(t,{Vd:()=>P,Vj:()=>j});var n=r(472500),o=r.n(n),i=r(666654),a=r.n(i),l=r(91175),u=r.n(l),s=r(414293),c=r.n(s),p=r(727418),f=r.n(p),d=r(49977),y=r.n(d),m=r(115047),b=r(375875),v=r.n(b),g=r(284069);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var w=function(e){var t=e.searchText,r=void 0===t?"":t,n=e.queriableAttributes,o=void 0===n?[]:n,i=e.predicate,a=void 0===i?"ILIKE":i,l=u()(o),s=r.toLowerCase(),p="strToLowerCase(".concat(l,") ").concat(a," '%").concat(s,"%'");return c()(l)?"":"("+p+")"},P=function(e){return e.distinctUntilChanged((function(e){var t=e.value,r=e.currentPage,n=e.attribute,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(o.value!==t||o.currentPage!==r||o.attribute!==n)})).throttle((function(e){return y().Observable.timer(e.delayDebounce||0)})).merge(e.debounce((function(e){return y().Observable.timer(e.delayDebounce||0)}))).distinctUntilChanged().switchMap((function(e){if(e.performFetch){var t=(0,g.getWpsPayload)({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return y().Observable.fromPromise(v().post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return{fetchedData:e.data,busy:!1}}))).catch((function(){return y().Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({busy:!0})}return y().Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({})},j=function(e){return y().Observable.merge(e.distinctUntilChanged((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).value})).debounce((function(e){return y().Observable.timer(e.delayDebounce||0)})),e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterProps,r=e.currentPage,n=arguments.length>1?arguments[1]:void 0,o=n.filterProps,i=n.currentPage;return t===o&&r===i}))).switchMap((function(e){if(e.performFetch){var t=o().parse(e.url,!0),r="";(a()(t.pathname,"wfs")||a()(t.pathname,"wms")||a()(t.pathname,"ows")||a()(t.pathname,"wps"))&&(r=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;var n=o().format(f()({},t,{search:null,pathname:r})),i=f()({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==h(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({url:n,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:w,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},t.query));return y().Observable.fromPromise(m.b.Utils.getService("wfs")(e.value,i).then((function(t){return{fetchedData:{values:t.features.map((function(e){return e.properties})),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1}}))).catch((function(){return y().Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({busy:!0})}return y().Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})}},886850:(e,t,r)=>{"use strict";r.d(t,{V6:()=>M,Mc:()=>B,v$:()=>U,ED:()=>z});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),l=r(984596),u=r.n(l),s=r(414293),c=r.n(s),p=r(513218),f=r.n(p),d=r(49977),y=r.n(d),m=r(505055),b=r(507526),v=r(375875),g=r.n(v),h=r(86686),O=r(624262),w=r(510284),P=r(439156),j=r.n(P),F=r(611847),E=["totalFeatures","features"],S=["sortOptions","propertyName"];function x(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function D(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==C(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=j()({wfsVersion:"1.1.0"}),_=L.getFeature,R=L.query,q=L.sortBy,k=L.propertyName,A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",i=(0,h.getWFSFilterData)(t,r),a=o().parse((0,F.eW)(e),!0),l=f()(a.query)?a.query:{};l.service="WFS",l.outputFormat=n;var u=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:l});return r.layer&&"vector"===r.layer.type?y().Observable.defer((function(){return new Promise((function(e){var n,o=function(e,t){if(t.filterFields&&0!==t.filterFields.length){var r=e.features.filter((0,h.createFeatureFilter)(t));e.features=r,e.numberMatched=r.length,e.numberReturned=r.length,e.totalFeatures=r.length}return t.sortOptions&&t.sortOptions.sortBy&&t.sortOptions.sortOrder&&"NONE"!==t.sortOptions.sortOrder&&e.features.sort((function(e,r){var n=e.properties[t.sortOptions.sortBy],o=r.properties[t.sortOptions.sortBy],i=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===t.sortOptions.sortOrder?i:-1*i})),e}({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(n=r.layer.features).length,numberReturned:n.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:n.length,type:"FeatureCollection",features:n},t);e(o)}))})):{data:i,queryString:u}},M=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(r.layer&&"vector"===r.layer.type)return A(e,t,r,n);var o=A(e,t,r,n),i=o.data,a=o.queryString;return y().Observable.defer((function(){return g().post(a,i,{timeout:6e4,responseType:"arraybuffer",headers:{Accept:"application/xml","Content-Type":"application/xml"}})}))},G=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return A(e,t,r);var n=A(e,t,r),o=n.data,i=n.queryString;return y().Observable.defer((function(){return g().post(i,o,N({timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}},null==r?void 0:r.requestOptions))})).let(w.oB).map((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=D(e,E),o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).startIndex,i=arguments.length>2?arguments[2]:void 0;return i>t&&i===o+r.length&&t===r.length?N(N({},n),{},{features:r,totalFeatures:i}):N(N({},n),{},{features:r,totalFeatures:t})}(e.data,function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!c()(e.startIndex)&&!c()(e.maxFeatures)&&{startIndex:e.startIndex,maxFeatures:e.maxFeatures}}(t,r),r.totalFeatures)}))},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,i=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=l.sortOptions,c=l.propertyName,p=D(l,S);return G(r.url||n,i&&"object"===C(i)?N(N({},i),{},{typeName:o||i.typeName}):_(R(o,[].concat(x(s?[q(s.sortBy,s.sortOrder)]:[]),x(c?[k(c)]:[]),x(i?u()(i):[]))),p),p).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!s&&c&&c[0])return G(r.url||n,i&&"object"===C(i)?N(N({},i),{},{typeName:o||i.typeName}):_(R(o,[q(a()(c)?c[0]:c)].concat(x(c?[k(c)]:[]),x(i?u()(i):[]))),p),p);throw e}))},U=function(e){var t=e.layer;return y().Observable.defer((function(){return g().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,l=o().parse((0,F.eW)(a||n.url||i),!0);return o().format(N(N({},l),{},{search:void 0,query:N(N({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(w.oB)},z=function(e){var t=e.layer;return y().Observable.defer((function(){return g().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=(0,O.Fh)({name:t,url:n&&n.url||i}),l=o().parse(a,!0);return o().format(N(N({},l),{},{search:void 0,query:N(N({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(w.oB).switchMap((function(e){return y().Observable.bindNodeCallback((function(e,t){return(0,m.parseString)(e,{tagNameProcessors:[b.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},117032:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>So});var n=r(618446),o=r.n(n),i=r(45697),a=r.n(i),l=r(124852),u=r.n(l),s=r(171703),c=r(506806),p=r(12838),f=r(22222),d=r(807878),y=r(782904),m=r(531071);const b=(0,s.connect)((function(e){return{groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,maxFeaturesWPS:e.queryform.maxFeaturesWPS}}),(function(e){return{actions:(0,p.DE)({onAddGroupField:d.kQ,onAddFilterField:d.jW,onRemoveFilterField:d.JG,onUpdateFilterField:d.q$,onUpdateExceptionField:d.OZ,onUpdateLogicCombo:d.Nc,onRemoveGroupField:d.I5,onChangeCascadingValue:d.QL,toggleMenu:d.js,onExpandAttributeFilterPanel:d.I},e),controlActions:(0,p.DE)({onToggleQuery:y.Xi.bind(null,"queryPanel",null)},e)}}))(m.Z);var v=r(800827),g=r(469842),h=r(604206),O=r(313311),w=r.n(O),P=r(414293),j=r.n(P),F=r(480681),E=r(576364),S=r(86638),x=r(838167),T=r(794192),C=r(701469),D=r.n(C),I=r(867076),N=r(828878),L=r(86686),_=r(59286),R=r(91175),q=r.n(R),k=r(200020),A=r(950966),M=r(848384);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B.apply(this,arguments)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function z(e,t,r){return t=V(t),function(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z()?Reflect.construct(t,r||[],V(e).constructor):t.apply(e,r))}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function X(e,t,r){return(t=H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var Q=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return X(e=z(this,t,[].concat(n)),"state",{}),X(e,"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return u().createElement(r,null,t)}var n=u().createElement(F.u,{id:e.props.tooltip.id},"this.props.tooltip.message");return u().createElement(A.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),X(e,"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return u().createElement("div",{className:"autocomplete-toolbar"},!t&&u().createElement(F.gG,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(){return e.props.pagination.loadPrevPage()}}),!r&&u().createElement(F.gG,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(){return e.props.pagination.loadNextPage()}}))})),X(e,"renderField",(function(){var t={emptyList:function(){return e.props.busy?"Loading...":(0,S.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList")},open:(0,S.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,S.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},r=[];e.props.data&&e.props.data.length>0&&(r=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&r.length>0&&r.push(X(X(X(X({},e.props.textField,""),e.props.valueField,""),"disabled",!0),"pagination",e.renderPagination()));var n=!1,o=e.props.loading?[]:r,i=e.props.itemComponent,a=u().createElement(k.Combobox,{dropUp:e.props.dropUp,busy:e.props.busy,data:o,disabled:e.props.disabled,itemComponent:function(t){return u().createElement(i,B({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||t,open:e.props.open,filter:!1,onChange:function(t){e.props.onChange(t,e.props.valueField),n=!0},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){var r=q()(e.props.features.filter((function(r){return r.properties[e.props.valueField].toLowerCase()===t[e.props.valueField].toLowerCase()})));e.props.onSelect(t,r,e.props.srsName,e.props.style)},onToggle:function(t){var r=q()(e.props.features.filter((function(t){return t.properties[e.props.valueField].toLowerCase()===e.props.selectedValue.toLowerCase()})));!t||e.props.selectedValue||e.props.selectedValue||n||e.props.onChange("",e.props.valueField),e.props.onToggle(t,r,e.props.pagination.currentPage),r&&!t&&e.props.onSelect(e.props.selectedValue,r,e.props.srsName,e.props.style),n=!1},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(a):a})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.label?u().createElement("label",null,this.props.label):u().createElement("span",null);return u().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&U(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);X(Q,"propTypes",{busy:a().bool,data:a().array,disabled:a().bool,dropUp:a().bool,features:a().array,filter:a().string,itemComponent:a().oneOfType([a().object,a().func]),label:a().string,loading:a().bool,messages:a().object,onChange:a().func,onFocus:a().func,onSelect:a().func,onToggle:a().func,onChangeDrawingStatus:a().func,style:a().style,open:a().bool,pagination:a().object,nextPageIcon:a().string,prevPageIcon:a().string,selectedValue:a().string,srsName:a().string,textField:a().string,tooltip:a().object,valueField:a().string}),X(Q,"contextTypes",{messages:a().object}),X(Q,"defaultProps",{dropUp:!1,features:[],filter:"",itemComponent:M.Z,loading:!1,label:null,pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onChangeDrawingStatus:function(){},onSelect:function(){},srsName:"EPSG:4326",textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value"});const J=Q;function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){var n;return n=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==$(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,I.setObservableConfig)(N.Z);var te=(0,I.mapPropsStreamWithConfig)(N.Z)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return K(K({},t),{},{data:D()(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values:[],features:D()(e&&e.fetchedData&&e.fetchedData.features)?e.fetchedData.features:[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,srsName:e&&e.fetchedData&&e.fetchedData.crs,busy:e.busy})}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,a=e.changed,l=e.originalValue,s=e.value,c=e.valuesCount,p=e.onChangeDrawingStatus,f=e.loadNextPage,d=e.loadPrevPage,y=e.maxFeatures,m=e.currentPage,b=e.itemComponent,v=e.features,g=e.busy,h=e.data,O=e.loading,w=void 0!==O&&O,P=e.valueField,j=e.textField,F=e.filter,E=e.srsName,S=e.style,x=Math.ceil(c/y);return u().createElement(J,{pagination:{firstPage:1===m,lastPage:x<=m,paginated:!0,loadPrevPage:d,loadNextPage:f,currentPage:m},srsName:E,busy:g,dropUp:!1,data:h,open:t,onChangeDrawingStatus:p,valueField:P,textField:j,itemComponent:b,filter:F,onFocus:o,onToggle:r,onChange:i,onSelect:n,features:v,style:S,selectedValue:a?s:l||s,loading:w})})),re=(0,I.compose)((0,I.withPropsOnChange)(["valueField"],(function(){return{value:void 0}})),(0,I.withStateHandlers)((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,changed:e.value,value:e.value,onChangeDrawingStatus:e.onChangeDrawingStatus,itemComponent:e.itemComponent}}),{select:function(){return function(e){return{selected:e}}},change:function(e){return function(t,r){return e.selected||e.open||e.onChangeDrawingStatus("clean","","queryform",[],{}),{delayDebounce:500,selected:!1,changingPage:!1,changed:!0,performFetch:!(e.selected&&!e.changingPage),value:e.selected&&e.changingPage&&e.value||("string"==typeof t?t:t[r]),currentPage:e.changingPage?e.currentPage:1}}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}:e}},toggle:function(e){return function(){return{open:!!e.changingPage||!e.open}}},loadNextPage:function(e){return function(){return{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0}}},loadPrevPage:function(e){return function(){return{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0}}}}),(0,I.withHandlers)({select:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=e.onChangeSpatialFilterValue,n=void 0===r?function(){}:r,o=e.select,i=void 0===o?function(){}:o;return function(e,r,o,a){r&&n({geometry:r.geometry,value:e,feature:r,srsName:o,style:a,options:t,collectGeometries:t&&t.crossLayer?{queryCollection:{typeName:t.crossLayer.typeName,geometryName:t.crossLayer.geometryName,cqlFilter:(0,_.Iz)(t.crossLayer.cqlTemplate||"",L.escapeCQLStrings)(r)}}:void 0}),i(!0)}}})),ne=re(te),oe=r(112346),ie=r(704201);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function ue(e,t,r){return t=ce(t),function(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,se()?Reflect.construct(t,r||[],ce(e).constructor):t.apply(e,r))}function se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(se=function(){return!!e})()}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function fe(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}var de,ye,me,be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ue(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return u().createElement("span",{className:this.props.customItemClassName?this.props.customItemClassName:""},this.props.item)}}])&&le(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);de=be,ye="propTypes",me={item:a().string,textField:a().string,customItemClassName:a().string,valueField:a().string},(ye=fe(ye))in de?Object.defineProperty(de,ye,{value:me,enumerable:!0,configurable:!0,writable:!0}):de[ye]=me;const ve=be;var ge=r(727418),he=r.n(ge),Oe=r(916651);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Te(n.key),n)}}function je(e,t,r){return t=Ee(t),function(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fe()?Reflect.construct(t,r||[],Ee(e).constructor):t.apply(e,r))}function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fe=function(){return!!e})()}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function xe(e,t,r){return(t=Te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==we(t)?t:t+""}var Ce=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xe(e=je(this,t,[].concat(n)),"onUpdateBBOX",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempExtent[r]=!isNaN(parseFloat(t))&&parseFloat(t)||0);var o=[];for(var i in e.tempExtent)i&&o.push(e.tempExtent[i]);var a=(0,Oe.reprojectBbox)(o,"EPSG:4326",e.props.projection),l={type:e.props.geometry.type,coordinates:[[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]],projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[l])})),xe(e,"onUpdateCircle",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempCircle[r]=parseFloat(t));var o=isNaN(parseFloat(e.tempCircle.x))||isNaN(parseFloat(e.tempCircle.y))?[e.tempCircle.x,e.tempCircle.y]:(0,Oe.reproject)([e.tempCircle.x,e.tempCircle.y],"EPSG:4326",e.props.projection);o=void 0===o.x?{x:o[0],y:o[1]}:o;var i={x:isNaN(o.x)?0:o.x,y:isNaN(o.y)?0:o.y},a={type:e.props.geometry.type,center:i,coordinates:[i.x,i.y],radius:isNaN(e.tempCircle.radius)?0:e.tempCircle.radius,projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[a],{geodesic:e.props.enableGeodesic})})),xe(e,"onModifyGeometry",(function(){"BBOX"===e.props.type?e.onUpdateBBOX(null,null,"endDrawing"):"Circle"===e.props.type&&e.onUpdateCircle(null,null,"endDrawing"),e.props.onShowPanel(!1)})),xe(e,"onClosePanel",(function(){e.resetGeom(),e.props.onShowPanel(!1)})),xe(e,"getStep",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.min(1/Math.pow(10,Math.ceil(Math.min(e,21)/3)-2),1)})),xe(e,"getStepCircle",(function(t,r){var n=e.getStep(t);return"radius"===r&&!e.isWGS84()&&1e4*n||n})),xe(e,"getBBOXDimensions",(function(e){var t=(0,Oe.reprojectBbox)(e.extent,e.projection,"EPSG:4326");return{west:t[0],sud:t[1],est:t[2],north:t[3]}})),xe(e,"getCircleDimensions",(function(t){var r=(0,Oe.reproject)(t.center,t.projection,"EPSG:4326"),n=(0,Oe.reproject)(t.center,t.projection,e.props.projection),o=(0,Oe.reproject)([t.center[0]+t.radius,t.center[1]],t.projection,e.props.projection),i=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y));return{x:r.x,y:r.y,radius:i}})),xe(e,"renderCoordinateField",(function(t,r){return u().createElement("div",null,u().createElement("div",{className:"detail-field-title"},r),u().createElement(T.Z,{style:{minWidth:"105px",margin:"auto"},type:"number",id:"queryform_bbox_"+r,step:e.getStep(e.props.zoom),defaultValue:e.roundValue(t,1e6),onChange:function(t){return e.onUpdateBBOX(t,r)}}))})),xe(e,"renderCircleField",(function(t,r){return u().createElement(T.Z,{type:"number",id:"queryform_circle_"+r,defaultValue:e.roundValue(t,"radius"!==r||e.isWGS84()?1e6:100),step:e.getStepCircle(e.props.zoom,r),onChange:function(t){return e.onUpdateCircle(t,r)}})})),xe(e,"renderDetailsContent",(function(){var t,r=e.props.geometry;if("BBOX"===e.props.type){var n=e.getBBOXDimensions(r);t=u().createElement("div",null,u().createElement("div",{className:"container-fluid"},u().createElement(F.X2,null,u().createElement(F.JX,{xs:4},u().createElement("span",null)),u().createElement(F.JX,{xs:4},e.renderCoordinateField(n.north,"north")),u().createElement(F.JX,{xs:4},u().createElement("span",null))),u().createElement(F.X2,null,u().createElement(F.JX,{xs:4},e.renderCoordinateField(n.west,"west")),u().createElement(F.JX,{xs:4},u().createElement("span",null)),u().createElement(F.JX,{xs:4},e.renderCoordinateField(n.est,"est"))),u().createElement(F.X2,null,u().createElement(F.JX,{xs:4},u().createElement("span",null)),u().createElement(F.JX,{xs:4},e.renderCoordinateField(n.sud,"sud")),u().createElement(F.JX,{xs:4},u().createElement("span",null)))),u().createElement("span",null,u().createElement("hr",{width:"90%"}),u().createElement("div",null,u().createElement("h5",null,u().createElement(x.ZP.Message,{msgId:"queryform.spatialfilter.details.details_bbox_label"})))))}else if("Circle"===e.props.type){var o=e.getCircleDimensions(r),i=(0,Oe.getUnits)(e.props.projection);t=u().createElement("div",null,u().createElement("div",{className:"container-fluid"},u().createElement(F.X2,null,u().createElement(F.JX,{xs:2},u().createElement("span",null)),u().createElement(F.JX,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},"x:")),u().createElement(F.JX,{xs:4},e.renderCircleField(o.x,"x")),u().createElement(F.JX,{xs:4},u().createElement("span",null))),u().createElement(F.X2,null,u().createElement(F.JX,{xs:2},u().createElement("span",null)),u().createElement(F.JX,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},"y:")),u().createElement(F.JX,{xs:4},e.renderCircleField(o.y,"y")),u().createElement(F.JX,{xs:4},u().createElement("span",null))),u().createElement(F.X2,null,u().createElement(F.JX,{xs:2},u().createElement("span",null)),u().createElement(F.JX,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},u().createElement(x.ZP.Message,{msgId:"queryform.spatialfilter.details.radius",msgParams:{unit:"degrees"===i?"":i}}),":")),u().createElement(F.JX,{xs:4},e.renderCircleField(o.radius,"radius")),u().createElement(F.JX,{xs:4},u().createElement("span",null)))),u().createElement("span",null,u().createElement("hr",{width:"90%"}),u().createElement("div",null,u().createElement("h5",null,u().createElement(x.ZP.Message,{msgId:"queryform.spatialfilter.details.details_circle_label"})))))}return t})),xe(e,"isWGS84",(function(){return"EPSG:4326"===e.props.projection})),xe(e,"roundValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6;return Math.round(e*t)/t})),xe(e,"resetGeom",(function(){"BBOX"===e.props.type?e.resetBBOX():"Circle"===e.props.type&&e.resetCircle()})),xe(e,"resetBBOX",(function(){for(var t in e.extent)t&&(document.getElementById("queryform_bbox_"+t).value=e.roundValue(e.extent[t],1e6),e.onUpdateBBOX(e.extent[t],t))})),xe(e,"resetCircle",(function(){document.getElementById("queryform_circle_radius").value=e.roundValue(e.circle.radius,100),e.onUpdateCircle(e.circle.radius,"radius"),document.getElementById("queryform_circle_x").value=e.roundValue(e.circle.x,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.x,"x"),document.getElementById("queryform_circle_y").value=e.roundValue(e.circle.y,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.y,"y")})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props.geometry;"BBOX"===this.props.type?(this.extent=this.getBBOXDimensions(e),this.tempExtent=he()({},this.extent)):"Circle"===this.props.type&&(this.circle=this.getCircleDimensions(e),this.tempCircle=he()({},this.circle))}},{key:"render",value:function(){var e=this;return u().createElement(oe.Z,{buttons:[{key:"confirm",glyph:"ok",tooltipId:"confirm",onClick:function(){return e.onModifyGeometry()}},{key:"reset",tooltipId:"queryform.reset",glyph:"clear-filter",onClick:function(){return e.resetGeom()}},{key:"close",glyph:"1-close",onClick:function(){return e.onClosePanel(!1)}}],title:u().createElement(x.ZP.Message,{msgId:"queryform.spatialfilter.details.details_header"}),locked:!0,expanded:!0,className:"details-panel",bsStyle:"primary"},this.renderDetailsContent())}}])&&Pe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);xe(Ce,"propTypes",{useMapProjection:a().bool,geometry:a().object,type:a().string,onShowPanel:a().func,onChangeDrawingStatus:a().func,zoom:a().number,projection:a().string,enableGeodesic:a().bool}),xe(Ce,"defaultProps",{useMapProjection:!0,geometry:null,type:null,onShowPanel:function(){},onChangeDrawingStatus:function(){}});const De=Ce;function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ae(n.key),n)}}function Le(e,t,r){return t=Re(t),function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_e()?Reflect.construct(t,r||[],Re(e).constructor):t.apply(e,r))}function _e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_e=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qe(e,t)}function ke(e,t,r){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ie(t)?t:t+""}var Me=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ke(e=Le(this,t,[].concat(n)),"state",{open:!1}),ke(e,"getFilter",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n={filterFields:[{attribute:e.props.searchAttribute,operator:r,value:t,type:"list"}]};return e.props.dependsOn&&(n.groupFields=[{id:1,logic:"AND",index:0}],n.filterFields[0].groupId=1,e.props.multivalue?(n.groupFields.push({id:2,logic:"OR",groupId:1,index:1}),e.props.dependsOn.value instanceof Array?e.props.dependsOn.value.forEach((function(t){n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:t,groupId:2,type:"list"})})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:2,type:"list"})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:1,type:"list"})),(0,L.toOGCFilter)(e.props.typeName,n,e.props.wfs,e.props.sort||{sortBy:e.props.searchAttribute,sortOrder:"ASC"})})),ke(e,"changeZoneValue",(function(t,r,n){var o;e.setState({open:!1}),o=e.props.multivalue?{value:n.map((function(e){return e.id})),feature:n.map((function(e){return e.feature}))}:{value:[n],feature:[e.values.filter((function(e){return e.id===n}))[0].feature]},e.props.onChange(e.props.zoneId,o)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.values&&!o()(this.props.values,e.values)&&e.values.length>0&&this.setState({open:!0})}},{key:"render",value:function(){var e=this;this.values=[],this.props.values&&this.props.values.length>0&&(this.values=this.props.values.map((function(t){var r=t;e.props.valueField.split(".").forEach((function(e){r=r?r[e]:null}));var n=t;return e.props.textField.split(".").forEach((function(e){n=n?n[e]:null})),{id:r,name:n,feature:t}})));var t=this.props.label?u().createElement("label",null,this.props.label):u().createElement("span",null),r=this.props.error;return r&&(r="object"!==Ie(r)?r:r.status+" "+r.statusText+": "+r.data),u().createElement("div",{className:"zone-combo"},t,u().createElement(ie.Z,{key:(new Date).getTime(),busy:this.props.busy,disabled:this.props.disabled,fieldRowId:this.props.zoneId,valueField:"id",textField:"name",fieldOptions:this.values,fieldValue:this.props.value,fieldName:"zone",fieldException:r,options:{defaultOpen:this.state.open},groupBy:this.props.groupBy?function(t){return t.feature.properties[e.props.groupBy]}:function(){},multivalue:this.props.multivalue,comboFilter:this.props.comboFilter,onSelect:this.props.onSelect,onUpdateField:this.changeZoneValue,onToggle:function(t){if(t&&(!e.props.values||e.props.values.length<1)){var r=e.getFilter(e.props.searchText,e.props.searchMethod);e.props.onSearch(!0,e.props.zoneId),e.props.onFilter(e.props.url,r,e.props.zoneId)}}}))}}])&&Ne(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);ke(Me,"propTypes",{zoneId:a().number,url:a().string,typeName:a().string,wfs:a().string,busy:a().bool,values:a().array,value:a().oneOfType([a().object,a().number,a().string,a().array]),label:a().string,searchText:a().string,searchMethod:a().string,searchAttribute:a().string,sort:a().object,error:a().oneOfType([a().object,a().string]),comboFilter:a().oneOfType([a().bool,a().string,a().func]),groupBy:a().oneOfType([a().string,a().func]),multivalue:a().bool,open:a().bool,disabled:a().bool,dependsOn:a().object,valueField:a().string,textField:a().string,onSearch:a().func,onFilter:a().func,onChange:a().func,onSelect:a().func}),ke(Me,"contextTypes",{messages:a().object}),ke(Me,"defaultProps",{open:!1,zoneId:null,url:null,typeName:null,wfs:"1.1.0",busy:!1,values:[],value:null,valueField:null,textField:null,label:null,disabled:!1,error:null,searchText:"*",searchMethod:"ilike",searchAttribute:null,comboFilter:"contains",multivalue:!0,groupBy:null,onSearch:function(){},onFilter:function(){},onChange:function(){},onSelect:function(){}});const Ge=Me;function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ue.apply(this,arguments)}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qe(n.key),n)}}function Ze(e,t,r){return t=We(t),function(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ve()?Reflect.construct(t,r||[],We(e).constructor):t.apply(e,r))}function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ve=function(){return!!e})()}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}function Xe(e,t){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xe(e,t)}function He(e,t,r){return(t=Qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qe(e){var t=function(e,t){if("object"!=Be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Be(t)?t:t+""}var Je=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return He(e=Ze(this,t,[].concat(n)),"getMethodFromId",(function(t){return w()(e.props.spatialMethodOptions,(function(e){return e&&e.id===t}))||null})),He(e,"renderHeader",(function(){var t=(0,S.S$)(e.context.messages,"queryform.spatialfilter.spatial_filter_header");return u().createElement("span",null,u().createElement("span",{style:{cursor:"pointer"},onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded)},t))})),He(e,"renderSpatialHeader",(function(){var t=e.getMethodFromId(e.props.spatialField.method);return u().createElement("div",null,u().createElement(F.X2,{className:"logicHeader inline-form filter-field-row filter-field-fixed-row"},u().createElement(F.JX,{xs:6},u().createElement("div",null,u().createElement(x.ZP.Message,{msgId:"queryform.spatialfilter.filterType"}))),u().createElement(F.JX,{xs:6},u().createElement(ie.Z,{itemComponent:function(t){return u().createElement(ve,Ue({customItemClassName:e.getMethodFromId(t.item)&&e.getMethodFromId(t.item).customItemClassName||""},t))},fieldOptions:e.props.spatialMethodOptions.map((function(t){return(0,S.S$)(e.context.messages,t.name)||t.name})),placeholder:(0,S.S$)(e.context.messages,"queryform.spatialfilter.combo_placeholder"),fieldName:"method",fieldRowId:(new Date).getTime(),fieldValue:(0,S.S$)(e.context.messages,t?t.name:"")||t&&t.name||"",onUpdateField:e.updateSpatialMethod}))))})),He(e,"renderDwithin",(function(){return u().createElement(F.X2,{className:"container-fluid filter-field-fixed-row"},u().createElement(F.JX,{xs:6,className:"filter-text-desc"},u().createElement(x.ZP.Message,{msgId:"queryform.spatialfilter.dwithin_label"})),u().createElement(F.JX,{xs:6},u().createElement(T.Z,{type:"number",min:"0",defaultValue:"0",disabled:!e.props.spatialField.geometry,id:"queryform_dwithin_field",onChange:function(t){return e.props.actions.onChangeDwithinValue(t,name)}})))})),He(e,"renderZoneFields",(function(){return e.props.spatialField.method&&"ZONE"===e.props.spatialField.method&&e.props.spatialField.zoneFields&&e.props.spatialField.zoneFields.length>0?e.props.spatialField.zoneFields.map((function(t){return u().createElement(Ge,{key:t.id,open:t.open,zoneId:t.id,url:t.url,typeName:t.typeName,wfs:t.wfs,busy:t.busy,label:t.label,values:t.values,value:t.value,valueField:t.valueField,textField:t.textField,searchText:t.searchText,searchMethod:t.searchMethod,searchAttribute:t.searchAttribute,sort:t.sort,error:t.error,disabled:t.disabled,dependsOn:t.dependson,groupBy:t.groupBy,multivalue:t.multivalue,onSearch:e.props.actions.zoneSearch,onFilter:e.props.actions.zoneFilter,onChange:e.props.actions.zoneChange})})):null})),He(e,"renderRoiPanel",(function(){var t=e.getMethodFromId(e.props.spatialField.method),r=t&&t.filterProps&&t.filterProps.valueField&&e.props.spatialField&&e.props.spatialField.value&&e.props.spatialField.value[t.filterProps.valueField];return u().createElement(F.s_,null,u().createElement("div",{className:"container-fluid"},u().createElement(F.X2,{className:"filter-field-row filter-field-fixed-row"},u().createElement(F.JX,{xs:6},u().createElement("span",null,t&&t.name||t.id)),u().createElement(F.JX,{xs:6},u().createElement(ne,{originalValue:r,key:e.props.spatialField.method,options:t,autocompleteStreamFactory:E.Vj,valueField:t&&t.filterProps&&t.filterProps.valueField,textField:t&&t.filterProps&&t.filterProps.valueField,url:t&&t.url,filter:"contains",onChangeSpatialFilterValue:e.props.actions.onChangeSpatialFilterValue,onChangeDrawingStatus:function(){var t;(t=e.props.actions).onChangeDrawingStatus.apply(t,arguments)},filterProps:t&&t.filterProps})))))})),He(e,"renderSpatialPanel",(function(t,r,n){return u().createElement(F.s_,{className:"spatial-panel"},e.props.spatialMethodOptions.length>1?e.renderSpatialHeader():u().createElement("span",null),e.renderZoneFields(),e.props.spatialField.method&&e.getMethodFromId(e.props.spatialField.method)&&"wfsGeocoder"===e.getMethodFromId(e.props.spatialField.method).type?e.renderRoiPanel():null,e.props.spatialOperations.length>1?u().createElement(F.s_,null,u().createElement("div",null,t),n&&"DWITHIN"===n.id?e.renderDwithin():null,u().createElement(F.X2,null,u().createElement(F.JX,{xs:12},r))):u().createElement("span",null))})),He(e,"renderButtons",(function(){var t=[],r=e.props.showDetailsButton&&e.props.spatialField.geometry&&(e.props.spatialField.method&&"BBOX"===e.props.spatialField.method||"Circle"===e.props.spatialField.method),n=e.props.spatialField.geometry&&e.props.spatialField.geometry.coordinates;return r&&t.push({glyph:"pencil",onClick:function(){return e.props.actions.onShowSpatialSelectionDetails(!0)},tooltipId:"queryform.spatialfilter.details.detail_button_label"}),n&&t.push({glyph:"clear-filter",tooltipId:"queryform.spatialfilter.remove",bsStyle:e.props.clearFilterOptions.buttonStyle,className:e.props.clearFilterOptions.className,onClick:function(){return e.resetSpatialFilter()}}),t})),He(e,"updateSpatialMethod",(function(t,r,n){e.props.actions.onShowSpatialSelectionDetails(!1);var o=e.props.spatialMethodOptions.filter((function(t){return n===((0,S.S$)(e.context.messages,t.name)||t.name)}))[0].id,i=e.getMethodFromId(o);if(e.props.actions.onSelectSpatialMethod(o,r),"wfsGeocoder"!==e.getMethodFromId(o).type)switch(o){case"ZONE":e.changeDrawingStatus("clean","","queryform",[]);break;case"Viewport":e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onSelectViewportSpatialMethod();break;default:e.changeDrawingStatus("start",o,"queryform",[],{geodesic:!!j()(i.geodesic)||i.geodesic,stopAfterDrawing:!0})}else e.changeDrawingStatus("clean","","queryform",[])})),He(e,"updateSpatialOperation",(function(t,r,n){var o=e.props.spatialOperations.filter((function(t){return n===(0,S.S$)(e.context.messages,t.name)}))[0].id;e.props.actions.onSelectSpatialOperation(o,r)})),He(e,"resetSpatialFilter",(function(){e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onRemoveSpatialSelection(),e.props.actions.onShowSpatialSelectionDetails(!1)})),He(e,"changeDrawingStatus",(function(t,r,n,o,i){e.props.actions.onChangeDrawingStatus(t,void 0!==r?r:e.props.spatialField.method,n,o,i)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xe(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.spatialOperations.filter((function(t){return e.props.spatialField.operation===t.id}))[0],r=u().createElement("span",null);"ZONE"!==this.props.spatialField.method&&"Viewport"!==this.props.spatialField.method&&this.getMethodFromId(this.props.spatialField.method)&&"wfsGeocoder"!==this.getMethodFromId(this.props.spatialField.method).type&&(r=this.props.spatialField.geometry?null:u().createElement("span",null,u().createElement("div",{className:"m-label m-caption text-center"},u().createElement(x.ZP.Message,{msgId:"queryform.spatialfilter.draw_start_label"}))));var n=this.getMethodFromId(this.props.spatialField.method),o=this.props.showDetailsPanel?u().createElement(De,{useMapProjection:this.props.useMapProjection,enableGeodesic:!!j()(n.geodesic)||n.geodesic,geometry:this.props.spatialField.geometry,type:this.props.spatialField.method,onShowPanel:this.props.actions.onShowSpatialSelectionDetails,onChangeDrawingStatus:this.changeDrawingStatus,zoom:this.props.zoom,projection:this.props.projection}):u().createElement("span",null),i=u().createElement(F.X2,{className:"filter-field-row inline-form filter-field-fixed-row"},u().createElement(F.JX,{xs:6},u().createElement(x.ZP.Message,{msgId:"queryform.spatialfilter.geometric_operation"})),u().createElement(F.JX,{xs:6},u().createElement(ie.Z,{fieldOptions:this.props.spatialOperations.map((function(t){return(0,S.S$)(e.context.messages,t.name)})),fieldName:"operation",fieldRowId:(new Date).getTime(),fieldValue:(0,S.S$)(this.context.messages,t?t.name:""),onUpdateField:this.updateSpatialOperation})));return u().createElement("div",{className:"query-filter-container"},this.props.withContainer?u().createElement(oe.Z,{id:"spatialFilterPanel",header:this.renderHeader(),buttons:this.renderButtons(),collapsible:!0,expanded:this.props.spatialPanelExpanded,onSwitch:function(t){return e.props.actions.onExpandSpatialFilterPanel(t)}},this.renderSpatialPanel(i,r,t)):this.renderSpatialPanel(i,r,t),o)}}])&&ze(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);He(Je,"propTypes",{useMapProjection:a().bool,spatialField:a().object,spatialOperations:a().array,spatialMethodOptions:a().array,spatialPanelExpanded:a().bool,showDetailsButton:a().bool,clearFilterOptions:a().object,showDetailsPanel:a().bool,withContainer:a().bool,actions:a().object,zoom:a().number,projection:a().string}),He(Je,"contextTypes",{messages:a().object}),He(Je,"defaultProps",{useMapProjection:!0,spatialField:{},spatialPanelExpanded:!0,showDetailsButton:!0,clearFilterOptions:{className:"square-button-sm no-border",buttonStyle:"default"},showDetailsPanel:!1,withContainer:!0,spatialMethodOptions:[],spatialOperations:[],actions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeSpatialFilterValue:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeRegion:function(){},onChangeDwithinValue:function(){},zoneFilter:function(){},zoneSearch:function(){},zoneChange:function(){}}});const $e=Je;var Ye=["useEmbeddedMap"];var Ke=(0,s.connect)((function(e){return{useMapProjection:e.queryform.useMapProjection,spatialField:e.queryform.spatialField,showDetailsPanel:e.queryform.showDetailsPanel,spatialPanelExpanded:e.queryform.spatialPanelExpanded}}),(function(e){return{actions:(0,p.DE)({onChangeSpatialFilterValue:d.uo,onExpandSpatialFilterPanel:d.ku,onSelectSpatialMethod:d.HT,onSelectViewportSpatialMethod:d.lg,onSelectSpatialOperation:d.VF,onChangeDrawingStatus:h.Yf,onRemoveSpatialSelection:d.Ry,onShowSpatialSelectionDetails:d.ZH,onChangeDwithinValue:d.AQ,zoneFilter:d.eJ,zoneSearch:d.uM,zoneChange:d.uP},e)}}))($e),et=(0,s.connect)((function(e){return{zoom:((0,v.Od)(e)||{}).zoom,projection:((0,v.Od)(e)||{}).projection}}))(Ke),tt=(0,s.connect)((function(e){return{zoom:((0,g.By)(e)||{}).zoom,projection:((0,g.By)(e)||{}).projection}}))(Ke);var rt=r(227361),nt=r.n(rt),ot=r(49977),it=r.n(ot),at=r(886850),lt=r(378889),ut=r(285547),st={"xsd:normalizedString":"string","xsd:string":"string","xsd:date":"date","xsd:dateTime":"date","xsd:date-time":"date-time","xsd:time":"time","xsd:decimal":"number","xsd:int":"number","xsd:integer":"number","xsd:long":"number","xsd:negativeInteger":"number","xsd:nonNegativeInteger":"number","xsd:nonPositiveInteger":"number","xsd:positiveInteger":"number","xsd:short":"number","xsd:unsignedLong":"number","xsd:unsignedInt":"number","xsd:unsignedShort":"number","xsd:number":"number","xsd:boolean":"boolean","xsd:double":"number","xsd:float":"number","xsd:array":"array"},ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return nt()(e,"featureTypes[0].properties").filter((function(e){return 0!==e.type.indexOf("gml:")&&st[e.type]})).map((function(e){var r=w()(t,{name:e.name});return{label:(0,ut.s8)(null==r?void 0:r.alias,e.name),attribute:e.name,type:st[e.type],valueId:"id",valueLabel:"name",values:[]}}))},pt=r(273849);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e,t,r){var n;return n=function(e,t){if("object"!=ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ft(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const bt=(0,I.compose)((0,I.withPropsOnChange)(["crossLayerFilter"],(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).crossLayerFilter,t=void 0===e?{}:e;return{queryCollection:nt()(t,"collectGeometries.queryCollection"),operation:nt()(t,"operation"),distance:nt()(t,"distance")}})),(0,I.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,r=void 0===t?[]:t,n=e.queryCollection,o=void 0===n?{}:n;return{layer:w()(r,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name===o.typeName}))}})),(0,I.withHandlers)({setQueryCollectionParameter:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){r("collectGeometries.queryCollection[".concat(e,"]"),t),"typeName"===e&&r("collectGeometries.queryCollection.filterFields",[])}},updateLogicCombo:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){return r("collectGeometries.queryCollection.groupFields",[{id:e,logic:t,index:0}])}},setOperation:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e){return r("operation",e)}}}),(0,I.defaultProps)({dataStreamFactory:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).setQueryCollectionParameter,r=void 0===t?function(){}:t;return function(e){return e.distinctUntilChanged((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).searchUrl===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).searchUrl})).switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.crossLayerExpanded?ot.Observable.of(t):e.filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).crossLayerExpanded})).take(1)})).switchMap((function(e){var t=e.featureTypeName,r=e.searchUrl;return(0,at.ED)({layer:{name:t,url:r,search:{type:"wfs",url:r}}}).do((function(e){if(t=e,r=nt()(t,"WFS_Capabilities.Filter_Capabilities.Scalar_Capabilities.ArithmeticOperators.Functions.FunctionNames.FunctionName"),!w()(r,(function(){return"queryCollection"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})._})))throw new Error("nocrosslayerfunctionalities");var t,r})).map((function(){return{loadingCapabilities:!1}})).catch((function(e){return ot.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({loadingCapabilities:!0})})).startWith({})}(e).combineLatest(function(e,t){return e.distinctUntilChanged((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer,t=void 0===e?{}:e,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layer;return r&&t.name===(r&&r.name)})).filter((function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer})).switchMap((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer;return ot.Observable.defer((function(){return(0,at.v$)({layer:e})})).do((function(e){var r=nt()((0,lt.findGeometryProperty)(e.data||{}),"name");r&&t("geometryName",r)})).map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data;return ct(void 0===t?{}:t,null==e?void 0:e.fields)})).map((function(e){return{attributes:e,loadingAttributes:!1}})).startWith({loadingAttributes:!0}).catch((function(e){return ot.Observable.of({errorObj:e,loadingAttributes:!1,featureTypeProperties:[]})}))})).catch((function(e){return ot.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({})}(e,r),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yt(yt({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e)})).startWith({})}}),pt.Z);var vt=r(805346),gt=r(743129),ht=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).item;return u().createElement("span",null,e&&e.name?u().createElement(vt.Z,{msgId:e.name}):null)};const Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spatialOperations,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.value;return u().createElement(k.DropdownList,{valueField:"id",className:"geometry-operation-selector",onChange:o,data:r,valueComponent:ht,value:i,itemComponent:ht})};var wt=r(611847),Pt=r(202576);function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.search,n=t.url;return(0,wt.w0)(e,n)||(0,wt.w0)(e,r&&r.url)},Et=function(e){return(e||[]).filter((function(){return"BBOX"!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id}))};function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){Ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ct(e,t,r){var n;return n=function(e,t){if("object"!=St(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==St(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Dt=(0,I.compose)((0,s.connect)((function(e){return{attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:Tt({layers:(0,g.GK)(e),crossLayerFilter:(0,g.qh)(e)},e.queryform.crossLayerFilterOptions||{}),searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName}}),(function(e){return{crossLayerFilterActions:(0,p.DE)({expandCrossLayerFilterPanel:d.EU,setCrossLayerFilterParameter:d.IV,addCrossLayerFilterField:d.N5,updateCrossLayerFilterField:d.bn,removeCrossLayerFilterField:d.Bm,resetCrossLayerFilter:d.F2,toggleMenu:function(e,t){return(0,d.js)(e,t,"crossLayer")}},e)}})),(0,I.withProps)((function(e){var t=e.crossLayerFilterOptions,r=e.crossLayerFilterActions;return Tt(Tt({},t),r)})),bt)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.crossLayerExpanded,n=void 0===r||r,o=t.spatialOperations,i=t.expandCrossLayerFilterPanel,a=void 0===i?function(){}:i,l=t.layers,s=void 0===l?[]:l,c=t.errorObj,p=t.loadingAttributes,f=t.loadingCapabilities,d=t.searchUrl,y=t.queryCollection,b=void 0===y?{}:y,v=t.attributes,g=void 0===v?[]:v,h=t.operation,O=t.updateLogicCombo,w=void 0===O?function(){}:O,P=t.resetCrossLayerFilter,j=void 0===P?function(){}:P,E=t.setOperation,S=void 0===E?function(){}:E,x=t.setQueryCollectionParameter,T=void 0===x?function(){}:x,C=t.addCrossLayerFilterField,D=void 0===C?function(){}:C,I=t.updateCrossLayerFilterField,N=void 0===I?function(){}:I,L=t.removeCrossLayerFilterField,_=void 0===L?function(){}:L,R=t.toggleMenu,q=void 0===R?function(){}:R,k=b.typeName,A=b.geometryName,M=b.filterFields,G=b.groupFields,B=void 0===G?[{id:1,logic:"OR",index:0}]:G,U=s.filter((function(e){return!Ft(d,e)}));return u().createElement(oe.Z,{loading:f,expanded:n&&!f&&!c,error:c,errorMsgId:"queryPanel",buttons:(e=k?[{glyph:"clear-filter",tooltipId:"queryform.crossLayerFilter.clear",onClick:function(){return j()}}]:[],function(e){if(Array.isArray(e))return jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),onSwitch:a,title:u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.title"})},u().createElement(F.X2,{className:"inline-form filter-field-fixed-row"},u().createElement(F.JX,{xs:6},u().createElement("div",null,u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.targetLayer"}),"",s.length&&U.length?u().createElement(Pt.Z,{bsStyle:"link",text:u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.errors.layersExcluded"})}):null)),u().createElement(F.JX,{xs:6},u().createElement(gt.ZP,{clearable:!1,disabled:f||!!c,isLoading:p,options:s.filter((function(e){return Ft(d,e)})).map((function(e){return{label:e.title||e.name,value:e.name}})),placeholder:u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.placeholder"}),filter:"contains",value:k,onChange:function(e){T("typeName",e&&e.value)}}))),k&&A?u().createElement(F.X2,{className:"inline-form filter-field-fixed-row"},u().createElement(F.JX,{xs:6},u().createElement("div",null,u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.operation"}))),u().createElement(F.JX,{xs:6},u().createElement(Ot,{value:h,onChange:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return S(e)},spatialOperations:Et(o)}))):null,k&&A&&h?u().createElement(F.X2,{className:"filter-field-fixed-row"},u().createElement(F.JX,{xs:12},u().createElement(m.Z,{dropUp:!0,autocompleteEnabled:!0,withContainer:!1,attributes:g,groupLevels:-1,filterFields:M,actions:{onUpdateLogicCombo:w,onAddFilterField:D,onUpdateFilterField:N,onRemoveFilterField:_,toggleMenu:q},groupFields:B,filterField:!0}))):null)}));var It=r(399534),Nt=r(461365),Lt=r(461928),_t=r(507848),Rt=r(91812),qt=r(319180),kt=r(469705);function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}var Mt=["DrawSupport","tools"];function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){Ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ut(e,t,r){var n;return n=function(e,t){if("object"!=At(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==At(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zt=(0,s.connect)((function(e){return e.draw||{}}),{onChangeDrawingStatus:h.Yf,onEndDrawing:h.fo,onGeometryChanged:h.Vw,onDrawStopped:h.lo,setCurrentStyle:h.PY}),Zt=r(441609),Vt=r.n(Zt),Wt=r(552259);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}var Ht=["bbox"];function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){$t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $t(e,t,r){var n;return n=function(e,t){if("object"!=Xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Xt(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Kt=(0,I.compose)((0,I.defaultProps)({onMapReady:function(){},baseLayer:{group:"background",id:"mapnik__0",loading:!1,loadingError:!1,name:"mapnik",source:"osm",title:"Open Street Map",type:"osm",visibility:!0}}),(0,I.withPropsOnChange)("baseLayer",(function(e){return{layers:[e.baseLayer]}})),(0,I.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,Wt.Qf)()}})),(0,I.withStateHandlers)((function(){return{initialized:!1}}),{onMapViewChanges:function(){return function(e){return{map:e}}},onLayerLoad:function(e,t){var r=e.map,n=e.initialized,o=t.onMapReady,i=t.baseLayer,a=t.hookRegister,l=t.layer;return function(e){if(!n&&e===i.id){o(r);var t=l.bbox.bounds,u=a.getHook(Wt.TH);return u&&u(t,{crs:l.bbox.crs,maxZoom:21}),{initialized:!0}}return{}}},centerLayer:function(e,t){var r=t.layer;return function(e){if(Vt()(r))return{};var t=(0,Oe.getExtentFromViewport)(r.bbox,r.bbox.crs),n=(0,Wt.vR)(t,r.bbox.crs),o=r.bbox.crs!==(e.projection||"EPSG:3857")?(0,Oe.reprojectBbox)(r.bbox.bounds,r.bbox.crs,e.projection||"EPSG:3857"):r.bbox.extent,i=1;return null!=e&&e.size&&(i=(0,Wt.Of)(o,e.size,0,21)),e.bbox,{map:Jt(Jt({},Yt(e,Ht)),{},{zoom:i,center:n,extent:o,mapStateSource:"mapModal"})}}}}),(0,I.withProps)((function(e){return{layers:e.layers.concat(e.layer||[])}})),(0,I.withPropsOnChange)((function(e,t){var r=e.map,n=void 0===r?{}:r,o=t.map;return!(null!=n&&n.size)&&(null==o?void 0:o.size)}),(function(e){var t=e.centerLayer,r=e.map;return null!=r&&r.size&&t(r),{}})),(0,I.withProps)((function(e){return{eventHandlers:{onLayerLoad:e.onLayerLoad}}})));Kt.displayName="mapEnhancer";const er=Kt;var tr=(0,I.compose)(er,kt.Z,(0,Rt.Z)(0),_t.Z,qt.Z,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;return(0,I.withPropsOnChange)(["plugins"],(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins,r=t.DrawSupport,n=t.tools,o=void 0===n?{}:n,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,Mt);if(!r)return{};var a=e(r);return{plugins:Bt(Bt({},i),{},{tools:Bt(Bt({},o),{},{draw:a})})}}))}())(Lt.Z),rr=function(e){var t=e.map,r=e.mapStateSource,n=e.layer,o=void 0===n?{}:n,i=e.onMapReady,a=void 0===i?function(){}:i;return t?u().createElement(tr,{map:t,mapStateSource:r,onMapReady:a,zoomControl:!0,options:{style:{height:"100%"}},layer:o,tools:["draw"]}):null};rr.propTypes={map:a().object,mapStateSource:a().string,onMapReady:a().bool,layer:a().object};const nr=rr;var or=r(401757),ir=r(95797),ar=(0,s.connect)((0,f.P1)([or.GW,g.By],(function(e,t){return{layer:e,map:t,mapStateSource:"wizardMap"}})),{onMapReady:ir.Xc})(nr);const lr={start:[],attributes:[{id:"attributeFilter",plugin:b,cfg:{},position:1}],afterAttributes:[],spatial:[{id:"spatialFilter",plugin:function(e){var t=e.useEmbeddedMap,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ye);return t?u().createElement(tt,r):u().createElement(et,r)},cfg:{},position:1}],afterSpatial:[],layers:[{id:"crossLayer",plugin:Dt,cfg:{},position:1}],end:[],map:[{id:"spatialFilterMap",plugin:(0,Nt.Z)((function(e){var t=e.container,r=e.useEmbeddedMap,n=e.hideSpatialFilter,o=e.queryPanelEnabled;return r&&!n&&o?u().createElement(It.Z,{container:t},u().createElement("div",{className:"mapstore-query-map"},u().createElement(ar,e))):null})),cfg:{},position:1}]};var ur=r(690825),sr=r(607147),cr=r(640512),pr=r(580416),fr=r(801550),dr=r(893379),yr=r.n(dr),mr=r(949469);yr()(mr.Z,{insert:"head",singleton:!1}),mr.Z.locals;var br=r(472986),vr=r.n(br),gr=r(965539),hr=r(843614),Or=r(38560),wr=r(80717);function Pr(e){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(e)}function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cr(n.key),n)}}function Fr(e,t,r){return t=Sr(t),function(e,t){if(t&&("object"===Pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Er()?Reflect.construct(t,r||[],Sr(e).constructor):t.apply(e,r))}function Er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Er=function(){return!!e})()}function Sr(e){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sr(e)}function xr(e,t){return xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xr(e,t)}function Tr(e,t,r){return(t=Cr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cr(e){var t=function(e,t){if("object"!=Pr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pr(t)?t:t+""}var Dr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tr(r=Fr(this,t,[e]),"getCurrentFilter",(function(){return{featureTypeName:r.props.featureTypeName,groupFields:r.props.groupFields,filterFields:r.props.sendFilters&&r.props.sendFilters.attributeFilter&&r.props.filterFields.filter((function(e){return(0,L.checkOperatorValidity)(e.value,e.operator)}))||[],spatialField:r.props.sendFilters&&r.props.sendFilters.spatialFilter&&r.props.spatialField||{attribute:r.props.spatialField&&r.props.spatialField.attribute},pagination:r.props.pagination,filterType:r.props.filterType,ogcVersion:r.props.ogcVersion,sortOptions:r.props.sortOptions,crossLayerFilter:r.props.sendFilters&&r.props.sendFilters.crossLayerFilter&&(0,L.setupCrossLayerFilterDefaults)(r.props.crossLayerFilter)||null,hits:r.props.hits,filters:r.props.filters}})),Tr(r,"isCurrentFilterChanged",(function(){var e=r.getCurrentFilter(),t={groupFields:e.groupFields,filterFields:e.filterFields,spatialField:e.spatialField,crossLayerFilter:e.crossLayerFilter,filters:e.filters},n=r.props.appliedFilter||{},i={groupFields:n.groupFields,filterFields:n.attributePanelExpanded&&n.filterFields||[],spatialField:n.spatialPanelExpanded&&n.spatialField||{attribute:r.props.spatialField&&r.props.spatialField.attribute},filters:n.filters,crossLayerFilter:n.crossLayerExpanded&&n.crossLayerFilter&&n.crossLayerFilter.operation?(0,L.setupCrossLayerFilterDefaults)(n.crossLayerFilter):null};return!o()(t,i)})),Tr(r,"search",(function(){var e=r.getCurrentFilter();r.props.actions.onQuery(r.props.searchUrl,e,r.props.params),r.props.advancedToolbar&&r.props.actions.storeAppliedFilter()})),Tr(r,"reset",(function(){if(r.props.actions.onChangeDrawingStatus("clean","","queryform",[]),r.props.actions.onReset(),r.props.advancedToolbar){var e={featureTypeName:r.props.featureTypeName,groupFields:[],filterFields:[],spatialField:{attribute:r.props.spatialField&&r.props.spatialField.attribute},pagination:r.props.pagination,filterType:r.props.filterType,ogcVersion:r.props.ogcVersion,sortOptions:r.props.sortOptions,crossLayerFilter:null,hits:r.props.hits};r.props.actions.onQuery(r.props.searchUrl,e,r.props.params),r.props.advancedToolbar&&r.props.actions.storeAppliedFilter()}})),Tr(r,"restorePersistedFilter",(function(){r.props.actions.onRestoreFilter()})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xr(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this,t=this.props.filterFields.filter((function(e){return e.exception})).length>0,r=this.props.allowEmptyFilter&&!this.props.advancedToolbar,n=this.props.filterFields.filter((function(e){return(0,L.checkOperatorValidity)(e.value,e.operator)})).length>0,i=(0,L.isFilterEmpty)(this.props),a=(0,L.isFilterEmpty)(this.props.appliedFilter),l=this.isCurrentFilterChanged(),s=n||this.props.spatialField.geometry||(0,L.isCrossLayerFilterValid)(this.props.crossLayerFilter)||this.props.filters&&this.props.filters.length>0&&this.props.filters.map((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).invalid})).reduce((function(e,t){return e&&t}),!0),c=!o()(this.props.appliedFilter,this.props.storedFilter),p=r||i&&this.props.appliedFilter&&!a,f=t||!this.props.toolbarEnabled||i&&!p||!i&&(!s||!l),d=this.props.emptyFilterWarning&&i&&l,y=this.props.advancedToolbar?"queryform.apply":this.props.queryBtnMsgId,m=[{tooltipId:d?"queryform.emptyfilter":y,disabled:f,noTooltipWhenDisabled:!0,glyph:this.props.advancedToolbar?"ok":this.props.queryBtnGlyph,className:d?"square-button-md showWarning":"square-button-md",id:"query-toolbar-query",onClick:this.search}];if(this.props.advancedToolbar){var b=!c||this.props.loadingError||l,v=!c||!this.props.storedFilter||!this.props.toolbarEnabled,g=!this.props.appliedFilter||this.props.appliedFilter&&a||!this.props.toolbarEnabled;m=m.concat([{tooltipId:"queryform.save",disabled:b,noTooltipWhenDisabled:!0,glyph:"floppy-disk",id:"query-toolbar-save",onClick:this.props.actions.onSaveFilter},{tooltipId:"queryform.discard",disabled:v,noTooltipWhenDisabled:!0,glyph:"undo",id:"query-toolbar-discard",onClick:this.restorePersistedFilter},{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:g,onClick:this.reset}])}else m=[{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:!this.props.toolbarEnabled,onClick:this.reset}].concat(m);return u().createElement("div",{className:"container-fluid query-toolbar"},u().createElement(wr.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md",tooltipPosition:"bottom"},className:"queryFormToolbar row-fluid pull-right",buttons:m}),u().createElement(hr.Z,{show:!!this.props.showGeneratedFilter,bsSize:"large"},u().createElement(hr.Z.Header,null,u().createElement(hr.Z.Title,null,this.props.resultTitle)),u().createElement(hr.Z.Body,null,u().createElement("textarea",{style:{width:"862px",maxWidth:"862px",height:"236px",maxHeight:"236px"}},this.props.showGeneratedFilter)),u().createElement(hr.Z.Footer,null,u().createElement(Or.Z,{style:{float:"right"},onClick:function(){return e.props.actions.onQuery(null,null)}},"Close"))))}}],n&&jr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);Tr(Dr,"propTypes",{filterType:a().string,params:a().object,filterFields:a().array,groupFields:a().array,spatialField:a().object,filters:a().array,sendFilters:a().object,crossLayerFilter:a().object,toolbarEnabled:a().bool,searchUrl:a().string,showGeneratedFilter:a().oneOfType([a().bool,a().string]),featureTypeName:a().string,actions:a().object,ogcVersion:a().string,titleMsgId:a().string,queryBtnMsgId:a().string,resultTitle:a().string,queryBtnGlyph:a().string,pagination:a().object,sortOptions:a().object,hits:a().bool,allowEmptyFilter:a().bool,emptyFilterWarning:a().bool,appliedFilter:a().object,storedFilter:a().object,advancedToolbar:a().bool,loadingError:a().bool}),Tr(Dr,"defaultProps",{sendFilters:{attributeFilter:!0,spatialFilter:!0,crossLayerFilter:!0,filters:!0},filterType:"OGC",params:{},groupFields:[],filterFields:[],spatialField:{},toolbarEnabled:!0,searchUrl:null,showGeneratedFilter:!1,featureTypeName:null,titleMsgId:"queryform.title",queryBtnMsgId:"queryform.query",resultTitle:"Generated Filter",queryBtnGlyph:"search",pagination:null,sortOptions:null,hits:!1,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,actions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){},storeAppliedFilter:function(){}}});const Ir=Dr;function Nr(){return Nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nr.apply(this,arguments)}var Lr=(0,r(617252).Z)((function(e){return u().createElement("div",Nr({className:"square-button pull-right no-border",style:{display:"flex"}},e),u().createElement(F.gG,{glyph:"exclamation-mark",className:"text-danger"}))}));const _r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loadingError,r=e.onToggleQuery,n=void 0===r?function(){}:r,o=e.buttonStyle,i=void 0===o?"default":o;return u().createElement("div",{className:"mapstore-block-width"},u().createElement(Or.Z,{id:"toc-query-close-button",key:"menu-button",className:"square-button no-border",bsStyle:i,onClick:function(){return n()}},u().createElement(F.gG,{glyph:"arrow-left"})),t&&u().createElement(Lr,{popover:{text:u().createElement(vt.Z,{msgId:"queryform.loadingError"})}})||u().createElement("div",{className:"square-button pull-right no-border",style:{display:"flex"}},u().createElement(F.gG,{glyph:"filter",className:"text-primary"})))};var Rr=r(215248),qr=["validations"],kr=["style"];function Ar(e){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(e)}function Mr(){return Mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mr.apply(this,arguments)}function Gr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Br(e){return function(e){if(Array.isArray(e))return Ur(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$r(n.key),n)}}function Zr(e,t,r){return t=Wr(t),function(e,t){if(t&&("object"===Ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vr()?Reflect.construct(t,r||[],Wr(e).constructor):t.apply(e,r))}function Vr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vr=function(){return!!e})()}function Wr(e){return Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wr(e)}function Xr(e,t){return Xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xr(e,t)}function Hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(r),!0).forEach((function(t){Jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jr(e,t,r){return(t=$r(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $r(e){var t=function(e,t){if("object"!=Ar(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ar(t)?t:t+""}var Yr=function(){return null};function Kr(e){return e.plugin?e:Qr(Qr({},e),{},{plugin:Yr})}var en=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Jr(e=Zr(this,t,[].concat(n)),"getItems",(function(t){var r=e.props.selectedLayer,n=e.props.items.filter(e.filterItem(t,r)),o=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(r){return function(e){var t,r,n,o=arguments.length>2?arguments[2]:void 0;return null!==(t=n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find((function(t){return t.target===e.id})))&&void 0!==t&&t.layerNameRegex&&(new RegExp(n.layerNameRegex).test(o)||(n=null)),null!==(r=n)&&void 0!==r?r:e}(r,e,t)})).map(Kr)}(e.props.standardItems[t],e.props.items,r).map((function(e){return Qr(Qr({},e),{},{target:t})}));return[].concat(Br(o),Br(n)).sort((function(e,t){var r,n;return(null!==(r=e.position)&&void 0!==r?r:0)-(null!==(n=t.position)&&void 0!==n?n:0)}))})),Jr(e,"renderItem",(function(t,r){var n,o,i=r.validations,a=Gr(r,qr),l=null!==(n=t.component)&&void 0!==n?n:t.plugin,s=e.props,c=(s.style,Gr(s,kr)),p=e.props[t.id+"Options"];return!0===a["hide".concat((0,Rr.upperFirst)(t.id))]?null:u().createElement(l,Mr({role:"body"},c,t.cfg,a,p,{validation:null==i?void 0:i[null!==(o=t.id)&&void 0!==o?o:t.name]}))})),Jr(e,"renderItems",(function(t,r){return e.getItems(t).map((function(t){return e.renderItem(t,r)}))})),Jr(e,"filterItem",(function(e,t){return function(r){if(r.layerNameRegex){var n=new RegExp(r.layerNameRegex);return(!e||r.target===e)&&n.test(t)}return!e||r.target===e}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(""!==this.props.featureTypeError)return u().createElement("div",null,u().createElement(_r,{onToggleQuery:this.props.controlActions.onToggleQuery}),u().createElement("div",{style:{margin:"0 auto","text-align":"center"}},this.props.featureTypeErrorText));var e=u().createElement("div",{className:"m-header"},this.props.header,u().createElement(Ir,{sendFilters:{attributeFilter:this.props.attributePanelExpanded,spatialFilter:this.props.spatialPanelExpanded,crossLayerFilter:this.props.crossLayerExpanded},filters:this.props.filters,params:this.props.params,filterFields:this.props.filterFields,groupFields:this.props.groupFields,spatialField:this.props.spatialField,toolbarEnabled:this.props.toolbarEnabled,searchUrl:this.props.searchUrl,showGeneratedFilter:this.props.showGeneratedFilter,featureTypeName:this.props.featureTypeName,ogcVersion:this.props.ogcVersion,filterType:this.props.filterType,actions:this.props.queryToolbarActions,resultTitle:this.props.resultTitle,pagination:this.props.pagination,sortOptions:this.props.sortOptions,crossLayerFilter:this.props.crossLayerFilterOptions.crossLayerFilter,hits:this.props.hits,allowEmptyFilter:this.props.allowEmptyFilter,emptyFilterWarning:this.props.emptyFilterWarning,appliedFilter:this.props.appliedFilter,storedFilter:this.props.storedFilter,advancedToolbar:this.props.advancedToolbar,loadingError:this.props.loadingError})),t=this.props,r=t.spatialMethodOptions,n=t.toolsOptions,o=t.spatialOperations;return this.props.attributes.length>0?u().createElement(u().Fragment,null,u().createElement(gr.Z,{header:e,className:"mapstore-query-builder",id:"query-form-panel"},this.renderItems("start",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("attributes",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("afterAttributes",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("spatial",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("afterSpatial",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("layers",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("end",Qr({spatialOperations:o,spatialMethodOptions:r},n))),this.renderItems("map",Qr({spatialOperations:o,spatialMethodOptions:r},n))):u().createElement("div",{className:"spinner-panel",style:{margin:"0 auto",width:"60px"}},u().createElement(vr(),{spinnerName:"three-bounce",overrideSpinnerClassName:"spinner"}))}}])&&zr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);Jr(en,"propTypes",{params:a().object,attributes:a().array,featureTypeError:a().string,featureTypeErrorText:a().node,filterFields:a().array,groupFields:a().array,spatialField:a().object,attributePanelExpanded:a().bool,spatialPanelExpanded:a().bool,crossLayerExpanded:a().bool,toolbarEnabled:a().bool,searchUrl:a().string,showGeneratedFilter:a().oneOfType([a().bool,a().string]),filters:a().array,filterType:a().string,featureTypeName:a().string,ogcVersion:a().string,queryToolbarActions:a().object,resultTitle:a().string,pagination:a().object,sortOptions:a().object,spatialOperations:a().array,spatialMethodOptions:a().array,crossLayerFilterOptions:a().object,hits:a().bool,buttonStyle:a().string,maxHeight:a().number,allowEmptyFilter:a().bool,emptyFilterWarning:a().bool,header:a().node,zoom:a().number,projection:a().string,toolsOptions:a().object,appliedFilter:a().object,storedFilter:a().object,advancedToolbar:a().bool,loadingError:a().bool,controlActions:a().object,standardItems:a().object,items:a().array,selectedLayer:a().oneOfType([a().string,a().bool]),style:a().object}),Jr(en,"defaultProps",{params:{},buttonStyle:"default",removeGroupButtonIcon:"trash",groupFields:[],filterFields:[],filters:[],attributes:[],spatialMethodOptions:[],spatialOperations:[],featureTypeError:"",spatialField:{},crossLayerFilter:null,attributePanelExpanded:!0,spatialPanelExpanded:!0,toolbarEnabled:!0,searchUrl:"",showGeneratedFilter:!1,featureTypeName:null,pagination:null,sortOptions:null,hits:!1,maxHeight:830,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,crossLayerFilterOptions:{},queryToolbarActions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){}},toolsOptions:{},controlActions:{onToggleQuery:function(){}},items:[],selectedLayer:!1,standardItems:{},style:{}});const tn=en;var rn=r(694745),nn=r(410240),on=r.n(nn),an=r(375875),ln=r.n(an),un=r(197395),sn=r(284069),cn=r(737275),pn=r(824260),fn=r(788113);const dn={isAutoCompleteEnabled:function(e,t){return e.ofType(ir.S0).switchMap((function(e){var r=(0,cn.y9)(e.url,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:"gs:PagedUnique"},(0,fn.kS)(t.getState()));return null===r?it().Observable.of((0,d.NV)(!1)):it().Observable.fromPromise(ln().post(r,null,{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(e){return on()(e,"<ows:ExceptionReport")?it().Observable.of((0,d.NV)(!1)):it().Observable.of((0,d.NV)(!0))})).catch((function(){return it().Observable.of((0,d.NV)(!1))}))}))},fetchAutocompleteOptionsEpic:function(e,t){return e.ofType(d.l1,d.nh).debounce((function(e){return it().Observable.timer(e.fieldOptions.delayDebounce||0)})).filter((function(e){return"value"===e.fieldName&&"string"===e.fieldType&&t.getState().queryform.autocompleteEnabled})).switchMap((function(e){var r,n,o,i,a,l,u=t.getState(),s=(0,g.Vx)(u),c={};if(c=e.type===d.nh?(null===(o=u.queryform.crossLayerFilter)||void 0===o||null===(i=o.collectGeometries)||void 0===i||null===(a=i.queryCollection)||void 0===a||null===(l=a.filterFields)||void 0===l?void 0:l.filter((function(t){return t.rowId===e.rowId}))[0])||{}:u.queryform&&u.queryform.filterFields&&u.queryform.filterFields.filter((function(t){return t.rowId===e.rowId}))[0],"selected"===e.fieldOptions.selected)return it().Observable.from([e.type===d.nh?(0,d.ln)(c,[],0):(0,d.$J)(c,[],0)]);var p=(0,sn.getWpsPayload)({attribute:c.attribute,layerName:e.type===d.nh?null===(r=u.queryform.crossLayerFilter)||void 0===r||null===(n=r.collectGeometries)||void 0===n?void 0:n.queryCollection.typeName:(0,pn.HY)(u),layerFilter:(0,g.Vc)(u)||(0,g.hI)(u),maxFeatures:s,startIndex:e.fieldOptions.currentPage?e.fieldOptions.currentPage-1:1*s,value:e.fieldValue}),f=(0,cn.y9)(u.query.url,{outputFormat:"json"},(0,fn.kS)(t.getState()));return null===f?it().Observable.of((0,d.NV)(!1)):it().Observable.fromPromise(ln().post(f,p,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(t){var r=D()(t.values)?t.values:[t.values],n=t.size;return it().Observable.from(e.type===d.nh?[(0,d.ln)(c,r,n),(0,d.js)(e.rowId,!0,"crossLayer")]:[(0,d.$J)(c,r,n),(0,d.js)(e.rowId,!0,"filterField")])})).startWith((0,d.jR)(!0,c,e.type===d.nh?"crossLayer":"filterField")).catch((function(){return it().Observable.from([e.type===d.nh?(0,d.ln)(c,[],0):(0,d.$J)(c,[],0),(0,un.vU)({title:"warning",message:"warning",action:{label:"warning"},autoDismiss:3,position:"tr"}),(0,d.js)(e.rowId,!0,e.type===d.nh?"crossLayer":"filterField")])})).concat([(0,d.jR)(!1,c,e.type===d.nh?"crossLayer":"filterField")])}))}};var yn=r(275982),mn=r(675110);function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}function vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(r),!0).forEach((function(t){hn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hn(e,t,r){var n;return n=function(e,t){if("object"!=bn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==bn(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const On={handleLayerFilterPanel:function(e,t){var r=t.getState;return e.ofType(cr.Xs).switchMap((function(){var t=(0,mn.Iz)(r()),n=t||{},o=n.url,i=n.name,a=n.layerFilter,l=n.fields,u=t&&t.search&&t.search.url;return it().Observable.of((0,ir.gT)(u||o,i,l),(0,d.F)(a),(0,cr.HH)(a),(0,y.Xg)("queryPanel","enabled",!0)).merge(it().Observable.of((0,ir.jG)()).filter((function(){return!nt()(r(),"query.isLayerFilter")})),e.ofType(d.Wm).switchMap((function(e){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=e.spatialField,n=e.filterFields,o=e.filters;return!!(n&&q()(n)||r&&r.method&&r.operation&&r.geometry||t&&t.collectGeometries&&t.operation)||o&&o.length>0}(e.filterObj)?gn({},nt()(r(),"queryform",{})):void 0;return n&&(n.filterFields=n.attributePanelExpanded&&n.filterFields||[],n.spatialField=n.spatialPanelExpanded&&n.spatialField||null,n.crossLayerFilter=n.crossLayerExpanded&&(0,L.setupCrossLayerFilterDefaults)(n.crossLayerFilter)||null),it().Observable.of(function(e,t){return(0,pr.He)(e,{layerFilter:t})}(t.id,n))}))).let(function(e){return function(t){return t.takeUntil(e.ofType(y.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).merge(e.ofType(yn.nk)))}}(e)).concat(it().Observable.from([(0,ir.jG)(),(0,d.mc)(),(0,h.Yf)("clean","","queryform",[],{})]))}))},restoreSavedFilter:function(e,t){var r=t.getState;return e.ofType(cr.H1).switchMap((function(){var e={typeName:nt()(r(),"state.query.typeName")},t=nt()(r(),"state.query.url"),n=nt()(r(),"layerFilter.persisted");return it().Observable.of((0,h.Yf)("clean","","queryform",[]),(0,d.F)(n),(0,d.yC)(t,n,e),(0,ir.Xc)())}))},onApplyFilter:function(e,t){var r=t.getState;return e.ofType(cr.MY).map((function(){var e=gn({},nt()(r(),"queryform",{}));return(0,cr.Xr)(e)}))}};var wn=r(813292),Pn=r.n(wn);const jn={updateSpatialFilterValue:function(e){return e.ofType(d.Wi).switchMap((function(e){var t=e.feature,r=e.srsName,n=e.style,o=e.options;return ot.Observable.of((0,h.Yf)("drawOrEdit",t.geometry.type,"queryform",[t],{editEnabled:!1,stopAfterDrawing:!0,featureProjection:r},n)).concat(t&&o&&o.autoZoom?[(0,fr.Px)(Pn()(t),r)]:[])}))}};var Fn=r(472500),En=r(731255),Sn=r(285148);function xn(e){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(e)}function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){Dn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dn(e,t,r){var n;return n=function(e,t){if("object"!=xn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==xn(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function In(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?In(Object(r),!0).forEach((function(t){Ln(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ln(e,t,r){var n;return n=function(e,t){if("object"!=_n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==_n(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _n(e){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}var Rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{geometry:e.featureTypes[0].properties.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){var r;return{label:null!==(r=w()(t,{name:e.name}))&&void 0!==r?r:e.name,attribute:e.name,type:"geometry",valueId:"id",valueLabel:"name",values:[]}})),original:e,attributes:ct(e,t)}};function qn(e){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(e)}function kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(r),!0).forEach((function(t){Mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mn(e,t,r){var n;return n=function(e,t){if("object"!=qn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==qn(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gn={};var Bn=r(433528);function Un(e){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(e)}function zn(e,t,r){var n;return n=function(e,t){if("object"!=Un(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Un(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vn={featureTypes:{},data:{},result:null,resultError:null,syncWmsFilter:!1,isLayerFilter:!1};var Wn=r(392411),Xn=r(819412),Hn=r.n(Xn),Qn=r(294707),Jn=r.n(Qn),$n=r(761868),Yn=["attribute"];function Kn(e){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(e)}function eo(e){return function(e){if(Array.isArray(e))return to(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return to(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?to(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){oo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oo(e,t,r){var n;return n=function(e,t){if("object"!=Kn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Kn(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var io={searchUrl:null,featureTypeConfigUrl:null,showGeneratedFilter:!1,attributePanelExpanded:!0,spatialPanelExpanded:!0,crossLayerExpanded:!0,showDetailsPanel:!1,groupLevels:5,useMapProjection:!1,toolbarEnabled:!0,groupFields:[{id:1,logic:"OR",index:0}],maxFeaturesWPS:5,filterFields:[],spatialField:{method:null,attribute:"the_geom",operation:"INTERSECTS",geometry:null},simpleFilterFields:[],map:null},ao=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=he()({},e,oo(oo({},t.fieldName,t.fieldValue),"type",t.fieldType),{fieldOptions:he()({},no({},e.fieldOptions),{currentPage:void 0===t.fieldOptions.currentPage?1:t.fieldOptions.currentPage})});return"attribute"===t.fieldName&&(r.value="string"===t.fieldType?"":null,r.operator="="),"operator"===t.fieldName&&(r.value=null),r};var lo=r(367306),uo=r(55105),so=r(624262),co=r(481756);function po(e){return po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},po(e)}function fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wo(n.key),n)}}function yo(e,t,r){return t=bo(t),function(e,t){if(t&&("object"===po(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mo()?Reflect.construct(t,r||[],bo(e).constructor):t.apply(e,r))}function mo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mo=function(){return!!e})()}function bo(e){return bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bo(e)}function vo(e,t){return vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vo(e,t)}function go(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ho(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?go(Object(r),!0).forEach((function(t){Oo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):go(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oo(e,t,r){return(t=wo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wo(e){var t=function(e,t){if("object"!=po(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=po(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==po(t)?t:t+""}var Po=d.mc.bind(null,"query"),jo=(0,s.connect)((function(e){return{useMapProjection:e.queryform.useMapProjection,groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,featureTypeError:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].error,spatialField:e.queryform.spatialField,filters:e.queryform.filters,showDetailsPanel:e.queryform.showDetailsPanel,toolbarEnabled:e.queryform.toolbarEnabled,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:ho({layers:(0,g.GK)(e),crossLayerFilter:(0,g.qh)(e)},e.queryform.crossLayerFilterOptions||{}),maxFeaturesWPS:e.queryform.maxFeaturesWPS,spatialPanelExpanded:e.queryform.spatialPanelExpanded,featureTypeConfigUrl:e.query&&e.query.url,searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName,ogcVersion:"1.1.0",params:{typeName:e.query&&e.query.typeName},resultTitle:"Query Result",showGeneratedFilter:!1,allowEmptyFilter:!0,emptyFilterWarning:!0,maxHeight:e.map&&e.map.present&&e.map.present.size&&e.map.present.size.height,zoom:((0,v.Od)(e)||{}).zoom,projection:((0,v.Od)(e)||{}).projection}}),(function(e){return{attributeFilterActions:(0,p.DE)({onAddGroupField:d.kQ,onAddFilterField:d.jW,onRemoveFilterField:d.JG,onUpdateFilterField:d.q$,onUpdateExceptionField:d.OZ,onUpdateLogicCombo:d.Nc,onRemoveGroupField:d.I5,onChangeCascadingValue:d.QL,toggleMenu:d.js,onExpandAttributeFilterPanel:d.I},e),spatialFilterActions:(0,p.DE)({onChangeSpatialFilterValue:d.uo,onExpandSpatialFilterPanel:d.ku,onSelectSpatialMethod:d.HT,onSelectViewportSpatialMethod:d.lg,onSelectSpatialOperation:d.VF,onChangeDrawingStatus:h.Yf,onRemoveSpatialSelection:d.Ry,onShowSpatialSelectionDetails:d.ZH,onChangeDwithinValue:d.AQ,zoneFilter:d.eJ,zoneSearch:d.uM,zoneChange:d.uP},e),queryToolbarActions:(0,p.DE)({onQuery:d.yC,onReset:Po,onSaveFilter:cr.no,onRestoreFilter:cr.Nd,storeAppliedFilter:cr.Rb,onChangeDrawingStatus:h.Yf},e),crossLayerFilterActions:(0,p.DE)({expandCrossLayerFilterPanel:d.EU,setCrossLayerFilterParameter:d.IV,addCrossLayerFilterField:d.N5,updateCrossLayerFilterField:d.bn,removeCrossLayerFilterField:d.Bm,resetCrossLayerFilter:d.F2,toggleMenu:function(e,t){return(0,d.js)(e,t,"crossLayer")}},e),controlActions:(0,p.DE)({onToggleQuery:y.Xi.bind(null,"queryPanel",null)},e)}}))(tn),Fo=(0,f.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},mn.Bt,function(e){return e.layers&&e.layers.settings},sr._d,function(e){return(0,uo.ic)(e,{height:!0})},lo.Wy,g.Vc,g.hI,function(e){return e&&e.query&&e.query.isLayerFilter},mn.P_,pn.HY],(function(e,t,r,n,o,i,a,l,u,s,c){return{enabled:e,groups:t,settings:r,queryPanelEnabled:n,layout:i?{}:o,appliedFilter:a,storedFilter:l,advancedToolbar:u,loadingError:s,selectedLayer:c}})),Eo=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oo(r=yo(this,t,[e]),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),Oo(r,"renderSidebar",(function(){return u().createElement(c.Z,{open:r.props.queryPanelEnabled,sidebar:r.renderQueryPanel(),sidebarClassName:"query-form-panel-container",touch:!1,rootClassName:"query-form-root",styles:{sidebar:ho(ho({},r.props.layout),{},{zIndex:1044,width:600}),overlay:{zIndex:1023,width:0},root:{right:r.props.queryPanelEnabled?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}}},u().createElement("div",null))})),Oo(r,"onToggle",(function(){r.props.advancedToolbar&&!o()(r.props.appliedFilter,r.props.storedFilter)?r.setState((function(){return{showModal:!0}})):r.props.onToggleQuery()})),Oo(r,"restoreAndClose",(function(){r.setState((function(){return{showModal:!1}})),r.props.onRestoreFilter(),r.props.onToggleQuery()})),Oo(r,"storeAndClose",(function(){r.setState((function(){return{showModal:!1}})),r.props.onSaveFilter(),r.props.onToggleQuery()})),Oo(r,"renderQueryPanel",(function(){return u().createElement("div",{className:"mapstore-query-builder"},u().createElement(jo,{queryPanelEnabled:r.props.queryPanelEnabled,header:u().createElement(_r,{loadingError:r.props.loadingError,onToggleQuery:r.onToggle}),spatialOperations:r.props.spatialOperations,spatialMethodOptions:r.props.spatialMethodOptions,toolsOptions:r.props.toolsOptions,featureTypeErrorText:u().createElement(co.Z,{msgId:"layerProperties.featureTypeError"}),appliedFilter:r.props.appliedFilter,storedFilter:r.props.storedFilter,advancedToolbar:r.props.advancedToolbar,loadingError:r.props.loadingError,items:r.props.items,selectedLayer:r.props.selectedLayer,standardItems:lr}),u().createElement(It.Z,null,u().createElement(rn.Z,{fade:!0,show:r.state.showModal,title:u().createElement(co.Z,{msgId:"queryform.changedFilter"}),size:"xs",onClose:function(){return r.setState((function(){return{showModal:!1}}))},buttons:[{bsStyle:"primary",text:u().createElement(co.Z,{msgId:"yes"}),onClick:r.storeAndClose},{bsStyle:"primary",text:u().createElement(co.Z,{msgId:"no"}),onClick:r.restoreAndClose}]},u().createElement("div",{className:"ms-alert"},u().createElement("div",{className:"ms-alert-center"},u().createElement(co.Z,{msgId:r.props.loadingError?"queryform.changedFilterWithErrorAlert":"queryform.changedFilterAlert"}))))))})),r.state={showModal:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vo(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.toolsOptions.useEmbeddedMap||!0!==e.queryPanelEnabled||!1!==this.props.queryPanelEnabled||this.props.onInit()}},{key:"render",value:function(){return this.renderSidebar()}}])&&fo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);Oo(Eo,"propTypes",{advancedToolbar:a().bool,appliedFilter:a().object,items:a().array,layout:a().object,loadingError:a().bool,onInit:a().func,onRestoreFilter:a().func,onSaveFilter:a().func,onToggleQuery:a().func,queryPanelEnabled:a().bool,selectedLayer:a().oneOfType([a().string,a().bool]),spatialMethodOptions:a().array,spatialOperations:a().array,storedFilter:a().object,toolsOptions:a().object}),Oo(Eo,"defaultProps",{groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onInit:function(){},updateNode:function(){},removeNode:function(){},activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateRemoveLayer:!0,visibilityCheckType:"checkbox",settingsOptions:{},queryPanelEnabled:!1,layout:{},toolsOptions:{},onSaveFilter:function(){},onRestoreFilter:function(){},items:[],selectedLayer:!1});const So={QueryPanelPlugin:(0,s.connect)(Fo,{groupPropertiesChangeHandler:pr.WO,layerPropertiesChangeHandler:pr.He,retrieveLayerData:ur.k,onToggleGroup:(0,so.$0)("groups",pr.bh),onToggleLayer:(0,so.$0)("layers",pr.bh),onToggleQuery:y.Xi.bind(null,"queryPanel",null),onSort:(0,so.dD)(so.lD,pr.MK),onSettings:pr.RP,onInit:ir.Xc,onZoomToExtent:fr.Px,hideSettings:pr.sF,updateSettings:pr.VP,updateNode:pr.tV,removeNode:pr.ZF,onSaveFilter:cr.no,onRestoreFilter:cr.Nd})(Eo),reducers:{draw:Wn.Z,queryform:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:io,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case d.ZC:return no(no({},t),{},{map:r.mapData});case d.Wm:return no(no({},t),{},{map:null});case d.E6:var n={rowId:(new Date).getTime(),groupId:r.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};return he()({},t,{filterFields:t.filterFields?[].concat(eo(t.filterFields),[n]):[n]});case d.vo:return he()({},t,{filterFields:t.filterFields.filter((function(e){return e.rowId!==r.rowId}))});case d.l1:return he()({},t,{filterFields:t.filterFields.map((function(e){return e.rowId===r.rowId?ao(e,r):e}))});case d.o7:return he()({},t,{filterFields:t.filterFields.map((function(e){return e.rowId===r.filterField.rowId?he()({},e,{options:he()({},no({},e.options),oo({},e.attribute,r.options))},{fieldOptions:he()({},no({},e.fieldOptions),{valuesCount:r.valuesCount})}):e}))});case d.Sm:return"filterField"===r.layerFilterType?he()({},t,{filterFields:t.filterFields.map((function(e){return e.rowId===r.rowId?he()({},e,{openAutocompleteMenu:r.status}):e}))}):(0,$n.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(nt()(t,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===r.rowId?no(no({},e),{},{openAutocompleteMenu:r.status}):e})),t);case d.D6:return he()({},t,{autocompleteEnabled:r.status});case d.Nr:return"filterField"===r.layerFilterType?he()({},t,{filterFields:t.filterFields.map((function(e){return e.rowId===r.filterField.rowId?he()({},e,{loading:r.status}):e}))}):(0,$n.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(nt()(t,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===r.filterField.rowId?no(no({},e),{},{loading:r.status}):e})),t);case d.J9:return he()({},t,{filterFields:t.filterFields.map((function(e){return e.rowId===r.rowId?he()({},e,{exception:r.exceptionMessage}):e}))});case d.U:var o={id:(new Date).getTime(),logic:"OR",groupId:r.groupId,index:r.index+1};return he()({},t,{groupFields:t.groupFields?[].concat(eo(t.groupFields),[o]):[o]});case d.z8:return he()({},t,{groupFields:t.groupFields.map((function(e){return e.id===r.groupId?he()({},e,{logic:r.logic}):e}))});case d.ql:return he()({},t,{filterFields:t.filterFields.filter((function(e){return e.groupId!==r.groupId})),groupFields:t.groupFields.filter((function(e){return e.id!==r.groupId}))});case d.O_:return he()({},t,{filterFields:t.filterFields.map((function(e){for(var t=0;t<r.attributes.length;t++)if(e.attribute===r.attributes[t].id)return he()({},e,{value:null});return e}))});case d.M$:return he()({},t,{attributePanelExpanded:r.expand});case d.Ug:return he()({},t,{spatialPanelExpanded:r.expand});case d.p5:return he()({},t,{crossLayerExpanded:r.expand});case d.Fz:return he()({},t,{crossLayerFilter:(0,$n.t8)(r.key,r.value,t.crossLayerFilter)});case d.Gf:return(0,$n.vy)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:r.rowId,groupId:r.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null},{rowId:r.rowId},t);case d.nh:return(0,$n.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(nt()(t,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===r.rowId?ao(e,r):e})),t);case d.Rf:return(0,$n.z6)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:r.rowId},t);case d.WZ:return he()({},t,{crossLayerFilter:{attribute:t.crossLayerFilter&&t.crossLayerFilter.attribute}});case d.Xp:return(0,$n.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(nt()(t,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===r.filterField.rowId?no(no({},e),{},{options:no(no({},e.options),{},oo({},e.attribute,r.options)),fieldOptions:no(no({},e.fieldOptions),{},{valuesCount:r.valuesCount})}):e})),t);case d.bP:return he()({},t,{spatialField:he()({},t.spatialField,oo(oo({},r.fieldName,r.method),"geometry",null))});case d.d_:return he()({},t,{spatialField:he()({},t.spatialField,{geometry:r.geometry})},{toolbarEnabled:!0});case d.xM:return he()({},t,{spatialField:he()({},t.spatialField,oo({},r.fieldName,r.operation))});case d.bl:return he()({},t,{spatialField:he()({},t.spatialField,{attribute:r.attribute}),crossLayerFilter:he()({},t.crossLayerFilter,{attribute:r.attribute})});case h.hZ:return"queryform"===r.owner&&"start"===r.status?he()({},t,{toolbarEnabled:!1}):t;case d.Wi:return he()({},t,{toolbarEnabled:!0,spatialField:he()({},t.spatialField,{value:r.value,collectGeometries:r.collectGeometries,geometry:r.srsName?no(no({},r.geometry),{},{projection:r.srsName}):r.geometry})});case h.pb:return"queryform"===r.owner?he()({},t,{toolbarEnabled:!0,spatialField:he()({},t.spatialField,{collectGeometries:r.collectGeometries,geometry:r.geometry})}):t;case d.PN:var i=he()({},io.spatialField,{attribute:t.spatialField.attribute,value:void 0});return he()({},t,{spatialField:he()({},t.spatialField,i)});case d._M:return he()({},t,{showDetailsPanel:r.show});case d.Eg:var a=he()({},io.spatialField,{attribute:t.spatialField.attribute,value:void 0}),l={attribute:t.crossLayerFilter&&t.crossLayerFilter.attribute};return he()({},t,io,{spatialField:a,crossLayerFilter:l,filters:[],map:t.map});case d.V1:return he()({},t,{showGeneratedFilter:r.data});case d.cY:return he()({},t,{spatialField:he()({},t.spatialField,{geometry:he()({},t.spatialField.geometry,{distance:r.distance})})});case d.co:return he()({},t,{spatialField:he()({},t.spatialField,{zoneFields:t.spatialField.zoneFields.map((function(e){return e.id===r.id&&r.data.features&&r.data.features.length>0?he()({},e,{values:r.data.features,open:!0,error:null}):e}))})});case d.RD:return he()({},t,{spatialField:he()({},t.spatialField,{zoneFields:t.spatialField.zoneFields.map((function(e){return e.id===r.id?he()({},e,{busy:r.active}):e}))})});case d.uY:var u,s,c=t.spatialField.zoneFields.map((function(e){if(e.id===r.id){if(u=e.multivalue?r.value.value:r.value.value[0],r.value.feature[0]){var t=r.value.feature[0],n=t.geometry_name;if(e.multivalue&&r.value.feature.length>1){for(var o=1;o<r.value.feature.length;o++){var i=r.value.feature[o];i&&(t=Hn()(t,i))}s={coordinates:t.geometry.coordinates,geometryName:n,geometryType:t.geometry.type}}else s={coordinates:t.geometry.coordinates,geometryName:n,geometryType:t.geometry.type}}return he()({},e,{value:u,open:!1,geometryName:s?s.geometryName:null})}return e.dependson&&r.id===e.dependson.id?he()({},e,{disabled:!1,values:null,value:null,open:!1,dependson:he()({},e.dependson,{value:u})}):e})),p=Jn()({type:"FeatureCollection",features:r.value.feature});return he()({},t,{spatialField:he()({},t.spatialField,{zoneFields:c,geometry:p&&s?{extent:p,type:s.geometryType,coordinates:s.coordinates}:null})});case d.H8:return he()({},t,{spatialField:he()({},t.spatialField,{zoneFields:t.spatialField.zoneFields.map((function(e){var t=he()({},e,{values:null,value:null,open:!1,error:null});return e.dependson?he()({},t,{disabled:!0,open:!1,value:null,dependson:he()({},e.dependson,{value:null})}):t})),geometry:null})});case d.Hl:var f;return he()({},t,{spatialField:he()({},t.spatialField,{zoneFields:t.spatialField.zoneFields.map((function(e){return e.id===r.id?(f="object"!==Kn(r.error)?r.error.status&&r.error.statusText&&r.error.data?{status:r.error.status,statusText:r.error.statusText,data:r.error.data}:{message:r.error.message||"unknown error"}:r.error,he()({},e,{error:f,busy:!1})):e}))})});case d.je:var y=t.simpleFilterFields.reduce((function(e,t){return t.fieldId===r.id?e.push(no(no({},t),r.properties)):e.push(t),e}),[]);return no(no({},t),{},{simpleFilterFields:y});case d.qu:var m,b=(null!==(m=t.filters)&&void 0!==m?m:[]).reduce((function(e,t){var n=r.filters.find((function(e){return e.id===t.id}));return n?e.push(n):e.push(t),e}),[]);return r.filters.forEach((function(e){b.find((function(t){return t.id===e.id}))||b.push(e)})),no(no({},t),{},{filters:b});case d.LY:var v,g=(null!==(v=t.filters)&&void 0!==v?v:[]).reduce((function(e,t){return r.filters.find((function(e){return e.id===t.id}))||e.push(t),e}),[]);return no(no({},t),{},{filters:g});case d.go:var O=r.properties.fieldId?r.properties:no(no({},r.properties),{},{fieldId:(new Date).getTime()}),w=t.simpleFilterFields?[].concat(eo(t.simpleFilterFields),[O]):[O];return no(no({},t),{},{simpleFilterFields:w});case d._8:return no(no({},t),{},{simpleFilterFields:t.simpleFilterFields.filter((function(e){return e.fieldId!==r.id}))});case d.xd:return no(no({},t),{},{simpleFilterFields:[]});case d.Ef:var P=io.spatialField,j=(P.attribute,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(P,Yn)),F=he()({},io,{spatialField:no({},j)}),E=r.filter||F,S=E.spatialField,x=E.filterFields,T=E.groupFields,C=E.crossLayerFilter,D=E.attributePanelExpanded,I=E.spatialPanelExpanded,N=E.filters;return no(no({},t),{attributePanelExpanded:D,spatialPanelExpanded:I,crossLayerExpanded:(null==r||null===(e=r.filter)||void 0===e?void 0:e.crossLayerExpanded)||F.crossLayerExpanded,spatialField:no(no({},S),{},{attribute:S&&S.attribute||t.spatialField&&t.spatialField.attribute}),filters:null!=N?N:[],filterFields:x,groupFields:T,crossLayerFilter:no(no({},C),{},{attribute:C&&C.attribute||t.crossLayerFilter&&t.crossLayerFilter.attribute})});default:return t}},query:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case ir.S0:return he()({},t,{typeName:r.typeName,url:r.url});case ir.u7:return he()({},t,{featureTypes:he()({},t.featureTypes,zn({},r.typeName,r.featureType))});case ir.lN:return he()({},t,{featureTypes:he()({},t.featureTypes,zn({},r.typeName,{error:r.error}))});case ir.yz:return he()({},t,{featureLoading:r.isLoading});case ir.lj:return he()({},t,{featureLoading:!1,data:he()({},t.data,zn({},r.typeName,(e=r.feature,["STATE_NAME","STATE_ABBR","SUB_REGION","STATE_FIPS"].map((function(t){return{attribute:t,values:e.features.reduce((function(e,r){return-1===e.indexOf(r.properties[t])?[].concat((n=e,function(e){if(Array.isArray(e))return Zn(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return Zn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zn(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r.properties[t]]).sort():e;var n}),[])}})).reduce((function(e,t){return he()(e,zn({},t.attribute,t.values.map((function(e){return{id:e,name:e}}))))}),{}))))});case ir.zW:return he()({},t,{featureLoading:!1,featureTypes:he()({},t.data,zn({},r.typeName,{error:r.error}))});case ir.Yx:return he()({},t,{isNew:!0,searchUrl:r.searchUrl,filterObj:r.filterObj});case ir.VN:return he()({},t,{filterObj:he()({},t.filterObj,r.updates)});case ir.Hu:return he()({},t,{isNew:!1,result:r.result,searchUrl:r.searchUrl,filterObj:r.filterObj,resultError:null});case ir.VT:return he()({},t,{isNew:!1,result:null,resultError:r.error});case y.l:case d.Eg:return r.skip&&r.skip.indexOf("query")>=0?t:he()({},t,{isNew:!1,result:null,filterObj:null,searchUrl:null,filters:null});case ir.RD:return he()({},t,{result:null,resultError:null});case ir._T:return he()({},t,{syncWmsFilter:!t.syncWmsFilter});case Bn.WB:return he()({},t,{syncWmsFilter:r.syncWmsFilter});case ir.vO:return he()({},t,{isLayerFilter:!t.isLayerFilter});default:return t}},layerFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cr.y6:return An(An({},Gn),{},{persisted:t.filter,applied:t.filter});case cr.H1:return An(An({},e),{},{applied:e.persisted});case cr.g$:return An(An({},e),{},{applied:t.filter});case cr.Xk:return An(An({},e),{},{persisted:e.applied});case d.Eg:return An(An({},e),{},{applied:void 0});default:return e}}},epics:ho(ho(ho({featureTypeSelectedEpic:function(e,t){return e.ofType(ir.S0).filter((function(e){return e.url&&e.typeName})).switchMap((function(e){var r=t.getState();if((0,pn.hk)(r,e.typeName)){var n=Rn((0,pn.qj)(r,e.typeName),e.fields),o=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom";return it().Observable.of((0,ir.rG)(e.typeName,n,e.owner),(0,d.DD)(o),it().Scheduler.async)}var i=(0,En.Li)(r);return i&&"vector"===i.type?it().Observable.defer((function(){return ln().get(e.url)})).map((function(t){var r={featureTypes:[t.data.featureTypes[0]]},n={geometry:r.featureTypes[0].properties.filter((function(e){return 0===e.name.indexOf("geometry")})).map((function(e){return e})),original:r,attributes:ct(r,e.fields)},o=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom",i=new Promise((function(e){e((0,d.DD)(o))})).then((function(){return new Promise((function(t){t((0,ir.rG)(e.typeName,n))}))}));return it().Observable.defer((function(){return i}))})).mergeAll():it().Observable.defer((function(){return ln().get(cn.ZP.filterUrlParams(e.url,(0,fn.kS)(t.getState()))+"?service=WFS&version=1.1.0&request=DescribeFeatureType&typeName="+e.typeName+"&outputFormat=application/json")})).map((function(t){if("object"===_n(t.data)&&t.data.featureTypes&&t.data.featureTypes[0]){var r=Rn(t.data,e.fields),n=r.geometry[0]&&r.geometry[0].attribute?r.geometry[0].attribute:"the_geom";return it().Observable.from([(0,d.DD)(n),(0,ir.rG)(e.typeName,r)])}try{JSON.parse(t.data)}catch(t){return it().Observable.from([(0,ir.t3)(e.typeName,"Error from WFS: "+t.message),un.vU({title:"warning",message:"layerProperties.featureTypeErrorInvalidJSON",autoDismiss:3,position:"tc"})])}return it().Observable.from([(0,ir.t3)(e.typeName,"Error: feature types are empty")])})).mergeAll().catch((function(t){return it().Observable.of((0,ir.t3)(e.typeName,t.message||t.statusText))}))}))},wfsQueryEpic:function(e,t){return e.ofType(ir.Qq).switchMap((function(r){var n,o,i,a,l=(i=(a=t.getState()).query&&a.query.featureTypes&&a.query.featureTypes[a.query.typeName]&&a.query.featureTypes[a.query.typeName].attributes&&a.query.featureTypes[a.query.typeName].attributes[0]&&a.query.featureTypes[a.query.typeName].attributes[0].attribute||null)?{sortBy:i,sortOrder:"A"}:{},u=(null==r||null===(n=r.filterObj)||void 0===n?void 0:n.sortOptions)||l,s=pn.b0.totalFeatures(t.getState()),c=cn.ZP.filterUrlParams(r.searchUrl,(0,fn.kS)(t.getState())),p=(0,En.Li)(t.getState()),f=(0,En.lg)(t.getState()),d=null!=p?p:{},y=d.layerFilter,m=d.params,b=void 0===m?{}:m,v=null==b?void 0:b[w()(Object.keys(b||{}),(function(){return"cql_filter"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()}))],g="vector"===(null==p?void 0:p.type)?r.filterObj:(0,L.mergeFiltersToOGC)({ogcVersion:"1.1.0"},v,f?y:null,r.filterObj),h=function(e,t,r){var n=(0,En.u$)(r),o=(0,Sn.jo)({id:n},"time")(r),i=(0,mn.CA)(r,n)||{},a=nt()(i,'params["time"]');if((0,En.DK)(r)&&o&&a){var l=(0,Fn.parse)(e)||{};return{url:(0,Fn.format)(Cn(Cn({},l),{},{query:Cn(Cn({},l.query),{},{time:a})})),options:t}}return{url:e,options:t}}(c,r.queryOptions||{},t.getState()),O=h.url,P=h.options,j=Nn(Nn(Nn({},r.filterObj.pagination),{},{totalFeatures:s,sortOptions:u},P),{},{layer:p});return it().Observable.merge((0,at.Mc)(Nn(Nn({},p),{},{name:r.filterObj.featureTypeName||(null==p?void 0:p.name),search:Nn(Nn({},null!==(o=null==p?void 0:p.search)&&void 0!==o?o:{}),{},{url:O})}),g,j).map((function(e){return(0,ir.w_)(e,r.searchUrl,r.filterObj,r.queryOptions,r.reason)})).catch((function(e){return it().Observable.of((0,ir.Lm)(e))})).startWith((0,ir.Fs)(!0)).concat(it().Observable.of((0,ir.Fs)(!1)),it().Observable.of((0,pr.kI)(null==p?void 0:p.id)))).takeUntil(e.ofType(ir.VN))}))},viewportSelectedEpic:function(e,t){return e.ofType(d.On,fr.pP).switchMap((function(e){var r=e.type===fr.pP?e:(0,v.Od)(t.getState());if((e.type===d.On||e.type===fr.pP&&"Viewport"===(0,g.BU)(t.getState()))&&r.bbox&&r.bbox.bounds&&r.bbox.crs){var n=Object.keys(r.bbox.bounds).reduce((function(e,t){return he()({},e,Ln({},t,parseFloat(r.bbox.bounds[t])))}),{});return it().Observable.of((0,d.ds)(Oe.default.getViewportGeometry(n,r.bbox.crs)))}return it().Observable.empty()}))},redrawSpatialFilterEpic:function(e,t){return e.ofType(ir.R1).switchMap((function(){var e=t.getState(),r=(0,g.vE)(e),n={type:"Feature",geometry:{type:(0,g.a8)(e),coordinates:(0,g.G$)(e)}},o=(0,g.Nl)(e)?(0,h.Yf)("drawOrEdit",r.method||"","queryform",[n],{featureProjection:(0,g.IM)(e),drawEnabled:!1,editEnabled:!1}):(0,h.Yf)("clean",r.method||"","queryform",[],{drawEnabled:!1,editEnabled:!1});return it().Observable.of(o)}))}},dn),jn),On)}},392411:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(604206),o=r(727418),i=r.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){var n;return n=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==a(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={drawStatus:null,drawOwner:null,drawMethod:null,options:{},features:[],tempFeatures:[],snapping:!1,snappingIsLoading:!1,snappingLayer:!1},p={edge:!0,vertex:!0,pixelTolerance:10,strategy:"bbox"};const f=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case n.hZ:return i()({},r,{drawStatus:o.status,drawOwner:o.owner,drawMethod:o.method,options:o.options,features:o.features,style:o.style});case n.kD:return i()({},r,{currentStyle:o.currentStyle});case n.DI:return i()({},r,{tempFeatures:o.features});case n.IC:return i()({},r,{tempFeatures:[]});case n.G_:return u(u({},r),{},{snapping:!r.snapping});case n.uB:return u(u({},r),{},{snappingLayer:o.snappingLayer,snappingIsLoading:!1});case n.Rh:return u(u({},r),{},{snappingIsLoading:!r.snappingIsLoading});case n.vU:return u(u({},r),{},{snapConfig:u(u(u({},u(u({},p),(null===(e=o.pluginCfg)||void 0===e?void 0:e.snapConfig)||{})),null!==(t=null==r?void 0:r.snapConfig)&&void 0!==t?t:{}),o.prop&&void 0!==o.value?s({},o.prop,o.value):{})});default:return r}}},788113:(e,t,r)=>{"use strict";r.d(t,{b6:()=>f,PG:()=>d,_x:()=>y,Mm:()=>m,dP:()=>b,SX:()=>v,ZL:()=>g,_S:()=>h,iH:()=>O,R7:()=>w,Q7:()=>P,n7:()=>j,bA:()=>F,hm:()=>E,E2:()=>S,Cb:()=>x,eK:()=>T,Im:()=>C,e8:()=>D,JF:()=>I,kS:()=>N,y:()=>L,l2:()=>_,HN:()=>R,BM:()=>q,O8:()=>k,am:()=>A,LV:()=>M,CK:()=>G,jU:()=>B,Qg:()=>U,$c:()=>z});var n=r(22222),o=r(227361),i=r.n(o),a=r(800827),l=r(577215),u=r(274621);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==s(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(e){return i()(e,"catalog.services")},d=(0,n.P1)((function(e){return i()(e,"catalog.default.staticServices")}),f,(function(e,t){var r=null==e?void 0:e.default_map_backgrounds;return r?(r.readOnly=!0,p(p({},t),{},{default_map_backgrounds:r})):t})),y=function(e){return i()(e,"catalog.default.tileSizes",[256,512])},m=function(e){return i()(e,"controls.metadataexplorer.group")},b=function(e){return i()(e,"catalog.saving")},v=function(e){return i()(e,"catalog.result")},g=function(e){return i()(e,"catalog.openCatalogServiceList")},h=function(e){return i()(e,"catalog.newService")},O=function(e){return i()(e,"catalog.newService.type","csw")},w=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"]'))},P=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].type'),function(e){return i()(e,'catalog.default.staticServices["'.concat(i()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},j=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].layerOptions'),{})},F=function(e){return i()(e,"catalog.searchOptions")},E=function(e){return i()(e,"catalog.loadingError")},S=function(e){return i()(e,"catalog.loading",!1)},x=function(e){return i()(e,"catalog.selectedService")},T=function(e){return i()(e,"catalog.mode","view")},C=function(e){return i()(e,"catalog.layerError")},D=function(e){return i()(e,"catalog.searchOptions.text","")},I=function(e){return"metadataexplorer"===i()(e,"controls.toolbar.active")||i()(e,"controls.metadataexplorer.enabled")},N=function(e){return(i()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},L=function(e){return i()(e,"catalog.pageSize",4)},_=function(e){return i()(e,"catalog.delayAutoSearch",1e3)},R=(0,n.zB)({projection:a.uy}),q=function(e){return i()(e,"catalog.formatsLoading",!1)},k=function(e){return i()(e,"catalog.newService.supportedFormats.imageFormats",[])},A=function(e){var t,r;return"edit"===T(e)?k(e):(null===(t=w(e))||void 0===t||null===(r=t.supportedFormats)||void 0===r?void 0:r.imageFormats)||[]},M=function(e){return i()(e,"catalog.newService.supportedFormats.infoFormats",(0,l.oL)())},G=function(e){return i()(e,"catalog.newService.formatUrlUsed","")},B=function(e){return i()(e,"catalog.isNewServiceAdded",!1)},U=function(e){return i()(e,"catalog.showFormatError",!1)},z=function(e){var t=function(e){return i()(e,"catalog.editingAllowedRoles",[])}(e),r=function(e){return i()(e,"catalog.editingAllowedGroups",[])}(e);return(0,u.tv)({allowedRoles:t,allowedGroups:r})(e)}},401757:(e,t,r)=>{"use strict";r.d(t,{E2:()=>w,YI:()=>F,JT:()=>E,GW:()=>S,TK:()=>x,zm:()=>T,lF:()=>C,Jb:()=>D,E5:()=>I,YR:()=>N,jx:()=>R,zA:()=>q,r0:()=>k,xI:()=>A,ie:()=>M,p:()=>G,yZ:()=>B,hF:()=>U,Xu:()=>z,nA:()=>Z,Wo:()=>V,um:()=>W,h9:()=>X,md:()=>H,Nx:()=>Q,f0:()=>J}),r(313311);var n=r(227361),o=r.n(n),i=r(984596),a=r.n(i),l=r(385564),u=r.n(l),s=r(800827),c=r(675110),p=r(324684),f=r(557579),d=r(246781),y=r(367306),m=r(22222),b=r(784715);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){var n;return n=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==v(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(196958);var w=function(e){return o()(e,"widgets.builder.settings")},P=function(e){return o()(e,"widgets.dependencies")||{}},j=function(e){return Object.keys(P(e)).map((function(t){return P(e)[t]}))},F=function(e){return o()(e,"widgets.builder.editor")},E=function(e){var t,r=F(e)||{},n=r.layer,o=r.charts,i=r.selectedChartId,a=r.selectedTraceId;return o?null===(t=(0,d.Sk)({selectedChartId:i,selectedTraceId:a,charts:o}))||void 0===t?void 0:t.layer:n},S=(0,m.P1)(E,c.Iz,(function(e){return(0,y.Wy)(e)&&(0,y.i$)(e)}),(function(e,t,r){return e||!r&&t})),x=function(e){var t,r;return(null===(t=F(e))||void 0===t||null===(r=t.charts)||void 0===r?void 0:r.map((function(e){return e.layer})))||[]},T=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].widgets"))},C=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].collapsed"))},D=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].maximized"))},I=(0,m.P1)(T,C,D,(function(e,t,r){if(e){if(null!=r&&r.widget)return e.filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id===r.widget.id}));if(t)return e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return!t[e]}))}return e})),N=(0,m.P1)(C,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),L=function(e){return(T(e)||[]).filter((function(){return"map"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).widgetType}))},_=function(e){return(T(e)||[]).filter((function(){return"table"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).widgetType}))},R=(0,m.P1)(L,_,s.Od,p.F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return{availableDependencies:u()(e.map((function(e){var t=e.id,r=e.maps;return(void 0===r?[]:r).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mapId;return"widgets[".concat(t,"].maps[").concat(e,"].map")}))}))).concat(a()(r).map((function(){return"map"}))).concat(a()(t).filter((function(){return-1===n.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),q=(0,m.P1)(L,_,s.Od,p.F,F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return{availableDependencies:u()(e.map((function(e){var t=e.id,r=e.maps;return(void 0===r?[]:r).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mapId;return"widgets[".concat(t,"].maps[").concat(e,"].map")}))}))).concat(a()(r).map((function(){return r?"map":null}))).filter((function(e){return e})).concat(a()(t).filter((function(){return-1===n.indexOf("viewer")})).filter((function(e){return(0,d.t3)(o,e)})).filter((function(e){return o&&o.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),k=function(e){return o()(w(e),"".concat(f.jv))},A=function(e){return o()(k(e),"active")},M=(0,m.P1)(T,(function(e){return(0,d.Ug)(e)})),G=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].layouts"))},B=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].layout"))},U=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].widgets"))},z=function(e){return o()(e,"widgets.tray")},Z=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].layouts"))},V=function(e){return o()(e,"widgets.builder.editor.returnToFeatureGrid",!1)},W=function(e){var t=(0,d.Oe)(F(e));return o()(t,"filter")},X=(0,b.y1)(P,j,(function(e){return j(e).map((function(t){return 0===t.indexOf("map.")?o()((0,s.Od)(e),t.slice(4)):t.match(f.oU)?(0,d.D6)(t,T(e),L(e)):o()(e,t)}))}),(function(e,t,r){return t.reduce((function(t,n,o){return h(h({},t),{},O({},Object.keys(e)[o],r[o]))}),{})})),H=(0,m.zB)({widgets:T,layouts:G,catalogs:y.CN}),Q=function(e){var t=F(e)||{},r=t.selectedChartId,n=t.charts,o=void 0===n?[]:n,i=t.selectedTraceId;if(!r)return"filter";var a=(0,d.Sk)({selectedChartId:r,selectedTraceId:i,charts:o});return"charts[".concat(r,"].traces[").concat(null==a?void 0:a.id,"].filter")},J=function(e){var t=(T(e)||[]).filter((function(){return"table"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).widgetType}));return!(null==t||!t.find((function(e){var t;return null===(t=e.dependencies)||void 0===t?void 0:t.zoomLoader})))}},577215:(e,t,r)=>{"use strict";r.d(t,{VZ:()=>y,oL:()=>m,F0:()=>b,cP:()=>v,Br:()=>g,rD:()=>h});var n=r(944908),o=r.n(n),i=r(513218),a=r.n(i),l=r(984596),u=r.n(l),s=r(945402),c=r(916651);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==p(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],m=function(){return o()(Object.values((0,s.eq)()))},b=function(e){return y.includes(e)},v=function(e){return m().includes(e)},g=function(e){var t,r,n,o,i;return a()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.southBoundLatitude,maxx:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&u()(e.Style).map((function(e){return d(d(d({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:u()(e.LegendURL).map((function(e){var t,r,n,o,i,a;return d({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(r=e.$)&&void 0!==r&&r.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(n=e.OnlineResource)||void 0===n||null===(o=n.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}},h=function(e){var t=e.tileGrids,r=void 0===t?[]:t,n=e.projection,o=e.tileSize,i=void 0===o?256:o;return r.find((function(e){var t,r,o;return(0,c.normalizeSRS)(e.crs)===(0,c.normalizeSRS)(n)&&!(((null===(t=e.tileSizes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[0])||(null===(o=e.tileSize)||void 0===o?void 0:o[0]))!==i)}))}},284069:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(86686),i=o.isFilterValid,a=o.toOGCFilterParts,l=r(102245)({}).and;e.exports={getWpsPayload:function(e){var t,r=e.layerName,o=e.layerFilter,u=e.attribute,s=e.maxFeatures,c=e.startIndex,p=e.value,f=p?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+u+"</ogc:PropertyName>   <ogc:Literal>*"+p+"*</ogc:Literal></ogc:PropertyIsLike>":"",d=o&&!o.disabled&&i(o)?a(o,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+r+'">'+(f.length>0||d.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+l.apply(void 0,(t=d,function(e){if(Array.isArray(e))return n(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([f]))+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+u+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+u+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+s+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+c+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},949469:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(923645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,"",""]);const i=o}}]);