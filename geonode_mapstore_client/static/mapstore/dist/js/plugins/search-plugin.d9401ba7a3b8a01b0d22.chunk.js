(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[65190,47310],{460604:(e,t,r)=>{"use strict";r.d(t,{hn:()=>n,yg:()=>o,vD:()=>i,jJ:()=>a,oy:()=>c,am:()=>l,W:()=>u,B1:()=>s,YP:()=>f,fU:()=>p,cY:()=>d});var n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",c="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",l="ADDITIONALLAYER:MERGE_OPTIONS_BY_OWNER",u=function(e,t){return{type:a,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},s=function(e,t){return{type:c,owner:e,options:t}},f=function(e,t){return{type:l,owner:e,options:t}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:o,id:t,owner:r}},d=function(e){return{type:i,owner:e}}},921914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>c,Pn:()=>l,DZ:()=>u,e8:()=>s,E0:()=>f,F9:()=>p,X_:()=>d,pb:()=>m,Re:()=>y,ih:()=>v,xy:()=>b,jL:()=>h,oz:()=>g,ph:()=>S,lF:()=>O,gG:()=>E,cb:()=>_,GI:()=>C,B1:()=>P,fv:()=>I,gc:()=>w,zX:()=>T,ZF:()=>j,Zb:()=>R,DW:()=>k,Xp:()=>A,Fm:()=>x,sV:()=>N,LU:()=>F,XP:()=>D,WU:()=>M,mK:()=>L,g:()=>Z,ws:()=>G,HP:()=>V,aN:()=>B,Pg:()=>U,u0:()=>Y,TM:()=>q,PM:()=>H,lK:()=>K,sv:()=>W,MO:()=>X,oO:()=>Q,Mc:()=>$,Zw:()=>J,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var n=r(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",c="CHANGE_MAPINFO_STATE",l="NEW_MAPINFO_REQUEST",u="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",f="SHOW_MAPINFO_MARKER",p="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",m="HIDE_REVERSE_GEOCODE",y="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",b="FEATURE_INFO_CLICK",h="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",g="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",S="TOGGLE_MAPINFO_STATE",O="UPDATE_CENTER_TO_MARKER",E="IDENTIFY:CHANGE_PAGE",_="IDENTIFY:CLOSE_IDENTIFY",C="IDENTIFY:CHANGE_FORMAT",P="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",I="IDENTIFY:EDIT_LAYER_FEATURES",w="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",T="IDENTIFY:SET_MAP_TRIGGER",j="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",R="IDENTIFY:SET_SHOW_IN_MAP_POPUP",k="IDENTIFY:IDENTIFY_IS_MOUNTED",A="IDENTIFY:INIT_PLUGIN";function x(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function N(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function F(){return{type:y}}function D(){return{type:v}}function M(e,t){return{type:l,reqId:e,request:t}}function L(e){return{type:c,enabled:e}}function Z(){return{type:u}}function G(e){return{type:s,infoFormat:e}}function V(){return{type:f}}function B(){return{type:p}}function z(e){return{type:d,reverseGeocodeData:e.data}}function U(e){return function(t){n.Z.reverseGeocode(e).then((function(e){t(z(e))})).catch((function(e){t(z(e))}))}}function Y(){return{type:m}}function q(){return{type:S}}function H(e){return{type:O,status:e}}function K(e,t){return{type:b,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function W(e){return{type:h,point:e}}function X(e){return{type:g,enabled:e}}function Q(e){return{type:E,index:e}}var $=function(){return{type:_}},J=function(e){return{type:C,format:e}},ee=function(e){return{type:P,showCoordinateEditor:e}},te=function(e){return{type:I,layer:e}},re=function(e){return{type:w,query:e}},ne=function(e){return{type:T,trigger:e}},oe=function(e){return{type:R,value:e}},ie=function(e){return{type:k,isMounted:e}},ae=function(e){return{type:A,cfg:e}}},225016:(e,t,r)=>{"use strict";r.d(t,{Cv:()=>n,RD:()=>o,NR:()=>i,mV:()=>a,N3:()=>c,dR:()=>l,sS:()=>u,sm:()=>s});var n="SET_SEARCH_BOOKMARK_CONFIG",o="RESET_BOOKMARK_CONFIG",i="UPDATE_BOOKMARK",a="FILTER_BOOKMARKS";function c(e,t){return{type:n,property:e,value:t}}function l(){return{type:o}}function u(e){return{type:i,bookmark:e,idx:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1}}function s(e){return{type:a,filter:e}}},240626:(e,t,r)=>{"use strict";r.d(t,{bL:()=>n,f6:()=>o,E_:()=>i,ai:()=>a,U8:()=>c,Pg:()=>l});var n="SET_SEARCH_CONFIG_PROP",o="RESET_SEARCH_CONFIG",i="UPDATE_SERVICE";function a(e,t){return{type:n,property:e,value:t}}function c(){return{type:o,page:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}}function l(e){return{type:i,service:e,idx:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1}}},647310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(375875),o=r.n(n),i=r(472500),a=r.n(i),c=r(727418),l=r.n(c),u={format:"json",bounded:0,polygon_geojson:1,priority:5};const s={geocode:function(e,t){var r=l()({q:e},u,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=l()({lat:e.lat,lon:e.lng},t||{},u),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},115047:(e,t,r)=>{"use strict";r.d(t,{b:()=>y});var n=r(727418),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(59286),s=r(432420),f=["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"],p=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,c=e.predicate,l=(0,u.Iz)(n||"")(i),s=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===s.length&&(s=r?[r]:[]),s.length>0&&(t="(".concat(s.map((function(e){return a.map((function(t){return"".concat(t," ").concat(c," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(l):l||null},d={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(647310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:null===(r=e.data)?[]:r.map((function(e){return{properties:c({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}));var r}))},wfs:function(e,t){var r=t.url,n=t.typeName,i=t.queriableAttributes,a=void 0===i?[]:i,c=t.outputFormat,l=void 0===c?"application/json":c,u=t.predicate,d=void 0===u?"ILIKE":u,m=t.staticFilter,y=void 0===m?"":m,v=t.blacklist,b=void 0===v?[]:v,h=t.item,g=t.fromTextToFilter,S=void 0===g?p:g,O=t.returnFullData,E=void 0!==O&&O,_=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,f),C=S({searchText:e,staticFilter:y,blacklist:b,item:h,queriableAttributes:a,predicate:d});return s.DH(r,o()({maxFeatures:10,typeName:n,outputFormat:l,cql_filter:C},_)).then((function(e){return E?e:e.features}))}},m={setService:function(e,t){d[e]=t},getService:function(e){return d[e]?d[e]:null}},y={Services:d,Utils:m}},838167:(e,t,r)=>{"use strict";r.d(t,{k9:()=>E,v0:()=>O,ZP:()=>C});var n=r(45697),o=r.n(n),i=r(124852),a=r.n(i),c=r(868195);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(null,arguments)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function f(e,t,r){return t=d(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(c.FormattedDate,u({value:this.props.value},this.props.dateParams)):a().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&s(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);y(b,"propTypes",{value:o().object,dateParams:o().object}),y(b,"contextTypes",{intl:o().object}),y(b,"defaultProps",{value:new Date});const h=b;var g=r(615402),S=r(805346),O=S.Z,E=g.Z,_=h;const C={Message:S.Z,HTML:E,DateFormat:_}},56539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>vr});var n=r(227361),o=r.n(n),i=r(727418),a=r.n(i),c=r(45697),l=r.n(c),u=r(124852),s=r.n(u),f=r(171703),p=r(22222),d=r(460604),m=r(881808),y=r(782904),v=r(801550),b=r(360951),h=r(597222),g=r(225016),S=r(480681),O=r(441609),E=r.n(O),_=r(618446),C=r.n(_),P=r(352353),I=r.n(P),w=r(281763),T=r.n(w),j=r(805346),R=r(815135),k=r(423570),A=r.n(k);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(null,arguments)}var N=(0,R.Z)(S.PS),F={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:A()()},D={title:s().createElement(S.gG,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0};const M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuItems,r=void 0===t?[]:t,n=e.disabled,o=void 0!==n&&n;return s().createElement(N,x({disabled:o},F,D),r.length?r.map((function(e){return e})):null)},L=function(e){var t=e.className,r=e.style,n=e.children;return s().createElement("div",{id:"map-search-bar",style:r,className:"MapSearchBar"+(t?" "+t:"")},n)};var Z=r(86638);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var B=function(e,t){var r=e.show,n=e.autoFocusOnSelect,o=void 0===n||n,i=e.selectedItems,a=void 0===i?[]:i,c=e.className,l=e.style,u=void 0===l?{textOverflow:"ellipsis"}:l,f=e.placeholder,p=e.placeholderMsgId,d=e.hideOnBlur,m=void 0===d||d,y=e.searchText,v=void 0===y?"":y,b=e.typeAhead,h=void 0===b||b,g=e.delay,O=void 0===g?1e3:g,E=e.blurResetDelay,_=void 0===E?300:E,C=e.onSearch,P=void 0===C?function(){}:C,I=e.onSearchTextChange,w=void 0===I?function(){}:I,T=e.onCancelSelectedItem,j=void 0===T?function(){}:T,R=e.onPurgeResults,k=void 0===R?function(){}:R,A=s().useRef(),x=s().useRef(),N=G(s().useState(),2),F=N[0],D=N[1],M=G(s().useState(),2),L=M[0],V=M[1],B=G(s().useState(!1),2),z=B[0],U=B[1];s().useEffect((function(){var e=x.current;if(o&&a&&(e<a.length||!e&&1===a.length)){var t=A.current;t&&t.focus instanceof Function&&setTimeout((function(){return t.focus()}),200)}x.current=a&&a.length})),s().useEffect((function(){z&&(P(),U(!1))}),[z,P]);var Y="search.addressSearch";if(!f&&t.messages){var q=(0,Z.S$)(t.messages,p||Y);q&&(Y=q)}else Y=f;return r&&s().createElement(S.NI,{className:"searchInput".concat(c?" ".concat(c):""),key:"search-input",placeholder:Y,type:"text",inputRef:function(e){A.current=e},style:u,value:v,onKeyDown:function(e){switch(e.keyCode){case 13:P();break;case 8:!v&&a&&a.length>0&&j(a[a.length-1])}},onBlur:function(){m&&(F&&clearTimeout(F),D(setTimeout((function(){k()}),_)))},onFocus:function(){h&&v&&P()},onChange:function(e){var t=e.target.value;w(t),h&&(L&&clearTimeout(L),V(setTimeout((function(){U(!0)}),O)))}})};B.contextTypes={messages:l().object};const z=B;var U=r(472986),Y=r.n(U),q=r(80717);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(null,arguments)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const $=function(e){var t=e.loading,r=(e.splitTools,e.toolbarProps),n=void 0===r?{}:r,o=e.toolbarButtons,i=void 0===o?[]:o,c=e.children;return s().createElement("span",{className:"search-toolbar-options"},t&&s().createElement(Y(),{style:a()({},{position:"absolute"},X({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),s().createElement(q.Z,K({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},n,{buttons:i})),c)};var J=r(743129);function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(null,arguments)}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ce=(0,r(993451).Z)(["placeholder","clearValueText","noResultsText"])(J.ZP),le={searchByBookmark:function(e,t,r,n,o){var i,a,c=e.options,l=void 0===c?{}:c,u=e.layerVisibilityReload;void 0!==u&&u?t(ie(ie({},r),{},{map:ie(ie({},r.map),{},{bookmark_search_config:n})}),null,{bounds:[l.west,l.south,l.east,l.north],crs:(null==r||null===(i=r.map)||void 0===i||null===(a=i.center)||void 0===a?void 0:a.crs)||"EPSG:4326"}):l&&!E()(l)&&o([l.west,l.south,l.east,l.north],"EPSG:4326")},searchIcon:function(e,t){var r=t.onLayerVisibilityLoad,n=t.mapInitial,o=t.bookmarkConfig,i=t.onZoomToExtent;return{tooltipId:"bookmarkSearch"===e?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"bookmarkSearch"===e&&!(null!=o&&o.zoomOnSelect),disabled:"bookmarkSearch"===e&&!o.selected,onClick:function(){"bookmarkSearch"===e&&le.searchByBookmark(o.selected,r,n,o.bookmarkSearchConfig||{},i)}}}},ue=function(e){var t=e.bookmarkConfig,r=e.onPropertyChange,n=e.onLayerVisibilityLoad,o=e.mapInitial,i=e.onZoomToExtent,a=re((0,u.useState)([]),2),c=a[0],l=a[1],f=t||{},p=f.selected,d=void 0===p?{}:p,m=f.bookmarkSearchConfig,y=void 0===m?{}:m,v=f.zoomOnSelect,b=void 0===v||v,h=y.bookmarks,g=void 0===h?[]:h,S=le.searchByBookmark;return(0,u.useEffect)((function(){E()(g)||l(g.map((function(e){return e.title})))}),[g]),s().createElement("div",{className:"search-select"},s().createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},s().createElement(ce,te({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",a=re(g.filter((function(r,n){return r.title===t&&n===e.idx})),1)[0];r("selected",a),b&&S(a,n,o,y,i)},value:(null==d?void 0:d.title)||"",options:c.map((function(e,t){return{label:e,value:e,idx:t}})),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};ue.propTypes={bookmarkConfig:l().object.isRequired,onPropertyChange:l().func.isRequired};const se=(0,f.connect)((function(e){return{bookmarkConfig:e.searchbookmarkconfig||{}}}),{onPropertyChange:g.N3,onZoomToExtent:v.Px,onLayerVisibilityLoad:m.H0})(ue);var fe=r(678635),pe=r(777900),de=r(916651),me={clearCoordinates:function(e,t){e({owner:"search"}),["lat","lon","xCoord","yCoord","currentMapXYCRS"].forEach((function(e){return t(e,"")}))},areValidCoordinates:function(e){return!!e&&T()(null==e?void 0:e.lon)&&T()(null==e?void 0:e.lat)},zoomToPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;e({x:parseFloat(t.lon),y:parseFloat(t.lat)},r,"EPSG:4326")},coordinateFormatChange:function(e,t,r,n){return{buttonConfig:{title:s().createElement(S.gG,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===e,onClick:function(){return t("decimal")},text:s().createElement(j.Z,{msgId:"search.decimal"})},{active:"aeronautical"===e,onClick:function(){return t("aeronautical")},text:s().createElement(j.Z,{msgId:"search.aeronautical"})}],visible:r&&"coordinatesSearch"===n,Element:pe.Z}},removeIcon:function(e,t,r,n){return{visible:["coordinatesSearch","mapCRSCoordinatesSearch"].includes(e)&&(T()(t.lon)||T()(t.lat)||T()(t.xCoord)||T()(t.yCoord)),onClick:function(){return me.clearCoordinates(r,n)}}},searchIcon:function(e,t,r,n){return{visible:["coordinatesSearch","mapCRSCoordinatesSearch"].includes(e),onClick:function(){["coordinatesSearch","mapCRSCoordinatesSearch"].includes(e)&&me.areValidCoordinates(t)&&me.zoomToPoint(r,t,n)}}},coordinatesMenuItem:function(e){var t=e.activeTool,r=e.searchText,n=e.clearSearch,o=e.onChangeActiveSearchTool,i=e.onClearBookmarkSearch,a=e.currentMapCRS,c=e.onChangeFormat;return"EPSG:4326"===a?s().createElement(S.sN,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},s().createElement(S.gG,{glyph:"search-coords"})," ",s().createElement(j.Z,{msgId:"search.coordinatesSearch"})):s().createElement(s().Fragment,null,s().createElement(S.sN,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},s().createElement(S.gG,{glyph:"search-coords"})," ",s().createElement(j.Z,{msgId:"search.coordinatesSearch"})),s().createElement(S.sN,{active:"mapCRSCoordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("mapCRSCoordinatesSearch"),c("decimal"),document.dispatchEvent(new MouseEvent("click"))}},s().createElement("span",{style:{marginLeft:20}},s().createElement(S.gG,{glyph:"search-coords"})," ",s().createElement(j.Z,{msgId:"search.currentMapCRS"}))))}},ye=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,i=e.onZoomToPoint,a=e.onChangeCoord,c=e.defaultZoomLevel,l=e.currentMapCRS,u=e.aeronauticalOptions,f=void 0===u?{seconds:{decimals:4,step:1e-4}}:u,p=e.constraintsCoordEditor,d=void 0===p?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:p,m=me.zoomToPoint,y=me.areValidCoordinates,v=function(e,t){if(a(e,parseFloat(t)),(null==r?void 0:r.currentMapXYCRS)!==l&&"EPSG:4326"!==l&&a("currentMapXYCRS",l),y()||o({owner:"search"}),"EPSG:4326"!==l){var n="lat"===e?parseFloat(t):r.lat,i="lon"===e?parseFloat(t):r.lon,c=T()(n)&&!isNaN(n),u=T()(i)&&!isNaN(i);if(c&&u){var s=(0,de.reproject)([i,n],"EPSG:4326",l,!0),f=parseFloat(null==s?void 0:s.x),p=parseFloat(null==s?void 0:s.y);return a("xCoord",f),void a("yCoord",p)}r.xCoord&&a("xCoord",""),r.yCoord&&a("yCoord","")}},b=function(){m(i,r,c)};return s().createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===n?"nowrap":"wrap"}},s().createElement(S.X2,{className:"entryRow ".concat(n)},s().createElement(S.cw,null,s().createElement(S.BZ,null,s().createElement(S.BZ.Addon,{style:{minWidth:45}},s().createElement(j.Z,{msgId:"search.latitude"})),s().createElement(fe.Z,{owner:"search",format:n,aeronauticalOptions:f,coordinate:"lat",idx:1,value:r.lat,constraints:d,onChange:function(e){return v("lat",e)},onKeyDown:function(){y(r)&&b()}})))),s().createElement(S.X2,{className:"entryRow ".concat(n)},s().createElement(S.cw,null,s().createElement(S.BZ,null,s().createElement(S.BZ.Addon,{style:{minWidth:45}},s().createElement(j.Z,{msgId:"search.longitude"})),s().createElement(fe.Z,{owner:"search",format:n,aeronauticalOptions:f,coordinate:"lon",idx:2,value:r.lon,constraints:d,onChange:function(e){return v("lon",e)},onKeyDown:function(){y(r)&&b()}})))))};ye.propTypes={coordinate:l().object,format:l().string,onClearCoordinatesSearch:l().func,onZoomToPoint:l().func,onChangeCoord:l().func,defaultZoomLevel:l().number,currentMapCRS:l().string};const ve=(0,f.connect)((function(e){return{coordinate:e.search.coordinate||{}}}),{onZoomToPoint:h.Z,onChangeCoord:h.TS})(ye);var be=r(774565);function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ge=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,i=e.onZoomToPoint,a=e.onChangeCoord,c=e.defaultZoomLevel,l=e.currentMapCRS,u=me.zoomToPoint,f=me.areValidCoordinates,p=function(e){var t,r,n=(t=(0,be.Vh)(e).extent,r=4,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1],a=n[2];return{decimal:{yCoord:{min:i,max:n[3]},xCoord:{min:o,max:a}}}},d=function(e,t){var r,n,o=(null===(r=p(l).decimal[t])||void 0===r?void 0:r.min)||0,i=(null===(n=p(l).decimal[t])||void 0===n?void 0:n.max)||0,a=parseFloat(e);return!(isNaN(a)||a<o||a>i)};s().useEffect((function(){var e=null==r?void 0:r.currentMapXYCRS,t=l;if(t&&"EPSG:4326"!==t){if(e!==l&&a("currentMapXYCRS",l),t&&e&&e!==t){var n=T()(r.lat)&&!isNaN(r.lat),i=T()(r.lon)&&!isNaN(r.lon);if(n&&i){var c=(0,de.reproject)([r.lon,r.lat],"EPSG:4326",t,!0),u=parseFloat(null==c?void 0:c.x),s=parseFloat(null==c?void 0:c.y);return a("xCoord",u),a("yCoord",s),void(d(u,"xCoord")&&d(s,"yCoord")||o({owner:"search"}))}r.xCoord&&a("xCoord",""),r.yCoord&&a("yCoord","")}d(null==r?void 0:r.xCoord,"xCoord")&&d(null==r?void 0:r.yCoord,"yCoord")||o({owner:"search"})}}),[l]);var m=function(e,t){f()||o({owner:"search"});var n=parseFloat(t);a(e,n);var i="yCoord"===e?n:r.yCoord,c="xCoord"===e?n:r.xCoord,u=T()(i)&&!isNaN(i)&&d(i,"yCoord"),s=T()(c)&&!isNaN(c)&&d(c,"xCoord");if(u&&s){var p=(0,de.reproject)([c,i],l,"EPSG:4326",!0);return a("lat",p.y),void a("lon",p.x)}a("lat",""),a("lon","")},y=function(){u(i,r,c)};return s().createElement("div",{className:"coordinateEditor",style:{flexWrap:"nowrap"}},s().createElement(S.X2,{className:"entryRow ".concat(n)},s().createElement(S.cw,null,s().createElement(S.BZ,null,s().createElement(S.BZ.Addon,{style:{minWidth:45}},s().createElement(j.Z,{msgId:"search.xCoord"})),s().createElement(fe.Z,{owner:"search",format:n,coordinate:"X",idx:2,value:null==r?void 0:r.xCoord,currentMapCRS:l,constraints:p(l),onChange:function(e){return m("xCoord",e)},onKeyDown:function(){f(r)&&y()}})))),s().createElement(S.X2,{className:"entryRow ".concat(n)},s().createElement(S.cw,null,s().createElement(S.BZ,null,s().createElement(S.BZ.Addon,{style:{minWidth:45}},s().createElement(j.Z,{msgId:"search.yCoord"})),s().createElement(fe.Z,{owner:"search",format:n,coordinate:"Y",idx:1,value:null==r?void 0:r.yCoord,currentMapCRS:l,constraints:p(l),onChange:function(e){return m("yCoord",e)},onKeyDown:function(){f(r)&&y()}})))))};ge.propTypes={coordinate:l().object,format:l().string,onClearCoordinatesSearch:l().func,onZoomToPoint:l().func,onChangeCoord:l().func,defaultZoomLevel:l().number};const Se=(0,f.connect)((function(e){return{coordinate:e.search.coordinate||{}}}),{onZoomToPoint:h.Z,onChangeCoord:h.TS})(ge);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}var Ee=["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onClearBookmarkSearch","onPurgeResults","currentMapCRS","items"];function _e(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){Ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ie(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||Te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){if(e){if("string"==typeof e)return je(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Re=(0,R.Z)(S.sN),ke=function(e){var t=e.activeTool,r=e.searchIcon,n=e.services,i=void 0===n?[]:n,a=e.selectedService,c=void 0===a?-1:a,l=e.onServiceSelect,u=void 0===l?function(){}:l;return 0===i.length?null:1===i.length?s().createElement(S.sN,{active:"addressSearch"===t,onClick:function(){return u(-1)}},s().createElement(S.gG,{glyph:r}),s().createElement(j.Z,{msgId:"search.addressSearch"})):s().createElement(s().Fragment,null,s().createElement(Re,{tooltipId:"search.searchOnAllServices",tooltipPosition:"left",active:"addressSearch"===t&&-1===c,onClick:function(){return u(-1)}},s().createElement(S.gG,{glyph:r}),s().createElement(j.Z,{msgId:"search.addressSearch"})),i.map((function(e,n){var i=e.name||e.type;return s().createElement(Re,{tooltip:o()(e,"options.tooltip","Search on ".concat(i)),tooltipPosition:"left",onClick:function(){return u(n)},key:n,active:"addressSearch"===t&&c===n},s().createElement("span",{style:{marginLeft:20}},s().createElement(S.gG,{glyph:r}),i))})),s().createElement(S.sN,{divider:!0}))},Ae=r(313311),xe=r.n(Ae),Ne=r(59286);function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Be(n.key),n)}}function Me(e,t,r){return t=Ze(t),function(e,t){if(t&&("object"==Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Le()?Reflect.construct(t,r||[],Ze(e).constructor):t.apply(e,r))}function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Le=function(){return!!e})()}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function Ve(e,t,r){return(t=Be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fe(t)?t:t+""}var ze=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ve(e=Me(this,t,[].concat(n)),"onClick",(function(){var t=e.props.item;e.props.onItemClick(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return s().createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},s().createElement("div",{className:"search-result-left-container"},s().createElement("div",{className:"icon"}," ",s().createElement("img",{src:e.icon})),s().createElement("div",{className:"text-result-title"},o()(e,this.props.displayName)||(0,Ne.Iz)(this.props.displayName||"")(e)),s().createElement("small",{className:"text-info"},this.props.subTitle&&o()(e,this.props.subTitle)||(0,Ne.Iz)(this.props.subTitle||"")(e))),s().createElement("div",{className:"search-result-right-container"},s().createElement("div",{className:"search-result-tools"},s().createElement(q.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&De(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);Ve(ze,"propTypes",{subTitle:l().string,item:l().object,displayName:l().string,idField:l().string,icon:l().string,onItemClick:l().func,tools:l().array}),Ve(ze,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]});const Ue=ze;var Ye=r(838167),qe=r(218412);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,et(n.key),n)}}function We(e,t,r){return t=Qe(t),function(e,t){if(t&&("object"==He(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xe()?Reflect.construct(t,r||[],Qe(e).constructor):t.apply(e,r))}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe(e)}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$e(e,t)}function Je(e,t,r){return(t=et(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e){var t=function(e,t){if("object"!=He(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==He(t)?t:t+""}var tt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Je(e=We(this,t,[].concat(n)),"onItemClick",(function(t,r){e.props.onItemClick(t,e.props.mapConfig,r)})),Je(e,"renderResults",(function(){return e.props.results.map((function(t,r){var n,o=e.findService(t)||{},i=xe()(e.props.layers,{name:null===(n=o.options)||void 0===n?void 0:n.typeName}),a=(0,qe.zA)(o),c=!(0,qe.Tv)(i,o);return s().createElement(Ue,{subTitle:o.subTitle,idField:o.idField,displayName:o.displayName,key:t.osm_id||t.id||"res_"+r,item:t,onItemClick:function(){return e.onItemClick(t,o)},tools:[{id:"open-gfi",keyProp:"open-gfi",visible:a,disabled:c,glyph:"info-sign",tooltipId:a&&c?"search.layerMustBeVisible":"search.showGFI",onClick:function(r){r.stopPropagation(),e.props.showGFI(t)}}]})}))})),Je(e,"findService",(function(t){var r=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(r&&"string"==typeof t.__SERVICE__){for(var n=0;n<r.length;n++)if(r[n]&&r[n].id===t.__SERVICE__)return r[n];for(var o=0;o<r.length;o++)if(r[o]&&r[o].type===t.__SERVICE__)return r[o]}else if("object"===He(t.__SERVICE__))return t.__SERVICE__;return null})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=s().createElement(Ye.ZP.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,o=r.height-this.props.sizeAdjustment.height;t=a()({},this.props.containerStyle,{maxWidth:n,maxHeight:o})}return this.props.results?0===this.props.results.length?s().createElement("div",{className:"search-result-list",style:a()({padding:"10px",textAlign:"center"},t)},e):s().createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&Ke(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);Je(tt,"propTypes",{results:l().array,layers:l().array,searchOptions:l().object,mapConfig:l().object,fitToMapSize:l().bool,containerStyle:l().object,sizeAdjustment:l().object,onItemClick:l().func,addMarker:l().func,afterItemClick:l().func,showGFI:l().func,notFoundMessage:l().oneOfType([l().object,l().string])}),Je(tt,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}});var rt=r(49977),nt=r(294707),ot=r.n(nt),it=r(235385),at=r.n(it),ct=r(414293),lt=r.n(ct),ut=r(189734),st=r.n(ut),ft=r(455877),pt=r.n(ft),dt=r(675110),mt=r(921914),yt=r(580416),vt=r(115047),bt=r(432420),ht=r(454037),gt=r(307877),St=r(73814),Ot=r(821751),Et=r(800827);function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function Ct(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){Tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=_t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_t(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jt=function(e,t){return(0,ht.mx)(e,wt({},(0,gt.oq)(t)))},Rt=r(426125);function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function At(e){return function(e){if(Array.isArray(e))return xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){Dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=kt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==kt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mt=r(737275),Lt=r(38560);function Zt(e){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qt(n.key),n)}}function Vt(e,t,r){return t=zt(t),function(e,t){if(t&&("object"==Zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bt()?Reflect.construct(t,r||[],zt(e).constructor):t.apply(e,r))}function Bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bt=function(){return!!e})()}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}function Ut(e,t){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ut(e,t)}function Yt(e,t,r){return(t=qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){var t=function(e,t){if("object"!=Zt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zt(t)?t:t+""}var Ht=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ut(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return s().createElement(Lt.Z,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button"},s().createElement(S.gG,{glyph:"search"}))}}])&&Gt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);Yt(Ht,"propTypes",{pressed:l().bool,onToggle:l().func}),Yt(Ht,"defaultProps",{pressed:!1,onToggle:function(){}});const Kt=(0,f.connect)((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:y.Xi.bind(null,"search",null)})(Ht);var Wt,Xt=r(55105),Qt=r(88791),$t=r(294184),Jt=r.n($t);function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){ur(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nr.apply(null,arguments)}function or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sr(n.key),n)}}function ir(e,t,r){return t=cr(t),function(e,t){if(t&&("object"==er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ar()?Reflect.construct(t,r||[],cr(e).constructor):t.apply(e,r))}function ar(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ar=function(){return!!e})()}function cr(e){return cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cr(e)}function lr(e,t){return lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lr(e,t)}function ur(e,t,r){return(t=sr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sr(e){var t=function(e,t){if("object"!=er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==er(t)?t:t+""}var fr=(0,p.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""},Et.uy],(function(e,t,r,n,i){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:o()(e,"activeSearchTool","addressSearch"),format:o()(e,"format")||Mt.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:n||{},currentMapCRS:i}})),pr=(0,f.connect)(fr,{onSearch:h.tt,onChangeCoord:h.TS,onChangeActiveSearchTool:h.a,onClearCoordinatesSearch:d.fU,onClearBookmarkSearch:g.N3,onChangeFormat:h.Zw,onToggleControl:y.Xi,onZoomToPoint:h.Z,onPurgeResults:h.kV,onSearchReset:h.v2,onSearchTextChange:h.k9,onCancelSelectedItem:h.KG,onZoomToExtent:v.Px,onLayerVisibilityLoad:m.H0})((function(e){var t,r,n=e.activeSearchTool,i=void 0===n?"addressSearch":n,a=e.removeIcon,c=void 0===a?"1-close":a,l=e.searchIcon,f=void 0===l?"search":l,p=e.isSearchClickable,d=void 0===p||p,m=e.splitTools,y=e.searchText,v=void 0===y?"":y,b=e.maxResults,h=void 0===b?15:b,g=e.searchOptions,O=e.loading,_=e.delay,P=e.blurResetDelay,w=e.typeAhead,R=e.coordinate,k=void 0===R?{}:R,A=e.selectedItems,x=void 0===A?[]:A,N=e.defaultZoomLevel,F=void 0===N?12:N,D=e.enabledSearchBookmarkConfig,Z=void 0!==D&&D,G=e.error,V=e.format,B=void 0===V?"decimal":V,U=e.placeholder,Y=e.placeholderMsgId,q=void 0===Y?"search.addressSearch":Y,H=e.showOptions,K=void 0===H||H,W=e.showAddressSearchOption,X=void 0===W||W,Q=e.showCoordinatesSearchOption,J=void 0===Q||Q,ee=e.showBookMarkSearchOption,te=void 0===ee||ee,re=e.onSearch,ne=e.onSearchReset,oe=e.onSearchTextChange,ie=e.onCancelSelectedItem,ae=e.onChangeCoord,ce=void 0===ae?function(){}:ae,ue=e.onChangeActiveSearchTool,fe=void 0===ue?function(){}:ue,pe=e.onClearCoordinatesSearch,de=void 0===pe?function(){}:pe,ye=e.onChangeFormat,be=void 0===ye?function(){}:ye,he=e.onToggleControl,ge=void 0===he?function(){}:he,Oe=e.onZoomToPoint,Ce=void 0===Oe?function(){}:Oe,Ie=e.onClearBookmarkSearch,Te=void 0===Ie?function(){}:Ie,je=e.onPurgeResults,Re=e.currentMapCRS,Ae=void 0===Re?"EPSG:4326":Re,xe=e.items,Ne=void 0===xe?[]:xe,Fe=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ee),De=we((0,u.useState)(-1),2),Me=De[0],Le=De[1];(0,u.useEffect)((function(){C()(null==g?void 0:g.services,null==g?void 0:g.services)||Le(-1)}),[null==g?void 0:g.services]),(0,u.useEffect)((function(){!["mapCRSCoordinatesSearch","coordinatesSearch"].includes(i)&&(de({owner:"search"}),T()(null==k?void 0:k.lon)&&T()(null==k?void 0:k.lat))&&["lat","lon","xCoord","yCoord","currentMapXYCRS"].forEach((function(e){return ce(e,"")}))}),[i]),(0,u.useEffect)((function(){"EPSG:4326"===Ae&&"mapCRSCoordinatesSearch"===i&&fe("coordinatesSearch")}),[Ae]);var Ze,Ge=null!==(t=null==g||null===(r=g.services)||void 0===r?void 0:r.filter((function(e,t){return!(Me>=0)||Me===t})))&&void 0!==t?t:[],Ve=function(e){var t=e.searchText,r=e.selectedItems,n=e.searchOptions,o=e.maxResults,i=e.onSearch,a=void 0===i?function(){}:i,c=e.onSearchReset,l=void 0===c?function(){}:c;return function(){var e=t,i=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){var n;return t+((null==r||null===(n=r.options)||void 0===n?void 0:n.maxFeatures)||e)}),0)||e}(null==n?void 0:n.services,o);void 0!==e&&""!==e||r&&0!==r.length?void 0!==e&&""!==e&&a(e,n,i):l()}}({searchText:v,selectedItems:x,searchOptions:Pe(Pe({},g),{},{services:Ge}),maxResults:h,onSearch:re,onSearchReset:ne}),Be=function(){ne()},ze=[];if(X&&ze.push(s().createElement(ke,{searchIcon:f,activeTool:i,selectedService:Me,onServiceSelect:function(e){Le(-1===e?void 0:e),de({owner:"search"}),Te("selected"),fe("addressSearch")},services:null==g?void 0:g.services})),J&&ze.push(s().createElement(me.coordinatesMenuItem,{activeTool:i,searchText:v,clearSearch:Be,onChangeActiveSearchTool:fe,onClearBookmarkSearch:Te,currentMapCRS:Ae,onChangeFormat:be})),te&&!E()(Ne)){var Ue,Ye=Fe.bookmarkConfig||{},qe=Ye.allowUser,He=Ye.bookmarkSearchConfig,Ke=Ne.find((function(e){return"SearchByBookmark"===e.name}))||{};if(Ke.menuItem){var We=Ke.menuItem;ze.push(s().createElement(We,null))}Ke.bookmarkConfig&&(Ze=Pe(Pe({},Ke.bookmarkConfig(ge,Z,i)),!qe&&{visible:!1})),qe||0!==(null==He||null===(Ue=He.bookmarks)||void 0===Ue?void 0:Ue.length)||"bookmarkSearch"!==i||fe("addressSearch")}var Xe,Qe=function(){if(K){if("coordinatesSearch"===i)return me.coordinateFormatChange(B,be,K,i);if("bookmarkSearch"===i)return Ze}return null};return s().createElement(L,null,s().createElement(S.cw,null,s().createElement("div",{className:"input-group",style:{display:"flex"}},x&&x.map((function(e,t){return s().createElement("span",{key:"selected-item"+t,className:"input-group-addon"},s().createElement("div",{className:"selectedItem-text"},e.text))})),s().createElement(z,{show:"addressSearch"===i,delay:_,typeAhead:w,blurResetDelay:P,placeholder:function(){var e;if(!U&&1===(null==Ge?void 0:Ge.length)&&(null==g||null===(e=g.services)||void 0===e?void 0:e.length)>1){var t=we(Ge,1)[0],r=t.name||t.type;return o()(t,"options.placeholder","Search by ".concat(r))}return U}(),placeholderMsgId:q,searchText:v,selectedItems:x,onSearch:Ve,onSearchTextChange:oe,onCancelSelectedItem:ie,onPurgeResults:je}),"coordinatesSearch"===i&&J&&s().createElement(ve,{currentMapCRS:Ae,format:B,defaultZoomLevel:F,onClearCoordinatesSearch:de}),"mapCRSCoordinatesSearch"===i&&J&&Ae&&s().createElement(Se,{currentMapCRS:Ae,format:B,defaultZoomLevel:F,onClearCoordinatesSearch:de}),"bookmarkSearch"===i&&te&&s().createElement(se,{mapInitial:Fe.mapInitial}),s().createElement($,{splitTools:!1,toolbarButtons:[].concat(_e(Qe()?[Pe({},Qe())]:[]),_e(Ne.filter((function(e){return"button"===e.target})).map((function(e){var t=e.component;return{visible:!!K,Element:t}}))),[Pe({glyph:c,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!I()(O)&&O,visible:"addressSearch"===i&&(""!==v||x&&x.length>0),onClick:function(){"addressSearch"===i&&Be()}},["coordinatesSearch","mapCRSCoordinatesSearch"].includes(i)&&me.removeIcon(i,k,de,ce)),Pe(Pe({glyph:f,className:"square-button-md no-border "+(d||"addressSearch"!==i?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipPosition:"bottom",visible:!("addressSearch"!==i||(""!==v||x&&x.length>0)&&m),onClick:function(){return d&&Ve()}},["coordinatesSearch","mapCRSCoordinatesSearch"].includes(i)&&me.searchIcon(i,k,Ce,F,Ae)),"bookmarkSearch"===i&&le.searchIcon(i,Fe)),{tooltip:(Xe=G,Xe?s().createElement(j.Z,{msgId:Xe.msgId||"search.generic_error",msgParams:{message:Xe.message,serviceType:Xe.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!G,onClick:Be},{visible:K,renderButton:s().createElement(M,{disabled:K,menuItems:ze})}])}))))})),dr=(0,p.P1)([Et.Od,dt.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),mr=(0,f.connect)(dr,{onItemClick:h.Jc,addMarker:h._q,showGFI:h.w4})(tt),yr=(0,f.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:h.o$})((Wt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return ur(e=ir(this,t,[].concat(n)),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&o()(e.props.selectedItems[e.props.selectedItems.length-1],t)})),ur(e,"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?a()({},r,{services:n.services}):a()({},r,{services:r.services.concat(n.services)}):r})),ur(e,"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?a()({},r,{services:t}):r})),ur(e,"searchFitToTheScreen",(function(){var t=e.props,r=t.offsets,n=r.right,o=r.left,i=t.mapSize.width;return(void 0===i?window.innerWidth:i)-n-o-60>=500})),ur(e,"getSearchAndToggleButton",(function(){var t=s().createElement(pr,nr({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return e.searchFitToTheScreen()?t:s().createElement(s().Fragment,null,s().createElement(Kt,null),e.props.enabled?t:null)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lr(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(rr(rr({},qe.be),this.props.resultsStyle))}},{key:"render",value:function(){return s().createElement("span",{id:"search-bar-container",className:Jt()({toggled:!this.searchFitToTheScreen(),"no-sidebar":!this.props.sidebarIsActive}),style:this.props.sidebarIsActive?this.props.style:null},this.getSearchAndToggleButton(),s().createElement(mr,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&or(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component),ur(Wt,"propTypes",{splitTools:l().bool,showOptions:l().bool,isSearchClickable:l().bool,fitResultsToMapSize:l().bool,searchOptions:l().object,resultsStyle:l().object,selectedItems:l().array,selectedServices:l().array,userServices:l().array,withToggle:l().oneOfType([l().bool,l().array]),enabled:l().bool,textSearchConfig:l().object,style:l().object,sidebarIsActive:l().bool}),ur(Wt,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0,style:{},sidebarIsActive:!1}),Wt));const vr={SearchPlugin:a()((0,f.connect)((0,p.zB)({style:function(e){return(0,Xt.ic)(e,{right:!0})},offsets:function(e){return(0,Xt.ic)(e,{right:!0,left:!0})},mapSize:function(e){return(0,Et.GV)({width:!0})(e)},sidebarIsActive:function(e){return(0,Qt.zL)(e)}}),{})(yr),{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:function(e){return e.ofType(h.bj).debounceTime(250).switchMap((function(t){return rt.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var r=vt.b.Utils.getService(e.type);if(!r){var n=new Error("Service Missing");return n.msgId="search.service_missing",n.serviceType=e.type,rt.Observable.of(n).do((function(e){throw e}))}return rt.Observable.defer((function(){return r(t.searchText,e.options).then((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return wt(wt({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return st()([].concat(Ct(e),Ct(t)),["__PRIORITY__"])})).map((function(e){return(0,h.WN)(e.slice(0,t.maxResults||15),!1)})).startWith((0,h.yo)(!0)).takeUntil(e.ofType(h.Av,h.M8,h.dX)).concat([(0,h.yo)(!1)]).catch((function(e){var t=wt(wt({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return rt.Observable.from([(0,h.kE)(t),(0,h.yo)(!1)])}))}))},searchOnStartEpic:function(e,t){return e.ofType(h.Vc).switchMap((function(e){var r=e.layer,n=e.cql_filter,o=t.getState();if(0===Ct((0,dt.l2)(o)).filter((function(e){return(0,ht.y_)(e)})).filter((function(e){return e.name===r})).length)return rt.Observable.of((0,h.Tw)());var i=(0,dt.dT)(o,r);return i&&n?rt.Observable.defer((function(){return(0,bt.DH)(i.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:n}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&wt(wt({},e.features[0]),{},{typeName:r})}))})).switchMap((function(e){var r=e.type,o=e.geometry,i=e.typeName,a=at()({type:r,geometry:o}).geometry.coordinates;if(a){var c,l={lng:a[0],lat:a[1]},u=(0,Et.uy)(t.getState()),s=(0,de.reproject)(a,"EPSG:4326",u),f=s.x,p=s.y;return c=(0,gt.xt)(t.getState())?rt.Observable.of((0,St.i8)(pt()(),{component:Ot.IDENTIFY_POPUP,maxWidth:600,position:{coordinates:[f,p]}})):rt.Observable.of((0,mt.HP)()),rt.Observable.of((0,mt.lK)({latlng:l},i,[i],Tt({},i,{cql_filter:n}),null,!0)).merge(c)}return rt.Observable.empty()})).catch((function(){return rt.Observable.of((0,h.I3)())})):rt.Observable.empty()}))},searchItemSelected:function(e){return e.ofType(h.dX).switchMap((function(e){var t=rt.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=(0,Ne.Iz)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return rt.Observable.fromPromise(vt.b.Utils.getService(t.__SERVICE__.geomService.type)("",a()({},t.__SERVICE__.geomService.options,{staticFilter:r})).then((function(e){return a()({},t,{geometry:de.default.mergeToPolyGeom(e)})})))}return rt.Observable.of(e.item)})).concatMap((function(e){var t=e.bbox||e.properties.bbox||ot()(e);return[(0,v.Px)([t[0],t[1],t[2],t[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),(0,h._q)(e)]})),r=e.item,n=r&&r.__SERVICE__&&r.__SERVICE__.then,o=n?rt.Observable.of((0,h.QJ)(n.map((function(e){return wt(wt({},e),{},{options:wt({item:r},e.options)})})),{text:(0,Ne.Iz)(r.__SERVICE__.displayName||"")(r),placeholder:r.__SERVICE__.nestedPlaceholder&&(0,Ne.Iz)(r.__SERVICE__.nestedPlaceholder||"")(r),placeholderMsgId:r.__SERVICE__.nestedPlaceholderMsgId&&(0,Ne.Iz)(r.__SERVICE__.nestedPlaceholderMsgId||"")(r)},(0,Ne.Iz)(r.__SERVICE__.searchTextTemplate||"")(r))):rt.Observable.empty(),i=r.__SERVICE__&&r.__SERVICE__.searchTextTemplate,c=i?rt.Observable.of((0,h.k9)((0,Ne.Iz)(i)(r))):rt.Observable.empty();return rt.Observable.of((0,h.kV)()).concat(t,o,c)}))},zoomAndAddPointEpic:function(e,t){return e.ofType(h.b4).switchMap((function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},n=t.getState();return rt.Observable.from([(0,d.W)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:n.search&&n.search.style||qe.be}),(0,v.xy)(e.pos,e.zoom,e.crs)])}))},textSearchShowGFIEpic:function(e,t){return e.ofType(h.al).filter((function(e){var t,r=e.item,n=void 0===r?{}:r;return!(null!=n&&null!==(t=n.__SERVICE__)&&void 0!==t&&t.customGFI)})).switchMap((function(r){var n,o,i,a,c,l,u=r.item,s=t.getState(),f=null==u||null===(n=u.__SERVICE__)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.typeName,p=f&&(0,dt.dT)(s,f),d=u.bbox||u.properties.bbox||ot()(u),m=at()(u).geometry.coordinates,y={lng:m[0],lat:m[1]},b=u.id;return m&&(0,qe.zA)(null==u?void 0:u.__SERVICE__)&&(0,qe.Tv)(p,null==u?void 0:u.__SERVICE__)?(i=rt.Observable).of.apply(i,Ct(null!=u&&null!==(a=u.__SERVICE__)&&void 0!==a&&a.forceSearchLayerVisibility&&p?[(0,yt.He)(p.id,{visibility:!0})]:[]).concat([(0,mt.lK)({latlng:y},f,[f],Tt({},f,wt({info_format:jt(p,s)},b?{featureid:b,CQL_FILTER:void 0}:{})),b,!0),(0,mt.HP)(),(0,h._q)(u)])).merge(d?e.ofType(mt.XL).take(1).mapTo((0,v.Px)([d[0],d[1],d[2],d[3]],"EPSG:4326",(null==u||null===(c=u.__SERVICE__)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.maxZoomLevel)||21)).takeUntil(e.ofType(mt.Ih,mt.km)):rt.Observable.empty()).let((function(e){return d&&(0,dt._$)(t.getState())?e.startWith((0,mt.PM)(!1)).concat(rt.Observable.of((0,mt.PM)(!0))):e})):rt.Observable.empty()}))},delayedSearchEpic:function(e){return e.ofType(h.qj).switchMap((function(t){var r=t.layer,n=t.cql_filter;return e.ofType(yt.oE).filter((function(e){return e.layer.name===r})).take(1).switchMap((function(){return rt.Observable.of((0,h.l4)({layer:r,cql_filter:n}))}))}))},getFeatureInfoOfSelectedItem:function(e,t){return e.ofType(h.wn).switchMap((function(e){var r=e.markerPosition;if(r.__SERVICE__&&!lt()(r.__SERVICE__.launchInfoPanel)&&r.__SERVICE__.options&&r.__SERVICE__.options.typeName){var n=at()(r).geometry.coordinates,o={lng:n[0],lat:n[1]},i=r.__SERVICE__.options.typeName;if(n){var a=t.getState(),c=i&&(0,dt.dT)(a,i),l=null,u=[],s={},f=!1;return"single_layer"===r.__SERVICE__.launchInfoPanel&&(f=r.__SERVICE__.forceSearchLayerVisibility,u=[i],l=r.id,s=Tt({},r.__SERVICE__.options.typeName,wt({info_format:jt(c,a)},l?{featureid:l,CQL_FILTER:void 0}:{}))),[].concat(Ct(f&&c?[(0,yt.He)(c.id,{visibility:!0})]:[]),Ct(r.__SERVICE__.openFeatureInfoButtonEnabled?[]:[(0,mt.lK)({latlng:o},i,u,s,l,!0)]),[(0,mt.HP)()])}}return[rt.Observable.empty()]})).delay(50)}},reducers:{search:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case h.dX:var n,o,i=(r.service||{}).type,c="nominatim"===i?null===(n=r.item.properties)||void 0===n?void 0:n.display_name:"wfs"===i?(0,Ne.Iz)((null===(o=r.service)||void 0===o?void 0:o.displayName)||"")(r.item):t.searchText;return Ft(Ft({},t),{},{searchText:c||t.searchText||""});case h.NN:return a()({},t,{loading:r.loading});case h.O7:return a()({},t,{error:r.error});case h.gs:return a()({},t,{searchText:r.searchText,error:null});case h.p7:var l=r.results;return!0===r.append&&t&&t.results&&(l=[].concat(At(t.results),At(r.results))),a()({},t,{results:l,error:null});case h.Av:return a()({},t,{results:null,error:null});case h.wn:var u=r.markerPosition.latlng?{latlng:r.markerPosition.latlng,lat:r.markerPosition.latlng.lat,lng:r.markerPosition.latlng.lng}:r.markerPosition;return a()({},t,{markerPosition:u,markerLabel:r.markerLabel});case h.Gh:return a()({},t,{highlightedFeature:r.highlightedFeature});case h.M8:return{style:t.style||{}};case y.l:return null;case h.C2:return a()({},t,{selectedServices:r.services,searchText:r.searchText,selectedItems:(t.selectedItems||[]).concat(r.items)});case h.oQ:return t?a()({},{selectedItems:t.selectedItems&&t.selectedItems.filter((function(e){return e!==r.item})),searchText:""===t.searchText&&r.item&&r.item.text?r.item.text.substring(0,r.item.text.length):t.searchText}):t;case h.x2:return a()({},t,{style:r.style});case h.Y7:return Ft(Ft({},t),{},{activeSearchTool:r.activeSearchTool});case h.GI:return Ft(Ft({},t),{},{format:r.format});case h.KP:return Ft(Ft({},t),{},{coordinate:Ft(Ft({},t.coordinate),{},Dt({},r.coord,r.val))});case h.dS:return a()({},t,{markerPosition:null!=t&&null!==(e=t.markerPosition)&&void 0!==e&&e.latlng?{}:null==t?void 0:t.markerPosition});default:return t}},mapInfo:Rt.Z,searchconfig:b.Z}}},360951:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(240626),o=r(782904),i=r(881808),a=r(727418),c=r.n(a);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}const u=function(){var e,t,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1?arguments[1]:void 0;switch(u.type){case n.bL:return c()({},a,(e={},t=u.property,r=u.value,(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e));case i.ok:var s=u.config.map.text_search_config||u.config.map.text_serch_config;return c()({},a,{textSearchConfig:s});case o.l:case n.f6:return c()({},a,{service:void 0,page:u.page,init_service_values:void 0,editIdx:void 0});case n.E_:var f=(a.textSearchConfig&&a.textSearchConfig.services||[]).slice(),p=c()({},u.service,{priority:parseInt(u.service.priority,10)});return-1!==u.idx?f[u.idx]=p:f.push(p),c()({},a,{service:void 0,page:0,init_service_values:void 0,editIdx:void 0,textSearchConfig:{services:f,override:a.textSearchConfig&&a.textSearchConfig.override||!1}});default:return a}}},55105:(e,t,r)=>{"use strict";r.d(t,{Ss:()=>m,Nr:()=>y,QJ:()=>v,ic:()=>b,Jz:()=>h,VM:()=>g,CF:()=>S,Ju:()=>O,Fc:()=>E,gQ:()=>_});var n=r(91175),o=r.n(n),i=r(288306),a=r.n(i),c=r(800827),l=r(552259),u=r(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){return e.maplayout&&e.maplayout.layout||{}},y=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},b=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=m(e),o=v(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return p(p({},e),{},d({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(m(e))+JSON.stringify(v(e))+JSON.stringify(t)+(r?"_isDock":"")})),h=function(e){var t;return!(null===(t=m(e))||void 0===t||!t.rightPanel)},g=function(e){var t,r=u.ZP.getConfigProp("mapLayout")||l.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=m(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},S=function(e){var t=(0,c.Od)(e),r=y(e);return r&&t&&t.size&&{left:(0,l.pb)(r.left,t.size.width),bottom:(0,l.pb)(r.bottom,t.size.height),right:(0,l.pb)(r.right,t.size.width),top:(0,l.pb)(r.top,t.size.height)}},O=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},E=function(e){return b(e,{height:!0,right:!0},!0)},_=function(e){return b(e,{right:!0},!0)}},88791:(e,t,r)=>{"use strict";r.d(t,{Tp:()=>a,zL:()=>c,mr:()=>l});var n=r(227361),o=r.n(n),i=r(367306),a=function(e){return o()(e,"sidebarmenu.lastActiveItem",!1)},c=function(e){return o()(e,"controls.sidebarMenu.enabled",!1)},l=function(e){return(0,i.Wy)(e)}}}]);