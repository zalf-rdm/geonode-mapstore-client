(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[39547,82582,65417],{68311:(t,r,e)=>{"use strict";e.r(r),e.d(r,{default:()=>F});var n=e(558422),o=e(435010),i=e(922556),a=e(191736),l=e(64678),u=e(302033),c=e(960188),s=e(492083),f=e(57276),h=e(397580),d=e(31660),p=e(81090),m=e(391900),v=e(447539),y=e(130283),g=e(351345),w=e(258958),b=e(717621),x=e.n(b),P=e(198683),_=e(307887),S=e(854788);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function j(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?j(Object(e),!0).forEach((function(r){D(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):j(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function D(t,r,e){return(r=X(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function C(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X(n.key),n)}}function X(t){var r=function(t){if("object"!=O(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=O(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(r)?r:r+""}function Y(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return B(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?B(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var E=new l.Z,Z={Circle:function(t){var r=t.map,e=t.onDrawing;return function(t,n,o){var i=n;i||(i=new u.ZP([])).set("@geometry",new c.Z([]));var a=o?o.getCode():r.getView().getProjection().getCode(),l=(0,d.vs)(t[0],a,"EPSG:4326"),s=(0,d.vs)(t[1],a,"EPSG:4326"),f=(0,h.Sp)(l,s),p=(0,u.iu)(l,f,128);return p.transform("EPSG:4326",a),i.setCoordinates(p.getCoordinates()),i.get("@geometry").setCoordinates(t[0]),i.set("@properties",{radius:f,geodesic:!0}),e({coordinates:Y(t)}),i}},LineString:function(t){var r=t.map,e=t.onDrawing;return function(t,n,o){var i=n;i||(i=new s.Z([])).set("@geometry",new s.Z([]));var a=o?o.getCode():r.getView().getProjection().getCode(),l=(0,_.transformLineToArcs)(t.map((function(t){var r=(0,_.reproject)(t,a,"EPSG:4326");return[r.x,r.y]})));return i.setCoordinates(l.map((function(t){var r=(0,_.reproject)(t,"EPSG:4326",a);return[r.x,r.y]}))),i.get("@geometry").setCoordinates(t),i.set("@properties",{geodesic:!0}),e({coordinates:Y(t)}),i}},Polygon:function(t){var r=t.map,e=t.onDrawing;return function(t,n,o){var i=n;i||(i=new u.ZP([])).set("@geometry",new u.ZP([]));var a=o?o.getCode():r.getView().getProjection().getCode(),l=t[0].length?[[].concat(Y(t[0]),[t[0][0]])]:[],c=(0,_.transformLineToArcs)(l[0].map((function(t){var r=(0,_.reproject)(t,a,"EPSG:4326");return[r.x,r.y]})));return i.setCoordinates([c.map((function(t){var r=(0,_.reproject)(t,"EPSG:4326",a);return[r.x,r.y]}))]),i.get("@geometry").setCoordinates(l),i.set("@properties",{geodesic:!0}),e({coordinates:[].concat(l)}),i}}},L={Point:function(t){var r=t.onDrawing;return function(t,e){var n=e;return n||(n=new c.Z([])),n.setCoordinates(t),r({coordinates:Y(t)}),n}},Circle:function(t){var r=t.onDrawing;return function(t,e){var n=e;n||(n=new f.Z([])).set("@geometry",new c.Z([]));var o=(0,m.bI)(t[0],t[1]),i=Math.sqrt(o);return n.setCenterAndRadius(t[0],i),n.get("@geometry").setCoordinates(t[0]),n.set("@properties",{radius:i}),r({coordinates:Y(t)}),n}},LineString:function(t){var r=t.onDrawing;return function(t,e){var n=e;return n||(n=new s.Z([])),n.setCoordinates(t),r({coordinates:Y(t)}),n}},Polygon:function(t){var r=t.onDrawing;return function(t,e){var n=e;n||(n=new u.ZP([]));var o=t[0].length?[[].concat(Y(t[0]),[t[0][0]])]:[];return n.setCoordinates(o),r({coordinates:[].concat(o)}),n}}};function A(t,r){if(void 0===r)return t;var e=x()(t).toRgb(),n=e.r,o=e.g,i=e.b;return"rgba(".concat([n,o,i,r].join(", "),")")}const k=function(){return t=function t(){var r=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.type,l=e.coordinatesLength,u=!!e.geodesic,c=e.onDrawStart?e.onDrawStart:function(){},s=e.onDrawing?e.onDrawing:function(){},f=e.onDrawEnd?e.onDrawEnd:function(){};this._map=e.map;var h=(0,S.E4)(e.style),d=new i.Z({wrapX:!1});this._layer=new a.Z({source:d,zIndex:1/0,style:function(t){var r,e,n,o,i,a,l,u,c,s,f=t.getGeometry().getType(),d=new w.Z(M({color:A(null==h||null===(r=h.line)||void 0===r?void 0:r.color,null==h||null===(e=h.line)||void 0===e?void 0:e.opacity),width:null==h||null===(n=h.line)||void 0===n?void 0:n.width},(null==h||null===(o=h.line)||void 0===o?void 0:o.dashLength)&&{lineDash:[h.line.dashLength,h.line.dashLength]})),p=new g.Z({color:A(null==h||null===(i=h.area)||void 0===i?void 0:i.color,null==h||null===(a=h.area)||void 0===a?void 0:a.opacity)});return"Point"===f?new v.ZP({image:new y.Z({stroke:new w.Z({color:A(null==h||null===(l=h.coordinatesNode)||void 0===l?void 0:l.color,null==h||null===(u=h.coordinatesNode)||void 0===u?void 0:u.opacity),width:null==h||null===(c=h.coordinatesNode)||void 0===c?void 0:c.width}),radius:null==h||null===(s=h.coordinatesNode)||void 0===s?void 0:s.radius})}):"LineString"===f?new v.ZP({stroke:d}):new v.ZP({stroke:d,fill:p})}});var m=u&&Z[n]?Z[n]:L[n];this._draw=new o.ZP({source:d,type:n,maxPoints:l,stopClick:!0,freehandCondition:P.Fi,geometryFunction:m?m({map:this._map,onDrawing:s}):void 0,style:function(t){var r,e,o,i,a,l,u,c,s,f,d=t.getGeometry().getType(),p=new w.Z(M({color:A(null==h||null===(r=h.lineDrawing)||void 0===r?void 0:r.color,null==h||null===(e=h.lineDrawing)||void 0===e?void 0:e.opacity),width:null==h||null===(o=h.lineDrawing)||void 0===o?void 0:o.width},(null==h||null===(i=h.lineDrawing)||void 0===i?void 0:i.dashLength)&&{lineDash:[h.lineDrawing.dashLength,h.lineDrawing.dashLength]})),m=new g.Z({color:A(null==h||null===(a=h.areaDrawing)||void 0===a?void 0:a.color,null==h||null===(l=h.areaDrawing)||void 0===l?void 0:l.opacity)});return"Point"===d?new v.ZP({image:new y.Z({stroke:new w.Z({color:A(null==h||null===(u=h.cursor)||void 0===u?void 0:u.color,null==h||null===(c=h.cursor)||void 0===c?void 0:c.opacity),width:null==h||null===(s=h.cursor)||void 0===s?void 0:s.width}),radius:null==h||null===(f=h.cursor)||void 0===f?void 0:f.radius})}):"LineString"===d&&"LineString"===n?new v.ZP({stroke:p}):"Polygon"===d&&["Polygon","Circle"].includes(n)||"Circle"===d?new v.ZP({stroke:p,fill:m}):null}}),this._draw.on("drawstart",(function(){c()})),this._draw.on("drawend",(function(t){var e=t.feature.getGeometry().get("@properties")||{geodesic:u},n=t.feature.getGeometry().get("@geometry")?new p.Z({geometry:t.feature.getGeometry().get("@geometry")}):t.feature;f({feature:M(M({},E.writeFeatureObject(n,{featureProjection:r._map.getView().getProjection().getCode(),dataProjection:"EPSG:4326"})),{},{properties:e})})})),this._map.addInteraction(this._draw),this._map.addLayer(this._layer)},(r=[{key:"getCoordinates",value:function(){return[]}},{key:"remove",value:function(){this._draw&&(this._map.removeInteraction(this._draw),this._draw=null),this._layer&&(this._map.removeLayer(this._layer),this._layer=null)}}])&&C(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();function G(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}const F=function(t){var r=t.map,e=t.active,o=t.geometryType,i=void 0===o?"LineString":o,a=t.geodesic,l=void 0!==a&&a,u=t.onDrawStart,c=void 0===u?function(){}:u,s=t.onDrawing,f=void 0===s?function(){}:s,h=t.onDrawEnd,d=void 0===h?function(){}:h,p=t.onInit,m=void 0===p?function(){}:p,v=t.onDestroy,y=void 0===v?function(){}:v,g=t.coordinatesLength,w=t.style,b=(0,n.useRef)();return(0,n.useEffect)((function(){return r&&e&&(m(),b.current=new k({map:r,type:i,coordinatesLength:g,style:w,geodesic:l,onDrawStart:c,onDrawing:f,onDrawEnd:d})),function(){var t;b.current&&(y({coordinates:(t=b.current.getCoordinates(),function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return G(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?G(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),b.current.remove(),b.current=null)}}),[r,e,i,g,l]),null}},854788:(t,r,e)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function i(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?o(Object(e),!0).forEach((function(r){a(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function a(t,r,e){return(r=function(t){var r=function(t){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=n(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function l(t){return i({wireframe:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:.5},lineDrawing:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:3,dashLength:8},line:{color:"#ffcc33",opacity:1,depthFailColor:"#ffcc33",depthFailOpacity:.4,width:2},areaDrawing:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},area:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},cursor:{color:"#ff0000",width:2,radius:4},coordinatesNode:{color:"#333333",width:2,radius:5}},t)}e.d(r,{E4:()=>l,cC:()=>c,r2:()=>s});var u=function(t){var r;return null==t||null===(r=t.geometry)||void 0===r?void 0:r.type},c=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).getGeometryType,r=void 0===t?u:t;return function(t){return i(i({},null==t?void 0:t.properties),{},{geometryType:r(t)})}},s=function(t,r){return i(i({},null==r?void 0:r.properties),void 0!==(null==t?void 0:t.radius)&&{radius:t.radius})}},382582:function(t){t.exports=function(){"use strict";function t(t,n,o,i,a){!function t(e,n,o,i,a){for(;i>o;){if(i-o>600){var l=i-o+1,u=n-o+1,c=Math.log(l),s=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*s*(l-s)/l)*(u-l/2<0?-1:1);t(e,n,Math.max(o,Math.floor(n-u*s/l+f)),Math.min(i,Math.floor(n+(l-u)*s/l+f)),a)}var h=e[n],d=o,p=i;for(r(e,o,n),a(e[i],h)>0&&r(e,o,i);d<p;){for(r(e,d,p),d++,p--;a(e[d],h)<0;)d++;for(;a(e[p],h)>0;)p--}0===a(e[o],h)?r(e,o,p):r(e,++p,i),p<=n&&(o=p+1),n<=p&&(i=p-1)}}(t,n,o||0,i||t.length-1,a||e)}function r(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function e(t,r){return t<r?-1:t>r?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,r,e){if(!e)return r.indexOf(t);for(var n=0;n<r.length;n++)if(e(t,r[n]))return n;return-1}function i(t,r){a(t,0,t.children.length,r,t)}function a(t,r,e,n,o){o||(o=p(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i=r;i<e;i++){var a=t.children[i];l(o,t.leaf?n(a):a)}return o}function l(t,r){return t.minX=Math.min(t.minX,r.minX),t.minY=Math.min(t.minY,r.minY),t.maxX=Math.max(t.maxX,r.maxX),t.maxY=Math.max(t.maxY,r.maxY),t}function u(t,r){return t.minX-r.minX}function c(t,r){return t.minY-r.minY}function s(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,r){return t.minX<=r.minX&&t.minY<=r.minY&&r.maxX<=t.maxX&&r.maxY<=t.maxY}function d(t,r){return r.minX<=t.maxX&&r.minY<=t.maxY&&r.maxX>=t.minX&&r.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(r,e,n,o,i){for(var a=[e,n];a.length;)if(!((n=a.pop())-(e=a.pop())<=o)){var l=e+Math.ceil((n-e)/o/2)*o;t(r,l,e,n,i),a.push(e,l,l,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var r=this.data,e=[];if(!d(t,r))return e;for(var n=this.toBBox,o=[];r;){for(var i=0;i<r.children.length;i++){var a=r.children[i],l=r.leaf?n(a):a;d(t,l)&&(r.leaf?e.push(a):h(t,l)?this._all(a,e):o.push(a))}r=o.pop()}return e},n.prototype.collides=function(t){var r=this.data;if(!d(t,r))return!1;for(var e=[];r;){for(var n=0;n<r.children.length;n++){var o=r.children[n],i=r.leaf?this.toBBox(o):o;if(d(t,i)){if(r.leaf||h(t,i))return!0;e.push(o)}}r=e.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var r=0;r<t.length;r++)this.insert(t[r]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=p([]),this},n.prototype.remove=function(t,r){if(!t)return this;for(var e,n,i,a=this.data,l=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],e=c.pop(),i=!0),a.leaf){var s=o(t,a.children,r);if(-1!==s)return a.children.splice(s,1),u.push(a),this._condense(u),this}i||a.leaf||!h(a,l)?n?(e++,a=n.children[e],i=!1):a=null:(u.push(a),c.push(e),e=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,r){return t.minX-r.minX},n.prototype.compareMinY=function(t,r){return t.minY-r.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,r){for(var e=[];t;)t.leaf?r.push.apply(r,t.children):e.push.apply(e,t.children),t=e.pop();return r},n.prototype._build=function(t,r,e,n){var o,a=e-r+1,l=this._maxEntries;if(a<=l)return i(o=p(t.slice(r,e+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,n-1))),(o=p([])).leaf=!1,o.height=n;var u=Math.ceil(a/l),c=u*Math.ceil(Math.sqrt(l));m(t,r,e,c,this.compareMinX);for(var s=r;s<=e;s+=c){var f=Math.min(s+c-1,e);m(t,s,f,u,this.compareMinY);for(var h=s;h<=f;h+=u){var d=Math.min(h+u-1,f);o.children.push(this._build(t,h,d,n-1))}}return i(o,this.toBBox),o},n.prototype._chooseSubtree=function(t,r,e,n){for(;n.push(r),!r.leaf&&n.length-1!==e;){for(var o=1/0,i=1/0,a=void 0,l=0;l<r.children.length;l++){var u=r.children[l],c=s(u),f=(h=t,d=u,(Math.max(d.maxX,h.maxX)-Math.min(d.minX,h.minX))*(Math.max(d.maxY,h.maxY)-Math.min(d.minY,h.minY))-c);f<i?(i=f,o=c<o?c:o,a=u):f===i&&c<o&&(o=c,a=u)}r=a||r.children[0]}var h,d;return r},n.prototype._insert=function(t,r,e){var n=e?t:this.toBBox(t),o=[],i=this._chooseSubtree(n,this.data,r,o);for(i.children.push(t),l(i,n);r>=0&&o[r].children.length>this._maxEntries;)this._split(o,r),r--;this._adjustParentBBoxes(n,o,r)},n.prototype._split=function(t,r){var e=t[r],n=e.children.length,o=this._minEntries;this._chooseSplitAxis(e,o,n);var a=this._chooseSplitIndex(e,o,n),l=p(e.children.splice(a,e.children.length-a));l.height=e.height,l.leaf=e.leaf,i(e,this.toBBox),i(l,this.toBBox),r?t[r-1].children.push(l):this._splitRoot(e,l)},n.prototype._splitRoot=function(t,r){this.data=p([t,r]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,r,e){for(var n,o,i,l,u,c,f,h=1/0,d=1/0,p=r;p<=e-r;p++){var m=a(t,0,p,this.toBBox),v=a(t,p,e,this.toBBox),y=(o=m,i=v,void 0,void 0,void 0,void 0,l=Math.max(o.minX,i.minX),u=Math.max(o.minY,i.minY),c=Math.min(o.maxX,i.maxX),f=Math.min(o.maxY,i.maxY),Math.max(0,c-l)*Math.max(0,f-u)),g=s(m)+s(v);y<h?(h=y,n=p,d=g<d?g:d):y===h&&g<d&&(d=g,n=p)}return n||e-r},n.prototype._chooseSplitAxis=function(t,r,e){var n=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,r,e,n)<this._allDistMargin(t,r,e,o)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,r,e,n){t.children.sort(n);for(var o=this.toBBox,i=a(t,0,r,o),u=a(t,e-r,e,o),c=f(i)+f(u),s=r;s<e-r;s++){var h=t.children[s];l(i,t.leaf?o(h):h),c+=f(i)}for(var d=e-r-1;d>=r;d--){var p=t.children[d];l(u,t.leaf?o(p):p),c+=f(u)}return c},n.prototype._adjustParentBBoxes=function(t,r,e){for(var n=e;n>=0;n--)l(r[n],t)},n.prototype._condense=function(t){for(var r=t.length-1,e=void 0;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():i(t[r],this.toBBox)},n}()}}]);