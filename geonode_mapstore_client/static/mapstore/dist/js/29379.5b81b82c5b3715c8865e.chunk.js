/*! For license information please see 29379.5b81b82c5b3715c8865e.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[29379],{979811:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({XTRANSLATE:"xTranslate",YTRANSLATE:"yTranslate",ZTRANSLATE:"zTranslate",XROTATE:"xRotate",YROTATE:"yRotate",ZROTATE:"zRotate",XSCALE:"xScale",YSCALE:"yScale",ZSCALE:"zScale",UNIFORMSCALE:"uniformScale"})},418547:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(762031),o=n(660904),r=n(790087),s=n(449809),a=n(234146),c=n(11020),l=n(765153),u=n(87200),d=n(951775),h=n(263825),f=n(61885),p=n(804868),m=n(427183);const _=new o.Z;function g(e){const t=(e=(0,a.Z)(e,a.Z.EMPTY_OBJECT)).minimum,n=e.maximum;if(r.Z.typeOf.object("min",t),r.Z.typeOf.object("max",n),(0,c.Z)(e.offsetAttribute)&&e.offsetAttribute===f.Z.TOP)throw new l.Z("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");const i=(0,a.Z)(e.vertexFormat,m.Z.DEFAULT);this._minimum=o.Z.clone(t),this._maximum=o.Z.clone(n),this._vertexFormat=i,this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxGeometry"}g.fromDimensions=function(e){const t=(e=(0,a.Z)(e,a.Z.EMPTY_OBJECT)).dimensions;r.Z.typeOf.object("dimensions",t),r.Z.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),r.Z.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),r.Z.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);const n=o.Z.multiplyByScalar(t,.5,new o.Z);return new g({minimum:o.Z.negate(n,new o.Z),maximum:n,vertexFormat:e.vertexFormat,offsetAttribute:e.offsetAttribute})},g.fromAxisAlignedBoundingBox=function(e){return r.Z.typeOf.object("boundingBox",e),new g({minimum:e.minimum,maximum:e.maximum})},g.packedLength=2*o.Z.packedLength+m.Z.packedLength+1,g.pack=function(e,t,n){return r.Z.typeOf.object("value",e),r.Z.defined("array",t),n=(0,a.Z)(n,0),o.Z.pack(e._minimum,t,n),o.Z.pack(e._maximum,t,n+o.Z.packedLength),m.Z.pack(e._vertexFormat,t,n+2*o.Z.packedLength),t[n+2*o.Z.packedLength+m.Z.packedLength]=(0,a.Z)(e._offsetAttribute,-1),t};const Z=new o.Z,y=new o.Z,b=new m.Z,v={minimum:Z,maximum:y,vertexFormat:b,offsetAttribute:void 0};let A;g.unpack=function(e,t,n){r.Z.defined("array",e),t=(0,a.Z)(t,0);const i=o.Z.unpack(e,t,Z),s=o.Z.unpack(e,t+o.Z.packedLength,y),l=m.Z.unpack(e,t+2*o.Z.packedLength,b),u=e[t+2*o.Z.packedLength+m.Z.packedLength];return(0,c.Z)(n)?(n._minimum=o.Z.clone(i,n._minimum),n._maximum=o.Z.clone(s,n._maximum),n._vertexFormat=m.Z.clone(l,n._vertexFormat),n._offsetAttribute=-1===u?void 0:u,n):(v.offsetAttribute=-1===u?void 0:u,new g(v))},g.createGeometry=function(e){const t=e._minimum,n=e._maximum,r=e._vertexFormat;if(o.Z.equals(t,n))return;const a=new h.Z;let l,m;if(r.position&&(r.st||r.normal||r.tangent||r.bitangent)){if(r.position&&(m=new Float64Array(72),m[0]=t.x,m[1]=t.y,m[2]=n.z,m[3]=n.x,m[4]=t.y,m[5]=n.z,m[6]=n.x,m[7]=n.y,m[8]=n.z,m[9]=t.x,m[10]=n.y,m[11]=n.z,m[12]=t.x,m[13]=t.y,m[14]=t.z,m[15]=n.x,m[16]=t.y,m[17]=t.z,m[18]=n.x,m[19]=n.y,m[20]=t.z,m[21]=t.x,m[22]=n.y,m[23]=t.z,m[24]=n.x,m[25]=t.y,m[26]=t.z,m[27]=n.x,m[28]=n.y,m[29]=t.z,m[30]=n.x,m[31]=n.y,m[32]=n.z,m[33]=n.x,m[34]=t.y,m[35]=n.z,m[36]=t.x,m[37]=t.y,m[38]=t.z,m[39]=t.x,m[40]=n.y,m[41]=t.z,m[42]=t.x,m[43]=n.y,m[44]=n.z,m[45]=t.x,m[46]=t.y,m[47]=n.z,m[48]=t.x,m[49]=n.y,m[50]=t.z,m[51]=n.x,m[52]=n.y,m[53]=t.z,m[54]=n.x,m[55]=n.y,m[56]=n.z,m[57]=t.x,m[58]=n.y,m[59]=n.z,m[60]=t.x,m[61]=t.y,m[62]=t.z,m[63]=n.x,m[64]=t.y,m[65]=t.z,m[66]=n.x,m[67]=t.y,m[68]=n.z,m[69]=t.x,m[70]=t.y,m[71]=n.z,a.position=new d.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:m})),r.normal){const e=new Float32Array(72);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=1,e[9]=0,e[10]=0,e[11]=1,e[12]=0,e[13]=0,e[14]=-1,e[15]=0,e[16]=0,e[17]=-1,e[18]=0,e[19]=0,e[20]=-1,e[21]=0,e[22]=0,e[23]=-1,e[24]=1,e[25]=0,e[26]=0,e[27]=1,e[28]=0,e[29]=0,e[30]=1,e[31]=0,e[32]=0,e[33]=1,e[34]=0,e[35]=0,e[36]=-1,e[37]=0,e[38]=0,e[39]=-1,e[40]=0,e[41]=0,e[42]=-1,e[43]=0,e[44]=0,e[45]=-1,e[46]=0,e[47]=0,e[48]=0,e[49]=1,e[50]=0,e[51]=0,e[52]=1,e[53]=0,e[54]=0,e[55]=1,e[56]=0,e[57]=0,e[58]=1,e[59]=0,e[60]=0,e[61]=-1,e[62]=0,e[63]=0,e[64]=-1,e[65]=0,e[66]=0,e[67]=-1,e[68]=0,e[69]=0,e[70]=-1,e[71]=0,a.normal=new d.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:e})}if(r.st){const e=new Float32Array(48);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=1,e[5]=1,e[6]=0,e[7]=1,e[8]=1,e[9]=0,e[10]=0,e[11]=0,e[12]=0,e[13]=1,e[14]=1,e[15]=1,e[16]=0,e[17]=0,e[18]=1,e[19]=0,e[20]=1,e[21]=1,e[22]=0,e[23]=1,e[24]=1,e[25]=0,e[26]=0,e[27]=0,e[28]=0,e[29]=1,e[30]=1,e[31]=1,e[32]=1,e[33]=0,e[34]=0,e[35]=0,e[36]=0,e[37]=1,e[38]=1,e[39]=1,e[40]=0,e[41]=0,e[42]=1,e[43]=0,e[44]=1,e[45]=1,e[46]=0,e[47]=1,a.st=new d.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:2,values:e})}if(r.tangent){const e=new Float32Array(72);e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=1,e[10]=0,e[11]=0,e[12]=-1,e[13]=0,e[14]=0,e[15]=-1,e[16]=0,e[17]=0,e[18]=-1,e[19]=0,e[20]=0,e[21]=-1,e[22]=0,e[23]=0,e[24]=0,e[25]=1,e[26]=0,e[27]=0,e[28]=1,e[29]=0,e[30]=0,e[31]=1,e[32]=0,e[33]=0,e[34]=1,e[35]=0,e[36]=0,e[37]=-1,e[38]=0,e[39]=0,e[40]=-1,e[41]=0,e[42]=0,e[43]=-1,e[44]=0,e[45]=0,e[46]=-1,e[47]=0,e[48]=-1,e[49]=0,e[50]=0,e[51]=-1,e[52]=0,e[53]=0,e[54]=-1,e[55]=0,e[56]=0,e[57]=-1,e[58]=0,e[59]=0,e[60]=1,e[61]=0,e[62]=0,e[63]=1,e[64]=0,e[65]=0,e[66]=1,e[67]=0,e[68]=0,e[69]=1,e[70]=0,e[71]=0,a.tangent=new d.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:e})}if(r.bitangent){const e=new Float32Array(72);e[0]=0,e[1]=1,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=1,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=1,e[14]=0,e[15]=0,e[16]=1,e[17]=0,e[18]=0,e[19]=1,e[20]=0,e[21]=0,e[22]=1,e[23]=0,e[24]=0,e[25]=0,e[26]=1,e[27]=0,e[28]=0,e[29]=1,e[30]=0,e[31]=0,e[32]=1,e[33]=0,e[34]=0,e[35]=1,e[36]=0,e[37]=0,e[38]=1,e[39]=0,e[40]=0,e[41]=1,e[42]=0,e[43]=0,e[44]=1,e[45]=0,e[46]=0,e[47]=1,e[48]=0,e[49]=0,e[50]=1,e[51]=0,e[52]=0,e[53]=1,e[54]=0,e[55]=0,e[56]=1,e[57]=0,e[58]=0,e[59]=1,e[60]=0,e[61]=0,e[62]=1,e[63]=0,e[64]=0,e[65]=1,e[66]=0,e[67]=0,e[68]=1,e[69]=0,e[70]=0,e[71]=1,a.bitangent=new d.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:e})}l=new Uint16Array(36),l[0]=0,l[1]=1,l[2]=2,l[3]=0,l[4]=2,l[5]=3,l[6]=6,l[7]=5,l[8]=4,l[9]=7,l[10]=6,l[11]=4,l[12]=8,l[13]=9,l[14]=10,l[15]=8,l[16]=10,l[17]=11,l[18]=14,l[19]=13,l[20]=12,l[21]=15,l[22]=14,l[23]=12,l[24]=18,l[25]=17,l[26]=16,l[27]=19,l[28]=18,l[29]=16,l[30]=20,l[31]=21,l[32]=22,l[33]=20,l[34]=22,l[35]=23}else m=new Float64Array(24),m[0]=t.x,m[1]=t.y,m[2]=t.z,m[3]=n.x,m[4]=t.y,m[5]=t.z,m[6]=n.x,m[7]=n.y,m[8]=t.z,m[9]=t.x,m[10]=n.y,m[11]=t.z,m[12]=t.x,m[13]=t.y,m[14]=n.z,m[15]=n.x,m[16]=t.y,m[17]=n.z,m[18]=n.x,m[19]=n.y,m[20]=n.z,m[21]=t.x,m[22]=n.y,m[23]=n.z,a.position=new d.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:m}),l=new Uint16Array(36),l[0]=4,l[1]=5,l[2]=6,l[3]=4,l[4]=6,l[5]=7,l[6]=1,l[7]=0,l[8]=3,l[9]=1,l[10]=3,l[11]=2,l[12]=1,l[13]=6,l[14]=5,l[15]=1,l[16]=2,l[17]=6,l[18]=2,l[19]=3,l[20]=7,l[21]=2,l[22]=7,l[23]=6,l[24]=3,l[25]=0,l[26]=4,l[27]=3,l[28]=4,l[29]=7,l[30]=0,l[31]=1,l[32]=5,l[33]=0,l[34]=5,l[35]=4;const g=o.Z.subtract(n,t,_),Z=.5*o.Z.magnitude(g);if((0,c.Z)(e._offsetAttribute)){const t=m.length,n=e._offsetAttribute===f.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);a.applyOffset=new d.Z({componentDatatype:s.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.Z({attributes:a,indices:l,primitiveType:p.Z.TRIANGLES,boundingSphere:new i.Z(o.Z.ZERO,Z),offsetAttribute:e._offsetAttribute})},g.getUnitBox=function(){return(0,c.Z)(A)||(A=g.createGeometry(g.fromDimensions({dimensions:new o.Z(1,1,1),vertexFormat:m.Z.POSITION_ONLY}))),A};const T=g},77305:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(762031),o=n(660904),r=n(790087),s=n(449809),a=n(234146),c=n(11020),l=n(765153),u=n(87200),d=n(951775),h=n(263825),f=n(61885),p=n(804868);const m=new o.Z;function _(e){const t=(e=(0,a.Z)(e,a.Z.EMPTY_OBJECT)).minimum,n=e.maximum;if(r.Z.typeOf.object("min",t),r.Z.typeOf.object("max",n),(0,c.Z)(e.offsetAttribute)&&e.offsetAttribute===f.Z.TOP)throw new l.Z("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._min=o.Z.clone(t),this._max=o.Z.clone(n),this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxOutlineGeometry"}_.fromDimensions=function(e){const t=(e=(0,a.Z)(e,a.Z.EMPTY_OBJECT)).dimensions;r.Z.typeOf.object("dimensions",t),r.Z.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),r.Z.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),r.Z.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);const n=o.Z.multiplyByScalar(t,.5,new o.Z);return new _({minimum:o.Z.negate(n,new o.Z),maximum:n,offsetAttribute:e.offsetAttribute})},_.fromAxisAlignedBoundingBox=function(e){return r.Z.typeOf.object("boundindBox",e),new _({minimum:e.minimum,maximum:e.maximum})},_.packedLength=2*o.Z.packedLength+1,_.pack=function(e,t,n){return r.Z.typeOf.object("value",e),r.Z.defined("array",t),n=(0,a.Z)(n,0),o.Z.pack(e._min,t,n),o.Z.pack(e._max,t,n+o.Z.packedLength),t[n+2*o.Z.packedLength]=(0,a.Z)(e._offsetAttribute,-1),t};const g=new o.Z,Z=new o.Z,y={minimum:g,maximum:Z,offsetAttribute:void 0};_.unpack=function(e,t,n){r.Z.defined("array",e),t=(0,a.Z)(t,0);const i=o.Z.unpack(e,t,g),s=o.Z.unpack(e,t+o.Z.packedLength,Z),l=e[t+2*o.Z.packedLength];return(0,c.Z)(n)?(n._min=o.Z.clone(i,n._min),n._max=o.Z.clone(s,n._max),n._offsetAttribute=-1===l?void 0:l,n):(y.offsetAttribute=-1===l?void 0:l,new _(y))},_.createGeometry=function(e){const t=e._min,n=e._max;if(o.Z.equals(t,n))return;const r=new h.Z,a=new Uint16Array(24),l=new Float64Array(24);l[0]=t.x,l[1]=t.y,l[2]=t.z,l[3]=n.x,l[4]=t.y,l[5]=t.z,l[6]=n.x,l[7]=n.y,l[8]=t.z,l[9]=t.x,l[10]=n.y,l[11]=t.z,l[12]=t.x,l[13]=t.y,l[14]=n.z,l[15]=n.x,l[16]=t.y,l[17]=n.z,l[18]=n.x,l[19]=n.y,l[20]=n.z,l[21]=t.x,l[22]=n.y,l[23]=n.z,r.position=new d.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:l}),a[0]=4,a[1]=5,a[2]=5,a[3]=6,a[4]=6,a[5]=7,a[6]=7,a[7]=4,a[8]=0,a[9]=1,a[10]=1,a[11]=2,a[12]=2,a[13]=3,a[14]=3,a[15]=0,a[16]=0,a[17]=4,a[18]=1,a[19]=5,a[20]=2,a[21]=6,a[22]=3,a[23]=7;const _=o.Z.subtract(n,t,m),g=.5*o.Z.magnitude(_);if((0,c.Z)(e._offsetAttribute)){const t=l.length,n=e._offsetAttribute===f.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);r.applyOffset=new d.Z({componentDatatype:s.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.Z({attributes:r,indices:a,primitiveType:p.Z.LINES,boundingSphere:new i.Z(o.Z.ZERO,g),offsetAttribute:e._offsetAttribute})};const b=_},830117:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(660904),o=n(790087);function r(){}Object.defineProperties(r.prototype,{credit:{get:function(){}}}),r.prototype.geocode=function(e){o.Z.typeOf.string("query",e);const t=e.match(/[^\s,\n]+/g);if(2===t.length||3===t.length){let n=+t[0],o=+t[1];const r=3===t.length?+t[2]:300;if(isNaN(n)&&isNaN(o)){const e=/^(\d+.?\d*)([nsew])/i;for(let i=0;i<t.length;++i){const r=t[i].match(e);e.test(t[i])&&3===r.length&&(/^[ns]/i.test(r[2])?o=/^[n]/i.test(r[2])?+r[1]:-r[1]:/^[ew]/i.test(r[2])&&(n=/^[e]/i.test(r[2])?+r[1]:-r[1]))}}if(!isNaN(n)&&!isNaN(o)&&!isNaN(r)){const t={displayName:e,destination:i.Z.fromDegrees(n,o,r)};return Promise.resolve([t])}}return Promise.resolve([])};const s=r},849986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>F});var i=n(393766),o=n(762031),r=n(660904),s=n(790087),a=n(865029),c=n(234146),l=n(11020),u=n(906439),d=n(282910),h=n(729476),f=n(931359),p=n(911698),m=n(751655),_=n(342209),g=n(980382),Z=n(237247),y=n(402793),b=n(161648),v=n(293685),A=n(205522),T=n(217066),w=n(96828),E=n(649638),S=n(709366);function C(e){this.resource=e.resource,this.version=e.version,this.isHeightmap=e.isHeightmap,this.tileUrlTemplates=e.tileUrlTemplates,this.availability=e.availability,this.hasVertexNormals=e.hasVertexNormals,this.hasWaterMask=e.hasWaterMask,this.hasMetadata=e.hasMetadata,this.availabilityLevels=e.availabilityLevels,this.availabilityTilesLoaded=e.availabilityTilesLoaded,this.littleEndianExtensionSize=e.littleEndianExtensionSize,this.availabilityPromiseCache={}}function x(e){this.requestVertexNormals=(0,c.Z)(e.requestVertexNormals,!1),this.requestWaterMask=(0,c.Z)(e.requestWaterMask,!1),this.requestMetadata=(0,c.Z)(e.requestMetadata,!0),this.ellipsoid=e.ellipsoid,this.heightmapWidth=65,this.heightmapStructure=void 0,this.hasWaterMask=!1,this.hasMetadata=!1,this.hasVertexNormals=!1,this.scheme=void 0,this.lastResource=void 0,this.layerJsonResource=void 0,this.previousError=void 0,this.availability=void 0,this.tilingScheme=void 0,this.levelZeroMaximumGeometricError=void 0,this.heightmapStructure=void 0,this.layers=[],this.attribution="",this.overallAvailability=[],this.overallMaxZoom=0,this.tileCredits=[]}async function I(e,t,n){if(!t.format){const t="The tile format is not specified in the layer.json file.";throw e.previousError=S.Z.reportError(e.previousError,n,(0,l.Z)(n)?n._errorEvent:void 0,t),new T.Z(t)}if(!t.tiles||0===t.tiles.length){const t="The layer.json file does not specify any tile URL templates.";throw e.previousError=S.Z.reportError(e.previousError,n,(0,l.Z)(n)?n._errorEvent:void 0,t),new T.Z(t)}let i=!1,o=!1,r=!1,s=!0,a=!1;if("heightmap-1.0"===t.format)a=!0,(0,l.Z)(e.heightmapStructure)||(e.heightmapStructure={heightScale:.2,heightOffset:-1e3,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1,lowestEncodedHeight:0,highestEncodedHeight:65535}),o=!0,e.requestWaterMask=!0;else if(0!==t.format.indexOf("quantized-mesh-1.")){const i=`The tile format "${t.format}" is invalid or not supported.`;throw e.previousError=S.Z.reportError(e.previousError,n,(0,l.Z)(n)?n._errorEvent:void 0,i),new T.Z(i)}const c=t.tiles,u=t.maxzoom;if(e.overallMaxZoom=Math.max(e.overallMaxZoom,u),t.projection&&"EPSG:4326"!==t.projection){if("EPSG:3857"!==t.projection){const i=`The projection "${t.projection}" is invalid or not supported.`;throw e.previousError=S.Z.reportError(e.previousError,n,(0,l.Z)(n)?n._errorEvent:void 0,i),new T.Z(i)}e.tilingScheme=new f.Z({numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid})}else e.tilingScheme=new h.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});if(e.levelZeroMaximumGeometricError=w.Z.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.tilingScheme.ellipsoid,e.heightmapWidth,e.tilingScheme.getNumberOfXTilesAtLevel(0)),t.scheme&&"tms"!==t.scheme&&"slippyMap"!==t.scheme){const i=`The scheme "${t.scheme}" is invalid or not supported.`;throw e.previousError=S.Z.reportError(e.previousError,n,(0,l.Z)(n)?n._errorEvent:void 0,i),new T.Z(i)}let d;e.scheme=t.scheme,(0,l.Z)(t.extensions)&&-1!==t.extensions.indexOf("octvertexnormals")?i=!0:(0,l.Z)(t.extensions)&&-1!==t.extensions.indexOf("vertexnormals")&&(i=!0,s=!1),(0,l.Z)(t.extensions)&&-1!==t.extensions.indexOf("watermask")&&(o=!0),(0,l.Z)(t.extensions)&&-1!==t.extensions.indexOf("metadata")&&(r=!0);const p=t.metadataAvailability,m=t.available;let _;if((0,l.Z)(m)&&!(0,l.Z)(p)){_=new E.Z(e.tilingScheme,m.length);for(let t=0;t<m.length;++t){const n=m[t],i=e.tilingScheme.getNumberOfYTilesAtLevel(t);(0,l.Z)(e.overallAvailability[t])||(e.overallAvailability[t]=[]);for(let o=0;o<n.length;++o){const r=n[o],s=i-r.endY-1,a=i-r.startY-1;e.overallAvailability[t].push([r.startX,s,r.endX,a]),_.addAvailableTileRange(t,r.startX,s,r.endX,a)}}}else(0,l.Z)(p)&&(d=new E.Z(e.tilingScheme,u),_=new E.Z(e.tilingScheme,u),e.overallAvailability[0]=[[0,0,1,0]],_.addAvailableTileRange(0,0,0,1,0));e.hasWaterMask=e.hasWaterMask||o,e.hasVertexNormals=e.hasVertexNormals||i,e.hasMetadata=e.hasMetadata||r,(0,l.Z)(t.attribution)&&(e.attribution.length>0&&(e.attribution+=" "),e.attribution+=t.attribution),e.layers.push(new C({resource:e.lastResource,version:t.version,isHeightmap:a,tileUrlTemplates:c,availability:_,hasVertexNormals:i,hasWaterMask:o,hasMetadata:r,availabilityLevels:p,availabilityTilesLoaded:d,littleEndianExtensionSize:s}));const g=t.parentUrl;return!(0,l.Z)(g)||((0,l.Z)(_)?(e.lastResource=e.lastResource.getDerivedResource({url:g}),e.lastResource.appendForwardSlash(),e.layerJsonResource=e.lastResource.getDerivedResource({url:"layer.json"}),await P(e),!0):(console.log("A layer.json can't have a parentUrl if it does't have an available array."),!0))}async function P(e,t){try{const n=await e.layerJsonResource.fetchJson();return async function(e,t,n){await I(e,t,n);const i=e.overallAvailability.length;if(i>0){const t=e.availability=new E.Z(e.tilingScheme,e.overallMaxZoom);for(let n=0;n<i;++n){const i=e.overallAvailability[n];for(let e=0;e<i.length;++e){const o=i[e];t.addAvailableTileRange(n,o[0],o[1],o[2],o[3])}}}if(e.attribution.length>0){const t=new a.Z(e.attribution);e.tileCredits.push(t)}return!0}(e,n,t)}catch(n){return(0,l.Z)(n)&&404===n.statusCode?(await I(e,{tilejson:"2.1.0",format:"heightmap-1.0",version:"1.0.0",scheme:"tms",tiles:["{z}/{x}/{y}.terrain?v={version}"]},t),!0):function(e,t,n){let i=`An error occurred while accessing ${e.layerJsonResource.url}.`;if((0,l.Z)(t)&&(i+=`\n${t.message}`),e.previousError=S.Z.reportError(e.previousError,n,(0,l.Z)(n)?n._errorEvent:void 0,i),e.previousError.retry)return P(e,n);throw new T.Z(i)}(e,n,t)}}function D(e){e=(0,c.Z)(e,c.Z.EMPTY_OBJECT),this._heightmapWidth=void 0,this._heightmapStructure=void 0,this._hasWaterMask=!1,this._hasVertexNormals=!1,this._hasMetadata=!1,this._scheme=void 0,this._ellipsoid=e.ellipsoid,this._requestVertexNormals=(0,c.Z)(e.requestVertexNormals,!1),this._requestWaterMask=(0,c.Z)(e.requestWaterMask,!1),this._requestMetadata=(0,c.Z)(e.requestMetadata,!0),this._errorEvent=new d.Z;let t=e.credit;"string"==typeof t&&(t=new a.Z(t)),this._credit=t,this._availability=void 0,this._tilingScheme=void 0,this._levelZeroMaximumGeometricError=void 0,this._layers=void 0,this._ready=!1,this._tileCredits=void 0,this._readyPromise=Promise.resolve(!0),(0,l.Z)(e.url)&&((0,u.Z)("CesiumTerrainProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use CesiumTerrainProvider.fromIonAssetId or CesiumTerrainProvider.fromUrl instead."),this._readyPromise=D._initializeReadyPromise(e,this))}x.prototype.build=function(e){e._heightmapWidth=this.heightmapWidth,e._scheme=this.scheme;const t=(0,l.Z)(this.lastResource.credits)?this.lastResource.credits:[];e._tileCredits=t.concat(this.tileCredits),e._availability=this.availability,e._tilingScheme=this.tilingScheme,e._requestWaterMask=this.requestWaterMask,e._levelZeroMaximumGeometricError=this.levelZeroMaximumGeometricError,e._heightmapStructure=this.heightmapStructure,e._layers=this.layers,e._hasWaterMask=this.hasWaterMask,e._hasVertexNormals=this.hasVertexNormals,e._hasMetadata=this.hasMetadata,e._ready=!0},D._initializeReadyPromise=async function(e,t){const n=await Promise.resolve(e.url),i=new x(e),o=A.Z.createIfNeeded(n);return o.appendForwardSlash(),i.lastResource=o,i.layerJsonResource=i.lastResource.getDerivedResource({url:"layer.json"}),await P(i,t),i.build(t),!0};const O={OCT_VERTEX_NORMALS:1,WATER_MASK:2,METADATA:4};function L(e){return(0,l.Z)(e)&&0!==e.length?{Accept:`application/vnd.quantized-mesh;extensions=${e.join("-")},application/octet-stream;q=0.9,*/*;q=0.01`}:{Accept:"application/vnd.quantized-mesh,application/octet-stream;q=0.9,*/*;q=0.01"}}function N(e,t,n,s,a,c){if(!(0,l.Z)(a))return Promise.reject(new T.Z("Terrain tile doesn't exist"));const u=a.tileUrlTemplates;if(0===u.length)return;let d;d=e._scheme&&"tms"!==e._scheme?n:e._tilingScheme.getNumberOfYTilesAtLevel(s)-n-1;const h=[];let f,g;e._requestVertexNormals&&a.hasVertexNormals&&h.push(a.littleEndianExtensionSize?"octvertexnormals":"vertexnormals"),e._requestWaterMask&&a.hasWaterMask&&h.push("watermask"),e._requestMetadata&&a.hasMetadata&&h.push("metadata");const b=u[(t+d+s)%u.length],v=a.resource;(0,l.Z)(v._ionEndpoint)&&!(0,l.Z)(v._ionEndpoint.externalType)?(0!==h.length&&(g={extensions:h.join("-")}),f=L(void 0)):f=L(h);const A=v.getDerivedResource({url:b,templateValues:{version:a.version,z:s,x:t,y:d},queryParameters:g,headers:f,request:c}).fetchArrayBuffer();return(0,l.Z)(A)?A.then((function(c){return(0,l.Z)(c)?(0,l.Z)(e._heightmapStructure)?function(e,t,n,i,o){const r=new Uint16Array(t,0,e._heightmapWidth*e._heightmapWidth);return new m.Z({buffer:r,childTileMask:new Uint8Array(t,r.byteLength,1)[0],waterMask:new Uint8Array(t,r.byteLength+1,t.byteLength-r.byteLength-1),width:e._heightmapWidth,height:e._heightmapWidth,structure:e._heightmapStructure,credits:e._tileCredits})}(e,c):function(e,t,n,s,a,c){const u=c.littleEndianExtensionSize;let d=0;const h=3*Float64Array.BYTES_PER_ELEMENT,f=4*Float64Array.BYTES_PER_ELEMENT,m=3*Uint16Array.BYTES_PER_ELEMENT;let g=Uint16Array.BYTES_PER_ELEMENT,b=3*g;const v=new DataView(t),A=new r.Z(v.getFloat64(d,!0),v.getFloat64(d+8,!0),v.getFloat64(d+16,!0));d+=h;const T=v.getFloat32(d,!0);d+=Float32Array.BYTES_PER_ELEMENT;const w=v.getFloat32(d,!0);d+=Float32Array.BYTES_PER_ELEMENT;const E=new o.Z(new r.Z(v.getFloat64(d,!0),v.getFloat64(d+8,!0),v.getFloat64(d+16,!0)),v.getFloat64(d+h,!0));d+=f;const S=new r.Z(v.getFloat64(d,!0),v.getFloat64(d+8,!0),v.getFloat64(d+16,!0));d+=h;const C=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const x=new Uint16Array(t,d,3*C);d+=C*m,C>65536&&(g=Uint32Array.BYTES_PER_ELEMENT,b=3*g);const I=x.subarray(0,C),P=x.subarray(C,2*C),D=x.subarray(2*C,3*C);i.Z.zigZagDeltaDecode(I,P,D),d%g!=0&&(d+=g-d%g);const L=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const N=_.Z.createTypedArrayFromArrayBuffer(C,t,d,3*L);d+=L*b;let M=0;const R=N.length;for(let e=0;e<R;++e){const t=N[e];N[e]=M-t,0===t&&++M}const F=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const B=_.Z.createTypedArrayFromArrayBuffer(C,t,d,F);d+=F*g;const U=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const k=_.Z.createTypedArrayFromArrayBuffer(C,t,d,U);d+=U*g;const V=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const H=_.Z.createTypedArrayFromArrayBuffer(C,t,d,V);d+=V*g;const z=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const G=_.Z.createTypedArrayFromArrayBuffer(C,t,d,z);let j,W;for(d+=z*g;d<v.byteLength;){const i=v.getUint8(d,!0);d+=Uint8Array.BYTES_PER_ELEMENT;const o=v.getUint32(d,u);if(d+=Uint32Array.BYTES_PER_ELEMENT,i===O.OCT_VERTEX_NORMALS&&e._requestVertexNormals)j=new Uint8Array(t,d,2*C);else if(i===O.WATER_MASK&&e._requestWaterMask)W=new Uint8Array(t,d,o);else if(i===O.METADATA&&e._requestMetadata){const i=v.getUint32(d,!0);if(i>0){const o=(0,p.Z)(new Uint8Array(t),d+Uint32Array.BYTES_PER_ELEMENT,i).available;if((0,l.Z)(o))for(let t=0;t<o.length;++t){const i=n+t+1,r=o[t],s=e._tilingScheme.getNumberOfYTilesAtLevel(i);for(let t=0;t<r.length;++t){const n=r[t],o=s-n.endY-1,a=s-n.startY-1;e.availability.addAvailableTileRange(i,n.startX,o,n.endX,a),c.availability.addAvailableTileRange(i,n.startX,o,n.endX,a)}}}c.availabilityTilesLoaded.addAvailableTileRange(n,s,a,s,a)}d+=o}const q=5*e.getLevelMaximumGeometricError(n),Y=e._tilingScheme.tileXYToRectangle(s,a,n),X=Z.Z.fromRectangle(Y,T,w,e._tilingScheme.ellipsoid);return new y.Z({center:A,minimumHeight:T,maximumHeight:w,boundingSphere:E,orientedBoundingBox:X,horizonOcclusionPoint:S,quantizedVertices:x,encodedNormals:j,indices:N,westIndices:B,southIndices:k,eastIndices:H,northIndices:G,westSkirtHeight:q,southSkirtHeight:q,eastSkirtHeight:q,northSkirtHeight:q,childTileMask:e.availability.computeChildMaskForTile(n,s,a),waterMask:W,credits:e._tileCredits})}(e,c,s,t,n,a):Promise.reject(new T.Z("Mesh buffer doesn't exist."))})):void 0}function M(e,t,n,i){if(0===i)return;const o=e.availabilityLevels,r=i%o==0?i-o:(i/o|0)*o,s=1<<i-r;return{level:r,x:t/s|0,y:n/s|0}}function R(e,t,n,i,o,r){if(!(0,l.Z)(o.availabilityLevels))return{result:!1};let s;const a=function(){delete o.availabilityPromiseCache[s]},c=o.availabilityTilesLoaded,u=o.availability;let d=M(o,t,n,i);for(;(0,l.Z)(d);){if(u.isTileAvailable(d.level,d.x,d.y)&&!c.isTileAvailable(d.level,d.x,d.y)){let t;if(!r&&(s=`${d.level}-${d.x}-${d.y}`,t=o.availabilityPromiseCache[s],!(0,l.Z)(t))){const n=new b.Z({throttle:!1,throttleByServer:!0,type:v.Z.TERRAIN});t=N(e,d.x,d.y,d.level,o,n),(0,l.Z)(t)&&(o.availabilityPromiseCache[s]=t,t.then(a))}return{result:!0,promise:t}}d=M(o,d.x,d.y,d.level)}return{result:!1}}D.prototype.requestTileGeometry=function(e,t,n,i){const o=this._layers;let r;const s=o.length;let a=!1,c=Promise.resolve();if(1===s)r=o[0];else for(let i=0;i<s;++i){const s=o[i];if(!(0,l.Z)(s.availability)||s.availability.isTileAvailable(n,e,t)){r=s;break}const u=R(this,e,t,n,s,0===i);u.result&&(a=!0,c=c.then((()=>u.promise)))}return!(0,l.Z)(r)&&a?c.then((()=>this.requestTileGeometry(e,t,n,i))):N(this,e,t,n,r,i)},Object.defineProperties(D.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return(0,u.Z)("CesiumTerrainProvider.ready","CesiumTerrainProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use CesiumTerrainProvider.fromIonAssetId or CesiumTerrainProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,u.Z)("CesiumTerrainProvider.readyPromise","CesiumTerrainProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use CesiumTerrainProvider.fromIonAssetId or CesiumTerrainProvider.fromUrl instead."),this._readyPromise}},hasWaterMask:{get:function(){return this._hasWaterMask&&this._requestWaterMask}},hasVertexNormals:{get:function(){return this._hasVertexNormals&&this._requestVertexNormals}},hasMetadata:{get:function(){return this._hasMetadata&&this._requestMetadata}},requestVertexNormals:{get:function(){return this._requestVertexNormals}},requestWaterMask:{get:function(){return this._requestWaterMask}},requestMetadata:{get:function(){return this._requestMetadata}},availability:{get:function(){return this._availability}}}),D.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},D.fromIonAssetId=async function(e,t){s.Z.defined("assetId",e);const n=await g.Z.fromAssetId(e);return D.fromUrl(n,t)},D.fromUrl=async function(e,t){s.Z.defined("url",e),t=(0,c.Z)(t,c.Z.EMPTY_OBJECT),e=await Promise.resolve(e);const n=A.Z.createIfNeeded(e);n.appendForwardSlash();const i=new x(t);i.lastResource=n,i.layerJsonResource=i.lastResource.getDerivedResource({url:"layer.json"}),await P(i);const o=new D(t);return i.build(o),o},D.prototype.getTileDataAvailable=function(e,t,n){if(!(0,l.Z)(this._availability))return;if(n>this._availability._maximumLevel)return!1;if(this._availability.isTileAvailable(n,e,t))return!0;if(!this._hasMetadata)return!1;const i=this._layers,o=i.length;for(let r=0;r<o;++r)if(R(this,e,t,n,i[r],0===r).result)return;return!1},D.prototype.loadTileDataAvailability=function(e,t,n){if(!(0,l.Z)(this._availability)||n>this._availability._maximumLevel||this._availability.isTileAvailable(n,e,t)||!this._hasMetadata)return;const i=this._layers,o=i.length;for(let r=0;r<o;++r){const o=R(this,e,t,n,i[r],0===r);if((0,l.Z)(o.promise))return o.promise}},D._getAvailabilityTile=M;const F=D},249702:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(140942),o=n(501e3),r=n(234146),s=n(11020),a=n(765153),c=n(282910),l=n(732292),u=n(791364);function d(e){let t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).currentTime,n=e.startTime,d=e.stopTime;if(t=(0,s.Z)(t)?u.Z.clone(t):(0,s.Z)(n)?u.Z.clone(n):(0,s.Z)(d)?u.Z.addDays(d,-1,new u.Z):u.Z.now(),n=(0,s.Z)(n)?u.Z.clone(n):u.Z.clone(t),d=(0,s.Z)(d)?u.Z.clone(d):u.Z.addDays(n,1,new u.Z),u.Z.greaterThan(n,d))throw new a.Z("startTime must come before stopTime.");this.startTime=n,this.stopTime=d,this.clockRange=(0,r.Z)(e.clockRange,i.Z.UNBOUNDED),this.canAnimate=(0,r.Z)(e.canAnimate,!0),this.onTick=new c.Z,this.onStop=new c.Z,this._currentTime=void 0,this._multiplier=void 0,this._clockStep=void 0,this._shouldAnimate=void 0,this._lastSystemTime=(0,l.Z)(),this.currentTime=t,this.multiplier=(0,r.Z)(e.multiplier,1),this.shouldAnimate=(0,r.Z)(e.shouldAnimate,!1),this.clockStep=(0,r.Z)(e.clockStep,o.Z.SYSTEM_CLOCK_MULTIPLIER)}Object.defineProperties(d.prototype,{currentTime:{get:function(){return this._currentTime},set:function(e){u.Z.equals(this._currentTime,e)||(this._clockStep===o.Z.SYSTEM_CLOCK&&(this._clockStep=o.Z.SYSTEM_CLOCK_MULTIPLIER),this._currentTime=e)}},multiplier:{get:function(){return this._multiplier},set:function(e){this._multiplier!==e&&(this._clockStep===o.Z.SYSTEM_CLOCK&&(this._clockStep=o.Z.SYSTEM_CLOCK_MULTIPLIER),this._multiplier=e)}},clockStep:{get:function(){return this._clockStep},set:function(e){e===o.Z.SYSTEM_CLOCK&&(this._multiplier=1,this._shouldAnimate=!0,this._currentTime=u.Z.now()),this._clockStep=e}},shouldAnimate:{get:function(){return this._shouldAnimate},set:function(e){this._shouldAnimate!==e&&(this._clockStep===o.Z.SYSTEM_CLOCK&&(this._clockStep=o.Z.SYSTEM_CLOCK_MULTIPLIER),this._shouldAnimate=e)}}}),d.prototype.tick=function(){const e=(0,l.Z)();let t=u.Z.clone(this._currentTime);if(this.canAnimate&&this._shouldAnimate){const n=this._clockStep;if(n===o.Z.SYSTEM_CLOCK)t=u.Z.now(t);else{const r=this._multiplier;if(n===o.Z.TICK_DEPENDENT)t=u.Z.addSeconds(t,r,t);else{const n=e-this._lastSystemTime;t=u.Z.addSeconds(t,r*(n/1e3),t)}const s=this.clockRange,a=this.startTime,c=this.stopTime;if(s===i.Z.CLAMPED)u.Z.lessThan(t,a)?t=u.Z.clone(a,t):u.Z.greaterThan(t,c)&&(t=u.Z.clone(c,t),this.onStop.raiseEvent(this));else if(s===i.Z.LOOP_STOP)for(u.Z.lessThan(t,a)&&(t=u.Z.clone(a,t));u.Z.greaterThan(t,c);)t=u.Z.addSeconds(a,u.Z.secondsDifference(t,c),t),this.onStop.raiseEvent(this)}}return this._currentTime=t,this._lastSystemTime=e,this.onTick.raiseEvent(this),t};const h=d},140942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({UNBOUNDED:0,CLAMPED:1,LOOP_STOP:2})},501e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({TICK_DEPENDENT:0,SYSTEM_CLOCK_MULTIPLIER:1,SYSTEM_CLOCK:2})},809120:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(765153),r=n(361942);function s(e){this._value=e,this._valueType=r.Z.getPointType(e)}Object.defineProperties(s.prototype,{value:{get:function(){return this._value}}}),s.prototype.findTimeInterval=function(e){throw new o.Z("findTimeInterval cannot be called on a ConstantSpline.")},s.prototype.wrapTime=function(e){return i.Z.typeOf.number("time",e),0},s.prototype.clampTime=function(e){return i.Z.typeOf.number("time",e),0},s.prototype.evaluate=function(e,t){i.Z.typeOf.number("time",e);const n=this._value,o=this._valueType;return o===Number?n:o.clone(n,t)};const a=s},586879:(e,t,n)=>{"use strict";n.d(t,{Z:()=>W});var i=n(334389),o=n(890828),r=n(762031),s=n(405254),a=n(660904),c=n(790087),l=n(449809),u=n(857819),d=n(234146),h=n(11020),f=n(63354),p=n(87200),m=n(951775),_=n(263825),g=n(156905),Z=n(5450),y=n(342209),b=n(344485),v=n(664288),A=n(161707),T=n(798118),w=n(804868),E=n(360846),S=n(427183);const C=new a.Z,x=new o.Z,I=new s.Z,P=new s.Z,D=new a.Z,O=new a.Z,L=new a.Z,N=new a.Z,M=new a.Z,R=new a.Z,F=new E.Z,B=new v.Z,U=new v.Z,k=new a.Z;function V(e,t,n,i,o,r,c,u,d){const f=e.positions;let g=T.Z.triangulate(e.positions2D,e.holes);g.length<3&&(g=[0,1,2]);const Z=y.Z.createTypedArray(f.length,g.length);Z.set(g);let A=B;if(0!==i){let e=E.Z.fromAxisAngle(c,i,F);if(A=v.Z.fromQuaternion(e,A),t.tangent||t.bitangent){e=E.Z.fromAxisAngle(c,-i,F);const n=v.Z.fromQuaternion(e,U);u=a.Z.normalize(v.Z.multiplyByVector(n,u,u),u),t.bitangent&&(d=a.Z.normalize(a.Z.cross(c,u,d),d))}}else A=v.Z.clone(v.Z.IDENTITY,A);const S=P;t.st&&(S.x=n.x,S.y=n.y);const x=f.length,D=3*x,O=new Float64Array(D),L=t.normal?new Float32Array(D):void 0,N=t.tangent?new Float32Array(D):void 0,M=t.bitangent?new Float32Array(D):void 0,R=t.st?new Float32Array(2*x):void 0;let k=0,V=0,H=0,z=0,G=0;for(let e=0;e<x;e++){const i=f[e];if(O[k++]=i.x,O[k++]=i.y,O[k++]=i.z,t.st)if((0,h.Z)(o)&&o.positions.length===x)R[G++]=o.positions[e].x,R[G++]=o.positions[e].y;else{const e=r(v.Z.multiplyByVector(A,i,C),I);s.Z.subtract(e,S,e);const t=b.Z.clamp(e.x/n.width,0,1),o=b.Z.clamp(e.y/n.height,0,1);R[G++]=t,R[G++]=o}t.normal&&(L[V++]=c.x,L[V++]=c.y,L[V++]=c.z),t.tangent&&(N[z++]=u.x,N[z++]=u.y,N[z++]=u.z),t.bitangent&&(M[H++]=d.x,M[H++]=d.y,M[H++]=d.z)}const j=new _.Z;return t.position&&(j.position=new m.Z({componentDatatype:l.Z.DOUBLE,componentsPerAttribute:3,values:O})),t.normal&&(j.normal=new m.Z({componentDatatype:l.Z.FLOAT,componentsPerAttribute:3,values:L})),t.tangent&&(j.tangent=new m.Z({componentDatatype:l.Z.FLOAT,componentsPerAttribute:3,values:N})),t.bitangent&&(j.bitangent=new m.Z({componentDatatype:l.Z.FLOAT,componentsPerAttribute:3,values:M})),t.st&&(j.st=new m.Z({componentDatatype:l.Z.FLOAT,componentsPerAttribute:2,values:R})),new p.Z({attributes:j,indices:Z,primitiveType:w.Z.TRIANGLES})}function H(e){const t=(e=(0,d.Z)(e,d.Z.EMPTY_OBJECT)).polygonHierarchy,n=e.textureCoordinates;c.Z.defined("options.polygonHierarchy",t);const i=(0,d.Z)(e.vertexFormat,S.Z.DEFAULT);this._vertexFormat=S.Z.clone(i),this._polygonHierarchy=t,this._stRotation=(0,d.Z)(e.stRotation,0),this._ellipsoid=f.Z.clone((0,d.Z)(e.ellipsoid,f.Z.WGS84)),this._workerName="createCoplanarPolygonGeometry",this._textureCoordinates=n,this.packedLength=A.Z.computeHierarchyPackedLength(t,a.Z)+S.Z.packedLength+f.Z.packedLength+((0,h.Z)(n)?A.Z.computeHierarchyPackedLength(n,s.Z):1)+2}H.fromPositions=function(e){return e=(0,d.Z)(e,d.Z.EMPTY_OBJECT),c.Z.defined("options.positions",e.positions),new H({polygonHierarchy:{positions:e.positions},vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,textureCoordinates:e.textureCoordinates})},H.pack=function(e,t,n){return c.Z.typeOf.object("value",e),c.Z.defined("array",t),n=(0,d.Z)(n,0),n=A.Z.packPolygonHierarchy(e._polygonHierarchy,t,n,a.Z),f.Z.pack(e._ellipsoid,t,n),n+=f.Z.packedLength,S.Z.pack(e._vertexFormat,t,n),n+=S.Z.packedLength,t[n++]=e._stRotation,(0,h.Z)(e._textureCoordinates)?n=A.Z.packPolygonHierarchy(e._textureCoordinates,t,n,s.Z):t[n++]=-1,t[n++]=e.packedLength,t};const z=f.Z.clone(f.Z.UNIT_SPHERE),G=new S.Z,j={polygonHierarchy:{}};H.unpack=function(e,t,n){c.Z.defined("array",e),t=(0,d.Z)(t,0);const i=A.Z.unpackPolygonHierarchy(e,t,a.Z);t=i.startingIndex,delete i.startingIndex;const o=f.Z.unpack(e,t,z);t+=f.Z.packedLength;const r=S.Z.unpack(e,t,G);t+=S.Z.packedLength;const l=e[t++],u=-1===e[t]?void 0:A.Z.unpackPolygonHierarchy(e,t,s.Z);(0,h.Z)(u)?(t=u.startingIndex,delete u.startingIndex):t++;const p=e[t++];return(0,h.Z)(n)||(n=new H(j)),n._polygonHierarchy=i,n._ellipsoid=f.Z.clone(o,n._ellipsoid),n._vertexFormat=S.Z.clone(r,n._vertexFormat),n._stRotation=l,n._textureCoordinates=u,n.packedLength=p,n},H.createGeometry=function(e){const t=e._vertexFormat,n=e._polygonHierarchy,o=e._stRotation,s=e._textureCoordinates,c=(0,h.Z)(s);let l=n.positions;if(l=(0,i.Z)(l,a.Z.equalsEpsilon,!0),l.length<3)return;let d=D,f=O,m=L,_=M;const v=R;if(!u.Z.computeProjectTo2DArguments(l,N,_,v))return;if(d=a.Z.cross(_,v,d),d=a.Z.normalize(d,d),!a.Z.equalsEpsilon(N,a.Z.ZERO,b.Z.EPSILON6)){const t=e._ellipsoid.geodeticSurfaceNormal(N,k);a.Z.dot(d,t)<0&&(d=a.Z.negate(d,d),_=a.Z.negate(_,_))}const T=u.Z.createProjectPointsTo2DFunction(N,_,v),w=u.Z.createProjectPointTo2DFunction(N,_,v);t.tangent&&(f=a.Z.clone(_,f)),t.bitangent&&(m=a.Z.clone(v,m));const E=A.Z.polygonsFromHierarchy(n,c,T,!1),S=E.hierarchy,C=E.polygons,I=c?A.Z.polygonsFromHierarchy(s,!0,(function(e){return e}),!1).polygons:void 0;if(0===S.length)return;l=S[0].outerRing;const P=r.Z.fromPoints(l),F=A.Z.computeBoundingRectangle(d,w,l,o,x),B=[];for(let e=0;e<C.length;e++){const n=new g.Z({geometry:V(C[e],t,F,o,c?I[e]:void 0,w,d,f,m)});B.push(n)}const U=Z.Z.combineInstances(B)[0];U.attributes.position.values=new Float64Array(U.attributes.position.values),U.indices=y.Z.createTypedArray(U.attributes.position.values.length/3,U.indices);const H=U.attributes;return t.position||delete H.position,new p.Z({attributes:H,indices:U.indices,primitiveType:U.primitiveType,boundingSphere:P})};const W=H},857819:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(405254),o=n(660904),r=n(790087),s=n(664288),a=n(237247);const c={},l=new o.Z,u=new o.Z,d=new o.Z,h=new o.Z,f=new a.Z;function p(e,t,n,r,s){const a=o.Z.subtract(e,t,l),c=o.Z.dot(n,a),u=o.Z.dot(r,a);return i.Z.fromElements(c,u,s)}c.validOutline=function(e){r.Z.defined("positions",e);const t=a.Z.fromPoints(e,f).halfAxes,n=s.Z.getColumn(t,0,u),i=s.Z.getColumn(t,1,d),c=s.Z.getColumn(t,2,h),l=o.Z.magnitude(n),p=o.Z.magnitude(i),m=o.Z.magnitude(c);return!(0===l&&(0===p||0===m)||0===p&&0===m)},c.computeProjectTo2DArguments=function(e,t,n,i){r.Z.defined("positions",e),r.Z.defined("centerResult",t),r.Z.defined("planeAxis1Result",n),r.Z.defined("planeAxis2Result",i);const c=a.Z.fromPoints(e,f),l=c.halfAxes,p=s.Z.getColumn(l,0,u),m=s.Z.getColumn(l,1,d),_=s.Z.getColumn(l,2,h),g=o.Z.magnitude(p),Z=o.Z.magnitude(m),y=o.Z.magnitude(_),b=Math.min(g,Z,y);if(0===g&&(0===Z||0===y)||0===Z&&0===y)return!1;let v,A;return b!==Z&&b!==y||(v=p),b===g?v=m:b===y&&(A=m),b!==g&&b!==Z||(A=_),o.Z.normalize(v,n),o.Z.normalize(A,i),o.Z.clone(c.center,t),!0},c.createProjectPointsTo2DFunction=function(e,t,n){return function(i){const o=new Array(i.length);for(let r=0;r<i.length;r++)o[r]=p(i[r],e,t,n);return o}},c.createProjectPointTo2DFunction=function(e,t,n){return function(i,o){return p(i,e,t,n,o)}};const m=c},252888:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(334389),o=n(762031),r=n(660904),s=n(790087),a=n(449809),c=n(857819),l=n(234146),u=n(11020),d=n(87200),h=n(951775),f=n(263825),p=n(156905),m=n(5450),_=n(342209),g=n(161707),Z=n(804868);function y(e){const t=e.length,n=new Float64Array(3*t),i=_.Z.createTypedArray(t,2*t);let o=0,r=0;for(let s=0;s<t;s++){const a=e[s];n[o++]=a.x,n[o++]=a.y,n[o++]=a.z,i[r++]=s,i[r++]=(s+1)%t}const s=new f.Z({position:new h.Z({componentDatatype:a.Z.DOUBLE,componentsPerAttribute:3,values:n})});return new d.Z({attributes:s,indices:i,primitiveType:Z.Z.LINES})}function b(e){const t=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).polygonHierarchy;s.Z.defined("options.polygonHierarchy",t),this._polygonHierarchy=t,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=g.Z.computeHierarchyPackedLength(t,r.Z)+1}b.fromPositions=function(e){return e=(0,l.Z)(e,l.Z.EMPTY_OBJECT),s.Z.defined("options.positions",e.positions),new b({polygonHierarchy:{positions:e.positions}})},b.pack=function(e,t,n){return s.Z.typeOf.object("value",e),s.Z.defined("array",t),n=(0,l.Z)(n,0),t[n=g.Z.packPolygonHierarchy(e._polygonHierarchy,t,n,r.Z)]=e.packedLength,t};const v={polygonHierarchy:{}};b.unpack=function(e,t,n){s.Z.defined("array",e),t=(0,l.Z)(t,0);const i=g.Z.unpackPolygonHierarchy(e,t,r.Z);t=i.startingIndex,delete i.startingIndex;const o=e[t];return(0,u.Z)(n)||(n=new b(v)),n._polygonHierarchy=i,n.packedLength=o,n},b.createGeometry=function(e){const t=e._polygonHierarchy;let n=t.positions;if(n=(0,i.Z)(n,r.Z.equalsEpsilon,!0),n.length<3)return;if(!c.Z.validOutline(n))return;const s=g.Z.polygonOutlinesFromHierarchy(t,!1);if(0===s.length)return;const a=[];for(let e=0;e<s.length;e++){const t=new p.Z({geometry:y(s[e])});a.push(t)}const l=m.Z.combineInstances(a)[0],u=o.Z.fromPoints(t.positions);return new d.Z({attributes:l.attributes,indices:l.indices,primitiveType:l.primitiveType,boundingSphere:u})};const A=b},555537:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({ROUNDED:0,MITERED:1,BEVELED:2})},126301:(e,t,n)=>{"use strict";n.d(t,{Z:()=>X});var i=n(334389),o=n(762031),r=n(660904),s=n(532056),a=n(790087),c=n(449809),l=n(555537),u=n(977890),d=n(234146),h=n(11020),f=n(63354),p=n(87200),m=n(951775),_=n(263825),g=n(61885),Z=n(342209),y=n(344485),b=n(798118),v=n(804868),A=n(143450),T=n(427183);const w=new r.Z,E=new r.Z,S=new r.Z,C=new r.Z,x=new r.Z,I=new r.Z,P=new r.Z,D=new r.Z;function O(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}function L(e,t,n,i,o,s){const a=e.normals,c=e.tangents,l=e.bitangents,d=r.Z.normalize(r.Z.cross(n,t,P),P);s.normal&&u.Z.addAttribute(a,t,i,o),s.tangent&&u.Z.addAttribute(c,d,i,o),s.bitangent&&u.Z.addAttribute(l,n,i,o)}function N(e,t,n){const i=e.positions,o=e.corners,s=e.endPositions,a=e.lefts,l=e.normals,d=new _.Z;let f,p,g,b=0,v=0,A=0;for(p=0;p<i.length;p+=2)g=i[p].length-3,b+=g,A+=2*g,v+=i[p+1].length-3;for(b+=3,v+=3,p=0;p<o.length;p++){f=o[p];const e=o[p].leftPositions;(0,h.Z)(e)?(g=e.length,b+=g,A+=g):(g=o[p].rightPositions.length,v+=g,A+=g)}const T=(0,h.Z)(s);let x;T&&(x=s[0].length-3,b+=x,v+=x,x/=3,A+=6*x);const O=b+v,N=new Float64Array(O),M={normals:t.normal?new Float32Array(O):void 0,tangents:t.tangent?new Float32Array(O):void 0,bitangents:t.bitangent?new Float32Array(O):void 0};let R,F,B,U,k,V,H=0,z=O-1,G=w,j=E;const W=x/2,q=Z.Z.createTypedArray(O/3,A);let Y=0;if(T){V=S,k=C;const e=s[0];for(G=r.Z.fromArray(l,0,G),j=r.Z.fromArray(a,0,j),p=0;p<W;p++)V=r.Z.fromArray(e,3*(W-1-p),V),k=r.Z.fromArray(e,3*(W+p),k),u.Z.addAttribute(N,k,H),u.Z.addAttribute(N,V,void 0,z),L(M,G,j,H,z,t),F=H/3,U=F+1,R=(z-2)/3,B=R-1,q[Y++]=R,q[Y++]=F,q[Y++]=B,q[Y++]=B,q[Y++]=F,q[Y++]=U,H+=3,z-=3}let X,J,Q=0,$=0,K=i[Q++],ee=i[Q++];for(N.set(K,H),N.set(ee,z-ee.length+1),j=r.Z.fromArray(a,$,j),g=ee.length-3,p=0;p<g;p+=3)X=n.geodeticSurfaceNormal(r.Z.fromArray(K,p,P),P),J=n.geodeticSurfaceNormal(r.Z.fromArray(ee,g-p,D),D),G=r.Z.normalize(r.Z.add(X,J,G),G),L(M,G,j,H,z,t),F=H/3,U=F+1,R=(z-2)/3,B=R-1,q[Y++]=R,q[Y++]=F,q[Y++]=B,q[Y++]=B,q[Y++]=F,q[Y++]=U,H+=3,z-=3;for(X=n.geodeticSurfaceNormal(r.Z.fromArray(K,g,P),P),J=n.geodeticSurfaceNormal(r.Z.fromArray(ee,g,D),D),G=r.Z.normalize(r.Z.add(X,J,G),G),$+=3,p=0;p<o.length;p++){let e;f=o[p];const s=f.leftPositions,c=f.rightPositions;let d,m,_=I,Z=S,y=C;if(G=r.Z.fromArray(l,$,G),(0,h.Z)(s)){for(L(M,G,j,void 0,z,t),z-=3,d=U,m=B,e=0;e<s.length/3;e++)_=r.Z.fromArray(s,3*e,_),q[Y++]=d,q[Y++]=m-e-1,q[Y++]=m-e,u.Z.addAttribute(N,_,void 0,z),Z=r.Z.fromArray(N,3*(m-e-1),Z),y=r.Z.fromArray(N,3*d,y),j=r.Z.normalize(r.Z.subtract(Z,y,j),j),L(M,G,j,void 0,z,t),z-=3;_=r.Z.fromArray(N,3*d,_),Z=r.Z.subtract(r.Z.fromArray(N,3*m,Z),_,Z),y=r.Z.subtract(r.Z.fromArray(N,3*(m-e),y),_,y),j=r.Z.normalize(r.Z.add(Z,y,j),j),L(M,G,j,H,void 0,t),H+=3}else{for(L(M,G,j,H,void 0,t),H+=3,d=B,m=U,e=0;e<c.length/3;e++)_=r.Z.fromArray(c,3*e,_),q[Y++]=d,q[Y++]=m+e,q[Y++]=m+e+1,u.Z.addAttribute(N,_,H),Z=r.Z.fromArray(N,3*d,Z),y=r.Z.fromArray(N,3*(m+e),y),j=r.Z.normalize(r.Z.subtract(Z,y,j),j),L(M,G,j,H,void 0,t),H+=3;_=r.Z.fromArray(N,3*d,_),Z=r.Z.subtract(r.Z.fromArray(N,3*(m+e),Z),_,Z),y=r.Z.subtract(r.Z.fromArray(N,3*m,y),_,y),j=r.Z.normalize(r.Z.negate(r.Z.add(y,Z,j),j),j),L(M,G,j,void 0,z,t),z-=3}for(K=i[Q++],ee=i[Q++],K.splice(0,3),ee.splice(ee.length-3,3),N.set(K,H),N.set(ee,z-ee.length+1),g=ee.length-3,$+=3,j=r.Z.fromArray(a,$,j),e=0;e<ee.length;e+=3)X=n.geodeticSurfaceNormal(r.Z.fromArray(K,e,P),P),J=n.geodeticSurfaceNormal(r.Z.fromArray(ee,g-e,D),D),G=r.Z.normalize(r.Z.add(X,J,G),G),L(M,G,j,H,z,t),U=H/3,F=U-1,B=(z-2)/3,R=B+1,q[Y++]=R,q[Y++]=F,q[Y++]=B,q[Y++]=B,q[Y++]=F,q[Y++]=U,H+=3,z-=3;H-=3,z+=3}if(G=r.Z.fromArray(l,l.length-3,G),L(M,G,j,H,z,t),T){H+=3,z-=3,V=S,k=C;const e=s[1];for(p=0;p<W;p++)V=r.Z.fromArray(e,3*(x-p-1),V),k=r.Z.fromArray(e,3*p,k),u.Z.addAttribute(N,V,void 0,z),u.Z.addAttribute(N,k,H),L(M,G,j,H,z,t),U=H/3,F=U-1,B=(z-2)/3,R=B+1,q[Y++]=R,q[Y++]=F,q[Y++]=B,q[Y++]=B,q[Y++]=F,q[Y++]=U,H+=3,z-=3}if(d.position=new m.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:N}),t.st){const e=new Float32Array(O/3*2);let t,n,i=0;if(T){b/=3,v/=3;const o=Math.PI/(x+1);let r;n=1/(b-x+1),t=1/(v-x+1);const s=x/2;for(p=s+1;p<x+1;p++)r=y.Z.PI_OVER_TWO+o*p,e[i++]=t*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(p=1;p<v-x+1;p++)e[i++]=p*t,e[i++]=0;for(p=x;p>s;p--)r=y.Z.PI_OVER_TWO-p*o,e[i++]=1-t*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(p=s;p>0;p--)r=y.Z.PI_OVER_TWO-o*p,e[i++]=1-n*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(p=b-x;p>0;p--)e[i++]=p*n,e[i++]=1;for(p=1;p<s+1;p++)r=y.Z.PI_OVER_TWO+o*p,e[i++]=n*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r))}else{for(b/=3,v/=3,n=1/(b-1),t=1/(v-1),p=0;p<v;p++)e[i++]=p*t,e[i++]=0;for(p=b;p>0;p--)e[i++]=(p-1)*n,e[i++]=1}d.st=new m.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:e})}return t.normal&&(d.normal=new m.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:M.normals})),t.tangent&&(d.tangent=new m.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:M.tangents})),t.bitangent&&(d.bitangent=new m.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:M.bitangents})),{attributes:d,indices:q}}function M(e,t,n){n[t++]=e[0],n[t++]=e[1],n[t++]=e[2];for(let i=3;i<e.length;i+=3){const o=e[i],r=e[i+1],s=e[i+2];n[t++]=o,n[t++]=r,n[t++]=s,n[t++]=o,n[t++]=r,n[t++]=s}return n[t++]=e[0],n[t++]=e[1],n[t++]=e[2],n}const R=new r.Z,F=new r.Z,B=new s.Z;function U(e,t,n,i,o,s){const a=r.Z.subtract(t,e,R);r.Z.normalize(a,a);const c=n.geodeticSurfaceNormal(e,F),l=r.Z.cross(a,c,R);r.Z.multiplyByScalar(l,i,l);let u=o.latitude,d=o.longitude,h=s.latitude,f=s.longitude;r.Z.add(e,l,F),n.cartesianToCartographic(F,B);let p=B.latitude,m=B.longitude;u=Math.min(u,p),d=Math.min(d,m),h=Math.max(h,p),f=Math.max(f,m),r.Z.subtract(e,l,F),n.cartesianToCartographic(F,B),p=B.latitude,m=B.longitude,u=Math.min(u,p),d=Math.min(d,m),h=Math.max(h,p),f=Math.max(f,m),o.latitude=u,o.longitude=d,s.latitude=h,s.longitude=f}const k=new r.Z,V=new r.Z,H=new s.Z,z=new s.Z;function G(e,t,n,o,s){e=O(e,t);const a=(0,i.Z)(e,r.Z.equalsEpsilon),c=a.length;if(c<2||n<=0)return new A.Z;const u=.5*n;let d,f;if(H.latitude=Number.POSITIVE_INFINITY,H.longitude=Number.POSITIVE_INFINITY,z.latitude=Number.NEGATIVE_INFINITY,z.longitude=Number.NEGATIVE_INFINITY,o===l.Z.ROUNDED){const e=a[0];r.Z.subtract(e,a[1],k),r.Z.normalize(k,k),r.Z.multiplyByScalar(k,u,k),r.Z.add(e,k,V),t.cartesianToCartographic(V,B),d=B.latitude,f=B.longitude,H.latitude=Math.min(H.latitude,d),H.longitude=Math.min(H.longitude,f),z.latitude=Math.max(z.latitude,d),z.longitude=Math.max(z.longitude,f)}for(let e=0;e<c-1;++e)U(a[e],a[e+1],t,u,H,z);const p=a[c-1];r.Z.subtract(p,a[c-2],k),r.Z.normalize(k,k),r.Z.multiplyByScalar(k,u,k),r.Z.add(p,k,V),U(p,V,t,u,H,z),o===l.Z.ROUNDED&&(t.cartesianToCartographic(V,B),d=B.latitude,f=B.longitude,H.latitude=Math.min(H.latitude,d),H.longitude=Math.min(H.longitude,f),z.latitude=Math.max(z.latitude,d),z.longitude=Math.max(z.longitude,f));const m=(0,h.Z)(s)?s:new A.Z;return m.north=z.latitude,m.south=H.latitude,m.east=z.longitude,m.west=H.longitude,m}function j(e){const t=(e=(0,d.Z)(e,d.Z.EMPTY_OBJECT)).positions,n=e.width;a.Z.defined("options.positions",t),a.Z.defined("options.width",n);const i=(0,d.Z)(e.height,0),o=(0,d.Z)(e.extrudedHeight,i);this._positions=t,this._ellipsoid=f.Z.clone((0,d.Z)(e.ellipsoid,f.Z.WGS84)),this._vertexFormat=T.Z.clone((0,d.Z)(e.vertexFormat,T.Z.DEFAULT)),this._width=n,this._height=Math.max(i,o),this._extrudedHeight=Math.min(i,o),this._cornerType=(0,d.Z)(e.cornerType,l.Z.ROUNDED),this._granularity=(0,d.Z)(e.granularity,y.Z.RADIANS_PER_DEGREE),this._shadowVolume=(0,d.Z)(e.shadowVolume,!1),this._workerName="createCorridorGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this.packedLength=1+t.length*r.Z.packedLength+f.Z.packedLength+T.Z.packedLength+7}j.pack=function(e,t,n){a.Z.defined("value",e),a.Z.defined("array",t),n=(0,d.Z)(n,0);const i=e._positions,o=i.length;t[n++]=o;for(let e=0;e<o;++e,n+=r.Z.packedLength)r.Z.pack(i[e],t,n);return f.Z.pack(e._ellipsoid,t,n),n+=f.Z.packedLength,T.Z.pack(e._vertexFormat,t,n),n+=T.Z.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n++]=e._shadowVolume?1:0,t[n]=(0,d.Z)(e._offsetAttribute,-1),t};const W=f.Z.clone(f.Z.UNIT_SPHERE),q=new T.Z,Y={positions:void 0,ellipsoid:W,vertexFormat:q,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,shadowVolume:void 0,offsetAttribute:void 0};j.unpack=function(e,t,n){a.Z.defined("array",e),t=(0,d.Z)(t,0);const i=e[t++],o=new Array(i);for(let n=0;n<i;++n,t+=r.Z.packedLength)o[n]=r.Z.unpack(e,t);const s=f.Z.unpack(e,t,W);t+=f.Z.packedLength;const c=T.Z.unpack(e,t,q);t+=T.Z.packedLength;const l=e[t++],u=e[t++],p=e[t++],m=e[t++],_=e[t++],g=1===e[t++],Z=e[t];return(0,h.Z)(n)?(n._positions=o,n._ellipsoid=f.Z.clone(s,n._ellipsoid),n._vertexFormat=T.Z.clone(c,n._vertexFormat),n._width=l,n._height=u,n._extrudedHeight=p,n._cornerType=m,n._granularity=_,n._shadowVolume=g,n._offsetAttribute=-1===Z?void 0:Z,n):(Y.positions=o,Y.width=l,Y.height=u,Y.extrudedHeight=p,Y.cornerType=m,Y.granularity=_,Y.shadowVolume=g,Y.offsetAttribute=-1===Z?void 0:Z,new j(Y))},j.computeRectangle=function(e,t){const n=(e=(0,d.Z)(e,d.Z.EMPTY_OBJECT)).positions,i=e.width;return a.Z.defined("options.positions",n),a.Z.defined("options.width",i),G(n,(0,d.Z)(e.ellipsoid,f.Z.WGS84),i,(0,d.Z)(e.cornerType,l.Z.ROUNDED),t)},j.createGeometry=function(e){let t=e._positions;const n=e._width,s=e._ellipsoid;t=O(t,s);const a=(0,i.Z)(t,r.Z.equalsEpsilon);if(a.length<2||n<=0)return;const l=e._height,d=e._extrudedHeight,f=!y.Z.equalsEpsilon(l,d,0,y.Z.EPSILON2),_=e._vertexFormat,A={ellipsoid:s,positions:a,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!0};let P;if(f)A.height=l,A.extrudedHeight=d,A.shadowVolume=e._shadowVolume,A.offsetAttribute=e._offsetAttribute,P=function(e,t){const n=new T.Z({position:t.position,normal:t.normal||t.bitangent||e.shadowVolume,tangent:t.tangent,bitangent:t.normal||t.bitangent,st:t.st}),i=e.ellipsoid,o=N(u.Z.computePositions(e),n,i),s=e.height,a=e.extrudedHeight;let l=o.attributes;const d=o.indices;let f=l.position.values,p=f.length;const _=new Float64Array(6*p);let y=new Float64Array(p);y.set(f);let v,A=new Float64Array(4*p);f=b.Z.scaleToGeodeticHeight(f,s,i),A=M(f,0,A),y=b.Z.scaleToGeodeticHeight(y,a,i),A=M(y,2*p,A),_.set(f),_.set(y,p),_.set(A,2*p),l.position.values=_,l=function(e,t){if(!(t.normal||t.tangent||t.bitangent||t.st))return e;const n=e.position.values;let i,o;(t.normal||t.bitangent)&&(i=e.normal.values,o=e.bitangent.values);const s=e.position.values.length/18,a=3*s,c=2*s,l=2*a;let d;if(t.normal||t.bitangent||t.tangent){const s=t.normal?new Float32Array(6*a):void 0,c=t.tangent?new Float32Array(6*a):void 0,h=t.bitangent?new Float32Array(6*a):void 0;let f=w,p=E,m=S,_=C,g=x,Z=I,y=l;for(d=0;d<a;d+=3){const e=y+l;f=r.Z.fromArray(n,d,f),p=r.Z.fromArray(n,d+a,p),m=r.Z.fromArray(n,(d+3)%a,m),p=r.Z.subtract(p,f,p),m=r.Z.subtract(m,f,m),_=r.Z.normalize(r.Z.cross(p,m,_),_),t.normal&&(u.Z.addAttribute(s,_,e),u.Z.addAttribute(s,_,e+3),u.Z.addAttribute(s,_,y),u.Z.addAttribute(s,_,y+3)),(t.tangent||t.bitangent)&&(Z=r.Z.fromArray(i,d,Z),t.bitangent&&(u.Z.addAttribute(h,Z,e),u.Z.addAttribute(h,Z,e+3),u.Z.addAttribute(h,Z,y),u.Z.addAttribute(h,Z,y+3)),t.tangent&&(g=r.Z.normalize(r.Z.cross(Z,_,g),g),u.Z.addAttribute(c,g,e),u.Z.addAttribute(c,g,e+3),u.Z.addAttribute(c,g,y),u.Z.addAttribute(c,g,y+3))),y+=6}if(t.normal){for(s.set(i),d=0;d<a;d+=3)s[d+a]=-i[d],s[d+a+1]=-i[d+1],s[d+a+2]=-i[d+2];e.normal.values=s}else e.normal=void 0;if(t.bitangent?(h.set(o),h.set(o,a),e.bitangent.values=h):e.bitangent=void 0,t.tangent){const t=e.tangent.values;c.set(t),c.set(t,a),e.tangent.values=c}}if(t.st){const t=e.st.values,n=new Float32Array(6*c);n.set(t),n.set(t,c);let i=2*c;for(let e=0;e<2;e++){for(n[i++]=t[0],n[i++]=t[1],d=2;d<c;d+=2){const e=t[d],o=t[d+1];n[i++]=e,n[i++]=o,n[i++]=e,n[i++]=o}n[i++]=t[0],n[i++]=t[1]}e.st.values=n}return e}(l,t);const P=p/3;if(e.shadowVolume){const e=l.normal.values;p=e.length;let n=new Float32Array(6*p);for(v=0;v<p;v++)e[v]=-e[v];n.set(e,p),n=M(e,4*p,n),l.extrudeDirection=new m.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:n}),t.normal||(l.normal=void 0)}if((0,h.Z)(e.offsetAttribute)){let t=new Uint8Array(6*P);if(e.offsetAttribute===g.Z.TOP)t=t.fill(1,0,P).fill(1,2*P,4*P);else{const n=e.offsetAttribute===g.Z.NONE?0:1;t=t.fill(n)}l.applyOffset=new m.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}const D=d.length,O=P+P,L=Z.Z.createTypedArray(_.length/3,2*D+3*O);L.set(d);let R,F,B,U,k=D;for(v=0;v<D;v+=3){const e=d[v],t=d[v+1],n=d[v+2];L[k++]=n+P,L[k++]=t+P,L[k++]=e+P}for(v=0;v<O;v+=2)R=v+O,F=R+O,B=R+1,U=F+1,L[k++]=R,L[k++]=F,L[k++]=B,L[k++]=B,L[k++]=F,L[k++]=U;return{attributes:l,indices:L}}(A,_);else if(P=N(u.Z.computePositions(A),_,s),P.attributes.position.values=b.Z.scaleToGeodeticHeight(P.attributes.position.values,l,s),(0,h.Z)(e._offsetAttribute)){const t=e._offsetAttribute===g.Z.NONE?0:1,n=P.attributes.position.values.length,i=new Uint8Array(n/3).fill(t);P.attributes.applyOffset=new m.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}const D=P.attributes,L=o.Z.fromVertices(D.position.values,void 0,3);return _.position||(P.attributes.position.values=void 0),new p.Z({attributes:D,indices:P.indices,primitiveType:v.Z.TRIANGLES,boundingSphere:L,offsetAttribute:e._offsetAttribute})},j.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new j({positions:e._positions,width:e._width,cornerType:e._cornerType,ellipsoid:o,granularity:i,extrudedHeight:r,height:s,vertexFormat:T.Z.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(j.prototype,{rectangle:{get:function(){return(0,h.Z)(this._rectangle)||(this._rectangle=G(this._positions,this._ellipsoid,this._width,this._cornerType)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return[0,0,0,1,1,0]}}});const X=j},977890:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var i=n(660904),o=n(555537),r=n(11020),s=n(344485),a=n(664288),c=n(151793),l=n(99631),u=n(360846);const d={},h=new i.Z,f=new i.Z,p=new i.Z,m=new i.Z,_=[new i.Z,new i.Z],g=new i.Z,Z=new i.Z,y=new i.Z,b=new i.Z,v=new i.Z,A=new i.Z,T=new i.Z,w=new i.Z,E=new i.Z,S=new i.Z,C=new u.Z,x=new a.Z;function I(e,t,n,r,c){const l=i.Z.angleBetween(i.Z.subtract(t,e,h),i.Z.subtract(n,e,f)),d=r===o.Z.BEVELED?1:Math.ceil(l/s.Z.toRadians(5))+1,p=3*d,m=new Array(p);let _;m[p-3]=n.x,m[p-2]=n.y,m[p-1]=n.z,_=c?a.Z.fromQuaternion(u.Z.fromAxisAngle(i.Z.negate(e,h),l/d,C),x):a.Z.fromQuaternion(u.Z.fromAxisAngle(e,l/d,C),x);let g=0;t=i.Z.clone(t,h);for(let e=0;e<d;e++)t=a.Z.multiplyByVector(_,t,t),m[g++]=t.x,m[g++]=t.y,m[g++]=t.z;return m}function P(e,t,n,o){let r=h;return o||(t=i.Z.negate(t,t)),r=i.Z.add(e,t,r),[r.x,r.y,r.z,n.x,n.y,n.z]}function D(e,t,n,o){const r=new Array(e.length),s=new Array(e.length),a=i.Z.multiplyByScalar(t,n,h),c=i.Z.negate(a,f);let l=0,u=e.length-1;for(let t=0;t<e.length;t+=3){const n=i.Z.fromArray(e,t,p),o=i.Z.add(n,c,m);r[l++]=o.x,r[l++]=o.y,r[l++]=o.z;const d=i.Z.add(n,a,m);s[u--]=d.z,s[u--]=d.y,s[u--]=d.x}return o.push(r,s),o}d.addAttribute=function(e,t,n,i){const o=t.x,s=t.y,a=t.z;(0,r.Z)(n)&&(e[n]=o,e[n+1]=s,e[n+2]=a),(0,r.Z)(i)&&(e[i]=a,e[i-1]=s,e[i-2]=o)};const O=new i.Z,L=new i.Z;d.computePositions=function(e){const t=e.granularity,n=e.positions,r=e.ellipsoid,a=e.width/2,u=e.cornerType,d=e.saveAttributes;let f=g,p=Z,m=y,C=b,x=v,N=A,M=T,R=w,F=E,B=S,U=[];const k=d?[]:void 0,V=d?[]:void 0;let H,z=n[0],G=n[1];p=i.Z.normalize(i.Z.subtract(G,z,p),p),f=r.geodeticSurfaceNormal(z,f),C=i.Z.normalize(i.Z.cross(f,p,C),C),d&&(k.push(C.x,C.y,C.z),V.push(f.x,f.y,f.z)),M=i.Z.clone(z,M),z=G,m=i.Z.negate(p,m);const j=[];let W;const q=n.length;for(W=1;W<q-1;W++){f=r.geodeticSurfaceNormal(z,f),G=n[W+1],p=i.Z.normalize(i.Z.subtract(G,z,p),p),x=i.Z.normalize(i.Z.add(p,m,x),x);const e=i.Z.multiplyByScalar(f,i.Z.dot(p,f),O);i.Z.subtract(p,e,e),i.Z.normalize(e,e);const g=i.Z.multiplyByScalar(f,i.Z.dot(m,f),L);if(i.Z.subtract(m,g,g),i.Z.normalize(g,g),!s.Z.equalsEpsilon(Math.abs(i.Z.dot(e,g)),1,s.Z.EPSILON7)){x=i.Z.cross(x,f,x),x=i.Z.cross(f,x,x),x=i.Z.normalize(x,x);const e=a/Math.max(.25,i.Z.magnitude(i.Z.cross(x,m,h))),n=l.Z.angleIsGreaterThanPi(p,m,z,r);x=i.Z.multiplyByScalar(x,e,x),n?(R=i.Z.add(z,x,R),B=i.Z.add(R,i.Z.multiplyByScalar(C,a,B),B),F=i.Z.add(R,i.Z.multiplyByScalar(C,2*a,F),F),_[0]=i.Z.clone(M,_[0]),_[1]=i.Z.clone(B,_[1]),H=c.Z.generateArc({positions:_,granularity:t,ellipsoid:r}),U=D(H,C,a,U),d&&(k.push(C.x,C.y,C.z),V.push(f.x,f.y,f.z)),N=i.Z.clone(F,N),C=i.Z.normalize(i.Z.cross(f,p,C),C),F=i.Z.add(R,i.Z.multiplyByScalar(C,2*a,F),F),M=i.Z.add(R,i.Z.multiplyByScalar(C,a,M),M),u===o.Z.ROUNDED||u===o.Z.BEVELED?j.push({leftPositions:I(R,N,F,u,n)}):j.push({leftPositions:P(z,i.Z.negate(x,x),F,n)})):(F=i.Z.add(z,x,F),B=i.Z.add(F,i.Z.negate(i.Z.multiplyByScalar(C,a,B),B),B),R=i.Z.add(F,i.Z.negate(i.Z.multiplyByScalar(C,2*a,R),R),R),_[0]=i.Z.clone(M,_[0]),_[1]=i.Z.clone(B,_[1]),H=c.Z.generateArc({positions:_,granularity:t,ellipsoid:r}),U=D(H,C,a,U),d&&(k.push(C.x,C.y,C.z),V.push(f.x,f.y,f.z)),N=i.Z.clone(R,N),C=i.Z.normalize(i.Z.cross(f,p,C),C),R=i.Z.add(F,i.Z.negate(i.Z.multiplyByScalar(C,2*a,R),R),R),M=i.Z.add(F,i.Z.negate(i.Z.multiplyByScalar(C,a,M),M),M),u===o.Z.ROUNDED||u===o.Z.BEVELED?j.push({rightPositions:I(F,N,R,u,n)}):j.push({rightPositions:P(z,x,R,n)})),m=i.Z.negate(p,m)}z=G}let Y;return f=r.geodeticSurfaceNormal(z,f),_[0]=i.Z.clone(M,_[0]),_[1]=i.Z.clone(z,_[1]),H=c.Z.generateArc({positions:_,granularity:t,ellipsoid:r}),U=D(H,C,a,U),d&&(k.push(C.x,C.y,C.z),V.push(f.x,f.y,f.z)),u===o.Z.ROUNDED&&(Y=function(e){let t=g,n=Z,r=y,s=e[1];n=i.Z.fromArray(e[1],s.length-3,n),r=i.Z.fromArray(e[0],0,r),t=i.Z.midpoint(n,r,t);const a=I(t,n,r,o.Z.ROUNDED,!1),c=e.length-1,l=e[c-1];return s=e[c],n=i.Z.fromArray(l,l.length-3,n),r=i.Z.fromArray(s,0,r),t=i.Z.midpoint(n,r,t),[a,I(t,n,r,o.Z.ROUNDED,!1)]}(U)),{positions:U,corners:j,lefts:k,normals:V,endPositions:Y}};const N=d},842056:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(334389),o=n(762031),r=n(660904),s=n(790087),a=n(449809),c=n(555537),l=n(977890),u=n(234146),d=n(11020),h=n(63354),f=n(87200),p=n(951775),m=n(263825),_=n(61885),g=n(342209),Z=n(344485),y=n(798118),b=n(804868);const v=new r.Z,A=new r.Z,T=new r.Z;function w(e,t){const n=[],i=e.positions,o=e.corners,s=e.endPositions,u=new m.Z;let h,f,_,Z=0,y=0,b=0;for(f=0;f<i.length;f+=2)_=i[f].length-3,Z+=_,b+=_/3*4,y+=i[f+1].length-3;for(Z+=3,y+=3,f=0;f<o.length;f++){h=o[f];const e=o[f].leftPositions;(0,d.Z)(e)?(_=e.length,Z+=_,b+=_/3*2):(_=o[f].rightPositions.length,y+=_,b+=_/3*2)}const w=(0,d.Z)(s);let E;w&&(E=s[0].length-3,Z+=E,y+=E,E/=3,b+=4*E);const S=Z+y,C=new Float64Array(S);let x,I,P,D,O,L,N=0,M=S-1;const R=E/2,F=g.Z.createTypedArray(S/3,b+4);let B=0;if(F[B++]=N/3,F[B++]=(M-2)/3,w){n.push(N/3),L=v,O=A;const e=s[0];for(f=0;f<R;f++)L=r.Z.fromArray(e,3*(R-1-f),L),O=r.Z.fromArray(e,3*(R+f),O),l.Z.addAttribute(C,O,N),l.Z.addAttribute(C,L,void 0,M),I=N/3,D=I+1,x=(M-2)/3,P=x-1,F[B++]=x,F[B++]=P,F[B++]=I,F[B++]=D,N+=3,M-=3}let U=0,k=i[U++],V=i[U++];for(C.set(k,N),C.set(V,M-V.length+1),_=V.length-3,n.push(N/3,(M-2)/3),f=0;f<_;f+=3)I=N/3,D=I+1,x=(M-2)/3,P=x-1,F[B++]=x,F[B++]=P,F[B++]=I,F[B++]=D,N+=3,M-=3;for(f=0;f<o.length;f++){let e;h=o[f];const s=h.leftPositions,a=h.rightPositions;let u,p=T;if((0,d.Z)(s)){for(M-=3,u=P,n.push(D),e=0;e<s.length/3;e++)p=r.Z.fromArray(s,3*e,p),F[B++]=u-e-1,F[B++]=u-e,l.Z.addAttribute(C,p,void 0,M),M-=3;n.push(u-Math.floor(s.length/6)),t===c.Z.BEVELED&&n.push((M-2)/3+1),N+=3}else{for(N+=3,u=D,n.push(P),e=0;e<a.length/3;e++)p=r.Z.fromArray(a,3*e,p),F[B++]=u+e,F[B++]=u+e+1,l.Z.addAttribute(C,p,N),N+=3;n.push(u+Math.floor(a.length/6)),t===c.Z.BEVELED&&n.push(N/3-1),M-=3}for(k=i[U++],V=i[U++],k.splice(0,3),V.splice(V.length-3,3),C.set(k,N),C.set(V,M-V.length+1),_=V.length-3,e=0;e<V.length;e+=3)D=N/3,I=D-1,P=(M-2)/3,x=P+1,F[B++]=x,F[B++]=P,F[B++]=I,F[B++]=D,N+=3,M-=3;N-=3,M+=3,n.push(N/3,(M-2)/3)}if(w){N+=3,M-=3,L=v,O=A;const e=s[1];for(f=0;f<R;f++)L=r.Z.fromArray(e,3*(E-f-1),L),O=r.Z.fromArray(e,3*f,O),l.Z.addAttribute(C,L,void 0,M),l.Z.addAttribute(C,O,N),D=N/3,I=D-1,P=(M-2)/3,x=P+1,F[B++]=x,F[B++]=P,F[B++]=I,F[B++]=D,N+=3,M-=3;n.push(N/3)}else n.push(N/3,(M-2)/3);return F[B++]=N/3,F[B++]=(M-2)/3,u.position=new p.Z({componentDatatype:a.Z.DOUBLE,componentsPerAttribute:3,values:C}),{attributes:u,indices:F,wallIndices:n}}function E(e){const t=(e=(0,u.Z)(e,u.Z.EMPTY_OBJECT)).positions,n=e.width;s.Z.typeOf.object("options.positions",t),s.Z.typeOf.number("options.width",n);const i=(0,u.Z)(e.height,0),o=(0,u.Z)(e.extrudedHeight,i);this._positions=t,this._ellipsoid=h.Z.clone((0,u.Z)(e.ellipsoid,h.Z.WGS84)),this._width=n,this._height=Math.max(i,o),this._extrudedHeight=Math.min(i,o),this._cornerType=(0,u.Z)(e.cornerType,c.Z.ROUNDED),this._granularity=(0,u.Z)(e.granularity,Z.Z.RADIANS_PER_DEGREE),this._offsetAttribute=e.offsetAttribute,this._workerName="createCorridorOutlineGeometry",this.packedLength=1+t.length*r.Z.packedLength+h.Z.packedLength+6}E.pack=function(e,t,n){s.Z.typeOf.object("value",e),s.Z.typeOf.object("array",t),n=(0,u.Z)(n,0);const i=e._positions,o=i.length;t[n++]=o;for(let e=0;e<o;++e,n+=r.Z.packedLength)r.Z.pack(i[e],t,n);return h.Z.pack(e._ellipsoid,t,n),n+=h.Z.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n]=(0,u.Z)(e._offsetAttribute,-1),t};const S=h.Z.clone(h.Z.UNIT_SPHERE),C={positions:void 0,ellipsoid:S,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,offsetAttribute:void 0};E.unpack=function(e,t,n){s.Z.typeOf.object("array",e),t=(0,u.Z)(t,0);const i=e[t++],o=new Array(i);for(let n=0;n<i;++n,t+=r.Z.packedLength)o[n]=r.Z.unpack(e,t);const a=h.Z.unpack(e,t,S);t+=h.Z.packedLength;const c=e[t++],l=e[t++],f=e[t++],p=e[t++],m=e[t++],_=e[t];return(0,d.Z)(n)?(n._positions=o,n._ellipsoid=h.Z.clone(a,n._ellipsoid),n._width=c,n._height=l,n._extrudedHeight=f,n._cornerType=p,n._granularity=m,n._offsetAttribute=-1===_?void 0:_,n):(C.positions=o,C.width=c,C.height=l,C.extrudedHeight=f,C.cornerType=p,C.granularity=m,C.offsetAttribute=-1===_?void 0:_,new E(C))},E.createGeometry=function(e){let t=e._positions;const n=e._width,s=e._ellipsoid;t=function(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}(t,s);const c=(0,i.Z)(t,r.Z.equalsEpsilon);if(c.length<2||n<=0)return;const u=e._height,h=e._extrudedHeight,m=!Z.Z.equalsEpsilon(u,h,0,Z.Z.EPSILON2),v={ellipsoid:s,positions:c,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!1};let A;if(m)v.height=u,v.extrudedHeight=h,v.offsetAttribute=e._offsetAttribute,A=function(e){const t=e.ellipsoid,n=w(l.Z.computePositions(e),e.cornerType),i=n.wallIndices,o=e.height,r=e.extrudedHeight,s=n.attributes,c=n.indices;let u=s.position.values,h=u.length,f=new Float64Array(h);f.set(u);const m=new Float64Array(2*h);if(u=y.Z.scaleToGeodeticHeight(u,o,t),f=y.Z.scaleToGeodeticHeight(f,r,t),m.set(u),m.set(f,h),s.position.values=m,h/=3,(0,d.Z)(e.offsetAttribute)){let t=new Uint8Array(2*h);if(e.offsetAttribute===_.Z.TOP)t=t.fill(1,0,h);else{const n=e.offsetAttribute===_.Z.NONE?0:1;t=t.fill(n)}s.applyOffset=new p.Z({componentDatatype:a.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}let Z;const b=c.length,v=g.Z.createTypedArray(m.length/3,2*(b+i.length));v.set(c);let A,T,E=b;for(Z=0;Z<b;Z+=2){const e=c[Z],t=c[Z+1];v[E++]=e+h,v[E++]=t+h}for(Z=0;Z<i.length;Z++)A=i[Z],T=A+h,v[E++]=A,v[E++]=T;return{attributes:s,indices:v}}(v);else if(A=w(l.Z.computePositions(v),v.cornerType),A.attributes.position.values=y.Z.scaleToGeodeticHeight(A.attributes.position.values,u,s),(0,d.Z)(e._offsetAttribute)){const t=A.attributes.position.values.length,n=e._offsetAttribute===_.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);A.attributes.applyOffset=new p.Z({componentDatatype:a.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}const T=A.attributes,E=o.Z.fromVertices(T.position.values,void 0,3);return new f.Z({attributes:T,indices:A.indices,primitiveType:b.Z.LINES,boundingSphere:E,offsetAttribute:e._offsetAttribute})};const x=E},865029:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(90318),o=n(790087),r=n(234146),s=n(11020);let a=0;const c={};function l(e,t){let n;o.Z.typeOf.string("html",e);const i=e;(0,s.Z)(c[i])?n=c[i]:(n=a++,c[i]=n),t=(0,r.Z)(t,!1),this._id=n,this._html=e,this._showOnScreen=t,this._element=void 0}Object.defineProperties(l.prototype,{html:{get:function(){return this._html}},id:{get:function(){return this._id}},showOnScreen:{get:function(){return this._showOnScreen},set:function(e){this._showOnScreen=e}},element:{get:function(){if(!(0,s.Z)(this._element)){const e=i.sanitize(this._html),t=document.createElement("div");t._creditId=this._id,t.style.display="inline",t.innerHTML=e;const n=t.querySelectorAll("a");for(let e=0;e<n.length;e++)n[e].setAttribute("target","_blank");this._element=t}return this._element}}}),l.equals=function(e,t){return e===t||(0,s.Z)(e)&&(0,s.Z)(t)&&e._id===t._id&&e._showOnScreen===t._showOnScreen},l.prototype.equals=function(e){return l.equals(this,e)},l.getIonCredit=function(e){const t=(0,s.Z)(e.collapsible)&&!e.collapsible,n=new l(e.html,t);return n._isIon=-1!==n.html.indexOf("ion-credit.png"),n},l.clone=function(e){if((0,s.Z)(e))return new l(e.html,e.showOnScreen)};const u=l},6853:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(762031),o=n(405254),r=n(660904),s=n(449809),a=n(407578),c=n(234146),l=n(11020),u=n(765153),d=n(87200),h=n(951775),f=n(263825),p=n(61885),m=n(342209),_=n(344485),g=n(804868),Z=n(427183);const y=new o.Z,b=new r.Z,v=new r.Z,A=new r.Z,T=new r.Z;function w(e){const t=(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT)).length,n=e.topRadius,i=e.bottomRadius,o=(0,c.Z)(e.vertexFormat,Z.Z.DEFAULT),r=(0,c.Z)(e.slices,128);if(!(0,l.Z)(t))throw new u.Z("options.length must be defined.");if(!(0,l.Z)(n))throw new u.Z("options.topRadius must be defined.");if(!(0,l.Z)(i))throw new u.Z("options.bottomRadius must be defined.");if(r<3)throw new u.Z("options.slices must be greater than or equal to 3.");if((0,l.Z)(e.offsetAttribute)&&e.offsetAttribute===p.Z.TOP)throw new u.Z("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=t,this._topRadius=n,this._bottomRadius=i,this._vertexFormat=Z.Z.clone(o),this._slices=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderGeometry"}w.packedLength=Z.Z.packedLength+5,w.pack=function(e,t,n){if(!(0,l.Z)(e))throw new u.Z("value is required");if(!(0,l.Z)(t))throw new u.Z("array is required");return n=(0,c.Z)(n,0),Z.Z.pack(e._vertexFormat,t,n),n+=Z.Z.packedLength,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n]=(0,c.Z)(e._offsetAttribute,-1),t};const E=new Z.Z,S={vertexFormat:E,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};let C;w.unpack=function(e,t,n){if(!(0,l.Z)(e))throw new u.Z("array is required");t=(0,c.Z)(t,0);const i=Z.Z.unpack(e,t,E);t+=Z.Z.packedLength;const o=e[t++],r=e[t++],s=e[t++],a=e[t++],d=e[t];return(0,l.Z)(n)?(n._vertexFormat=Z.Z.clone(i,n._vertexFormat),n._length=o,n._topRadius=r,n._bottomRadius=s,n._slices=a,n._offsetAttribute=-1===d?void 0:d,n):(S.length=o,S.topRadius=r,S.bottomRadius=s,S.slices=a,S.offsetAttribute=-1===d?void 0:d,new w(S))},w.createGeometry=function(e){let t=e._length;const n=e._topRadius,c=e._bottomRadius,u=e._vertexFormat,Z=e._slices;if(t<=0||n<0||c<0||0===n&&0===c)return;const w=Z+Z,E=Z+w,S=w+w,C=a.Z.computePositions(t,n,c,Z,!0),x=u.st?new Float32Array(2*S):void 0,I=u.normal?new Float32Array(3*S):void 0,P=u.tangent?new Float32Array(3*S):void 0,D=u.bitangent?new Float32Array(3*S):void 0;let O;const L=u.normal||u.tangent||u.bitangent;if(L){const e=u.tangent||u.bitangent;let i=0,o=0,s=0;const a=Math.atan2(c-n,t),l=b;l.z=Math.sin(a);const d=Math.cos(a);let h=A,f=v;for(O=0;O<Z;O++){const t=O/Z*_.Z.TWO_PI,n=d*Math.cos(t),a=d*Math.sin(t);L&&(l.x=n,l.y=a,e&&(h=r.Z.normalize(r.Z.cross(r.Z.UNIT_Z,l,h),h)),u.normal&&(I[i++]=l.x,I[i++]=l.y,I[i++]=l.z,I[i++]=l.x,I[i++]=l.y,I[i++]=l.z),u.tangent&&(P[o++]=h.x,P[o++]=h.y,P[o++]=h.z,P[o++]=h.x,P[o++]=h.y,P[o++]=h.z),u.bitangent&&(f=r.Z.normalize(r.Z.cross(l,h,f),f),D[s++]=f.x,D[s++]=f.y,D[s++]=f.z,D[s++]=f.x,D[s++]=f.y,D[s++]=f.z))}for(O=0;O<Z;O++)u.normal&&(I[i++]=0,I[i++]=0,I[i++]=-1),u.tangent&&(P[o++]=1,P[o++]=0,P[o++]=0),u.bitangent&&(D[s++]=0,D[s++]=-1,D[s++]=0);for(O=0;O<Z;O++)u.normal&&(I[i++]=0,I[i++]=0,I[i++]=1),u.tangent&&(P[o++]=1,P[o++]=0,P[o++]=0),u.bitangent&&(D[s++]=0,D[s++]=1,D[s++]=0)}const N=12*Z-12,M=m.Z.createTypedArray(S,N);let R=0,F=0;for(O=0;O<Z-1;O++)M[R++]=F,M[R++]=F+2,M[R++]=F+3,M[R++]=F,M[R++]=F+3,M[R++]=F+1,F+=2;for(M[R++]=w-2,M[R++]=0,M[R++]=1,M[R++]=w-2,M[R++]=1,M[R++]=w-1,O=1;O<Z-1;O++)M[R++]=w+O+1,M[R++]=w+O,M[R++]=w;for(O=1;O<Z-1;O++)M[R++]=E,M[R++]=E+O,M[R++]=E+O+1;let B=0;if(u.st){const e=Math.max(n,c);for(O=0;O<S;O++){const t=r.Z.fromArray(C,3*O,T);x[B++]=(t.x+e)/(2*e),x[B++]=(t.y+e)/(2*e)}}const U=new f.Z;u.position&&(U.position=new h.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:C})),u.normal&&(U.normal=new h.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:I})),u.tangent&&(U.tangent=new h.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:P})),u.bitangent&&(U.bitangent=new h.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:D})),u.st&&(U.st=new h.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:2,values:x})),y.x=.5*t,y.y=Math.max(c,n);const k=new i.Z(r.Z.ZERO,o.Z.magnitude(y));if((0,l.Z)(e._offsetAttribute)){t=C.length;const n=e._offsetAttribute===p.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);U.applyOffset=new h.Z({componentDatatype:s.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new d.Z({attributes:U,indices:M,primitiveType:g.Z.TRIANGLES,boundingSphere:k,offsetAttribute:e._offsetAttribute})},w.getUnitCylinder=function(){return(0,l.Z)(C)||(C=w.createGeometry(new w({topRadius:1,bottomRadius:1,length:1,vertexFormat:Z.Z.POSITION_ONLY}))),C};const x=w},407578:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(344485);const o={computePositions:function(e,t,n,o,r){const s=.5*e,a=-s,c=o+o,l=new Float64Array(3*(r?2*c:c));let u,d=0,h=0;const f=r?3*c:0,p=r?3*(c+o):3*o;for(u=0;u<o;u++){const e=u/o*i.Z.TWO_PI,c=Math.cos(e),m=Math.sin(e),_=c*n,g=m*n,Z=c*t,y=m*t;l[h+f]=_,l[h+f+1]=g,l[h+f+2]=a,l[h+p]=Z,l[h+p+1]=y,l[h+p+2]=s,h+=3,r&&(l[d++]=_,l[d++]=g,l[d++]=a,l[d++]=Z,l[d++]=y,l[d++]=s)}return l}}},923156:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(762031),o=n(405254),r=n(660904),s=n(790087),a=n(449809),c=n(407578),l=n(234146),u=n(11020),d=n(765153),h=n(87200),f=n(951775),p=n(263825),m=n(61885),_=n(342209),g=n(804868);const Z=new o.Z;function y(e){const t=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).length,n=e.topRadius,i=e.bottomRadius,o=(0,l.Z)(e.slices,128),r=Math.max((0,l.Z)(e.numberOfVerticalLines,16),0);if(s.Z.typeOf.number("options.positions",t),s.Z.typeOf.number("options.topRadius",n),s.Z.typeOf.number("options.bottomRadius",i),s.Z.typeOf.number.greaterThanOrEquals("options.slices",o,3),(0,u.Z)(e.offsetAttribute)&&e.offsetAttribute===m.Z.TOP)throw new d.Z("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=t,this._topRadius=n,this._bottomRadius=i,this._slices=o,this._numberOfVerticalLines=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderOutlineGeometry"}y.packedLength=6,y.pack=function(e,t,n){return s.Z.typeOf.object("value",e),s.Z.defined("array",t),n=(0,l.Z)(n,0),t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n++]=e._numberOfVerticalLines,t[n]=(0,l.Z)(e._offsetAttribute,-1),t};const b={length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};y.unpack=function(e,t,n){s.Z.defined("array",e),t=(0,l.Z)(t,0);const i=e[t++],o=e[t++],r=e[t++],a=e[t++],c=e[t++],d=e[t];return(0,u.Z)(n)?(n._length=i,n._topRadius=o,n._bottomRadius=r,n._slices=a,n._numberOfVerticalLines=c,n._offsetAttribute=-1===d?void 0:d,n):(b.length=i,b.topRadius=o,b.bottomRadius=r,b.slices=a,b.numberOfVerticalLines=c,b.offsetAttribute=-1===d?void 0:d,new y(b))},y.createGeometry=function(e){let t=e._length;const n=e._topRadius,s=e._bottomRadius,l=e._slices,d=e._numberOfVerticalLines;if(t<=0||n<0||s<0||0===n&&0===s)return;const y=2*l,b=c.Z.computePositions(t,n,s,l,!1);let v,A=2*l;if(d>0){const e=Math.min(d,l);v=Math.round(l/e),A+=e}const T=_.Z.createTypedArray(y,2*A);let w,E=0;for(w=0;w<l-1;w++)T[E++]=w,T[E++]=w+1,T[E++]=w+l,T[E++]=w+1+l;if(T[E++]=l-1,T[E++]=0,T[E++]=l+l-1,T[E++]=l,d>0)for(w=0;w<l;w+=v)T[E++]=w,T[E++]=w+l;const S=new p.Z;S.position=new f.Z({componentDatatype:a.Z.DOUBLE,componentsPerAttribute:3,values:b}),Z.x=.5*t,Z.y=Math.max(s,n);const C=new i.Z(r.Z.ZERO,o.Z.magnitude(Z));if((0,u.Z)(e._offsetAttribute)){t=b.length;const n=e._offsetAttribute===m.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);S.applyOffset=new f.Z({componentDatatype:a.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new h.Z({attributes:S,indices:T,primitiveType:g.Z.LINES,boundingSphere:C,offsetAttribute:e._offsetAttribute})};const v=y},669327:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(449809),o=n(234146),r=n(11020),s=n(765153);function a(e,t){if(e=(0,o.Z)(e,0),(t=(0,o.Z)(t,Number.MAX_VALUE))<=e)throw new s.Z("far distance must be greater than near distance.");this.value=new Float32Array([e,t])}Object.defineProperties(a.prototype,{componentDatatype:{get:function(){return i.Z.FLOAT}},componentsPerAttribute:{get:function(){return 2}},normalize:{get:function(){return!1}}}),a.fromDistanceDisplayCondition=function(e){if(!(0,r.Z)(e))throw new s.Z("distanceDisplayCondition is required.");if(e.far<=e.near)throw new s.Z("distanceDisplayCondition.far distance must be greater than distanceDisplayCondition.near distance.");return new a(e.near,e.far)},a.toValue=function(e,t){if(!(0,r.Z)(e))throw new s.Z("distanceDisplayCondition is required.");return(0,r.Z)(t)?(t[0]=e.near,t[1]=e.far,t):new Float32Array([e.near,e.far])};const c=a},999727:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(344485),o=n(790087),r=n(11020);function s(e){o.Z.typeOf.object("options",e),o.Z.defined("options.comparator",e.comparator),(0,r.Z)(e.maximumLength)&&o.Z.typeOf.number.greaterThanOrEquals("options.maximumLength",e.maximumLength,0),this._comparator=e.comparator,this._maximumLength=e.maximumLength,this._array=(0,r.Z)(e.maximumLength)?new Array(e.maximumLength):[],this._length=0}function a(e,t,n){const i=e._array,o=i[t];i[t]=i[n],i[n]=o}function c(e,t,n){return e._comparator(e._array[t],e._array[n])<0}function l(e,t,n){return e._comparator(e._array[t],e._array[n])>0}function u(e,t){if(0===t)return;const n=Math.floor(i.Z.log2(t+1))%2==0,o=Math.floor((t-1)/2),r=c(e,t,o);for(r!==n&&(a(e,t,o),t=o);t>=3;){const n=Math.floor((t-3)/4);if(c(e,t,n)!==r)break;a(e,t,n),t=n}}function d(e,t){const n=e._length,o=Math.floor(i.Z.log2(t+1))%2==0;let r;for(;(r=2*t+1)<n;){let i=r;const s=r+1;if(s<n){c(e,s,i)===o&&(i=s);const t=2*r+1,a=Math.max(Math.min(n-t,4),0);for(let n=0;n<a;n++){const r=t+n;c(e,r,i)===o&&(i=r)}}if(c(e,i,t)===o&&(a(e,i,t),i!==r&&i!==s)){const t=Math.floor((i-1)/2);l(e,i,t)===o&&a(e,i,t)}t=i}}Object.defineProperties(s.prototype,{length:{get:function(){return this._length}},maximumLength:{get:function(){return this._maximumLength},set:function(e){if((0,r.Z)(e)){for(o.Z.typeOf.number.greaterThanOrEquals("maximumLength",e,0);this._length>e;)this.removeMinimum();this._array.length=e}this._maximumLength=e}},internalArray:{get:function(){return this._array}},comparator:{get:function(){return this._comparator}}}),s.prototype.clone=function(){const e=this._maximumLength,t=this._comparator,n=this._array,i=this._length,o=new s({comparator:t,maximumLength:e});o._length=i;for(let e=0;e<i;e++)o._array[e]=n[e];return o},s.prototype.reset=function(){this._length=0;const e=this._maximumLength;if((0,r.Z)(e))for(let t=0;t<e;t++)this._array[t]=void 0;else this._array.length=0},s.prototype.resort=function(){const e=this._length;for(let t=0;t<e;t++)u(this,t)},s.prototype.insert=function(e){let t;const n=this._maximumLength;if((0,r.Z)(n)){if(0===n)return;if(this._length===n){const n=this._array[0];if(this._comparator(e,n)<=0)return e;t=this.removeMinimum()}}const i=this._length;return this._array[i]=e,this._length++,u(this,i),t},s.prototype.removeMinimum=function(){const e=this._length;if(0===e)return;this._length--;const t=this._array[0];return e>=2&&(this._array[0]=this._array[e-1],d(this,0)),this._array[e-1]=void 0,t},s.prototype.removeMaximum=function(){const e=this._length;if(0===e)return;let t;if(this._length--,e<=2)t=this._array[e-1];else{const n=l(this,1,2)?1:2;t=this._array[n],this._array[n]=this._array[e-1],e>=4&&d(this,n)}return this._array[e-1]=void 0,t},s.prototype.getMinimum=function(){if(0!==this._length)return this._array[0]},s.prototype.getMaximum=function(){const e=this._length;if(0!==e)return e<=2?this._array[e-1]:this._array[l(this,1,2)?1:2]};const h=s},416093:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11020);function o(){this.head=void 0,this.tail=void 0,this._length=0}function r(e,t,n){this.item=e,this.previous=t,this.next=n}function s(e,t){(0,i.Z)(t.previous)&&(0,i.Z)(t.next)?(t.previous.next=t.next,t.next.previous=t.previous):(0,i.Z)(t.previous)?(t.previous.next=void 0,e.tail=t.previous):(0,i.Z)(t.next)?(t.next.previous=void 0,e.head=t.next):(e.head=void 0,e.tail=void 0),t.next=void 0,t.previous=void 0}Object.defineProperties(o.prototype,{length:{get:function(){return this._length}}}),o.prototype.add=function(e){const t=new r(e,this.tail,void 0);return(0,i.Z)(this.tail)?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t},o.prototype.remove=function(e){(0,i.Z)(e)&&(s(this,e),--this._length)},o.prototype.splice=function(e,t){if(e===t)return;s(this,t);const n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e};const a=o},942841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(736194);const o={LINEAR_NONE:i.oY.Linear.None,QUADRATIC_IN:i.oY.Quadratic.In,QUADRATIC_OUT:i.oY.Quadratic.Out,QUADRATIC_IN_OUT:i.oY.Quadratic.InOut,CUBIC_IN:i.oY.Cubic.In,CUBIC_OUT:i.oY.Cubic.Out,CUBIC_IN_OUT:i.oY.Cubic.InOut,QUARTIC_IN:i.oY.Quartic.In,QUARTIC_OUT:i.oY.Quartic.Out,QUARTIC_IN_OUT:i.oY.Quartic.InOut,QUINTIC_IN:i.oY.Quintic.In,QUINTIC_OUT:i.oY.Quintic.Out,QUINTIC_IN_OUT:i.oY.Quintic.InOut,SINUSOIDAL_IN:i.oY.Sinusoidal.In,SINUSOIDAL_OUT:i.oY.Sinusoidal.Out,SINUSOIDAL_IN_OUT:i.oY.Sinusoidal.InOut,EXPONENTIAL_IN:i.oY.Exponential.In,EXPONENTIAL_OUT:i.oY.Exponential.Out,EXPONENTIAL_IN_OUT:i.oY.Exponential.InOut,CIRCULAR_IN:i.oY.Circular.In,CIRCULAR_OUT:i.oY.Circular.Out,CIRCULAR_IN_OUT:i.oY.Circular.InOut,ELASTIC_IN:i.oY.Elastic.In,ELASTIC_OUT:i.oY.Elastic.Out,ELASTIC_IN_OUT:i.oY.Elastic.InOut,BACK_IN:i.oY.Back.In,BACK_OUT:i.oY.Back.Out,BACK_IN_OUT:i.oY.Back.InOut,BOUNCE_IN:i.oY.Bounce.In,BOUNCE_OUT:i.oY.Bounce.Out,BOUNCE_IN_OUT:i.oY.Bounce.InOut},r=Object.freeze(o)},370271:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ee});var i=n(762031),o=n(405254),r=n(660904),s=n(532056),a=n(790087),c=n(449809),l=n(234146),u=n(11020),d=n(765153),h=n(976337),f=n(63354),p=n(351047),m=n(87200),_=n(951775),g=n(263825),Z=n(156905),y=n(61885),b=n(5450),v=n(342209),A=n(344485),T=n(664288),w=n(804868),E=n(360846),S=n(143450),C=n(427183);const x=new r.Z,I=new r.Z,P=new r.Z,D=new r.Z,O=new o.Z,L=new T.Z,N=new T.Z,M=new E.Z,R=new r.Z,F=new r.Z,B=new r.Z,U=new s.Z,k=new r.Z,V=new o.Z,H=new o.Z;function z(e,t,n){const i=t.vertexFormat,s=t.center,a=t.semiMajorAxis,l=t.semiMinorAxis,d=t.ellipsoid,f=t.stRotation,m=n?e.length/3*2:e.length/3,Z=t.shadowVolume,b=i.st?new Float32Array(2*m):void 0,v=i.normal?new Float32Array(3*m):void 0,A=i.tangent?new Float32Array(3*m):void 0,w=i.bitangent?new Float32Array(3*m):void 0,S=Z?new Float32Array(3*m):void 0;let C=0,D=R,z=F,G=B;const j=new p.Z(d),W=j.project(d.cartesianToCartographic(s,U),k),q=d.scaleToGeodeticSurface(s,x);d.geodeticSurfaceNormal(q,q);let Y=L,X=N;if(0!==f){let e=E.Z.fromAxisAngle(q,f,M);Y=T.Z.fromQuaternion(e,Y),e=E.Z.fromAxisAngle(q,-f,M),X=T.Z.fromQuaternion(e,X)}else Y=T.Z.clone(T.Z.IDENTITY,Y),X=T.Z.clone(T.Z.IDENTITY,X);const J=o.Z.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,V),Q=o.Z.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,H);let $=e.length;const K=n?$:0,ee=K/3*2;for(let t=0;t<$;t+=3){const o=t+1,s=t+2,c=r.Z.fromArray(e,t,x);if(i.st){const e=T.Z.multiplyByVector(Y,c,I),t=j.project(d.cartesianToCartographic(e,U),P);r.Z.subtract(t,W,t),O.x=(t.x+a)/(2*a),O.y=(t.y+l)/(2*l),J.x=Math.min(O.x,J.x),J.y=Math.min(O.y,J.y),Q.x=Math.max(O.x,Q.x),Q.y=Math.max(O.y,Q.y),n&&(b[C+ee]=O.x,b[C+1+ee]=O.y),b[C++]=O.x,b[C++]=O.y}(i.normal||i.tangent||i.bitangent||Z)&&(D=d.geodeticSurfaceNormal(c,D),Z&&(S[t+K]=-D.x,S[o+K]=-D.y,S[s+K]=-D.z),(i.normal||i.tangent||i.bitangent)&&((i.tangent||i.bitangent)&&(z=r.Z.normalize(r.Z.cross(r.Z.UNIT_Z,D,z),z),T.Z.multiplyByVector(X,z,z)),i.normal&&(v[t]=D.x,v[o]=D.y,v[s]=D.z,n&&(v[t+K]=-D.x,v[o+K]=-D.y,v[s+K]=-D.z)),i.tangent&&(A[t]=z.x,A[o]=z.y,A[s]=z.z,n&&(A[t+K]=-z.x,A[o+K]=-z.y,A[s+K]=-z.z)),i.bitangent&&(G=r.Z.normalize(r.Z.cross(D,z,G),G),w[t]=G.x,w[o]=G.y,w[s]=G.z,n&&(w[t+K]=G.x,w[o+K]=G.y,w[s+K]=G.z))))}if(i.st){$=b.length;for(let e=0;e<$;e+=2)b[e]=(b[e]-J.x)/(Q.x-J.x),b[e+1]=(b[e+1]-J.y)/(Q.y-J.y)}const te=new g.Z;if(i.position){const i=h.Z.raisePositionsToHeight(e,t,n);te.position=new _.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:i})}if(i.st&&(te.st=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:b})),i.normal&&(te.normal=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:v})),i.tangent&&(te.tangent=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:A})),i.bitangent&&(te.bitangent=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:w})),Z&&(te.extrudeDirection=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:S})),n&&(0,u.Z)(t.offsetAttribute)){let e=new Uint8Array(m);if(t.offsetAttribute===y.Z.TOP)e=e.fill(1,0,m/2);else{const n=t.offsetAttribute===y.Z.NONE?0:1;e=e.fill(n)}te.applyOffset=new _.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}return te}function G(e){const t=new Array(e*(e+1)*12-6);let n,i,o,r,s,a=0;for(n=0,o=1,r=0;r<3;r++)t[a++]=o++,t[a++]=n,t[a++]=o;for(r=2;r<e+1;++r){for(o=r*(r+1)-1,n=(r-1)*r-1,t[a++]=o++,t[a++]=n,t[a++]=o,i=2*r,s=0;s<i-1;++s)t[a++]=o,t[a++]=n++,t[a++]=n,t[a++]=o++,t[a++]=n,t[a++]=o;t[a++]=o++,t[a++]=n,t[a++]=o}for(i=2*e,++o,++n,r=0;r<i-1;++r)t[a++]=o,t[a++]=n++,t[a++]=n,t[a++]=o++,t[a++]=n,t[a++]=o;for(t[a++]=o,t[a++]=n++,t[a++]=n,t[a++]=o++,t[a++]=n++,t[a++]=n,++n,r=e-1;r>1;--r){for(t[a++]=n++,t[a++]=n,t[a++]=o,i=2*r,s=0;s<i-1;++s)t[a++]=o,t[a++]=n++,t[a++]=n,t[a++]=o++,t[a++]=n,t[a++]=o;t[a++]=n++,t[a++]=n++,t[a++]=o++}for(r=0;r<3;r++)t[a++]=n++,t[a++]=n,t[a++]=o;return t}let j=new r.Z;const W=new i.Z,q=new i.Z;function Y(e,t,n,i,o,s,a){const c=h.Z.computeEllipsePositions({center:e,semiMajorAxis:t,semiMinorAxis:n,rotation:i,granularity:o},!1,!0).outerPositions,l=c.length/3,u=new Array(l);for(let e=0;e<l;++e)u[e]=r.Z.fromArray(c,3*e);const d=S.Z.fromCartesianArray(u,s,a);return d.width>A.Z.PI&&(d.north=d.north>0?A.Z.PI_OVER_TWO-A.Z.EPSILON7:d.north,d.south=d.south<0?A.Z.EPSILON7-A.Z.PI_OVER_TWO:d.south,d.east=A.Z.PI,d.west=-A.Z.PI),d}function X(e){const t=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).center,n=(0,l.Z)(e.ellipsoid,f.Z.WGS84),i=e.semiMajorAxis,o=e.semiMinorAxis,s=(0,l.Z)(e.granularity,A.Z.RADIANS_PER_DEGREE),c=(0,l.Z)(e.vertexFormat,C.Z.DEFAULT);if(a.Z.defined("options.center",t),a.Z.typeOf.number("options.semiMajorAxis",i),a.Z.typeOf.number("options.semiMinorAxis",o),i<o)throw new d.Z("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(s<=0)throw new d.Z("granularity must be greater than zero.");const u=(0,l.Z)(e.height,0),h=(0,l.Z)(e.extrudedHeight,u);this._center=r.Z.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=o,this._ellipsoid=f.Z.clone(n),this._rotation=(0,l.Z)(e.rotation,0),this._stRotation=(0,l.Z)(e.stRotation,0),this._height=Math.max(h,u),this._granularity=s,this._vertexFormat=C.Z.clone(c),this._extrudedHeight=Math.min(h,u),this._shadowVolume=(0,l.Z)(e.shadowVolume,!1),this._workerName="createEllipseGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0}X.packedLength=r.Z.packedLength+f.Z.packedLength+C.Z.packedLength+9,X.pack=function(e,t,n){return a.Z.defined("value",e),a.Z.defined("array",t),n=(0,l.Z)(n,0),r.Z.pack(e._center,t,n),n+=r.Z.packedLength,f.Z.pack(e._ellipsoid,t,n),n+=f.Z.packedLength,C.Z.pack(e._vertexFormat,t,n),n+=C.Z.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=(0,l.Z)(e._offsetAttribute,-1),t};const J=new r.Z,Q=new f.Z,$=new C.Z,K={center:J,ellipsoid:Q,vertexFormat:$,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,stRotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};X.unpack=function(e,t,n){a.Z.defined("array",e),t=(0,l.Z)(t,0);const i=r.Z.unpack(e,t,J);t+=r.Z.packedLength;const o=f.Z.unpack(e,t,Q);t+=f.Z.packedLength;const s=C.Z.unpack(e,t,$);t+=C.Z.packedLength;const c=e[t++],d=e[t++],h=e[t++],p=e[t++],m=e[t++],_=e[t++],g=e[t++],Z=1===e[t++],y=e[t];return(0,u.Z)(n)?(n._center=r.Z.clone(i,n._center),n._ellipsoid=f.Z.clone(o,n._ellipsoid),n._vertexFormat=C.Z.clone(s,n._vertexFormat),n._semiMajorAxis=c,n._semiMinorAxis=d,n._rotation=h,n._stRotation=p,n._height=m,n._granularity=_,n._extrudedHeight=g,n._shadowVolume=Z,n._offsetAttribute=-1===y?void 0:y,n):(K.height=m,K.extrudedHeight=g,K.granularity=_,K.stRotation=p,K.rotation=h,K.semiMajorAxis=c,K.semiMinorAxis=d,K.shadowVolume=Z,K.offsetAttribute=-1===y?void 0:y,new X(K))},X.computeRectangle=function(e,t){const n=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).center,i=(0,l.Z)(e.ellipsoid,f.Z.WGS84),o=e.semiMajorAxis,r=e.semiMinorAxis,s=(0,l.Z)(e.granularity,A.Z.RADIANS_PER_DEGREE),c=(0,l.Z)(e.rotation,0);if(a.Z.defined("options.center",n),a.Z.typeOf.number("options.semiMajorAxis",o),a.Z.typeOf.number("options.semiMinorAxis",r),o<r)throw new d.Z("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(s<=0)throw new d.Z("granularity must be greater than zero.");return Y(n,o,r,c,s,i,t)},X.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;const t=e._height,n=e._extrudedHeight,s=!A.Z.equalsEpsilon(t,n,0,A.Z.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);const a={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,vertexFormat:e._vertexFormat,stRotation:e._stRotation};let l;if(s)a.extrudedHeight=n,a.shadowVolume=e._shadowVolume,a.offsetAttribute=e._offsetAttribute,l=function(e){const t=e.center,n=e.ellipsoid,s=e.semiMajorAxis;let a=r.Z.multiplyByScalar(n.geodeticSurfaceNormal(t,x),e.height,x);W.center=r.Z.add(t,a,W.center),W.radius=s,a=r.Z.multiplyByScalar(n.geodeticSurfaceNormal(t,a),e.extrudedHeight,a),q.center=r.Z.add(t,a,q.center),q.radius=s;const l=h.Z.computeEllipsePositions(e,!0,!0),d=l.positions,f=l.numPts,A=l.outerPositions,S=i.Z.union(W,q),C=z(d,e,!0);let N=G(f);const j=N.length;N.length=2*j;const Y=d.length/3;for(let e=0;e<j;e+=3)N[e+j]=N[e+2]+Y,N[e+1+j]=N[e+1]+Y,N[e+2+j]=N[e]+Y;const X=v.Z.createTypedArray(2*Y/3,N),J=new m.Z({attributes:C,indices:X,primitiveType:w.Z.TRIANGLES}),Q=function(e,t){const n=t.vertexFormat,i=t.center,s=t.semiMajorAxis,a=t.semiMinorAxis,l=t.ellipsoid,d=t.height,h=t.extrudedHeight,f=t.stRotation,m=e.length/3*2,Z=new Float64Array(3*m),b=n.st?new Float32Array(2*m):void 0,v=n.normal?new Float32Array(3*m):void 0,A=n.tangent?new Float32Array(3*m):void 0,w=n.bitangent?new Float32Array(3*m):void 0,S=t.shadowVolume,C=S?new Float32Array(3*m):void 0;let N=0,z=R,G=F,j=B;const W=new p.Z(l),q=W.project(l.cartesianToCartographic(i,U),k),Y=l.scaleToGeodeticSurface(i,x);l.geodeticSurfaceNormal(Y,Y);const X=E.Z.fromAxisAngle(Y,f,M),J=T.Z.fromQuaternion(X,L),Q=o.Z.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,V),$=o.Z.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,H);let K=e.length;const ee=K/3*2;for(let t=0;t<K;t+=3){const i=t+1,o=t+2;let c,u=r.Z.fromArray(e,t,x);if(n.st){const e=T.Z.multiplyByVector(J,u,I),t=W.project(l.cartesianToCartographic(e,U),P);r.Z.subtract(t,q,t),O.x=(t.x+s)/(2*s),O.y=(t.y+a)/(2*a),Q.x=Math.min(O.x,Q.x),Q.y=Math.min(O.y,Q.y),$.x=Math.max(O.x,$.x),$.y=Math.max(O.y,$.y),b[N+ee]=O.x,b[N+1+ee]=O.y,b[N++]=O.x,b[N++]=O.y}u=l.scaleToGeodeticSurface(u,u),c=r.Z.clone(u,I),z=l.geodeticSurfaceNormal(u,z),S&&(C[t+K]=-z.x,C[i+K]=-z.y,C[o+K]=-z.z);let f=r.Z.multiplyByScalar(z,d,D);if(u=r.Z.add(u,f,u),f=r.Z.multiplyByScalar(z,h,f),c=r.Z.add(c,f,c),n.position&&(Z[t+K]=c.x,Z[i+K]=c.y,Z[o+K]=c.z,Z[t]=u.x,Z[i]=u.y,Z[o]=u.z),n.normal||n.tangent||n.bitangent){j=r.Z.clone(z,j);const s=r.Z.fromArray(e,(t+3)%K,D);r.Z.subtract(s,u,s);const a=r.Z.subtract(c,u,P);z=r.Z.normalize(r.Z.cross(a,s,z),z),n.normal&&(v[t]=z.x,v[i]=z.y,v[o]=z.z,v[t+K]=z.x,v[i+K]=z.y,v[o+K]=z.z),n.tangent&&(G=r.Z.normalize(r.Z.cross(j,z,G),G),A[t]=G.x,A[i]=G.y,A[o]=G.z,A[t+K]=G.x,A[t+1+K]=G.y,A[t+2+K]=G.z),n.bitangent&&(w[t]=j.x,w[i]=j.y,w[o]=j.z,w[t+K]=j.x,w[i+K]=j.y,w[o+K]=j.z)}}if(n.st){K=b.length;for(let e=0;e<K;e+=2)b[e]=(b[e]-Q.x)/($.x-Q.x),b[e+1]=(b[e+1]-Q.y)/($.y-Q.y)}const te=new g.Z;if(n.position&&(te.position=new _.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:Z})),n.st&&(te.st=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:b})),n.normal&&(te.normal=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:v})),n.tangent&&(te.tangent=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:A})),n.bitangent&&(te.bitangent=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:w})),S&&(te.extrudeDirection=new _.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:C})),(0,u.Z)(t.offsetAttribute)){let e=new Uint8Array(m);if(t.offsetAttribute===y.Z.TOP)e=e.fill(1,0,m/2);else{const n=t.offsetAttribute===y.Z.NONE?0:1;e=e.fill(n)}te.applyOffset=new _.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}return te}(A,e);N=function(e){const t=e.length/3,n=v.Z.createTypedArray(t,6*t);let i=0;for(let e=0;e<t;e++){const o=e,r=e+t,s=(o+1)%t,a=s+t;n[i++]=o,n[i++]=r,n[i++]=s,n[i++]=s,n[i++]=r,n[i++]=a}return n}(A);const $=v.Z.createTypedArray(2*A.length/3,N),K=new m.Z({attributes:Q,indices:$,primitiveType:w.Z.TRIANGLES}),ee=b.Z.combineInstances([new Z.Z({geometry:J}),new Z.Z({geometry:K})]);return{boundingSphere:S,attributes:ee[0].attributes,indices:ee[0].indices}}(a);else if(l=function(e){const t=e.center;j=r.Z.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,j),e.height,j),j=r.Z.add(t,j,j);const n=new i.Z(j,e.semiMajorAxis),o=h.Z.computeEllipsePositions(e,!0,!1),s=o.positions,a=o.numPts,c=z(s,e,!1);let l=G(a);return l=v.Z.createTypedArray(s.length/3,l),{boundingSphere:n,attributes:c,indices:l}}(a),(0,u.Z)(e._offsetAttribute)){const t=l.attributes.position.values.length,n=e._offsetAttribute===y.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);l.attributes.applyOffset=new _.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new m.Z({attributes:l.attributes,indices:l.indices,primitiveType:w.Z.TRIANGLES,boundingSphere:l.boundingSphere,offsetAttribute:e._offsetAttribute})},X.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new X({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:o,rotation:e._rotation,stRotation:e._stRotation,granularity:i,extrudedHeight:r,height:s,vertexFormat:C.Z.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(X.prototype,{rectangle:{get:function(){return(0,u.Z)(this._rectangle)||(this._rectangle=Y(this._center,this._semiMajorAxis,this._semiMinorAxis,this._rotation,this._granularity,this._ellipsoid)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return(0,u.Z)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){const t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];const n=h.Z.computeEllipsePositions({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,rotation:e._rotation,granularity:e._granularity},!1,!0).outerPositions,i=n.length/3,o=new Array(i);for(let e=0;e<i;++e)o[e]=r.Z.fromArray(n,3*e);const s=e._ellipsoid,a=e.rectangle;return m.Z._textureCoordinateRotationPoints(o,t,s,a)}(this)),this._textureCoordinateRotationPoints}}});const ee=X},976337:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(660904),o=n(344485),r=n(664288),s=n(360846);const a={},c=new i.Z,l=new i.Z,u=new s.Z,d=new r.Z;function h(e,t,n,o,a,h,f,p,m,_){const g=e+t;i.Z.multiplyByScalar(o,Math.cos(g),c),i.Z.multiplyByScalar(n,Math.sin(g),l),i.Z.add(c,l,c);let Z=Math.cos(e);Z*=Z;let y=Math.sin(e);y*=y;const b=h/Math.sqrt(f*Z+a*y)/p;return s.Z.fromAxisAngle(c,b,u),r.Z.fromQuaternion(u,d),r.Z.multiplyByVector(d,m,_),i.Z.normalize(_,_),i.Z.multiplyByScalar(_,p,_),_}const f=new i.Z,p=new i.Z,m=new i.Z,_=new i.Z;a.raisePositionsToHeight=function(e,t,n){const o=t.ellipsoid,r=t.height,s=t.extrudedHeight,a=n?e.length/3*2:e.length/3,c=new Float64Array(3*a),l=e.length,u=n?l:0;for(let t=0;t<l;t+=3){const a=t+1,l=t+2,d=i.Z.fromArray(e,t,f);o.scaleToGeodeticSurface(d,d);const h=i.Z.clone(d,p),g=o.geodeticSurfaceNormal(d,_),Z=i.Z.multiplyByScalar(g,r,m);i.Z.add(d,Z,d),n&&(i.Z.multiplyByScalar(g,s,Z),i.Z.add(h,Z,h),c[t+u]=h.x,c[a+u]=h.y,c[l+u]=h.z),c[t]=d.x,c[a]=d.y,c[l]=d.z}return c};const g=new i.Z,Z=new i.Z,y=new i.Z;a.computeEllipsePositions=function(e,t,n){const r=e.semiMinorAxis,s=e.semiMajorAxis,a=e.rotation,c=e.center,l=8*e.granularity,u=r*r,d=s*s,_=s*r,b=i.Z.magnitude(c),v=i.Z.normalize(c,g);let A=i.Z.cross(i.Z.UNIT_Z,c,Z);A=i.Z.normalize(A,A);const T=i.Z.cross(v,A,y);let w=1+Math.ceil(o.Z.PI_OVER_TWO/l);const E=o.Z.PI_OVER_TWO/(w-1);let S=o.Z.PI_OVER_TWO-w*E;S<0&&(w-=Math.ceil(Math.abs(S)/E));const C=t?new Array(w*(w+2)*2*3):void 0;let x=0,I=f,P=p;const D=4*w*3;let O=D-1,L=0;const N=n?new Array(D):void 0;let M,R,F,B,U;for(S=o.Z.PI_OVER_TWO,I=h(S,a,T,A,u,_,d,b,v,I),t&&(C[x++]=I.x,C[x++]=I.y,C[x++]=I.z),n&&(N[O--]=I.z,N[O--]=I.y,N[O--]=I.x),S=o.Z.PI_OVER_TWO-E,M=1;M<w+1;++M){if(I=h(S,a,T,A,u,_,d,b,v,I),P=h(Math.PI-S,a,T,A,u,_,d,b,v,P),t){for(C[x++]=I.x,C[x++]=I.y,C[x++]=I.z,F=2*M+2,R=1;R<F-1;++R)B=R/(F-1),U=i.Z.lerp(I,P,B,m),C[x++]=U.x,C[x++]=U.y,C[x++]=U.z;C[x++]=P.x,C[x++]=P.y,C[x++]=P.z}n&&(N[O--]=I.z,N[O--]=I.y,N[O--]=I.x,N[L++]=P.x,N[L++]=P.y,N[L++]=P.z),S=o.Z.PI_OVER_TWO-(M+1)*E}for(M=w;M>1;--M){if(S=o.Z.PI_OVER_TWO-(M-1)*E,I=h(-S,a,T,A,u,_,d,b,v,I),P=h(S+Math.PI,a,T,A,u,_,d,b,v,P),t){for(C[x++]=I.x,C[x++]=I.y,C[x++]=I.z,F=2*(M-1)+2,R=1;R<F-1;++R)B=R/(F-1),U=i.Z.lerp(I,P,B,m),C[x++]=U.x,C[x++]=U.y,C[x++]=U.z;C[x++]=P.x,C[x++]=P.y,C[x++]=P.z}n&&(N[O--]=I.z,N[O--]=I.y,N[O--]=I.x,N[L++]=P.x,N[L++]=P.y,N[L++]=P.z)}S=o.Z.PI_OVER_TWO,I=h(-S,a,T,A,u,_,d,b,v,I);const k={};return t&&(C[x++]=I.x,C[x++]=I.y,C[x++]=I.z,k.positions=C,k.numPts=w),n&&(N[O--]=I.z,N[O--]=I.y,N[O--]=I.x,k.outerPositions=N),k};const b=a},794493:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var i=n(762031),o=n(660904),r=n(449809),s=n(234146),a=n(11020),c=n(765153),l=n(976337),u=n(63354),d=n(87200),h=n(951775),f=n(263825),p=n(61885),m=n(342209),_=n(344485),g=n(804868);const Z=new o.Z;let y=new o.Z;const b=new i.Z,v=new i.Z;function A(e){const t=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).center,n=(0,s.Z)(e.ellipsoid,u.Z.WGS84),i=e.semiMajorAxis,r=e.semiMinorAxis,l=(0,s.Z)(e.granularity,_.Z.RADIANS_PER_DEGREE);if(!(0,a.Z)(t))throw new c.Z("center is required.");if(!(0,a.Z)(i))throw new c.Z("semiMajorAxis is required.");if(!(0,a.Z)(r))throw new c.Z("semiMinorAxis is required.");if(i<r)throw new c.Z("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(l<=0)throw new c.Z("granularity must be greater than zero.");const d=(0,s.Z)(e.height,0),h=(0,s.Z)(e.extrudedHeight,d);this._center=o.Z.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=r,this._ellipsoid=u.Z.clone(n),this._rotation=(0,s.Z)(e.rotation,0),this._height=Math.max(h,d),this._granularity=l,this._extrudedHeight=Math.min(h,d),this._numberOfVerticalLines=Math.max((0,s.Z)(e.numberOfVerticalLines,16),0),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipseOutlineGeometry"}A.packedLength=o.Z.packedLength+u.Z.packedLength+8,A.pack=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("value is required");if(!(0,a.Z)(t))throw new c.Z("array is required");return n=(0,s.Z)(n,0),o.Z.pack(e._center,t,n),n+=o.Z.packedLength,u.Z.pack(e._ellipsoid,t,n),n+=u.Z.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._numberOfVerticalLines,t[n]=(0,s.Z)(e._offsetAttribute,-1),t};const T=new o.Z,w=new u.Z,E={center:T,ellipsoid:w,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};A.unpack=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("array is required");t=(0,s.Z)(t,0);const i=o.Z.unpack(e,t,T);t+=o.Z.packedLength;const r=u.Z.unpack(e,t,w);t+=u.Z.packedLength;const l=e[t++],d=e[t++],h=e[t++],f=e[t++],p=e[t++],m=e[t++],_=e[t++],g=e[t];return(0,a.Z)(n)?(n._center=o.Z.clone(i,n._center),n._ellipsoid=u.Z.clone(r,n._ellipsoid),n._semiMajorAxis=l,n._semiMinorAxis=d,n._rotation=h,n._height=f,n._granularity=p,n._extrudedHeight=m,n._numberOfVerticalLines=_,n._offsetAttribute=-1===g?void 0:g,n):(E.height=f,E.extrudedHeight=m,E.granularity=p,E.rotation=h,E.semiMajorAxis=l,E.semiMinorAxis=d,E.numberOfVerticalLines=_,E.offsetAttribute=-1===g?void 0:g,new A(E))},A.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;const t=e._height,n=e._extrudedHeight,c=!_.Z.equalsEpsilon(t,n,0,_.Z.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);const u={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,numberOfVerticalLines:e._numberOfVerticalLines};let A;if(c)u.extrudedHeight=n,u.offsetAttribute=e._offsetAttribute,A=function(e){const t=e.center,n=e.ellipsoid,c=e.semiMajorAxis;let u=o.Z.multiplyByScalar(n.geodeticSurfaceNormal(t,Z),e.height,Z);b.center=o.Z.add(t,u,b.center),b.radius=c,u=o.Z.multiplyByScalar(n.geodeticSurfaceNormal(t,u),e.extrudedHeight,u),v.center=o.Z.add(t,u,v.center),v.radius=c;let d=l.Z.computeEllipsePositions(e,!1,!0).outerPositions;const g=new f.Z({position:new h.Z({componentDatatype:r.Z.DOUBLE,componentsPerAttribute:3,values:l.Z.raisePositionsToHeight(d,e,!0)})});d=g.position.values;const y=i.Z.union(b,v);let A=d.length/3;if((0,a.Z)(e.offsetAttribute)){let t=new Uint8Array(A);if(e.offsetAttribute===p.Z.TOP)t=t.fill(1,0,A/2);else{const n=e.offsetAttribute===p.Z.NONE?0:1;t=t.fill(n)}g.applyOffset=new h.Z({componentDatatype:r.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}let T=(0,s.Z)(e.numberOfVerticalLines,16);T=_.Z.clamp(T,0,A/2);const w=m.Z.createTypedArray(A,2*A+2*T);A/=2;let E,S,C=0;for(E=0;E<A;++E)w[C++]=E,w[C++]=(E+1)%A,w[C++]=E+A,w[C++]=(E+1)%A+A;if(T>0){const e=Math.min(T,A);S=Math.round(A/e);const t=Math.min(S*T,A);for(E=0;E<t;E+=S)w[C++]=E,w[C++]=E+A}return{boundingSphere:y,attributes:g,indices:w}}(u);else if(A=function(e){const t=e.center;y=o.Z.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,y),e.height,y),y=o.Z.add(t,y,y);const n=new i.Z(y,e.semiMajorAxis),s=l.Z.computeEllipsePositions(e,!1,!0).outerPositions,a=new f.Z({position:new h.Z({componentDatatype:r.Z.DOUBLE,componentsPerAttribute:3,values:l.Z.raisePositionsToHeight(s,e,!1)})}),c=s.length/3,u=m.Z.createTypedArray(c,2*c);let d=0;for(let e=0;e<c;++e)u[d++]=e,u[d++]=(e+1)%c;return{boundingSphere:n,attributes:a,indices:u}}(u),(0,a.Z)(e._offsetAttribute)){const t=A.attributes.position.values.length,n=e._offsetAttribute===p.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);A.attributes.applyOffset=new h.Z({componentDatatype:r.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new d.Z({attributes:A.attributes,indices:A.indices,primitiveType:g.Z.LINES,boundingSphere:A.boundingSphere,offsetAttribute:e._offsetAttribute})};const S=A},658912:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(762031),o=n(405254),r=n(660904),s=n(449809),a=n(234146),c=n(11020),l=n(765153),u=n(63354),d=n(87200),h=n(951775),f=n(263825),p=n(61885),m=n(342209),_=n(344485),g=n(804868),Z=n(427183);const y=new r.Z,b=new r.Z,v=new r.Z,A=new r.Z,T=new r.Z,w=new r.Z(1,1,1),E=Math.cos,S=Math.sin;function C(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT);const t=(0,a.Z)(e.radii,w),n=(0,a.Z)(e.innerRadii,t),i=(0,a.Z)(e.minimumClock,0),o=(0,a.Z)(e.maximumClock,_.Z.TWO_PI),s=(0,a.Z)(e.minimumCone,0),c=(0,a.Z)(e.maximumCone,_.Z.PI),u=Math.round((0,a.Z)(e.stackPartitions,64)),d=Math.round((0,a.Z)(e.slicePartitions,64)),h=(0,a.Z)(e.vertexFormat,Z.Z.DEFAULT);if(d<3)throw new l.Z("options.slicePartitions cannot be less than three.");if(u<3)throw new l.Z("options.stackPartitions cannot be less than three.");this._radii=r.Z.clone(t),this._innerRadii=r.Z.clone(n),this._minimumClock=i,this._maximumClock=o,this._minimumCone=s,this._maximumCone=c,this._stackPartitions=u,this._slicePartitions=d,this._vertexFormat=Z.Z.clone(h),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidGeometry"}C.packedLength=2*r.Z.packedLength+Z.Z.packedLength+7,C.pack=function(e,t,n){if(!(0,c.Z)(e))throw new l.Z("value is required");if(!(0,c.Z)(t))throw new l.Z("array is required");return n=(0,a.Z)(n,0),r.Z.pack(e._radii,t,n),n+=r.Z.packedLength,r.Z.pack(e._innerRadii,t,n),n+=r.Z.packedLength,Z.Z.pack(e._vertexFormat,t,n),n+=Z.Z.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n]=(0,a.Z)(e._offsetAttribute,-1),t};const x=new r.Z,I=new r.Z,P=new Z.Z,D={radii:x,innerRadii:I,vertexFormat:P,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,offsetAttribute:void 0};let O;C.unpack=function(e,t,n){if(!(0,c.Z)(e))throw new l.Z("array is required");t=(0,a.Z)(t,0);const i=r.Z.unpack(e,t,x);t+=r.Z.packedLength;const o=r.Z.unpack(e,t,I);t+=r.Z.packedLength;const s=Z.Z.unpack(e,t,P);t+=Z.Z.packedLength;const u=e[t++],d=e[t++],h=e[t++],f=e[t++],p=e[t++],m=e[t++],_=e[t];return(0,c.Z)(n)?(n._radii=r.Z.clone(i,n._radii),n._innerRadii=r.Z.clone(o,n._innerRadii),n._vertexFormat=Z.Z.clone(s,n._vertexFormat),n._minimumClock=u,n._maximumClock=d,n._minimumCone=h,n._maximumCone=f,n._stackPartitions=p,n._slicePartitions=m,n._offsetAttribute=-1===_?void 0:_,n):(D.minimumClock=u,D.maximumClock=d,D.minimumCone=h,D.maximumCone=f,D.stackPartitions=p,D.slicePartitions=m,D.offsetAttribute=-1===_?void 0:_,new C(D))},C.createGeometry=function(e){const t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;const n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;const a=e._minimumClock,l=e._maximumClock,Z=e._minimumCone,w=e._maximumCone,C=e._vertexFormat;let x,I,P=e._slicePartitions+1,D=e._stackPartitions+1;P=Math.round(P*Math.abs(l-a)/_.Z.TWO_PI),D=Math.round(D*Math.abs(w-Z)/_.Z.PI),P<2&&(P=2),D<2&&(D=2);let O=0;const L=[Z],N=[a];for(x=0;x<D;x++)L.push(Z+x*(w-Z)/(D-1));for(L.push(w),I=0;I<P;I++)N.push(a+I*(l-a)/(P-1));N.push(l);const M=L.length,R=N.length;let F=0,B=1;const U=n.x!==t.x||n.y!==t.y||n.z!==t.z;let k=!1,V=!1,H=!1;U&&(B=2,Z>0&&(k=!0,F+=P-1),w<Math.PI&&(V=!0,F+=P-1),(l-a)%_.Z.TWO_PI?(H=!0,F+=2*(D-1)+1):F+=1);const z=R*M*B,G=new Float64Array(3*z),j=new Array(z).fill(!1),W=new Array(z).fill(!1),q=P*D*B,Y=6*(q+F+1-(P+D)*B),X=m.Z.createTypedArray(q,Y),J=C.normal?new Float32Array(3*z):void 0,Q=C.tangent?new Float32Array(3*z):void 0,$=C.bitangent?new Float32Array(3*z):void 0,K=C.st?new Float32Array(2*z):void 0,ee=new Array(M),te=new Array(M);for(x=0;x<M;x++)ee[x]=S(L[x]),te[x]=E(L[x]);const ne=new Array(R),ie=new Array(R);for(I=0;I<R;I++)ie[I]=E(N[I]),ne[I]=S(N[I]);for(x=0;x<M;x++)for(I=0;I<R;I++)G[O++]=t.x*ee[x]*ie[I],G[O++]=t.y*ee[x]*ne[I],G[O++]=t.z*te[x];let oe,re,se,ae,ce=z/2;if(U)for(x=0;x<M;x++)for(I=0;I<R;I++)G[O++]=n.x*ee[x]*ie[I],G[O++]=n.y*ee[x]*ne[I],G[O++]=n.z*te[x],j[ce]=!0,x>0&&x!==M-1&&0!==I&&I!==R-1&&(W[ce]=!0),ce++;for(O=0,x=1;x<M-2;x++)for(oe=x*R,re=(x+1)*R,I=1;I<R-2;I++)X[O++]=re+I,X[O++]=re+I+1,X[O++]=oe+I+1,X[O++]=re+I,X[O++]=oe+I+1,X[O++]=oe+I;if(U){const e=M*R;for(x=1;x<M-2;x++)for(oe=e+x*R,re=e+(x+1)*R,I=1;I<R-2;I++)X[O++]=re+I,X[O++]=oe+I,X[O++]=oe+I+1,X[O++]=re+I,X[O++]=oe+I+1,X[O++]=re+I+1}if(U){if(k)for(ae=M*R,x=1;x<R-2;x++)X[O++]=x,X[O++]=x+1,X[O++]=ae+x+1,X[O++]=x,X[O++]=ae+x+1,X[O++]=ae+x;if(V)for(se=M*R-R,ae=M*R*B-R,x=1;x<R-2;x++)X[O++]=se+x+1,X[O++]=se+x,X[O++]=ae+x,X[O++]=se+x+1,X[O++]=ae+x,X[O++]=ae+x+1}if(H){for(x=1;x<M-2;x++)ae=R*M+R*x,se=R*x,X[O++]=ae,X[O++]=se+R,X[O++]=se,X[O++]=ae,X[O++]=ae+R,X[O++]=se+R;for(x=1;x<M-2;x++)ae=R*M+R*(x+1)-1,se=R*(x+1)-1,X[O++]=se+R,X[O++]=ae,X[O++]=se,X[O++]=se+R,X[O++]=ae+R,X[O++]=ae}const le=new f.Z;C.position&&(le.position=new h.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:G}));let ue=0,de=0,he=0,fe=0;const pe=z/2;let me;const _e=u.Z.fromCartesian3(t),ge=u.Z.fromCartesian3(n);if(C.st||C.normal||C.tangent||C.bitangent){for(x=0;x<z;x++){me=j[x]?ge:_e;const e=r.Z.fromArray(G,3*x,y),t=me.geodeticSurfaceNormal(e,b);if(W[x]&&r.Z.negate(t,t),C.st){const e=o.Z.negate(t,T);K[ue++]=Math.atan2(e.y,e.x)/_.Z.TWO_PI+.5,K[ue++]=Math.asin(t.z)/Math.PI+.5}if(C.normal&&(J[de++]=t.x,J[de++]=t.y,J[de++]=t.z),C.tangent||C.bitangent){const e=v;let n,i=0;if(j[x]&&(i=pe),n=!k&&x>=i&&x<i+2*R?r.Z.UNIT_X:r.Z.UNIT_Z,r.Z.cross(n,t,e),r.Z.normalize(e,e),C.tangent&&(Q[he++]=e.x,Q[he++]=e.y,Q[he++]=e.z),C.bitangent){const n=r.Z.cross(t,e,A);r.Z.normalize(n,n),$[fe++]=n.x,$[fe++]=n.y,$[fe++]=n.z}}}C.st&&(le.st=new h.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:2,values:K})),C.normal&&(le.normal=new h.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:J})),C.tangent&&(le.tangent=new h.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:Q})),C.bitangent&&(le.bitangent=new h.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:$}))}if((0,c.Z)(e._offsetAttribute)){const t=G.length,n=e._offsetAttribute===p.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);le.applyOffset=new h.Z({componentDatatype:s.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new d.Z({attributes:le,indices:X,primitiveType:g.Z.TRIANGLES,boundingSphere:i.Z.fromEllipsoid(_e),offsetAttribute:e._offsetAttribute})},C.getUnitEllipsoid=function(){return(0,c.Z)(O)||(O=C.createGeometry(new C({radii:new r.Z(1,1,1),vertexFormat:Z.Z.POSITION_ONLY}))),O};const L=C},802877:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(762031),o=n(660904),r=n(449809),s=n(234146),a=n(11020),c=n(765153),l=n(63354),u=n(87200),d=n(951775),h=n(263825),f=n(61885),p=n(342209),m=n(344485),_=n(804868);const g=new o.Z(1,1,1),Z=Math.cos,y=Math.sin;function b(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT);const t=(0,s.Z)(e.radii,g),n=(0,s.Z)(e.innerRadii,t),i=(0,s.Z)(e.minimumClock,0),r=(0,s.Z)(e.maximumClock,m.Z.TWO_PI),l=(0,s.Z)(e.minimumCone,0),u=(0,s.Z)(e.maximumCone,m.Z.PI),d=Math.round((0,s.Z)(e.stackPartitions,10)),h=Math.round((0,s.Z)(e.slicePartitions,8)),p=Math.round((0,s.Z)(e.subdivisions,128));if(d<1)throw new c.Z("options.stackPartitions cannot be less than 1");if(h<0)throw new c.Z("options.slicePartitions cannot be less than 0");if(p<0)throw new c.Z("options.subdivisions must be greater than or equal to zero.");if((0,a.Z)(e.offsetAttribute)&&e.offsetAttribute===f.Z.TOP)throw new c.Z("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._radii=o.Z.clone(t),this._innerRadii=o.Z.clone(n),this._minimumClock=i,this._maximumClock=r,this._minimumCone=l,this._maximumCone=u,this._stackPartitions=d,this._slicePartitions=h,this._subdivisions=p,this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidOutlineGeometry"}b.packedLength=2*o.Z.packedLength+8,b.pack=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("value is required");if(!(0,a.Z)(t))throw new c.Z("array is required");return n=(0,s.Z)(n,0),o.Z.pack(e._radii,t,n),n+=o.Z.packedLength,o.Z.pack(e._innerRadii,t,n),n+=o.Z.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n++]=e._subdivisions,t[n]=(0,s.Z)(e._offsetAttribute,-1),t};const v=new o.Z,A=new o.Z,T={radii:v,innerRadii:A,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0,offsetAttribute:void 0};b.unpack=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("array is required");t=(0,s.Z)(t,0);const i=o.Z.unpack(e,t,v);t+=o.Z.packedLength;const r=o.Z.unpack(e,t,A);t+=o.Z.packedLength;const l=e[t++],u=e[t++],d=e[t++],h=e[t++],f=e[t++],p=e[t++],m=e[t++],_=e[t];return(0,a.Z)(n)?(n._radii=o.Z.clone(i,n._radii),n._innerRadii=o.Z.clone(r,n._innerRadii),n._minimumClock=l,n._maximumClock=u,n._minimumCone=d,n._maximumCone=h,n._stackPartitions=f,n._slicePartitions=p,n._subdivisions=m,n._offsetAttribute=-1===_?void 0:_,n):(T.minimumClock=l,T.maximumClock=u,T.minimumCone=d,T.maximumCone=h,T.stackPartitions=f,T.slicePartitions=p,T.subdivisions=m,T.offsetAttribute=-1===_?void 0:_,new b(T))},b.createGeometry=function(e){const t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;const n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;const o=e._minimumClock,s=e._maximumClock,c=e._minimumCone,g=e._maximumCone,b=e._subdivisions,v=l.Z.fromCartesian3(t);let A=e._slicePartitions+1,T=e._stackPartitions+1;A=Math.round(A*Math.abs(s-o)/m.Z.TWO_PI),T=Math.round(T*Math.abs(g-c)/m.Z.PI),A<2&&(A=2),T<2&&(T=2);let w=0,E=1;const S=n.x!==t.x||n.y!==t.y||n.z!==t.z;let C=!1,x=!1;S&&(E=2,c>0&&(C=!0,w+=A),g<Math.PI&&(x=!0,w+=A));const I=b*E*(T+A),P=new Float64Array(3*I),D=2*(I+w-(A+T)*E),O=p.Z.createTypedArray(I,D);let L,N,M,R,F=0;const B=new Array(T),U=new Array(T);for(L=0;L<T;L++)R=c+L*(g-c)/(T-1),B[L]=y(R),U[L]=Z(R);const k=new Array(b),V=new Array(b);for(L=0;L<b;L++)M=o+L*(s-o)/(b-1),k[L]=y(M),V[L]=Z(M);for(L=0;L<T;L++)for(N=0;N<b;N++)P[F++]=t.x*B[L]*V[N],P[F++]=t.y*B[L]*k[N],P[F++]=t.z*U[L];if(S)for(L=0;L<T;L++)for(N=0;N<b;N++)P[F++]=n.x*B[L]*V[N],P[F++]=n.y*B[L]*k[N],P[F++]=n.z*U[L];for(B.length=b,U.length=b,L=0;L<b;L++)R=c+L*(g-c)/(b-1),B[L]=y(R),U[L]=Z(R);for(k.length=A,V.length=A,L=0;L<A;L++)M=o+L*(s-o)/(A-1),k[L]=y(M),V[L]=Z(M);for(L=0;L<b;L++)for(N=0;N<A;N++)P[F++]=t.x*B[L]*V[N],P[F++]=t.y*B[L]*k[N],P[F++]=t.z*U[L];if(S)for(L=0;L<b;L++)for(N=0;N<A;N++)P[F++]=n.x*B[L]*V[N],P[F++]=n.y*B[L]*k[N],P[F++]=n.z*U[L];for(F=0,L=0;L<T*E;L++){const e=L*b;for(N=0;N<b-1;N++)O[F++]=e+N,O[F++]=e+N+1}let H=T*b*E;for(L=0;L<A;L++)for(N=0;N<b-1;N++)O[F++]=H+L+N*A,O[F++]=H+L+(N+1)*A;if(S)for(H=T*b*E+A*b,L=0;L<A;L++)for(N=0;N<b-1;N++)O[F++]=H+L+N*A,O[F++]=H+L+(N+1)*A;if(S){let e=T*b*E,t=e+b*A;if(C)for(L=0;L<A;L++)O[F++]=e+L,O[F++]=t+L;if(x)for(e+=b*A-A,t+=b*A-A,L=0;L<A;L++)O[F++]=e+L,O[F++]=t+L}const z=new h.Z({position:new d.Z({componentDatatype:r.Z.DOUBLE,componentsPerAttribute:3,values:P})});if((0,a.Z)(e._offsetAttribute)){const t=P.length,n=e._offsetAttribute===f.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);z.applyOffset=new d.Z({componentDatatype:r.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.Z({attributes:z,indices:O,primitiveType:_.Z.LINES,boundingSphere:i.Z.fromEllipsoid(v),offsetAttribute:e._offsetAttribute})};const w=b},250305:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(234146),o=n(11020),r=n(906439),s=n(63354),a=n(282910),c=n(729476),l=n(751655),u=n(96828);function d(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),this._tilingScheme=e.tilingScheme,(0,o.Z)(this._tilingScheme)||(this._tilingScheme=new c.Z({ellipsoid:(0,i.Z)(e.ellipsoid,s.Z.WGS84)})),this._levelZeroMaximumGeometricError=u.Z.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,64,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._errorEvent=new a.Z,this._ready=!0,this._readyPromise=Promise.resolve(!0)}Object.defineProperties(d.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return(0,r.Z)("EllipsoidTerrainProvider.ready","EllipsoidTerrainProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),!0}},readyPromise:{get:function(){return(0,r.Z)("EllipsoidTerrainProvider.readyPromise","EllipsoidTerrainProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),d.prototype.requestTileGeometry=function(e,t,n,i){return Promise.resolve(new l.Z({buffer:new Uint8Array(256),width:16,height:16}))},d.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},d.prototype.getTileDataAvailable=function(e,t,n){},d.prototype.loadTileDataAvailability=function(e,t,n){};const h=d},700234:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(11020),o=n(765153);function r(){this._removalFunctions=[]}r.prototype.add=function(e,t,n){if(!(0,i.Z)(e))throw new o.Z("event is required");const r=e.addEventListener(t,n);this._removalFunctions.push(r);const s=this;return function(){r();const e=s._removalFunctions;e.splice(e.indexOf(r),1)}},r.prototype.removeAll=function(){const e=this._removalFunctions;for(let t=0,n=e.length;t<n;++t)e[t]();e.length=0};const s=r},165032:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({NONE:0,HOLD:1,EXTRAPOLATE:2})},499746:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U});var i=n(762031),o=n(660904),r=n(798336),s=n(790087),a=n(449809),c=n(234146),l=n(11020),u=n(87200),d=n(951775),h=n(263825),f=n(664288),p=n(659635),m=n(223689),_=n(134282),g=n(804868),Z=n(360846),y=n(427183);function b(e){s.Z.typeOf.object("options",e),s.Z.typeOf.object("options.frustum",e.frustum),s.Z.typeOf.object("options.origin",e.origin),s.Z.typeOf.object("options.orientation",e.orientation);const t=e.frustum,n=e.orientation,i=e.origin,r=(0,c.Z)(e.vertexFormat,y.Z.DEFAULT),a=(0,c.Z)(e._drawNearPlane,!0);let l,u;t instanceof _.Z?(l=0,u=_.Z.packedLength):t instanceof m.Z&&(l=1,u=m.Z.packedLength),this._frustumType=l,this._frustum=t.clone(),this._origin=o.Z.clone(i),this._orientation=Z.Z.clone(n),this._drawNearPlane=a,this._vertexFormat=r,this._workerName="createFrustumGeometry",this.packedLength=2+u+o.Z.packedLength+Z.Z.packedLength+y.Z.packedLength}b.pack=function(e,t,n){s.Z.typeOf.object("value",e),s.Z.defined("array",t),n=(0,c.Z)(n,0);const i=e._frustumType,r=e._frustum;return t[n++]=i,0===i?(_.Z.pack(r,t,n),n+=_.Z.packedLength):(m.Z.pack(r,t,n),n+=m.Z.packedLength),o.Z.pack(e._origin,t,n),n+=o.Z.packedLength,Z.Z.pack(e._orientation,t,n),n+=Z.Z.packedLength,y.Z.pack(e._vertexFormat,t,n),t[n+=y.Z.packedLength]=e._drawNearPlane?1:0,t};const v=new _.Z,A=new m.Z,T=new Z.Z,w=new o.Z,E=new y.Z;function S(e,t,n,i,o,r,s,a){const c=e/3*2;for(let o=0;o<4;++o)(0,l.Z)(t)&&(t[e]=r.x,t[e+1]=r.y,t[e+2]=r.z),(0,l.Z)(n)&&(n[e]=s.x,n[e+1]=s.y,n[e+2]=s.z),(0,l.Z)(i)&&(i[e]=a.x,i[e+1]=a.y,i[e+2]=a.z),e+=3;o[c]=0,o[c+1]=0,o[c+2]=1,o[c+3]=0,o[c+4]=1,o[c+5]=1,o[c+6]=0,o[c+7]=1}b.unpack=function(e,t,n){s.Z.defined("array",e),t=(0,c.Z)(t,0);const i=e[t++];let r;0===i?(r=_.Z.unpack(e,t,v),t+=_.Z.packedLength):(r=m.Z.unpack(e,t,A),t+=m.Z.packedLength);const a=o.Z.unpack(e,t,w);t+=o.Z.packedLength;const u=Z.Z.unpack(e,t,T);t+=Z.Z.packedLength;const d=y.Z.unpack(e,t,E),h=1===e[t+=y.Z.packedLength];if(!(0,l.Z)(n))return new b({frustum:r,origin:a,orientation:u,vertexFormat:d,_drawNearPlane:h});const f=i===n._frustumType?n._frustum:void 0;return n._frustum=r.clone(f),n._frustumType=i,n._origin=o.Z.clone(a,n._origin),n._orientation=Z.Z.clone(u,n._orientation),n._vertexFormat=y.Z.clone(d,n._vertexFormat),n._drawNearPlane=h,n};const C=new f.Z,x=new p.Z,I=new p.Z,P=new o.Z,D=new o.Z,O=new o.Z,L=new o.Z,N=new o.Z,M=new o.Z,R=new Array(3),F=new Array(4);F[0]=new r.Z(-1,-1,1,1),F[1]=new r.Z(1,-1,1,1),F[2]=new r.Z(1,1,1,1),F[3]=new r.Z(-1,1,1,1);const B=new Array(4);for(let e=0;e<4;++e)B[e]=new r.Z;b._computeNearFarPlanes=function(e,t,n,i,s,a,u,d){const h=f.Z.fromQuaternion(t,C);let m=(0,c.Z)(a,P),_=(0,c.Z)(u,D),g=(0,c.Z)(d,O);m=f.Z.getColumn(h,0,m),_=f.Z.getColumn(h,1,_),g=f.Z.getColumn(h,2,g),o.Z.normalize(m,m),o.Z.normalize(_,_),o.Z.normalize(g,g),o.Z.negate(m,m);const Z=p.Z.computeView(e,g,_,m,x);let y,b;const v=i.projectionMatrix;if(0===n){const e=p.Z.multiply(v,Z,I);b=p.Z.inverse(e,I)}else y=p.Z.inverseTransformation(Z,I);(0,l.Z)(b)?(R[0]=i.near,R[1]=i.far):(R[0]=0,R[1]=i.near,R[2]=i.far);for(let t=0;t<2;++t)for(let n=0;n<4;++n){let a=r.Z.clone(F[n],B[n]);if((0,l.Z)(b)){a=p.Z.multiplyByVector(b,a,a);const n=1/a.w;o.Z.multiplyByScalar(a,n,a),o.Z.subtract(a,e,a),o.Z.normalize(a,a);const i=o.Z.dot(g,a);o.Z.multiplyByScalar(a,R[t]/i,a),o.Z.add(a,e,a)}else{const e=i.offCenterFrustum;(0,l.Z)(e)&&(i=e);const n=R[t],o=R[t+1];a.x=.5*(a.x*(i.right-i.left)+i.left+i.right),a.y=.5*(a.y*(i.top-i.bottom)+i.bottom+i.top),a.z=.5*(a.z*(n-o)-n-o),a.w=1,p.Z.multiplyByVector(y,a,a)}s[12*t+3*n]=a.x,s[12*t+3*n+1]=a.y,s[12*t+3*n+2]=a.z}},b.createGeometry=function(e){const t=e._frustumType,n=e._frustum,r=e._origin,s=e._orientation,c=e._drawNearPlane,f=e._vertexFormat,p=c?6:5;let m=new Float64Array(72);b._computeNearFarPlanes(r,s,t,n,m);let _=24;m[_]=m[12],m[_+1]=m[13],m[_+2]=m[14],m[_+3]=m[0],m[_+4]=m[1],m[_+5]=m[2],m[_+6]=m[9],m[_+7]=m[10],m[_+8]=m[11],m[_+9]=m[21],m[_+10]=m[22],m[_+11]=m[23],_+=12,m[_]=m[15],m[_+1]=m[16],m[_+2]=m[17],m[_+3]=m[3],m[_+4]=m[4],m[_+5]=m[5],m[_+6]=m[0],m[_+7]=m[1],m[_+8]=m[2],m[_+9]=m[12],m[_+10]=m[13],m[_+11]=m[14],_+=12,m[_]=m[3],m[_+1]=m[4],m[_+2]=m[5],m[_+3]=m[15],m[_+4]=m[16],m[_+5]=m[17],m[_+6]=m[18],m[_+7]=m[19],m[_+8]=m[20],m[_+9]=m[6],m[_+10]=m[7],m[_+11]=m[8],_+=12,m[_]=m[6],m[_+1]=m[7],m[_+2]=m[8],m[_+3]=m[18],m[_+4]=m[19],m[_+5]=m[20],m[_+6]=m[21],m[_+7]=m[22],m[_+8]=m[23],m[_+9]=m[9],m[_+10]=m[10],m[_+11]=m[11],c||(m=m.subarray(12));const Z=new h.Z({position:new d.Z({componentDatatype:a.Z.DOUBLE,componentsPerAttribute:3,values:m})});if((0,l.Z)(f.normal)||(0,l.Z)(f.tangent)||(0,l.Z)(f.bitangent)||(0,l.Z)(f.st)){const e=(0,l.Z)(f.normal)?new Float32Array(12*p):void 0,t=(0,l.Z)(f.tangent)?new Float32Array(12*p):void 0,n=(0,l.Z)(f.bitangent)?new Float32Array(12*p):void 0,i=(0,l.Z)(f.st)?new Float32Array(8*p):void 0,r=P,s=D,u=O,h=o.Z.negate(r,L),m=o.Z.negate(s,N),g=o.Z.negate(u,M);_=0,c&&(S(_,e,t,n,i,g,r,s),_+=12),S(_,e,t,n,i,u,h,s),_+=12,S(_,e,t,n,i,h,g,s),_+=12,S(_,e,t,n,i,m,g,h),_+=12,S(_,e,t,n,i,r,u,s),_+=12,S(_,e,t,n,i,s,u,h),(0,l.Z)(e)&&(Z.normal=new d.Z({componentDatatype:a.Z.FLOAT,componentsPerAttribute:3,values:e})),(0,l.Z)(t)&&(Z.tangent=new d.Z({componentDatatype:a.Z.FLOAT,componentsPerAttribute:3,values:t})),(0,l.Z)(n)&&(Z.bitangent=new d.Z({componentDatatype:a.Z.FLOAT,componentsPerAttribute:3,values:n})),(0,l.Z)(i)&&(Z.st=new d.Z({componentDatatype:a.Z.FLOAT,componentsPerAttribute:2,values:i}))}const y=new Uint16Array(6*p);for(let e=0;e<p;++e){const t=6*e,n=4*e;y[t]=n,y[t+1]=n+1,y[t+2]=n+2,y[t+3]=n,y[t+4]=n+2,y[t+5]=n+3}return new u.Z({attributes:Z,indices:y,primitiveType:g.Z.TRIANGLES,boundingSphere:i.Z.fromVertices(m)})};const U=b},918094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(762031),o=n(660904),r=n(790087),s=n(449809),a=n(234146),c=n(11020),l=n(499746),u=n(87200),d=n(951775),h=n(263825),f=n(223689),p=n(134282),m=n(804868),_=n(360846);function g(e){r.Z.typeOf.object("options",e),r.Z.typeOf.object("options.frustum",e.frustum),r.Z.typeOf.object("options.origin",e.origin),r.Z.typeOf.object("options.orientation",e.orientation);const t=e.frustum,n=e.orientation,i=e.origin,s=(0,a.Z)(e._drawNearPlane,!0);let c,l;t instanceof p.Z?(c=0,l=p.Z.packedLength):t instanceof f.Z&&(c=1,l=f.Z.packedLength),this._frustumType=c,this._frustum=t.clone(),this._origin=o.Z.clone(i),this._orientation=_.Z.clone(n),this._drawNearPlane=s,this._workerName="createFrustumOutlineGeometry",this.packedLength=2+l+o.Z.packedLength+_.Z.packedLength}g.pack=function(e,t,n){r.Z.typeOf.object("value",e),r.Z.defined("array",t),n=(0,a.Z)(n,0);const i=e._frustumType,s=e._frustum;return t[n++]=i,0===i?(p.Z.pack(s,t,n),n+=p.Z.packedLength):(f.Z.pack(s,t,n),n+=f.Z.packedLength),o.Z.pack(e._origin,t,n),n+=o.Z.packedLength,_.Z.pack(e._orientation,t,n),t[n+=_.Z.packedLength]=e._drawNearPlane?1:0,t};const Z=new p.Z,y=new f.Z,b=new _.Z,v=new o.Z;g.unpack=function(e,t,n){r.Z.defined("array",e),t=(0,a.Z)(t,0);const i=e[t++];let s;0===i?(s=p.Z.unpack(e,t,Z),t+=p.Z.packedLength):(s=f.Z.unpack(e,t,y),t+=f.Z.packedLength);const l=o.Z.unpack(e,t,v);t+=o.Z.packedLength;const u=_.Z.unpack(e,t,b),d=1===e[t+=_.Z.packedLength];if(!(0,c.Z)(n))return new g({frustum:s,origin:l,orientation:u,_drawNearPlane:d});const h=i===n._frustumType?n._frustum:void 0;return n._frustum=s.clone(h),n._frustumType=i,n._origin=o.Z.clone(l,n._origin),n._orientation=_.Z.clone(u,n._orientation),n._drawNearPlane=d,n},g.createGeometry=function(e){const t=e._frustumType,n=e._frustum,o=e._origin,r=e._orientation,a=e._drawNearPlane,c=new Float64Array(24);l.Z._computeNearFarPlanes(o,r,t,n,c);const f=new h.Z({position:new d.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:c})});let p,_;const g=a?2:1,Z=new Uint16Array(8*(g+1));let y=a?0:1;for(;y<2;++y)p=a?8*y:0,_=4*y,Z[p]=_,Z[p+1]=_+1,Z[p+2]=_+1,Z[p+3]=_+2,Z[p+4]=_+2,Z[p+5]=_+3,Z[p+6]=_+3,Z[p+7]=_;for(y=0;y<2;++y)p=8*(g+y),_=4*y,Z[p]=_,Z[p+1]=_+4,Z[p+2]=_+1,Z[p+3]=_+5,Z[p+4]=_+2,Z[p+5]=_+6,Z[p+6]=_+3,Z[p+7]=_+7;return new u.Z({attributes:f,indices:Z,primitiveType:m.Z.LINES,boundingSphere:i.Z.fromVertices(c)})};const A=g},238466:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({SEARCH:0,AUTOCOMPLETE:1})},232435:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(865029),o=n(11020),r=n(765153);function s(){r.Z.throwInstantiationError()}Object.defineProperties(s.prototype,{credit:{get:r.Z.throwInstantiationError}}),s.getCreditsFromResult=function(e){if((0,o.Z)(e.attributions))return e.attributions.map(i.Z.getIonCredit)},s.prototype.geocode=r.Z.throwInstantiationError;const a=s},339079:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(234146),o=n(11020);function r(e,t,n){this.heading=(0,i.Z)(e,0),this.pitch=(0,i.Z)(t,0),this.range=(0,i.Z)(n,0)}r.clone=function(e,t){if((0,o.Z)(e))return(0,o.Z)(t)||(t=new r),t.heading=e.heading,t.pitch=e.pitch,t.range=e.range,t};const s=r},63846:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({NONE:0,LERC:1})},751655:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(762031),o=n(660904),r=n(790087),s=n(234146),a=n(11020),c=n(765153),l=n(351047),u=n(63846),d=n(800202),h=n(344485),f=n(237247),p=n(143450),m=n(511267),_=n(910811),g=n(502954),Z=n(178611),y=n(96828);function b(e){if(!(0,a.Z)(e)||!(0,a.Z)(e.buffer))throw new c.Z("options.buffer is required.");if(!(0,a.Z)(e.width))throw new c.Z("options.width is required.");if(!(0,a.Z)(e.height))throw new c.Z("options.height is required.");this._buffer=e.buffer,this._width=e.width,this._height=e.height,this._childTileMask=(0,s.Z)(e.childTileMask,15),this._encoding=(0,s.Z)(e.encoding,u.Z.NONE);const t=d.Z.DEFAULT_STRUCTURE;let n=e.structure;(0,a.Z)(n)?n!==t&&(n.heightScale=(0,s.Z)(n.heightScale,t.heightScale),n.heightOffset=(0,s.Z)(n.heightOffset,t.heightOffset),n.elementsPerHeight=(0,s.Z)(n.elementsPerHeight,t.elementsPerHeight),n.stride=(0,s.Z)(n.stride,t.stride),n.elementMultiplier=(0,s.Z)(n.elementMultiplier,t.elementMultiplier),n.isBigEndian=(0,s.Z)(n.isBigEndian,t.isBigEndian)):n=t,this._structure=n,this._createdByUpsampling=(0,s.Z)(e.createdByUpsampling,!1),this._waterMask=e.waterMask,this._skirtHeight=void 0,this._bufferType=this._encoding===u.Z.LERC?Float32Array:this._buffer.constructor,this._mesh=void 0}Object.defineProperties(b.prototype,{credits:{get:function(){}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}}});const v="createVerticesFromHeightmap",A=new m.Z(v),T=new m.Z(v,_.Z.maximumAsynchronousTasks);function w(e,t,n,i,o,r,s,a,c){const l=(a-o.west)*(r-1)/(o.east-o.west),u=(c-o.south)*(s-1)/(o.north-o.south);let d=0|l,h=d+1;h>=r&&(h=r-1,d=r-2);let f=0|u,p=f+1;p>=s&&(p=s-1,f=s-2);const m=u-f;return f=s-1-f,p=s-1-p,E(l-d,m,(t.decodeHeight(e,f*r+d)-n)/i,(t.decodeHeight(e,f*r+h)-n)/i,(t.decodeHeight(e,p*r+d)-n)/i,(t.decodeHeight(e,p*r+h)-n)/i)}function E(e,t,n,i,o,r){return t<e?n+e*(i-n)+t*(r-i):n+e*(r-o)+t*(o-n)}function S(e,t,n,i,o,r){r*=i;let s,a=0;if(o)for(s=0;s<t;++s)a=a*n+e[r+s];else for(s=t-1;s>=0;--s)a=a*n+e[r+s];return a}function C(e,t,n,i,o,r,s,a){let c;if(s*=o,r)for(c=0;c<t-1;++c)e[s+c]=a/i|0,a-=e[s+c]*i,i/=n;else for(c=t-1;c>0;--c)e[s+c]=a/i|0,a-=e[s+c]*i,i/=n;e[s+c]=a}b.prototype.createMesh=function(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),r.Z.typeOf.object("options.tilingScheme",e.tilingScheme),r.Z.typeOf.number("options.x",e.x),r.Z.typeOf.number("options.y",e.y),r.Z.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,c=e.y,u=e.level,d=(0,s.Z)(e.exaggeration,1),h=(0,s.Z)(e.exaggerationRelativeHeight,0),m=(0,s.Z)(e.throttle,!0),_=t.ellipsoid,b=t.tileXYToNativeRectangle(n,c,u),v=t.tileXYToRectangle(n,c,u),w=_.cartographicToCartesian(p.Z.center(v)),E=this._structure,S=y.Z.getEstimatedLevelZeroGeometricErrorForAHeightmap(_,this._width,t.getNumberOfXTilesAtLevel(0))/(1<<u);this._skirtHeight=Math.min(4*S,1e3);const C=(m?T:A).scheduleTask({heightmap:this._buffer,structure:E,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:b,rectangle:v,relativeToCenter:w,ellipsoid:_,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof l.Z,exaggeration:d,exaggerationRelativeHeight:h,encoding:this._encoding});if(!(0,a.Z)(C))return;const x=this;return Promise.resolve(C).then((function(e){let t;t=x._skirtHeight>0?y.Z.getRegularGridAndSkirtIndicesAndEdgeIndices(e.gridWidth,e.gridHeight):y.Z.getRegularGridIndicesAndEdgeIndices(e.gridWidth,e.gridHeight);const n=e.gridWidth*e.gridHeight;return x._mesh=new Z.Z(w,new Float32Array(e.vertices),t.indices,t.indexCountWithoutSkirts,n,e.minimumHeight,e.maximumHeight,i.Z.clone(e.boundingSphere3D),o.Z.clone(e.occludeePointInScaledSpace),e.numberOfAttributes,f.Z.clone(e.orientedBoundingBox),g.Z.clone(e.encoding),t.westIndicesSouthToNorth,t.southIndicesEastToWest,t.eastIndicesNorthToSouth,t.northIndicesWestToEast),x._buffer=void 0,x._mesh}))},b.prototype._createMeshSync=function(e){r.Z.typeOf.object("options.tilingScheme",e.tilingScheme),r.Z.typeOf.number("options.x",e.x),r.Z.typeOf.number("options.y",e.y),r.Z.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,i=e.y,o=e.level,a=(0,s.Z)(e.exaggeration,1),c=(0,s.Z)(e.exaggerationRelativeHeight,0),u=t.ellipsoid,h=t.tileXYToNativeRectangle(n,i,o),f=t.tileXYToRectangle(n,i,o),m=u.cartographicToCartesian(p.Z.center(f)),_=this._structure,g=y.Z.getEstimatedLevelZeroGeometricErrorForAHeightmap(u,this._width,t.getNumberOfXTilesAtLevel(0))/(1<<o);this._skirtHeight=Math.min(4*g,1e3);const b=d.Z.computeVertices({heightmap:this._buffer,structure:_,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:h,rectangle:f,relativeToCenter:m,ellipsoid:u,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof l.Z,exaggeration:a,exaggerationRelativeHeight:c});let v;this._buffer=void 0,v=this._skirtHeight>0?y.Z.getRegularGridAndSkirtIndicesAndEdgeIndices(this._width,this._height):y.Z.getRegularGridIndicesAndEdgeIndices(this._width,this._height);const A=b.gridWidth*b.gridHeight;return this._mesh=new Z.Z(m,b.vertices,v.indices,v.indexCountWithoutSkirts,A,b.minimumHeight,b.maximumHeight,b.boundingSphere3D,b.occludeePointInScaledSpace,b.encoding.stride,b.orientedBoundingBox,b.encoding,v.westIndicesSouthToNorth,v.southIndicesEastToWest,v.eastIndicesNorthToSouth,v.northIndicesWestToEast),this._mesh},b.prototype.interpolateHeight=function(e,t,n){const i=this._width,o=this._height,r=this._structure,s=r.stride,c=r.elementsPerHeight,l=r.elementMultiplier,d=r.isBigEndian,h=r.heightOffset,f=r.heightScale,p=(0,a.Z)(this._mesh),m=this._encoding===u.Z.LERC;if(!p&&m)return;let _;return p?_=w(this._mesh.vertices,this._mesh.encoding,h,f,e,i,o,t,n):(_=function(e,t,n,i,o,r,s,a,c,l){const u=(c-r.west)*(s-1)/(r.east-r.west),d=(l-r.south)*(a-1)/(r.north-r.south);let h=0|u,f=h+1;f>=s&&(f=s-1,h=s-2);let p=0|d,m=p+1;m>=a&&(m=a-1,p=a-2);const _=d-p;p=a-1-p,m=a-1-m;return E(u-h,_,S(e,t,n,i,o,p*s+h),S(e,t,n,i,o,p*s+f),S(e,t,n,i,o,m*s+h),S(e,t,n,i,o,m*s+f))}(this._buffer,c,l,s,d,e,i,o,t,n),_=_*f+h),_},b.prototype.upsample=function(e,t,n,i,o,r,s){if(!(0,a.Z)(e))throw new c.Z("tilingScheme is required.");if(!(0,a.Z)(t))throw new c.Z("thisX is required.");if(!(0,a.Z)(n))throw new c.Z("thisY is required.");if(!(0,a.Z)(i))throw new c.Z("thisLevel is required.");if(!(0,a.Z)(o))throw new c.Z("descendantX is required.");if(!(0,a.Z)(r))throw new c.Z("descendantY is required.");if(!(0,a.Z)(s))throw new c.Z("descendantLevel is required.");if(s-i>1)throw new c.Z("Upsampling through more than one level at a time is not currently supported.");const l=this._mesh;if(!(0,a.Z)(l))return;const u=this._width,d=this._height,f=this._structure,p=f.stride,m=new this._bufferType(u*d*p),_=l.vertices,g=l.encoding,Z=e.tileXYToRectangle(t,n,i),y=e.tileXYToRectangle(o,r,s),v=f.heightOffset,A=f.heightScale,T=f.elementsPerHeight,E=f.elementMultiplier,S=f.isBigEndian,x=Math.pow(E,T-1);for(let e=0;e<d;++e){const t=h.Z.lerp(y.north,y.south,e/(d-1));for(let n=0;n<u;++n){let i=w(_,g,v,A,Z,u,d,h.Z.lerp(y.west,y.east,n/(u-1)),t);i=i<f.lowestEncodedHeight?f.lowestEncodedHeight:i,i=i>f.highestEncodedHeight?f.highestEncodedHeight:i,C(m,T,E,x,p,S,e*u+n,i)}}return Promise.resolve(new b({buffer:m,width:u,height:d,childTileMask:0,structure:this._structure,createdByUpsampling:!0}))},b.prototype.isChildAvailable=function(e,t,n,i){if(!(0,a.Z)(e))throw new c.Z("thisX is required.");if(!(0,a.Z)(t))throw new c.Z("thisY is required.");if(!(0,a.Z)(n))throw new c.Z("childX is required.");if(!(0,a.Z)(i))throw new c.Z("childY is required.");let o=2;return n!==2*e&&++o,i!==2*t&&(o-=2),!!(this._childTileMask&1<<o)},b.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const x=b},800202:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(352345),o=n(762031),r=n(405254),s=n(660904),a=n(234146),c=n(11020),l=n(765153),u=n(63354),d=n(615651),h=n(344485),f=n(659635),p=n(237247),m=n(143450),_=n(502954),g=n(720794),Z=n(709855);const y={};y.DEFAULT_STRUCTURE=Object.freeze({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1});const b=new s.Z,v=new f.Z,A=new s.Z,T=new s.Z;y.computeVertices=function(e){if(!(0,c.Z)(e)||!(0,c.Z)(e.heightmap))throw new l.Z("options.heightmap is required.");if(!(0,c.Z)(e.width)||!(0,c.Z)(e.height))throw new l.Z("options.width and options.height are required.");if(!(0,c.Z)(e.nativeRectangle))throw new l.Z("options.nativeRectangle is required.");if(!(0,c.Z)(e.skirtHeight))throw new l.Z("options.skirtHeight is required.");const t=Math.cos,n=Math.sin,w=Math.sqrt,E=Math.atan,S=Math.exp,C=h.Z.PI_OVER_TWO,x=h.Z.toRadians,I=e.heightmap,P=e.width,D=e.height,O=e.skirtHeight,L=O>0,N=(0,a.Z)(e.isGeographic,!0),M=(0,a.Z)(e.ellipsoid,u.Z.WGS84),R=1/M.maximumRadius,F=m.Z.clone(e.nativeRectangle),B=m.Z.clone(e.rectangle);let U,k,V,H;(0,c.Z)(B)?(U=B.west,k=B.south,V=B.east,H=B.north):N?(U=x(F.west),k=x(F.south),V=x(F.east),H=x(F.north)):(U=F.west*R,k=C-2*E(S(-F.south*R)),V=F.east*R,H=C-2*E(S(-F.north*R)));let z=e.relativeToCenter;const G=(0,c.Z)(z);z=G?z:s.Z.ZERO;const j=(0,a.Z)(e.includeWebMercatorT,!1),W=(0,a.Z)(e.exaggeration,1),q=(0,a.Z)(e.exaggerationRelativeHeight,0),Y=1!==W,X=(0,a.Z)(e.structure,y.DEFAULT_STRUCTURE),J=(0,a.Z)(X.heightScale,y.DEFAULT_STRUCTURE.heightScale),Q=(0,a.Z)(X.heightOffset,y.DEFAULT_STRUCTURE.heightOffset),$=(0,a.Z)(X.elementsPerHeight,y.DEFAULT_STRUCTURE.elementsPerHeight),K=(0,a.Z)(X.stride,y.DEFAULT_STRUCTURE.stride),ee=(0,a.Z)(X.elementMultiplier,y.DEFAULT_STRUCTURE.elementMultiplier),te=(0,a.Z)(X.isBigEndian,y.DEFAULT_STRUCTURE.isBigEndian);let ne=m.Z.computeWidth(F),ie=m.Z.computeHeight(F);const oe=ne/(P-1),re=ie/(D-1);N||(ne*=R,ie*=R);const se=M.radiiSquared,ae=se.x,ce=se.y,le=se.z;let ue=65536,de=-65536;const he=g.Z.eastNorthUpToFixedFrame(z,M),fe=f.Z.inverseTransformation(he,v);let pe,me;j&&(pe=Z.Z.geodeticLatitudeToMercatorAngle(k),me=1/(Z.Z.geodeticLatitudeToMercatorAngle(H)-pe));const _e=A;_e.x=Number.POSITIVE_INFINITY,_e.y=Number.POSITIVE_INFINITY,_e.z=Number.POSITIVE_INFINITY;const ge=T;ge.x=Number.NEGATIVE_INFINITY,ge.y=Number.NEGATIVE_INFINITY,ge.z=Number.NEGATIVE_INFINITY;let Ze=Number.POSITIVE_INFINITY;const ye=P*D,be=ye+(O>0?2*P+2*D:0),ve=new Array(be),Ae=new Array(be),Te=new Array(be),we=j?new Array(be):[],Ee=Y?new Array(be):[];let Se=0,Ce=D,xe=0,Ie=P;L&&(--Se,++Ce,--xe,++Ie);const Pe=1e-5;for(let e=Se;e<Ce;++e){let i=e;i<0&&(i=0),i>=D&&(i=D-1);let o=F.north-re*i;o=N?x(o):C-2*E(S(-o*R));let a=(o-k)/(H-k);a=h.Z.clamp(a,0,1);const c=e===Se,l=e===Ce-1;O>0&&(c?o+=Pe*ie:l&&(o-=Pe*ie));const u=t(o),d=n(o),p=le*d;let m;j&&(m=(Z.Z.geodeticLatitudeToMercatorAngle(o)-pe)*me);for(let e=xe;e<Ie;++e){let o=e;o<0&&(o=0),o>=P&&(o=P-1);const _=i*(P*K)+o*K;let g;if(1===$)g=I[_];else{let e;if(g=0,te)for(e=0;e<$;++e)g=g*ee+I[_+e];else for(e=$-1;e>=0;--e)g=g*ee+I[_+e]}g=g*J+Q,de=Math.max(de,g),ue=Math.min(ue,g);let Z=F.west+oe*o;N?Z=x(Z):Z*=R;let y=(Z-U)/(V-U);y=h.Z.clamp(y,0,1);let v=i*P+o;if(O>0){const t=e===xe,n=e===Ie-1,r=c||l||t||n;if((c||l)&&(t||n))continue;r&&(g-=O,t?(v=ye+(D-i-1),Z-=Pe*ne):l?v=ye+D+(P-o-1):n?(v=ye+D+P+i,Z+=Pe*ne):c&&(v=ye+D+P+D+o))}const A=u*t(Z),T=u*n(Z),E=ae*A,S=ce*T,C=1/w(E*A+S*T+p*d),L=E*C,B=S*C,k=p*C,H=new s.Z;H.x=L+A*g,H.y=B+T*g,H.z=k+d*g,f.Z.multiplyByPoint(fe,H,b),s.Z.minimumByComponent(b,_e,_e),s.Z.maximumByComponent(b,ge,ge),Ze=Math.min(Ze,g),ve[v]=H,Te[v]=new r.Z(y,a),Ae[v]=g,j&&(we[v]=m),Y&&(Ee[v]=M.geodeticSurfaceNormal(H))}}const De=o.Z.fromPoints(ve);let Oe,Le;(0,c.Z)(B)&&(Oe=p.Z.fromRectangle(B,ue,de,M)),G&&(Le=new d.Z(M).computeHorizonCullingPointPossiblyUnderEllipsoid(z,ve,ue));const Ne=new i.Z(_e,ge,z),Me=new _.Z(z,Ne,Ze,de,he,!1,j,Y,W,q),Re=new Float32Array(be*Me.stride);let Fe=0;for(let e=0;e<be;++e)Fe=Me.encode(Re,Fe,ve[e],Te[e],Ae[e],void 0,we[e],Ee[e]);return{vertices:Re,maximumHeight:de,minimumHeight:ue,encoding:Me,boundingSphere3D:De,orientedBoundingBox:Oe,occludeePointInScaledSpace:Le}};const w=y},501121:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(660904),o=n(798336),r=n(234146),s=n(11020),a=n(765153),c=n(27410),l=n(659635),u=n(361942),d=n(211669);const h=[],f=[],p=[],m=[];function _(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).points,n=e.times,i=e.inTangents,o=e.outTangents;if(!((0,s.Z)(t)&&(0,s.Z)(n)&&(0,s.Z)(i)&&(0,s.Z)(o)))throw new a.Z("times, points, inTangents, and outTangents are required.");if(t.length<2)throw new a.Z("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new a.Z("times.length must be equal to points.length.");if(i.length!==o.length||i.length!==t.length-1)throw new a.Z("inTangents and outTangents must have a length equal to points.length - 1.");if(this._times=n,this._points=t,this._pointType=u.Z.getPointType(t[0]),this._pointType!==u.Z.getPointType(i[0])||this._pointType!==u.Z.getPointType(o[0]))throw new a.Z("inTangents and outTangents must be of the same type as points.");this._inTangents=i,this._outTangents=o,this._lastTimeIndex=0}Object.defineProperties(_.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},inTangents:{get:function(){return this._inTangents}},outTangents:{get:function(){return this._outTangents}}}),_.createC1=function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).times,n=e.points,i=e.tangents;if(!(0,s.Z)(n)||!(0,s.Z)(t)||!(0,s.Z)(i))throw new a.Z("points, times and tangents are required.");if(n.length<2)throw new a.Z("points.length must be greater than or equal to 2.");if(t.length!==n.length||t.length!==i.length)throw new a.Z("times, points and tangents must have the same length.");const o=i.slice(0,i.length-1);return new _({times:t,points:n,inTangents:i.slice(1,i.length),outTangents:o})},_.createNaturalCubic=function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).times,n=e.points;if(!(0,s.Z)(n)||!(0,s.Z)(t))throw new a.Z("points and times are required.");if(n.length<2)throw new a.Z("points.length must be greater than or equal to 2.");if(t.length!==n.length)throw new a.Z("times.length must be equal to points.length.");if(n.length<3)return new c.Z({points:n,times:t});const o=function(e){const t=h,n=p,o=f,r=m;let a;t.length=n.length=e.length-1,o.length=r.length=e.length,t[0]=n[0]=1,o[0]=2;let c=r[0];for((0,s.Z)(c)||(c=r[0]=new i.Z),i.Z.subtract(e[1],e[0],c),i.Z.multiplyByScalar(c,3,c),a=1;a<t.length;++a)t[a]=n[a]=1,o[a]=4,c=r[a],(0,s.Z)(c)||(c=r[a]=new i.Z),i.Z.subtract(e[a+1],e[a-1],c),i.Z.multiplyByScalar(c,3,c);return o[a]=2,c=r[a],(0,s.Z)(c)||(c=r[a]=new i.Z),i.Z.subtract(e[a],e[a-1],c),i.Z.multiplyByScalar(c,3,c),d.Z.solve(t,o,n,r)}(n),l=o.slice(0,o.length-1);return new _({times:t,points:n,inTangents:o.slice(1,o.length),outTangents:l})},_.createClampedCubic=function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).times,n=e.points,o=e.firstTangent,l=e.lastTangent;if(!((0,s.Z)(n)&&(0,s.Z)(t)&&(0,s.Z)(o)&&(0,s.Z)(l)))throw new a.Z("points, times, firstTangent and lastTangent are required.");if(n.length<2)throw new a.Z("points.length must be greater than or equal to 2.");if(t.length!==n.length)throw new a.Z("times.length must be equal to points.length.");const g=u.Z.getPointType(n[0]);if(g!==u.Z.getPointType(o)||g!==u.Z.getPointType(l))throw new a.Z("firstTangent and lastTangent must be of the same type as points.");if(n.length<3)return new c.Z({points:n,times:t});const Z=function(e,t,n){const o=h,r=p,a=f,c=m;let l;o.length=r.length=e.length-1,a.length=c.length=e.length,o[0]=a[0]=1,r[0]=0;let u=c[0];for((0,s.Z)(u)||(u=c[0]=new i.Z),i.Z.clone(t,u),l=1;l<o.length-1;++l)o[l]=r[l]=1,a[l]=4,u=c[l],(0,s.Z)(u)||(u=c[l]=new i.Z),i.Z.subtract(e[l+1],e[l-1],u),i.Z.multiplyByScalar(u,3,u);return o[l]=0,r[l]=1,a[l]=4,u=c[l],(0,s.Z)(u)||(u=c[l]=new i.Z),i.Z.subtract(e[l+1],e[l-1],u),i.Z.multiplyByScalar(u,3,u),a[l+1]=1,u=c[l+1],(0,s.Z)(u)||(u=c[l+1]=new i.Z),i.Z.clone(n,u),d.Z.solve(o,a,r,c)}(n,o,l),y=Z.slice(0,Z.length-1);return new _({times:t,points:n,inTangents:Z.slice(1,Z.length),outTangents:y})},_.hermiteCoefficientMatrix=new l.Z(2,-3,0,1,-2,3,0,0,1,-2,1,0,1,-1,0,0),_.prototype.findTimeInterval=u.Z.prototype.findTimeInterval;const g=new o.Z,Z=new i.Z;_.prototype.wrapTime=u.Z.prototype.wrapTime,_.prototype.clampTime=u.Z.prototype.clampTime,_.prototype.evaluate=function(e,t){const n=this.points,i=this.times,o=this.inTangents,r=this.outTangents;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);const a=this._lastTimeIndex,c=i[a+1]-i[a],u=(e-i[a])/c,d=g;d.z=u,d.y=u*u,d.x=d.y*u,d.w=1;const h=l.Z.multiplyByVector(_.hermiteCoefficientMatrix,d,d);h.z*=c,h.w*=c;const f=this._pointType;return f===Number?n[a]*h.x+n[a+1]*h.y+r[a]*h.z+o[a]*h.w:((0,s.Z)(t)||(t=new f),t=f.multiplyByScalar(n[a],h.x,t),f.multiplyByScalar(n[a+1],h.y,Z),f.add(t,Z,t),f.multiplyByScalar(r[a],h.z,Z),f.add(t,Z,t),f.multiplyByScalar(o[a],h.w,Z),f.add(t,Z,t))};const y=_},99377:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(765153);const r={};function s(e,t,n,i){if(0!==i)return;1===n&&(t.x=e-1-t.x,t.y=e-1-t.y);const o=t.x;t.x=t.y,t.y=o}r.encode2D=function(e,t,n){const r=Math.pow(2,e);if(i.Z.typeOf.number("level",e),i.Z.typeOf.number("x",t),i.Z.typeOf.number("y",n),e<1)throw new o.Z("Hilbert level cannot be less than 1.");if(t<0||t>=r||n<0||n>=r)throw new o.Z("Invalid coordinates for given level.");const a={x:t,y:n};let c,l,u,d=BigInt(0);for(u=r/2;u>0;u/=2)c=(a.x&u)>0?1:0,l=(a.y&u)>0?1:0,d+=BigInt((3*c^l)*u*u),s(r,a,c,l);return d},r.decode2D=function(e,t){if(i.Z.typeOf.number("level",e),i.Z.typeOf.bigint("index",t),e<1)throw new o.Z("Hilbert level cannot be less than 1.");if(t<BigInt(0)||t>=BigInt(Math.pow(4,e)))throw new o.Z("Hilbert index exceeds valid maximum for given level.");const n=Math.pow(2,e),r={x:0,y:0};let a,c,l,u;for(l=1,u=t;l<n;l*=2)a=1&Number(u/BigInt(2)),c=1&Number(u^BigInt(a)),s(l,r,a,c),r.x+=l*a,r.y+=l*c,u/=BigInt(4);return[r.x,r.y]};const a=r},71272:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(11020),o=n(636477),r=n(791364),s=n(344485),a=n(104407);const c={},l=-.0529921,u=-.1059842,d=13.0120009,h=13.3407154,f=.9856003,p=26.4057084,m=13.064993,_=.3287146,g=1.7484877,Z=-.1589763,y=.0036096,b=.1643573,v=12.9590088;let A=new r.Z;c.ComputeMoon=function(e,t){(0,i.Z)(e)||(e=r.Z.now()),A=r.Z.addSeconds(e,32.184,A);const n=r.Z.totalDays(A)-2451545,c=n/a.Z.DAYS_PER_JULIAN_CENTURY,T=(125.045+l*n)*s.Z.RADIANS_PER_DEGREE,w=(250.089+u*n)*s.Z.RADIANS_PER_DEGREE,E=(260.008+d*n)*s.Z.RADIANS_PER_DEGREE,S=(176.625+h*n)*s.Z.RADIANS_PER_DEGREE,C=(357.529+f*n)*s.Z.RADIANS_PER_DEGREE,x=(311.589+p*n)*s.Z.RADIANS_PER_DEGREE,I=(134.963+m*n)*s.Z.RADIANS_PER_DEGREE,P=(276.617+_*n)*s.Z.RADIANS_PER_DEGREE,D=(34.226+g*n)*s.Z.RADIANS_PER_DEGREE,O=(15.134+Z*n)*s.Z.RADIANS_PER_DEGREE,L=(119.743+y*n)*s.Z.RADIANS_PER_DEGREE,N=(239.961+b*n)*s.Z.RADIANS_PER_DEGREE,M=(25.053+v*n)*s.Z.RADIANS_PER_DEGREE,R=Math.sin(T),F=Math.sin(w),B=Math.sin(E),U=Math.sin(S),k=Math.sin(C),V=Math.sin(x),H=Math.sin(I),z=Math.sin(P),G=Math.sin(D),j=Math.sin(O),W=Math.sin(L),q=Math.sin(N),Y=Math.sin(M),X=Math.cos(T),J=Math.cos(w),Q=Math.cos(E),$=Math.cos(S),K=Math.cos(C),ee=Math.cos(x),te=Math.cos(I),ne=Math.cos(P),ie=Math.cos(D),oe=Math.cos(O),re=Math.cos(L),se=Math.cos(N),ae=Math.cos(M),ce=(269.9949+.0031*c-3.8787*R-.1204*F+.07*B-.0172*U+.0072*V-.0052*j+.0043*Y)*s.Z.RADIANS_PER_DEGREE,le=(66.5392+.013*c+1.5419*X+.0239*J-.0278*Q+.0068*$-.0029*ee+9e-4*te+8e-4*oe-9e-4*ae)*s.Z.RADIANS_PER_DEGREE,ue=(38.3213+13.17635815*n-14e-13*n*n+3.561*R+.1208*F-.0642*B+.0158*U+.0252*k-.0066*V-.0047*H-.0046*z+.0028*G+.0052*j+.004*W+.0019*q-.0044*Y)*s.Z.RADIANS_PER_DEGREE,de=(13.17635815-2*n*14e-13+3.561*X*l+.1208*J*u-.0642*Q*d+.0158*$*h+.0252*K*f-.0066*ee*p-.0047*te*m-.0046*ne*_+.0028*ie*g+.0052*oe*Z+.004*re*y+.0019*se*b-.0044*ae*v)/86400*s.Z.RADIANS_PER_DEGREE;return(0,i.Z)(t)||(t=new o.Z),t.rightAscension=ce,t.declination=le,t.rotation=ue,t.rotationRate=de,t};const T=c},337389:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(660904),o=n(11020),r=n(71272),s=n(791364),a=n(344485),c=n(664288),l=n(360846);function u(e){(0,o.Z)(e)&&"function"==typeof e||(e=r.Z.ComputeMoon),this._computeFunction=e}const d=new i.Z,h=new i.Z,f=new i.Z,p=new c.Z,m=new l.Z;u.prototype.evaluate=function(e,t){(0,o.Z)(e)||(e=s.Z.now());const n=this._computeFunction(e),r=function(e,t,n){const r=d;r.x=Math.cos(e+a.Z.PI_OVER_TWO),r.y=Math.sin(e+a.Z.PI_OVER_TWO),r.z=0;const s=Math.cos(t),l=f;l.x=s*Math.cos(e),l.y=s*Math.sin(e),l.z=Math.sin(t);const u=i.Z.cross(l,r,h);return(0,o.Z)(n)||(n=new c.Z),n[0]=r.x,n[1]=u.x,n[2]=l.x,n[3]=r.y,n[4]=u.y,n[5]=l.y,n[6]=r.z,n[7]=u.z,n[8]=l.z,n}(n.rightAscension,n.declination,t),u=a.Z.zeroToTwoPi(n.rotation),_=l.Z.fromAxisAngle(i.Z.UNIT_Z,u,m),g=c.Z.fromQuaternion(l.Z.conjugate(_,_),p);return c.Z.multiply(g,r,r)};const _=u},636477:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=function(e,t,n,i){this.rightAscension=e,this.declination=t,this.rotation=n,this.rotationRate=i}},515604:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({STEP:0,LINEAR:1,CUBICSPLINE:2})},820214:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(405254),o=n(660904),r=n(790087),s=n(11020),a=n(765153);const c={clipTriangleAtAxisAlignedThreshold:function(e,t,n,i,o,r){if(!(0,s.Z)(e))throw new a.Z("threshold is required.");if(!(0,s.Z)(t))throw new a.Z("keepAbove is required.");if(!(0,s.Z)(n))throw new a.Z("u0 is required.");if(!(0,s.Z)(i))throw new a.Z("u1 is required.");if(!(0,s.Z)(o))throw new a.Z("u2 is required.");let c,l,u;(0,s.Z)(r)?r.length=0:r=[],t?(c=n<e,l=i<e,u=o<e):(c=n>e,l=i>e,u=o>e);const d=c+l+u;let h,f,p,m,_,g;return 1===d?c?(h=(e-n)/(i-n),f=(e-n)/(o-n),r.push(1),r.push(2),1!==f&&(r.push(-1),r.push(0),r.push(2),r.push(f)),1!==h&&(r.push(-1),r.push(0),r.push(1),r.push(h))):l?(p=(e-i)/(o-i),m=(e-i)/(n-i),r.push(2),r.push(0),1!==m&&(r.push(-1),r.push(1),r.push(0),r.push(m)),1!==p&&(r.push(-1),r.push(1),r.push(2),r.push(p))):u&&(_=(e-o)/(n-o),g=(e-o)/(i-o),r.push(0),r.push(1),1!==g&&(r.push(-1),r.push(2),r.push(1),r.push(g)),1!==_&&(r.push(-1),r.push(2),r.push(0),r.push(_))):2===d?c||n===e?l||i===e?u||o===e||(f=(e-n)/(o-n),p=(e-i)/(o-i),r.push(2),r.push(-1),r.push(0),r.push(2),r.push(f),r.push(-1),r.push(1),r.push(2),r.push(p)):(g=(e-o)/(i-o),h=(e-n)/(i-n),r.push(1),r.push(-1),r.push(2),r.push(1),r.push(g),r.push(-1),r.push(0),r.push(1),r.push(h)):(m=(e-i)/(n-i),_=(e-o)/(n-o),r.push(0),r.push(-1),r.push(1),r.push(0),r.push(m),r.push(-1),r.push(2),r.push(0),r.push(_)):3!==d&&(r.push(0),r.push(1),r.push(2)),r},computeBarycentricCoordinates:function(e,t,n,i,r,c,l,u,d){if(!(0,s.Z)(e))throw new a.Z("x is required.");if(!(0,s.Z)(t))throw new a.Z("y is required.");if(!(0,s.Z)(n))throw new a.Z("x1 is required.");if(!(0,s.Z)(i))throw new a.Z("y1 is required.");if(!(0,s.Z)(r))throw new a.Z("x2 is required.");if(!(0,s.Z)(c))throw new a.Z("y2 is required.");if(!(0,s.Z)(l))throw new a.Z("x3 is required.");if(!(0,s.Z)(u))throw new a.Z("y3 is required.");const h=n-l,f=l-r,p=c-u,m=i-u,_=1/(p*h+f*m),g=t-u,Z=e-l,y=(p*Z+f*g)*_,b=(-m*Z+h*g)*_,v=1-y-b;return(0,s.Z)(d)?(d.x=y,d.y=b,d.z=v,d):new o.Z(y,b,v)},computeLineSegmentLineSegmentIntersection:function(e,t,n,o,a,c,l,u,d){r.Z.typeOf.number("x00",e),r.Z.typeOf.number("y00",t),r.Z.typeOf.number("x01",n),r.Z.typeOf.number("y01",o),r.Z.typeOf.number("x10",a),r.Z.typeOf.number("y10",c),r.Z.typeOf.number("x11",l),r.Z.typeOf.number("y11",u);const h=(u-c)*(n-e)-(l-a)*(o-t);if(0===h)return;const f=((l-a)*(t-c)-(u-c)*(e-a))/h,p=((n-e)*(t-c)-(o-t)*(e-a))/h;return f>=0&&f<=1&&p>=0&&p<=1?((0,s.Z)(d)||(d=new i.Z),d.x=e+f*(n-e),d.y=t+f*(o-t),d):void 0}}},865262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(865029),o=n(11020),r=n(205522);let s;const a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmYmE2YWEzOS1lZDUyLTQ0YWMtOTlkNS0wN2VhZWI3NTc4MmEiLCJpZCI6MjU5LCJpYXQiOjE2ODU2MzQ0Njl9.AswCMxsN03WYwuZL-r183OZicN64Ks9aPExWhA3fuLY",c={};c.defaultAccessToken=a,c.defaultServer=new r.Z({url:"https://api.cesium.com/"}),c.getDefaultTokenCredit=function(e){if(e===a){if(!(0,o.Z)(s)){const e='<b>             This application is using Cesium\'s default ion access token. Please assign <i>Cesium.Ion.defaultAccessToken</i>             with an access token from your ion account before making any Cesium API calls.             You can sign up for a free ion account at <a href="https://cesium.com">https://cesium.com</a>.</b>';s=new i.Z(e,!0),s._isDefaultToken=!0}return s}};const l=c},823024:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(865029),r=n(234146),s=n(11020),a=n(865262),c=n(347599),l=n(205522);function u(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),i.Z.typeOf.object("options.scene",e.scene);const t=(0,r.Z)(e.accessToken,a.Z.defaultAccessToken),n=l.Z.createIfNeeded((0,r.Z)(e.server,a.Z.defaultServer));n.appendForwardSlash();const u=a.Z.getDefaultTokenCredit(t);(0,s.Z)(u)&&e.scene.frameState.creditDisplay.addStaticCredit(o.Z.clone(u));const d=n.getDerivedResource({url:"v1/geocode"});(0,s.Z)(t)&&d.appendQueryParameters({access_token:t}),this._accessToken=t,this._server=n,this._pelias=new c.Z(d)}Object.defineProperties(u.prototype,{credit:{get:function(){}}}),u.prototype.geocode=async function(e,t){return this._pelias.geocode(e,t)};const d=u},980382:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(354998),o=n(790087),r=n(865029),s=n(234146),a=n(11020),c=n(865262),l=n(205522),u=n(217066);function d(e,t){let n;o.Z.defined("endpoint",e),o.Z.defined("endpointResource",t);const r=e.externalType,s=(0,a.Z)(r);if(s){if("3DTILES"!==r&&"STK_TERRAIN_SERVER"!==r)throw new u.Z("Ion.createResource does not support external imagery assets; use IonImageryProvider instead.");n={url:e.options.url}}else n={url:e.url,retryAttempts:1,retryCallback:h};l.Z.call(this,n),this._ionEndpoint=e,this._ionEndpointDomain=s?void 0:new i(e.url).authority(),this._ionEndpointResource=t,this._ionRoot=void 0,this._pendingPromise=void 0,this._credits=void 0,this._isExternal=s}function h(e,t){const n=(0,s.Z)(e._ionRoot,e),i=n._ionEndpointResource,o="undefined"!=typeof Image;return(0,a.Z)(t)&&(401===t.statusCode||o&&t.target instanceof Image)?((0,a.Z)(n._pendingPromise)||(n._pendingPromise=i.fetchJson().then((function(e){return n._ionEndpoint=e,e})).finally((function(e){return n._pendingPromise=void 0,e}))),n._pendingPromise.then((function(t){return e._ionEndpoint=t,!0}))):Promise.resolve(!1)}(0,a.Z)(Object.create)&&(d.prototype=Object.create(l.Z.prototype),d.prototype.constructor=d),d.fromAssetId=function(e,t){const n=d._createEndpointResource(e,t);return n.fetchJson().then((function(e){return new d(e,n)}))},Object.defineProperties(d.prototype,{credits:{get:function(){return(0,a.Z)(this._ionRoot)?this._ionRoot.credits:((0,a.Z)(this._credits)||(this._credits=d.getCreditsFromEndpoint(this._ionEndpoint,this._ionEndpointResource)),this._credits)}}}),d.getCreditsFromEndpoint=function(e,t){const n=e.attributions.map(r.Z.getIonCredit),i=c.Z.getDefaultTokenCredit(t.queryParameters.access_token);return(0,a.Z)(i)&&n.push(r.Z.clone(i)),n},d.prototype.clone=function(e){const t=(0,s.Z)(this._ionRoot,this);return(0,a.Z)(e)||(e=new d(t._ionEndpoint,t._ionEndpointResource)),(e=l.Z.prototype.clone.call(this,e))._ionRoot=t,e._isExternal=this._isExternal,e},d.prototype.fetchImage=function(e){if(!this._isExternal){const t=e;e={preferBlob:!0},(0,a.Z)(t)&&(e.flipY=t.flipY,e.preferImageBitmap=t.preferImageBitmap)}return l.Z.prototype.fetchImage.call(this,e)},d.prototype._makeRequest=function(e){return this._isExternal||new i(this.url).authority()!==this._ionEndpointDomain||((0,a.Z)(e.headers)||(e.headers={}),e.headers.Authorization=`Bearer ${this._ionEndpoint.accessToken}`,e.headers["X-Cesium-Client"]="CesiumJS","undefined"!=typeof CESIUM_VERSION&&(e.headers["X-Cesium-Client-Version"]=CESIUM_VERSION)),l.Z.prototype._makeRequest.call(this,e)},d._createEndpointResource=function(e,t){o.Z.defined("assetId",e),t=(0,s.Z)(t,s.Z.EMPTY_OBJECT);let n=(0,s.Z)(t.server,c.Z.defaultServer);const i=(0,s.Z)(t.accessToken,c.Z.defaultAccessToken);n=l.Z.createIfNeeded(n);const r={url:`v1/assets/${e}/endpoint`};return(0,a.Z)(i)&&(r.queryParameters={access_token:i}),n.getDerivedResource(r)};const f=d},433310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(11020),o=n(765153);const r={type:"Linear",getRequiredDataPoints:function(e){return 2},interpolateOrderZero:function(e,t,n,r,s){if(2!==t.length)throw new o.Z("The xTable provided to the linear interpolator must have exactly two elements.");if(r<=0)throw new o.Z("There must be at least 1 dependent variable for each independent variable.");let a,c,l;(0,i.Z)(s)||(s=new Array(r));const u=t[0],d=t[1];if(u===d)throw new o.Z("Divide by zero error: xTable[0] and xTable[1] are equal");for(a=0;a<r;a++)c=n[a],l=n[a+r],s[a]=((l-c)*e+d*c-u*l)/(d-u);return s}}},27410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(660904),o=n(234146),r=n(11020),s=n(765153),a=n(361942);function c(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).points,n=e.times;if(!(0,r.Z)(t)||!(0,r.Z)(n))throw new s.Z("points and times are required.");if(t.length<2)throw new s.Z("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new s.Z("times.length must be equal to points.length.");this._times=n,this._points=t,this._pointType=a.Z.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(c.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),c.prototype.findTimeInterval=a.Z.prototype.findTimeInterval,c.prototype.wrapTime=a.Z.prototype.wrapTime,c.prototype.clampTime=a.Z.prototype.clampTime,c.prototype.evaluate=function(e,t){const n=this.points,o=this.times,s=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),a=(e-o[s])/(o[s+1]-o[s]);return this._pointType===Number?(1-a)*n[s]+a*n[s+1]:((0,r.Z)(t)||(t=new i.Z),i.Z.lerp(n[s],n[s+1],a,t))};const l=c},189381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(790087),o=n(234146);function r(e){e=(0,o.Z)(e,0),this._array=new Array(e),this._length=e}Object.defineProperties(r.prototype,{length:{get:function(){return this._length},set:function(e){i.Z.typeOf.number.greaterThanOrEquals("length",e,0);const t=this._array,n=this._length;if(e<n)for(let i=e;i<n;++i)t[i]=void 0;else e>t.length&&(t.length=e);this._length=e}},values:{get:function(){return this._array}}}),r.prototype.get=function(e){return i.Z.typeOf.number.lessThan("index",e,this._array.length),this._array[e]},r.prototype.set=function(e,t){i.Z.typeOf.number("index",e),e>=this._length&&(this.length=e+1),this._array[e]=t},r.prototype.peek=function(){return this._array[this._length-1]},r.prototype.push=function(e){const t=this.length++;this._array[t]=e},r.prototype.pop=function(){if(0===this._length)return;const e=this._array[this._length-1];return--this.length,e},r.prototype.reserve=function(e){i.Z.typeOf.number.greaterThanOrEquals("length",e,0),e>this._array.length&&(this._array.length=e)},r.prototype.resize=function(e){i.Z.typeOf.number.greaterThanOrEquals("length",e,0),this.length=e},r.prototype.trim=function(e){e=(0,o.Z)(e,this._length),this._array.length=e};const s=r},683278:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(11020),r=n(765153);const s={};function a(e){return 1431655765&((e=858993459&((e=252645135&((e=16711935&(e^e<<8))^e<<4))^e<<2))^e<<1)}function c(e){return 153391689&((e=51130563&((e=50393103&((e=50331903&(e^e<<16))^e<<8))^e<<4))^e<<2)}function l(e){return 65535&((e=16711935&((e=252645135&((e=858993459&((e&=1431655765)^e>>1))^e>>2))^e>>4))^e>>8)}function u(e){return 1023&((e=4278190335&((e=50393103&((e=51130563&((e&=153391689)^e>>2))^e>>4))^e>>8))^e>>16)}s.encode2D=function(e,t){if(i.Z.typeOf.number("x",e),i.Z.typeOf.number("y",t),e<0||e>65535||t<0||t>65535)throw new r.Z("inputs must be 16-bit unsigned integers");return(a(e)|a(t)<<1)>>>0},s.decode2D=function(e,t){if(i.Z.typeOf.number("mortonIndex",e),e<0||e>4294967295)throw new r.Z("input must be a 32-bit unsigned integer");return(0,o.Z)(t)||(t=new Array(2)),t[0]=l(e),t[1]=l(e>>1),t},s.encode3D=function(e,t,n){if(i.Z.typeOf.number("x",e),i.Z.typeOf.number("y",t),i.Z.typeOf.number("z",n),e<0||e>1023||t<0||t>1023||n<0||n>1023)throw new r.Z("inputs must be 10-bit unsigned integers");return c(e)|c(t)<<1|c(n)<<2},s.decode3D=function(e,t){if(i.Z.typeOf.number("mortonIndex",e),e<0||e>1073741823)throw new r.Z("input must be a 30-bit unsigned integer");return(0,o.Z)(t)||(t=new Array(3)),t[0]=u(e),t[1]=u(e>>1),t[2]=u(e>>2),t};const d=s},734726:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(762031),o=n(660904),r=n(234146),s=n(11020),a=n(765153),c=n(63354),l=n(344485),u=n(143450),d=n(140874);function h(e,t){if(!(0,s.Z)(e))throw new a.Z("occluderBoundingSphere is required.");if(!(0,s.Z)(t))throw new a.Z("camera position is required.");this._occluderPosition=o.Z.clone(e.center),this._occluderRadius=e.radius,this._horizonDistance=0,this._horizonPlaneNormal=void 0,this._horizonPlanePosition=void 0,this._cameraPosition=void 0,this.cameraPosition=t}const f=new o.Z;Object.defineProperties(h.prototype,{position:{get:function(){return this._occluderPosition}},radius:{get:function(){return this._occluderRadius}},cameraPosition:{set:function(e){if(!(0,s.Z)(e))throw new a.Z("cameraPosition is required.");e=o.Z.clone(e,this._cameraPosition);const t=o.Z.subtract(this._occluderPosition,e,f);let n=o.Z.magnitudeSquared(t);const i=this._occluderRadius*this._occluderRadius;let r,c,l;if(n>i){r=Math.sqrt(n-i),n=1/Math.sqrt(n),c=o.Z.multiplyByScalar(t,n,f);const s=r*r*n;l=o.Z.add(e,o.Z.multiplyByScalar(c,s,f),f)}else r=Number.MAX_VALUE;this._horizonDistance=r,this._horizonPlaneNormal=c,this._horizonPlanePosition=l,this._cameraPosition=e}}}),h.fromBoundingSphere=function(e,t,n){if(!(0,s.Z)(e))throw new a.Z("occluderBoundingSphere is required.");if(!(0,s.Z)(t))throw new a.Z("camera position is required.");return(0,s.Z)(n)?(o.Z.clone(e.center,n._occluderPosition),n._occluderRadius=e.radius,n.cameraPosition=t,n):new h(e,t)};const p=new o.Z;h.prototype.isPointVisible=function(e){if(this._horizonDistance!==Number.MAX_VALUE){let t=o.Z.subtract(e,this._occluderPosition,p),n=this._occluderRadius;if(n=o.Z.magnitudeSquared(t)-n*n,n>0)return n=Math.sqrt(n)+this._horizonDistance,t=o.Z.subtract(e,this._cameraPosition,t),n*n>o.Z.magnitudeSquared(t)}return!1};const m=new o.Z;h.prototype.isBoundingSphereVisible=function(e){const t=o.Z.clone(e.center,m),n=e.radius;if(this._horizonDistance!==Number.MAX_VALUE){let e=o.Z.subtract(t,this._occluderPosition,p),i=this._occluderRadius-n;if(i=o.Z.magnitudeSquared(e)-i*i,n<this._occluderRadius)return i>0&&(i=Math.sqrt(i)+this._horizonDistance,e=o.Z.subtract(t,this._cameraPosition,e),i*i+n*n>o.Z.magnitudeSquared(e));if(i>0){e=o.Z.subtract(t,this._cameraPosition,e);const r=o.Z.magnitudeSquared(e),s=this._occluderRadius*this._occluderRadius,a=n*n;return(this._horizonDistance*this._horizonDistance+s)*a>r*s||(i=Math.sqrt(i)+this._horizonDistance,i*i+a>r)}return!0}return!1};const _=new o.Z;h.prototype.computeVisibility=function(e){if(!(0,s.Z)(e))throw new a.Z("occludeeBS is required.");const t=o.Z.clone(e.center),n=e.radius;if(n>this._occluderRadius)return d.Z.FULL;if(this._horizonDistance!==Number.MAX_VALUE){let e=o.Z.subtract(t,this._occluderPosition,_),i=this._occluderRadius-n;const r=o.Z.magnitudeSquared(e);if(i=r-i*i,i>0){i=Math.sqrt(i)+this._horizonDistance,e=o.Z.subtract(t,this._cameraPosition,e);const s=o.Z.magnitudeSquared(e);return i*i+n*n<s?d.Z.NONE:(i=this._occluderRadius+n,i=r-i*i,i>0?(i=Math.sqrt(i)+this._horizonDistance,s<i*i+n*n?d.Z.FULL:d.Z.PARTIAL):(e=o.Z.subtract(t,this._horizonPlanePosition,e),o.Z.dot(e,this._horizonPlaneNormal)>-n?d.Z.PARTIAL:d.Z.FULL))}}return d.Z.NONE};const g=new o.Z;h.computeOccludeePoint=function(e,t,n){if(!(0,s.Z)(e))throw new a.Z("occluderBoundingSphere is required.");if(!(0,s.Z)(n))throw new a.Z("positions is required.");if(0===n.length)throw new a.Z("positions must contain at least one element");const i=o.Z.clone(t),r=o.Z.clone(e.center),c=e.radius,l=n.length;if(o.Z.equals(r,t))throw new a.Z("occludeePosition must be different than occluderBoundingSphere.center");const u=o.Z.normalize(o.Z.subtract(i,r,g),g),d=-o.Z.dot(u,r),f=h._anyRotationVector(r,u,d);let p,m=h._horizonToPlaneNormalDotProduct(e,u,d,f,n[0]);if(!m)return;for(let t=1;t<l;++t){if(p=h._horizonToPlaneNormalDotProduct(e,u,d,f,n[t]),!p)return;p<m&&(m=p)}if(m<.0017453283658983088)return;const _=c/m;return o.Z.add(r,o.Z.multiplyByScalar(u,_,g),g)};const Z=[];h.computeOccludeePointFromRectangle=function(e,t){if(!(0,s.Z)(e))throw new a.Z("rectangle is required.");t=(0,r.Z)(t,c.Z.WGS84);const n=u.Z.subsample(e,t,0,Z),l=i.Z.fromPoints(n),d=o.Z.ZERO;if(!o.Z.equals(d,l.center))return h.computeOccludeePoint(new i.Z(d,t.minimumRadius),l.center,n)};const y=new o.Z;h._anyRotationVector=function(e,t,n){const i=o.Z.abs(t,y);let r=i.x>i.y?0:1;(0===r&&i.z>i.x||1===r&&i.z>i.y)&&(r=2);const s=new o.Z;let a;0===r?(i.x=e.x,i.y=e.y+1,i.z=e.z+1,a=o.Z.UNIT_X):1===r?(i.x=e.x+1,i.y=e.y,i.z=e.z+1,a=o.Z.UNIT_Y):(i.x=e.x+1,i.y=e.y+1,i.z=e.z,a=o.Z.UNIT_Z);const c=(o.Z.dot(t,i)+n)/-o.Z.dot(t,a);return o.Z.normalize(o.Z.subtract(o.Z.add(i,o.Z.multiplyByScalar(a,c,s),i),e,i),i)};const b=new o.Z;h._rotationVector=function(e,t,n,i,r){let s=o.Z.subtract(i,e,b);if(s=o.Z.normalize(s,s),o.Z.dot(t,s)<.9999999847691291){const e=o.Z.cross(t,s,s);if(o.Z.magnitude(e)>l.Z.EPSILON13)return o.Z.normalize(e,new o.Z)}return r};const v=new o.Z,A=new o.Z,T=new o.Z,w=new o.Z;h._horizonToPlaneNormalDotProduct=function(e,t,n,i,r){const s=o.Z.clone(r,v),a=o.Z.clone(e.center,A),c=e.radius;let l=o.Z.subtract(a,s,T);const u=o.Z.magnitudeSquared(l),d=c*c;if(u<d)return!1;const h=u-d,f=Math.sqrt(h),p=f*(1/Math.sqrt(u))*f;l=o.Z.normalize(l,l);const m=o.Z.add(s,o.Z.multiplyByScalar(l,p,w),w),_=Math.sqrt(h-p*p);let g=this._rotationVector(a,t,n,s,i),Z=o.Z.fromElements(g.x*g.x*l.x+(g.x*g.y-g.z)*l.y+(g.x*g.z+g.y)*l.z,(g.x*g.y+g.z)*l.x+g.y*g.y*l.y+(g.y*g.z-g.x)*l.z,(g.x*g.z-g.y)*l.x+(g.y*g.z+g.x)*l.y+g.z*g.z*l.z,v);Z=o.Z.normalize(Z,Z);const y=o.Z.multiplyByScalar(Z,_,v);g=o.Z.normalize(o.Z.subtract(o.Z.add(m,y,T),a,T),T);const b=o.Z.dot(t,g);g=o.Z.normalize(o.Z.subtract(o.Z.subtract(m,y,g),a,g),g);const E=o.Z.dot(t,g);return b<E?b:E};const E=h},347599:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(660904),o=n(790087),r=n(11020),s=n(238466),a=n(143450),c=n(205522);function l(e){o.Z.defined("url",e),this._url=c.Z.createIfNeeded(e),this._url.appendForwardSlash()}Object.defineProperties(l.prototype,{url:{get:function(){return this._url}},credit:{get:function(){}}}),l.prototype.geocode=async function(e,t){return o.Z.typeOf.string("query",e),this._url.getDerivedResource({url:t===s.Z.AUTOCOMPLETE?"autocomplete":"search",queryParameters:{text:e}}).fetchJson().then((function(e){return e.features.map((function(t){let n;const o=t.bbox;if((0,r.Z)(o))n=a.Z.fromDegrees(o[0],o[1],o[2],o[3]);else{const e=t.geometry.coordinates[0],o=t.geometry.coordinates[1];n=i.Z.fromDegrees(e,o)}return{displayName:t.properties.label,destination:n,attributions:e.attributions}}))}))};const u=l},134282:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(234146),r=n(11020),s=n(765153),a=n(344485),c=n(296184);function l(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this._offCenterFrustum=new c.Z,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=(0,o.Z)(e.near,1),this._near=this.near,this.far=(0,o.Z)(e.far,5e8),this._far=this.far,this.xOffset=(0,o.Z)(e.xOffset,0),this._xOffset=this.xOffset,this.yOffset=(0,o.Z)(e.yOffset,0),this._yOffset=this.yOffset}function u(e){if(!((0,r.Z)(e.fov)&&(0,r.Z)(e.aspectRatio)&&(0,r.Z)(e.near)&&(0,r.Z)(e.far)))throw new s.Z("fov, aspectRatio, near, or far parameters are not set.");const t=e._offCenterFrustum;if(e.fov!==e._fov||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far||e.xOffset!==e._xOffset||e.yOffset!==e._yOffset){if(e.fov<0||e.fov>=Math.PI)throw new s.Z("fov must be in the range [0, PI).");if(e.aspectRatio<0)throw new s.Z("aspectRatio must be positive.");if(e.near<0||e.near>e.far)throw new s.Z("near must be greater than zero and less than far.");e._aspectRatio=e.aspectRatio,e._fov=e.fov,e._fovy=e.aspectRatio<=1?e.fov:2*Math.atan(Math.tan(.5*e.fov)/e.aspectRatio),e._near=e.near,e._far=e.far,e._sseDenominator=2*Math.tan(.5*e._fovy),e._xOffset=e.xOffset,e._yOffset=e.yOffset,t.top=e.near*Math.tan(.5*e._fovy),t.bottom=-t.top,t.right=e.aspectRatio*t.top,t.left=-t.right,t.near=e.near,t.far=e.far,t.right+=e.xOffset,t.left+=e.xOffset,t.top+=e.yOffset,t.bottom+=e.yOffset}}l.packedLength=6,l.pack=function(e,t,n){return i.Z.typeOf.object("value",e),i.Z.defined("array",t),n=(0,o.Z)(n,0),t[n++]=e.fov,t[n++]=e.aspectRatio,t[n++]=e.near,t[n++]=e.far,t[n++]=e.xOffset,t[n]=e.yOffset,t},l.unpack=function(e,t,n){return i.Z.defined("array",e),t=(0,o.Z)(t,0),(0,r.Z)(n)||(n=new l),n.fov=e[t++],n.aspectRatio=e[t++],n.near=e[t++],n.far=e[t++],n.xOffset=e[t++],n.yOffset=e[t],n},Object.defineProperties(l.prototype,{projectionMatrix:{get:function(){return u(this),this._offCenterFrustum.projectionMatrix}},infiniteProjectionMatrix:{get:function(){return u(this),this._offCenterFrustum.infiniteProjectionMatrix}},fovy:{get:function(){return u(this),this._fovy}},sseDenominator:{get:function(){return u(this),this._sseDenominator}},offCenterFrustum:{get:function(){return u(this),this._offCenterFrustum}}}),l.prototype.computeCullingVolume=function(e,t,n){return u(this),this._offCenterFrustum.computeCullingVolume(e,t,n)},l.prototype.getPixelDimensions=function(e,t,n,i,o){return u(this),this._offCenterFrustum.getPixelDimensions(e,t,n,i,o)},l.prototype.clone=function(e){return(0,r.Z)(e)||(e=new l),e.aspectRatio=this.aspectRatio,e.fov=this.fov,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._fov=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e},l.prototype.equals=function(e){return!!((0,r.Z)(e)&&e instanceof l)&&(u(this),u(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))},l.prototype.equalsEpsilon=function(e,t,n){return!!((0,r.Z)(e)&&e instanceof l)&&(u(this),u(e),a.Z.equalsEpsilon(this.fov,e.fov,t,n)&&a.Z.equalsEpsilon(this.aspectRatio,e.aspectRatio,t,n)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,n))};const d=l},296184:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(660904),o=n(798336),r=n(737400),s=n(234146),a=n(11020),c=n(765153),l=n(344485),u=n(659635);function d(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=(0,s.Z)(e.near,1),this._near=this.near,this.far=(0,s.Z)(e.far,5e8),this._far=this.far,this._cullingVolume=new r.Z,this._perspectiveMatrix=new u.Z,this._infinitePerspective=new u.Z}function h(e){if(!((0,a.Z)(e.right)&&(0,a.Z)(e.left)&&(0,a.Z)(e.top)&&(0,a.Z)(e.bottom)&&(0,a.Z)(e.near)&&(0,a.Z)(e.far)))throw new c.Z("right, left, top, bottom, near, or far parameters are not set.");const t=e.top,n=e.bottom,i=e.right,o=e.left,r=e.near,s=e.far;if(t!==e._top||n!==e._bottom||o!==e._left||i!==e._right||r!==e._near||s!==e._far){if(e.near<=0||e.near>e.far)throw new c.Z("near must be greater than zero and less than far.");e._left=o,e._right=i,e._top=t,e._bottom=n,e._near=r,e._far=s,e._perspectiveMatrix=u.Z.computePerspectiveOffCenter(o,i,n,t,r,s,e._perspectiveMatrix),e._infinitePerspective=u.Z.computeInfinitePerspectiveOffCenter(o,i,n,t,r,e._infinitePerspective)}}Object.defineProperties(d.prototype,{projectionMatrix:{get:function(){return h(this),this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){return h(this),this._infinitePerspective}}});const f=new i.Z,p=new i.Z,m=new i.Z,_=new i.Z;d.prototype.computeCullingVolume=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("position is required.");if(!(0,a.Z)(t))throw new c.Z("direction is required.");if(!(0,a.Z)(n))throw new c.Z("up is required.");const r=this._cullingVolume.planes,s=this.top,l=this.bottom,u=this.right,d=this.left,h=this.near,g=this.far,Z=i.Z.cross(t,n,f),y=p;i.Z.multiplyByScalar(t,h,y),i.Z.add(e,y,y);const b=m;i.Z.multiplyByScalar(t,g,b),i.Z.add(e,b,b);const v=_;i.Z.multiplyByScalar(Z,d,v),i.Z.add(y,v,v),i.Z.subtract(v,e,v),i.Z.normalize(v,v),i.Z.cross(v,n,v),i.Z.normalize(v,v);let A=r[0];return(0,a.Z)(A)||(A=r[0]=new o.Z),A.x=v.x,A.y=v.y,A.z=v.z,A.w=-i.Z.dot(v,e),i.Z.multiplyByScalar(Z,u,v),i.Z.add(y,v,v),i.Z.subtract(v,e,v),i.Z.cross(n,v,v),i.Z.normalize(v,v),A=r[1],(0,a.Z)(A)||(A=r[1]=new o.Z),A.x=v.x,A.y=v.y,A.z=v.z,A.w=-i.Z.dot(v,e),i.Z.multiplyByScalar(n,l,v),i.Z.add(y,v,v),i.Z.subtract(v,e,v),i.Z.cross(Z,v,v),i.Z.normalize(v,v),A=r[2],(0,a.Z)(A)||(A=r[2]=new o.Z),A.x=v.x,A.y=v.y,A.z=v.z,A.w=-i.Z.dot(v,e),i.Z.multiplyByScalar(n,s,v),i.Z.add(y,v,v),i.Z.subtract(v,e,v),i.Z.cross(v,Z,v),i.Z.normalize(v,v),A=r[3],(0,a.Z)(A)||(A=r[3]=new o.Z),A.x=v.x,A.y=v.y,A.z=v.z,A.w=-i.Z.dot(v,e),A=r[4],(0,a.Z)(A)||(A=r[4]=new o.Z),A.x=t.x,A.y=t.y,A.z=t.z,A.w=-i.Z.dot(t,y),i.Z.negate(t,v),A=r[5],(0,a.Z)(A)||(A=r[5]=new o.Z),A.x=v.x,A.y=v.y,A.z=v.z,A.w=-i.Z.dot(v,b),this._cullingVolume},d.prototype.getPixelDimensions=function(e,t,n,i,o){if(h(this),!(0,a.Z)(e)||!(0,a.Z)(t))throw new c.Z("Both drawingBufferWidth and drawingBufferHeight are required.");if(e<=0)throw new c.Z("drawingBufferWidth must be greater than zero.");if(t<=0)throw new c.Z("drawingBufferHeight must be greater than zero.");if(!(0,a.Z)(n))throw new c.Z("distance is required.");if(!(0,a.Z)(i))throw new c.Z("pixelRatio is required");if(i<=0)throw new c.Z("pixelRatio must be greater than zero.");if(!(0,a.Z)(o))throw new c.Z("A result object is required.");const r=1/this.near;let s=this.top*r;const l=2*i*n*s/t;s=this.right*r;const u=2*i*n*s/e;return o.x=u,o.y=l,o},d.prototype.clone=function(e){return(0,a.Z)(e)||(e=new d),e.right=this.right,e.left=this.left,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e},d.prototype.equals=function(e){return(0,a.Z)(e)&&e instanceof d&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far},d.prototype.equalsEpsilon=function(e,t,n){return e===this||(0,a.Z)(e)&&e instanceof d&&l.Z.equalsEpsilon(this.right,e.right,t,n)&&l.Z.equalsEpsilon(this.left,e.left,t,n)&&l.Z.equalsEpsilon(this.top,e.top,t,n)&&l.Z.equalsEpsilon(this.bottom,e.bottom,t,n)&&l.Z.equalsEpsilon(this.near,e.near,t,n)&&l.Z.equalsEpsilon(this.far,e.far,t,n)};const g=d},610161:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(762031),o=n(660904),r=n(790087),s=n(449809),a=n(234146),c=n(11020),l=n(87200),u=n(951775),d=n(263825),h=n(804868),f=n(427183);function p(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT);const t=(0,a.Z)(e.vertexFormat,f.Z.DEFAULT);this._vertexFormat=t,this._workerName="createPlaneGeometry"}p.packedLength=f.Z.packedLength,p.pack=function(e,t,n){return r.Z.typeOf.object("value",e),r.Z.defined("array",t),n=(0,a.Z)(n,0),f.Z.pack(e._vertexFormat,t,n),t};const m=new f.Z,_={vertexFormat:m};p.unpack=function(e,t,n){r.Z.defined("array",e),t=(0,a.Z)(t,0);const i=f.Z.unpack(e,t,m);return(0,c.Z)(n)?(n._vertexFormat=f.Z.clone(i,n._vertexFormat),n):new p(_)};const g=new o.Z(-.5,-.5,0),Z=new o.Z(.5,.5,0);p.createGeometry=function(e){const t=e._vertexFormat,n=new d.Z;let r,a;if(t.position){if(a=new Float64Array(12),a[0]=g.x,a[1]=g.y,a[2]=0,a[3]=Z.x,a[4]=g.y,a[5]=0,a[6]=Z.x,a[7]=Z.y,a[8]=0,a[9]=g.x,a[10]=Z.y,a[11]=0,n.position=new u.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:a}),t.normal){const e=new Float32Array(12);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=1,e[9]=0,e[10]=0,e[11]=1,n.normal=new u.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:e})}if(t.st){const e=new Float32Array(8);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=1,e[5]=1,e[6]=0,e[7]=1,n.st=new u.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:2,values:e})}if(t.tangent){const e=new Float32Array(12);e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=1,e[10]=0,e[11]=0,n.tangent=new u.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:e})}if(t.bitangent){const e=new Float32Array(12);e[0]=0,e[1]=1,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=1,e[8]=0,e[9]=0,e[10]=1,e[11]=0,n.bitangent=new u.Z({componentDatatype:s.Z.FLOAT,componentsPerAttribute:3,values:e})}r=new Uint16Array(6),r[0]=0,r[1]=1,r[2]=2,r[3]=0,r[4]=2,r[5]=3}return new l.Z({attributes:n,indices:r,primitiveType:h.Z.TRIANGLES,boundingSphere:new i.Z(o.Z.ZERO,Math.sqrt(2))})};const y=p},95359:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(762031),o=n(660904),r=n(790087),s=n(449809),a=n(11020),c=n(87200),l=n(951775),u=n(263825),d=n(804868);function h(){this._workerName="createPlaneOutlineGeometry"}h.packedLength=0,h.pack=function(e,t){return r.Z.defined("value",e),r.Z.defined("array",t),t},h.unpack=function(e,t,n){return r.Z.defined("array",e),(0,a.Z)(n)?n:new h};const f=new o.Z(-.5,-.5,0),p=new o.Z(.5,.5,0);h.createGeometry=function(){const e=new u.Z,t=new Uint16Array(8),n=new Float64Array(12);return n[0]=f.x,n[1]=f.y,n[2]=f.z,n[3]=p.x,n[4]=f.y,n[5]=f.z,n[6]=p.x,n[7]=p.y,n[8]=f.z,n[9]=f.x,n[10]=p.y,n[11]=f.z,e.position=new l.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:n}),t[0]=0,t[1]=1,t[2]=1,t[3]=2,t[4]=2,t[5]=3,t[6]=3,t[7]=0,new c.Z({attributes:e,indices:t,primitiveType:d.Z.LINES,boundingSphere:new i.Z(o.Z.ZERO,Math.sqrt(2))})};const m=h},670594:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ue});var i=n(730617),o=n(890828),r=n(762031),s=n(405254),a=n(660904),c=n(532056),l=n(790087),u=n(449809),d=n(234146),h=n(11020),f=n(765153),p=n(63354),m=n(835189),_=n(573777),g=n(87200),Z=n(951775),y=n(156905),b=n(61885),v=n(5450),A=n(342209),T=n(344485),w=n(664288),E=n(161707),S=n(798118),C=n(360846),x=n(143450),I=n(427183),P=n(126729);const D=new c.Z,O=new c.Z;function L(e,t,n,i){const o=i.cartesianToCartographic(e,D).height,r=i.cartesianToCartographic(t,O);r.height=o,i.cartographicToCartesian(r,t);const s=i.cartesianToCartographic(n,O);s.height=o-100,i.cartographicToCartesian(s,n)}const N=new o.Z,M=new a.Z,R=new a.Z,F=new a.Z,B=new a.Z,U=new a.Z,k=new a.Z;let V=new a.Z,H=new a.Z,z=new a.Z;const G=new s.Z,j=new s.Z,W=new a.Z,q=new C.Z,Y=new w.Z,X=new w.Z;function J(e){const t=e.vertexFormat,n=e.geometry,i=e.shadowVolume,o=n.attributes.position.values,r=(0,h.Z)(n.attributes.st)?n.attributes.st.values:void 0;let c=o.length;const l=e.wall,d=e.top||l,f=e.bottom||l;if(t.st||t.normal||t.tangent||t.bitangent||i){const p=e.boundingRectangle,m=e.tangentPlane,_=e.ellipsoid,g=e.stRotation,y=e.perPositionHeight,b=G;b.x=p.x,b.y=p.y;const v=t.st?new Float32Array(c/3*2):void 0;let A;t.normal&&(A=y&&d&&!l?n.attributes.normal.values:new Float32Array(c));const E=t.tangent?new Float32Array(c):void 0,S=t.bitangent?new Float32Array(c):void 0,x=i?new Float32Array(c):void 0;let I=0,P=0,D=R,O=F,N=B,J=!0,Q=Y,$=X;if(0!==g){let e=C.Z.fromAxisAngle(m._plane.normal,g,q);Q=w.Z.fromQuaternion(e,Q),e=C.Z.fromAxisAngle(m._plane.normal,-g,q),$=w.Z.fromQuaternion(e,$)}else Q=w.Z.clone(w.Z.IDENTITY,Q),$=w.Z.clone(w.Z.IDENTITY,$);let K=0,ee=0;d&&f&&(K=c/2,ee=c/3,c/=2);for(let n=0;n<c;n+=3){const u=a.Z.fromArray(o,n,W);if(t.st&&!(0,h.Z)(r)){let e=w.Z.multiplyByVector(Q,u,M);e=_.scaleToGeodeticSurface(e,e);const t=m.projectPointOntoPlane(e,j);s.Z.subtract(t,b,t);const n=T.Z.clamp(t.x/p.width,0,1),i=T.Z.clamp(t.y/p.height,0,1);f&&(v[I+ee]=n,v[I+1+ee]=i),d&&(v[I]=n,v[I+1]=i),I+=2}if(t.normal||t.tangent||t.bitangent||i){const r=P+1,s=P+2;if(l){if(n+3<c){const e=a.Z.fromArray(o,n+3,U);if(J){const t=a.Z.fromArray(o,n+c,k);y&&L(u,e,t,_),a.Z.subtract(e,u,e),a.Z.subtract(t,u,t),D=a.Z.normalize(a.Z.cross(t,e,D),D),J=!1}a.Z.equalsEpsilon(e,u,T.Z.EPSILON10)&&(J=!0)}(t.tangent||t.bitangent)&&(N=_.geodeticSurfaceNormal(u,N),t.tangent&&(O=a.Z.normalize(a.Z.cross(N,D,O),O)))}else D=_.geodeticSurfaceNormal(u,D),(t.tangent||t.bitangent)&&(y&&(V=a.Z.fromArray(A,P,V),H=a.Z.cross(a.Z.UNIT_Z,V,H),H=a.Z.normalize(w.Z.multiplyByVector($,H,H),H),t.bitangent&&(z=a.Z.normalize(a.Z.cross(V,H,z),z))),O=a.Z.cross(a.Z.UNIT_Z,D,O),O=a.Z.normalize(w.Z.multiplyByVector($,O,O),O),t.bitangent&&(N=a.Z.normalize(a.Z.cross(D,O,N),N)));t.normal&&(e.wall?(A[P+K]=D.x,A[r+K]=D.y,A[s+K]=D.z):f&&(A[P+K]=-D.x,A[r+K]=-D.y,A[s+K]=-D.z),(d&&!y||l)&&(A[P]=D.x,A[r]=D.y,A[s]=D.z)),i&&(l&&(D=_.geodeticSurfaceNormal(u,D)),x[P+K]=-D.x,x[r+K]=-D.y,x[s+K]=-D.z),t.tangent&&(e.wall?(E[P+K]=O.x,E[r+K]=O.y,E[s+K]=O.z):f&&(E[P+K]=-O.x,E[r+K]=-O.y,E[s+K]=-O.z),d&&(y?(E[P]=H.x,E[r]=H.y,E[s]=H.z):(E[P]=O.x,E[r]=O.y,E[s]=O.z))),t.bitangent&&(f&&(S[P+K]=N.x,S[r+K]=N.y,S[s+K]=N.z),d&&(y?(S[P]=z.x,S[r]=z.y,S[s]=z.z):(S[P]=N.x,S[r]=N.y,S[s]=N.z))),P+=3}}t.st&&!(0,h.Z)(r)&&(n.attributes.st=new Z.Z({componentDatatype:u.Z.FLOAT,componentsPerAttribute:2,values:v})),t.normal&&(n.attributes.normal=new Z.Z({componentDatatype:u.Z.FLOAT,componentsPerAttribute:3,values:A})),t.tangent&&(n.attributes.tangent=new Z.Z({componentDatatype:u.Z.FLOAT,componentsPerAttribute:3,values:E})),t.bitangent&&(n.attributes.bitangent=new Z.Z({componentDatatype:u.Z.FLOAT,componentsPerAttribute:3,values:S})),i&&(n.attributes.extrudeDirection=new Z.Z({componentDatatype:u.Z.FLOAT,componentsPerAttribute:3,values:x}))}if(e.extrude&&(0,h.Z)(e.offsetAttribute)){const t=o.length/3;let i=new Uint8Array(t);if(e.offsetAttribute===b.Z.TOP)d&&f||l?i=i.fill(1,0,t/2):d&&(i=i.fill(1));else{const t=e.offsetAttribute===b.Z.NONE?0:1;i=i.fill(t)}n.attributes.applyOffset=new Z.Z({componentDatatype:u.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return n}const Q=new c.Z,$=new c.Z,K={westOverIDL:0,eastOverIDL:0};let ee=new m.Z;function te(e,t,n,o,r){if(r=(0,d.Z)(r,new x.Z),!(0,h.Z)(e)||e.length<3)return r.west=0,r.north=0,r.south=0,r.east=0,r;if(n===i.Z.RHUMB)return x.Z.fromCartesianArray(e,t,r);ee.ellipsoid.equals(t)||(ee=new m.Z(void 0,void 0,t)),r.west=Number.POSITIVE_INFINITY,r.east=Number.NEGATIVE_INFINITY,r.south=Number.POSITIVE_INFINITY,r.north=Number.NEGATIVE_INFINITY,K.westOverIDL=Number.POSITIVE_INFINITY,K.eastOverIDL=Number.NEGATIVE_INFINITY;const s=1/T.Z.chordLength(o,t.maximumRadius),a=e.length;let c,l=t.cartesianToCartographic(e[0],$),u=Q;for(let n=1;n<a;n++)c=u,u=l,l=t.cartesianToCartographic(e[n],c),ee.setEndPoints(u,l),ie(ee,s,r,K);return c=u,u=l,l=t.cartesianToCartographic(e[0],c),ee.setEndPoints(u,l),ie(ee,s,r,K),r.east-r.west>K.eastOverIDL-K.westOverIDL&&(r.west=K.westOverIDL,r.east=K.eastOverIDL,r.east>T.Z.PI&&(r.east=r.east-T.Z.TWO_PI),r.west>T.Z.PI&&(r.west=r.west-T.Z.TWO_PI)),r}const ne=new c.Z;function ie(e,t,n,i){const o=e.surfaceDistance,r=Math.ceil(o*t),s=r>0?o/(r-1):Number.POSITIVE_INFINITY;let a=0;for(let t=0;t<r;t++){const t=e.interpolateUsingSurfaceDistance(a,ne);a+=s;const o=t.longitude,r=t.latitude;n.west=Math.min(n.west,o),n.east=Math.max(n.east,o),n.south=Math.min(n.south,r),n.north=Math.max(n.north,r);const c=o>=0?o:o+T.Z.TWO_PI;i.westOverIDL=Math.min(i.westOverIDL,c),i.eastOverIDL=Math.max(i.eastOverIDL,c)}}const oe=[];function re(e,t,n,i,o,r,s,a,c,l){const u={walls:[]};let d;if(s||a){const o=E.Z.createGeometryFromPositions(e,t,n,i,r,c,l),f=o.attributes.position.values,p=o.indices;let m,_;if(s&&a){const e=f.concat(f);m=e.length/3,_=A.Z.createTypedArray(m,2*p.length),_.set(p);const t=p.length,i=m/2;for(d=0;d<t;d+=3){const e=_[d]+i,n=_[d+1]+i,o=_[d+2]+i;_[d+t]=o,_[d+1+t]=n,_[d+2+t]=e}if(o.attributes.position.values=e,r&&c.normal){const t=o.attributes.normal.values;o.attributes.normal.values=new Float32Array(e.length),o.attributes.normal.values.set(t)}if(c.st&&(0,h.Z)(n)){const e=o.attributes.st.values;o.attributes.st.values=new Float32Array(2*m),o.attributes.st.values=e.concat(e)}o.indices=_}else if(a){for(m=f.length/3,_=A.Z.createTypedArray(m,p.length),d=0;d<p.length;d+=3)_[d]=p[d+2],_[d+1]=p[d+1],_[d+2]=p[d];o.indices=_}u.topAndBottom=new y.Z({geometry:o})}let f=o.outerRing,p=_.Z.fromPoints(f,e),m=p.projectPointsOntoPlane(f,oe),g=S.Z.computeWindingOrder2D(m);g===P.Z.CLOCKWISE&&(f=f.slice().reverse());let Z=E.Z.computeWallGeometry(f,n,e,i,r,l);u.walls.push(new y.Z({geometry:Z}));const b=o.holes;for(d=0;d<b.length;d++){let t=b[d];p=_.Z.fromPoints(t,e),m=p.projectPointsOntoPlane(t,oe),g=S.Z.computeWindingOrder2D(m),g===P.Z.COUNTER_CLOCKWISE&&(t=t.slice().reverse()),Z=E.Z.computeWallGeometry(t,n,e,i,r,l),u.walls.push(new y.Z({geometry:Z}))}return u}function se(e){if(l.Z.typeOf.object("options",e),l.Z.typeOf.object("options.polygonHierarchy",e.polygonHierarchy),(0,h.Z)(e.perPositionHeight)&&e.perPositionHeight&&(0,h.Z)(e.height))throw new f.Z("Cannot use both options.perPositionHeight and options.height");if((0,h.Z)(e.arcType)&&e.arcType!==i.Z.GEODESIC&&e.arcType!==i.Z.RHUMB)throw new f.Z("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const t=e.polygonHierarchy,n=(0,d.Z)(e.vertexFormat,I.Z.DEFAULT),o=(0,d.Z)(e.ellipsoid,p.Z.WGS84),r=(0,d.Z)(e.granularity,T.Z.RADIANS_PER_DEGREE),c=(0,d.Z)(e.stRotation,0),u=e.textureCoordinates,m=(0,d.Z)(e.perPositionHeight,!1),_=m&&(0,h.Z)(e.extrudedHeight);let g=(0,d.Z)(e.height,0),Z=(0,d.Z)(e.extrudedHeight,g);if(!_){const e=Math.max(g,Z);Z=Math.min(g,Z),g=e}this._vertexFormat=I.Z.clone(n),this._ellipsoid=p.Z.clone(o),this._granularity=r,this._stRotation=c,this._height=g,this._extrudedHeight=Z,this._closeTop=(0,d.Z)(e.closeTop,!0),this._closeBottom=(0,d.Z)(e.closeBottom,!0),this._polygonHierarchy=t,this._perPositionHeight=m,this._perPositionHeightExtrude=_,this._shadowVolume=(0,d.Z)(e.shadowVolume,!1),this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=(0,d.Z)(e.arcType,i.Z.GEODESIC),this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this._textureCoordinates=u,this.packedLength=E.Z.computeHierarchyPackedLength(t,a.Z)+p.Z.packedLength+I.Z.packedLength+(u?E.Z.computeHierarchyPackedLength(u,s.Z):1)+12}se.fromPositions=function(e){return e=(0,d.Z)(e,d.Z.EMPTY_OBJECT),l.Z.defined("options.positions",e.positions),new se({polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType,textureCoordinates:e.textureCoordinates})},se.pack=function(e,t,n){return l.Z.typeOf.object("value",e),l.Z.defined("array",t),n=(0,d.Z)(n,0),n=E.Z.packPolygonHierarchy(e._polygonHierarchy,t,n,a.Z),p.Z.pack(e._ellipsoid,t,n),n+=p.Z.packedLength,I.Z.pack(e._vertexFormat,t,n),n+=I.Z.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._stRotation,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._closeTop?1:0,t[n++]=e._closeBottom?1:0,t[n++]=e._shadowVolume?1:0,t[n++]=(0,d.Z)(e._offsetAttribute,-1),t[n++]=e._arcType,(0,h.Z)(e._textureCoordinates)?n=E.Z.packPolygonHierarchy(e._textureCoordinates,t,n,s.Z):t[n++]=-1,t[n++]=e.packedLength,t};const ae=p.Z.clone(p.Z.UNIT_SPHERE),ce=new I.Z,le={polygonHierarchy:{}};se.unpack=function(e,t,n){l.Z.defined("array",e),t=(0,d.Z)(t,0);const i=E.Z.unpackPolygonHierarchy(e,t,a.Z);t=i.startingIndex,delete i.startingIndex;const o=p.Z.unpack(e,t,ae);t+=p.Z.packedLength;const r=I.Z.unpack(e,t,ce);t+=I.Z.packedLength;const c=e[t++],u=e[t++],f=e[t++],m=e[t++],_=1===e[t++],g=1===e[t++],Z=1===e[t++],y=1===e[t++],b=1===e[t++],v=e[t++],A=e[t++],T=-1===e[t]?void 0:E.Z.unpackPolygonHierarchy(e,t,s.Z);(0,h.Z)(T)?(t=T.startingIndex,delete T.startingIndex):t++;const w=e[t++];return(0,h.Z)(n)||(n=new se(le)),n._polygonHierarchy=i,n._ellipsoid=p.Z.clone(o,n._ellipsoid),n._vertexFormat=I.Z.clone(r,n._vertexFormat),n._height=c,n._extrudedHeight=u,n._granularity=f,n._stRotation=m,n._perPositionHeightExtrude=_,n._perPositionHeight=g,n._closeTop=Z,n._closeBottom=y,n._shadowVolume=b,n._offsetAttribute=-1===v?void 0:v,n._arcType=A,n._textureCoordinates=T,n.packedLength=w,n},se.computeRectangle=function(e,t){l.Z.typeOf.object("options",e),l.Z.typeOf.object("options.polygonHierarchy",e.polygonHierarchy);const n=(0,d.Z)(e.granularity,T.Z.RADIANS_PER_DEGREE),o=(0,d.Z)(e.arcType,i.Z.GEODESIC);if(o!==i.Z.GEODESIC&&o!==i.Z.RHUMB)throw new f.Z("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const r=e.polygonHierarchy,s=(0,d.Z)(e.ellipsoid,p.Z.WGS84);return te(r.positions,s,o,n,t)},se.createGeometry=function(e){const t=e._vertexFormat,n=e._ellipsoid,i=e._granularity,o=e._stRotation,s=e._polygonHierarchy,a=e._perPositionHeight,c=e._closeTop,l=e._closeBottom,d=e._arcType,f=e._textureCoordinates,p=(0,h.Z)(f);let m=s.positions;if(m.length<3)return;const w=_.Z.fromPoints(m,n),C=E.Z.polygonsFromHierarchy(s,p,w.projectPointsOntoPlane.bind(w),!a,n),x=C.hierarchy,I=C.polygons,P=p?E.Z.polygonsFromHierarchy(f,!0,(function(e){return e}),!1).polygons:void 0;if(0===x.length)return;m=x[0].outerRing;const D=E.Z.computeBoundingRectangle(w.plane.normal,w.projectPointOntoPlane.bind(w),m,o,N),O=[],L=e._height,M=e._extrudedHeight,R={perPositionHeight:a,vertexFormat:t,geometry:void 0,tangentPlane:w,boundingRectangle:D,ellipsoid:n,stRotation:o,textureCoordinates:void 0,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:d};let F;if(e._perPositionHeightExtrude||!T.Z.equalsEpsilon(L,M,0,T.Z.EPSILON2))for(R.extrude=!0,R.top=c,R.bottom=l,R.shadowVolume=e._shadowVolume,R.offsetAttribute=e._offsetAttribute,F=0;F<I.length;F++){const e=re(n,I[F],p?P[F]:void 0,i,x[F],a,c,l,t,d);let o;c&&l?(o=e.topAndBottom,R.geometry=E.Z.scaleToGeodeticHeightExtruded(o.geometry,L,M,n,a)):c?(o=e.topAndBottom,o.geometry.attributes.position.values=S.Z.scaleToGeodeticHeight(o.geometry.attributes.position.values,L,n,!a),R.geometry=o.geometry):l&&(o=e.topAndBottom,o.geometry.attributes.position.values=S.Z.scaleToGeodeticHeight(o.geometry.attributes.position.values,M,n,!0),R.geometry=o.geometry),(c||l)&&(R.wall=!1,o.geometry=J(R),O.push(o));const r=e.walls;R.wall=!0;for(let e=0;e<r.length;e++){const t=r[e];R.geometry=E.Z.scaleToGeodeticHeightExtruded(t.geometry,L,M,n,a),t.geometry=J(R),O.push(t)}}else for(F=0;F<I.length;F++){const o=new y.Z({geometry:E.Z.createGeometryFromPositions(n,I[F],p?P[F]:void 0,i,a,t,d)});if(o.geometry.attributes.position.values=S.Z.scaleToGeodeticHeight(o.geometry.attributes.position.values,L,n,!a),R.geometry=o.geometry,o.geometry=J(R),(0,h.Z)(e._offsetAttribute)){const t=o.geometry.attributes.position.values.length,n=e._offsetAttribute===b.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);o.geometry.attributes.applyOffset=new Z.Z({componentDatatype:u.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}O.push(o)}const B=v.Z.combineInstances(O)[0];B.attributes.position.values=new Float64Array(B.attributes.position.values),B.indices=A.Z.createTypedArray(B.attributes.position.values.length/3,B.indices);const U=B.attributes,k=r.Z.fromVertices(U.position.values);return t.position||delete U.position,new g.Z({attributes:U,indices:B.indices,primitiveType:B.primitiveType,boundingSphere:k,offsetAttribute:e._offsetAttribute})},se.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new se({polygonHierarchy:e._polygonHierarchy,ellipsoid:o,stRotation:e._stRotation,granularity:i,perPositionHeight:!1,extrudedHeight:r,height:s,vertexFormat:I.Z.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})},Object.defineProperties(se.prototype,{rectangle:{get:function(){if(!(0,h.Z)(this._rectangle)){const e=this._polygonHierarchy.positions;this._rectangle=te(e,this._ellipsoid,this._arcType,this._granularity)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return(0,h.Z)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){const t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];const n=e._ellipsoid,i=e._polygonHierarchy.positions,o=e.rectangle;return g.Z._textureCoordinateRotationPoints(i,t,n,o)}(this)),this._textureCoordinateRotationPoints}}});const ue=se},161707:(e,t,n)=>{"use strict";n.d(t,{Z:()=>q});var i=n(730617),o=n(334389),r=n(405254),s=n(660904),a=n(532056),c=n(449809),l=n(234146),u=n(11020),d=n(63354),h=n(161589),f=n(87200),p=n(951775),m=n(263825),_=n(5450),g=n(342209),Z=n(344485),y=n(664288),b=n(798118),v=n(804868),A=n(360846),T=n(125841),w=n(126729);const E={computeHierarchyPackedLength:function(e,t){let n=0;const i=[e];for(;i.length>0;){const e=i.pop();if(!(0,u.Z)(e))continue;n+=2;const o=e.positions,r=e.holes;if((0,u.Z)(o)&&o.length>0&&(n+=o.length*t.packedLength),(0,u.Z)(r)){const e=r.length;for(let t=0;t<e;++t)i.push(r[t])}}return n},packPolygonHierarchy:function(e,t,n,i){const o=[e];for(;o.length>0;){const e=o.pop();if(!(0,u.Z)(e))continue;const r=e.positions,s=e.holes;if(t[n++]=(0,u.Z)(r)?r.length:0,t[n++]=(0,u.Z)(s)?s.length:0,(0,u.Z)(r)){const e=r.length;for(let o=0;o<e;++o,n+=i.packedLength)i.pack(r[o],t,n)}if((0,u.Z)(s)){const e=s.length;for(let t=0;t<e;++t)o.push(s[t])}}return n},unpackPolygonHierarchy:function(e,t,n){const i=e[t++],o=e[t++],r=new Array(i),s=o>0?new Array(o):void 0;for(let o=0;o<i;++o,t+=n.packedLength)r[o]=n.unpack(e,t);for(let i=0;i<o;++i)s[i]=E.unpackPolygonHierarchy(e,t,n),t=s[i].startingIndex,delete s[i].startingIndex;return{positions:r,holes:s,startingIndex:t}}},S=new r.Z;function C(e,t,n,i){return r.Z.subtract(t,e,S),r.Z.multiplyByScalar(S,n/i,S),r.Z.add(e,S,S),[S.x,S.y]}const x=new s.Z;function I(e,t,n,i){return s.Z.subtract(t,e,x),s.Z.multiplyByScalar(x,n/i,x),s.Z.add(e,x,x),[x.x,x.y,x.z]}E.subdivideLineCount=function(e,t,n){const i=s.Z.distance(e,t)/n,o=Math.max(0,Math.ceil(Z.Z.log2(i)));return Math.pow(2,o)};const P=new a.Z,D=new a.Z,O=new a.Z,L=new s.Z,N=new h.Z;E.subdivideRhumbLineCount=function(e,t,n,i){const o=e.cartesianToCartographic(t,P),r=e.cartesianToCartographic(n,D),s=new h.Z(o,r,e).surfaceDistance/i,a=Math.max(0,Math.ceil(Z.Z.log2(s)));return Math.pow(2,a)},E.subdivideTexcoordLine=function(e,t,n,i,o,s){const a=E.subdivideLineCount(n,i,o),c=r.Z.distance(e,t),l=c/a,u=s;u.length=2*a;let d=0;for(let n=0;n<a;n++){const i=C(e,t,n*l,c);u[d++]=i[0],u[d++]=i[1]}return u},E.subdivideLine=function(e,t,n,i){const o=E.subdivideLineCount(e,t,n),r=s.Z.distance(e,t),a=r/o;(0,u.Z)(i)||(i=[]);const c=i;c.length=3*o;let l=0;for(let n=0;n<o;n++){const i=I(e,t,n*a,r);c[l++]=i[0],c[l++]=i[1],c[l++]=i[2]}return c},E.subdivideTexcoordRhumbLine=function(e,t,n,i,o,s,a){const c=n.cartesianToCartographic(i,P),l=n.cartesianToCartographic(o,D);N.setEndPoints(c,l);const u=N.surfaceDistance/s,d=Math.max(0,Math.ceil(Z.Z.log2(u))),h=Math.pow(2,d),f=r.Z.distance(e,t),p=f/h,m=a;m.length=2*h;let _=0;for(let n=0;n<h;n++){const i=C(e,t,n*p,f);m[_++]=i[0],m[_++]=i[1]}return m},E.subdivideRhumbLine=function(e,t,n,i,o){const r=e.cartesianToCartographic(t,P),s=e.cartesianToCartographic(n,D),a=new h.Z(r,s,e),c=a.surfaceDistance/i,l=Math.max(0,Math.ceil(Z.Z.log2(c))),d=Math.pow(2,l),f=a.surfaceDistance/d;(0,u.Z)(o)||(o=[]);const p=o;p.length=3*d;let m=0;for(let t=0;t<d;t++){const n=a.interpolateUsingSurfaceDistance(t*f,O),i=e.cartographicToCartesian(n,L);p[m++]=i.x,p[m++]=i.y,p[m++]=i.z}return p};const M=new s.Z,R=new s.Z,F=new s.Z,B=new s.Z;E.scaleToGeodeticHeightExtruded=function(e,t,n,i,o){i=(0,l.Z)(i,d.Z.WGS84);const r=M;let a=R;const c=F;let h=B;if((0,u.Z)(e)&&(0,u.Z)(e.attributes)&&(0,u.Z)(e.attributes.position)){const l=e.attributes.position.values,u=l.length/2;for(let e=0;e<u;e+=3)s.Z.fromArray(l,e,c),i.geodeticSurfaceNormal(c,r),h=i.scaleToGeodeticSurface(c,h),a=s.Z.multiplyByScalar(r,n,a),a=s.Z.add(h,a,a),l[e+u]=a.x,l[e+1+u]=a.y,l[e+2+u]=a.z,o&&(h=s.Z.clone(c,h)),a=s.Z.multiplyByScalar(r,t,a),a=s.Z.add(h,a,a),l[e]=a.x,l[e+1]=a.y,l[e+2]=a.z}return e},E.polygonOutlinesFromHierarchy=function(e,t,n){const i=[],r=new T.Z;let a,c,l;for(r.enqueue(e);0!==r.length;){const e=r.dequeue();let d=e.positions;if(t)for(l=d.length,a=0;a<l;a++)n.scaleToGeodeticSurface(d[a],d[a]);if(d=(0,o.Z)(d,s.Z.equalsEpsilon,!0),d.length<3)continue;const h=e.holes?e.holes.length:0;for(a=0;a<h;a++){const d=e.holes[a];let h=d.positions;if(t)for(l=h.length,c=0;c<l;++c)n.scaleToGeodeticSurface(h[c],h[c]);if(h=(0,o.Z)(h,s.Z.equalsEpsilon,!0),h.length<3)continue;i.push(h);let f=0;for((0,u.Z)(d.holes)&&(f=d.holes.length),c=0;c<f;c++)r.enqueue(d.holes[c])}i.push(d)}return i},E.polygonsFromHierarchy=function(e,t,n,i,r){const a=[],c=[],l=new T.Z;for(l.enqueue(e);0!==l.length;){const e=l.dequeue();let d=e.positions;const h=e.holes;let f,p;if(i)for(p=d.length,f=0;f<p;f++)r.scaleToGeodeticSurface(d[f],d[f]);if(t||(d=(0,o.Z)(d,s.Z.equalsEpsilon,!0)),d.length<3)continue;let m=n(d);if(!(0,u.Z)(m))continue;const _=[];let g=b.Z.computeWindingOrder2D(m);g===w.Z.CLOCKWISE&&(m.reverse(),d=d.slice().reverse());let Z=d.slice();const y=(0,u.Z)(h)?h.length:0,v=[];let A;for(f=0;f<y;f++){const e=h[f];let a=e.positions;if(i)for(p=a.length,A=0;A<p;++A)r.scaleToGeodeticSurface(a[A],a[A]);if(t||(a=(0,o.Z)(a,s.Z.equalsEpsilon,!0)),a.length<3)continue;const c=n(a);if(!(0,u.Z)(c))continue;g=b.Z.computeWindingOrder2D(c),g===w.Z.CLOCKWISE&&(c.reverse(),a=a.slice().reverse()),v.push(a),_.push(Z.length),Z=Z.concat(a),m=m.concat(c);let d=0;for((0,u.Z)(e.holes)&&(d=e.holes.length),A=0;A<d;A++)l.enqueue(e.holes[A])}a.push({outerRing:d,holes:v}),c.push({positions:Z,positions2D:m,holes:_})}return{hierarchy:a,polygons:c}};const U=new r.Z,k=new s.Z,V=new A.Z,H=new y.Z;E.computeBoundingRectangle=function(e,t,n,i,o){const r=A.Z.fromAxisAngle(e,i,V),a=y.Z.fromQuaternion(r,H);let c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;const f=n.length;for(let e=0;e<f;++e){const i=s.Z.clone(n[e],k);y.Z.multiplyByVector(a,i,i);const o=t(i,U);(0,u.Z)(o)&&(c=Math.min(c,o.x),l=Math.max(l,o.x),d=Math.min(d,o.y),h=Math.max(h,o.y))}return o.x=c,o.y=d,o.width=l-c,o.height=h-d,o},E.createGeometryFromPositions=function(e,t,n,o,s,a,l){let d=b.Z.triangulate(t.positions2D,t.holes);d.length<3&&(d=[0,1,2]);const h=t.positions,m=(0,u.Z)(n),g=m?n.positions:void 0;if(s){const e=h.length,t=new Array(3*e);let n=0;for(let i=0;i<e;i++){const e=h[i];t[n++]=e.x,t[n++]=e.y,t[n++]=e.z}const i={attributes:{position:new p.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:t})},indices:d,primitiveType:v.Z.TRIANGLES};m&&(i.attributes.st=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:r.Z.packArray(g)}));const o=new f.Z(i);return a.normal?_.Z.computeNormal(o):o}return l===i.Z.GEODESIC?b.Z.computeSubdivision(e,h,d,g,o):l===i.Z.RHUMB?b.Z.computeRhumbLineSubdivision(e,h,d,g,o):void 0};const z=[],G=[],j=new s.Z,W=new s.Z;E.computeWallGeometry=function(e,t,n,o,r,a){let l,d,h,_,y,b,A,T,w,S=e.length,C=0,x=0;const I=(0,u.Z)(t),P=I?t.positions:void 0;if(r)for(d=3*S*2,l=new Array(2*d),I&&(w=2*S*2,T=new Array(2*w)),h=0;h<S;h++)_=e[h],y=e[(h+1)%S],l[C]=l[C+d]=_.x,++C,l[C]=l[C+d]=_.y,++C,l[C]=l[C+d]=_.z,++C,l[C]=l[C+d]=y.x,++C,l[C]=l[C+d]=y.y,++C,l[C]=l[C+d]=y.z,++C,I&&(b=P[h],A=P[(h+1)%S],T[x]=T[x+w]=b.x,++x,T[x]=T[x+w]=b.y,++x,T[x]=T[x+w]=A.x,++x,T[x]=T[x+w]=A.y,++x);else{const t=Z.Z.chordLength(o,n.maximumRadius);let r=0;if(a===i.Z.GEODESIC)for(h=0;h<S;h++)r+=E.subdivideLineCount(e[h],e[(h+1)%S],t);else if(a===i.Z.RHUMB)for(h=0;h<S;h++)r+=E.subdivideRhumbLineCount(n,e[h],e[(h+1)%S],t);for(d=3*(r+S),l=new Array(2*d),I&&(w=2*(r+S),T=new Array(2*w)),h=0;h<S;h++){let o,r;_=e[h],y=e[(h+1)%S],I&&(b=P[h],A=P[(h+1)%S]),a===i.Z.GEODESIC?(o=E.subdivideLine(_,y,t,G),I&&(r=E.subdivideTexcoordLine(b,A,_,y,t,z))):a===i.Z.RHUMB&&(o=E.subdivideRhumbLine(n,_,y,t,G),I&&(r=E.subdivideTexcoordRhumbLine(b,A,n,_,y,t,z)));const s=o.length;for(let e=0;e<s;++e,++C)l[C]=o[e],l[C+d]=o[e];if(l[C]=y.x,l[C+d]=y.x,++C,l[C]=y.y,l[C+d]=y.y,++C,l[C]=y.z,l[C+d]=y.z,++C,I){const e=r.length;for(let t=0;t<e;++t,++x)T[x]=r[t],T[x+w]=r[t];T[x]=A.x,T[x+w]=A.x,++x,T[x]=A.y,T[x+w]=A.y,++x}}}S=l.length;const D=g.Z.createTypedArray(S/3,S-6*e.length);let O=0;for(S/=6,h=0;h<S;h++){const e=h,t=e+1,n=e+S,i=n+1;_=s.Z.fromArray(l,3*e,j),y=s.Z.fromArray(l,3*t,W),s.Z.equalsEpsilon(_,y,Z.Z.EPSILON10,Z.Z.EPSILON10)||(D[O++]=e,D[O++]=n,D[O++]=t,D[O++]=t,D[O++]=n,D[O++]=i)}const L={attributes:new m.Z({position:new p.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:l})}),indices:D,primitiveType:v.Z.TRIANGLES};return I&&(L.attributes.st=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:T})),new f.Z(L)};const q=E},628254:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(730617),o=n(762031),r=n(660904),s=n(790087),a=n(449809),c=n(234146),l=n(11020),u=n(765153),d=n(63354),h=n(573777),f=n(87200),p=n(951775),m=n(263825),_=n(156905),g=n(61885),Z=n(5450),y=n(342209),b=n(344485),v=n(161707),A=n(798118),T=n(804868),w=n(126729);const E=[],S=[];function C(e,t,n,o,r){const s=h.Z.fromPoints(t,e).projectPointsOntoPlane(t,E);let c,l;A.Z.computeWindingOrder2D(s)===w.Z.CLOCKWISE&&(s.reverse(),t=t.slice().reverse());let u=t.length,d=0;if(o)for(c=new Float64Array(2*u*3),l=0;l<u;l++){const e=t[l],n=t[(l+1)%u];c[d++]=e.x,c[d++]=e.y,c[d++]=e.z,c[d++]=n.x,c[d++]=n.y,c[d++]=n.z}else{let o=0;if(r===i.Z.GEODESIC)for(l=0;l<u;l++)o+=v.Z.subdivideLineCount(t[l],t[(l+1)%u],n);else if(r===i.Z.RHUMB)for(l=0;l<u;l++)o+=v.Z.subdivideRhumbLineCount(e,t[l],t[(l+1)%u],n);for(c=new Float64Array(3*o),l=0;l<u;l++){let o;r===i.Z.GEODESIC?o=v.Z.subdivideLine(t[l],t[(l+1)%u],n,S):r===i.Z.RHUMB&&(o=v.Z.subdivideRhumbLine(e,t[l],t[(l+1)%u],n,S));const s=o.length;for(let e=0;e<s;++e)c[d++]=o[e]}}u=c.length/3;const g=2*u,Z=y.Z.createTypedArray(u,g);for(d=0,l=0;l<u-1;l++)Z[d++]=l,Z[d++]=l+1;return Z[d++]=u-1,Z[d++]=0,new _.Z({geometry:new f.Z({attributes:new m.Z({position:new p.Z({componentDatatype:a.Z.DOUBLE,componentsPerAttribute:3,values:c})}),indices:Z,primitiveType:T.Z.LINES})})}function x(e,t,n,o,r){const s=h.Z.fromPoints(t,e).projectPointsOntoPlane(t,E);let c,l;A.Z.computeWindingOrder2D(s)===w.Z.CLOCKWISE&&(s.reverse(),t=t.slice().reverse());let u=t.length;const d=new Array(u);let g=0;if(o)for(c=new Float64Array(2*u*3*2),l=0;l<u;++l){d[l]=g/3;const e=t[l],n=t[(l+1)%u];c[g++]=e.x,c[g++]=e.y,c[g++]=e.z,c[g++]=n.x,c[g++]=n.y,c[g++]=n.z}else{let o=0;if(r===i.Z.GEODESIC)for(l=0;l<u;l++)o+=v.Z.subdivideLineCount(t[l],t[(l+1)%u],n);else if(r===i.Z.RHUMB)for(l=0;l<u;l++)o+=v.Z.subdivideRhumbLineCount(e,t[l],t[(l+1)%u],n);for(c=new Float64Array(3*o*2),l=0;l<u;++l){let o;d[l]=g/3,r===i.Z.GEODESIC?o=v.Z.subdivideLine(t[l],t[(l+1)%u],n,S):r===i.Z.RHUMB&&(o=v.Z.subdivideRhumbLine(e,t[l],t[(l+1)%u],n,S));const s=o.length;for(let e=0;e<s;++e)c[g++]=o[e]}}u=c.length/6;const Z=d.length,b=2*(2*u+Z),C=y.Z.createTypedArray(u+Z,b);for(g=0,l=0;l<u;++l)C[g++]=l,C[g++]=(l+1)%u,C[g++]=l+u,C[g++]=(l+1)%u+u;for(l=0;l<Z;l++){const e=d[l];C[g++]=e,C[g++]=e+u}return new _.Z({geometry:new f.Z({attributes:new m.Z({position:new p.Z({componentDatatype:a.Z.DOUBLE,componentsPerAttribute:3,values:c})}),indices:C,primitiveType:T.Z.LINES})})}function I(e){if(s.Z.typeOf.object("options",e),s.Z.typeOf.object("options.polygonHierarchy",e.polygonHierarchy),e.perPositionHeight&&(0,l.Z)(e.height))throw new u.Z("Cannot use both options.perPositionHeight and options.height");if((0,l.Z)(e.arcType)&&e.arcType!==i.Z.GEODESIC&&e.arcType!==i.Z.RHUMB)throw new u.Z("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const t=e.polygonHierarchy,n=(0,c.Z)(e.ellipsoid,d.Z.WGS84),o=(0,c.Z)(e.granularity,b.Z.RADIANS_PER_DEGREE),a=(0,c.Z)(e.perPositionHeight,!1),h=a&&(0,l.Z)(e.extrudedHeight),f=(0,c.Z)(e.arcType,i.Z.GEODESIC);let p=(0,c.Z)(e.height,0),m=(0,c.Z)(e.extrudedHeight,p);if(!h){const e=Math.max(p,m);m=Math.min(p,m),p=e}this._ellipsoid=d.Z.clone(n),this._granularity=o,this._height=p,this._extrudedHeight=m,this._arcType=f,this._polygonHierarchy=t,this._perPositionHeight=a,this._perPositionHeightExtrude=h,this._offsetAttribute=e.offsetAttribute,this._workerName="createPolygonOutlineGeometry",this.packedLength=v.Z.computeHierarchyPackedLength(t,r.Z)+d.Z.packedLength+8}I.pack=function(e,t,n){return s.Z.typeOf.object("value",e),s.Z.defined("array",t),n=(0,c.Z)(n,0),n=v.Z.packPolygonHierarchy(e._polygonHierarchy,t,n,r.Z),d.Z.pack(e._ellipsoid,t,n),n+=d.Z.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._arcType,t[n++]=(0,c.Z)(e._offsetAttribute,-1),t[n]=e.packedLength,t};const P=d.Z.clone(d.Z.UNIT_SPHERE),D={polygonHierarchy:{}};I.unpack=function(e,t,n){s.Z.defined("array",e),t=(0,c.Z)(t,0);const i=v.Z.unpackPolygonHierarchy(e,t,r.Z);t=i.startingIndex,delete i.startingIndex;const o=d.Z.unpack(e,t,P);t+=d.Z.packedLength;const a=e[t++],u=e[t++],h=e[t++],f=1===e[t++],p=1===e[t++],m=e[t++],_=e[t++],g=e[t];return(0,l.Z)(n)||(n=new I(D)),n._polygonHierarchy=i,n._ellipsoid=d.Z.clone(o,n._ellipsoid),n._height=a,n._extrudedHeight=u,n._granularity=h,n._perPositionHeight=p,n._perPositionHeightExtrude=f,n._arcType=m,n._offsetAttribute=-1===_?void 0:_,n.packedLength=g,n},I.fromPositions=function(e){return e=(0,c.Z)(e,c.Z.EMPTY_OBJECT),s.Z.defined("options.positions",e.positions),new I({polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,arcType:e.arcType,offsetAttribute:e.offsetAttribute})},I.createGeometry=function(e){const t=e._ellipsoid,n=e._granularity,i=e._polygonHierarchy,r=e._perPositionHeight,s=e._arcType,c=v.Z.polygonOutlinesFromHierarchy(i,!r,t);if(0===c.length)return;let u;const d=[],h=b.Z.chordLength(n,t.maximumRadius),m=e._height,_=e._extrudedHeight;let y,T;if(e._perPositionHeightExtrude||!b.Z.equalsEpsilon(m,_,0,b.Z.EPSILON2))for(T=0;T<c.length;T++){if(u=x(t,c[T],h,r,s),u.geometry=v.Z.scaleToGeodeticHeightExtruded(u.geometry,m,_,t,r),(0,l.Z)(e._offsetAttribute)){const t=u.geometry.attributes.position.values.length/3;let n=new Uint8Array(t);e._offsetAttribute===g.Z.TOP?n=n.fill(1,0,t/2):(y=e._offsetAttribute===g.Z.NONE?0:1,n=n.fill(y)),u.geometry.attributes.applyOffset=new p.Z({componentDatatype:a.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}d.push(u)}else for(T=0;T<c.length;T++){if(u=C(t,c[T],h,r,s),u.geometry.attributes.position.values=A.Z.scaleToGeodeticHeight(u.geometry.attributes.position.values,m,t,!r),(0,l.Z)(e._offsetAttribute)){const t=u.geometry.attributes.position.values.length;y=e._offsetAttribute===g.Z.NONE?0:1;const n=new Uint8Array(t/3).fill(y);u.geometry.attributes.applyOffset=new p.Z({componentDatatype:a.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}d.push(u)}const w=Z.Z.combineInstances(d)[0],E=o.Z.fromVertices(w.attributes.position.values);return new f.Z({attributes:w.attributes,indices:w.indices,primitiveType:w.primitiveType,boundingSphere:E,offsetAttribute:e._offsetAttribute})};const O=I},798118:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var i=n(509187),o=n(405254),r=n(660904),s=n(532056),a=n(790087),c=n(449809),l=n(234146),u=n(11020),d=n(63354),h=n(161589),f=n(87200),p=n(951775),m=n(344485),_=n(804868),g=n(126729);const Z=new r.Z,y=new r.Z,b={computeArea2D:function(e){a.Z.defined("positions",e),a.Z.typeOf.number.greaterThanOrEquals("positions.length",e.length,3);const t=e.length;let n=0;for(let i=t-1,o=0;o<t;i=o++){const t=e[i],r=e[o];n+=t.x*r.y-r.x*t.y}return.5*n},computeWindingOrder2D:function(e){return b.computeArea2D(e)>0?g.Z.COUNTER_CLOCKWISE:g.Z.CLOCKWISE},triangulate:function(e,t){a.Z.defined("positions",e);const n=o.Z.packArray(e);return i(n,t,2)}},v=new r.Z,A=new r.Z,T=new r.Z,w=new r.Z,E=new r.Z,S=new r.Z,C=new r.Z,x=new o.Z,I=new o.Z,P=new o.Z,D=new o.Z;b.computeSubdivision=function(e,t,n,i,s){s=(0,l.Z)(s,m.Z.RADIANS_PER_DEGREE);const d=(0,u.Z)(i);a.Z.typeOf.object("ellipsoid",e),a.Z.defined("positions",t),a.Z.defined("indices",n),a.Z.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),a.Z.typeOf.number.equals("indices.length % 3","0",n.length%3,0),a.Z.typeOf.number.greaterThan("granularity",s,0);const h=n.slice(0);let g;const Z=t.length,y=new Array(3*Z),b=new Array(2*Z);let O=0,L=0;for(g=0;g<Z;g++){const e=t[g];if(y[O++]=e.x,y[O++]=e.y,y[O++]=e.z,d){const e=i[g];b[L++]=e.x,b[L++]=e.y}}const N=[],M={},R=e.maximumRadius,F=m.Z.chordLength(s,R),B=F*F;for(;h.length>0;){const e=h.pop(),t=h.pop(),n=h.pop(),i=r.Z.fromArray(y,3*n,v),s=r.Z.fromArray(y,3*t,A),a=r.Z.fromArray(y,3*e,T);let c,l,f;d&&(c=o.Z.fromArray(b,2*n,x),l=o.Z.fromArray(b,2*t,I),f=o.Z.fromArray(b,2*e,P));const p=r.Z.multiplyByScalar(r.Z.normalize(i,w),R,w),m=r.Z.multiplyByScalar(r.Z.normalize(s,E),R,E),_=r.Z.multiplyByScalar(r.Z.normalize(a,S),R,S),Z=r.Z.magnitudeSquared(r.Z.subtract(p,m,C)),O=r.Z.magnitudeSquared(r.Z.subtract(m,_,C)),L=r.Z.magnitudeSquared(r.Z.subtract(_,p,C)),F=Math.max(Z,O,L);let U,k,V;F>B?Z===F?(U=`${Math.min(n,t)} ${Math.max(n,t)}`,g=M[U],(0,u.Z)(g)||(k=r.Z.add(i,s,C),r.Z.multiplyByScalar(k,.5,k),y.push(k.x,k.y,k.z),g=y.length/3-1,M[U]=g,d&&(V=o.Z.add(c,l,D),o.Z.multiplyByScalar(V,.5,V),b.push(V.x,V.y))),h.push(n,g,e),h.push(g,t,e)):O===F?(U=`${Math.min(t,e)} ${Math.max(t,e)}`,g=M[U],(0,u.Z)(g)||(k=r.Z.add(s,a,C),r.Z.multiplyByScalar(k,.5,k),y.push(k.x,k.y,k.z),g=y.length/3-1,M[U]=g,d&&(V=o.Z.add(l,f,D),o.Z.multiplyByScalar(V,.5,V),b.push(V.x,V.y))),h.push(t,g,n),h.push(g,e,n)):L===F&&(U=`${Math.min(e,n)} ${Math.max(e,n)}`,g=M[U],(0,u.Z)(g)||(k=r.Z.add(a,i,C),r.Z.multiplyByScalar(k,.5,k),y.push(k.x,k.y,k.z),g=y.length/3-1,M[U]=g,d&&(V=o.Z.add(f,c,D),o.Z.multiplyByScalar(V,.5,V),b.push(V.x,V.y))),h.push(e,g,t),h.push(g,n,t)):(N.push(n),N.push(t),N.push(e))}const U={attributes:{position:new p.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:y})},indices:N,primitiveType:_.Z.TRIANGLES};return d&&(U.attributes.st=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:b})),new f.Z(U)};const O=new s.Z,L=new s.Z,N=new s.Z,M=new s.Z;b.computeRhumbLineSubdivision=function(e,t,n,i,s){s=(0,l.Z)(s,m.Z.RADIANS_PER_DEGREE);const d=(0,u.Z)(i);a.Z.typeOf.object("ellipsoid",e),a.Z.defined("positions",t),a.Z.defined("indices",n),a.Z.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),a.Z.typeOf.number.equals("indices.length % 3","0",n.length%3,0),a.Z.typeOf.number.greaterThan("granularity",s,0);const g=n.slice(0);let Z;const y=t.length,b=new Array(3*y),w=new Array(2*y);let E=0,S=0;for(Z=0;Z<y;Z++){const e=t[Z];if(b[E++]=e.x,b[E++]=e.y,b[E++]=e.z,d){const e=i[Z];w[S++]=e.x,w[S++]=e.y}}const R=[],F={},B=e.maximumRadius,U=m.Z.chordLength(s,B),k=new h.Z(void 0,void 0,e),V=new h.Z(void 0,void 0,e),H=new h.Z(void 0,void 0,e);for(;g.length>0;){const t=g.pop(),n=g.pop(),i=g.pop(),s=r.Z.fromArray(b,3*i,v),a=r.Z.fromArray(b,3*n,A),c=r.Z.fromArray(b,3*t,T);let l,h,f;d&&(l=o.Z.fromArray(w,2*i,x),h=o.Z.fromArray(w,2*n,I),f=o.Z.fromArray(w,2*t,P));const p=e.cartesianToCartographic(s,O),m=e.cartesianToCartographic(a,L),_=e.cartesianToCartographic(c,N);k.setEndPoints(p,m);const y=k.surfaceDistance;V.setEndPoints(m,_);const E=V.surfaceDistance;H.setEndPoints(_,p);const S=H.surfaceDistance,B=Math.max(y,E,S);let z,G,j,W,q;B>U?y===B?(z=`${Math.min(i,n)} ${Math.max(i,n)}`,Z=F[z],(0,u.Z)(Z)||(G=k.interpolateUsingFraction(.5,M),j=.5*(p.height+m.height),W=r.Z.fromRadians(G.longitude,G.latitude,j,e,C),b.push(W.x,W.y,W.z),Z=b.length/3-1,F[z]=Z,d&&(q=o.Z.add(l,h,D),o.Z.multiplyByScalar(q,.5,q),w.push(q.x,q.y))),g.push(i,Z,t),g.push(Z,n,t)):E===B?(z=`${Math.min(n,t)} ${Math.max(n,t)}`,Z=F[z],(0,u.Z)(Z)||(G=V.interpolateUsingFraction(.5,M),j=.5*(m.height+_.height),W=r.Z.fromRadians(G.longitude,G.latitude,j,e,C),b.push(W.x,W.y,W.z),Z=b.length/3-1,F[z]=Z,d&&(q=o.Z.add(h,f,D),o.Z.multiplyByScalar(q,.5,q),w.push(q.x,q.y))),g.push(n,Z,i),g.push(Z,t,i)):S===B&&(z=`${Math.min(t,i)} ${Math.max(t,i)}`,Z=F[z],(0,u.Z)(Z)||(G=H.interpolateUsingFraction(.5,M),j=.5*(_.height+p.height),W=r.Z.fromRadians(G.longitude,G.latitude,j,e,C),b.push(W.x,W.y,W.z),Z=b.length/3-1,F[z]=Z,d&&(q=o.Z.add(f,l,D),o.Z.multiplyByScalar(q,.5,q),w.push(q.x,q.y))),g.push(t,Z,n),g.push(Z,i,n)):(R.push(i),R.push(n),R.push(t))}const z={attributes:{position:new p.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:b})},indices:R,primitiveType:_.Z.TRIANGLES};return d&&(z.attributes.st=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:w})),new f.Z(z)},b.scaleToGeodeticHeight=function(e,t,n,i){n=(0,l.Z)(n,d.Z.WGS84);let o=Z,s=y;if(t=(0,l.Z)(t,0),i=(0,l.Z)(i,!0),(0,u.Z)(e)){const a=e.length;for(let c=0;c<a;c+=3)r.Z.fromArray(e,c,s),i&&(s=n.scaleToGeodeticSurface(s,s)),0!==t&&(o=n.geodeticSurfaceNormal(s,o),r.Z.multiplyByScalar(o,t,o),r.Z.add(s,o,s)),e[c]=s.x,e[c+1]=s.y,e[c+2]=s.z}return e};const R=b},935173:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(730617),o=n(334389),r=n(762031),s=n(660904),a=n(35961),c=n(449809),l=n(234146),u=n(11020),d=n(765153),h=n(63354),f=n(87200),p=n(951775),m=n(263825),_=n(651530),g=n(342209),Z=n(344485),y=n(151793),b=n(804868),v=n(427183);const A=[];function T(e,t,n,i,o){const r=A;let s;r.length=o;const c=n.red,l=n.green,u=n.blue,d=n.alpha,h=i.red,f=i.green,p=i.blue,m=i.alpha;if(a.Z.equals(n,i)){for(s=0;s<o;s++)r[s]=a.Z.clone(n);return r}const _=(h-c)/o,g=(f-l)/o,Z=(p-u)/o,y=(m-d)/o;for(s=0;s<o;s++)r[s]=new a.Z(c+s*_,l+s*g,u+s*Z,d+s*y);return r}function w(e){const t=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).positions,n=e.colors,o=(0,l.Z)(e.width,1),r=(0,l.Z)(e.colorsPerVertex,!1);if(!(0,u.Z)(t)||t.length<2)throw new d.Z("At least two positions are required.");if("number"!=typeof o)throw new d.Z("width must be a number");if((0,u.Z)(n)&&(r&&n.length<t.length||!r&&n.length<t.length-1))throw new d.Z("colors has an invalid length.");this._positions=t,this._colors=n,this._width=o,this._colorsPerVertex=r,this._vertexFormat=v.Z.clone((0,l.Z)(e.vertexFormat,v.Z.DEFAULT)),this._arcType=(0,l.Z)(e.arcType,i.Z.GEODESIC),this._granularity=(0,l.Z)(e.granularity,Z.Z.RADIANS_PER_DEGREE),this._ellipsoid=h.Z.clone((0,l.Z)(e.ellipsoid,h.Z.WGS84)),this._workerName="createPolylineGeometry";let c=1+t.length*s.Z.packedLength;c+=(0,u.Z)(n)?1+n.length*a.Z.packedLength:1,this.packedLength=c+h.Z.packedLength+v.Z.packedLength+4}w.pack=function(e,t,n){if(!(0,u.Z)(e))throw new d.Z("value is required");if(!(0,u.Z)(t))throw new d.Z("array is required");let i;n=(0,l.Z)(n,0);const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=s.Z.packedLength)s.Z.pack(o[i],t,n);const c=e._colors;for(r=(0,u.Z)(c)?c.length:0,t[n++]=r,i=0;i<r;++i,n+=a.Z.packedLength)a.Z.pack(c[i],t,n);return h.Z.pack(e._ellipsoid,t,n),n+=h.Z.packedLength,v.Z.pack(e._vertexFormat,t,n),n+=v.Z.packedLength,t[n++]=e._width,t[n++]=e._colorsPerVertex?1:0,t[n++]=e._arcType,t[n]=e._granularity,t};const E=h.Z.clone(h.Z.UNIT_SPHERE),S=new v.Z,C={positions:void 0,colors:void 0,ellipsoid:E,vertexFormat:S,width:void 0,colorsPerVertex:void 0,arcType:void 0,granularity:void 0};w.unpack=function(e,t,n){if(!(0,u.Z)(e))throw new d.Z("array is required");let i;t=(0,l.Z)(t,0);let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=s.Z.packedLength)r[i]=s.Z.unpack(e,t);o=e[t++];const c=o>0?new Array(o):void 0;for(i=0;i<o;++i,t+=a.Z.packedLength)c[i]=a.Z.unpack(e,t);const f=h.Z.unpack(e,t,E);t+=h.Z.packedLength;const p=v.Z.unpack(e,t,S);t+=v.Z.packedLength;const m=e[t++],_=1===e[t++],g=e[t++],Z=e[t];return(0,u.Z)(n)?(n._positions=r,n._colors=c,n._ellipsoid=h.Z.clone(f,n._ellipsoid),n._vertexFormat=v.Z.clone(p,n._vertexFormat),n._width=m,n._colorsPerVertex=_,n._arcType=g,n._granularity=Z,n):(C.positions=r,C.colors=c,C.width=m,C.colorsPerVertex=_,C.arcType=g,C.granularity=Z,new w(C))};const x=new s.Z,I=new s.Z,P=new s.Z,D=new s.Z;w.createGeometry=function(e){const t=e._width,n=e._vertexFormat;let l=e._colors;const d=e._colorsPerVertex,h=e._arcType,v=e._granularity,w=e._ellipsoid;let E,S,C;const O=[];let L=(0,o.Z)(e._positions,s.Z.equalsEpsilon,!1,O);if((0,u.Z)(l)&&O.length>0){let e=0,t=O[0];l=l.filter((function(n,i){let o=!1;return o=d?i===t||0===i&&1===t:i+1===t,!o||(e++,t=O[e],!1)}))}let N=L.length;if(N<2||t<=0)return;if(h===i.Z.GEODESIC||h===i.Z.RHUMB){let e,t;h===i.Z.GEODESIC?(e=Z.Z.chordLength(v,w.maximumRadius),t=y.Z.numberOfPoints):(e=v,t=y.Z.numberOfPointsRhumbLine);const n=y.Z.extractHeights(L,w);if((0,u.Z)(l)){let n=1;for(E=0;E<N-1;++E)n+=t(L[E],L[E+1],e);const i=new Array(n);let o=0;for(E=0;E<N-1;++E){const r=L[E],s=L[E+1],c=l[E],u=t(r,s,e);if(d&&E<n){const e=T(0,0,c,l[E+1],u),t=e.length;for(S=0;S<t;++S)i[o++]=e[S]}else for(S=0;S<u;++S)i[o++]=a.Z.clone(c)}i[o]=a.Z.clone(l[l.length-1]),l=i,A.length=0}L=h===i.Z.GEODESIC?y.Z.generateCartesianArc({positions:L,minDistance:e,ellipsoid:w,height:n}):y.Z.generateCartesianRhumbArc({positions:L,granularity:e,ellipsoid:w,height:n})}N=L.length;const M=4*N-4,R=new Float64Array(3*M),F=new Float64Array(3*M),B=new Float64Array(3*M),U=new Float32Array(2*M),k=n.st?new Float32Array(2*M):void 0,V=(0,u.Z)(l)?new Uint8Array(4*M):void 0;let H,z=0,G=0,j=0,W=0;for(S=0;S<N;++S){let e,i;0===S?(H=x,s.Z.subtract(L[0],L[1],H),s.Z.add(L[0],H,H)):H=L[S-1],s.Z.clone(H,P),s.Z.clone(L[S],I),S===N-1?(H=x,s.Z.subtract(L[N-1],L[N-2],H),s.Z.add(L[N-1],H,H)):H=L[S+1],s.Z.clone(H,D),(0,u.Z)(V)&&(e=0===S||d?l[S]:l[S-1],S!==N-1&&(i=l[S]));const o=S===N-1?2:4;for(C=0===S?2:0;C<o;++C){s.Z.pack(I,R,z),s.Z.pack(P,F,z),s.Z.pack(D,B,z),z+=3;const o=C-2<0?-1:1;if(U[G++]=C%2*2-1,U[G++]=o*t,n.st&&(k[j++]=S/(N-1),k[j++]=Math.max(U[G-2],0)),(0,u.Z)(V)){const t=C<2?e:i;V[W++]=a.Z.floatToByte(t.red),V[W++]=a.Z.floatToByte(t.green),V[W++]=a.Z.floatToByte(t.blue),V[W++]=a.Z.floatToByte(t.alpha)}}}const q=new m.Z;q.position=new p.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:R}),q.prevPosition=new p.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:F}),q.nextPosition=new p.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:B}),q.expandAndWidth=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:U}),n.st&&(q.st=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:k})),(0,u.Z)(V)&&(q.color=new p.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:4,values:V,normalize:!0}));const Y=g.Z.createTypedArray(M,6*N-6);let X=0,J=0;const Q=N-1;for(S=0;S<Q;++S)Y[J++]=X,Y[J++]=X+2,Y[J++]=X+1,Y[J++]=X+1,Y[J++]=X+2,Y[J++]=X+3,X+=4;return new f.Z({attributes:q,indices:Y,primitiveType:b.Z.TRIANGLES,boundingSphere:r.Z.fromPoints(L),geometryType:_.Z.POLYLINES})};const O=w},151793:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var i=n(660904),o=n(532056),r=n(234146),s=n(11020),a=n(765153),c=n(63354),l=n(835189),u=n(161589),d=n(998537),h=n(344485),f=n(659635),p=n(341633);const m={numberOfPoints:function(e,t,n){const o=i.Z.distance(e,t);return Math.ceil(o/n)},numberOfPointsRhumbLine:function(e,t,n){const i=Math.pow(e.longitude-t.longitude,2)+Math.pow(e.latitude-t.latitude,2);return Math.max(1,Math.ceil(Math.sqrt(i/(n*n))))}},_=new o.Z;m.extractHeights=function(e,t){const n=e.length,i=new Array(n);for(let o=0;o<n;o++){const n=e[o];i[o]=t.cartesianToCartographic(n,_).height}return i};const g=new f.Z,Z=new i.Z,y=new i.Z,b=new p.Z(i.Z.UNIT_X,0),v=new i.Z,A=new p.Z(i.Z.UNIT_X,0),T=new i.Z,w=new i.Z,E=[];function S(e,t,n){const i=E;let o;if(i.length=e,t===n){for(o=0;o<e;o++)i[o]=t;return i}const r=(n-t)/e;for(o=0;o<e;o++){const e=t+o*r;i[o]=e}return i}const C=new o.Z,x=new o.Z,I=new i.Z,P=new i.Z,D=new i.Z,O=new l.Z;let L=new u.Z;function N(e,t,n,o,r,s,a,c){const l=o.scaleToGeodeticSurface(e,P),u=o.scaleToGeodeticSurface(t,D),d=m.numberOfPoints(e,t,n),h=o.cartesianToCartographic(l,C),f=o.cartesianToCartographic(u,x),p=S(d,r,s);O.setEndPoints(h,f);const _=O.surfaceDistance/d;let g=c;h.height=r;let Z=o.cartographicToCartesian(h,I);i.Z.pack(Z,a,g),g+=3;for(let e=1;e<d;e++){const t=O.interpolateUsingSurfaceDistance(e*_,x);t.height=p[e],Z=o.cartographicToCartesian(t,I),i.Z.pack(Z,a,g),g+=3}return g}function M(e,t,n,o,r,s,a,c){const l=o.cartesianToCartographic(e,C),d=o.cartesianToCartographic(t,x),h=m.numberOfPointsRhumbLine(l,d,n);l.height=0,d.height=0;const f=S(h,r,s);L.ellipsoid.equals(o)||(L=new u.Z(void 0,void 0,o)),L.setEndPoints(l,d);const p=L.surfaceDistance/h;let _=c;l.height=r;let g=o.cartographicToCartesian(l,I);i.Z.pack(g,a,_),_+=3;for(let e=1;e<h;e++){const t=L.interpolateUsingSurfaceDistance(e*p,x);t.height=f[e],g=o.cartographicToCartesian(t,I),i.Z.pack(g,a,_),_+=3}return _}m.wrapLongitude=function(e,t){const n=[],o=[];if((0,s.Z)(e)&&e.length>0){t=(0,r.Z)(t,f.Z.IDENTITY);const a=f.Z.inverseTransformation(t,g),c=f.Z.multiplyByPoint(a,i.Z.ZERO,Z),l=i.Z.normalize(f.Z.multiplyByPointAsVector(a,i.Z.UNIT_Y,y),y),u=p.Z.fromPointNormal(c,l,b),h=i.Z.normalize(f.Z.multiplyByPointAsVector(a,i.Z.UNIT_X,v),v),m=p.Z.fromPointNormal(c,h,A);let _=1;n.push(i.Z.clone(e[0]));let E=n[0];const S=e.length;for(let t=1;t<S;++t){const r=e[t];if(p.Z.getPointDistance(m,E)<0||p.Z.getPointDistance(m,r)<0){const e=d.Z.lineSegmentPlane(E,r,u,T);if((0,s.Z)(e)){const t=i.Z.multiplyByScalar(l,5e-9,w);p.Z.getPointDistance(u,E)<0&&i.Z.negate(t,t),n.push(i.Z.add(e,t,new i.Z)),o.push(_+1),i.Z.negate(t,t),n.push(i.Z.add(e,t,new i.Z)),_=1}}n.push(i.Z.clone(e[t])),_++,E=r}o.push(_)}return{positions:n,lengths:o}},m.generateArc=function(e){(0,s.Z)(e)||(e={});const t=e.positions;if(!(0,s.Z)(t))throw new a.Z("options.positions is required.");const n=t.length,o=(0,r.Z)(e.ellipsoid,c.Z.WGS84);let l=(0,r.Z)(e.height,0);const u=Array.isArray(l);if(n<1)return[];if(1===n){const e=o.scaleToGeodeticSurface(t[0],P);if(l=u?l[0]:l,0!==l){const t=o.geodeticSurfaceNormal(e,I);i.Z.multiplyByScalar(t,l,t),i.Z.add(e,t,e)}return[e.x,e.y,e.z]}let d=e.minDistance;if(!(0,s.Z)(d)){const t=(0,r.Z)(e.granularity,h.Z.RADIANS_PER_DEGREE);d=h.Z.chordLength(t,o.maximumRadius)}let f,p=0;for(f=0;f<n-1;f++)p+=m.numberOfPoints(t[f],t[f+1],d);const _=3*(p+1),g=new Array(_);let Z=0;for(f=0;f<n-1;f++)Z=N(t[f],t[f+1],d,o,u?l[f]:l,u?l[f+1]:l,g,Z);E.length=0;const y=t[n-1],b=o.cartesianToCartographic(y,C);b.height=u?l[n-1]:l;const v=o.cartographicToCartesian(b,I);return i.Z.pack(v,g,_-3),g};const R=new o.Z,F=new o.Z;m.generateRhumbArc=function(e){(0,s.Z)(e)||(e={});const t=e.positions;if(!(0,s.Z)(t))throw new a.Z("options.positions is required.");const n=t.length,l=(0,r.Z)(e.ellipsoid,c.Z.WGS84);let u=(0,r.Z)(e.height,0);const d=Array.isArray(u);if(n<1)return[];if(1===n){const e=l.scaleToGeodeticSurface(t[0],P);if(u=d?u[0]:u,0!==u){const t=l.geodeticSurfaceNormal(e,I);i.Z.multiplyByScalar(t,u,t),i.Z.add(e,t,e)}return[e.x,e.y,e.z]}const f=(0,r.Z)(e.granularity,h.Z.RADIANS_PER_DEGREE);let p,_,g=0,Z=l.cartesianToCartographic(t[0],R);for(p=0;p<n-1;p++)_=l.cartesianToCartographic(t[p+1],F),g+=m.numberOfPointsRhumbLine(Z,_,f),Z=o.Z.clone(_,R);const y=3*(g+1),b=new Array(y);let v=0;for(p=0;p<n-1;p++)v=M(t[p],t[p+1],f,l,d?u[p]:u,d?u[p+1]:u,b,v);E.length=0;const A=t[n-1],T=l.cartesianToCartographic(A,C);T.height=d?u[n-1]:u;const w=l.cartographicToCartesian(T,I);return i.Z.pack(w,b,y-3),b},m.generateCartesianArc=function(e){const t=m.generateArc(e),n=t.length/3,o=new Array(n);for(let e=0;e<n;e++)o[e]=i.Z.unpack(t,3*e);return o},m.generateCartesianRhumbArc=function(e){const t=m.generateRhumbArc(e),n=t.length/3,o=new Array(n);for(let e=0;e<n;e++)o[e]=i.Z.unpack(t,3*e);return o};const B=m},169114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var i=n(334389),o=n(890828),r=n(762031),s=n(405254),a=n(660904),c=n(449809),l=n(555537),u=n(234146),d=n(11020),h=n(765153),f=n(63354),p=n(87200),m=n(951775),_=n(263825),g=n(5450),Z=n(342209),y=n(344485),b=n(590292),v=n(798118),A=n(99631),T=n(804868),w=n(427183),E=n(126729);function S(e){const t=(e=(0,u.Z)(e,u.Z.EMPTY_OBJECT)).polylinePositions,n=e.shapePositions;if(!(0,d.Z)(t))throw new h.Z("options.polylinePositions is required.");if(!(0,d.Z)(n))throw new h.Z("options.shapePositions is required.");this._positions=t,this._shape=n,this._ellipsoid=f.Z.clone((0,u.Z)(e.ellipsoid,f.Z.WGS84)),this._cornerType=(0,u.Z)(e.cornerType,l.Z.ROUNDED),this._vertexFormat=w.Z.clone((0,u.Z)(e.vertexFormat,w.Z.DEFAULT)),this._granularity=(0,u.Z)(e.granularity,y.Z.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeGeometry";let i=1+t.length*a.Z.packedLength;i+=1+n.length*s.Z.packedLength,this.packedLength=i+f.Z.packedLength+w.Z.packedLength+2}S.pack=function(e,t,n){if(!(0,d.Z)(e))throw new h.Z("value is required");if(!(0,d.Z)(t))throw new h.Z("array is required");let i;n=(0,u.Z)(n,0);const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=a.Z.packedLength)a.Z.pack(o[i],t,n);const c=e._shape;for(r=c.length,t[n++]=r,i=0;i<r;++i,n+=s.Z.packedLength)s.Z.pack(c[i],t,n);return f.Z.pack(e._ellipsoid,t,n),n+=f.Z.packedLength,w.Z.pack(e._vertexFormat,t,n),n+=w.Z.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};const C=f.Z.clone(f.Z.UNIT_SPHERE),x=new w.Z,I={polylinePositions:void 0,shapePositions:void 0,ellipsoid:C,vertexFormat:x,cornerType:void 0,granularity:void 0};S.unpack=function(e,t,n){if(!(0,d.Z)(e))throw new h.Z("array is required");let i;t=(0,u.Z)(t,0);let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=a.Z.packedLength)r[i]=a.Z.unpack(e,t);o=e[t++];const c=new Array(o);for(i=0;i<o;++i,t+=s.Z.packedLength)c[i]=s.Z.unpack(e,t);const l=f.Z.unpack(e,t,C);t+=f.Z.packedLength;const p=w.Z.unpack(e,t,x);t+=w.Z.packedLength;const m=e[t++],_=e[t];return(0,d.Z)(n)?(n._positions=r,n._shape=c,n._ellipsoid=f.Z.clone(l,n._ellipsoid),n._vertexFormat=w.Z.clone(p,n._vertexFormat),n._cornerType=m,n._granularity=_,n):(I.polylinePositions=r,I.shapePositions=c,I.cornerType=m,I.granularity=_,new S(I))};const P=new o.Z;S.createGeometry=function(e){const t=e._positions,n=(0,i.Z)(t,a.Z.equalsEpsilon);let s=e._shape;if(s=A.Z.removeDuplicatesFromShape(s),n.length<2||s.length<3)return;v.Z.computeWindingOrder2D(s)===E.Z.CLOCKWISE&&s.reverse();const l=o.Z.fromPoints(s,P);return function(e,t,n,i){const o=new _.Z;i.position&&(o.position=new m.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:e}));const s=t.length,a=e.length/3,l=(a-2*s)/(2*s),u=v.Z.triangulate(t),d=(l-1)*s*6+2*u.length,h=Z.Z.createTypedArray(a,d);let f,y,A,w,E,S;const C=2*s;let x=0;for(f=0;f<l-1;f++){for(y=0;y<s-1;y++)A=2*y+f*s*2,S=A+C,w=A+1,E=w+C,h[x++]=w,h[x++]=A,h[x++]=E,h[x++]=E,h[x++]=A,h[x++]=S;A=2*s-2+f*s*2,w=A+1,E=w+C,S=A+C,h[x++]=w,h[x++]=A,h[x++]=E,h[x++]=E,h[x++]=A,h[x++]=S}if(i.st||i.tangent||i.bitangent){const e=new Float32Array(2*a),i=1/(l-1),r=1/n.height,u=n.height/2;let d,h,p=0;for(f=0;f<l;f++){for(d=f*i,h=r*(t[0].y+u),e[p++]=d,e[p++]=h,y=1;y<s;y++)h=r*(t[y].y+u),e[p++]=d,e[p++]=h,e[p++]=d,e[p++]=h;h=r*(t[0].y+u),e[p++]=d,e[p++]=h}for(y=0;y<s;y++)d=0,h=r*(t[y].y+u),e[p++]=d,e[p++]=h;for(y=0;y<s;y++)d=(l-1)*i,h=r*(t[y].y+u),e[p++]=d,e[p++]=h;o.st=new m.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:new Float32Array(e)})}const I=a-2*s;for(f=0;f<u.length;f+=3){const e=u[f]+I,t=u[f+1]+I,n=u[f+2]+I;h[x++]=e,h[x++]=t,h[x++]=n,h[x++]=n+s,h[x++]=t+s,h[x++]=e+s}let P=new p.Z({attributes:o,indices:h,boundingSphere:r.Z.fromVertices(e),primitiveType:T.Z.TRIANGLES});if(i.normal&&(P=g.Z.computeNormal(P)),i.tangent||i.bitangent){try{P=g.Z.computeTangentAndBitangent(P)}catch(e){(0,b.Z)("polyline-volume-tangent-bitangent","Unable to compute tangents and bitangents for polyline volume geometry")}i.tangent||(P.attributes.tangent=void 0),i.bitangent||(P.attributes.bitangent=void 0),i.st||(P.attributes.st=void 0)}return P}(A.Z.computePositions(n,s,l,e,!0),s,l,e._vertexFormat)};const D=S},99631:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Q});var i=n(405254),o=n(660904),r=n(798336),s=n(532056),a=n(555537),c=n(573777),l=n(344485),u=n(664288),d=n(659635),h=n(151793),f=n(360846),p=n(720794),m=n(590292);const _=[new o.Z,new o.Z],g=new o.Z,Z=new o.Z,y=new o.Z,b=new o.Z,v=new o.Z,A=new o.Z,T=new o.Z,w=new o.Z,E=new o.Z,S=new o.Z,C=new o.Z,x={};let I=new s.Z;function P(e,t,n,i){const r=e[0],s=e[1],a=o.Z.angleBetween(r,s),c=Math.ceil(a/i),l=new Array(c);let u;if(t===n){for(u=0;u<c;u++)l[u]=t;return l.push(n),l}const d=(n-t)/c;for(u=1;u<c;u++){const e=t+u*d;l[u]=e}return l[0]=t,l.push(n),l}const D=new o.Z,O=new o.Z,L=new o.Z(-1,0,0);let N=new d.Z;const M=new d.Z;let R=new u.Z;const F=u.Z.IDENTITY.clone(),B=new o.Z,U=new r.Z,k=new o.Z;function V(e,t,n,r,s,a,l,h){let f=B,m=U;N=p.Z.eastNorthUpToFixedFrame(e,s,N),f=d.Z.multiplyByPointAsVector(N,L,f),f=o.Z.normalize(f,f);const _=function(e,t,n,r){const s=new c.Z(n,r),a=s.projectPointOntoPlane(o.Z.add(n,e,D),D),l=s.projectPointOntoPlane(o.Z.add(n,t,O),O),u=i.Z.angleBetween(a,l);return l.x*a.y-l.y*a.x>=0?-u:u}(f,t,e,s);R=u.Z.fromRotationZ(_,R),k.z=a,N=d.Z.multiplyTransformation(N,d.Z.fromRotationTranslation(R,k,M),N);const g=F;g[0]=l;for(let e=0;e<h;e++)for(let e=0;e<n.length;e+=3)m=o.Z.fromArray(n,e,m),m=u.Z.multiplyByVector(g,m,m),m=d.Z.multiplyByPoint(N,m,m),r.push(m.x,m.y,m.z);return r}const H=new o.Z;function z(e,t,n,i,r,s,a){for(let c=0;c<e.length;c+=3)i=V(o.Z.fromArray(e,c,H),t,n,i,r,s[c/3],a,1);return i}function G(e,t){const n=e.length,i=new Array(3*n);let o=0;const r=t.x+t.width/2,s=t.y+t.height/2;for(let t=0;t<n;t++)i[o++]=e[t].x-r,i[o++]=0,i[o++]=e[t].y-s;return i}const j=new f.Z,W=new o.Z,q=new u.Z;function Y(e,t,n,i,r,s,c,d,h,p){const m=o.Z.angleBetween(o.Z.subtract(t,e,S),o.Z.subtract(n,e,C)),_=i===a.Z.BEVELED?0:Math.ceil(m/l.Z.toRadians(5));let g,Z,y;if(g=r?u.Z.fromQuaternion(f.Z.fromAxisAngle(o.Z.negate(e,S),m/(_+1),j),q):u.Z.fromQuaternion(f.Z.fromAxisAngle(e,m/(_+1),j),q),t=o.Z.clone(t,W),_>0){const n=p?2:1;for(let i=0;i<_;i++)t=u.Z.multiplyByVector(g,t,t),Z=o.Z.subtract(t,e,S),Z=o.Z.normalize(Z,Z),r||(Z=o.Z.negate(Z,Z)),y=s.scaleToGeodeticSurface(t,C),c=V(y,Z,d,c,s,h,1,n)}else Z=o.Z.subtract(t,e,S),Z=o.Z.normalize(Z,Z),r||(Z=o.Z.negate(Z,Z)),y=s.scaleToGeodeticSurface(t,C),c=V(y,Z,d,c,s,h,1,1),n=o.Z.clone(n,W),Z=o.Z.subtract(n,e,S),Z=o.Z.normalize(Z,Z),r||(Z=o.Z.negate(Z,Z)),y=s.scaleToGeodeticSurface(n,C),c=V(y,Z,d,c,s,h,1,1);return c}x.removeDuplicatesFromShape=function(e){const t=e.length,n=[];for(let o=t-1,r=0;r<t;o=r++){const t=e[o],s=e[r];i.Z.equals(t,s)||n.push(s)}return n},x.angleIsGreaterThanPi=function(e,t,n,i){const r=new c.Z(n,i),s=r.projectPointOntoPlane(o.Z.add(n,e,D),D),a=r.projectPointOntoPlane(o.Z.add(n,t,O),O);return a.x*s.y-a.y*s.x>=0};const X=new o.Z,J=new o.Z;x.computePositions=function(e,t,n,i,r){const s=i._ellipsoid,c=function(e,t){const n=new Array(e.length);for(let i=0;i<e.length;i++){const o=e[i];I=t.cartesianToCartographic(o,I),n[i]=I.height,e[i]=t.scaleToGeodeticSurface(o,o)}return n}(e,s),u=i._granularity,d=i._cornerType,f=r?function(e,t){const n=e.length,i=new Array(6*n);let o=0;const r=t.x+t.width/2,s=t.y+t.height/2;let a=e[0];i[o++]=a.x-r,i[o++]=0,i[o++]=a.y-s;for(let t=1;t<n;t++){a=e[t];const n=a.x-r,c=a.y-s;i[o++]=n,i[o++]=0,i[o++]=c,i[o++]=n,i[o++]=0,i[o++]=c}return a=e[0],i[o++]=a.x-r,i[o++]=0,i[o++]=a.y-s,i}(t,n):G(t,n),p=r?G(t,n):void 0,C=n.height/2,D=n.width/2;let O=e.length,L=[],N=r?[]:void 0,M=g,R=Z,F=y,B=b,U=v,k=A,H=T,j=w,W=E,q=e[0],Q=e[1];B=s.geodeticSurfaceNormal(q,B),M=o.Z.subtract(Q,q,M),M=o.Z.normalize(M,M),j=o.Z.cross(B,M,j),j=o.Z.normalize(j,j);let $,K,ee=c[0],te=c[1];r&&(N=V(q,j,p,N,s,ee+C,1,1)),W=o.Z.clone(q,W),q=Q,R=o.Z.negate(M,R);for(let t=1;t<O-1;t++){const n=r?2:1;if(Q=e[t+1],q.equals(Q)){(0,m.Z)("Positions are too close and are considered equivalent with rounding error.");continue}M=o.Z.subtract(Q,q,M),M=o.Z.normalize(M,M),F=o.Z.add(M,R,F),F=o.Z.normalize(F,F),B=s.geodeticSurfaceNormal(q,B);const i=o.Z.multiplyByScalar(B,o.Z.dot(M,B),X);o.Z.subtract(M,i,i),o.Z.normalize(i,i);const p=o.Z.multiplyByScalar(B,o.Z.dot(R,B),J);if(o.Z.subtract(R,p,p),o.Z.normalize(p,p),l.Z.equalsEpsilon(Math.abs(o.Z.dot(i,p)),1,l.Z.EPSILON7))L=V(W,j,f,L,s,ee+C,1,1),W=q;else{F=o.Z.cross(F,B,F),F=o.Z.cross(B,F,F),F=o.Z.normalize(F,F);const e=1/Math.max(.25,o.Z.magnitude(o.Z.cross(F,R,S))),t=x.angleIsGreaterThanPi(M,R,q,s);t?(U=o.Z.add(q,o.Z.multiplyByScalar(F,e*D,F),U),k=o.Z.add(U,o.Z.multiplyByScalar(j,D,k),k),_[0]=o.Z.clone(W,_[0]),_[1]=o.Z.clone(k,_[1]),$=P(_,ee+C,te+C,u),K=h.Z.generateArc({positions:_,granularity:u,ellipsoid:s}),L=z(K,j,f,L,s,$,1),j=o.Z.cross(B,M,j),j=o.Z.normalize(j,j),H=o.Z.add(U,o.Z.multiplyByScalar(j,D,H),H),d===a.Z.ROUNDED||d===a.Z.BEVELED?Y(U,k,H,d,t,s,L,f,te+C,r):(F=o.Z.negate(F,F),L=V(q,F,f,L,s,te+C,e,n)),W=o.Z.clone(H,W)):(U=o.Z.add(q,o.Z.multiplyByScalar(F,e*D,F),U),k=o.Z.add(U,o.Z.multiplyByScalar(j,-D,k),k),_[0]=o.Z.clone(W,_[0]),_[1]=o.Z.clone(k,_[1]),$=P(_,ee+C,te+C,u),K=h.Z.generateArc({positions:_,granularity:u,ellipsoid:s}),L=z(K,j,f,L,s,$,1),j=o.Z.cross(B,M,j),j=o.Z.normalize(j,j),H=o.Z.add(U,o.Z.multiplyByScalar(j,-D,H),H),d===a.Z.ROUNDED||d===a.Z.BEVELED?Y(U,k,H,d,t,s,L,f,te+C,r):L=V(q,F,f,L,s,te+C,e,n),W=o.Z.clone(H,W)),R=o.Z.negate(M,R)}ee=te,te=c[t+1],q=Q}_[0]=o.Z.clone(W,_[0]),_[1]=o.Z.clone(q,_[1]),$=P(_,ee+C,te+C,u),K=h.Z.generateArc({positions:_,granularity:u,ellipsoid:s}),L=z(K,j,f,L,s,$,1),r&&(N=V(q,j,p,N,s,te+C,1,1)),O=L.length;const ne=r?O+N.length:O,ie=new Float64Array(ne);return ie.set(L),r&&ie.set(N,O),ie};const Q=x},70618:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var i=n(334389),o=n(890828),r=n(762031),s=n(405254),a=n(660904),c=n(449809),l=n(555537),u=n(234146),d=n(11020),h=n(765153),f=n(63354),p=n(87200),m=n(951775),_=n(263825),g=n(342209),Z=n(344485),y=n(798118),b=n(99631),v=n(804868),A=n(126729);function T(e){const t=(e=(0,u.Z)(e,u.Z.EMPTY_OBJECT)).polylinePositions,n=e.shapePositions;if(!(0,d.Z)(t))throw new h.Z("options.polylinePositions is required.");if(!(0,d.Z)(n))throw new h.Z("options.shapePositions is required.");this._positions=t,this._shape=n,this._ellipsoid=f.Z.clone((0,u.Z)(e.ellipsoid,f.Z.WGS84)),this._cornerType=(0,u.Z)(e.cornerType,l.Z.ROUNDED),this._granularity=(0,u.Z)(e.granularity,Z.Z.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";let i=1+t.length*a.Z.packedLength;i+=1+n.length*s.Z.packedLength,this.packedLength=i+f.Z.packedLength+2}T.pack=function(e,t,n){if(!(0,d.Z)(e))throw new h.Z("value is required");if(!(0,d.Z)(t))throw new h.Z("array is required");let i;n=(0,u.Z)(n,0);const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=a.Z.packedLength)a.Z.pack(o[i],t,n);const c=e._shape;for(r=c.length,t[n++]=r,i=0;i<r;++i,n+=s.Z.packedLength)s.Z.pack(c[i],t,n);return f.Z.pack(e._ellipsoid,t,n),n+=f.Z.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};const w=f.Z.clone(f.Z.UNIT_SPHERE),E={polylinePositions:void 0,shapePositions:void 0,ellipsoid:w,height:void 0,cornerType:void 0,granularity:void 0};T.unpack=function(e,t,n){if(!(0,d.Z)(e))throw new h.Z("array is required");let i;t=(0,u.Z)(t,0);let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=a.Z.packedLength)r[i]=a.Z.unpack(e,t);o=e[t++];const c=new Array(o);for(i=0;i<o;++i,t+=s.Z.packedLength)c[i]=s.Z.unpack(e,t);const l=f.Z.unpack(e,t,w);t+=f.Z.packedLength;const p=e[t++],m=e[t];return(0,d.Z)(n)?(n._positions=r,n._shape=c,n._ellipsoid=f.Z.clone(l,n._ellipsoid),n._cornerType=p,n._granularity=m,n):(E.polylinePositions=r,E.shapePositions=c,E.cornerType=p,E.granularity=m,new T(E))};const S=new o.Z;T.createGeometry=function(e){const t=e._positions,n=(0,i.Z)(t,a.Z.equalsEpsilon);let s=e._shape;if(s=b.Z.removeDuplicatesFromShape(s),n.length<2||s.length<3)return;y.Z.computeWindingOrder2D(s)===A.Z.CLOCKWISE&&s.reverse();const l=o.Z.fromPoints(s,S);return function(e,t){const n=new _.Z;n.position=new m.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:e});const i=t.length,o=n.position.values.length/3,s=e.length/3/i,a=g.Z.createTypedArray(o,2*i*(s+1));let l,u,d=0;l=0;let h=l*i;for(u=0;u<i-1;u++)a[d++]=u+h,a[d++]=u+h+1;for(a[d++]=i-1+h,a[d++]=h,l=s-1,h=l*i,u=0;u<i-1;u++)a[d++]=u+h,a[d++]=u+h+1;for(a[d++]=i-1+h,a[d++]=h,l=0;l<s-1;l++){const e=i*l,t=e+i;for(u=0;u<i;u++)a[d++]=u+e,a[d++]=u+t}return new p.Z({attributes:n,indices:g.Z.createTypedArray(o,a),boundingSphere:r.Z.fromVertices(e),primitiveType:v.Z.LINES})}(b.Z.computePositions(n,s,l,e,!1),s)};const C=T},402793:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var i=n(762031),o=n(405254),r=n(660904),s=n(790087),a=n(234146),c=n(11020),l=n(765153),u=n(342209),d=n(820214),h=n(344485),f=n(237247),p=n(511267),m=n(910811),_=n(502954),g=n(178611);function Z(e){if(!(0,c.Z)(e)||!(0,c.Z)(e.quantizedVertices))throw new l.Z("options.quantizedVertices is required.");if(!(0,c.Z)(e.indices))throw new l.Z("options.indices is required.");if(!(0,c.Z)(e.minimumHeight))throw new l.Z("options.minimumHeight is required.");if(!(0,c.Z)(e.maximumHeight))throw new l.Z("options.maximumHeight is required.");if(!(0,c.Z)(e.maximumHeight))throw new l.Z("options.maximumHeight is required.");if(!(0,c.Z)(e.boundingSphere))throw new l.Z("options.boundingSphere is required.");if(!(0,c.Z)(e.horizonOcclusionPoint))throw new l.Z("options.horizonOcclusionPoint is required.");if(!(0,c.Z)(e.westIndices))throw new l.Z("options.westIndices is required.");if(!(0,c.Z)(e.southIndices))throw new l.Z("options.southIndices is required.");if(!(0,c.Z)(e.eastIndices))throw new l.Z("options.eastIndices is required.");if(!(0,c.Z)(e.northIndices))throw new l.Z("options.northIndices is required.");if(!(0,c.Z)(e.westSkirtHeight))throw new l.Z("options.westSkirtHeight is required.");if(!(0,c.Z)(e.southSkirtHeight))throw new l.Z("options.southSkirtHeight is required.");if(!(0,c.Z)(e.eastSkirtHeight))throw new l.Z("options.eastSkirtHeight is required.");if(!(0,c.Z)(e.northSkirtHeight))throw new l.Z("options.northSkirtHeight is required.");this._quantizedVertices=e.quantizedVertices,this._encodedNormals=e.encodedNormals,this._indices=e.indices,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._boundingSphere=e.boundingSphere,this._orientedBoundingBox=e.orientedBoundingBox,this._horizonOcclusionPoint=e.horizonOcclusionPoint,this._credits=e.credits;const t=this._quantizedVertices.length/3,n=this._uValues=this._quantizedVertices.subarray(0,t),i=this._vValues=this._quantizedVertices.subarray(t,2*t);function o(e,t){return i[e]-i[t]}function r(e,t){return n[e]-n[t]}this._heightValues=this._quantizedVertices.subarray(2*t,3*t),this._westIndices=b(e.westIndices,o,t),this._southIndices=b(e.southIndices,r,t),this._eastIndices=b(e.eastIndices,o,t),this._northIndices=b(e.northIndices,r,t),this._westSkirtHeight=e.westSkirtHeight,this._southSkirtHeight=e.southSkirtHeight,this._eastSkirtHeight=e.eastSkirtHeight,this._northSkirtHeight=e.northSkirtHeight,this._childTileMask=(0,a.Z)(e.childTileMask,15),this._createdByUpsampling=(0,a.Z)(e.createdByUpsampling,!1),this._waterMask=e.waterMask,this._mesh=void 0}Object.defineProperties(Z.prototype,{credits:{get:function(){return this._credits}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}},canUpsample:{get:function(){return(0,c.Z)(this._mesh)}}});const y=[];function b(e,t,n){y.length=e.length;let i=!1;for(let n=0,o=e.length;n<o;++n)y[n]=e[n],i=i||n>0&&t(e[n-1],e[n])>0;return i?(y.sort(t),u.Z.createTypedArray(n,y)):e}const v="createVerticesFromQuantizedTerrainMesh",A=new p.Z(v),T=new p.Z(v,m.Z.maximumAsynchronousTasks);Z.prototype.createMesh=function(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),s.Z.typeOf.object("options.tilingScheme",e.tilingScheme),s.Z.typeOf.number("options.x",e.x),s.Z.typeOf.number("options.y",e.y),s.Z.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,i=e.y,o=e.level,l=(0,a.Z)(e.exaggeration,1),d=(0,a.Z)(e.exaggerationRelativeHeight,0),h=(0,a.Z)(e.throttle,!0),f=t.ellipsoid,p=t.tileXYToRectangle(n,i,o),m=(h?T:A).scheduleTask({minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,quantizedVertices:this._quantizedVertices,octEncodedNormals:this._encodedNormals,includeWebMercatorT:!0,indices:this._indices,westIndices:this._westIndices,southIndices:this._southIndices,eastIndices:this._eastIndices,northIndices:this._northIndices,westSkirtHeight:this._westSkirtHeight,southSkirtHeight:this._southSkirtHeight,eastSkirtHeight:this._eastSkirtHeight,northSkirtHeight:this._northSkirtHeight,rectangle:p,relativeToCenter:this._boundingSphere.center,ellipsoid:f,exaggeration:l,exaggerationRelativeHeight:d});if(!(0,c.Z)(m))return;const Z=this;return Promise.resolve(m).then((function(e){const t=Z._quantizedVertices.length/3,n=t+Z._westIndices.length+Z._southIndices.length+Z._eastIndices.length+Z._northIndices.length,i=u.Z.createTypedArray(n,e.indices),o=new Float32Array(e.vertices),s=e.center,c=e.minimumHeight,l=e.maximumHeight,d=Z._boundingSphere,h=Z._orientedBoundingBox,f=(0,a.Z)(r.Z.clone(e.occludeePointInScaledSpace),Z._horizonOcclusionPoint),p=e.vertexStride,m=_.Z.clone(e.encoding);return Z._mesh=new g.Z(s,o,i,e.indexCountWithoutSkirts,t,c,l,d,f,p,h,m,e.westIndicesSouthToNorth,e.southIndicesEastToWest,e.eastIndicesNorthToSouth,e.northIndicesWestToEast),Z._quantizedVertices=void 0,Z._encodedNormals=void 0,Z._indices=void 0,Z._uValues=void 0,Z._vValues=void 0,Z._heightValues=void 0,Z._westIndices=void 0,Z._southIndices=void 0,Z._eastIndices=void 0,Z._northIndices=void 0,Z._mesh}))};const w=new p.Z("upsampleQuantizedTerrainMesh",m.Z.maximumAsynchronousTasks);Z.prototype.upsample=function(e,t,n,o,s,a,d){if(!(0,c.Z)(e))throw new l.Z("tilingScheme is required.");if(!(0,c.Z)(t))throw new l.Z("thisX is required.");if(!(0,c.Z)(n))throw new l.Z("thisY is required.");if(!(0,c.Z)(o))throw new l.Z("thisLevel is required.");if(!(0,c.Z)(s))throw new l.Z("descendantX is required.");if(!(0,c.Z)(a))throw new l.Z("descendantY is required.");if(!(0,c.Z)(d))throw new l.Z("descendantLevel is required.");if(d-o>1)throw new l.Z("Upsampling through more than one level at a time is not currently supported.");const h=this._mesh;if(!(0,c.Z)(this._mesh))return;const p=2*t!==s,m=2*n===a,_=e.ellipsoid,g=e.tileXYToRectangle(s,a,d),y=w.scheduleTask({vertices:h.vertices,vertexCountWithoutSkirts:h.vertexCountWithoutSkirts,indices:h.indices,indexCountWithoutSkirts:h.indexCountWithoutSkirts,encoding:h.encoding,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,isEastChild:p,isNorthChild:m,childRectangle:g,ellipsoid:_});if(!(0,c.Z)(y))return;let b=Math.min(this._westSkirtHeight,this._eastSkirtHeight);b=Math.min(b,this._southSkirtHeight),b=Math.min(b,this._northSkirtHeight);const v=p?.5*b:this._westSkirtHeight,A=m?.5*b:this._southSkirtHeight,T=p?this._eastSkirtHeight:.5*b,E=m?this._northSkirtHeight:.5*b,S=this._credits;return Promise.resolve(y).then((function(e){const t=new Uint16Array(e.vertices),n=u.Z.createTypedArray(t.length/3,e.indices);let o;return(0,c.Z)(e.encodedNormals)&&(o=new Uint8Array(e.encodedNormals)),new Z({quantizedVertices:t,indices:n,encodedNormals:o,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,boundingSphere:i.Z.clone(e.boundingSphere),orientedBoundingBox:f.Z.clone(e.orientedBoundingBox),horizonOcclusionPoint:r.Z.clone(e.horizonOcclusionPoint),westIndices:e.westIndices,southIndices:e.southIndices,eastIndices:e.eastIndices,northIndices:e.northIndices,westSkirtHeight:v,southSkirtHeight:A,eastSkirtHeight:T,northSkirtHeight:E,childTileMask:0,credits:S,createdByUpsampling:!0})}))};const E=32767,S=new r.Z;function C(e,t,n,i,o,r,s,a){const c=Math.min(n,o,s),l=Math.max(n,o,s),u=Math.min(i,r,a),d=Math.max(i,r,a);return e>=c&&e<=l&&t>=u&&t<=d}Z.prototype.interpolateHeight=function(e,t,n){let i=h.Z.clamp((t-e.west)/e.width,0,1);i*=E;let o=h.Z.clamp((n-e.south)/e.height,0,1);return o*=E,(0,c.Z)(this._mesh)?function(e,t,n){const i=e._mesh,o=i.vertices,r=i.encoding,s=i.indices;for(let e=0,i=s.length;e<i;e+=3){const i=s[e],a=s[e+1],c=s[e+2],l=r.decodeTextureCoordinates(o,i,x),u=r.decodeTextureCoordinates(o,a,I),h=r.decodeTextureCoordinates(o,c,P);if(C(t,n,l.x,l.y,u.x,u.y,h.x,h.y)){const e=d.Z.computeBarycentricCoordinates(t,n,l.x,l.y,u.x,u.y,h.x,h.y,S);if(e.x>=-1e-15&&e.y>=-1e-15&&e.z>=-1e-15){const t=r.decodeHeight(o,i),n=r.decodeHeight(o,a),s=r.decodeHeight(o,c);return e.x*t+e.y*n+e.z*s}}}}(this,i,o):function(e,t,n){const i=e._uValues,o=e._vValues,r=e._heightValues,s=e._indices;for(let a=0,c=s.length;a<c;a+=3){const c=s[a],l=s[a+1],u=s[a+2],f=i[c],p=i[l],m=i[u],_=o[c],g=o[l],Z=o[u];if(C(t,n,f,_,p,g,m,Z)){const i=d.Z.computeBarycentricCoordinates(t,n,f,_,p,g,m,Z,S);if(i.x>=-1e-15&&i.y>=-1e-15&&i.z>=-1e-15){const t=i.x*r[c]+i.y*r[l]+i.z*r[u];return h.Z.lerp(e._minimumHeight,e._maximumHeight,t/E)}}}}(this,i,o)};const x=new o.Z,I=new o.Z,P=new o.Z;Z.prototype.isChildAvailable=function(e,t,n,i){if(!(0,c.Z)(e))throw new l.Z("thisX is required.");if(!(0,c.Z)(t))throw new l.Z("thisY is required.");if(!(0,c.Z)(n))throw new l.Z("childX is required.");if(!(0,c.Z)(i))throw new l.Z("childY is required.");let o=2;return n!==2*e&&++o,i!==2*t&&(o-=2),!!(this._childTileMask&1<<o)},Z.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const D=Z},598220:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(234146),o=n(11020),r=n(765153),s=n(360846),a=n(361942);function c(e){const t=(e=(0,i.Z)(e,i.Z.EMPTY_OBJECT)).points,n=e.times;if(!(0,o.Z)(t)||!(0,o.Z)(n))throw new r.Z("points and times are required.");if(t.length<2)throw new r.Z("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new r.Z("times.length must be equal to points.length.");this._times=n,this._points=t,this._evaluateFunction=function(e){const t=e.points,n=e.times;return function(i,r){(0,o.Z)(r)||(r=new s.Z);const a=e._lastTimeIndex=e.findTimeInterval(i,e._lastTimeIndex),c=(i-n[a])/(n[a+1]-n[a]),l=t[a],u=t[a+1];return s.Z.fastSlerp(l,u,c,r)}}(this),this._lastTimeIndex=0}Object.defineProperties(c.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),c.prototype.findTimeInterval=a.Z.prototype.findTimeInterval,c.prototype.wrapTime=a.Z.prototype.wrapTime,c.prototype.clampTime=a.Z.prototype.clampTime,c.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};const l=c},125841:(e,t,n)=>{"use strict";function i(){this._array=[],this._offset=0,this._length=0}n.d(t,{Z:()=>o}),Object.defineProperties(i.prototype,{length:{get:function(){return this._length}}}),i.prototype.enqueue=function(e){this._array.push(e),this._length++},i.prototype.dequeue=function(){if(0===this._length)return;const e=this._array;let t=this._offset;const n=e[t];return e[t]=void 0,t++,t>10&&2*t>e.length&&(this._array=e.slice(t),t=0),this._offset=t,this._length--,n},i.prototype.peek=function(){if(0!==this._length)return this._array[this._offset]},i.prototype.contains=function(e){return-1!==this._array.indexOf(e)},i.prototype.clear=function(){this._array.length=this._offset=this._length=0},i.prototype.sort=function(e){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(e)};const o=i},466294:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(382582),o=n(790087);function r(){this._tree=new i}function s(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.id=""}function a(e,t){return e.id===t.id}s.fromRectangleAndId=function(e,t,n){return n.minX=t.west,n.minY=t.south,n.maxX=t.east,n.maxY=t.north,n.id=e,n},r.prototype.insert=function(e,t){o.Z.typeOf.string("id",e),o.Z.typeOf.object("rectangle",t);const n=s.fromRectangleAndId(e,t,new s);this._tree.insert(n)};const c=new s;r.prototype.remove=function(e,t){o.Z.typeOf.string("id",e),o.Z.typeOf.object("rectangle",t);const n=s.fromRectangleAndId(e,t,c);this._tree.remove(n,a)};const l=new s;r.prototype.collides=function(e){o.Z.typeOf.object("rectangle",e);const t=s.fromRectangleAndId("",e,l);return this._tree.collides(t)};const u=r},749372:(e,t,n)=>{"use strict";n.d(t,{Z:()=>re});var i=n(762031),o=n(405254),r=n(660904),s=n(532056),a=n(790087),c=n(449809),l=n(234146),u=n(11020),d=n(765153),h=n(63354),f=n(87200),p=n(951775),m=n(263825),_=n(156905),g=n(61885),Z=n(5450),y=n(342209),b=n(344485),v=n(571945),A=n(664288),T=n(798118),w=n(804868),E=n(360846),S=n(143450),C=n(619958),x=n(427183);const I=new r.Z,P=new r.Z,D=new r.Z,O=new r.Z,L=new S.Z,N=new o.Z,M=new i.Z,R=new i.Z;function F(e,t){const n=new f.Z({attributes:new m.Z,primitiveType:w.Z.TRIANGLES});return n.attributes.position=new p.Z({componentDatatype:c.Z.DOUBLE,componentsPerAttribute:3,values:t.positions}),e.normal&&(n.attributes.normal=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:t.normals})),e.tangent&&(n.attributes.tangent=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:t.tangents})),e.bitangent&&(n.attributes.bitangent=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:t.bitangents})),n}const B=new r.Z,U=new r.Z;function k(e,t){const n=e._vertexFormat,i=e._ellipsoid,o=t.height,s=t.width,a=t.northCap,l=t.southCap;let u=0,d=o,h=o,f=0;a&&(u=1,h-=1,f+=1),l&&(d-=1,h-=1,f+=1),f+=s*h;const m=n.position?new Float64Array(3*f):void 0,_=n.st?new Float32Array(2*f):void 0;let g=0,Z=0;const b=I,v=N;let T=Number.MAX_VALUE,w=Number.MAX_VALUE,E=-Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let e=u;e<d;++e)for(let o=0;o<s;++o)C.Z.computePosition(t,i,n.st,e,o,b,v),m[g++]=b.x,m[g++]=b.y,m[g++]=b.z,n.st&&(_[Z++]=v.x,_[Z++]=v.y,T=Math.min(T,v.x),w=Math.min(w,v.y),E=Math.max(E,v.x),S=Math.max(S,v.y));if(a&&(C.Z.computePosition(t,i,n.st,0,0,b,v),m[g++]=b.x,m[g++]=b.y,m[g++]=b.z,n.st&&(_[Z++]=v.x,_[Z++]=v.y,T=v.x,w=v.y,E=v.x,S=v.y)),l&&(C.Z.computePosition(t,i,n.st,o-1,0,b,v),m[g++]=b.x,m[g++]=b.y,m[g]=b.z,n.st&&(_[Z++]=v.x,_[Z]=v.y,T=Math.min(T,v.x),w=Math.min(w,v.y),E=Math.max(E,v.x),S=Math.max(S,v.y))),n.st&&(T<0||w<0||E>1||S>1))for(let e=0;e<_.length;e+=2)_[e]=(_[e]-T)/(E-T),_[e+1]=(_[e+1]-w)/(S-w);const x=function(e,t,n,i){const o=e.length,s=t.normal?new Float32Array(o):void 0,a=t.tangent?new Float32Array(o):void 0,c=t.bitangent?new Float32Array(o):void 0;let l=0;const u=O,d=D;let h=P;if(t.normal||t.tangent||t.bitangent)for(let f=0;f<o;f+=3){const o=r.Z.fromArray(e,f,I),p=l+1,m=l+2;h=n.geodeticSurfaceNormal(o,h),(t.tangent||t.bitangent)&&(r.Z.cross(r.Z.UNIT_Z,h,d),A.Z.multiplyByVector(i,d,d),r.Z.normalize(d,d),t.bitangent&&r.Z.normalize(r.Z.cross(h,d,u),u)),t.normal&&(s[l]=h.x,s[p]=h.y,s[m]=h.z),t.tangent&&(a[l]=d.x,a[p]=d.y,a[m]=d.z),t.bitangent&&(c[l]=u.x,c[p]=u.y,c[m]=u.z),l+=3}return F(t,{positions:e,normals:s,tangents:a,bitangents:c})}(m,n,i,t.tangentRotationMatrix);let L=6*(s-1)*(h-1);a&&(L+=3*(s-1)),l&&(L+=3*(s-1));const M=y.Z.createTypedArray(f,L);let R,B=0,U=0;for(R=0;R<h-1;++R){for(let e=0;e<s-1;++e){const e=B,t=e+s,n=t+1,i=e+1;M[U++]=e,M[U++]=t,M[U++]=i,M[U++]=i,M[U++]=t,M[U++]=n,++B}++B}if(a||l){let e=f-1;const t=f-1;let n,i;if(a&&l&&(e=f-2),B=0,a)for(R=0;R<s-1;R++)n=B,i=n+1,M[U++]=e,M[U++]=n,M[U++]=i,++B;if(l)for(B=(h-1)*s,R=0;R<s-1;R++)n=B,i=n+1,M[U++]=n,M[U++]=t,M[U++]=i,++B}return x.indices=M,n.st&&(x.attributes.st=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:_})),x}function V(e,t,n,i,o){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n+2],e[t++]=o[n],e[t++]=o[n+1],e[t]=o[n+2],e}function H(e,t,n,i){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n],e[t]=i[n+1],e}const z=new x.Z;const G=[new r.Z,new r.Z,new r.Z,new r.Z],j=new s.Z,W=new s.Z;function q(e,t,n,i,o){if(0===n)return S.Z.clone(e,o);const r=C.Z.computeOptions(e,t,n,0,L,j),s=r.height,a=r.width,c=G;return C.Z.computePosition(r,i,!1,0,0,c[0]),C.Z.computePosition(r,i,!1,0,a-1,c[1]),C.Z.computePosition(r,i,!1,s-1,0,c[2]),C.Z.computePosition(r,i,!1,s-1,a-1,c[3]),S.Z.fromCartesianArray(c,i,o)}function Y(e){const t=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).rectangle;if(a.Z.typeOf.object("rectangle",t),S.Z.validate(t),t.north<t.south)throw new d.Z("options.rectangle.north must be greater than or equal to options.rectangle.south");const n=(0,l.Z)(e.height,0),i=(0,l.Z)(e.extrudedHeight,n);this._rectangle=S.Z.clone(t),this._granularity=(0,l.Z)(e.granularity,b.Z.RADIANS_PER_DEGREE),this._ellipsoid=h.Z.clone((0,l.Z)(e.ellipsoid,h.Z.WGS84)),this._surfaceHeight=Math.max(n,i),this._rotation=(0,l.Z)(e.rotation,0),this._stRotation=(0,l.Z)(e.stRotation,0),this._vertexFormat=x.Z.clone((0,l.Z)(e.vertexFormat,x.Z.DEFAULT)),this._extrudedHeight=Math.min(n,i),this._shadowVolume=(0,l.Z)(e.shadowVolume,!1),this._workerName="createRectangleGeometry",this._offsetAttribute=e.offsetAttribute,this._rotatedRectangle=void 0,this._textureCoordinateRotationPoints=void 0}Y.packedLength=S.Z.packedLength+h.Z.packedLength+x.Z.packedLength+7,Y.pack=function(e,t,n){return a.Z.typeOf.object("value",e),a.Z.defined("array",t),n=(0,l.Z)(n,0),S.Z.pack(e._rectangle,t,n),n+=S.Z.packedLength,h.Z.pack(e._ellipsoid,t,n),n+=h.Z.packedLength,x.Z.pack(e._vertexFormat,t,n),n+=x.Z.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=(0,l.Z)(e._offsetAttribute,-1),t};const X=new S.Z,J=h.Z.clone(h.Z.UNIT_SPHERE),Q={rectangle:X,ellipsoid:J,vertexFormat:z,granularity:void 0,height:void 0,rotation:void 0,stRotation:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};Y.unpack=function(e,t,n){a.Z.defined("array",e),t=(0,l.Z)(t,0);const i=S.Z.unpack(e,t,X);t+=S.Z.packedLength;const o=h.Z.unpack(e,t,J);t+=h.Z.packedLength;const r=x.Z.unpack(e,t,z);t+=x.Z.packedLength;const s=e[t++],c=e[t++],d=e[t++],f=e[t++],p=e[t++],m=1===e[t++],_=e[t];return(0,u.Z)(n)?(n._rectangle=S.Z.clone(i,n._rectangle),n._ellipsoid=h.Z.clone(o,n._ellipsoid),n._vertexFormat=x.Z.clone(r,n._vertexFormat),n._granularity=s,n._surfaceHeight=c,n._rotation=d,n._stRotation=f,n._extrudedHeight=p,n._shadowVolume=m,n._offsetAttribute=-1===_?void 0:_,n):(Q.granularity=s,Q.height=c,Q.rotation=d,Q.stRotation=f,Q.extrudedHeight=p,Q.shadowVolume=m,Q.offsetAttribute=-1===_?void 0:_,new Y(Q))},Y.computeRectangle=function(e,t){const n=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).rectangle;if(a.Z.typeOf.object("rectangle",n),S.Z.validate(n),n.north<n.south)throw new d.Z("options.rectangle.north must be greater than or equal to options.rectangle.south");const i=(0,l.Z)(e.granularity,b.Z.RADIANS_PER_DEGREE),o=(0,l.Z)(e.ellipsoid,h.Z.WGS84);return q(n,i,(0,l.Z)(e.rotation,0),o,t)};const $=new A.Z,K=new E.Z,ee=new s.Z;Y.createGeometry=function(e){if(b.Z.equalsEpsilon(e._rectangle.north,e._rectangle.south,b.Z.EPSILON10)||b.Z.equalsEpsilon(e._rectangle.east,e._rectangle.west,b.Z.EPSILON10))return;let t=e._rectangle;const n=e._ellipsoid,o=e._rotation,s=e._stRotation,a=e._vertexFormat,l=C.Z.computeOptions(t,e._granularity,o,s,L,j,W),d=$;if(0!==s||0!==o){const e=S.Z.center(t,ee),i=n.geodeticSurfaceNormalCartographic(e,B);E.Z.fromAxisAngle(i,-s,K),A.Z.fromQuaternion(K,d)}else A.Z.clone(A.Z.IDENTITY,d);const h=e._surfaceHeight,m=e._extrudedHeight,v=!b.Z.equalsEpsilon(h,m,0,b.Z.EPSILON2);let w,N;if(l.lonScalar=1/e._rectangle.width,l.latScalar=1/e._rectangle.height,l.tangentRotationMatrix=d,t=e._rectangle,v){w=function(e,t){const n=e._shadowVolume,i=e._offsetAttribute,o=e._vertexFormat,s=e._extrudedHeight,a=e._surfaceHeight,l=e._ellipsoid,d=t.height,h=t.width;let f;if(n){const t=x.Z.clone(o,z);t.normal=!0,e._vertexFormat=t}const m=k(e,t);n&&(e._vertexFormat=o);let v=T.Z.scaleToGeodeticHeight(m.attributes.position.values,a,l,!1);v=new Float64Array(v);let A=v.length;const w=2*A,E=new Float64Array(w);E.set(v);const S=T.Z.scaleToGeodeticHeight(m.attributes.position.values,s,l);E.set(S,A),m.attributes.position.values=E;const C=o.normal?new Float32Array(w):void 0,L=o.tangent?new Float32Array(w):void 0,N=o.bitangent?new Float32Array(w):void 0,M=o.st?new Float32Array(w/3*2):void 0;let R,G,j;if(o.normal){for(G=m.attributes.normal.values,C.set(G),f=0;f<A;f++)G[f]=-G[f];C.set(G,A),m.attributes.normal.values=C}if(n){G=m.attributes.normal.values,o.normal||(m.attributes.normal=void 0);const e=new Float32Array(w);for(f=0;f<A;f++)G[f]=-G[f];e.set(G,A),m.attributes.extrudeDirection=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:e})}const W=(0,u.Z)(i);if(W){const e=A/3*2;let t=new Uint8Array(e);i===g.Z.TOP?t=t.fill(1,0,e/2):(j=i===g.Z.NONE?0:1,t=t.fill(j)),m.attributes.applyOffset=new p.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}if(o.tangent){const e=m.attributes.tangent.values;for(L.set(e),f=0;f<A;f++)e[f]=-e[f];L.set(e,A),m.attributes.tangent.values=L}if(o.bitangent){const e=m.attributes.bitangent.values;N.set(e),N.set(e,A),m.attributes.bitangent.values=N}o.st&&(R=m.attributes.st.values,M.set(R),M.set(R,A/3*2),m.attributes.st.values=M);const q=m.indices,Y=q.length,X=A/3,J=y.Z.createTypedArray(w/3,2*Y);for(J.set(q),f=0;f<Y;f+=3)J[f+Y]=q[f+2]+X,J[f+1+Y]=q[f+1]+X,J[f+2+Y]=q[f]+X;m.indices=J;const Q=t.northCap,$=t.southCap;let K=d,ee=2,te=0,ne=4,ie=4;Q&&(ee-=1,K-=1,te+=1,ne-=2,ie-=1),$&&(ee-=1,K-=1,te+=1,ne-=2,ie-=1),te+=ee*h+2*K-ne;const oe=2*(te+ie);let re=new Float64Array(3*oe);const se=n?new Float32Array(3*oe):void 0;let ae=W?new Uint8Array(oe):void 0,ce=o.st?new Float32Array(2*oe):void 0;const le=i===g.Z.TOP;W&&!le&&(j=i===g.Z.ALL?1:0,ae=ae.fill(j));let ue=0,de=0,he=0,fe=0;const pe=h*K;let me;for(f=0;f<pe;f+=h)me=3*f,re=V(re,ue,me,v,S),ue+=6,o.st&&(ce=H(ce,de,2*f,R),de+=4),n&&(he+=3,se[he++]=G[me],se[he++]=G[me+1],se[he++]=G[me+2]),le&&(ae[fe++]=1,fe+=1);if($){const e=Q?pe+1:pe;for(me=3*e,f=0;f<2;f++)re=V(re,ue,me,v,S),ue+=6,o.st&&(ce=H(ce,de,2*e,R),de+=4),n&&(he+=3,se[he++]=G[me],se[he++]=G[me+1],se[he++]=G[me+2]),le&&(ae[fe++]=1,fe+=1)}else for(f=pe-h;f<pe;f++)me=3*f,re=V(re,ue,me,v,S),ue+=6,o.st&&(ce=H(ce,de,2*f,R),de+=4),n&&(he+=3,se[he++]=G[me],se[he++]=G[me+1],se[he++]=G[me+2]),le&&(ae[fe++]=1,fe+=1);for(f=pe-1;f>0;f-=h)me=3*f,re=V(re,ue,me,v,S),ue+=6,o.st&&(ce=H(ce,de,2*f,R),de+=4),n&&(he+=3,se[he++]=G[me],se[he++]=G[me+1],se[he++]=G[me+2]),le&&(ae[fe++]=1,fe+=1);if(Q){const e=pe;for(me=3*e,f=0;f<2;f++)re=V(re,ue,me,v,S),ue+=6,o.st&&(ce=H(ce,de,2*e,R),de+=4),n&&(he+=3,se[he++]=G[me],se[he++]=G[me+1],se[he++]=G[me+2]),le&&(ae[fe++]=1,fe+=1)}else for(f=h-1;f>=0;f--)me=3*f,re=V(re,ue,me,v,S),ue+=6,o.st&&(ce=H(ce,de,2*f,R),de+=4),n&&(he+=3,se[he++]=G[me],se[he++]=G[me+1],se[he++]=G[me+2]),le&&(ae[fe++]=1,fe+=1);let _e=function(e,t,n){const i=e.length,o=t.normal?new Float32Array(i):void 0,s=t.tangent?new Float32Array(i):void 0,a=t.bitangent?new Float32Array(i):void 0;let c=0,l=0,u=0,d=!0,h=O,f=D,p=P;if(t.normal||t.tangent||t.bitangent)for(let m=0;m<i;m+=6){const _=r.Z.fromArray(e,m,I),g=r.Z.fromArray(e,(m+6)%i,B);if(d){const t=r.Z.fromArray(e,(m+3)%i,U);r.Z.subtract(g,_,g),r.Z.subtract(t,_,t),p=r.Z.normalize(r.Z.cross(t,g,p),p),d=!1}r.Z.equalsEpsilon(g,_,b.Z.EPSILON10)&&(d=!0),(t.tangent||t.bitangent)&&(h=n.geodeticSurfaceNormal(_,h),t.tangent&&(f=r.Z.normalize(r.Z.cross(h,p,f),f))),t.normal&&(o[c++]=p.x,o[c++]=p.y,o[c++]=p.z,o[c++]=p.x,o[c++]=p.y,o[c++]=p.z),t.tangent&&(s[l++]=f.x,s[l++]=f.y,s[l++]=f.z,s[l++]=f.x,s[l++]=f.y,s[l++]=f.z),t.bitangent&&(a[u++]=h.x,a[u++]=h.y,a[u++]=h.z,a[u++]=h.x,a[u++]=h.y,a[u++]=h.z)}return F(t,{positions:e,normals:o,tangents:s,bitangents:a})}(re,o,l);o.st&&(_e.attributes.st=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:2,values:ce})),n&&(_e.attributes.extrudeDirection=new p.Z({componentDatatype:c.Z.FLOAT,componentsPerAttribute:3,values:se})),W&&(_e.attributes.applyOffset=new p.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:ae}));const ge=y.Z.createTypedArray(oe,6*te);let Ze,ye,be,ve;A=re.length/3;let Ae=0;for(f=0;f<A-1;f+=2){Ze=f,ve=(Ze+2)%A;const e=r.Z.fromArray(re,3*Ze,B),t=r.Z.fromArray(re,3*ve,U);r.Z.equalsEpsilon(e,t,b.Z.EPSILON10)||(ye=(Ze+1)%A,be=(ye+2)%A,ge[Ae++]=Ze,ge[Ae++]=ye,ge[Ae++]=ve,ge[Ae++]=ve,ge[Ae++]=ye,ge[Ae++]=be)}return _e.indices=ge,_e=Z.Z.combineInstances([new _.Z({geometry:m}),new _.Z({geometry:_e})]),_e[0]}(e,l);const o=i.Z.fromRectangle3D(t,n,h,R),s=i.Z.fromRectangle3D(t,n,m,M);N=i.Z.union(o,s)}else{if(w=k(e,l),w.attributes.position.values=T.Z.scaleToGeodeticHeight(w.attributes.position.values,h,n,!1),(0,u.Z)(e._offsetAttribute)){const t=w.attributes.position.values.length,n=e._offsetAttribute===g.Z.NONE?0:1,i=new Uint8Array(t/3).fill(n);w.attributes.applyOffset=new p.Z({componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}N=i.Z.fromRectangle3D(t,n,h)}return a.position||delete w.attributes.position,new f.Z({attributes:w.attributes,indices:w.indices,primitiveType:w.primitiveType,boundingSphere:N,offsetAttribute:e._offsetAttribute})},Y.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new Y({rectangle:e._rectangle,rotation:e._rotation,ellipsoid:o,stRotation:e._stRotation,granularity:i,extrudedHeight:s,height:r,vertexFormat:x.Z.POSITION_ONLY,shadowVolume:!0})};const te=new S.Z,ne=[new o.Z,new o.Z,new o.Z],ie=new v.Z,oe=new s.Z;Object.defineProperties(Y.prototype,{rectangle:{get:function(){return(0,u.Z)(this._rotatedRectangle)||(this._rotatedRectangle=q(this._rectangle,this._granularity,this._rotation,this._ellipsoid)),this._rotatedRectangle}},textureCoordinateRotationPoints:{get:function(){return(0,u.Z)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){if(0===e._stRotation)return[0,0,0,1,1,0];const t=S.Z.clone(e._rectangle,te),n=e._granularity,i=e._ellipsoid,r=q(t,n,e._rotation-e._stRotation,i,te),s=ne;s[0].x=r.west,s[0].y=r.south,s[1].x=r.west,s[1].y=r.north,s[2].x=r.east,s[2].y=r.south;const a=e.rectangle,c=v.Z.fromRotation(e._stRotation,ie),l=S.Z.center(a,oe);for(let e=0;e<3;++e){const t=s[e];t.x-=l.longitude,t.y-=l.latitude,v.Z.multiplyByVector(c,t,t),t.x+=l.longitude,t.y+=l.latitude,t.x=(t.x-a.west)/a.width,t.y=(t.y-a.south)/a.height}const u=s[0],d=s[1],h=s[2],f=new Array(6);return o.Z.pack(u,f),o.Z.pack(d,f,2),o.Z.pack(h,f,4),f}(this)),this._textureCoordinateRotationPoints}}});const re=Y},619958:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(660904),o=n(532056),r=n(11020),s=n(765153),a=n(351047),c=n(344485),l=n(571945),u=n(143450);const d=Math.cos,h=Math.sin,f=Math.sqrt,p={computePosition:function(e,t,n,i,o,s,a){const c=t.radiiSquared,l=e.nwCorner,u=e.boundingRectangle;let p=l.latitude-e.granYCos*i+o*e.granXSin;const m=d(p),_=h(p),g=c.z*_;let Z=l.longitude+i*e.granYSin+o*e.granXCos;const y=m*d(Z),b=m*h(Z),v=c.x*y,A=c.y*b,T=f(v*y+A*b+g*_);if(s.x=v/T,s.y=A/T,s.z=g/T,n){const t=e.stNwCorner;(0,r.Z)(t)?(p=t.latitude-e.stGranYCos*i+o*e.stGranXSin,Z=t.longitude+i*e.stGranYSin+o*e.stGranXCos,a.x=(Z-e.stWest)*e.lonScalar,a.y=(p-e.stSouth)*e.latScalar):(a.x=(Z-u.west)*e.lonScalar,a.y=(p-u.south)*e.latScalar)}}},m=new l.Z;let _=new i.Z;const g=new o.Z;let Z=new i.Z;const y=new a.Z;function b(e,t,n,o,r,s,a){const c=Math.cos(t),u=o*c,d=n*c,h=Math.sin(t),f=o*h,p=n*h;_=y.project(e,_),_=i.Z.subtract(_,Z,_);const g=l.Z.fromRotation(t,m);_=l.Z.multiplyByVector(g,_,_),_=i.Z.add(_,Z,_),s-=1,a-=1;const b=(e=y.unproject(_,e)).latitude,v=b+s*p,A=b-u*a,T=b-u*a+s*p,w=Math.max(b,v,A,T),E=Math.min(b,v,A,T),S=e.longitude,C=S+s*d,x=S+a*f,I=S+a*f+s*d;return{north:w,south:E,east:Math.max(S,C,x,I),west:Math.min(S,C,x,I),granYCos:u,granYSin:f,granXCos:d,granXSin:p,nwCorner:e}}p.computeOptions=function(e,t,n,i,o,r,a){let l,d=e.east,h=e.west,f=e.north,p=e.south,m=!1,_=!1;f===c.Z.PI_OVER_TWO&&(m=!0),p===-c.Z.PI_OVER_TWO&&(_=!0);const v=f-p;l=h>d?c.Z.TWO_PI-h+d:d-h;const A=Math.ceil(l/t)+1,T=Math.ceil(v/t)+1,w=l/(A-1),E=v/(T-1),S=u.Z.northwest(e,r),C=u.Z.center(e,g);0===n&&0===i||(C.longitude<S.longitude&&(C.longitude+=c.Z.TWO_PI),Z=y.project(C,Z));const x=E,I=w,P=u.Z.clone(e,o),D={granYCos:x,granYSin:0,granXCos:I,granXSin:0,nwCorner:S,boundingRectangle:P,width:A,height:T,northCap:m,southCap:_};if(0!==n){const e=b(S,n,w,E,0,A,T);if(f=e.north,p=e.south,d=e.east,h=e.west,f<-c.Z.PI_OVER_TWO||f>c.Z.PI_OVER_TWO||p<-c.Z.PI_OVER_TWO||p>c.Z.PI_OVER_TWO)throw new s.Z("Rotated rectangle is invalid.  It crosses over either the north or south pole.");D.granYCos=e.granYCos,D.granYSin=e.granYSin,D.granXCos=e.granXCos,D.granXSin=e.granXSin,P.north=f,P.south=p,P.east=d,P.west=h}if(0!==i){n-=i;const e=u.Z.northwest(P,a),t=b(e,n,w,E,0,A,T);D.stGranYCos=t.granYCos,D.stGranXCos=t.granXCos,D.stGranYSin=t.granYSin,D.stGranXSin=t.granXSin,D.stNwCorner=e,D.stWest=t.west,D.stSouth=t.south}return D};const v=p},75918:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var i=n(762031),o=n(660904),r=n(532056),s=n(449809),a=n(234146),c=n(11020),l=n(765153),u=n(63354),d=n(87200),h=n(951775),f=n(263825),p=n(61885),m=n(342209),_=n(344485),g=n(798118),Z=n(804868),y=n(143450),b=n(619958);const v=new i.Z,A=new i.Z,T=new o.Z,w=new y.Z;function E(e,t){const n=e._ellipsoid,i=t.height,o=t.width,r=t.northCap,a=t.southCap;let c=i,l=2,u=0,p=4;r&&(l-=1,c-=1,u+=1,p-=2),a&&(l-=1,c-=1,u+=1,p-=2),u+=l*o+2*c-p;const _=new Float64Array(3*u);let g,y=0,v=0;const A=T;if(r)b.Z.computePosition(t,n,!1,v,0,A),_[y++]=A.x,_[y++]=A.y,_[y++]=A.z;else for(g=0;g<o;g++)b.Z.computePosition(t,n,!1,v,g,A),_[y++]=A.x,_[y++]=A.y,_[y++]=A.z;for(g=o-1,v=1;v<i;v++)b.Z.computePosition(t,n,!1,v,g,A),_[y++]=A.x,_[y++]=A.y,_[y++]=A.z;if(v=i-1,!a)for(g=o-2;g>=0;g--)b.Z.computePosition(t,n,!1,v,g,A),_[y++]=A.x,_[y++]=A.y,_[y++]=A.z;for(g=0,v=i-2;v>0;v--)b.Z.computePosition(t,n,!1,v,g,A),_[y++]=A.x,_[y++]=A.y,_[y++]=A.z;const w=_.length/3*2,E=m.Z.createTypedArray(_.length/3,w);let S=0;for(let e=0;e<_.length/3-1;e++)E[S++]=e,E[S++]=e+1;E[S++]=_.length/3-1,E[S++]=0;const C=new d.Z({attributes:new f.Z,primitiveType:Z.Z.LINES});return C.attributes.position=new h.Z({componentDatatype:s.Z.DOUBLE,componentsPerAttribute:3,values:_}),C.indices=E,C}function S(e){const t=(e=(0,a.Z)(e,a.Z.EMPTY_OBJECT)).rectangle,n=(0,a.Z)(e.granularity,_.Z.RADIANS_PER_DEGREE),i=(0,a.Z)(e.ellipsoid,u.Z.WGS84),o=(0,a.Z)(e.rotation,0);if(!(0,c.Z)(t))throw new l.Z("rectangle is required.");if(y.Z.validate(t),t.north<t.south)throw new l.Z("options.rectangle.north must be greater than options.rectangle.south");const r=(0,a.Z)(e.height,0),s=(0,a.Z)(e.extrudedHeight,r);this._rectangle=y.Z.clone(t),this._granularity=n,this._ellipsoid=i,this._surfaceHeight=Math.max(r,s),this._rotation=o,this._extrudedHeight=Math.min(r,s),this._offsetAttribute=e.offsetAttribute,this._workerName="createRectangleOutlineGeometry"}S.packedLength=y.Z.packedLength+u.Z.packedLength+5,S.pack=function(e,t,n){if(!(0,c.Z)(e))throw new l.Z("value is required");if(!(0,c.Z)(t))throw new l.Z("array is required");return n=(0,a.Z)(n,0),y.Z.pack(e._rectangle,t,n),n+=y.Z.packedLength,u.Z.pack(e._ellipsoid,t,n),n+=u.Z.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._extrudedHeight,t[n]=(0,a.Z)(e._offsetAttribute,-1),t};const C=new y.Z,x=u.Z.clone(u.Z.UNIT_SPHERE),I={rectangle:C,ellipsoid:x,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};S.unpack=function(e,t,n){if(!(0,c.Z)(e))throw new l.Z("array is required");t=(0,a.Z)(t,0);const i=y.Z.unpack(e,t,C);t+=y.Z.packedLength;const o=u.Z.unpack(e,t,x);t+=u.Z.packedLength;const r=e[t++],s=e[t++],d=e[t++],h=e[t++],f=e[t];return(0,c.Z)(n)?(n._rectangle=y.Z.clone(i,n._rectangle),n._ellipsoid=u.Z.clone(o,n._ellipsoid),n._surfaceHeight=s,n._rotation=d,n._extrudedHeight=h,n._offsetAttribute=-1===f?void 0:f,n):(I.granularity=r,I.height=s,I.rotation=d,I.extrudedHeight=h,I.offsetAttribute=-1===f?void 0:f,new S(I))};const P=new r.Z;S.createGeometry=function(e){const t=e._rectangle,n=e._ellipsoid,o=b.Z.computeOptions(t,e._granularity,e._rotation,0,w,P);let r,a;if(_.Z.equalsEpsilon(t.north,t.south,_.Z.EPSILON10)||_.Z.equalsEpsilon(t.east,t.west,_.Z.EPSILON10))return;const l=e._surfaceHeight,u=e._extrudedHeight;let f;if(_.Z.equalsEpsilon(l,u,0,_.Z.EPSILON2)){if(r=E(e,o),r.attributes.position.values=g.Z.scaleToGeodeticHeight(r.attributes.position.values,l,n,!1),(0,c.Z)(e._offsetAttribute)){const t=r.attributes.position.values.length;f=e._offsetAttribute===p.Z.NONE?0:1;const n=new Uint8Array(t/3).fill(f);r.attributes.applyOffset=new h.Z({componentDatatype:s.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}a=i.Z.fromRectangle3D(t,n,l)}else{if(r=function(e,t){const n=e._surfaceHeight,i=e._extrudedHeight,o=e._ellipsoid,r=i,s=n,a=E(e,t),c=t.height,l=t.width,u=g.Z.scaleToGeodeticHeight(a.attributes.position.values,s,o,!1);let d=u.length;const h=new Float64Array(2*d);h.set(u);const f=g.Z.scaleToGeodeticHeight(a.attributes.position.values,r,o);h.set(f,d),a.attributes.position.values=h;const p=t.northCap,_=t.southCap;let Z=4;p&&(Z-=1),_&&(Z-=1);const y=2*(h.length/3+Z),b=m.Z.createTypedArray(h.length/3,y);d=h.length/6;let v,A=0;for(let e=0;e<d-1;e++)b[A++]=e,b[A++]=e+1,b[A++]=e+d,b[A++]=e+d+1;if(b[A++]=d-1,b[A++]=0,b[A++]=d+d-1,b[A++]=d,b[A++]=0,b[A++]=d,p)v=c-1;else{const e=l-1;b[A++]=e,b[A++]=e+d,v=l+c-2}if(b[A++]=v,b[A++]=v+d,!_){const e=l+v-1;b[A++]=e,b[A]=e+d}return a.indices=b,a}(e,o),(0,c.Z)(e._offsetAttribute)){const t=r.attributes.position.values.length/3;let n=new Uint8Array(t);e._offsetAttribute===p.Z.TOP?n=n.fill(1,0,t/2):(f=e._offsetAttribute===p.Z.NONE?0:1,n=n.fill(f)),r.attributes.applyOffset=new h.Z({componentDatatype:s.Z.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}const d=i.Z.fromRectangle3D(t,n,l,A),_=i.Z.fromRectangle3D(t,n,u,v);a=i.Z.union(d,_)}return new d.Z({attributes:r.attributes,indices:r.indices,primitiveType:Z.Z.LINES,boundingSphere:a,offsetAttribute:e._offsetAttribute})};const D=S},686592:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var i=n(660904),o=n(532056),r=n(790087),s=n(234146),a=n(11020),c=n(765153),l=n(63354),u=n(95296),d=n(217066);const h=30,f=4,p=[],m=[],_=[[0,1,3,2],[0,2,3,1],[3,2,0,1],[3,1,0,2]],g=[1,0,0,3];function Z(e){if(!u.Z.supportsBigInt())throw new d.Z("S2 required BigInt support");if(!(0,a.Z)(e))throw new c.Z("cell ID is required.");if(!Z.isValidId(e))throw new c.Z("cell ID is invalid.");this._cellId=e,this._level=Z.getLevel(e)}function y(e){0===p.length&&(w(0,0,0,0,0,0),w(0,0,0,1,0,1),w(0,0,0,2,0,2),w(0,0,0,3,0,3));const t=Number(e>>BigInt(61));let n=1&t;const i=(1<<f)-1;let o=0,r=0;for(let t=7;t>=0;t--){const s=(1<<2*(7===t?h-7*f:f))-1;n+=Number(e>>BigInt(2*t*f+1)&BigInt(s))<<2,n=m[n];const a=t*f;o+=n>>f+2<<a,r+=(n>>2&i)<<a,n&=3}return[t,o,r]}function b(e,t,n){switch(e){case 0:return new i.Z(1,t,n);case 1:return new i.Z(-t,1,n);case 2:return new i.Z(-t,-n,1);case 3:return new i.Z(-1,-n,-t);case 4:return new i.Z(n,-1,-t);default:return new i.Z(n,t,-1)}}function v(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function A(e){return 1/2147483648*e}function T(e){return 1/1073741824*e}function w(e,t,n,i,o,r){if(e===f){const e=(t<<f)+n;p[(e<<2)+i]=(o<<2)+r,m[(o<<2)+i]=(e<<2)+r}else{e++,t<<=1,n<<=1,o<<=2;const s=_[r];w(e,t+(s[0]>>1),n+(1&s[0]),i,o,r^g[0]),w(e,t+(s[1]>>1),n+(1&s[1]),i,o+1,r^g[1]),w(e,t+(s[2]>>1),n+(1&s[2]),i,o+2,r^g[2]),w(e,t+(s[3]>>1),n+(1&s[3]),i,o+3,r^g[3])}}function E(e){return e&~e+BigInt(1)}Z.fromToken=function(e){if(r.Z.typeOf.string("token",e),!Z.isValidToken(e))throw new c.Z("token is invalid.");return new Z(Z.getIdFromToken(e))},Z.isValidId=function(e){return r.Z.typeOf.bigint("cellId",e),!(e<=0)&&(!(e>>BigInt(61)>5)&&!!(e&~e+BigInt(1)&BigInt("0x1555555555555555")))},Z.isValidToken=function(e){return r.Z.typeOf.string("token",e),!!/^[0-9a-fA-F]{1,16}$/.test(e)&&Z.isValidId(Z.getIdFromToken(e))},Z.getIdFromToken=function(e){return r.Z.typeOf.string("token",e),BigInt("0x"+e+"0".repeat(16-e.length))},Z.getTokenFromId=function(e){r.Z.typeOf.bigint("cellId",e);const t=Math.floor(S[(-(n=e)&n)%BigInt(67)]/4);var n;const i=e.toString(16).replace(/0*$/,"");return Array(17-t-i.length).join("0")+i},Z.getLevel=function(e){if(r.Z.typeOf.bigint("cellId",e),!Z.isValidId(e))throw new c.Z;let t=0;for(;e!==BigInt(0)&&!(e&BigInt(1));)t++,e>>=BigInt(1);return h-(t>>1)},Z.prototype.getChild=function(e){if(r.Z.typeOf.number("index",e),e<0||e>3)throw new c.Z("child index must be in the range [0-3].");if(30===this._level)throw new c.Z("cannot get child of leaf cell.");const t=E(this._cellId)>>BigInt(2);return new Z(this._cellId+BigInt(2*e+1-4)*t)},Z.prototype.getParent=function(){if(0===this._level)throw new c.Z("cannot get parent of root cell.");const e=E(this._cellId)<<BigInt(2);return new Z(this._cellId&~e+BigInt(1)|e)},Z.prototype.getParentAtLevel=function(e){if(0===this._level||e<0||this._level<e)throw new c.Z("cannot get parent at invalid level.");const t=function(e){return BigInt(1)<<BigInt(2*(h-e))}(e);return new Z(this._cellId&-t|t)},Z.prototype.getCenter=function(e){e=(0,s.Z)(e,l.Z.WGS84);let t=function(e,t){const n=function(e,t){const n=y(e),i=n[0],o=n[1],r=n[2],s=30===t,a=!s&&(BigInt(o)^e>>BigInt(2))&BigInt(1),c=s?1:a?2:0;return[i,(o<<1)+c,(r<<1)+c]}(e,t);return function(e,t,n){const i=A(t),o=A(n);return b(e,v(i),v(o))}(n[0],n[1],n[2])}(this._cellId,this._level);t=i.Z.normalize(t,t);const n=new o.Z.fromCartesian(t,l.Z.UNIT_SPHERE);return o.Z.toCartesian(n,e,new i.Z)},Z.prototype.getVertex=function(e,t){if(r.Z.typeOf.number("index",e),e<0||e>3)throw new c.Z("vertex index must be in the range [0-3].");t=(0,s.Z)(t,l.Z.WGS84);let n=function(e,t,n){const i=y(e),o=function(e,t){const n=[[],[]],i=function(e){return 1<<h-e>>>0}(t);for(let t=0;t<2;++t){const o=e[t]&-i,r=o+i;n[t][0]=v(T(o)),n[t][1]=v(T(r))}return n}([i[1],i[2]],t),r=n>>1&1;return b(i[0],o[0][r^1&n],o[1][r])}(this._cellId,this._level,e);n=i.Z.normalize(n,n);const a=new o.Z.fromCartesian(n,l.Z.UNIT_SPHERE);return o.Z.toCartesian(a,t,new i.Z)},Z.fromFacePositionLevel=function(e,t,n){if(r.Z.typeOf.bigint("position",t),e<0||e>5)throw new c.Z("Invalid S2 Face (must be within 0-5)");if(n<0||n>h)throw new c.Z("Invalid level (must be within 0-30)");if(t<0||t>=Math.pow(4,n))throw new c.Z("Invalid Hilbert position for level");const i=(e<4?"0":"")+(e<2?"0":"")+e.toString(2),o=t.toString(2),s=Array(2*n-o.length+1).join("0"),a=Array(61-2*n).join("0");return new Z(BigInt(`0b${i}${s}${o}1${a}`))};const S=[64,0,1,39,2,15,40,23,3,12,16,59,41,19,24,54,4,64,13,10,17,62,60,28,42,30,20,51,25,44,55,47,5,32,65,38,14,22,11,58,18,53,63,9,61,27,29,50,43,46,31,37,21,57,52,8,26,49,45,36,56,7,48,35,6,34,33,0],C=Z},489381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(449809),o=n(234146),r=n(11020),s=n(765153);function a(e){e=(0,o.Z)(e,!0),this.value=a.toValue(e)}Object.defineProperties(a.prototype,{componentDatatype:{get:function(){return i.Z.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 1}},normalize:{get:function(){return!1}}}),a.toValue=function(e,t){if(!(0,r.Z)(e))throw new s.Z("show is required.");return(0,r.Z)(t)?(t[0]=e,t):new Uint8Array([e])};const c=a},617703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(660904),o=n(11020),r=n(765153),s=n(791364),a=n(344485),c=n(664288),l=n(104407),u=n(318569);const d={},h=32.184,f=2451545;function p(e,t){t=s.Z.addSeconds(e,h,t);const n=s.Z.totalDays(t)-f;return s.Z.addSeconds(t,function(e){const t=6.239996+.0172019696544*e;return.001657*Math.sin(t+.01671*Math.sin(t))}(n),t)}const m=new s.Z(2451545,0,u.Z.TAI),_=a.Z.RADIANS_PER_DEGREE,g=a.Z.RADIANS_PER_ARCSECOND,Z=new c.Z;function y(e,t,n,s,l,u,d){if(n<0&&(n=-n,l+=a.Z.PI),n<0||n>a.Z.PI)throw new r.Z("The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.");const h=e*(1-t),f=s-l,p=l,m=function(e,t){if(t<0||t>=1)throw new r.Z("eccentricity out of range.");const n=function(e,t){if(t<0||t>=1)throw new r.Z("eccentricity out of range.");const n=Math.floor(e/a.Z.TWO_PI);let i,o=(e-=n*a.Z.TWO_PI)+t*Math.sin(e)/(1-Math.sin(e+t)+Math.sin(e)),s=Number.MAX_VALUE;for(i=0;i<b&&Math.abs(s-o)>v;++i)s=o,o=s-(s-t*Math.sin(s)-e)/(1-t*Math.cos(s));if(i>=b)throw new r.Z("Kepler equation did not converge");return s=o+n*a.Z.TWO_PI,s}(e,t);return function(e,t){if(t<0||t>=1)throw new r.Z("eccentricity out of range.");const n=Math.floor(e/a.Z.TWO_PI);e-=n*a.Z.TWO_PI;const i=Math.cos(e)-t,o=Math.sin(e)*Math.sqrt(1-t*t);let s=Math.atan2(o,i);return s=a.Z.zeroToTwoPi(s),e<0&&(s-=a.Z.TWO_PI),s+=n*a.Z.TWO_PI,s}(n,t)}(u-s,t),_=function(e,t){if(e<0)throw new r.Z("eccentricity cannot be negative.");return e<=0?"Circular":e<1?"Elliptical":e<=1?"Parabolic":"Hyperbolic"}(t);if("Hyperbolic"===_&&Math.abs(a.Z.negativePiToPi(m))>=Math.acos(-1/t))throw new r.Z("The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.");!function(e,t,n,i){if(t<0||t>a.Z.PI)throw new r.Z("inclination out of range");const s=Math.cos(e),l=Math.sin(e),u=Math.cos(t),d=Math.sin(t),h=Math.cos(n),f=Math.sin(n);(0,o.Z)(i)?(i[0]=h*s-f*l*u,i[1]=f*s+h*l*u,i[2]=l*d,i[3]=-h*l-f*s*u,i[4]=-f*l+h*s*u,i[5]=s*d,i[6]=f*d,i[7]=-h*d,i[8]=u):i=new c.Z(h*s-f*l*u,-h*l-f*s*u,f*d,f*s+h*l*u,-f*l+h*s*u,-h*d,l*d,s*d,u)}(f,n,p,Z);const g=h*(1+t),y=Math.cos(m),A=Math.sin(m),T=1+t*y;if(T<=a.Z.Epsilon10)throw new r.Z("elements cannot be converted to cartesian");const w=g/T;return(0,o.Z)(d)?(d.x=w*y,d.y=w*A,d.z=0):d=new i.Z(w*y,w*A,0),c.Z.multiplyByVector(Z,d,d)}const b=50,v=a.Z.EPSILON8,A=100.46645683*_,T=1295977422.83429*g,w=1e-7*-79,E=232*1e-7,S=1e-7*-52,C=1e-7*-116,x=new s.Z(0,0,u.Z.TAI);function I(e,t){p(e,x);const n=(x.dayNumber-m.dayNumber+(x.secondsOfDay-m.secondsOfDay)/l.Z.SECONDS_PER_DAY)/l.Z.DAYS_PER_JULIAN_CENTURY,i=n*n,o=i*n,r=o*n;let s=383397.7725+.004*n,a=.055545526-16e-9*n;const c=5.15668983*_;let u=-8e-5*n+.02966*i-42e-6*o-13e-8*r;const d=83.35324312*_;let h=14643420.2669*n-38.2702*i-.045047*o+21301e-8*r;const f=125.04455501*_;let Z=-6967919.3631*n+6.3602*i+.007625*o-3586e-8*r;const b=218.31664563*_;let v=1732559343.4847*n-6.391*i+.006588*o-3169e-8*r;const A=297.85019547*_+g*(1602961601.209*n-6.3706*i+.006593*o-3169e-8*r),T=134.96340251*_+g*(1717915923.2178*n+31.8792*i+.051635*o-2447e-7*r),w=357.52910918*_+g*(129596581.0481*n-.5532*i+136e-6*o-1149e-8*r),E=310.17137918*_-g*(6967051.436*n+6.2068*i+.007618*o-3219e-8*r),S=2*A,C=4*A,I=6*A,P=2*T,D=3*T,O=4*T,L=2*(93.27209062*_+g*(1739527262.8478*n-12.7512*i-.001037*o+417e-8*r));s+=3400.4*Math.cos(S)-635.6*Math.cos(S-T)-235.6*Math.cos(T)+218.1*Math.cos(S-w)+181*Math.cos(S+T),a+=.014216*Math.cos(S-T)+.008551*Math.cos(S-P)-.001383*Math.cos(T)+.001356*Math.cos(S+T)-.001147*Math.cos(C-D)-914e-6*Math.cos(C-P)+869e-6*Math.cos(S-w-T)-627e-6*Math.cos(S)-394e-6*Math.cos(C-O)+282e-6*Math.cos(S-w-P)-279e-6*Math.cos(A-T)-236e-6*Math.cos(P)+231e-6*Math.cos(C)+229e-6*Math.cos(I-O)-201e-6*Math.cos(P-L),u+=486.26*Math.cos(S-L)-40.13*Math.cos(S)+37.51*Math.cos(L)+25.73*Math.cos(P-L)+19.97*Math.cos(S-w-L),h+=-55609*Math.sin(S-T)-34711*Math.sin(S-P)-9792*Math.sin(T)+9385*Math.sin(C-D)+7505*Math.sin(C-P)+5318*Math.sin(S+T)+3484*Math.sin(C-O)-3417*Math.sin(S-w-T)-2530*Math.sin(I-O)-2376*Math.sin(S)-2075*Math.sin(S-D)-1883*Math.sin(P)-1736*Math.sin(I-5*T)+1626*Math.sin(w)-1370*Math.sin(I-D),Z+=-5392*Math.sin(S-L)-540*Math.sin(w)-441*Math.sin(S)+423*Math.sin(L)-288*Math.sin(P-L),v+=-3332.9*Math.sin(S)+1197.4*Math.sin(S-T)-662.5*Math.sin(w)+396.3*Math.sin(T)-218*Math.sin(S-w);const N=2*E,M=3*E;u+=46.997*Math.cos(E)*n-.614*Math.cos(S-L+E)*n+.614*Math.cos(S-L-E)*n-.0297*Math.cos(N)*i-.0335*Math.cos(E)*i+.0012*Math.cos(S-L+N)*i-16e-5*Math.cos(E)*o+4e-5*Math.cos(M)*o+4e-5*Math.cos(N)*o;const R=2.116*Math.sin(E)*n-.111*Math.sin(S-L-E)*n-.0015*Math.sin(E)*i;return h+=R,v+=R,Z+=-520.77*Math.sin(E)*n+13.66*Math.sin(S-L+E)*n+1.12*Math.sin(S-E)*n-1.06*Math.sin(L-E)*n+.66*Math.sin(N)*i+.371*Math.sin(E)*i-.035*Math.sin(S-L+N)*i-.015*Math.sin(S-L+E)*i+.0014*Math.sin(E)*o-.0011*Math.sin(M)*o-9e-4*Math.sin(N)*o,s*=1e3,y(s,a,c+u*g,d+h*g,f+Z*g,b+v*g,t)}const P=new c.Z(1.0000000000000002,5619723173785822e-31,4690511510146299e-34,-5154129427414611e-31,.9174820620691819,-.39777715593191376,-223970096136568e-30,.39777715593191376,.9174820620691819);let D=new i.Z;d.computeSunPositionInEarthInertialFrame=function(e,t){return(0,o.Z)(e)||(e=s.Z.now()),(0,o.Z)(t)||(t=new i.Z),D=function(e,t){p(e,x);const n=(x.dayNumber-m.dayNumber+(x.secondsOfDay-m.secondsOfDay)/l.Z.SECONDS_PER_DAY)/(10*l.Z.DAYS_PER_JULIAN_CENTURY),i=.3595362*n,o=149598022260.7121+957426.3679999999*Math.cos(16002*i)+-2243968.05*Math.sin(16002*i)+-2273887.624*Math.cos(21863*i)+-688150.202*Math.sin(21863*i)+927506.794*Math.cos(32004*i)+1017265.516*Math.sin(32004*i)+-119678.29599999999*Math.cos(10931*i)+807828.498*Math.sin(10931*i)+478713.18399999995*Math.cos(14529*i)+209437.01799999998*Math.sin(14529*i)+-613351.267*Math.cos(16368*i)+359034.888*Math.sin(16368*i)+284235.953*Math.cos(15318*i)+-418874.03599999996*Math.sin(15318*i)+-164557.657*Math.cos(32794*i)+329115.314*Math.sin(32794*i),r=A+T*n+-325e-7*Math.cos(10*i)+-105e-7*Math.sin(10*i)+-322e-7*Math.cos(16002*i)+-137e-7*Math.sin(16002*i)+w*Math.cos(21863*i)+258e-7*Math.sin(21863*i)+E*Math.cos(10931*i)+35e-7*Math.sin(10931*i)+S*Math.cos(1473*i)+C*Math.sin(1473*i)+97e-7*Math.cos(32004*i)+-88e-7*Math.sin(32004*i)+55e-7*Math.cos(4387*i)+-112e-7*Math.sin(4387*i)+-41e-7*Math.cos(73*i)+-8e-6*Math.sin(73*i);return y(o,.0167086342-.0004203654*n,469.97289*g*n,102.93734808*_+11612.3529*g*n,174.87317577*_-8679.27034*g*n,r,t)}(e,D),t=i.Z.negate(D,t),function(e,t){t=I(e,t),i.Z.multiplyByScalar(t,-.01215058143522694,t)}(e,D),i.Z.subtract(t,D,t),c.Z.multiplyByVector(P,t,t),t},d.computeMoonPositionInEarthInertialFrame=function(e,t){return(0,o.Z)(e)||(e=s.Z.now()),t=I(e,t),c.Z.multiplyByVector(P,t,t),t};const O=d},252054:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(660904),o=n(790087),r=n(234146),s=n(11020),a=n(802877);function c(e){const t=(0,r.Z)(e.radius,1),n={radii:new i.Z(t,t,t),stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,subdivisions:e.subdivisions};this._ellipsoidGeometry=new a.Z(n),this._workerName="createSphereOutlineGeometry"}c.packedLength=a.Z.packedLength,c.pack=function(e,t,n){return o.Z.typeOf.object("value",e),a.Z.pack(e._ellipsoidGeometry,t,n)};const l=new a.Z,u={radius:void 0,radii:new i.Z,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0};c.unpack=function(e,t,n){const o=a.Z.unpack(e,t,l);return u.stackPartitions=o._stackPartitions,u.slicePartitions=o._slicePartitions,u.subdivisions=o._subdivisions,(0,s.Z)(n)?(i.Z.clone(o._radii,u.radii),n._ellipsoidGeometry=new a.Z(u),n):(u.radius=o._radii.x,new c(u))},c.createGeometry=function(e){return a.Z.createGeometry(e._ellipsoidGeometry)};const d=c},361942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(660904),o=n(790087),r=n(344485),s=n(234146),a=n(765153),c=n(360846);function l(){this.times=void 0,this.points=void 0,a.Z.throwInstantiationError()}l.getPointType=function(e){if("number"==typeof e)return Number;if(e instanceof i.Z)return i.Z;if(e instanceof c.Z)return c.Z;throw new a.Z("point must be a Cartesian3, Quaternion, or number.")},l.prototype.evaluate=a.Z.throwInstantiationError,l.prototype.findTimeInterval=function(e,t){const n=this.times,i=n.length;if(o.Z.typeOf.number("time",e),e<n[0]||e>n[i-1])throw new a.Z("time is out of range.");if(e>=n[t=(0,s.Z)(t,0)]){if(t+1<i&&e<n[t+1])return t;if(t+2<i&&e<n[t+2])return t+1}else if(t-1>=0&&e>=n[t-1])return t-1;let r;if(e>n[t])for(r=t;r<i-1&&!(e>=n[r]&&e<n[r+1]);++r);else for(r=t-1;r>=0&&!(e>=n[r]&&e<n[r+1]);--r);return r===i-1&&(r=i-2),r},l.prototype.wrapTime=function(e){o.Z.typeOf.number("time",e);const t=this.times,n=t[t.length-1],i=t[0],r=n-i;let s;return e<i&&(s=Math.floor((i-e)/r)+1,e+=s*r),e>n&&(s=Math.floor((e-n)/r)+1,e-=s*r),e},l.prototype.clampTime=function(e){o.Z.typeOf.number("time",e);const t=this.times;return r.Z.clamp(e,t[0],t[t.length-1])};const u=l},835511:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(234146),o=n(11020),r=n(765153),s=n(361942);function a(e){const t=(e=(0,i.Z)(e,i.Z.EMPTY_OBJECT)).points,n=e.times;if(!(0,o.Z)(t)||!(0,o.Z)(n))throw new r.Z("points and times are required.");if(t.length<2)throw new r.Z("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new r.Z("times.length must be equal to points.length.");this._times=n,this._points=t,this._pointType=s.Z.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(a.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),a.prototype.findTimeInterval=s.Z.prototype.findTimeInterval,a.prototype.wrapTime=s.Z.prototype.wrapTime,a.prototype.clampTime=s.Z.prototype.clampTime,a.prototype.evaluate=function(e,t){const n=this.points;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);const i=this._lastTimeIndex,r=this._pointType;return r===Number?n[i]:((0,o.Z)(t)||(t=new r),r.clone(n[i],t))};const c=a},910811:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(765153);function o(){i.Z.throwInstantiationError()}Object.defineProperties(o.prototype,{credits:{get:i.Z.throwInstantiationError},waterMask:{get:i.Z.throwInstantiationError}}),o.prototype.interpolateHeight=i.Z.throwInstantiationError,o.prototype.isChildAvailable=i.Z.throwInstantiationError,o.prototype.createMesh=i.Z.throwInstantiationError,o.prototype.upsample=i.Z.throwInstantiationError,o.prototype.wasCreatedByUpsampling=i.Z.throwInstantiationError,o.maximumAsynchronousTasks=5;const r=o},502954:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(393766),o=n(405254),r=n(660904),s=n(449809),a=n(234146),c=n(11020),l=n(344485),u=n(659635),d=n(497286),h=n(155772);const f=new r.Z,p=new r.Z,m=new o.Z,_=new u.Z,g=new u.Z,Z=Math.pow(2,12);function y(e,t,n,i,o,s,l,d,m,y){let b,v,A=h.Z.NONE;if((0,c.Z)(t)&&(0,c.Z)(n)&&(0,c.Z)(i)&&(0,c.Z)(o)){const e=t.minimum,s=t.maximum,a=r.Z.subtract(s,e,p),c=i-n;A=Math.max(r.Z.maximumComponent(a),c)<Z-1?h.Z.BITS12:h.Z.NONE,b=u.Z.inverseTransformation(o,new u.Z);const l=r.Z.negate(e,f);u.Z.multiply(u.Z.fromTranslation(l,_),b,b);const d=f;d.x=1/a.x,d.y=1/a.y,d.z=1/a.z,u.Z.multiply(u.Z.fromScale(d,_),b,b),v=u.Z.clone(o),u.Z.setTranslation(v,r.Z.ZERO,v),o=u.Z.clone(o,new u.Z);const m=u.Z.fromTranslation(e,_),y=u.Z.fromScale(a,g),T=u.Z.multiply(m,y,_);u.Z.multiply(o,T,o),u.Z.multiply(v,T,v)}this.quantization=A,this.minimumHeight=n,this.maximumHeight=i,this.center=r.Z.clone(e),this.toScaledENU=b,this.fromScaledENU=o,this.matrix=v,this.hasVertexNormals=s,this.hasWebMercatorT=(0,a.Z)(l,!1),this.hasGeodeticSurfaceNormals=(0,a.Z)(d,!1),this.exaggeration=(0,a.Z)(m,1),this.exaggerationRelativeHeight=(0,a.Z)(y,0),this.stride=0,this._offsetGeodeticSurfaceNormal=0,this._offsetVertexNormal=0,this._calculateStrideAndOffsets()}y.prototype.encode=function(e,t,n,s,a,c,d,p){const _=s.x,g=s.y;if(this.quantization===h.Z.BITS12){(n=u.Z.multiplyByPoint(this.toScaledENU,n,f)).x=l.Z.clamp(n.x,0,1),n.y=l.Z.clamp(n.y,0,1),n.z=l.Z.clamp(n.z,0,1);const r=this.maximumHeight-this.minimumHeight,s=l.Z.clamp((a-this.minimumHeight)/r,0,1);o.Z.fromElements(n.x,n.y,m);const c=i.Z.compressTextureCoordinates(m);o.Z.fromElements(n.z,s,m);const h=i.Z.compressTextureCoordinates(m);o.Z.fromElements(_,g,m);const p=i.Z.compressTextureCoordinates(m);if(e[t++]=c,e[t++]=h,e[t++]=p,this.hasWebMercatorT){o.Z.fromElements(d,0,m);const n=i.Z.compressTextureCoordinates(m);e[t++]=n}}else r.Z.subtract(n,this.center,f),e[t++]=f.x,e[t++]=f.y,e[t++]=f.z,e[t++]=a,e[t++]=_,e[t++]=g,this.hasWebMercatorT&&(e[t++]=d);return this.hasVertexNormals&&(e[t++]=i.Z.octPackFloat(c)),this.hasGeodeticSurfaceNormals&&(e[t++]=p.x,e[t++]=p.y,e[t++]=p.z),t};const b=new r.Z,v=new r.Z;y.prototype.addGeodeticSurfaceNormals=function(e,t,n){if(this.hasGeodeticSurfaceNormals)return;const i=this.stride,o=e.length/i;this.hasGeodeticSurfaceNormals=!0,this._calculateStrideAndOffsets();const r=this.stride;for(let s=0;s<o;s++){for(let n=0;n<i;n++){const o=s*i+n;t[s*r+n]=e[o]}const o=this.decodePosition(t,s,b),a=n.geodeticSurfaceNormal(o,v),c=s*r+this._offsetGeodeticSurfaceNormal;t[c]=a.x,t[c+1]=a.y,t[c+2]=a.z}},y.prototype.removeGeodeticSurfaceNormals=function(e,t){if(!this.hasGeodeticSurfaceNormals)return;const n=this.stride,i=e.length/n;this.hasGeodeticSurfaceNormals=!1,this._calculateStrideAndOffsets();const o=this.stride;for(let r=0;r<i;r++)for(let i=0;i<o;i++){const s=r*n+i;t[r*o+i]=e[s]}},y.prototype.decodePosition=function(e,t,n){if((0,c.Z)(n)||(n=new r.Z),t*=this.stride,this.quantization===h.Z.BITS12){const o=i.Z.decompressTextureCoordinates(e[t],m);n.x=o.x,n.y=o.y;const r=i.Z.decompressTextureCoordinates(e[t+1],m);return n.z=r.x,u.Z.multiplyByPoint(this.fromScaledENU,n,n)}return n.x=e[t],n.y=e[t+1],n.z=e[t+2],r.Z.add(n,this.center,n)},y.prototype.getExaggeratedPosition=function(e,t,n){n=this.decodePosition(e,t,n);const i=this.exaggeration,o=this.exaggerationRelativeHeight;if(1!==i&&this.hasGeodeticSurfaceNormals){const r=this.decodeGeodeticSurfaceNormal(e,t,v),s=this.decodeHeight(e,t),a=d.Z.getHeight(s,i,o)-s;n.x+=r.x*a,n.y+=r.y*a,n.z+=r.z*a}return n},y.prototype.decodeTextureCoordinates=function(e,t,n){return(0,c.Z)(n)||(n=new o.Z),t*=this.stride,this.quantization===h.Z.BITS12?i.Z.decompressTextureCoordinates(e[t+2],n):o.Z.fromElements(e[t+4],e[t+5],n)},y.prototype.decodeHeight=function(e,t){return t*=this.stride,this.quantization===h.Z.BITS12?i.Z.decompressTextureCoordinates(e[t+1],m).y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight:e[t+3]},y.prototype.decodeWebMercatorT=function(e,t){return t*=this.stride,this.quantization===h.Z.BITS12?i.Z.decompressTextureCoordinates(e[t+3],m).x:e[t+6]},y.prototype.getOctEncodedNormal=function(e,t,n){const i=e[t=t*this.stride+this._offsetVertexNormal]/256,r=Math.floor(i),s=256*(i-r);return o.Z.fromElements(r,s,n)},y.prototype.decodeGeodeticSurfaceNormal=function(e,t,n){return t=t*this.stride+this._offsetGeodeticSurfaceNormal,n.x=e[t],n.y=e[t+1],n.z=e[t+2],n},y.prototype._calculateStrideAndOffsets=function(){let e=0;this.quantization===h.Z.BITS12?e+=3:e+=6,this.hasWebMercatorT&&(e+=1),this.hasVertexNormals&&(this._offsetVertexNormal=e,e+=1),this.hasGeodeticSurfaceNormals&&(this._offsetGeodeticSurfaceNormal=e,e+=3),this.stride=e};const A={position3DAndHeight:0,textureCoordAndEncodedNormals:1,geodeticSurfaceNormal:2},T={compressed0:0,compressed1:1,geodeticSurfaceNormal:2};y.prototype.getAttributes=function(e){const t=s.Z.FLOAT,n=s.Z.getSizeInBytes(t),i=this.stride*n;let o=0;const r=[];function a(s,a){r.push({index:s,vertexBuffer:e,componentDatatype:t,componentsPerAttribute:a,offsetInBytes:o,strideInBytes:i}),o+=a*n}if(this.quantization===h.Z.NONE){a(A.position3DAndHeight,4);let e=2;e+=this.hasWebMercatorT?1:0,e+=this.hasVertexNormals?1:0,a(A.textureCoordAndEncodedNormals,e),this.hasGeodeticSurfaceNormals&&a(A.geodeticSurfaceNormal,3)}else{const e=this.hasWebMercatorT||this.hasVertexNormals,t=this.hasWebMercatorT&&this.hasVertexNormals;a(T.compressed0,e?4:3),t&&a(T.compressed1,1),this.hasGeodeticSurfaceNormals&&a(T.geodeticSurfaceNormal,3)}return r},y.prototype.getAttributeLocations=function(){return this.quantization===h.Z.NONE?A:T},y.clone=function(e,t){if((0,c.Z)(e))return(0,c.Z)(t)||(t=new y),t.quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=r.Z.clone(e.center),t.toScaledENU=u.Z.clone(e.toScaledENU),t.fromScaledENU=u.Z.clone(e.fromScaledENU),t.matrix=u.Z.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t.hasGeodeticSurfaceNormals=e.hasGeodeticSurfaceNormals,t.exaggeration=e.exaggeration,t.exaggerationRelativeHeight=e.exaggerationRelativeHeight,t._calculateStrideAndOffsets(),t};const w=y},178611:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(234146);const o=function(e,t,n,o,r,s,a,c,l,u,d,h,f,p,m,_){this.center=e,this.vertices=t,this.stride=(0,i.Z)(u,6),this.indices=n,this.indexCountWithoutSkirts=o,this.vertexCountWithoutSkirts=r,this.minimumHeight=s,this.maximumHeight=a,this.boundingSphere3D=c,this.occludeePointInScaledSpace=l,this.orientedBoundingBox=d,this.encoding=h,this.westIndicesSouthToNorth=f,this.southIndicesEastToWest=p,this.eastIndicesNorthToSouth=m,this.northIndicesWestToEast=_}},96828:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(11020),o=n(765153),r=n(342209),s=n(344485);function a(){o.Z.throwInstantiationError()}Object.defineProperties(a.prototype,{errorEvent:{get:o.Z.throwInstantiationError},credit:{get:o.Z.throwInstantiationError},tilingScheme:{get:o.Z.throwInstantiationError},ready:{get:o.Z.throwInstantiationError},readyPromise:{get:o.Z.throwInstantiationError},hasWaterMask:{get:o.Z.throwInstantiationError},hasVertexNormals:{get:o.Z.throwInstantiationError},availability:{get:o.Z.throwInstantiationError}});const c=[];a.getRegularGridIndices=function(e,t){if(e*t>=s.Z.FOUR_GIGABYTES)throw new o.Z("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=c[e];(0,i.Z)(n)||(c[e]=n=[]);let r=n[t];return(0,i.Z)(r)||(r=e*t<s.Z.SIXTY_FOUR_KILOBYTES?n[t]=new Uint16Array((e-1)*(t-1)*6):n[t]=new Uint32Array((e-1)*(t-1)*6),h(e,t,r,0)),r};const l=[];a.getRegularGridIndicesAndEdgeIndices=function(e,t){if(e*t>=s.Z.FOUR_GIGABYTES)throw new o.Z("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=l[e];(0,i.Z)(n)||(l[e]=n=[]);let r=n[t];if(!(0,i.Z)(r)){const i=a.getRegularGridIndices(e,t),o=d(e,t),s=o.westIndicesSouthToNorth,c=o.southIndicesEastToWest,l=o.eastIndicesNorthToSouth,u=o.northIndicesWestToEast;r=n[t]={indices:i,westIndicesSouthToNorth:s,southIndicesEastToWest:c,eastIndicesNorthToSouth:l,northIndicesWestToEast:u}}return r};const u=[];function d(e,t){const n=new Array(t),i=new Array(e),o=new Array(t),r=new Array(e);let s;for(s=0;s<e;++s)r[s]=s,i[s]=e*t-1-s;for(s=0;s<t;++s)o[s]=(s+1)*e-1,n[s]=(t-s-1)*e;return{westIndicesSouthToNorth:n,southIndicesEastToWest:i,eastIndicesNorthToSouth:o,northIndicesWestToEast:r}}function h(e,t,n,i){let o=0;for(let r=0;r<t-1;++r){for(let t=0;t<e-1;++t){const t=o,r=t+e,s=r+1,a=t+1;n[i++]=t,n[i++]=r,n[i++]=a,n[i++]=a,n[i++]=r,n[i++]=s,++o}++o}}function f(e,t,n,i){let o=e[0];const r=e.length;for(let s=1;s<r;++s){const r=e[s];n[i++]=o,n[i++]=r,n[i++]=t,n[i++]=t,n[i++]=r,n[i++]=t+1,o=r,++t}return i}a.getRegularGridAndSkirtIndicesAndEdgeIndices=function(e,t){if(e*t>=s.Z.FOUR_GIGABYTES)throw new o.Z("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=u[e];(0,i.Z)(n)||(u[e]=n=[]);let c=n[t];if(!(0,i.Z)(c)){const i=e*t,o=(e-1)*(t-1)*6,s=2*e+2*t,l=i+s,u=o+6*Math.max(0,s-4),f=d(e,t),p=f.westIndicesSouthToNorth,m=f.southIndicesEastToWest,_=f.eastIndicesNorthToSouth,g=f.northIndicesWestToEast,Z=r.Z.createTypedArray(l,u);h(e,t,Z,0),a.addSkirtIndices(p,m,_,g,i,Z,o),c=n[t]={indices:Z,westIndicesSouthToNorth:p,southIndicesEastToWest:m,eastIndicesNorthToSouth:_,northIndicesWestToEast:g,indexCountWithoutSkirts:o}}return c},a.addSkirtIndices=function(e,t,n,i,o,r,s){let a=o;s=f(e,a,r,s),a+=e.length,s=f(t,a,r,s),a+=t.length,s=f(n,a,r,s),a+=n.length,f(i,a,r,s)},a.heightmapTerrainQuality=.25,a.getEstimatedLevelZeroGeometricErrorForAHeightmap=function(e,t,n){return 2*e.maximumRadius*Math.PI*a.heightmapTerrainQuality/(t*n)},a.prototype.requestTileGeometry=o.Z.throwInstantiationError,a.prototype.getLevelMaximumGeometricError=o.Z.throwInstantiationError,a.prototype.getTileDataAvailable=o.Z.throwInstantiationError,a.prototype.loadTileDataAvailability=o.Z.throwInstantiationError;const p=a},155772:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({NONE:0,BITS12:1})},649638:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(486598),o=n(532056),r=n(11020),s=n(143450);function a(e,t){this._tilingScheme=e,this._maximumLevel=t,this._rootNodes=[]}const c=new s.Z;function l(e,t,n,i){const o=i.length;for(let r=0;r<o;++r){const o=i[r];if(o.x===t&&o.y===n&&o.level===e)return!0}return!1}a.prototype.addAvailableTileRange=function(e,t,n,i,o){const r=this._tilingScheme,s=this._rootNodes;if(0===e)for(let a=n;a<=o;++a)for(let n=t;n<=i;++n)l(e,n,a,s)||s.push(new m(r,void 0,0,n,a));r.tileXYToRectangle(t,n,e,c);const a=c.west,u=c.north;r.tileXYToRectangle(i,o,e,c);const d=c.east,h=new _(e,a,c.south,d,u);for(let e=0;e<s.length;++e){const t=s[e];g(t.extent,h)&&Z(this._maximumLevel,t,h)}},a.prototype.computeMaximumLevelAtPosition=function(e){let t;for(let n=0;n<this._rootNodes.length;++n){const i=this._rootNodes[n];if(v(i.extent,e)){t=i;break}}return(0,r.Z)(t)?A(void 0,t,e):-1};const u=[],d=[],h=new s.Z,f=new s.Z;a.prototype.computeBestAvailableLevelOverRectangle=function(e){const t=u;t.length=0,e.east<e.west?(t.push(s.Z.fromRadians(-Math.PI,e.south,e.east,e.north,h)),t.push(s.Z.fromRadians(e.west,e.south,Math.PI,e.north,f))):t.push(e);const n=d;let i;for(n.length=0,i=0;i<this._rootNodes.length;++i)T(n,this._rootNodes[i],t);for(i=n.length-1;i>=0;--i)if((0,r.Z)(n[i])&&0===n[i].length)return i;return 0};const p=new o.Z;function m(e,t,n,i,o){this.tilingScheme=e,this.parent=t,this.level=n,this.x=i,this.y=o,this.extent=e.tileXYToRectangle(i,o,n),this.rectangles=[],this._sw=void 0,this._se=void 0,this._nw=void 0,this._ne=void 0}function _(e,t,n,i,o){this.level=e,this.west=t,this.south=n,this.east=i,this.north=o}function g(e,t){const n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),o=Math.min(e.east,t.east);return i<Math.min(e.north,t.north)&&n<o}function Z(e,t,n){for(;t.level<e;)if(b(t.nw.extent,n))t=t.nw;else if(b(t.ne.extent,n))t=t.ne;else if(b(t.sw.extent,n))t=t.sw;else{if(!b(t.se.extent,n))break;t=t.se}if(0===t.rectangles.length||t.rectangles[t.rectangles.length-1].level<=n.level)t.rectangles.push(n);else{let e=(0,i.Z)(t.rectangles,n.level,y);e<0&&(e=~e),t.rectangles.splice(e,0,n)}}function y(e,t){return e.level-t}function b(e,t){return t.west>=e.west&&t.east<=e.east&&t.south>=e.south&&t.north<=e.north}function v(e,t){return t.longitude>=e.west&&t.longitude<=e.east&&t.latitude>=e.south&&t.latitude<=e.north}function A(e,t,n){let i=0,o=!1;for(;!o;){const e=t._nw&&v(t._nw.extent,n),r=t._ne&&v(t._ne.extent,n),s=t._sw&&v(t._sw.extent,n),a=t._se&&v(t._se.extent,n);if(e+r+s+a>1){e&&(i=Math.max(i,A(t,t._nw,n))),r&&(i=Math.max(i,A(t,t._ne,n))),s&&(i=Math.max(i,A(t,t._sw,n))),a&&(i=Math.max(i,A(t,t._se,n)));break}e?t=t._nw:r?t=t._ne:s?t=t._sw:a?t=t._se:o=!0}for(;t!==e;){const e=t.rectangles;for(let t=e.length-1;t>=0&&e[t].level>i;--t){const o=e[t];v(o,n)&&(i=o.level)}t=t.parent}return i}function T(e,t,n){if(!t)return;let i,o=!1;for(i=0;i<n.length;++i)o=o||g(t.extent,n[i]);if(!o)return;const r=t.rectangles;for(i=0;i<r.length;++i){const t=r[i];e[t.level]||(e[t.level]=n),e[t.level]=w(e[t.level],t)}T(e,t._nw,n),T(e,t._ne,n),T(e,t._sw,n),T(e,t._se,n)}function w(e,t){const n=[];for(let i=0;i<e.length;++i){const o=e[i];g(o,t)?(o.west<t.west&&n.push(new s.Z(o.west,o.south,t.west,o.north)),o.east>t.east&&n.push(new s.Z(t.east,o.south,o.east,o.north)),o.south<t.south&&n.push(new s.Z(Math.max(t.west,o.west),o.south,Math.min(t.east,o.east),t.south)),o.north>t.north&&n.push(new s.Z(Math.max(t.west,o.west),t.north,Math.min(t.east,o.east),o.north))):n.push(o)}return n}a.prototype.isTileAvailable=function(e,t,n){const i=this._tilingScheme.tileXYToRectangle(t,n,e,c);return s.Z.center(i,p),this.computeMaximumLevelAtPosition(p)>=e},a.prototype.computeChildMaskForTile=function(e,t,n){const i=e+1;if(i>=this._maximumLevel)return 0;let o=0;return o|=this.isTileAvailable(i,2*t,2*n+1)?1:0,o|=this.isTileAvailable(i,2*t+1,2*n+1)?2:0,o|=this.isTileAvailable(i,2*t,2*n)?4:0,o|=this.isTileAvailable(i,2*t+1,2*n)?8:0,o},Object.defineProperties(m.prototype,{nw:{get:function(){return this._nw||(this._nw=new m(this.tilingScheme,this,this.level+1,2*this.x,2*this.y)),this._nw}},ne:{get:function(){return this._ne||(this._ne=new m(this.tilingScheme,this,this.level+1,2*this.x+1,2*this.y)),this._ne}},sw:{get:function(){return this._sw||(this._sw=new m(this.tilingScheme,this,this.level+1,2*this.x,2*this.y+1)),this._sw}},se:{get:function(){return this._se||(this._se=new m(this.tilingScheme,this,this.level+1,2*this.x+1,2*this.y+1)),this._se}}});const E=a},678308:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={WEST:0,NORTH:1,EAST:2,SOUTH:3,NORTHWEST:4,NORTHEAST:5,SOUTHWEST:6,SOUTHEAST:7}},709366:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(234146),o=n(11020),r=n(765453);function s(e,t,n,o,r,s,a){this.provider=e,this.message=t,this.x=n,this.y=o,this.level=r,this.timesRetried=(0,i.Z)(s,0),this.retry=!1,this.error=a}s.reportError=function(e,t,n,i,a,c,l,u){let d=e;return(0,o.Z)(e)?(d.provider=t,d.message=i,d.x=a,d.y=c,d.level=l,d.retry=!1,d.error=u,++d.timesRetried):d=new s(t,i,a,c,l,0,u),(0,o.Z)(n)&&n.numberOfListeners>0?n.raiseEvent(d):(0,o.Z)(t)&&console.log(`An error occurred in "${t.constructor.name}": ${(0,r.Z)(i)}`),d},s.reportSuccess=function(e){(0,o.Z)(e)&&(e.timesRetried=-1)};const a=s},691156:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(486598),o=n(234146),r=n(11020),s=n(765153),a=n(282910),c=n(17486),l=n(614031),u=n(551332),d=n(791364),h=n(674881);function f(e,t){return d.Z.compare(e.start,t.start)}function p(e){if(this._intervals=[],this._changedEvent=new a.Z,(0,r.Z)(e)){const t=e.length;for(let n=0;n<t;n++)this.addInterval(e[n])}}Object.defineProperties(p.prototype,{changedEvent:{get:function(){return this._changedEvent}},start:{get:function(){const e=this._intervals;return 0===e.length?void 0:e[0].start}},isStartIncluded:{get:function(){const e=this._intervals;return 0!==e.length&&e[0].isStartIncluded}},stop:{get:function(){const e=this._intervals,t=e.length;return 0===t?void 0:e[t-1].stop}},isStopIncluded:{get:function(){const e=this._intervals,t=e.length;return 0!==t&&e[t-1].isStopIncluded}},length:{get:function(){return this._intervals.length}},isEmpty:{get:function(){return 0===this._intervals.length}}}),p.prototype.equals=function(e,t){if(this===e)return!0;if(!(e instanceof p))return!1;const n=this._intervals,i=e._intervals,o=n.length;if(o!==i.length)return!1;for(let e=0;e<o;e++)if(!h.Z.equals(n[e],i[e],t))return!1;return!0},p.prototype.get=function(e){if(!(0,r.Z)(e))throw new s.Z("index is required.");return this._intervals[e]},p.prototype.removeAll=function(){this._intervals.length>0&&(this._intervals.length=0,this._changedEvent.raiseEvent(this))},p.prototype.findIntervalContainingDate=function(e){const t=this.indexOf(e);return t>=0?this._intervals[t]:void 0},p.prototype.findDataForIntervalContainingDate=function(e){const t=this.indexOf(e);return t>=0?this._intervals[t].data:void 0},p.prototype.contains=function(e){return this.indexOf(e)>=0};const m=new h.Z;p.prototype.indexOf=function(e){if(!(0,r.Z)(e))throw new s.Z("date is required");const t=this._intervals;m.start=e,m.stop=e;let n=(0,i.Z)(t,m,f);return n>=0?t[n].isStartIncluded?n:n>0&&t[n-1].stop.equals(e)&&t[n-1].isStopIncluded?n-1:~n:(n=~n,n>0&&n-1<t.length&&h.Z.contains(t[n-1],e)?n-1:~n)},p.prototype.findInterval=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).start,n=e.stop,i=e.isStartIncluded,s=e.isStopIncluded,a=this._intervals;for(let e=0,o=a.length;e<o;e++){const o=a[e];if((!(0,r.Z)(t)||o.start.equals(t))&&(!(0,r.Z)(n)||o.stop.equals(n))&&(!(0,r.Z)(i)||o.isStartIncluded===i)&&(!(0,r.Z)(s)||o.isStopIncluded===s))return a[e]}},p.prototype.addInterval=function(e,t){if(!(0,r.Z)(e))throw new s.Z("interval is required");if(e.isEmpty)return;const n=this._intervals;if(0===n.length||d.Z.greaterThan(e.start,n[n.length-1].stop))return n.push(e),void this._changedEvent.raiseEvent(this);let o,a=(0,i.Z)(n,e,f);for(a<0?a=~a:a>0&&e.isStartIncluded&&n[a-1].isStartIncluded&&n[a-1].start.equals(e.start)?--a:a<n.length&&!e.isStartIncluded&&n[a].isStartIncluded&&n[a].start.equals(e.start)&&++a,a>0&&(o=d.Z.compare(n[a-1].stop,e.start),(o>0||0===o&&(n[a-1].isStopIncluded||e.isStartIncluded))&&(((0,r.Z)(t)?t(n[a-1].data,e.data):n[a-1].data===e.data)?(e=d.Z.greaterThan(e.stop,n[a-1].stop)?new h.Z({start:n[a-1].start,stop:e.stop,isStartIncluded:n[a-1].isStartIncluded,isStopIncluded:e.isStopIncluded,data:e.data}):new h.Z({start:n[a-1].start,stop:n[a-1].stop,isStartIncluded:n[a-1].isStartIncluded,isStopIncluded:n[a-1].isStopIncluded||e.stop.equals(n[a-1].stop)&&e.isStopIncluded,data:e.data}),n.splice(a-1,1),--a):(o=d.Z.compare(n[a-1].stop,e.stop),(o>0||0===o&&n[a-1].isStopIncluded&&!e.isStopIncluded)&&n.splice(a,0,new h.Z({start:e.stop,stop:n[a-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[a-1].isStopIncluded,data:n[a-1].data})),n[a-1]=new h.Z({start:n[a-1].start,stop:e.start,isStartIncluded:n[a-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:n[a-1].data}))));a<n.length&&(o=d.Z.compare(e.stop,n[a].start),o>0||0===o&&(e.isStopIncluded||n[a].isStartIncluded));)if((0,r.Z)(t)?t(n[a].data,e.data):n[a].data===e.data)e=new h.Z({start:e.start,stop:d.Z.greaterThan(n[a].stop,e.stop)?n[a].stop:e.stop,isStartIncluded:e.isStartIncluded,isStopIncluded:d.Z.greaterThan(n[a].stop,e.stop)?n[a].isStopIncluded:e.isStopIncluded,data:e.data}),n.splice(a,1);else{if(n[a]=new h.Z({start:e.stop,stop:n[a].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[a].isStopIncluded,data:n[a].data}),!n[a].isEmpty)break;n.splice(a,1)}n.splice(a,0,e),this._changedEvent.raiseEvent(this)},p.prototype.removeInterval=function(e){if(!(0,r.Z)(e))throw new s.Z("interval is required");if(e.isEmpty)return!1;const t=this._intervals;let n=(0,i.Z)(t,e,f);n<0&&(n=~n);let o=!1;for(n>0&&(d.Z.greaterThan(t[n-1].stop,e.start)||t[n-1].stop.equals(e.start)&&t[n-1].isStopIncluded&&e.isStartIncluded)&&(o=!0,(d.Z.greaterThan(t[n-1].stop,e.stop)||t[n-1].isStopIncluded&&!e.isStopIncluded&&t[n-1].stop.equals(e.stop))&&t.splice(n,0,new h.Z({start:e.stop,stop:t[n-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n-1].isStopIncluded,data:t[n-1].data})),t[n-1]=new h.Z({start:t[n-1].start,stop:e.start,isStartIncluded:t[n-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:t[n-1].data})),n<t.length&&!e.isStartIncluded&&t[n].isStartIncluded&&e.start.equals(t[n].start)&&(o=!0,t.splice(n,0,new h.Z({start:t[n].start,stop:t[n].start,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data})),++n);n<t.length&&d.Z.greaterThan(e.stop,t[n].stop);)o=!0,t.splice(n,1);return n<t.length&&e.stop.equals(t[n].stop)&&(o=!0,!e.isStopIncluded&&t[n].isStopIncluded?n+1<t.length&&t[n+1].start.equals(e.stop)&&t[n].data===t[n+1].data?(t.splice(n,1),t[n]=new h.Z({start:t[n].start,stop:t[n].stop,isStartIncluded:!0,isStopIncluded:t[n].isStopIncluded,data:t[n].data})):t[n]=new h.Z({start:e.stop,stop:e.stop,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data}):t.splice(n,1)),n<t.length&&(d.Z.greaterThan(e.stop,t[n].start)||e.stop.equals(t[n].start)&&e.isStopIncluded&&t[n].isStartIncluded)&&(o=!0,t[n]=new h.Z({start:e.stop,stop:t[n].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n].isStopIncluded,data:t[n].data})),o&&this._changedEvent.raiseEvent(this),o},p.prototype.intersect=function(e,t,n){if(!(0,r.Z)(e))throw new s.Z("other is required.");const i=new p;let o=0,a=0;const c=this._intervals,l=e._intervals;for(;o<c.length&&a<l.length;){const e=c[o],s=l[a];if(d.Z.lessThan(e.stop,s.start))++o;else if(d.Z.lessThan(s.stop,e.start))++a;else{if((0,r.Z)(n)||(0,r.Z)(t)&&t(e.data,s.data)||!(0,r.Z)(t)&&s.data===e.data){const o=h.Z.intersect(e,s,new h.Z,n);o.isEmpty||i.addInterval(o,t)}d.Z.lessThan(e.stop,s.stop)||e.stop.equals(s.stop)&&!e.isStopIncluded&&s.isStopIncluded?++o:++a}}return i},p.fromJulianDateArray=function(e,t){if(!(0,r.Z)(e))throw new s.Z("options is required.");if(!(0,r.Z)(e.julianDates))throw new s.Z("options.iso8601Array is required.");(0,r.Z)(t)||(t=new p);const n=e.julianDates,i=n.length,a=e.dataCallback,c=(0,o.Z)(e.isStartIncluded,!0),l=(0,o.Z)(e.isStopIncluded,!0),d=(0,o.Z)(e.leadingInterval,!1),f=(0,o.Z)(e.trailingInterval,!1);let m,_=0;d&&(++_,m=new h.Z({start:u.Z.MINIMUM_VALUE,stop:n[0],isStartIncluded:!0,isStopIncluded:!c}),m.data=(0,r.Z)(a)?a(m,t.length):t.length,t.addInterval(m));for(let e=0;e<i-1;++e){let o=n[e];const s=n[e+1];m=new h.Z({start:o,stop:s,isStartIncluded:t.length!==_||c,isStopIncluded:e===i-2&&l}),m.data=(0,r.Z)(a)?a(m,t.length):t.length,t.addInterval(m),o=s}return f&&(m=new h.Z({start:n[i-1],stop:u.Z.MAXIMUM_VALUE,isStartIncluded:!l,isStopIncluded:!0}),m.data=(0,r.Z)(a)?a(m,t.length):t.length,t.addInterval(m)),t};const _=new c.Z,g=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Z(e,t,n){(0,r.Z)(n)||(n=new d.Z),d.Z.toGregorianDate(e,_);let i=_.millisecond+t.millisecond,o=_.second+t.second,s=_.minute+t.minute,a=_.hour+t.hour,c=_.day+t.day,u=_.month+t.month,h=_.year+t.year;for(i>=1e3&&(o+=Math.floor(i/1e3),i%=1e3),o>=60&&(s+=Math.floor(o/60),o%=60),s>=60&&(a+=Math.floor(s/60),s%=60),a>=24&&(c+=Math.floor(a/24),a%=24),g[2]=(0,l.Z)(h)?29:28;c>g[u]||u>=13;)c>g[u]&&(c-=g[u],++u),u>=13&&(--u,h+=Math.floor(u/12),u%=12,++u),g[2]=(0,l.Z)(h)?29:28;return _.millisecond=i,_.second=o,_.minute=s,_.hour=a,_.day=c,_.month=u,_.year=h,d.Z.fromGregorianDate(_,n)}const y=new d.Z,b=/P(?:([\d.,]+)Y)?(?:([\d.,]+)M)?(?:([\d.,]+)W)?(?:([\d.,]+)D)?(?:T(?:([\d.,]+)H)?(?:([\d.,]+)M)?(?:([\d.,]+)S)?)?/;function v(e,t){if(!(0,r.Z)(e)||0===e.length)return!1;if(t.year=0,t.month=0,t.day=0,t.hour=0,t.minute=0,t.second=0,t.millisecond=0,"P"===e[0]){const n=e.match(b);if(!(0,r.Z)(n))return!1;if((0,r.Z)(n[1])&&(t.year=Number(n[1].replace(",","."))),(0,r.Z)(n[2])&&(t.month=Number(n[2].replace(",","."))),(0,r.Z)(n[3])&&(t.day=7*Number(n[3].replace(",","."))),(0,r.Z)(n[4])&&(t.day+=Number(n[4].replace(",","."))),(0,r.Z)(n[5])&&(t.hour=Number(n[5].replace(",","."))),(0,r.Z)(n[6])&&(t.minute=Number(n[6].replace(",","."))),(0,r.Z)(n[7])){const e=Number(n[7].replace(",","."));t.second=Math.floor(e),t.millisecond=e%1*1e3}}else"Z"!==e[e.length-1]&&(e+="Z"),d.Z.toGregorianDate(d.Z.fromIso8601(e,y),t);return t.year||t.month||t.day||t.hour||t.minute||t.second||t.millisecond}const A=new c.Z;p.fromIso8601=function(e,t){if(!(0,r.Z)(e))throw new s.Z("options is required.");if(!(0,r.Z)(e.iso8601))throw new s.Z("options.iso8601 is required.");const n=e.iso8601.split("/"),i=d.Z.fromIso8601(n[0]),o=d.Z.fromIso8601(n[1]),a=[];if(v(n[2],A)){let e=d.Z.clone(i);for(a.push(e);d.Z.compare(e,o)<0;)e=Z(e,A),d.Z.compare(o,e)<=0&&d.Z.clone(o,e),a.push(e)}else a.push(i,o);return p.fromJulianDateArray({julianDates:a,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)},p.fromIso8601DateArray=function(e,t){if(!(0,r.Z)(e))throw new s.Z("options is required.");if(!(0,r.Z)(e.iso8601Dates))throw new s.Z("options.iso8601Dates is required.");return p.fromJulianDateArray({julianDates:e.iso8601Dates.map((function(e){return d.Z.fromIso8601(e)})),isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)},p.fromIso8601DurationArray=function(e,t){if(!(0,r.Z)(e))throw new s.Z("options is required.");if(!(0,r.Z)(e.epoch))throw new s.Z("options.epoch is required.");if(!(0,r.Z)(e.iso8601Durations))throw new s.Z("options.iso8601Durations is required.");const n=e.epoch,i=e.iso8601Durations,a=(0,o.Z)(e.relativeToPrevious,!1),c=[];let l,u;const d=i.length;for(let e=0;e<d;++e)(v(i[e],A)||0===e)&&(l=a&&(0,r.Z)(u)?Z(u,A):Z(n,A),c.push(l),u=l);return p.fromJulianDateArray({julianDates:c,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};const T=p},211669:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(660904),o=n(11020),r=n(765153);const s={solve:function(e,t,n,s){if(!((0,o.Z)(e)&&e instanceof Array))throw new r.Z("The array lower is required.");if(!((0,o.Z)(t)&&t instanceof Array))throw new r.Z("The array diagonal is required.");if(!((0,o.Z)(n)&&n instanceof Array))throw new r.Z("The array upper is required.");if(!((0,o.Z)(s)&&s instanceof Array))throw new r.Z("The array right is required.");if(t.length!==s.length)throw new r.Z("diagonal and right must have the same lengths.");if(e.length!==n.length)throw new r.Z("lower and upper must have the same lengths.");if(e.length!==t.length-1)throw new r.Z("lower and upper must be one less than the length of diagonal.");const a=new Array(n.length),c=new Array(s.length),l=new Array(s.length);let u,d;for(u=0;u<c.length;u++)c[u]=new i.Z,l[u]=new i.Z;for(a[0]=n[0]/t[0],c[0]=i.Z.multiplyByScalar(s[0],1/t[0],c[0]),u=1;u<a.length;++u)d=1/(t[u]-a[u-1]*e[u-1]),a[u]=n[u]*d,c[u]=i.Z.subtract(s[u],i.Z.multiplyByScalar(c[u-1],e[u-1],c[u]),c[u]),c[u]=i.Z.multiplyByScalar(c[u],d,c[u]);for(d=1/(t[u]-a[u-1]*e[u-1]),c[u]=i.Z.subtract(s[u],i.Z.multiplyByScalar(c[u-1],e[u-1],c[u]),c[u]),c[u]=i.Z.multiplyByScalar(c[u],d,c[u]),l[l.length-1]=c[c.length-1],u=l.length-2;u>=0;--u)l[u]=i.Z.subtract(c[u],i.Z.multiplyByScalar(l[u+1],a[u],l[u]),l[u]);return l}}},140874:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({NONE:-1,PARTIAL:0,FULL:1})},412058:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(762031),o=n(660904),r=n(449809),s=n(234146),a=n(11020),c=n(765153),l=n(63354),u=n(87200),d=n(951775),h=n(263825),f=n(342209),p=n(344485),m=n(804868),_=n(427183),g=n(897664);const Z=new o.Z,y=new o.Z,b=new o.Z,v=new o.Z,A=new o.Z,T=new o.Z,w=new o.Z;function E(e){const t=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).positions,n=e.maximumHeights,i=e.minimumHeights;if(!(0,a.Z)(t))throw new c.Z("options.positions is required.");if((0,a.Z)(n)&&n.length!==t.length)throw new c.Z("options.positions and options.maximumHeights must have the same length.");if((0,a.Z)(i)&&i.length!==t.length)throw new c.Z("options.positions and options.minimumHeights must have the same length.");const r=(0,s.Z)(e.vertexFormat,_.Z.DEFAULT),u=(0,s.Z)(e.granularity,p.Z.RADIANS_PER_DEGREE),d=(0,s.Z)(e.ellipsoid,l.Z.WGS84);this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._vertexFormat=_.Z.clone(r),this._granularity=u,this._ellipsoid=l.Z.clone(d),this._workerName="createWallGeometry";let h=1+t.length*o.Z.packedLength+2;(0,a.Z)(i)&&(h+=i.length),(0,a.Z)(n)&&(h+=n.length),this.packedLength=h+l.Z.packedLength+_.Z.packedLength+1}E.pack=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("value is required");if(!(0,a.Z)(t))throw new c.Z("array is required");let i;n=(0,s.Z)(n,0);const r=e._positions;let u=r.length;for(t[n++]=u,i=0;i<u;++i,n+=o.Z.packedLength)o.Z.pack(r[i],t,n);const d=e._minimumHeights;if(u=(0,a.Z)(d)?d.length:0,t[n++]=u,(0,a.Z)(d))for(i=0;i<u;++i)t[n++]=d[i];const h=e._maximumHeights;if(u=(0,a.Z)(h)?h.length:0,t[n++]=u,(0,a.Z)(h))for(i=0;i<u;++i)t[n++]=h[i];return l.Z.pack(e._ellipsoid,t,n),n+=l.Z.packedLength,_.Z.pack(e._vertexFormat,t,n),t[n+=_.Z.packedLength]=e._granularity,t};const S=l.Z.clone(l.Z.UNIT_SPHERE),C=new _.Z,x={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:S,vertexFormat:C,granularity:void 0};E.unpack=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("array is required");let i;t=(0,s.Z)(t,0);let r=e[t++];const u=new Array(r);for(i=0;i<r;++i,t+=o.Z.packedLength)u[i]=o.Z.unpack(e,t);let d,h;if(r=e[t++],r>0)for(d=new Array(r),i=0;i<r;++i)d[i]=e[t++];if(r=e[t++],r>0)for(h=new Array(r),i=0;i<r;++i)h[i]=e[t++];const f=l.Z.unpack(e,t,S);t+=l.Z.packedLength;const p=_.Z.unpack(e,t,C),m=e[t+=_.Z.packedLength];return(0,a.Z)(n)?(n._positions=u,n._minimumHeights=d,n._maximumHeights=h,n._ellipsoid=l.Z.clone(f,n._ellipsoid),n._vertexFormat=_.Z.clone(p,n._vertexFormat),n._granularity=m,n):(x.positions=u,x.minimumHeights=d,x.maximumHeights=h,x.granularity=m,new E(x))},E.fromConstantHeights=function(e){const t=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).positions;if(!(0,a.Z)(t))throw new c.Z("options.positions is required.");let n,i;const o=e.minimumHeight,r=e.maximumHeight,l=(0,a.Z)(o),u=(0,a.Z)(r);if(l||u){const e=t.length;n=l?new Array(e):void 0,i=u?new Array(e):void 0;for(let t=0;t<e;++t)l&&(n[t]=o),u&&(i[t]=r)}return new E({positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid,vertexFormat:e.vertexFormat})},E.createGeometry=function(e){const t=e._positions,n=e._minimumHeights,s=e._maximumHeights,c=e._vertexFormat,l=e._granularity,_=e._ellipsoid,E=g.Z.computePositions(_,t,s,n,l,!0);if(!(0,a.Z)(E))return;const S=E.bottomPositions,C=E.topPositions,x=E.numCorners;let I=C.length,P=2*I;const D=c.position?new Float64Array(P):void 0,O=c.normal?new Float32Array(P):void 0,L=c.tangent?new Float32Array(P):void 0,N=c.bitangent?new Float32Array(P):void 0,M=c.st?new Float32Array(P/3*2):void 0;let R,F=0,B=0,U=0,k=0,V=0,H=w,z=T,G=A,j=!0;I/=3;let W=0;const q=1/(I-x-1);for(R=0;R<I;++R){const e=3*R,t=o.Z.fromArray(C,e,Z),n=o.Z.fromArray(S,e,y);if(c.position&&(D[F++]=n.x,D[F++]=n.y,D[F++]=n.z,D[F++]=t.x,D[F++]=t.y,D[F++]=t.z),c.st&&(M[V++]=W,M[V++]=0,M[V++]=W,M[V++]=1),c.normal||c.tangent||c.bitangent){let n=o.Z.clone(o.Z.ZERO,v);const i=o.Z.subtract(t,_.geodeticSurfaceNormal(t,y),y);if(R+1<I&&(n=o.Z.fromArray(C,e+3,v)),j){const e=o.Z.subtract(n,t,b),r=o.Z.subtract(i,t,Z);H=o.Z.normalize(o.Z.cross(r,e,H),H),j=!1}o.Z.equalsEpsilon(t,n,p.Z.EPSILON10)?j=!0:(W+=q,c.tangent&&(z=o.Z.normalize(o.Z.subtract(n,t,z),z)),c.bitangent&&(G=o.Z.normalize(o.Z.cross(H,z,G),G))),c.normal&&(O[B++]=H.x,O[B++]=H.y,O[B++]=H.z,O[B++]=H.x,O[B++]=H.y,O[B++]=H.z),c.tangent&&(L[k++]=z.x,L[k++]=z.y,L[k++]=z.z,L[k++]=z.x,L[k++]=z.y,L[k++]=z.z),c.bitangent&&(N[U++]=G.x,N[U++]=G.y,N[U++]=G.z,N[U++]=G.x,N[U++]=G.y,N[U++]=G.z)}}const Y=new h.Z;c.position&&(Y.position=new d.Z({componentDatatype:r.Z.DOUBLE,componentsPerAttribute:3,values:D})),c.normal&&(Y.normal=new d.Z({componentDatatype:r.Z.FLOAT,componentsPerAttribute:3,values:O})),c.tangent&&(Y.tangent=new d.Z({componentDatatype:r.Z.FLOAT,componentsPerAttribute:3,values:L})),c.bitangent&&(Y.bitangent=new d.Z({componentDatatype:r.Z.FLOAT,componentsPerAttribute:3,values:N})),c.st&&(Y.st=new d.Z({componentDatatype:r.Z.FLOAT,componentsPerAttribute:2,values:M}));const X=P/3;P-=6*(x+1);const J=f.Z.createTypedArray(X,P);let Q=0;for(R=0;R<X-2;R+=2){const e=R,t=R+2,n=o.Z.fromArray(D,3*e,Z),i=o.Z.fromArray(D,3*t,y);if(o.Z.equalsEpsilon(n,i,p.Z.EPSILON10))continue;const r=R+1,s=R+3;J[Q++]=r,J[Q++]=e,J[Q++]=s,J[Q++]=s,J[Q++]=e,J[Q++]=t}return new u.Z({attributes:Y,indices:J,primitiveType:m.Z.TRIANGLES,boundingSphere:new i.Z.fromVertices(D)})};const I=E},897664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(334389),o=n(660904),r=n(532056),s=n(11020),a=n(344485),c=n(151793);const l={};function u(e,t){return a.Z.equalsEpsilon(e.latitude,t.latitude,a.Z.EPSILON10)&&a.Z.equalsEpsilon(e.longitude,t.longitude,a.Z.EPSILON10)}const d=new r.Z,h=new r.Z,f=new Array(2),p=new Array(2),m={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};l.computePositions=function(e,t,n,l,_,g){const Z=function(e,t,n,a){const c=(t=(0,i.Z)(t,o.Z.equalsEpsilon)).length;if(c<2)return;const l=(0,s.Z)(a),f=(0,s.Z)(n),p=new Array(c),m=new Array(c),_=new Array(c),g=t[0];p[0]=g;const Z=e.cartesianToCartographic(g,d);f&&(Z.height=n[0]),m[0]=Z.height,_[0]=l?a[0]:0;let y=m[0]===_[0],b=1;for(let i=1;i<c;++i){const o=t[i],s=e.cartesianToCartographic(o,h);f&&(s.height=n[i]),y=y&&0===s.height,u(Z,s)?Z.height<s.height&&(m[b-1]=s.height):(p[b]=o,m[b]=s.height,_[b]=l?a[i]:0,y=y&&m[b]===_[b],r.Z.clone(s,Z),++b)}return y||b<2?void 0:(p.length=b,m.length=b,_.length=b,{positions:p,topHeights:m,bottomHeights:_})}(e,t,n,l);if(!(0,s.Z)(Z))return;t=Z.positions,n=Z.topHeights,l=Z.bottomHeights;const y=t.length,b=y-2;let v,A;const T=a.Z.chordLength(_,e.maximumRadius),w=m;if(w.minDistance=T,w.ellipsoid=e,g){let e,i=0;for(e=0;e<y-1;e++)i+=c.Z.numberOfPoints(t[e],t[e+1],T)+1;v=new Float64Array(3*i),A=new Float64Array(3*i);const o=f,r=p;w.positions=o,w.height=r;let s=0;for(e=0;e<y-1;e++){o[0]=t[e],o[1]=t[e+1],r[0]=n[e],r[1]=n[e+1];const i=c.Z.generateArc(w);v.set(i,s),r[0]=l[e],r[1]=l[e+1],A.set(c.Z.generateArc(w),s),s+=i.length}}else w.positions=t,w.height=n,v=new Float64Array(c.Z.generateArc(w)),w.height=l,A=new Float64Array(c.Z.generateArc(w));return{bottomPositions:A,topPositions:v,numCorners:b}};const _=l},111567:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(762031),o=n(660904),r=n(449809),s=n(234146),a=n(11020),c=n(765153),l=n(63354),u=n(87200),d=n(951775),h=n(263825),f=n(342209),p=n(344485),m=n(804868),_=n(897664);const g=new o.Z,Z=new o.Z;function y(e){const t=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).positions,n=e.maximumHeights,i=e.minimumHeights;if(!(0,a.Z)(t))throw new c.Z("options.positions is required.");if((0,a.Z)(n)&&n.length!==t.length)throw new c.Z("options.positions and options.maximumHeights must have the same length.");if((0,a.Z)(i)&&i.length!==t.length)throw new c.Z("options.positions and options.minimumHeights must have the same length.");const r=(0,s.Z)(e.granularity,p.Z.RADIANS_PER_DEGREE),u=(0,s.Z)(e.ellipsoid,l.Z.WGS84);this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._granularity=r,this._ellipsoid=l.Z.clone(u),this._workerName="createWallOutlineGeometry";let d=1+t.length*o.Z.packedLength+2;(0,a.Z)(i)&&(d+=i.length),(0,a.Z)(n)&&(d+=n.length),this.packedLength=d+l.Z.packedLength+1}y.pack=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("value is required");if(!(0,a.Z)(t))throw new c.Z("array is required");let i;n=(0,s.Z)(n,0);const r=e._positions;let u=r.length;for(t[n++]=u,i=0;i<u;++i,n+=o.Z.packedLength)o.Z.pack(r[i],t,n);const d=e._minimumHeights;if(u=(0,a.Z)(d)?d.length:0,t[n++]=u,(0,a.Z)(d))for(i=0;i<u;++i)t[n++]=d[i];const h=e._maximumHeights;if(u=(0,a.Z)(h)?h.length:0,t[n++]=u,(0,a.Z)(h))for(i=0;i<u;++i)t[n++]=h[i];return l.Z.pack(e._ellipsoid,t,n),t[n+=l.Z.packedLength]=e._granularity,t};const b=l.Z.clone(l.Z.UNIT_SPHERE),v={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:b,granularity:void 0};y.unpack=function(e,t,n){if(!(0,a.Z)(e))throw new c.Z("array is required");let i;t=(0,s.Z)(t,0);let r=e[t++];const u=new Array(r);for(i=0;i<r;++i,t+=o.Z.packedLength)u[i]=o.Z.unpack(e,t);let d,h;if(r=e[t++],r>0)for(d=new Array(r),i=0;i<r;++i)d[i]=e[t++];if(r=e[t++],r>0)for(h=new Array(r),i=0;i<r;++i)h[i]=e[t++];const f=l.Z.unpack(e,t,b),p=e[t+=l.Z.packedLength];return(0,a.Z)(n)?(n._positions=u,n._minimumHeights=d,n._maximumHeights=h,n._ellipsoid=l.Z.clone(f,n._ellipsoid),n._granularity=p,n):(v.positions=u,v.minimumHeights=d,v.maximumHeights=h,v.granularity=p,new y(v))},y.fromConstantHeights=function(e){const t=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).positions;if(!(0,a.Z)(t))throw new c.Z("options.positions is required.");let n,i;const o=e.minimumHeight,r=e.maximumHeight,l=(0,a.Z)(o),u=(0,a.Z)(r);if(l||u){const e=t.length;n=l?new Array(e):void 0,i=u?new Array(e):void 0;for(let t=0;t<e;++t)l&&(n[t]=o),u&&(i[t]=r)}return new y({positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid})},y.createGeometry=function(e){const t=e._positions,n=e._minimumHeights,s=e._maximumHeights,c=e._granularity,l=e._ellipsoid,y=_.Z.computePositions(l,t,s,n,c,!1);if(!(0,a.Z)(y))return;const b=y.bottomPositions,v=y.topPositions;let A=v.length,T=2*A;const w=new Float64Array(T);let E,S=0;for(A/=3,E=0;E<A;++E){const e=3*E,t=o.Z.fromArray(v,e,g),n=o.Z.fromArray(b,e,Z);w[S++]=n.x,w[S++]=n.y,w[S++]=n.z,w[S++]=t.x,w[S++]=t.y,w[S++]=t.z}const C=new h.Z({position:new d.Z({componentDatatype:r.Z.DOUBLE,componentsPerAttribute:3,values:w})}),x=T/3;T=2*x-4+x;const I=f.Z.createTypedArray(x,T);let P=0;for(E=0;E<x-2;E+=2){const e=E,t=E+2,n=o.Z.fromArray(w,3*e,g),i=o.Z.fromArray(w,3*t,Z);if(o.Z.equalsEpsilon(n,i,p.Z.EPSILON10))continue;const r=E+1,s=E+3;I[P++]=r,I[P++]=e,I[P++]=r,I[P++]=s,I[P++]=e,I[P++]=t}return I[P++]=x-2,I[P++]=x-1,new u.Z({attributes:C,indices:I,primitiveType:m.Z.LINES,boundingSphere:new i.Z.fromVertices(w)})};const A=y},931359:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(405254),o=n(234146),r=n(11020),s=n(63354),a=n(143450),c=n(709855);function l(e){if(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this._ellipsoid=(0,o.Z)(e.ellipsoid,s.Z.WGS84),this._numberOfLevelZeroTilesX=(0,o.Z)(e.numberOfLevelZeroTilesX,1),this._numberOfLevelZeroTilesY=(0,o.Z)(e.numberOfLevelZeroTilesY,1),this._projection=new c.Z(this._ellipsoid),(0,r.Z)(e.rectangleSouthwestInMeters)&&(0,r.Z)(e.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=e.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=e.rectangleNortheastInMeters;else{const e=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new i.Z(-e,-e),this._rectangleNortheastInMeters=new i.Z(e,e)}const t=this._projection.unproject(this._rectangleSouthwestInMeters),n=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new a.Z(t.longitude,t.latitude,n.longitude,n.latitude)}Object.defineProperties(l.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),l.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},l.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},l.prototype.rectangleToNativeRectangle=function(e,t){const n=this._projection,i=n.project(a.Z.southwest(e)),o=n.project(a.Z.northeast(e));return(0,r.Z)(t)?(t.west=i.x,t.south=i.y,t.east=o.x,t.north=o.y,t):new a.Z(i.x,i.y,o.x,o.y)},l.prototype.tileXYToNativeRectangle=function(e,t,n,i){const o=this.getNumberOfXTilesAtLevel(n),s=this.getNumberOfYTilesAtLevel(n),c=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,l=this._rectangleSouthwestInMeters.x+e*c,u=this._rectangleSouthwestInMeters.x+(e+1)*c,d=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/s,h=this._rectangleNortheastInMeters.y-t*d,f=this._rectangleNortheastInMeters.y-(t+1)*d;return(0,r.Z)(i)?(i.west=l,i.south=f,i.east=u,i.north=h,i):new a.Z(l,f,u,h)},l.prototype.tileXYToRectangle=function(e,t,n,o){const r=this.tileXYToNativeRectangle(e,t,n,o),s=this._projection,a=s.unproject(new i.Z(r.west,r.south)),c=s.unproject(new i.Z(r.east,r.north));return r.west=a.longitude,r.south=a.latitude,r.east=c.longitude,r.north=c.latitude,r},l.prototype.positionToTileXY=function(e,t,n){const o=this._rectangle;if(!a.Z.contains(o,e))return;const s=this.getNumberOfXTilesAtLevel(t),c=this.getNumberOfYTilesAtLevel(t),l=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/s,u=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/c,d=this._projection.project(e);let h=(d.x-this._rectangleSouthwestInMeters.x)/l|0;h>=s&&(h=s-1);let f=(this._rectangleNortheastInMeters.y-d.y)/u|0;return f>=c&&(f=c-1),(0,r.Z)(n)?(n.x=h,n.y=f,n):new i.Z(h,f)};const u=l},103287:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11020),o=n(342209),r=n(804868);const s={createWireframeIndices:function(e,t,n){const s=(0,i.Z)(n);return e===r.Z.TRIANGLES?s?function(e,t){const n=t.length,i=o.Z.createTypedArray(e,2*n);let r=0;for(let e=0;e<n;e+=3){const n=t[e],o=t[e+1],s=t[e+2];i[r++]=n,i[r++]=o,i[r++]=o,i[r++]=s,i[r++]=s,i[r++]=n}return i}(t,n):function(e){const t=o.Z.createTypedArray(e,2*e),n=e;let i=0;for(let e=0;e<n;e+=3)t[i++]=e,t[i++]=e+1,t[i++]=e+1,t[i++]=e+2,t[i++]=e+2,t[i++]=e;return t}(t):e===r.Z.TRIANGLE_STRIP?s?function(e,t){const n=t.length-2,i=2+4*n,r=o.Z.createTypedArray(e,i);let s=0;r[s++]=t[0],r[s++]=t[1];for(let e=0;e<n;e++){const n=t[e],i=t[e+1],o=t[e+2];r[s++]=i,r[s++]=o,r[s++]=o,r[s++]=n}return r}(t,n):function(e){const t=e-2,n=2+4*t,i=o.Z.createTypedArray(e,n);let r=0;i[r++]=0,i[r++]=1;for(let e=0;e<t;e++)i[r++]=e+1,i[r++]=e+2,i[r++]=e+2,i[r++]=e;return i}(t):e===r.Z.TRIANGLE_FAN?s?function(e,t){const n=t.length-2,i=2+4*n,r=o.Z.createTypedArray(e,i);let s=0;const a=t[0];r[s++]=a,r[s++]=t[1];for(let e=0;e<n;e++){const n=t[e+1],i=t[e+2];r[s++]=n,r[s++]=i,r[s++]=i,r[s++]=a}return r}(t,n):function(e){const t=e-2,n=2+4*t,i=o.Z.createTypedArray(e,n);let r=0;i[r++]=0,i[r++]=1;for(let e=0;e<t;e++)i[r++]=e+1,i[r++]=e+2,i[r++]=e+2,i[r++]=0;return i}(t):void 0},getWireframeIndicesCount:function(e,t){return e===r.Z.TRIANGLES?2*t:e===r.Z.TRIANGLE_STRIP||e===r.Z.TRIANGLE_FAN?2+4*(t-2):t}},a=s},877290:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(849986),o=n(234146);const r=function(e){return e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),i.Z.fromIonAssetId(1,{requestVertexNormals:(0,o.Z)(e.requestVertexNormals,!1),requestWaterMask:(0,o.Z)(e.requestWaterMask,!1)})}},796712:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(393766),o=n(660904),r=n(532056),s=n(344485);const a=32767,c=new r.Z,l=new o.Z,u=function(e,t,n,u,d){const h=e.length/3,f=e.subarray(0,h),p=e.subarray(h,2*h),m=e.subarray(2*h,3*h);i.Z.zigZagDeltaDecode(f,p,m);const _=new Float64Array(e.length);for(let e=0;e<h;++e){const i=f[e],h=p[e],g=m[e],Z=s.Z.lerp(t.west,t.east,i/a),y=s.Z.lerp(t.south,t.north,h/a),b=s.Z.lerp(n,u,g/a),v=r.Z.fromRadians(Z,y,b,c),A=d.cartographicToCartesian(v,l);o.Z.pack(A,_,3*e)}return _}},765453:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(11020);const o=function(e){let t;const n=e.name,o=e.message;t=(0,i.Z)(n)&&(0,i.Z)(o)?`${n}: ${o}`:e.toString();const r=e.stack;return(0,i.Z)(r)&&(t+=`\n${r}`),t}},111441:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=function(e,t,n){const i=new Uint8ClampedArray(e.buffer),o=new ImageData(i,t,n),r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").putImageData(o,0,0),r}},911698:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(932799);const o=function(e,t,n){return JSON.parse((0,i.Z)(e,t,n))}},252376:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(234146),o=n(932799);const r=function(e,t){return t=(0,i.Z)(t,0),(0,o.Z)(e,t,Math.min(4,e.length))}},932799:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(234146),o=n(11020),r=n(765153),s=n(217066);function a(e,t,n){if(!(0,o.Z)(e))throw new r.Z("uint8Array is required.");if(t<0)throw new r.Z("byteOffset cannot be negative.");if(n<0)throw new r.Z("byteLength cannot be negative.");if(t+n>e.byteLength)throw new r.Z("sub-region exceeds array bounds.");return t=(0,i.Z)(t,0),n=(0,i.Z)(n,e.byteLength-t),e=e.subarray(t,t+n),a.decode(e)}function c(e,t,n){return t<=e&&e<=n}a.decodeWithTextDecoder=function(e){return new TextDecoder("utf-8").decode(e)},a.decodeWithFromCharCode=function(e){let t="";const n=function(e){let t=0,n=0,i=0,o=128,r=191;const a=[],l=e.length;for(let u=0;u<l;++u){const l=e[u];if(0===i){if(c(l,0,127)){a.push(l);continue}if(c(l,194,223)){i=1,t=31&l;continue}if(c(l,224,239)){224===l&&(o=160),237===l&&(r=159),i=2,t=15&l;continue}if(c(l,240,244)){240===l&&(o=144),244===l&&(r=143),i=3,t=7&l;continue}throw new s.Z("String decoding failed.")}c(l,o,r)?(o=128,r=191,t=t<<6|63&l,++n,n===i&&(a.push(t),t=i=n=0)):(t=i=n=0,o=128,r=191,--u)}return a}(e),i=n.length;for(let e=0;e<i;++e){let i=n[e];i<=65535?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return t},"undefined"!=typeof TextDecoder?a.decode=a.decodeWithTextDecoder:a.decode=a.decodeWithFromCharCode;const l=a},143073:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(234146),r=n(11020),s=n(205522);const a=function(e){const t=e.uint8Array,n=e.format,a=e.request,c=(0,o.Z)(e.flipY,!1),l=(0,o.Z)(e.skipColorSpaceConversion,!1);i.Z.typeOf.object("uint8Array",t),i.Z.typeOf.string("format",n);const u=new Blob([t],{type:n});let d;return s.Z.supportsImageBitmapOptions().then((function(e){return e?Promise.resolve(s.Z.createImageBitmapFromBlob(u,{flipY:c,premultiplyAlpha:!1,skipColorSpaceConversion:l})):(d=window.URL.createObjectURL(u),new s.Z({url:d,request:a}).fetchImage({flipY:c,skipColorSpaceConversion:l}))})).then((function(e){return(0,r.Z)(d)&&window.URL.revokeObjectURL(d),e})).catch((function(e){return(0,r.Z)(d)&&window.URL.revokeObjectURL(d),Promise.reject(e)}))}},849391:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(11020),o=n(765153);const r=[],s=[];function a(e,t,n,i,o){if(i>=o)return;const c=Math.floor(.5*(i+o));a(e,t,n,i,c),a(e,t,n,c+1,o),function(e,t,n,i,o,a){const c=o-i+1,l=a-o,u=r,d=s;let h,f;for(h=0;h<c;++h)u[h]=e[i+h];for(f=0;f<l;++f)d[f]=e[o+f+1];h=0,f=0;for(let o=i;o<=a;++o){const i=u[h],r=d[f];h<c&&(f>=l||t(i,r,n)<=0)?(e[o]=i,++h):f<l&&(e[o]=r,++f)}}(e,t,n,i,c,o)}const c=function(e,t,n){if(!(0,i.Z)(e))throw new o.Z("array is required.");if(!(0,i.Z)(t))throw new o.Z("comparator is required.");const c=e.length,l=Math.ceil(.5*c);r.length=l,s.length=l,a(e,t,n,0,c-1),r.length=0,s.length=0}},804376:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(344485);const o=function(e){const t=document.createElement("canvas");return t.width=i.Z.nextPowerOfTwo(e.width),t.height=i.Z.nextPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}},503939:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(11020);function r(e,t){return e.length?function(e,t){const n=e[0],i=n.terrainProvider.requestTileGeometry(n.x,n.y,n.level);if(!i)return!1;const o=i.then(function(e){const t=e.positions,n=e.tilingScheme.tileXYToRectangle(e.x,e.y,e.level);return function(i){let o=!1;for(let e=0;e<t.length;++e)if(!s(t[e],i,n)){o=!0;break}return o?i.createMesh({tilingScheme:e.tilingScheme,x:e.x,y:e.y,level:e.level,throttle:!1}).then((function(){for(let e=0;e<t.length;++e)s(t[e],i,n)})):Promise.resolve()}}(n)).catch(function(e){const t=e.positions;return function(){for(let e=0;e<t.length;++e)t[e].height=void 0}}(n));return e.shift(),t.push(o),!0}(e,t)?r(e,t):new Promise((function(e){setTimeout(e,100)})).then((()=>r(e,t))):Promise.resolve()}function s(e,t,n){const i=t.interpolateHeight(n,e.longitude,e.latitude);return void 0!==i&&(e.height=i,!0)}const a=async function(e,t,n){return i.Z.typeOf.object("terrainProvider",e),i.Z.typeOf.number("level",t),i.Z.defined("positions",n),(0,o.Z)(e._readyPromise)?await e._readyPromise:(0,o.Z)(e.readyPromise)&&await e.readyPromise,function(e,t,n){const i=e.tilingScheme;let s;const a=[],c={};for(s=0;s<n.length;++s){const r=i.positionToTileXY(n[s],t);if(!(0,o.Z)(r))continue;const l=r.toString();if(!c.hasOwnProperty(l)){const n={x:r.x,y:r.y,level:t,tilingScheme:i,terrainProvider:e,positions:[]};c[l]=n,a.push(n)}c[l].positions.push(n[s])}const l=[];return r(a,l).then((function(){return Promise.all(l).then((function(){return n}))}))}(e,t,n)}},888340:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(405254),o=n(11020),r=n(765153),s=n(503939);const a=new i.Z,c=async function e(t,n){if(!(0,o.Z)(t))throw new r.Z("terrainProvider is required.");if(!(0,o.Z)(n))throw new r.Z("positions is required.");const i=[],c=[];(0,o.Z)(t._readyPromise)?await t._readyPromise:(0,o.Z)(t.readyPromise)&&await t.readyPromise;const l=t.availability;if(!(0,o.Z)(l))throw new r.Z("sampleTerrainMostDetailed requires a terrain provider that has tile availability.");const u=[];for(let e=0;e<n.length;++e){const r=n[e],s=l.computeMaximumLevelAtPosition(r);if(c[e]=s,0===s){t.tilingScheme.positionToTileXY(r,1,a);const e=t.loadTileDataAvailability(a.x,a.y,1);(0,o.Z)(e)&&u.push(e)}let d=i[s];(0,o.Z)(d)||(i[s]=d=[]),d.push(r)}await Promise.all(u),await Promise.all(i.map((function(e,n){if((0,o.Z)(e))return(0,s.Z)(t,n,e)})));const d=[];for(let e=0;e<n.length;++e){const t=n[e];l.computeMaximumLevelAtPosition(t)!==c[e]&&d.push(t)}return d.length>0&&await e(t,d),n}},100002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>F});var i=n(781382),o=n(890828),r=n(405254),s=n(660904),a=n(35961),c=n(11020),l=n(722313),u=n(765153),d=n(6821),h=n(485662),f=n(990778),p=n(160629),m=n(218157),_=n(657528),g=n(916269);const Z=a.Z.WHITE,y=s.Z.ZERO,b=f.Z.NONE,v=r.Z.ZERO,A=s.Z.ZERO,T=p.Z.CENTER,w=m.Z.CENTER,E=new s.Z,S=new a.Z,C=new s.Z,x=new r.Z,I=new h.Z,P=new h.Z,D=new h.Z,O=new o.Z,L=new d.Z;function N(e){this.entity=e,this.billboard=void 0,this.textureValue=void 0}function M(e,t){if(!(0,c.Z)(e))throw new u.Z("entityCluster is required.");if(!(0,c.Z)(t))throw new u.Z("entityCollection is required.");t.collectionChanged.addEventListener(M.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.Z,this._onCollectionChanged(t,t.values,[],[])}function R(e,t,n){(0,c.Z)(e)&&(e.billboard=void 0,n.removeBillboard(t))}M.prototype.update=function(e){if(!(0,c.Z)(e))throw new u.Z("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],r=o.entity,s=r._billboard;let a,l,u=o.billboard,d=r.isShowing&&r.isAvailable(e)&&g.Z.getValueOrDefault(s._show,e,!0);if(d&&(l=g.Z.getValueOrUndefined(r._position,e,E),a=g.Z.getValueOrUndefined(s._image,e),d=(0,c.Z)(l)&&(0,c.Z)(a)),!d){R(o,r,n);continue}g.Z.isConstant(r._position)||(n._clusterDirty=!0),(0,c.Z)(u)||(u=n.getBillboard(r),u.id=r,u.image=void 0,o.billboard=u),u.show=d,(0,c.Z)(u.image)&&o.textureValue===a||(u.image=a,o.textureValue=a),u.position=l,u.color=g.Z.getValueOrDefault(s._color,e,Z,S),u.eyeOffset=g.Z.getValueOrDefault(s._eyeOffset,e,y,C),u.heightReference=g.Z.getValueOrDefault(s._heightReference,e,b),u.pixelOffset=g.Z.getValueOrDefault(s._pixelOffset,e,v,x),u.scale=g.Z.getValueOrDefault(s._scale,e,1),u.rotation=g.Z.getValueOrDefault(s._rotation,e,0),u.alignedAxis=g.Z.getValueOrDefault(s._alignedAxis,e,A),u.horizontalOrigin=g.Z.getValueOrDefault(s._horizontalOrigin,e,T),u.verticalOrigin=g.Z.getValueOrDefault(s._verticalOrigin,e,w),u.width=g.Z.getValueOrUndefined(s._width,e),u.height=g.Z.getValueOrUndefined(s._height,e),u.scaleByDistance=g.Z.getValueOrUndefined(s._scaleByDistance,e,I),u.translucencyByDistance=g.Z.getValueOrUndefined(s._translucencyByDistance,e,P),u.pixelOffsetScaleByDistance=g.Z.getValueOrUndefined(s._pixelOffsetScaleByDistance,e,D),u.sizeInMeters=g.Z.getValueOrDefault(s._sizeInMeters,e,!1),u.distanceDisplayCondition=g.Z.getValueOrUndefined(s._distanceDisplayCondition,e,L),u.disableDepthTestDistance=g.Z.getValueOrUndefined(s._disableDepthTestDistance,e);const h=g.Z.getValueOrUndefined(s._imageSubRegion,e,O);(0,c.Z)(h)&&u.setImageSubRegion(u._imageId,h)}return!0},M.prototype.getBoundingSphere=function(e,t){if(!(0,c.Z)(e))throw new u.Z("entity is required.");if(!(0,c.Z)(t))throw new u.Z("result is required.");const n=this._items.get(e.id);if(!(0,c.Z)(n)||!(0,c.Z)(n.billboard))return _.Z.FAILED;const i=n.billboard;if(i.heightReference===f.Z.NONE)t.center=s.Z.clone(i.position,t.center);else{if(!(0,c.Z)(i._clampedPosition))return _.Z.PENDING;t.center=s.Z.clone(i._clampedPosition,t.center)}return t.radius=0,_.Z.DONE},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(M.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeBillboard(e[t]);return(0,l.Z)(this)},M.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const s=this._items,a=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,c.Z)(r._billboard)&&(0,c.Z)(r._position)&&s.set(r.id,new N(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,c.Z)(r._billboard)&&(0,c.Z)(r._position)?s.contains(r.id)||s.set(r.id,new N(r)):(R(s.get(r.id),r,a),s.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],R(s.get(r.id),r,a),s.remove(r.id)};const F=M},657528:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({DONE:0,PENDING:1,FAILED:2})},155439:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(418547),o=n(77305),r=n(660904),s=n(790087),a=n(35961),c=n(376213),l=n(11020),u=n(765153),d=n(669327),h=n(156905),f=n(61885),p=n(551332),m=n(630114),_=n(489381),g=n(990778),Z=n(71880),y=n(104763),b=n(731458),v=n(452741),A=n(674842),T=n(628353),w=n(916269);const E=r.Z.ZERO,S=new r.Z,C=new r.Z,x=new a.Z;function I(e){this.id=e,this.vertexFormat=void 0,this.dimensions=void 0,this.offsetAttribute=void 0}function P(e,t){A.Z.call(this,{entity:e,scene:t,geometryOptions:new I(e),geometryPropertyName:"box",observedPropertyNames:["availability","position","orientation","box"]}),this._onEntityPropertyChanged(e,"box",e.box,void 0)}function D(e,t,n){v.Z.call(this,e,t,n)}(0,l.Z)(Object.create)&&(P.prototype=Object.create(A.Z.prototype),P.prototype.constructor=P),Object.defineProperties(P.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),P.prototype.createFillGeometryInstance=function(e){if(s.Z.defined("time",e),!this._fillEnabled)throw new u.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o=new _.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),r=this._distanceDisplayConditionProperty.getValue(e),f={show:o,distanceDisplayCondition:d.Z.fromDistanceDisplayCondition(r),color:void 0,offset:void 0};if(this._materialProperty instanceof b.Z){let t;(0,l.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,x)),(0,l.Z)(t)||(t=a.Z.WHITE),f.color=c.Z.fromColor(t)}return(0,l.Z)(this._options.offsetAttribute)&&(f.offset=m.Z.fromCartesian3(w.Z.getValueOrDefault(this._terrainOffsetProperty,e,E,S))),new h.Z({id:t,geometry:i.Z.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,.5*this._options.dimensions.z,this._scene.mapProjection.ellipsoid),attributes:f})},P.prototype.createOutlineGeometryInstance=function(e){if(s.Z.defined("time",e),!this._outlineEnabled)throw new u.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=w.Z.getValueOrDefault(this._outlineColorProperty,e,a.Z.BLACK,x),r=this._distanceDisplayConditionProperty.getValue(e),f={show:new _.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:c.Z.fromColor(i),distanceDisplayCondition:d.Z.fromDistanceDisplayCondition(r),offset:void 0};return(0,l.Z)(this._options.offsetAttribute)&&(f.offset=m.Z.fromCartesian3(w.Z.getValueOrDefault(this._terrainOffsetProperty,e,E,S))),new h.Z({id:t,geometry:o.Z.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,.5*this._options.dimensions.z,this._scene.mapProjection.ellipsoid),attributes:f})},P.prototype._computeCenter=function(e,t){return w.Z.getValueOrUndefined(this._entity.position,e,t)},P.prototype._isHidden=function(e,t){return!(0,l.Z)(t.dimensions)||!(0,l.Z)(e.position)||A.Z.prototype._isHidden.call(this,e,t)},P.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&w.Z.isConstant(e.orientation)&&t.dimensions.isConstant&&w.Z.isConstant(t.outlineWidth))},P.prototype._setStaticOptions=function(e,t){const n=w.Z.getValueOrDefault(t.heightReference,p.Z.MINIMUM_VALUE,g.Z.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof b.Z?y.Z.VERTEX_FORMAT:Z.Z.MaterialSupport.TEXTURED.vertexFormat,i.dimensions=t.dimensions.getValue(p.Z.MINIMUM_VALUE,i.dimensions),i.offsetAttribute=n!==g.Z.NONE?f.Z.ALL:void 0},P.prototype._onEntityPropertyChanged=T.Z,P.DynamicGeometryUpdater=D,(0,l.Z)(Object.create)&&(D.prototype=Object.create(v.Z.prototype),D.prototype.constructor=D),D.prototype._isHidden=function(e,t,n){const i=w.Z.getValueOrUndefined(e.position,n,C),o=this._options.dimensions;return!(0,l.Z)(i)||!(0,l.Z)(o)||v.Z.prototype._isHidden.call(this,e,t,n)},D.prototype._setOptions=function(e,t,n){const i=w.Z.getValueOrDefault(t.heightReference,n,g.Z.NONE),o=this._options;o.dimensions=w.Z.getValueOrUndefined(t.dimensions,n,o.dimensions),o.offsetAttribute=i!==g.Z.NONE?f.Z.ALL:void 0};const O=P},484297:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11020),o=n(765153),r=n(282910);function s(e,t){this._callback=void 0,this._isConstant=void 0,this._definitionChanged=new r.Z,this.setCallback(e,t)}Object.defineProperties(s.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}}}),s.prototype.getValue=function(e,t){return this._callback(e,t)},s.prototype.setCallback=function(e,t){if(!(0,i.Z)(e))throw new o.Z("callback is required.");if(!(0,i.Z)(t))throw new o.Z("isConstant is required.");const n=this._callback!==e||this._isConstant!==t;this._callback=e,this._isConstant=t,n&&this._definitionChanged.raiseEvent(this)},s.prototype.equals=function(e){return this===e||e instanceof s&&this._callback===e._callback&&this._isConstant===e._isConstant};const a=s},216055:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(781382),o=n(762031),r=n(11020),s=n(722313),a=n(765153),c=n(659635),l=n(205522),u=n(204476),d=n(657528),h=n(916269);const f=new c.Z;function p(e,t){if(!(0,r.Z)(e))throw new a.Z("scene is required.");if(!(0,r.Z)(t))throw new a.Z("entityCollection is required.");t.collectionChanged.addEventListener(p.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._tilesetHash={},this._entitiesToVisualize=new i.Z,this._onCollectionChanged(t,t.values,[],[])}function m(e,t,n,i){const o=n[t.id];(0,r.Z)(o)&&((0,r.Z)(o.tilesetPrimitive)&&i.removeAndDestroy(o.tilesetPrimitive),delete n[t.id])}async function _(e,t,n,i){t[n.id]={url:e.url,loadFail:!1};try{const o=await u.Z.fromUrl(e);if(o.id=n,i.add(o),!(0,r.Z)(t[n.id]))return;t[n.id].tilesetPrimitive=o}catch(e){console.error(e),t[n.id].loadFail=!0}}p.prototype.update=function(e){if(!(0,r.Z)(e))throw new a.Z("time is required.");const t=this._entitiesToVisualize.values,n=this._tilesetHash,i=this._primitives;for(let o=0,s=t.length;o<s;o++){const s=t[o],a=s._tileset;let c;const u=n[s.id],d=s.isShowing&&s.isAvailable(e)&&h.Z.getValueOrDefault(a._show,e,!0);let p;if(d&&(p=s.computeModelMatrix(e,f),c=l.Z.createIfNeeded(h.Z.getValueOrUndefined(a._uri,e))),!d){(0,r.Z)(u)&&(u.tilesetPrimitive.show=!1);continue}const m=(0,r.Z)(u)?u.tilesetPrimitive:void 0;(0,r.Z)(u)&&c.url===u.url||((0,r.Z)(m)&&i.removeAndDestroy(m),delete n[s.id],_(c,n,s,i)),(0,r.Z)(m)&&(m.show=!0,(0,r.Z)(p)&&(m.modelMatrix=p),m.maximumScreenSpaceError=h.Z.getValueOrDefault(a.maximumScreenSpaceError,e,m.maximumScreenSpaceError))}return!0},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(p.prototype._onCollectionChanged,this);const e=this._entitiesToVisualize.values,t=this._tilesetHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)m(0,e[i],t,n);return(0,s.Z)(this)},p.prototype.getBoundingSphere=function(e,t){if(!(0,r.Z)(e))throw new a.Z("entity is required.");if(!(0,r.Z)(t))throw new a.Z("result is required.");const n=this._tilesetHash[e.id];if(!(0,r.Z)(n)||n.loadFail)return d.Z.FAILED;const i=n.tilesetPrimitive;return(0,r.Z)(i)?i.show?(o.Z.clone(i.boundingSphere,t),d.Z.DONE):d.Z.FAILED:d.Z.PENDING},p.prototype._onCollectionChanged=function(e,t,n,i){let o,s;const a=this._entitiesToVisualize,c=this._tilesetHash,l=this._primitives;for(o=t.length-1;o>-1;o--)s=t[o],(0,r.Z)(s._tileset)&&a.set(s.id,s);for(o=i.length-1;o>-1;o--)s=i[o],(0,r.Z)(s._tileset)?a.set(s.id,s):(m(0,s,c,l),a.remove(s.id));for(o=n.length-1;o>-1;o--)s=n[o],m(0,s,c,l),a.remove(s.id)};const g=p},741224:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(234146),o=n(11020),r=n(765153),s=n(282910),a=n(803994),c=n(91981),l=n(916269);function u(e){this._referenceFrame=(0,i.Z)(e,a.Z.FIXED),this._definitionChanged=new s.Z,this._composite=new c.Z,this._composite.definitionChanged.addEventListener(u.prototype._raiseDefinitionChanged,this)}Object.defineProperties(u.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite.intervals}},referenceFrame:{get:function(){return this._referenceFrame},set:function(e){this._referenceFrame=e}}}),u.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,a.Z.FIXED,t)},u.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,o.Z)(e))throw new r.Z("time is required.");if(!(0,o.Z)(t))throw new r.Z("referenceFrame is required.");const i=this._composite._intervals.findDataForIntervalContainingDate(e);if((0,o.Z)(i))return i.getValueInReferenceFrame(e,t,n)},u.prototype.equals=function(e){return this===e||e instanceof u&&this._referenceFrame===e._referenceFrame&&this._composite.equals(e._composite,l.Z.equals)},u.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const d=u},91981:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(765153),r=n(282910),s=n(700234),a=n(691156),c=n(916269);function l(){this._eventHelper=new s.Z,this._definitionChanged=new r.Z,this._intervals=new a.Z,this._intervals.changedEvent.addEventListener(l.prototype._intervalsChanged,this)}Object.defineProperties(l.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),l.prototype.getValue=function(e,t){if(!(0,i.Z)(e))throw new o.Z("time is required");const n=this._intervals.findDataForIntervalContainingDate(e);if((0,i.Z)(n))return n.getValue(e,t)},l.prototype.equals=function(e){return this===e||e instanceof l&&this._intervals.equals(e._intervals,c.Z.equals)},l.prototype._intervalsChanged=function(){!function(e,t,n,o){function r(){n.raiseEvent(e)}const s=[];t.removeAll();const a=o.length;for(let e=0;e<a;e++){const n=o.get(e);(0,i.Z)(n.data)&&-1===s.indexOf(n.data)&&t.add(n.data.definitionChanged,r)}}(this,this._eventHelper,this._definitionChanged,this._intervals),this._definitionChanged.raiseEvent(this)};const u=l},831635:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(642336),o=n(660904),r=n(790087),s=n(35961),a=n(376213),c=n(126301),l=n(842056),u=n(11020),d=n(765153),h=n(669327),f=n(156905),p=n(551332),m=n(630114),_=n(143450),g=n(489381),Z=n(990778),y=n(71880),b=n(104763),v=n(731458),A=n(452741),T=n(674842),w=n(792739),E=n(916269);const S=new s.Z,C=o.Z.ZERO,x=new o.Z,I=new _.Z;function P(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.cornerType=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.offsetAttribute=void 0}function D(e,t){w.Z.call(this,{entity:e,scene:t,geometryOptions:new P(e),geometryPropertyName:"corridor",observedPropertyNames:["availability","corridor"]}),this._onEntityPropertyChanged(e,"corridor",e.corridor,void 0)}function O(e,t,n){A.Z.call(this,e,t,n)}(0,u.Z)(Object.create)&&(D.prototype=Object.create(w.Z.prototype),D.prototype.constructor=D),D.prototype.createFillGeometryInstance=function(e){if(r.Z.defined("time",e),!this._fillEnabled)throw new d.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new g.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:h.Z.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof v.Z){let t;(0,u.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,S)),(0,u.Z)(t)||(t=s.Z.WHITE),i.color=a.Z.fromColor(t)}return(0,u.Z)(this._options.offsetAttribute)&&(i.offset=m.Z.fromCartesian3(E.Z.getValueOrDefault(this._terrainOffsetProperty,e,C,x))),new f.Z({id:t,geometry:new c.Z(this._options),attributes:i})},D.prototype.createOutlineGeometryInstance=function(e){if(r.Z.defined("time",e),!this._outlineEnabled)throw new d.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=E.Z.getValueOrDefault(this._outlineColorProperty,e,s.Z.BLACK,S),o={show:new g.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:a.Z.fromColor(i),distanceDisplayCondition:h.Z.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0};return(0,u.Z)(this._options.offsetAttribute)&&(o.offset=m.Z.fromCartesian3(E.Z.getValueOrDefault(this._terrainOffsetProperty,e,C,x))),new f.Z({id:t,geometry:new l.Z(this._options),attributes:o})},D.prototype._computeCenter=function(e,t){const n=E.Z.getValueOrUndefined(this._entity.corridor.positions,e);if((0,u.Z)(n)&&0!==n.length)return o.Z.clone(n[Math.floor(n.length/2)],t)},D.prototype._isHidden=function(e,t){return!(0,u.Z)(t.positions)||!(0,u.Z)(t.width)||T.Z.prototype._isHidden.call(this,e,t)},D.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!E.Z.isConstant(t.height)||!E.Z.isConstant(t.extrudedHeight)||!E.Z.isConstant(t.granularity)||!E.Z.isConstant(t.width)||!E.Z.isConstant(t.outlineWidth)||!E.Z.isConstant(t.cornerType)||!E.Z.isConstant(t.zIndex)||this._onTerrain&&!E.Z.isConstant(this._materialProperty)&&!(this._materialProperty instanceof v.Z)},D.prototype._setStaticOptions=function(e,t){let n=E.Z.getValueOrUndefined(t.height,p.Z.MINIMUM_VALUE);const o=E.Z.getValueOrDefault(t.heightReference,p.Z.MINIMUM_VALUE,Z.Z.NONE);let r=E.Z.getValueOrUndefined(t.extrudedHeight,p.Z.MINIMUM_VALUE);const s=E.Z.getValueOrDefault(t.extrudedHeightReference,p.Z.MINIMUM_VALUE,Z.Z.NONE);(0,u.Z)(r)&&!(0,u.Z)(n)&&(n=0);const a=this._options;a.vertexFormat=this._materialProperty instanceof v.Z?b.Z.VERTEX_FORMAT:y.Z.MaterialSupport.TEXTURED.vertexFormat,a.positions=t.positions.getValue(p.Z.MINIMUM_VALUE,a.positions),a.width=t.width.getValue(p.Z.MINIMUM_VALUE),a.granularity=E.Z.getValueOrUndefined(t.granularity,p.Z.MINIMUM_VALUE),a.cornerType=E.Z.getValueOrUndefined(t.cornerType,p.Z.MINIMUM_VALUE),a.offsetAttribute=w.Z.computeGeometryOffsetAttribute(n,o,r,s),a.height=w.Z.getGeometryHeight(n,o),r=w.Z.getGeometryExtrudedHeight(r,s),r===w.Z.CLAMP_TO_GROUND&&(r=i.Z.getMinimumMaximumHeights(c.Z.computeRectangle(a,I)).minimumTerrainHeight),a.extrudedHeight=r},D.DynamicGeometryUpdater=O,(0,u.Z)(Object.create)&&(O.prototype=Object.create(A.Z.prototype),O.prototype.constructor=O),O.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,u.Z)(i.positions)||!(0,u.Z)(i.width)||A.Z.prototype._isHidden.call(this,e,t,n)},O.prototype._setOptions=function(e,t,n){const o=this._options;let r=E.Z.getValueOrUndefined(t.height,n);const s=E.Z.getValueOrDefault(t.heightReference,n,Z.Z.NONE);let a=E.Z.getValueOrUndefined(t.extrudedHeight,n);const l=E.Z.getValueOrDefault(t.extrudedHeightReference,n,Z.Z.NONE);(0,u.Z)(a)&&!(0,u.Z)(r)&&(r=0),o.positions=E.Z.getValueOrUndefined(t.positions,n),o.width=E.Z.getValueOrUndefined(t.width,n),o.granularity=E.Z.getValueOrUndefined(t.granularity,n),o.cornerType=E.Z.getValueOrUndefined(t.cornerType,n),o.offsetAttribute=w.Z.computeGeometryOffsetAttribute(r,s,a,l),o.height=w.Z.getGeometryHeight(r,s),a=w.Z.getGeometryExtrudedHeight(a,l),a===w.Z.CLAMP_TO_GROUND&&(a=i.Z.getMinimumMaximumHeights(c.Z.computeRectangle(o,I)).minimumTerrainHeight),o.extrudedHeight=a};const L=D},625739:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(660904),o=n(790087),r=n(35961),s=n(376213),a=n(6853),c=n(923156),l=n(11020),u=n(765153),d=n(669327),h=n(156905),f=n(61885),p=n(551332),m=n(630114),_=n(489381),g=n(990778),Z=n(71880),y=n(104763),b=n(731458),v=n(452741),A=n(674842),T=n(628353),w=n(916269);const E=i.Z.ZERO,S=new i.Z,C=new i.Z,x=new r.Z;function I(e){this.id=e,this.vertexFormat=void 0,this.length=void 0,this.topRadius=void 0,this.bottomRadius=void 0,this.slices=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function P(e,t){A.Z.call(this,{entity:e,scene:t,geometryOptions:new I(e),geometryPropertyName:"cylinder",observedPropertyNames:["availability","position","orientation","cylinder"]}),this._onEntityPropertyChanged(e,"cylinder",e.cylinder,void 0)}function D(e,t,n){v.Z.call(this,e,t,n)}(0,l.Z)(Object.create)&&(P.prototype=Object.create(A.Z.prototype),P.prototype.constructor=P),Object.defineProperties(P.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),P.prototype.createFillGeometryInstance=function(e){if(o.Z.defined("time",e),!this._fillEnabled)throw new u.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=new _.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),c=this._distanceDisplayConditionProperty.getValue(e),f={show:i,distanceDisplayCondition:d.Z.fromDistanceDisplayCondition(c),color:void 0,offset:void 0};if(this._materialProperty instanceof b.Z){let t;(0,l.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,x)),(0,l.Z)(t)||(t=r.Z.WHITE),f.color=s.Z.fromColor(t)}return(0,l.Z)(this._options.offsetAttribute)&&(f.offset=m.Z.fromCartesian3(w.Z.getValueOrDefault(this._terrainOffsetProperty,e,E,S))),new h.Z({id:t,geometry:new a.Z(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,.5*this._options.length,this._scene.mapProjection.ellipsoid),attributes:f})},P.prototype.createOutlineGeometryInstance=function(e){if(o.Z.defined("time",e),!this._outlineEnabled)throw new u.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=w.Z.getValueOrDefault(this._outlineColorProperty,e,r.Z.BLACK,x),a=this._distanceDisplayConditionProperty.getValue(e),f={show:new _.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:s.Z.fromColor(i),distanceDisplayCondition:d.Z.fromDistanceDisplayCondition(a),offset:void 0};return(0,l.Z)(this._options.offsetAttribute)&&(f.offset=m.Z.fromCartesian3(w.Z.getValueOrDefault(this._terrainOffsetProperty,e,E,S))),new h.Z({id:t,geometry:new c.Z(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,.5*this._options.length,this._scene.mapProjection.ellipsoid),attributes:f})},P.prototype._computeCenter=function(e,t){return w.Z.getValueOrUndefined(this._entity.position,e,t)},P.prototype._isHidden=function(e,t){return!(0,l.Z)(e.position)||!(0,l.Z)(t.length)||!(0,l.Z)(t.topRadius)||!(0,l.Z)(t.bottomRadius)||A.Z.prototype._isHidden.call(this,e,t)},P.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&w.Z.isConstant(e.orientation)&&t.length.isConstant&&t.topRadius.isConstant&&t.bottomRadius.isConstant&&w.Z.isConstant(t.slices)&&w.Z.isConstant(t.outlineWidth)&&w.Z.isConstant(t.numberOfVerticalLines))},P.prototype._setStaticOptions=function(e,t){const n=w.Z.getValueOrDefault(t.heightReference,p.Z.MINIMUM_VALUE,g.Z.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof b.Z?y.Z.VERTEX_FORMAT:Z.Z.MaterialSupport.TEXTURED.vertexFormat,i.length=t.length.getValue(p.Z.MINIMUM_VALUE),i.topRadius=t.topRadius.getValue(p.Z.MINIMUM_VALUE),i.bottomRadius=t.bottomRadius.getValue(p.Z.MINIMUM_VALUE),i.slices=w.Z.getValueOrUndefined(t.slices,p.Z.MINIMUM_VALUE),i.numberOfVerticalLines=w.Z.getValueOrUndefined(t.numberOfVerticalLines,p.Z.MINIMUM_VALUE),i.offsetAttribute=n!==g.Z.NONE?f.Z.ALL:void 0},P.prototype._onEntityPropertyChanged=T.Z,P.DynamicGeometryUpdater=D,(0,l.Z)(Object.create)&&(D.prototype=Object.create(v.Z.prototype),D.prototype.constructor=D),D.prototype._isHidden=function(e,t,n){const i=this._options,o=w.Z.getValueOrUndefined(e.position,n,C);return!(0,l.Z)(o)||!(0,l.Z)(i.length)||!(0,l.Z)(i.topRadius)||!(0,l.Z)(i.bottomRadius)||v.Z.prototype._isHidden.call(this,e,t,n)},D.prototype._setOptions=function(e,t,n){const i=w.Z.getValueOrDefault(t.heightReference,n,g.Z.NONE),o=this._options;o.length=w.Z.getValueOrUndefined(t.length,n),o.topRadius=w.Z.getValueOrUndefined(t.topRadius,n),o.bottomRadius=w.Z.getValueOrUndefined(t.bottomRadius,n),o.slices=w.Z.getValueOrUndefined(t.slices,n),o.numberOfVerticalLines=w.Z.getValueOrUndefined(t.numberOfVerticalLines,n),o.offsetAttribute=i!==g.Z.NONE?f.Z.ALL:void 0};const O=P},883334:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(234146),o=n(11020),r=n(722313),s=n(765153),a=n(282910),c=n(344485);function l(){this._dataSources=[],this._dataSourceAdded=new a.Z,this._dataSourceRemoved=new a.Z,this._dataSourceMoved=new a.Z}function u(e,t){if(!(0,o.Z)(t))throw new s.Z("dataSource is required.");const n=e.indexOf(t);if(-1===n)throw new s.Z("dataSource is not in this collection.");return n}function d(e,t,n){const i=e._dataSources,o=i.length-1;if((t=c.Z.clamp(t,0,o))===(n=c.Z.clamp(n,0,o)))return;const r=i[t];i[t]=i[n],i[n]=r,e.dataSourceMoved.raiseEvent(r,n,t)}Object.defineProperties(l.prototype,{length:{get:function(){return this._dataSources.length}},dataSourceAdded:{get:function(){return this._dataSourceAdded}},dataSourceRemoved:{get:function(){return this._dataSourceRemoved}},dataSourceMoved:{get:function(){return this._dataSourceMoved}}}),l.prototype.add=function(e){if(!(0,o.Z)(e))throw new s.Z("dataSource is required.");const t=this,n=this._dataSources;return Promise.resolve(e).then((function(e){return n===t._dataSources&&(t._dataSources.push(e),t._dataSourceAdded.raiseEvent(t,e)),e}))},l.prototype.remove=function(e,t){t=(0,i.Z)(t,!1);const n=this._dataSources.indexOf(e);return-1!==n&&(this._dataSources.splice(n,1),this._dataSourceRemoved.raiseEvent(this,e),t&&"function"==typeof e.destroy&&e.destroy(),!0)},l.prototype.removeAll=function(e){e=(0,i.Z)(e,!1);const t=this._dataSources;for(let n=0,i=t.length;n<i;++n){const i=t[n];this._dataSourceRemoved.raiseEvent(this,i),e&&"function"==typeof i.destroy&&i.destroy()}this._dataSources=[]},l.prototype.contains=function(e){return-1!==this.indexOf(e)},l.prototype.indexOf=function(e){return this._dataSources.indexOf(e)},l.prototype.get=function(e){if(!(0,o.Z)(e))throw new s.Z("index is required.");return this._dataSources[e]},l.prototype.getByName=function(e){if(!(0,o.Z)(e))throw new s.Z("name is required.");return this._dataSources.filter((function(t){return t.name===e}))},l.prototype.raise=function(e){const t=u(this._dataSources,e);d(this,t,t+1)},l.prototype.lower=function(e){const t=u(this._dataSources,e);d(this,t,t-1)},l.prototype.raiseToTop=function(e){const t=u(this._dataSources,e);t!==this._dataSources.length-1&&(this._dataSources.splice(t,1),this._dataSources.push(e),this.dataSourceMoved.raiseEvent(e,this._dataSources.length-1,t))},l.prototype.lowerToBottom=function(e){const t=u(this._dataSources,e);0!==t&&(this._dataSources.splice(t,1),this._dataSources.splice(0,0,e),this.dataSourceMoved.raiseEvent(e,0,t))},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this.removeAll(!0),(0,r.Z)(this)};const h=l},934135:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var i=n(642336),o=n(762031),r=n(790087),s=n(234146),a=n(11020),c=n(722313),l=n(700234),u=n(958913),d=n(604274),h=n(762041),f=n(883900),p=n(100002),m=n(657528),_=n(534531),g=n(636114),Z=n(329243),y=n(187036),b=n(216055),v=n(185871),A=n(559905),T=n(731803);function w(e){r.Z.typeOf.object("options",e),r.Z.typeOf.object("options.scene",e.scene),r.Z.typeOf.object("options.dataSourceCollection",e.dataSourceCollection),d.Z.initializeTerrainHeights(),u.Z.initializeTerrainHeights();const t=e.scene,n=e.dataSourceCollection;this._eventHelper=new l.Z,this._eventHelper.add(n.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(n.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(n.dataSourceMoved,this._onDataSourceMoved,this),this._eventHelper.add(t.postRender,this._postRender,this),this._dataSourceCollection=n,this._scene=t,this._visualizersCallback=(0,s.Z)(e.visualizersCallback,w.defaultVisualizersCallback);let i=!1;const o=new f.Z,a=new f.Z;n.length>0&&(t.primitives.add(o),t.groundPrimitives.add(a),i=!0),this._primitives=o,this._groundPrimitives=a;for(let e=0,t=n.length;e<t;e++)this._onDataSourceAdded(n,n.get(e));const c=new _.Z;let h,p;if(this._onDataSourceAdded(void 0,c),this._defaultDataSource=c,!i){const e=this,i=function(){t.primitives.add(o),t.groundPrimitives.add(a),h(),p(),e._removeDefaultDataSourceListener=void 0,e._removeDataSourceCollectionListener=void 0};h=c.entities.collectionChanged.addEventListener(i),p=n.dataSourceAdded.addEventListener(i)}this._removeDefaultDataSourceListener=h,this._removeDataSourceCollectionListener=p,this._ready=!1}w.defaultVisualizersCallback=function(e,t,n){const i=n.entities;return[new p.Z(t,i),new g.Z(e,i,n._primitives,n._groundPrimitives),new Z.Z(t,i),new y.Z(e,i),new b.Z(e,i),new A.Z(t,i),new v.Z(e,i),new T.Z(e,i,n._primitives,n._groundPrimitives)]},Object.defineProperties(w.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}}),w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){this._eventHelper.removeAll();const e=this._dataSourceCollection;for(let t=0,n=e.length;t<n;++t)this._onDataSourceRemoved(this._dataSourceCollection,e.get(t));return this._onDataSourceRemoved(void 0,this._defaultDataSource),(0,a.Z)(this._removeDefaultDataSourceListener)?(this._removeDefaultDataSourceListener(),this._removeDataSourceCollectionListener()):(this._scene.primitives.remove(this._primitives),this._scene.groundPrimitives.remove(this._groundPrimitives)),(0,c.Z)(this)},w.prototype.update=function(e){if(r.Z.defined("time",e),!i.Z.initialized)return this._ready=!1,!1;let t,n,o,s,c=!0;const l=this._dataSourceCollection,u=l.length;for(t=0;t<u;t++){const i=l.get(t);for((0,a.Z)(i.update)&&(c=i.update(e)&&c),o=i._visualizers,s=o.length,n=0;n<s;n++)c=o[n].update(e)&&c}for(o=this._defaultDataSource._visualizers,s=o.length,n=0;n<s;n++)c=o[n].update(e)&&c;return this._ready=c,c},w.prototype._postRender=function(){const e=this._scene.frameState,t=this._dataSourceCollection,n=t.length;for(let i=0;i<n;i++){const n=t.get(i),o=n.credit;(0,a.Z)(o)&&e.creditDisplay.addCreditToNextFrame(o);const r=n._resourceCredits;if((0,a.Z)(r)){const t=r.length;for(let n=0;n<t;n++)e.creditDisplay.addCreditToNextFrame(r[n])}}};const E=[],S=new o.Z;w.prototype.getBoundingSphere=function(e,t,n){if(r.Z.defined("entity",e),r.Z.typeOf.bool("allowPartial",t),r.Z.defined("result",n),!this._ready)return m.Z.PENDING;let i,s,c=this._defaultDataSource;if(!c.entities.contains(e)){c=void 0;const t=this._dataSourceCollection;for(s=t.length,i=0;i<s;i++){const n=t.get(i);if(n.entities.contains(e)){c=n;break}}}if(!(0,a.Z)(c))return m.Z.FAILED;const l=E,u=S;let d=0,h=m.Z.DONE;const f=c._visualizers,p=f.length;for(i=0;i<p;i++){const n=f[i];if((0,a.Z)(n.getBoundingSphere)){if(h=f[i].getBoundingSphere(e,u),!t&&h===m.Z.PENDING)return m.Z.PENDING;h===m.Z.DONE&&(l[d]=o.Z.clone(u,l[d]),d++)}}return 0===d?m.Z.FAILED:(l.length=d,o.Z.fromBoundingSpheres(l,n),m.Z.DONE)},w.prototype._onDataSourceAdded=function(e,t){const n=this._scene,i=this._primitives,o=this._groundPrimitives,r=i.add(new f.Z),s=o.add(new h.Z);t._primitives=r,t._groundPrimitives=s;const a=t.clustering;a._initialize(n),r.add(a),t._visualizers=this._visualizersCallback(n,a,t)},w.prototype._onDataSourceRemoved=function(e,t){const n=this._primitives,i=this._groundPrimitives,o=t._primitives,r=t._groundPrimitives,s=t.clustering;o.remove(s);const a=t._visualizers,c=a.length;for(let e=0;e<c;e++)a[e].destroy();n.remove(o),i.remove(r),t._visualizers=void 0},w.prototype._onDataSourceMoved=function(e,t,n){const i=this._primitives,o=this._groundPrimitives,r=e._primitives,s=e._groundPrimitives;t===n+1?(i.raise(r),o.raise(s)):t===n-1?(i.lower(r),o.lower(s)):0===t?(i.lowerToBottom(r),o.lowerToBottom(s),i.raise(r),o.raise(s)):(i.raiseToTop(r),o.raiseToTop(s))};const C=w},946931:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(781382),o=n(11020),r=n(657528);function s(e,t){this._primitives=e,this._orderedGroundPrimitives=t,this._dynamicUpdaters=new i.Z}s.prototype.add=function(e,t){this._dynamicUpdaters.set(t.id,t.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))},s.prototype.remove=function(e){const t=e.id,n=this._dynamicUpdaters.get(t);(0,o.Z)(n)&&(this._dynamicUpdaters.remove(t),n.destroy())},s.prototype.update=function(e){const t=this._dynamicUpdaters.values;for(let n=0,i=t.length;n<i;n++)t[n].update(e);return!0},s.prototype.removeAllPrimitives=function(){const e=this._dynamicUpdaters.values;for(let t=0,n=e.length;t<n;t++)e[t].destroy();this._dynamicUpdaters.removeAll()},s.prototype.getBoundingSphere=function(e,t){return e=this._dynamicUpdaters.get(e.id),(0,o.Z)(e)&&(0,o.Z)(e.getBoundingSphere)?e.getBoundingSphere(t):r.Z.FAILED};const a=s},452741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(762031),o=n(790087),r=n(11020),s=n(722313),a=n(765153),c=n(604274),l=n(71880),u=n(104763),d=n(759398),h=n(657528),f=n(731458),p=n(121221),m=n(916269);function _(e,t,n){o.Z.defined("geometryUpdater",e),o.Z.defined("primitives",t),o.Z.defined("orderedGroundPrimitives",n),this._primitives=t,this._orderedGroundPrimitives=n,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=e,this._options=e._options,this._entity=e._entity,this._material=void 0}_.prototype._isHidden=function(e,t,n){return!e.isShowing||!e.isAvailable(n)||!m.Z.getValueOrDefault(t.show,n,!0)},_.prototype._setOptions=a.Z.throwInstantiationError,_.prototype.update=function(e){o.Z.defined("time",e);const t=this._geometryUpdater,n=t._onTerrain,i=this._primitives,s=this._orderedGroundPrimitives;n?s.remove(this._primitive):(i.removeAndDestroy(this._primitive),i.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;const a=this._entity,h=a[this._geometryUpdater._geometryPropertyName];if(this._setOptions(a,h,e),this._isHidden(a,h,e))return;const _=this._geometryUpdater.shadowsProperty.getValue(e),g=this._options;if(!(0,r.Z)(h.fill)||h.fill.getValue(e)){const o=t.fillMaterialProperty,r=o instanceof f.Z;let a;const h=t._getIsClosed(g);if(r)a=new u.Z({closed:h,flat:n&&!t._supportsMaterialsforEntitiesOnTerrain});else{const t=p.Z.getValue(e,o,this._material);this._material=t,a=new l.Z({material:t,translucent:t.isTranslucent(),closed:h})}if(n)g.vertexFormat=u.Z.VERTEX_FORMAT,this._primitive=s.add(new c.Z({geometryInstances:this._geometryUpdater.createFillGeometryInstance(e),appearance:a,asynchronous:!1,shadows:_,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(e)}),m.Z.getValueOrUndefined(this._geometryUpdater.zIndex,e));else{g.vertexFormat=a.vertexFormat;const t=this._geometryUpdater.createFillGeometryInstance(e);r&&(a.translucent=255!==t.attributes.color.value[3]),this._primitive=i.add(new d.Z({geometryInstances:t,appearance:a,asynchronous:!1,shadows:_}))}}if(!n&&(0,r.Z)(h.outline)&&h.outline.getValue(e)){const n=this._geometryUpdater.createOutlineGeometryInstance(e),o=m.Z.getValueOrDefault(h.outlineWidth,e,1);this._outlinePrimitive=i.add(new d.Z({geometryInstances:n,appearance:new u.Z({flat:!0,translucent:255!==n.attributes.color.value[3],renderState:{lineWidth:t._scene.clampLineWidth(o)}}),asynchronous:!1,shadows:_}))}},_.prototype.getBoundingSphere=function(e){if(!(0,r.Z)(e))throw new a.Z("result is required.");const t=this._entity,n=this._primitive,o=this._outlinePrimitive;let s;return(0,r.Z)(n)&&n.show&&n.ready&&(s=n.getGeometryInstanceAttributes(t),(0,r.Z)(s)&&(0,r.Z)(s.boundingSphere))||(0,r.Z)(o)&&o.show&&o.ready&&(s=o.getGeometryInstanceAttributes(t),(0,r.Z)(s)&&(0,r.Z)(s.boundingSphere))?(i.Z.clone(s.boundingSphere,e),h.Z.DONE):(0,r.Z)(n)&&!n.ready||(0,r.Z)(o)&&!o.ready?h.Z.PENDING:h.Z.FAILED},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){const e=this._primitives,t=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?t.remove(this._primitive):e.removeAndDestroy(this._primitive),e.removeAndDestroy(this._outlinePrimitive),(0,s.Z)(this)};const g=_},624550:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(642336),o=n(660904),r=n(790087),s=n(35961),a=n(376213),c=n(11020),l=n(765153),u=n(669327),d=n(370271),h=n(794493),f=n(156905),p=n(551332),m=n(630114),_=n(143450),g=n(489381),Z=n(990778),y=n(71880),b=n(104763),v=n(731458),A=n(452741),T=n(674842),w=n(792739),E=n(916269);const S=new s.Z,C=o.Z.ZERO,x=new o.Z,I=new _.Z;function P(e){this.id=e,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function D(e,t){w.Z.call(this,{entity:e,scene:t,geometryOptions:new P(e),geometryPropertyName:"ellipse",observedPropertyNames:["availability","position","ellipse"]}),this._onEntityPropertyChanged(e,"ellipse",e.ellipse,void 0)}function O(e,t,n){A.Z.call(this,e,t,n)}(0,c.Z)(Object.create)&&(D.prototype=Object.create(w.Z.prototype),D.prototype.constructor=D),D.prototype.createFillGeometryInstance=function(e){if(r.Z.defined("time",e),!this._fillEnabled)throw new l.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new g.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:u.Z.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof v.Z){let t;(0,c.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,S)),(0,c.Z)(t)||(t=s.Z.WHITE),i.color=a.Z.fromColor(t)}return(0,c.Z)(this._options.offsetAttribute)&&(i.offset=m.Z.fromCartesian3(E.Z.getValueOrDefault(this._terrainOffsetProperty,e,C,x))),new f.Z({id:t,geometry:new d.Z(this._options),attributes:i})},D.prototype.createOutlineGeometryInstance=function(e){if(r.Z.defined("time",e),!this._outlineEnabled)throw new l.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=E.Z.getValueOrDefault(this._outlineColorProperty,e,s.Z.BLACK,S),o=this._distanceDisplayConditionProperty.getValue(e),d={show:new g.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:a.Z.fromColor(i),distanceDisplayCondition:u.Z.fromDistanceDisplayCondition(o),offset:void 0};return(0,c.Z)(this._options.offsetAttribute)&&(d.offset=m.Z.fromCartesian3(E.Z.getValueOrDefault(this._terrainOffsetProperty,e,C,x))),new f.Z({id:t,geometry:new h.Z(this._options),attributes:d})},D.prototype._computeCenter=function(e,t){return E.Z.getValueOrUndefined(this._entity.position,e,t)},D.prototype._isHidden=function(e,t){const n=e.position;return!(0,c.Z)(n)||!(0,c.Z)(t.semiMajorAxis)||!(0,c.Z)(t.semiMinorAxis)||T.Z.prototype._isHidden.call(this,e,t)},D.prototype._isDynamic=function(e,t){return!e.position.isConstant||!t.semiMajorAxis.isConstant||!t.semiMinorAxis.isConstant||!E.Z.isConstant(t.rotation)||!E.Z.isConstant(t.height)||!E.Z.isConstant(t.extrudedHeight)||!E.Z.isConstant(t.granularity)||!E.Z.isConstant(t.stRotation)||!E.Z.isConstant(t.outlineWidth)||!E.Z.isConstant(t.numberOfVerticalLines)||!E.Z.isConstant(t.zIndex)||this._onTerrain&&!E.Z.isConstant(this._materialProperty)&&!(this._materialProperty instanceof v.Z)},D.prototype._setStaticOptions=function(e,t){let n=E.Z.getValueOrUndefined(t.height,p.Z.MINIMUM_VALUE);const o=E.Z.getValueOrDefault(t.heightReference,p.Z.MINIMUM_VALUE,Z.Z.NONE);let r=E.Z.getValueOrUndefined(t.extrudedHeight,p.Z.MINIMUM_VALUE);const s=E.Z.getValueOrDefault(t.extrudedHeightReference,p.Z.MINIMUM_VALUE,Z.Z.NONE);(0,c.Z)(r)&&!(0,c.Z)(n)&&(n=0);const a=this._options;a.vertexFormat=this._materialProperty instanceof v.Z?b.Z.VERTEX_FORMAT:y.Z.MaterialSupport.TEXTURED.vertexFormat,a.center=e.position.getValue(p.Z.MINIMUM_VALUE,a.center),a.semiMajorAxis=t.semiMajorAxis.getValue(p.Z.MINIMUM_VALUE,a.semiMajorAxis),a.semiMinorAxis=t.semiMinorAxis.getValue(p.Z.MINIMUM_VALUE,a.semiMinorAxis),a.rotation=E.Z.getValueOrUndefined(t.rotation,p.Z.MINIMUM_VALUE),a.granularity=E.Z.getValueOrUndefined(t.granularity,p.Z.MINIMUM_VALUE),a.stRotation=E.Z.getValueOrUndefined(t.stRotation,p.Z.MINIMUM_VALUE),a.numberOfVerticalLines=E.Z.getValueOrUndefined(t.numberOfVerticalLines,p.Z.MINIMUM_VALUE),a.offsetAttribute=w.Z.computeGeometryOffsetAttribute(n,o,r,s),a.height=w.Z.getGeometryHeight(n,o),r=w.Z.getGeometryExtrudedHeight(r,s),r===w.Z.CLAMP_TO_GROUND&&(r=i.Z.getMinimumMaximumHeights(d.Z.computeRectangle(a,I)).minimumTerrainHeight),a.extrudedHeight=r},D.DynamicGeometryUpdater=O,(0,c.Z)(Object.create)&&(O.prototype=Object.create(A.Z.prototype),O.prototype.constructor=O),O.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,c.Z)(i.center)||!(0,c.Z)(i.semiMajorAxis)||!(0,c.Z)(i.semiMinorAxis)||A.Z.prototype._isHidden.call(this,e,t,n)},O.prototype._setOptions=function(e,t,n){const o=this._options;let r=E.Z.getValueOrUndefined(t.height,n);const s=E.Z.getValueOrDefault(t.heightReference,n,Z.Z.NONE);let a=E.Z.getValueOrUndefined(t.extrudedHeight,n);const l=E.Z.getValueOrDefault(t.extrudedHeightReference,n,Z.Z.NONE);(0,c.Z)(a)&&!(0,c.Z)(r)&&(r=0),o.center=E.Z.getValueOrUndefined(e.position,n,o.center),o.semiMajorAxis=E.Z.getValueOrUndefined(t.semiMajorAxis,n),o.semiMinorAxis=E.Z.getValueOrUndefined(t.semiMinorAxis,n),o.rotation=E.Z.getValueOrUndefined(t.rotation,n),o.granularity=E.Z.getValueOrUndefined(t.granularity,n),o.stRotation=E.Z.getValueOrUndefined(t.stRotation,n),o.numberOfVerticalLines=E.Z.getValueOrUndefined(t.numberOfVerticalLines,n),o.offsetAttribute=w.Z.computeGeometryOffsetAttribute(r,s,a,l),o.height=w.Z.getGeometryHeight(r,s),a=w.Z.getGeometryExtrudedHeight(a,l),a===w.Z.CLAMP_TO_GROUND&&(a=i.Z.getMinimumMaximumHeights(d.Z.computeRectangle(o,I)).minimumTerrainHeight),o.extrudedHeight=a};const L=D},926625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var i=n(660904),o=n(790087),r=n(35961),s=n(376213),a=n(234146),c=n(11020),l=n(6821),u=n(669327),d=n(658912),h=n(802877),f=n(156905),p=n(61885),m=n(551332),_=n(659635),g=n(630114),Z=n(489381),y=n(990778),b=n(71880),v=n(104763),A=n(759398),T=n(714233),w=n(731458),E=n(452741),S=n(674842),C=n(628353),x=n(121221),I=n(916269);const P=new w.Z(r.Z.WHITE),D=i.Z.ZERO,O=new i.Z,L=new i.Z,N=new i.Z,M=new r.Z,R=new i.Z(1,1,1);function F(e){this.id=e,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function B(e,t){S.Z.call(this,{entity:e,scene:t,geometryOptions:new F(e),geometryPropertyName:"ellipsoid",observedPropertyNames:["availability","position","orientation","ellipsoid"]}),this._onEntityPropertyChanged(e,"ellipsoid",e.ellipsoid,void 0)}function U(e,t,n){E.Z.call(this,e,t,n),this._scene=e._scene,this._modelMatrix=new _.Z,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new i.Z,this._material={}}(0,c.Z)(Object.create)&&(B.prototype=Object.create(S.Z.prototype),B.prototype.constructor=B),Object.defineProperties(B.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),B.prototype.createFillGeometryInstance=function(e,t,n){o.Z.defined("time",e);const i=this._entity,a=i.isAvailable(e);let l;const h=new Z.Z(a&&i.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),p=this._distanceDisplayConditionProperty.getValue(e),m={show:h,distanceDisplayCondition:u.Z.fromDistanceDisplayCondition(p),color:void 0,offset:void 0};if(this._materialProperty instanceof w.Z){let t;(0,c.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||a)&&(t=this._materialProperty.color.getValue(e,M)),(0,c.Z)(t)||(t=r.Z.WHITE),l=s.Z.fromColor(t),m.color=l}return(0,c.Z)(this._options.offsetAttribute)&&(m.offset=g.Z.fromCartesian3(I.Z.getValueOrDefault(this._terrainOffsetProperty,e,D,O))),new f.Z({id:i,geometry:new d.Z(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,n),attributes:m})},B.prototype.createOutlineGeometryInstance=function(e,t,n){o.Z.defined("time",e);const i=this._entity,a=i.isAvailable(e),l=I.Z.getValueOrDefault(this._outlineColorProperty,e,r.Z.BLACK,M),d=this._distanceDisplayConditionProperty.getValue(e),p={show:new Z.Z(a&&i.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:s.Z.fromColor(l),distanceDisplayCondition:u.Z.fromDistanceDisplayCondition(d),offset:void 0};return(0,c.Z)(this._options.offsetAttribute)&&(p.offset=g.Z.fromCartesian3(I.Z.getValueOrDefault(this._terrainOffsetProperty,e,D,O))),new f.Z({id:i,geometry:new h.Z(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,n),attributes:p})},B.prototype._computeCenter=function(e,t){return I.Z.getValueOrUndefined(this._entity.position,e,t)},B.prototype._isHidden=function(e,t){return!(0,c.Z)(e.position)||!(0,c.Z)(t.radii)||S.Z.prototype._isHidden.call(this,e,t)},B.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&I.Z.isConstant(e.orientation)&&t.radii.isConstant&&I.Z.isConstant(t.innerRadii)&&I.Z.isConstant(t.stackPartitions)&&I.Z.isConstant(t.slicePartitions)&&I.Z.isConstant(t.outlineWidth)&&I.Z.isConstant(t.minimumClock)&&I.Z.isConstant(t.maximumClock)&&I.Z.isConstant(t.minimumCone)&&I.Z.isConstant(t.maximumCone)&&I.Z.isConstant(t.subdivisions))},B.prototype._setStaticOptions=function(e,t){const n=I.Z.getValueOrDefault(t.heightReference,m.Z.MINIMUM_VALUE,y.Z.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof w.Z?v.Z.VERTEX_FORMAT:b.Z.MaterialSupport.TEXTURED.vertexFormat,i.radii=t.radii.getValue(m.Z.MINIMUM_VALUE,i.radii),i.innerRadii=I.Z.getValueOrUndefined(t.innerRadii,i.radii),i.minimumClock=I.Z.getValueOrUndefined(t.minimumClock,m.Z.MINIMUM_VALUE),i.maximumClock=I.Z.getValueOrUndefined(t.maximumClock,m.Z.MINIMUM_VALUE),i.minimumCone=I.Z.getValueOrUndefined(t.minimumCone,m.Z.MINIMUM_VALUE),i.maximumCone=I.Z.getValueOrUndefined(t.maximumCone,m.Z.MINIMUM_VALUE),i.stackPartitions=I.Z.getValueOrUndefined(t.stackPartitions,m.Z.MINIMUM_VALUE),i.slicePartitions=I.Z.getValueOrUndefined(t.slicePartitions,m.Z.MINIMUM_VALUE),i.subdivisions=I.Z.getValueOrUndefined(t.subdivisions,m.Z.MINIMUM_VALUE),i.offsetAttribute=n!==y.Z.NONE?p.Z.ALL:void 0},B.prototype._onEntityPropertyChanged=C.Z,B.DynamicGeometryUpdater=U,(0,c.Z)(Object.create)&&(U.prototype=Object.create(E.Z.prototype),U.prototype.constructor=U),U.prototype.update=function(e){o.Z.defined("time",e);const t=this._entity,n=t.ellipsoid;if(!t.isShowing||!t.isAvailable(e)||!I.Z.getValueOrDefault(n.show,e,!0))return(0,c.Z)(this._primitive)&&(this._primitive.show=!1),void((0,c.Z)(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));const d=I.Z.getValueOrUndefined(n.radii,e,L);let h=(0,c.Z)(d)?t.computeModelMatrixForHeightReference(e,n.heightReference,.5*d.z,this._scene.mapProjection.ellipsoid,this._modelMatrix):void 0;if(!(0,c.Z)(h)||!(0,c.Z)(d))return(0,c.Z)(this._primitive)&&(this._primitive.show=!1),void((0,c.Z)(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));const f=I.Z.getValueOrDefault(n.fill,e,!0),m=I.Z.getValueOrDefault(n.outline,e,!1),w=I.Z.getValueOrClonedDefault(n.outlineColor,e,r.Z.BLACK,M),E=x.Z.getValue(e,(0,a.Z)(n.material,P),this._material),S=I.Z.getValueOrUndefined(n.innerRadii,e,N),C=I.Z.getValueOrUndefined(n.minimumClock,e),F=I.Z.getValueOrUndefined(n.maximumClock,e),B=I.Z.getValueOrUndefined(n.minimumCone,e),U=I.Z.getValueOrUndefined(n.maximumCone,e),k=I.Z.getValueOrUndefined(n.stackPartitions,e),V=I.Z.getValueOrUndefined(n.slicePartitions,e),H=I.Z.getValueOrUndefined(n.subdivisions,e),z=I.Z.getValueOrDefault(n.outlineWidth,e,1),G=I.Z.getValueOrDefault(n.heightReference,e,y.Z.NONE),j=G!==y.Z.NONE?p.Z.ALL:void 0,W=this._scene.mode,q=W===T.Z.SCENE3D&&G===y.Z.NONE,Y=this._options,X=this._geometryUpdater.shadowsProperty.getValue(e),J=this._geometryUpdater.distanceDisplayConditionProperty.getValue(e),Q=I.Z.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,e,D,O);if(!q||this._lastSceneMode!==W||!(0,c.Z)(this._primitive)||Y.stackPartitions!==k||Y.slicePartitions!==V||(0,c.Z)(S)&&!i.Z.equals(Y.innerRadii!==S)||Y.minimumClock!==C||Y.maximumClock!==F||Y.minimumCone!==B||Y.maximumCone!==U||Y.subdivisions!==H||this._lastOutlineWidth!==z||Y.offsetAttribute!==j){const t=this._primitives;if(t.removeAndDestroy(this._primitive),t.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=W,this._lastOutlineWidth=z,Y.stackPartitions=k,Y.slicePartitions=V,Y.subdivisions=H,Y.offsetAttribute=j,Y.radii=i.Z.clone(q?R:d,Y.radii),(0,c.Z)(S))if(q){const e=i.Z.magnitude(d);Y.innerRadii=i.Z.fromElements(S.x/e,S.y/e,S.z/e,Y.innerRadii)}else Y.innerRadii=i.Z.clone(S,Y.innerRadii);else Y.innerRadii=void 0;Y.minimumClock=C,Y.maximumClock=F,Y.minimumCone=B,Y.maximumCone=U;const n=new b.Z({material:E,translucent:E.isTranslucent(),closed:!0});Y.vertexFormat=n.vertexFormat;const o=this._geometryUpdater.createFillGeometryInstance(e,q,this._modelMatrix);this._primitive=t.add(new A.Z({geometryInstances:o,appearance:n,asynchronous:!1,shadows:X}));const s=this._geometryUpdater.createOutlineGeometryInstance(e,q,this._modelMatrix);this._outlinePrimitive=t.add(new A.Z({geometryInstances:s,appearance:new v.Z({flat:!0,translucent:255!==s.attributes.color.value[3],renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(z)}}),asynchronous:!1,shadows:X})),this._lastShow=f,this._lastOutlineShow=m,this._lastOutlineColor=r.Z.clone(w,this._lastOutlineColor),this._lastDistanceDisplayCondition=J,this._lastOffset=i.Z.clone(Q,this._lastOffset)}else if(this._primitive.ready){const e=this._primitive,n=this._outlinePrimitive;e.show=!0,n.show=!0,e.appearance.material=E;let o=this._attributes;(0,c.Z)(o)||(o=e.getGeometryInstanceAttributes(t),this._attributes=o),f!==this._lastShow&&(o.show=Z.Z.toValue(f,o.show),this._lastShow=f);let a=this._outlineAttributes;(0,c.Z)(a)||(a=n.getGeometryInstanceAttributes(t),this._outlineAttributes=a),m!==this._lastOutlineShow&&(a.show=Z.Z.toValue(m,a.show),this._lastOutlineShow=m),r.Z.equals(w,this._lastOutlineColor)||(a.color=s.Z.toValue(w,a.color),r.Z.clone(w,this._lastOutlineColor)),l.Z.equals(J,this._lastDistanceDisplayCondition)||(o.distanceDisplayCondition=u.Z.toValue(J,o.distanceDisplayCondition),a.distanceDisplayCondition=u.Z.toValue(J,a.distanceDisplayCondition),l.Z.clone(J,this._lastDistanceDisplayCondition)),i.Z.equals(Q,this._lastOffset)||(o.offset=g.Z.toValue(Q,o.offset),a.offset=g.Z.toValue(Q,o.offset),i.Z.clone(Q,this._lastOffset))}q&&(d.x=Math.max(d.x,.001),d.y=Math.max(d.y,.001),d.z=Math.max(d.z,.001),h=_.Z.multiplyByScale(h,d,h),this._primitive.modelMatrix=h,this._outlinePrimitive.modelMatrix=h)};const k=B},487004:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(660904),o=n(790087),r=n(234146),s=n(11020),a=n(63354),c=n(339079),l=n(791364),u=n(344485),d=n(664288),h=n(659635),f=n(720794),p=n(714233);const m=new d.Z,_=new d.Z,g=new d.Z,Z=new h.Z,y=new i.Z,b=new i.Z,v=new i.Z,A=new i.Z,T=new i.Z,w=new i.Z,E=new l.Z;function S(e,t,n){o.Z.defined("entity",e),o.Z.defined("scene",t),this.entity=e,this.scene=t,this.ellipsoid=(0,r.Z)(n,a.Z.WGS84),this.boundingSphere=void 0,this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new i.Z,this._defaultOffset3D=void 0,this._offset3D=new i.Z}Object.defineProperties(S,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(e){this._defaultOffset3D=i.Z.clone(e,new i.Z)}}}),S.defaultOffset3D=new i.Z(-14e3,3500,3500);const C=new c.Z,x=new i.Z;S.prototype.update=function(e,t){o.Z.defined("time",e);const n=this.scene,r=this.ellipsoid,a=n.mode;if(a===p.Z.MORPHING)return;const c=this.entity,h=c.position;if(!(0,s.Z)(h))return;const I=c!==this._lastEntity,P=a!==this._mode,D=n.camera;let O=I||P,L=!0;if(I){const n=c.viewFrom,o=(0,s.Z)(n);if(!o&&(0,s.Z)(t)){C.pitch=-u.Z.PI_OVER_FOUR,C.range=0;const n=h.getValue(e,x);if((0,s.Z)(n)){const e=2-1/Math.max(1,i.Z.magnitude(n)/r.maximumRadius);C.pitch*=e}D.viewBoundingSphere(t,C),this.boundingSphere=t,O=!1,L=!1}else o&&(0,s.Z)(n.getValue(e,this._offset3D))||i.Z.clone(S._defaultOffset3D,this._offset3D)}else P||this._mode===p.Z.SCENE2D||i.Z.clone(D.position,this._offset3D);this._lastEntity=c,this._mode=a,function(e,t,n,o,r,a,c){const h=e.scene.mode;let S=r.getValue(a,e._lastCartesian);if((0,s.Z)(S)){let n,C,x,I,P,D,O=!1,L=!1;if(h===p.Z.SCENE3D){l.Z.addSeconds(a,.001,E);let e=r.getValue(E,y);if((0,s.Z)(e)||(l.Z.addSeconds(a,-.001,E),e=r.getValue(E,y),L=!0),(0,s.Z)(e)){let t,o=f.Z.computeFixedToIcrfMatrix(a,m),r=f.Z.computeFixedToIcrfMatrix(E,_);(0,s.Z)(o)&&(0,s.Z)(r)?t=d.Z.transpose(o,g):(t=f.Z.computeTemeToPseudoFixedMatrix(a,g),o=d.Z.transpose(t,m),r=f.Z.computeTemeToPseudoFixedMatrix(E,_),d.Z.transpose(r,r));const l=d.Z.multiplyByVector(o,S,T),h=d.Z.multiplyByVector(r,e,w);i.Z.subtract(l,h,A);const p=1e3*i.Z.magnitude(A),Z=u.Z.GRAVITATIONALPARAMETER,I=-Z/(p*p-2*Z/i.Z.magnitude(l));I<0||I>1.25*c.maximumRadius?(n=b,i.Z.normalize(S,n),i.Z.negate(n,n),x=i.Z.clone(i.Z.UNIT_Z,v),C=i.Z.cross(x,n,y),i.Z.magnitude(C)>u.Z.EPSILON7&&(i.Z.normalize(n,n),i.Z.normalize(C,C),x=i.Z.cross(n,C,v),i.Z.normalize(x,x),O=!0)):i.Z.equalsEpsilon(S,e,u.Z.EPSILON7)||(x=b,i.Z.normalize(l,x),i.Z.normalize(h,h),C=i.Z.cross(x,h,v),L&&(C=i.Z.multiplyByScalar(C,-1,C)),i.Z.equalsEpsilon(C,i.Z.ZERO,u.Z.EPSILON7)||(n=i.Z.cross(C,x,y),d.Z.multiplyByVector(t,n,n),d.Z.multiplyByVector(t,C,C),d.Z.multiplyByVector(t,x,x),i.Z.normalize(n,n),i.Z.normalize(C,C),i.Z.normalize(x,x),O=!0))}}(0,s.Z)(e.boundingSphere)&&(S=e.boundingSphere.center),o&&(I=i.Z.clone(t.position,A),P=i.Z.clone(t.direction,T),D=i.Z.clone(t.up,w));const N=Z;O?(N[0]=n.x,N[1]=n.y,N[2]=n.z,N[3]=0,N[4]=C.x,N[5]=C.y,N[6]=C.z,N[7]=0,N[8]=x.x,N[9]=x.y,N[10]=x.z,N[11]=0,N[12]=S.x,N[13]=S.y,N[14]=S.z,N[15]=0):f.Z.eastNorthUpToFixedFrame(S,c,N),t._setTransform(N),o&&(i.Z.clone(I,t.position),i.Z.clone(P,t.direction),i.Z.clone(D,t.up),i.Z.cross(P,D,t.right))}if(n){const n=h===p.Z.SCENE2D||i.Z.equals(e._offset3D,i.Z.ZERO)?void 0:e._offset3D;t.lookAtTransform(t.transform,n)}}(this,D,O,L,h,e,r)};const I=S},674842:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(790087),o=n(35961),r=n(234146),s=n(11020),a=n(722313),c=n(765153),l=n(6821),u=n(282910),d=n(551332),h=n(590292),f=n(203547),p=n(534890),m=n(731458),_=n(956568),g=n(467077),Z=n(916269);const y=new m.Z(o.Z.WHITE),b=new _.Z(!0),v=new _.Z(!0),A=new _.Z(!1),T=new _.Z(o.Z.BLACK),w=new _.Z(p.Z.DISABLED),E=new _.Z(new l.Z),S=new _.Z(f.Z.BOTH);function C(e){i.Z.defined("options.entity",e.entity),i.Z.defined("options.scene",e.scene),i.Z.defined("options.geometryOptions",e.geometryOptions),i.Z.defined("options.geometryPropertyName",e.geometryPropertyName),i.Z.defined("options.observedPropertyNames",e.observedPropertyNames);const t=e.entity,n=e.geometryPropertyName;this._entity=t,this._scene=e.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new u.Z,this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=e.geometryOptions,this._geometryPropertyName=n,this._id=`${n}-${t.id}`,this._observedPropertyNames=e.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=g.Z.supportsMaterialsforEntitiesOnTerrain(e.scene)}Object.defineProperties(C.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!(0,s.Z)(this._entity.availability)&&Z.Z.isConstant(this._showProperty)&&Z.Z.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!(0,s.Z)(this._entity.availability)&&Z.Z.isConstant(this._showProperty)&&Z.Z.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}}),C.prototype.isOutlineVisible=function(e){const t=this._entity,n=this._outlineEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e);return(0,r.Z)(n,!1)},C.prototype.isFilled=function(e){const t=this._entity,n=this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e);return(0,r.Z)(n,!1)},C.prototype.createFillGeometryInstance=c.Z.throwInstantiationError,C.prototype.createOutlineGeometryInstance=c.Z.throwInstantiationError,C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){(0,a.Z)(this)},C.prototype._isHidden=function(e,t){const n=t.show;return(0,s.Z)(n)&&n.isConstant&&!n.getValue(d.Z.MINIMUM_VALUE)},C.prototype._isOnTerrain=function(e,t){return!1},C.prototype._getIsClosed=function(e){return!0},C.prototype._isDynamic=c.Z.throwInstantiationError,C.prototype._setStaticOptions=c.Z.throwInstantiationError,C.prototype._onEntityPropertyChanged=function(e,t,n,i){if(-1===this._observedPropertyNames.indexOf(t))return;const o=this._entity[this._geometryPropertyName];if(!(0,s.Z)(o))return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));const a=o.fill,c=!(0,s.Z)(a)||!a.isConstant||a.getValue(d.Z.MINIMUM_VALUE),l=o.outline;let u=(0,s.Z)(l);if(u&&l.isConstant&&(u=l.getValue(d.Z.MINIMUM_VALUE)),!c&&!u)return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));const f=o.show;if(this._isHidden(e,o))return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));this._materialProperty=(0,r.Z)(o.material,y),this._fillProperty=(0,r.Z)(a,v),this._showProperty=(0,r.Z)(f,b),this._showOutlineProperty=(0,r.Z)(o.outline,A),this._outlineColorProperty=u?(0,r.Z)(o.outlineColor,T):void 0,this._shadowsProperty=(0,r.Z)(o.shadows,w),this._distanceDisplayConditionProperty=(0,r.Z)(o.distanceDisplayCondition,E),this._classificationTypeProperty=(0,r.Z)(o.classificationType,S),this._fillEnabled=c;const p=this._isOnTerrain(e,o)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof m.Z);if(u&&p&&((0,h.Z)(h.Z.geometryOutlines),u=!1),this._onTerrain=p,this._outlineEnabled=u,this._isDynamic(e,o))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(e,o),this._isClosed=this._getIsClosed(this._options);const t=o.outlineWidth;this._outlineWidth=(0,s.Z)(t)?t.getValue(d.Z.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}},C.prototype.createDynamicUpdater=function(e,t){if(i.Z.defined("primitives",e),i.Z.defined("groundPrimitives",t),!this._dynamic)throw new c.Z("This instance does not represent dynamic geometry.");return new this.constructor.DynamicGeometryUpdater(this,e,t)};const x=C},636114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var i=n(781382),o=n(762031),r=n(790087),s=n(234146),a=n(11020),c=n(722313),l=n(282910),u=n(700234),d=n(203547),h=n(71880),f=n(104763),p=n(534890),m=n(657528),_=n(155439),g=n(731458),Z=n(831635),y=n(625739),b=n(946931),v=n(624550),A=n(926625),T=n(467077),w=n(632209),E=n(147929),S=n(463795),C=n(569686),x=n(546764),I=n(781357),P=n(617726),D=n(29961),O=n(953988),L=n(830394);const N=[],M=[_.Z,y.Z,Z.Z,v.Z,A.Z,w.Z,E.Z,S.Z,C.Z,L.Z];function R(e,t){this.entity=e,this.scene=t;const n=new Array(M.length),i=new l.Z;function o(e){i.raiseEvent(e)}const r=new u.Z;for(let i=0;i<n.length;i++){const s=new M[i](e,t);r.add(s.geometryChanged,o),n[i]=s}this.updaters=n,this.geometryChanged=i,this.eventHelper=r,this._removeEntitySubscription=e.definitionChanged.addEventListener(R.prototype._onEntityPropertyChanged,this)}function F(e,t,n,o){r.Z.defined("scene",e),r.Z.defined("entityCollection",t),n=(0,s.Z)(n,e.primitives),o=(0,s.Z)(o,e.groundPrimitives),this._scene=e,this._primitives=n,this._groundPrimitives=o,this._entityCollection=void 0,this._addedObjects=new i.Z,this._removedObjects=new i.Z,this._changedObjects=new i.Z;const a=p.Z.NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(2*a),this._closedColorBatches=new Array(2*a),this._closedMaterialBatches=new Array(2*a),this._openColorBatches=new Array(2*a),this._openMaterialBatches=new Array(2*a);const c=T.Z.supportsMaterialsforEntitiesOnTerrain(e);let l;for(this._supportsMaterialsforEntitiesOnTerrain=c,l=0;l<a;++l)this._outlineBatches[l]=new O.Z(n,e,l,!1),this._outlineBatches[a+l]=new O.Z(n,e,l,!0),this._closedColorBatches[l]=new x.Z(n,f.Z,void 0,!0,l,!0),this._closedColorBatches[a+l]=new x.Z(n,f.Z,void 0,!0,l,!1),this._closedMaterialBatches[l]=new I.Z(n,h.Z,void 0,!0,l,!0),this._closedMaterialBatches[a+l]=new I.Z(n,h.Z,void 0,!0,l,!1),this._openColorBatches[l]=new x.Z(n,f.Z,void 0,!1,l,!0),this._openColorBatches[a+l]=new x.Z(n,f.Z,void 0,!1,l,!1),this._openMaterialBatches[l]=new I.Z(n,h.Z,void 0,!1,l,!0),this._openMaterialBatches[a+l]=new I.Z(n,h.Z,void 0,!1,l,!1);const u=d.Z.NUMBER_OF_CLASSIFICATION_TYPES,m=new Array(u),_=[];if(c)for(l=0;l<u;++l)_.push(new D.Z(o,l,h.Z)),m[l]=new P.Z(o,l);else for(l=0;l<u;++l)m[l]=new P.Z(o,l);this._groundColorBatches=m,this._groundMaterialBatches=_,this._dynamicBatch=new b.Z(n,o),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new i.Z,this._updaterSets=new i.Z,this._entityCollection=t,t.collectionChanged.addEventListener(F.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,N)}R.prototype._onEntityPropertyChanged=function(e,t,n,i){const o=this.updaters;for(let r=0;r<o.length;r++)o[r]._onEntityPropertyChanged(e,t,n,i)},R.prototype.forEach=function(e){const t=this.updaters;for(let n=0;n<t.length;n++)e(t[n])},R.prototype.destroy=function(){this.eventHelper.removeAll();const e=this.updaters;for(let t=0;t<e.length;t++)e[t].destroy();this._removeEntitySubscription(),(0,c.Z)(this)},F.prototype.update=function(e){r.Z.defined("time",e);const t=this._addedObjects,n=t.values,i=this._removedObjects,o=i.values,s=this._changedObjects,a=s.values;let c,l,u,d;const h=this;for(c=a.length-1;c>-1;c--)l=a[c],u=l.id,d=this._updaterSets.get(u),d.entity===l?d.forEach((function(t){h._removeUpdater(t),h._insertUpdaterIntoBatch(e,t)})):(o.push(l),n.push(l));for(c=o.length-1;c>-1;c--)l=o[c],u=l.id,d=this._updaterSets.get(u),d.forEach(this._removeUpdater.bind(this)),d.destroy(),this._updaterSets.remove(u),this._subscriptions.get(u)(),this._subscriptions.remove(u);for(c=n.length-1;c>-1;c--)l=n[c],u=l.id,d=new R(l,this._scene),this._updaterSets.set(u,d),d.forEach((function(t){h._insertUpdaterIntoBatch(e,t)})),this._subscriptions.set(u,d.geometryChanged.addEventListener(F._onGeometryChanged,this));t.removeAll(),i.removeAll(),s.removeAll();let f=!0;const p=this._batches,m=p.length;for(c=0;c<m;c++)f=p[c].update(e)&&f;return f};const B=[],U=new o.Z;F.prototype.getBoundingSphere=function(e,t){r.Z.defined("entity",e),r.Z.defined("result",t);const n=B,i=U;let s=0,a=m.Z.DONE;const c=this._batches,l=c.length,u=e.id,d=this._updaterSets.get(u).updaters;for(let e=0;e<d.length;e++){const t=d[e];for(let e=0;e<l;e++){if(a=c[e].getBoundingSphere(t,i),a===m.Z.PENDING)return m.Z.PENDING;a===m.Z.DONE&&(n[s]=o.Z.clone(i,n[s]),s++)}}return 0===s?m.Z.FAILED:(n.length=s,o.Z.fromBoundingSpheres(n,t),m.Z.DONE)},F.prototype.isDestroyed=function(){return!1},F.prototype.destroy=function(){let e;this._entityCollection.collectionChanged.removeEventListener(F.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const t=this._batches;let n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();this._subscriptions.removeAll();const o=this._updaterSets.values;for(n=o.length,e=0;e<n;e++)o[e].destroy();return this._updaterSets.removeAll(),(0,c.Z)(this)},F.prototype._removeUpdater=function(e){const t=this._batches,n=t.length;for(let i=0;i<n;i++)t[i].remove(e)},F.prototype._insertUpdaterIntoBatch=function(e,t){if(t.isDynamic)return void this._dynamicBatch.add(e,t);let n;(t.outlineEnabled||t.fillEnabled)&&(n=t.shadowsProperty.getValue(e));const i=p.Z.NUMBER_OF_SHADOW_MODES;if(t.outlineEnabled&&((0,a.Z)(t.terrainOffsetProperty)?this._outlineBatches[i+n].add(e,t):this._outlineBatches[n].add(e,t)),t.fillEnabled)if(t.onTerrain){const n=t.classificationTypeProperty.getValue(e);t.fillMaterialProperty instanceof g.Z?this._groundColorBatches[n].add(e,t):this._groundMaterialBatches[n].add(e,t)}else t.isClosed?t.fillMaterialProperty instanceof g.Z?(0,a.Z)(t.terrainOffsetProperty)?this._closedColorBatches[i+n].add(e,t):this._closedColorBatches[n].add(e,t):(0,a.Z)(t.terrainOffsetProperty)?this._closedMaterialBatches[i+n].add(e,t):this._closedMaterialBatches[n].add(e,t):t.fillMaterialProperty instanceof g.Z?(0,a.Z)(t.terrainOffsetProperty)?this._openColorBatches[i+n].add(e,t):this._openColorBatches[n].add(e,t):(0,a.Z)(t.terrainOffsetProperty)?this._openMaterialBatches[i+n].add(e,t):this._openMaterialBatches[n].add(e,t)},F._onGeometryChanged=function(e){const t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;(0,a.Z)(t.get(o))||(0,a.Z)(n.get(o))||n.set(o,i)},F.prototype._onCollectionChanged=function(e,t,n){const i=this._addedObjects,o=this._removedObjects,r=this._changedObjects;let s,a,c;for(s=n.length-1;s>-1;s--)c=n[s],a=c.id,i.remove(a)||(o.set(a,c),r.remove(a));for(s=t.length-1;s>-1;s--)c=t[s],a=c.id,o.remove(a)?r.set(a,c):i.set(a,c)};const k=F},792739:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(790087),o=n(234146),r=n(11020),s=n(765153),a=n(61885),c=n(590292),l=n(604274),u=n(990778),d=n(484297),h=n(956568),f=n(674842),p=n(47046);const m=new h.Z(0);function _(e){f.Z.call(this,e),this._zIndex=0,this._terrainOffsetProperty=void 0}(0,r.Z)(Object.create)&&(_.prototype=Object.create(f.Z.prototype),_.prototype.constructor=_),Object.defineProperties(_.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),_.prototype._isOnTerrain=function(e,t){return this._fillEnabled&&!(0,r.Z)(t.height)&&!(0,r.Z)(t.extrudedHeight)&&l.Z.isSupported(this._scene)},_.prototype._getIsClosed=function(e){const t=e.height,n=e.extrudedHeight;return 0===t||(0,r.Z)(n)&&n!==t},_.prototype._computeCenter=s.Z.throwInstantiationError,_.prototype._onEntityPropertyChanged=function(e,t,n,i){if(f.Z.prototype._onEntityPropertyChanged.call(this,e,t,n,i),-1===this._observedPropertyNames.indexOf(t))return;const s=this._entity[this._geometryPropertyName];if(!(0,r.Z)(s))return;(0,r.Z)(s.zIndex)&&((0,r.Z)(s.height)||(0,r.Z)(s.extrudedHeight))&&(0,c.Z)(c.Z.geometryZIndex),this._zIndex=(0,o.Z)(s.zIndex,m),(0,r.Z)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const a=s.heightReference,l=s.extrudedHeightReference;if((0,r.Z)(a)||(0,r.Z)(l)){const e=new d.Z(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new p.Z(this._scene,e,a,l)}},_.prototype.destroy=function(){(0,r.Z)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),f.Z.prototype.destroy.call(this)},_.getGeometryHeight=function(e,t){if(i.Z.defined("heightReference",t),(0,r.Z)(e))return t!==u.Z.CLAMP_TO_GROUND?e:0;t!==u.Z.NONE&&(0,c.Z)(c.Z.geometryHeightReference)},_.getGeometryExtrudedHeight=function(e,t){if(i.Z.defined("extrudedHeightReference",t),(0,r.Z)(e))return t!==u.Z.CLAMP_TO_GROUND?e:_.CLAMP_TO_GROUND;t!==u.Z.NONE&&(0,c.Z)(c.Z.geometryExtrudedHeightReference)},_.CLAMP_TO_GROUND="clamp",_.computeGeometryOffsetAttribute=function(e,t,n,i){(0,r.Z)(e)&&(0,r.Z)(t)||(t=u.Z.NONE),(0,r.Z)(n)&&(0,r.Z)(i)||(i=u.Z.NONE);let o=0;return t!==u.Z.NONE&&o++,i===u.Z.RELATIVE_TO_GROUND&&o++,2===o?a.Z.ALL:1===o?a.Z.TOP:void 0};const g=_},329243:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var i=n(781382),o=n(405254),r=n(660904),s=n(35961),a=n(234146),c=n(11020),l=n(722313),u=n(765153),d=n(6821),h=n(485662),f=n(990778),p=n(160629),m=n(644001),_=n(218157),g=n(657528),Z=n(916269);const y=m.Z.FILL,b=s.Z.WHITE,v=s.Z.BLACK,A=new s.Z(.165,.165,.165,.8),T=new o.Z(7,5),w=o.Z.ZERO,E=r.Z.ZERO,S=f.Z.NONE,C=p.Z.CENTER,x=_.Z.CENTER,I=new r.Z,P=new s.Z,D=new s.Z,O=new s.Z,L=new o.Z,N=new r.Z,M=new o.Z,R=new h.Z,F=new h.Z,B=new h.Z,U=new d.Z;function k(e){this.entity=e,this.label=void 0,this.index=void 0}function V(e,t){if(!(0,c.Z)(e))throw new u.Z("entityCluster is required.");if(!(0,c.Z)(t))throw new u.Z("entityCollection is required.");t.collectionChanged.addEventListener(V.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.Z,this._onCollectionChanged(t,t.values,[],[])}function H(e,t,n){(0,c.Z)(e)&&(e.label=void 0,n.removeLabel(t))}V.prototype.update=function(e){if(!(0,c.Z)(e))throw new u.Z("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.entity,a=s._label;let l,u,d=o.label,h=s.isShowing&&s.isAvailable(e)&&Z.Z.getValueOrDefault(a._show,e,!0);if(h&&(u=Z.Z.getValueOrUndefined(s._position,e,I),l=Z.Z.getValueOrUndefined(a._text,e),h=(0,c.Z)(u)&&(0,c.Z)(l)),!h){H(o,s,n);continue}Z.Z.isConstant(s._position)||(n._clusterDirty=!0);let f=!1;const p=Z.Z.getValueOrDefault(a._heightReference,e,S);(0,c.Z)(d)||(d=n.getLabel(s),d.id=s,o.label=d,f=r.Z.equals(d.position,u)&&d.heightReference===p),d.show=!0,d.position=u,d.text=l,d.scale=Z.Z.getValueOrDefault(a._scale,e,1),d.font=Z.Z.getValueOrDefault(a._font,e,"30px sans-serif"),d.style=Z.Z.getValueOrDefault(a._style,e,y),d.fillColor=Z.Z.getValueOrDefault(a._fillColor,e,b,P),d.outlineColor=Z.Z.getValueOrDefault(a._outlineColor,e,v,D),d.outlineWidth=Z.Z.getValueOrDefault(a._outlineWidth,e,1),d.showBackground=Z.Z.getValueOrDefault(a._showBackground,e,!1),d.backgroundColor=Z.Z.getValueOrDefault(a._backgroundColor,e,A,O),d.backgroundPadding=Z.Z.getValueOrDefault(a._backgroundPadding,e,T,L),d.pixelOffset=Z.Z.getValueOrDefault(a._pixelOffset,e,w,M),d.eyeOffset=Z.Z.getValueOrDefault(a._eyeOffset,e,E,N),d.heightReference=p,d.horizontalOrigin=Z.Z.getValueOrDefault(a._horizontalOrigin,e,C),d.verticalOrigin=Z.Z.getValueOrDefault(a._verticalOrigin,e,x),d.translucencyByDistance=Z.Z.getValueOrUndefined(a._translucencyByDistance,e,R),d.pixelOffsetScaleByDistance=Z.Z.getValueOrUndefined(a._pixelOffsetScaleByDistance,e,F),d.scaleByDistance=Z.Z.getValueOrUndefined(a._scaleByDistance,e,B),d.distanceDisplayCondition=Z.Z.getValueOrUndefined(a._distanceDisplayCondition,e,U),d.disableDepthTestDistance=Z.Z.getValueOrUndefined(a._disableDepthTestDistance,e),f&&d._updateClamping()}return!0},V.prototype.getBoundingSphere=function(e,t){if(!(0,c.Z)(e))throw new u.Z("entity is required.");if(!(0,c.Z)(t))throw new u.Z("result is required.");const n=this._items.get(e.id);if(!(0,c.Z)(n)||!(0,c.Z)(n.label))return g.Z.FAILED;const i=n.label;return t.center=r.Z.clone((0,a.Z)(i._clampedPosition,i.position),t.center),t.radius=0,g.Z.DONE},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(V.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeLabel(e[t]);return(0,l.Z)(this)},V.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const s=this._items,a=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,c.Z)(r._label)&&(0,c.Z)(r._position)&&s.set(r.id,new k(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,c.Z)(r._label)&&(0,c.Z)(r._position)?s.contains(r.id)||s.set(r.id,new k(r)):(H(s.get(r.id),r,a),s.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],H(s.get(r.id),r,a),s.remove(r.id)};const z=V},121221:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(35961),o=n(11020),r=n(765153),s=n(420171);function a(){r.Z.throwInstantiationError()}Object.defineProperties(a.prototype,{isConstant:{get:r.Z.throwInstantiationError},definitionChanged:{get:r.Z.throwInstantiationError}}),a.prototype.getType=r.Z.throwInstantiationError,a.prototype.getValue=r.Z.throwInstantiationError,a.prototype.equals=r.Z.throwInstantiationError,a.getValue=function(e,t,n){let r;return(0,o.Z)(t)&&(r=t.getType(e),(0,o.Z)(r))?((0,o.Z)(n)&&n.type===r||(n=s.Z.fromType(r)),t.getValue(e,n.uniforms),n):((0,o.Z)(n)&&n.type===s.Z.ColorType||(n=s.Z.fromType(s.Z.ColorType)),i.Z.clone(i.Z.WHITE,n.uniforms.color),n)};const c=a},187036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var i=n(781382),o=n(762031),r=n(405254),s=n(660904),a=n(790087),c=n(35961),l=n(11020),u=n(722313),d=n(765153),h=n(659635),f=n(205522),p=n(66990),m=n(990778),_=n(849507),g=n(285605),Z=n(534890),y=n(657528),b=n(916269),v=n(888340),A=n(532056);const T=Z.Z.ENABLED,w=m.Z.NONE,E=c.Z.RED,S=c.Z.WHITE,C=p.Z.HIGHLIGHT,x=new r.Z(1,1),I=new h.Z,P=new h.Z,D=new c.Z,O=new Array(4),L=new s.Z;function N(e,t){a.Z.typeOf.object("scene",e),a.Z.typeOf.object("entityCollection",t),t.collectionChanged.addEventListener(N.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._modelHash={},this._entitiesToVisualize=new i.Z,this._onCollectionChanged(t,t.values,[],[])}async function M(e,t,n,i){const o=e._primitives,r=e._modelHash;try{const s=await _.Z.fromGltfAsync({url:n,incrementallyLoadTextures:i,scene:e._scene});if(e.isDestroyed()||!(0,l.Z)(r[t.id]))return;s.id=t,o.add(s),r[t.id].modelPrimitive=s,s.errorEvent.addEventListener((e=>{(0,l.Z)(r[t.id])&&(console.log(e),"TextureError"!==e.name&&s.incrementallyLoadTextures&&(r[t.id].loadFailed=!0))}))}catch(n){if(e.isDestroyed()||!(0,l.Z)(r[t.id]))return;console.log(n),r[t.id].loadFailed=!0}}N.prototype.update=function(e){if(!(0,l.Z)(e))throw new d.Z("time is required.");const t=this._entitiesToVisualize.values,n=this._modelHash,i=this._primitives;for(let o=0,r=t.length;o<r;o++){const r=t[o],a=r._model;let u,d,p=n[r.id],m=r.isShowing&&r.isAvailable(e)&&b.Z.getValueOrDefault(a._show,e,!0);if(m&&(d=r.computeModelMatrix(e,I),u=f.Z.createIfNeeded(b.Z.getValueOrUndefined(a._uri,e)),m=(0,l.Z)(d)&&(0,l.Z)(u)),!m){(0,l.Z)(p)&&p.modelPrimitive&&(p.modelPrimitive.show=!1);continue}(0,l.Z)(p)&&u.url===p.url||((0,l.Z)(p?.modelPrimitive)&&(i.removeAndDestroy(p.modelPrimitive),delete n[r.id]),p={modelPrimitive:void 0,url:u.url,animationsRunning:!1,nodeTransformationsScratch:{},articulationsScratch:{},loadFailed:!1,modelUpdated:!1,awaitingSampleTerrain:!1,clampedBoundingSphere:void 0,sampleTerrainFailed:!1},n[r.id]=p,M(this,r,u,b.Z.getValueOrDefault(a._incrementallyLoadTextures,e,!0)));const _=p.modelPrimitive;if(!(0,l.Z)(_))continue;_.show=!0,_.scale=b.Z.getValueOrDefault(a._scale,e,1),_.minimumPixelSize=b.Z.getValueOrDefault(a._minimumPixelSize,e,0),_.maximumScale=b.Z.getValueOrUndefined(a._maximumScale,e),_.modelMatrix=h.Z.clone(d,_.modelMatrix),_.shadows=b.Z.getValueOrDefault(a._shadows,e,T),_.heightReference=b.Z.getValueOrDefault(a._heightReference,e,w),_.distanceDisplayCondition=b.Z.getValueOrUndefined(a._distanceDisplayCondition,e),_.silhouetteColor=b.Z.getValueOrDefault(a._silhouetteColor,e,E,D),_.silhouetteSize=b.Z.getValueOrDefault(a._silhouetteSize,e,0),_.color=b.Z.getValueOrDefault(a._color,e,S,D),_.colorBlendMode=b.Z.getValueOrDefault(a._colorBlendMode,e,C),_.colorBlendAmount=b.Z.getValueOrDefault(a._colorBlendAmount,e,.5),_.clippingPlanes=b.Z.getValueOrUndefined(a._clippingPlanes,e),_.clampAnimations=b.Z.getValueOrDefault(a._clampAnimations,e,!0),_.imageBasedLighting.imageBasedLightingFactor=b.Z.getValueOrDefault(a._imageBasedLightingFactor,e,x);let Z=b.Z.getValueOrUndefined(a._lightColor,e);if((0,l.Z)(Z)&&(c.Z.pack(Z,O,0),Z=s.Z.unpack(O,0,L)),_.lightColor=Z,_.customShader=b.Z.getValueOrUndefined(a._customShader,e),n[r.id].modelUpdated=!0,_.ready){const t=b.Z.getValueOrDefault(a._runAnimations,e,!0);p.animationsRunning!==t&&(t?_.activeAnimations.addAll({loop:g.Z.REPEAT}):_.activeAnimations.removeAll(),p.animationsRunning=t);const n=b.Z.getValueOrUndefined(a._nodeTransformations,e,p.nodeTransformationsScratch);if((0,l.Z)(n)){const e=Object.keys(n);for(let t=0,i=e.length;t<i;++t){const i=e[t],o=n[i];if(!(0,l.Z)(o))continue;const r=_.getNode(i);if(!(0,l.Z)(r))continue;const s=h.Z.fromTranslationRotationScale(o,P);r.matrix=h.Z.multiply(r.originalMatrix,s,s)}}let i=!1;const o=b.Z.getValueOrUndefined(a._articulations,e,p.articulationsScratch);if((0,l.Z)(o)){const e=Object.keys(o);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=o[n];(0,l.Z)(r)&&(i=!0,_.setArticulationStage(n,r))}}i&&_.applyArticulations()}}return!0},N.prototype.isDestroyed=function(){return!1},N.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(N.prototype._onCollectionChanged,this);const e=this._entitiesToVisualize.values,t=this._modelHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)B(0,e[i],t,n);return(0,u.Z)(this)},N._sampleTerrainMostDetailed=v.Z;const R=new s.Z,F=new A.Z;function B(e,t,n,i){const o=n[t.id];(0,l.Z)(o)&&(i.removeAndDestroy(o.modelPrimitive),delete n[t.id])}function U(e,t){const n=t[e.id];(0,l.Z)(n)&&(n.nodeTransformationsScratch={},n.articulationsScratch={})}N.prototype.getBoundingSphere=function(e,t){if(!(0,l.Z)(e))throw new d.Z("entity is required.");if(!(0,l.Z)(t))throw new d.Z("result is required.");const n=this._modelHash[e.id];if(!(0,l.Z)(n))return y.Z.FAILED;if(n.loadFailed)return y.Z.FAILED;const i=n.modelPrimitive;if(!(0,l.Z)(i)||!i.show)return y.Z.PENDING;if(!i.ready||!n.modelUpdated)return y.Z.PENDING;const r=this._scene.globe,s=(0,l.Z)(r)?r.terrainProvider:void 0,a=i.heightReference!==m.Z.NONE;if((0,l.Z)(r)&&a){const n=r.ellipsoid;if((0,l.Z)(s)&&((0,l.Z)(s._ready)?!s._ready:(0,l.Z)(s.ready)&&!s.ready))return y.Z.PENDING;const a=i.modelMatrix;R.x=a[12],R.y=a[13],R.z=a[14];const c=n.cartesianToCartographic(R);if(!(0,l.Z)(s.availability)){i.heightReference===m.Z.CLAMP_TO_GROUND&&(c.height=0);const e=n.cartographicToCartesian(c);return o.Z.clone(i.boundingSphere,t),t.center=e,y.Z.DONE}let u=this._modelHash[e.id].clampedBoundingSphere;return this._modelHash[e.id].sampleTerrainFailed?(this._modelHash[e.id].sampleTerrainFailed=!1,y.Z.FAILED):(0,l.Z)(u)?(o.Z.clone(u,t),this._modelHash[e.id].clampedBoundingSphere=void 0,y.Z.DONE):(u=new o.Z,this._modelHash[e.id].awaitingSampleTerrain||(A.Z.clone(c,F),this._modelHash[e.id].awaitingSampleTerrain=!0,N._sampleTerrainMostDetailed(s,[F]).then((t=>{if(this.isDestroyed())return;this._modelHash[e.id].awaitingSampleTerrain=!1;const r=t[0];i.heightReference===m.Z.RELATIVE_TO_GROUND&&(r.height+=c.height),n.cartographicToCartesian(r,R),o.Z.clone(i.boundingSphere,u),u.center=R,this._modelHash[e.id].clampedBoundingSphere=o.Z.clone(u)})).catch((t=>{this.isDestroyed()||(this._modelHash[e.id].sampleTerrainFailed=!0,this._modelHash[e.id].awaitingSampleTerrain=!1)}))),y.Z.PENDING)}return o.Z.clone(i.boundingSphere,t),y.Z.DONE},N.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const s=this._entitiesToVisualize,a=this._modelHash,c=this._primitives;for(o=t.length-1;o>-1;o--)r=t[o],(0,l.Z)(r._model)&&(0,l.Z)(r._position)&&s.set(r.id,r);for(o=i.length-1;o>-1;o--)r=i[o],(0,l.Z)(r._model)&&(0,l.Z)(r._position)?(U(r,a),s.set(r.id,r)):(B(0,r,a,c),s.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],B(0,r,a,c),s.remove(r.id)};const k=N},185871:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(781382),o=n(660904),r=n(11020),s=n(722313),a=n(765153),c=n(791364),l=n(664288),u=n(659635),d=n(803994),h=n(674881),f=n(720794),p=n(999604),m=n(714233),_=n(741224),g=n(303932),Z=n(121221),y=n(916269),b=n(467369),v=n(641256),A=n(357210),T=n(251142);const w=new h.Z,E=new h.Z,S=new h.Z;function C(e){this.entity=e,this.polyline=void 0,this.index=void 0,this.updater=void 0}function x(e,t,n,i,o,s,a,l){for(;e instanceof b.Z;)e=e.resolvedProperty;return a=e instanceof v.Z?function(e,t,n,i,o,s,a,l,u){let d,h=l;d=e.getValueInReferenceFrame(t,s,u[h]),(0,r.Z)(d)&&(u[h++]=d);let f=!(0,r.Z)(o)||c.Z.lessThanOrEquals(o,t)||c.Z.greaterThanOrEquals(o,n),p=0;const m=i.length;let _=i[p];const g=n;let Z,y,b,v=!1;for(;p<m;){if(!f&&c.Z.greaterThanOrEquals(_,o)&&(d=e.getValueInReferenceFrame(o,s,u[h]),(0,r.Z)(d)&&(u[h++]=d),f=!0),c.Z.greaterThan(_,t)&&c.Z.lessThan(_,g)&&!_.equals(o)&&(d=e.getValueInReferenceFrame(_,s,u[h]),(0,r.Z)(d)&&(u[h++]=d)),p<m-1){if(a>0&&!v){const e=i[p+1],t=c.Z.secondsDifference(e,_);v=t>a,v&&(Z=Math.ceil(t/a),y=0,b=t/Math.max(Z,2),Z=Math.max(Z-1,1))}if(v&&y<Z){_=c.Z.addSeconds(_,b,new c.Z),y++;continue}}v=!1,p++,_=i[p]}return d=e.getValueInReferenceFrame(n,s,u[h]),(0,r.Z)(d)&&(u[h++]=d),h}(e,t,n,e._property._times,i,o,s,a,l):e instanceof _.Z?function(e,t,n,i,o,r,s,a){E.start=t,E.stop=n;let l=s;const u=e.intervals;for(let e=0;e<u.length;e++){const s=u.get(e);if(!h.Z.intersect(s,E,w).isEmpty){const e=s.start,u=s.stop;let d=t;c.Z.greaterThan(e,d)&&(d=e);let h=n;c.Z.lessThan(u,h)&&(h=u),l=x(s.data,d,h,i,o,r,l,a)}}return l}(e,t,n,i,o,s,a,l):e instanceof T.Z?function(e,t,n,i,o,s,a,l){S.start=t,S.stop=n;let u=a;const d=e.intervals;for(let t=0;t<d.length;t++){const n=d.get(t);if(!h.Z.intersect(n,S,w).isEmpty){let t=n.start;n.isStartIncluded||(t=n.isStopIncluded?n.stop:c.Z.addSeconds(n.start,c.Z.secondsDifference(n.stop,n.start)/2,new c.Z));const i=e.getValueInReferenceFrame(t,o,l[u]);(0,r.Z)(i)&&(l[u]=i,u++)}}return u}(e,t,n,0,o,0,a,l):e instanceof g.Z||e instanceof A.Z&&y.Z.isConstant(e)?function(e,t,n,i,o,s,a,c){const l=e.getValueInReferenceFrame(t,o,c[a]);return(0,r.Z)(l)&&(c[a++]=l),a}(e,t,0,0,o,0,a,l):function(e,t,n,i,o,s,a,l){let u,d=0,h=a,f=t;const p=Math.max(s,60);let m=!(0,r.Z)(i)||c.Z.lessThanOrEquals(i,t)||c.Z.greaterThanOrEquals(i,n);for(;c.Z.lessThan(f,n);)!m&&c.Z.greaterThanOrEquals(f,i)&&(m=!0,u=e.getValueInReferenceFrame(i,o,l[h]),(0,r.Z)(u)&&(l[h]=u,h++)),u=e.getValueInReferenceFrame(f,o,l[h]),(0,r.Z)(u)&&(l[h]=u,h++),d++,f=c.Z.addSeconds(t,p*d,new c.Z);return u=e.getValueInReferenceFrame(n,o,l[h]),(0,r.Z)(u)&&(l[h]=u,h++),h}(e,t,n,i,o,s,a,l),a}function I(e,t,n,i,o,s,a){(0,r.Z)(a)||(a=[]);const c=x(e,t,n,i,o,s,0,a);return a.length=c,a}const P=new l.Z;function D(e,t){this._unusedIndexes=[],this._polylineCollection=new p.Z,this._scene=e,this._referenceFrame=t,e.primitives.add(this._polylineCollection)}function O(e,t){if(!(0,r.Z)(e))throw new a.Z("scene is required.");if(!(0,r.Z)(t))throw new a.Z("entityCollection is required.");t.collectionChanged.addEventListener(O.prototype._onCollectionChanged,this),this._scene=e,this._updaters={},this._entityCollection=t,this._items=new i.Z,this._onCollectionChanged(t,t.values,[],[])}D.prototype.update=function(e){if(this._referenceFrame===d.Z.INERTIAL){let t=f.Z.computeIcrfToFixedMatrix(e,P);(0,r.Z)(t)||(t=f.Z.computeTemeToPseudoFixedMatrix(e,P)),u.Z.fromRotationTranslation(t,o.Z.ZERO,this._polylineCollection.modelMatrix)}},D.prototype.updateObject=function(e,t){const n=t.entity,i=n._path,o=n._position;let s,a;const l=i._show;let u=t.polyline,d=n.isShowing&&n.isAvailable(e)&&(!(0,r.Z)(l)||l.getValue(e));if(d){const t=y.Z.getValueOrUndefined(i._leadTime,e),o=y.Z.getValueOrUndefined(i._trailTime,e),l=n._availability,u=(0,r.Z)(l),h=(0,r.Z)(t),f=(0,r.Z)(o);if(d=u||h&&f,d){if(f&&(s=c.Z.addSeconds(e,-o,new c.Z)),h&&(a=c.Z.addSeconds(e,t,new c.Z)),u){const e=l.start,t=l.stop;f&&!c.Z.greaterThan(e,s)||(s=e),h&&!c.Z.lessThan(t,a)||(a=t)}d=c.Z.lessThan(s,a)}}if(!d)return void((0,r.Z)(u)&&(this._unusedIndexes.push(t.index),t.polyline=void 0,u.show=!1,t.index=void 0));if(!(0,r.Z)(u)){const e=this._unusedIndexes;if(e.length>0){const n=e.pop();u=this._polylineCollection.get(n),t.index=n}else t.index=this._polylineCollection.length,u=this._polylineCollection.add();u.id=n,t.polyline=u}const h=y.Z.getValueOrDefault(i._resolution,e,60);u.show=!0,u.positions=I(o,s,a,e,this._referenceFrame,h,u.positions.slice()),u.material=Z.Z.getValue(e,i._material,u.material),u.width=y.Z.getValueOrDefault(i._width,e,1),u.distanceDisplayCondition=y.Z.getValueOrUndefined(i._distanceDisplayCondition,e,u.distanceDisplayCondition)},D.prototype.removeObject=function(e){const t=e.polyline;(0,r.Z)(t)&&(this._unusedIndexes.push(e.index),e.polyline=void 0,t.show=!1,t.id=void 0,e.index=void 0)},D.prototype.destroy=function(){return this._scene.primitives.remove(this._polylineCollection),(0,s.Z)(this)},O.prototype.update=function(e){if(!(0,r.Z)(e))throw new a.Z("time is required.");const t=this._updaters;for(const n in t)t.hasOwnProperty(n)&&t[n].update(e);const n=this._items.values;if(0===n.length&&(0,r.Z)(this._updaters)&&Object.keys(this._updaters).length>0){for(const e in t)t.hasOwnProperty(e)&&t[e].destroy();this._updaters={}}for(let t=0,i=n.length;t<i;t++){const i=n[t],o=i.entity._position,s=i.updater;let a=d.Z.FIXED;this._scene.mode===m.Z.SCENE3D&&(a=o.referenceFrame);let c=this._updaters[a];s===c&&(0,r.Z)(c)?c.updateObject(e,i):((0,r.Z)(s)&&s.removeObject(i),(0,r.Z)(c)||(c=new D(this._scene,a),c.update(e),this._updaters[a]=c),i.updater=c,(0,r.Z)(c)&&c.updateObject(e,i))}return!0},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(O.prototype._onCollectionChanged,this);const e=this._updaters;for(const t in e)e.hasOwnProperty(t)&&e[t].destroy();return(0,s.Z)(this)},O.prototype._onCollectionChanged=function(e,t,n,i){let o,s,a;const c=this._items;for(o=t.length-1;o>-1;o--)s=t[o],(0,r.Z)(s._path)&&(0,r.Z)(s._position)&&c.set(s.id,new C(s));for(o=i.length-1;o>-1;o--)s=i[o],(0,r.Z)(s._path)&&(0,r.Z)(s._position)?c.contains(s.id)||c.set(s.id,new C(s)):(a=c.get(s.id),(0,r.Z)(a)&&((0,r.Z)(a.updater)&&a.updater.removeObject(a),c.remove(s.id)));for(o=n.length-1;o>-1;o--)s=n[o],a=c.get(s.id),(0,r.Z)(a)&&((0,r.Z)(a.updater)&&a.updater.removeObject(a),c.remove(s.id))},O._subSample=I;const L=O},632209:(e,t,n)=>{"use strict";n.d(t,{Z:()=>F});var i=n(660904),o=n(790087),r=n(35961),s=n(376213),a=n(11020),c=n(765153),l=n(669327),u=n(156905),d=n(551332),h=n(344485),f=n(664288),p=n(659635),m=n(610161),_=n(95359),g=n(489381),Z=n(71880),y=n(104763),b=n(731458),v=n(452741),A=n(674842),T=n(916269);const w=new i.Z,E=new r.Z;function S(e){this.id=e,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function C(e,t){A.Z.call(this,{entity:e,scene:t,geometryOptions:new S(e),geometryPropertyName:"plane",observedPropertyNames:["availability","position","orientation","plane"]}),this._onEntityPropertyChanged(e,"plane",e.plane,void 0)}function x(e,t,n){v.Z.call(this,e,t,n)}(0,a.Z)(Object.create)&&(C.prototype=Object.create(A.Z.prototype),C.prototype.constructor=C),C.prototype.createFillGeometryInstance=function(e){if(o.Z.defined("time",e),!this._fillEnabled)throw new c.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let i,d;const h=new g.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),f=this._distanceDisplayConditionProperty.getValue(e),p=l.Z.fromDistanceDisplayCondition(f);if(this._materialProperty instanceof b.Z){let t;(0,a.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,E)),(0,a.Z)(t)||(t=r.Z.WHITE),d=s.Z.fromColor(t),i={show:h,distanceDisplayCondition:p,color:d}}else i={show:h,distanceDisplayCondition:p};const _=t.plane,Z=this._options;let y=t.computeModelMatrix(e);const v=T.Z.getValueOrDefault(_.plane,e,Z.plane),A=T.Z.getValueOrUndefined(_.dimensions,e,Z.dimensions);return Z.plane=v,Z.dimensions=A,y=R(v,A,y,y),new u.Z({id:t,geometry:new m.Z(this._options),modelMatrix:y,attributes:i})},C.prototype.createOutlineGeometryInstance=function(e){if(o.Z.defined("time",e),!this._outlineEnabled)throw new c.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=T.Z.getValueOrDefault(this._outlineColorProperty,e,r.Z.BLACK,E),a=this._distanceDisplayConditionProperty.getValue(e),d=t.plane,h=this._options;let f=t.computeModelMatrix(e);const p=T.Z.getValueOrDefault(d.plane,e,h.plane),m=T.Z.getValueOrUndefined(d.dimensions,e,h.dimensions);return h.plane=p,h.dimensions=m,f=R(p,m,f,f),new u.Z({id:t,geometry:new _.Z,modelMatrix:f,attributes:{show:new g.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:s.Z.fromColor(i),distanceDisplayCondition:l.Z.fromDistanceDisplayCondition(a)}})},C.prototype._isHidden=function(e,t){return!(0,a.Z)(t.plane)||!(0,a.Z)(t.dimensions)||!(0,a.Z)(e.position)||A.Z.prototype._isHidden.call(this,e,t)},C.prototype._getIsClosed=function(e){return!1},C.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&T.Z.isConstant(e.orientation)&&t.plane.isConstant&&t.dimensions.isConstant&&T.Z.isConstant(t.outlineWidth))},C.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof b.Z,i=this._options;i.vertexFormat=n?y.Z.VERTEX_FORMAT:Z.Z.MaterialSupport.TEXTURED.vertexFormat,i.plane=t.plane.getValue(d.Z.MINIMUM_VALUE,i.plane),i.dimensions=t.dimensions.getValue(d.Z.MINIMUM_VALUE,i.dimensions)},C.DynamicGeometryUpdater=x,(0,a.Z)(Object.create)&&(x.prototype=Object.create(v.Z.prototype),x.prototype.constructor=x),x.prototype._isHidden=function(e,t,n){const i=this._options,o=T.Z.getValueOrUndefined(e.position,n,w);return!(0,a.Z)(o)||!(0,a.Z)(i.plane)||!(0,a.Z)(i.dimensions)||v.Z.prototype._isHidden.call(this,e,t,n)},x.prototype._setOptions=function(e,t,n){const i=this._options;i.plane=T.Z.getValueOrDefault(t.plane,n,i.plane),i.dimensions=T.Z.getValueOrUndefined(t.dimensions,n,i.dimensions)};const I=new i.Z,P=new i.Z,D=new i.Z,O=new i.Z,L=new f.Z,N=new f.Z,M=new p.Z;function R(e,t,n,o){const r=e.normal,s=e.distance,a=i.Z.multiplyByScalar(r,-s,D);let c=i.Z.clone(i.Z.UNIT_Z,P);h.Z.equalsEpsilon(Math.abs(i.Z.dot(c,r)),1,h.Z.EPSILON8)&&(c=i.Z.clone(i.Z.UNIT_Y,c));const l=i.Z.cross(c,r,I);c=i.Z.cross(r,l,c),i.Z.normalize(l,l),i.Z.normalize(c,c);const u=L;f.Z.setColumn(u,0,l,u),f.Z.setColumn(u,1,c,u),f.Z.setColumn(u,2,r,u);const d=i.Z.fromElements(t.x,t.y,1,O),m=f.Z.multiplyByScale(u,d,N),_=p.Z.fromRotationTranslation(m,a,M);return p.Z.multiplyTransformation(n,_,o)}C.createPrimitiveMatrix=R;const F=C},559905:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var i=n(781382),o=n(660904),r=n(35961),s=n(11020),a=n(722313),c=n(765153),l=n(6821),u=n(485662),d=n(200659),h=n(990778),f=n(657528),p=n(916269);const m=r.Z.WHITE,_=r.Z.BLACK,g=new r.Z,Z=new o.Z,y=new r.Z,b=new u.Z,v=new u.Z,A=new l.Z;function T(e){this.entity=e,this.pointPrimitive=void 0,this.billboard=void 0,this.color=void 0,this.outlineColor=void 0,this.pixelSize=void 0,this.outlineWidth=void 0}function w(e,t){if(!(0,s.Z)(e))throw new c.Z("entityCluster is required.");if(!(0,s.Z)(t))throw new c.Z("entityCollection is required.");t.collectionChanged.addEventListener(w.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.Z,this._onCollectionChanged(t,t.values,[],[])}function E(e,t,n){if((0,s.Z)(e)){const i=e.pointPrimitive;if((0,s.Z)(i))return e.pointPrimitive=void 0,void n.removePoint(t);const o=e.billboard;(0,s.Z)(o)&&(e.billboard=void 0,n.removeBillboard(t))}}w.prototype.update=function(e){if(!(0,s.Z)(e))throw new c.Z("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,a=t.length;i<a;i++){const a=t[i],c=a.entity,l=c._point;let u=a.pointPrimitive,f=a.billboard;const T=p.Z.getValueOrDefault(l._heightReference,e,h.Z.NONE);let w,S=c.isShowing&&c.isAvailable(e)&&p.Z.getValueOrDefault(l._show,e,!0);if(S&&(w=p.Z.getValueOrUndefined(c._position,e,Z),S=(0,s.Z)(w)),!S){E(a,c,n);continue}p.Z.isConstant(c._position)||(n._clusterDirty=!0);let C=!1,x=!1;if(T===h.Z.NONE||(0,s.Z)(f)?T!==h.Z.NONE||(0,s.Z)(u)||((0,s.Z)(f)&&(E(a,c,n),f=void 0),u=n.getPoint(c),u.id=c,a.pointPrimitive=u):((0,s.Z)(u)&&(E(a,c,n),u=void 0),f=n.getBillboard(c),f.id=c,f.image=void 0,a.billboard=f,C=!0,x=o.Z.equals(f.position,w)&&f.heightReference===T),(0,s.Z)(u))u.show=!0,u.position=w,u.scaleByDistance=p.Z.getValueOrUndefined(l._scaleByDistance,e,b),u.translucencyByDistance=p.Z.getValueOrUndefined(l._translucencyByDistance,e,v),u.color=p.Z.getValueOrDefault(l._color,e,m,g),u.outlineColor=p.Z.getValueOrDefault(l._outlineColor,e,_,y),u.outlineWidth=p.Z.getValueOrDefault(l._outlineWidth,e,0),u.pixelSize=p.Z.getValueOrDefault(l._pixelSize,e,1),u.distanceDisplayCondition=p.Z.getValueOrUndefined(l._distanceDisplayCondition,e,A),u.disableDepthTestDistance=p.Z.getValueOrDefault(l._disableDepthTestDistance,e,0);else if((0,s.Z)(f)){f.show=!0,f.position=w,f.scaleByDistance=p.Z.getValueOrUndefined(l._scaleByDistance,e,b),f.translucencyByDistance=p.Z.getValueOrUndefined(l._translucencyByDistance,e,v),f.distanceDisplayCondition=p.Z.getValueOrUndefined(l._distanceDisplayCondition,e,A),f.disableDepthTestDistance=p.Z.getValueOrDefault(l._disableDepthTestDistance,e,0),f.heightReference=T;const t=p.Z.getValueOrDefault(l._color,e,m,g),n=p.Z.getValueOrDefault(l._outlineColor,e,_,y),i=Math.round(p.Z.getValueOrDefault(l._outlineWidth,e,0));let o=Math.max(1,Math.round(p.Z.getValueOrDefault(l._pixelSize,e,1)));if(i>0?(f.scale=1,C=C||i!==a.outlineWidth||o!==a.pixelSize||!r.Z.equals(t,a.color)||!r.Z.equals(n,a.outlineColor)):(f.scale=o/50,o=50,C=C||i!==a.outlineWidth||!r.Z.equals(t,a.color)||!r.Z.equals(n,a.outlineColor)),C){a.color=r.Z.clone(t,a.color),a.outlineColor=r.Z.clone(n,a.outlineColor),a.pixelSize=o,a.outlineWidth=i;const e=t.alpha,s=t.toCssColorString(),c=n.toCssColorString(),l=JSON.stringify([s,o,c,i]);f.setImage(l,(0,d.Z)(e,s,c,i,o))}x&&f._updateClamping()}}return!0},w.prototype.getBoundingSphere=function(e,t){if(!(0,s.Z)(e))throw new c.Z("entity is required.");if(!(0,s.Z)(t))throw new c.Z("result is required.");const n=this._items.get(e.id);if(!(0,s.Z)(n)||!(0,s.Z)(n.pointPrimitive)&&!(0,s.Z)(n.billboard))return f.Z.FAILED;if((0,s.Z)(n.pointPrimitive))t.center=o.Z.clone(n.pointPrimitive.position,t.center);else{const e=n.billboard;if(!(0,s.Z)(e._clampedPosition))return f.Z.PENDING;t.center=o.Z.clone(e._clampedPosition,t.center)}return t.radius=0,f.Z.DONE},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(w.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removePoint(e[t]);return(0,a.Z)(this)},w.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const a=this._items,c=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,s.Z)(r._point)&&(0,s.Z)(r._position)&&a.set(r.id,new T(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,s.Z)(r._point)&&(0,s.Z)(r._position)?a.contains(r.id)||a.set(r.id,new T(r)):(E(a.get(r.id),r,c),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],E(a.get(r.id),r,c),a.remove(r.id)};const S=w},147929:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var i=n(642336),o=n(730617),r=n(405254),s=n(660904),a=n(790087),c=n(35961),l=n(376213),u=n(586879),d=n(252888),h=n(11020),f=n(765153),p=n(669327),m=n(573777),_=n(156905),g=n(551332),Z=n(630114),y=n(590292),b=n(670594),v=n(628254),A=n(143450),T=n(489381),w=n(990778),E=n(71880),S=n(104763),C=n(731458),x=n(452741),I=n(674842),P=n(792739),D=n(916269);const O="Entity polygons cannot have both height and perPositionHeight.  height will be ignored",L="heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored",N=new c.Z,M=s.Z.ZERO,R=new s.Z,F=new A.Z,B=[],U=new r.Z;function k(e){this.id=e,this.vertexFormat=void 0,this.polygonHierarchy=void 0,this.perPositionHeight=void 0,this.closeTop=void 0,this.closeBottom=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.offsetAttribute=void 0,this.arcType=void 0,this.textureCoordinates=void 0}function V(e,t){P.Z.call(this,{entity:e,scene:t,geometryOptions:new k(e),geometryPropertyName:"polygon",observedPropertyNames:["availability","polygon"]}),this._onEntityPropertyChanged(e,"polygon",e.polygon,void 0)}function H(e,t,n){x.Z.call(this,e,t,n)}(0,h.Z)(Object.create)&&(V.prototype=Object.create(P.Z.prototype),V.prototype.constructor=V),V.prototype.createFillGeometryInstance=function(e){if(a.Z.defined("time",e),!this._fillEnabled)throw new f.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=this._options,o={show:new T.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:p.Z.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof C.Z){let t;(0,h.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,N)),(0,h.Z)(t)||(t=c.Z.WHITE),o.color=l.Z.fromColor(t)}let r;return(0,h.Z)(i.offsetAttribute)&&(o.offset=Z.Z.fromCartesian3(D.Z.getValueOrDefault(this._terrainOffsetProperty,e,M,R))),r=i.perPositionHeight&&!(0,h.Z)(i.extrudedHeight)?new u.Z(i):new b.Z(i),new _.Z({id:t,geometry:r,attributes:o})},V.prototype.createOutlineGeometryInstance=function(e){if(a.Z.defined("time",e),!this._outlineEnabled)throw new f.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=this._options,o=D.Z.getValueOrDefault(this._outlineColorProperty,e,c.Z.BLACK,N),r=this._distanceDisplayConditionProperty.getValue(e),s={show:new T.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:l.Z.fromColor(o),distanceDisplayCondition:p.Z.fromDistanceDisplayCondition(r),offset:void 0};let u;return(0,h.Z)(i.offsetAttribute)&&(s.offset=Z.Z.fromCartesian3(D.Z.getValueOrDefault(this._terrainOffsetProperty,e,M,R))),u=i.perPositionHeight&&!(0,h.Z)(i.extrudedHeight)?new d.Z(i):new v.Z(i),new _.Z({id:t,geometry:u,attributes:s})},V.prototype._computeCenter=function(e,t){const n=D.Z.getValueOrUndefined(this._entity.polygon.hierarchy,e);if(!(0,h.Z)(n))return;const i=n.positions;if(0===i.length)return;const o=this._scene.mapProjection.ellipsoid,s=m.Z.fromPoints(i,o),a=s.projectPointsOntoPlane(i,B),c=a.length;let l=0,u=c-1,d=new r.Z;for(let e=0;e<c;u=e++){const t=a[e],n=a[u],i=t.x*n.y-n.x*t.y;let o=r.Z.add(t,n,U);o=r.Z.multiplyByScalar(o,i,o),d=r.Z.add(d,o,d),l+=i}const f=1/(3*l);return d=r.Z.multiplyByScalar(d,f,d),s.projectPointOntoEllipsoid(d,t)},V.prototype._isHidden=function(e,t){return!(0,h.Z)(t.hierarchy)||I.Z.prototype._isHidden.call(this,e,t)},V.prototype._isOnTerrain=function(e,t){const n=P.Z.prototype._isOnTerrain.call(this,e,t),i=t.perPositionHeight,o=(0,h.Z)(i)&&(!i.isConstant||i.getValue(g.Z.MINIMUM_VALUE));return n&&!o},V.prototype._isDynamic=function(e,t){return!t.hierarchy.isConstant||!D.Z.isConstant(t.height)||!D.Z.isConstant(t.extrudedHeight)||!D.Z.isConstant(t.granularity)||!D.Z.isConstant(t.stRotation)||!D.Z.isConstant(t.textureCoordinates)||!D.Z.isConstant(t.outlineWidth)||!D.Z.isConstant(t.perPositionHeight)||!D.Z.isConstant(t.closeTop)||!D.Z.isConstant(t.closeBottom)||!D.Z.isConstant(t.zIndex)||!D.Z.isConstant(t.arcType)||this._onTerrain&&!D.Z.isConstant(this._materialProperty)&&!(this._materialProperty instanceof C.Z)},V.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof C.Z,r=this._options;r.vertexFormat=n?S.Z.VERTEX_FORMAT:E.Z.MaterialSupport.TEXTURED.vertexFormat;const s=t.hierarchy.getValue(g.Z.MINIMUM_VALUE);let a=D.Z.getValueOrUndefined(t.height,g.Z.MINIMUM_VALUE);const c=D.Z.getValueOrDefault(t.heightReference,g.Z.MINIMUM_VALUE,w.Z.NONE);let l=D.Z.getValueOrUndefined(t.extrudedHeight,g.Z.MINIMUM_VALUE);const u=D.Z.getValueOrDefault(t.extrudedHeightReference,g.Z.MINIMUM_VALUE,w.Z.NONE),d=D.Z.getValueOrDefault(t.perPositionHeight,g.Z.MINIMUM_VALUE,!1);let f;a=P.Z.getGeometryHeight(a,c),d?((0,h.Z)(a)&&(a=void 0,(0,y.Z)(O)),c!==w.Z.NONE&&d&&(a=void 0,(0,y.Z)(L))):((0,h.Z)(l)&&!(0,h.Z)(a)&&(a=0),f=P.Z.computeGeometryOffsetAttribute(a,c,l,u)),r.polygonHierarchy=s,r.granularity=D.Z.getValueOrUndefined(t.granularity,g.Z.MINIMUM_VALUE),r.stRotation=D.Z.getValueOrUndefined(t.stRotation,g.Z.MINIMUM_VALUE),r.perPositionHeight=d,r.closeTop=D.Z.getValueOrDefault(t.closeTop,g.Z.MINIMUM_VALUE,!0),r.closeBottom=D.Z.getValueOrDefault(t.closeBottom,g.Z.MINIMUM_VALUE,!0),r.offsetAttribute=f,r.height=a,r.arcType=D.Z.getValueOrDefault(t.arcType,g.Z.MINIMUM_VALUE,o.Z.GEODESIC),r.textureCoordinates=D.Z.getValueOrUndefined(t.textureCoordinates,g.Z.MINIMUM_VALUE),l=P.Z.getGeometryExtrudedHeight(l,u),l===P.Z.CLAMP_TO_GROUND&&(l=i.Z.getMinimumMaximumHeights(b.Z.computeRectangle(r,F)).minimumTerrainHeight),r.extrudedHeight=l},V.prototype._getIsClosed=function(e){const t=e.height,n=e.extrudedHeight,i=(0,h.Z)(n)&&n!==t;return!e.perPositionHeight&&(!i&&0===t||i&&e.closeTop&&e.closeBottom)},V.DynamicGeometryUpdater=H,(0,h.Z)(Object.create)&&(H.prototype=Object.create(x.Z.prototype),H.prototype.constructor=H),H.prototype._isHidden=function(e,t,n){return!(0,h.Z)(this._options.polygonHierarchy)||x.Z.prototype._isHidden.call(this,e,t,n)},H.prototype._setOptions=function(e,t,n){const r=this._options;r.polygonHierarchy=D.Z.getValueOrUndefined(t.hierarchy,n);let s=D.Z.getValueOrUndefined(t.height,n);const a=D.Z.getValueOrDefault(t.heightReference,n,w.Z.NONE),c=D.Z.getValueOrDefault(t.extrudedHeightReference,n,w.Z.NONE);let l=D.Z.getValueOrUndefined(t.extrudedHeight,n);const u=D.Z.getValueOrUndefined(t.perPositionHeight,n);let d;s=P.Z.getGeometryHeight(s,c),u?((0,h.Z)(s)&&(s=void 0,(0,y.Z)(O)),a!==w.Z.NONE&&u&&(s=void 0,(0,y.Z)(L))):((0,h.Z)(l)&&!(0,h.Z)(s)&&(s=0),d=P.Z.computeGeometryOffsetAttribute(s,a,l,c)),r.granularity=D.Z.getValueOrUndefined(t.granularity,n),r.stRotation=D.Z.getValueOrUndefined(t.stRotation,n),r.textureCoordinates=D.Z.getValueOrUndefined(t.textureCoordinates,n),r.perPositionHeight=D.Z.getValueOrUndefined(t.perPositionHeight,n),r.closeTop=D.Z.getValueOrDefault(t.closeTop,n,!0),r.closeBottom=D.Z.getValueOrDefault(t.closeBottom,n,!0),r.offsetAttribute=d,r.height=s,r.arcType=D.Z.getValueOrDefault(t.arcType,n,o.Z.GEODESIC),l=P.Z.getGeometryExtrudedHeight(l,c),l===P.Z.CLAMP_TO_GROUND&&(l=i.Z.getMinimumMaximumHeights(b.Z.computeRectangle(r,F)).minimumTerrainHeight),r.extrudedHeight=l};const z=V},55566:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Y});var i=n(730617),o=n(762031),r=n(790087),s=n(35961),a=n(376213),c=n(234146),l=n(11020),u=n(722313),d=n(765153),h=n(6821),f=n(669327),p=n(282910),m=n(156905),_=n(331097),g=n(551332),Z=n(590292),y=n(935173),b=n(151793),v=n(489381),A=n(467077),T=n(203547),w=n(958913),E=n(999604),S=n(396324),C=n(44799),x=n(534890),I=n(657528),P=n(731458),D=n(956568),O=n(121221),L=n(916269);const N=new D.Z(0),M={},R=new s.Z,F=new P.Z(s.Z.WHITE),B=new D.Z(!0),U=new D.Z(x.Z.DISABLED),k=new D.Z(new h.Z),V=new D.Z(T.Z.BOTH);function H(){this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function z(){this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function G(e,t){if(!(0,l.Z)(e))throw new d.Z("entity is required");if(!(0,l.Z)(t))throw new d.Z("scene is required");this._entity=e,this._scene=t,this._entitySubscription=e.definitionChanged.addEventListener(G.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._geometryChanged=new p.Z,this._showProperty=void 0,this._materialProperty=void 0,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._depthFailMaterialProperty=void 0,this._geometryOptions=new H,this._groundGeometryOptions=new z,this._id=`polyline-${e.id}`,this._clampToGround=!1,this._supportsPolylinesOnTerrain=A.Z.supportsPolylinesOnTerrain(t),this._zIndex=0,this._onEntityPropertyChanged(e,"polyline",e.polyline,void 0)}Object.defineProperties(G.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!(0,l.Z)(this._entity.availability)&&L.Z.isConstant(this._showProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},depthFailMaterialProperty:{get:function(){return this._depthFailMaterialProperty}},outlineEnabled:{value:!1},hasConstantOutline:{value:!0},outlineColorProperty:{value:void 0},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!1},geometryChanged:{get:function(){return this._geometryChanged}},arcType:{get:function(){return this._arcType}},clampToGround:{get:function(){return this._clampToGround&&this._supportsPolylinesOnTerrain}},zIndex:{get:function(){return this._zIndex}}}),G.prototype.isOutlineVisible=function(e){return!1},G.prototype.isFilled=function(e){const t=this._entity,n=this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e);return(0,c.Z)(n,!1)},G.prototype.createFillGeometryInstance=function(e){if(!(0,l.Z)(e))throw new d.Z("time is required.");if(!this._fillEnabled)throw new d.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=new v.Z(n&&t.isShowing&&this._showProperty.getValue(e)),o=this._distanceDisplayConditionProperty.getValue(e),r={show:i,distanceDisplayCondition:f.Z.fromDistanceDisplayCondition(o)};let c;return this._materialProperty instanceof P.Z&&((0,l.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(c=this._materialProperty.color.getValue(e,R)),(0,l.Z)(c)||(c=s.Z.WHITE),r.color=a.Z.fromColor(c)),this.clampToGround?new m.Z({id:t,geometry:new _.Z(this._groundGeometryOptions),attributes:r}):((0,l.Z)(this._depthFailMaterialProperty)&&this._depthFailMaterialProperty instanceof P.Z&&((0,l.Z)(this._depthFailMaterialProperty.color)&&(this._depthFailMaterialProperty.color.isConstant||n)&&(c=this._depthFailMaterialProperty.color.getValue(e,R)),(0,l.Z)(c)||(c=s.Z.WHITE),r.depthFailColor=a.Z.fromColor(c)),new m.Z({id:t,geometry:new y.Z(this._geometryOptions),attributes:r}))},G.prototype.createOutlineGeometryInstance=function(e){throw new d.Z("This instance does not represent an outlined geometry.")},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){this._entitySubscription(),(0,u.Z)(this)},G.prototype._onEntityPropertyChanged=function(e,t,n,i){if("availability"!==t&&"polyline"!==t)return;const o=this._entity.polyline;if(!(0,l.Z)(o))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const r=o.positions,s=o.show;if((0,l.Z)(s)&&s.isConstant&&!s.getValue(g.Z.MINIMUM_VALUE)||!(0,l.Z)(r))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const a=o.zIndex,u=(0,c.Z)(o.material,F),d=u instanceof P.Z;this._materialProperty=u,this._depthFailMaterialProperty=o.depthFailMaterial,this._showProperty=(0,c.Z)(s,B),this._shadowsProperty=(0,c.Z)(o.shadows,U),this._distanceDisplayConditionProperty=(0,c.Z)(o.distanceDisplayCondition,k),this._classificationTypeProperty=(0,c.Z)(o.classificationType,V),this._fillEnabled=!0,this._zIndex=(0,c.Z)(a,N);const h=o.width,f=o.arcType,p=o.clampToGround,m=o.granularity;if(r.isConstant&&L.Z.isConstant(h)&&L.Z.isConstant(f)&&L.Z.isConstant(m)&&L.Z.isConstant(p)&&L.Z.isConstant(a)){const e=this._geometryOptions,t=r.getValue(g.Z.MINIMUM_VALUE,e.positions);if(!(0,l.Z)(t)||t.length<2)return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));let n;n=d&&(!(0,l.Z)(this._depthFailMaterialProperty)||this._depthFailMaterialProperty instanceof P.Z)?S.Z.VERTEX_FORMAT:C.Z.VERTEX_FORMAT,e.vertexFormat=n,e.positions=t,e.width=(0,l.Z)(h)?h.getValue(g.Z.MINIMUM_VALUE):void 0,e.arcType=(0,l.Z)(f)?f.getValue(g.Z.MINIMUM_VALUE):void 0,e.granularity=(0,l.Z)(m)?m.getValue(g.Z.MINIMUM_VALUE):void 0;const i=this._groundGeometryOptions;i.positions=t,i.width=e.width,i.arcType=e.arcType,i.granularity=e.granularity,this._clampToGround=!!(0,l.Z)(p)&&p.getValue(g.Z.MINIMUM_VALUE),!this._clampToGround&&(0,l.Z)(a)&&(0,Z.Z)("Entity polylines must have clampToGround: true when using zIndex.  zIndex will be ignored."),this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))},G.prototype.createDynamicUpdater=function(e,t){if(r.Z.defined("primitives",e),r.Z.defined("groundPrimitives",t),!this._dynamic)throw new d.Z("This instance does not represent dynamic geometry.");return new W(e,t,this)};const j={positions:void 0,granularity:void 0,height:void 0,ellipsoid:void 0};function W(e,t,n){this._line=void 0,this._primitives=e,this._groundPrimitives=t,this._groundPolylinePrimitive=void 0,this._material=void 0,this._geometryUpdater=n,this._positions=[]}function q(e){if((0,l.Z)(e._line))return e._line;const t=e._geometryUpdater._scene.id;let n=M[t];const i=e._primitives;!(0,l.Z)(n)||n.isDestroyed()?(n=new E.Z,M[t]=n,i.add(n)):i.contains(n)||i.add(n);const o=n.add();return o.id=e._geometryUpdater._entity,e._line=o,o}W.prototype.update=function(e){const t=this._geometryUpdater,n=t._entity,o=n.polyline,r=o.positions;let s=L.Z.getValueOrUndefined(r,e,this._positions);t._clampToGround=L.Z.getValueOrDefault(o._clampToGround,e,!1),t._groundGeometryOptions.positions=s,t._groundGeometryOptions.width=L.Z.getValueOrDefault(o._width,e,1),t._groundGeometryOptions.arcType=L.Z.getValueOrDefault(o._arcType,e,i.Z.GEODESIC),t._groundGeometryOptions.granularity=L.Z.getValueOrDefault(o._granularity,e,9999);const a=this._groundPrimitives;if((0,l.Z)(this._groundPolylinePrimitive)&&(a.remove(this._groundPolylinePrimitive),this._groundPolylinePrimitive=void 0),t.clampToGround){if(!n.isShowing||!n.isAvailable(e)||!L.Z.getValueOrDefault(o._show,e,!0))return;if(!(0,l.Z)(s)||s.length<2)return;const i=t.fillMaterialProperty;let r;if(i instanceof P.Z)r=new S.Z;else{const t=O.Z.getValue(e,i,this._material);r=new C.Z({material:t,translucent:t.isTranslucent()}),this._material=t}return this._groundPolylinePrimitive=a.add(new w.Z({geometryInstances:t.createFillGeometryInstance(e),appearance:r,classificationType:t.classificationTypeProperty.getValue(e),asynchronous:!1}),L.Z.getValueOrUndefined(t.zIndex,e)),void((0,l.Z)(this._line)&&(this._line.show=!1))}const c=q(this);if(!n.isShowing||!n.isAvailable(e)||!L.Z.getValueOrDefault(o._show,e,!0))return void(c.show=!1);if(!(0,l.Z)(s)||s.length<2)return void(c.show=!1);let u=i.Z.GEODESIC;u=L.Z.getValueOrDefault(o._arcType,e,u);const d=t._scene.globe;u!==i.Z.NONE&&(0,l.Z)(d)&&(j.ellipsoid=d.ellipsoid,j.positions=s,j.granularity=L.Z.getValueOrUndefined(o._granularity,e),j.height=b.Z.extractHeights(s,d.ellipsoid),s=u===i.Z.GEODESIC?b.Z.generateCartesianArc(j):b.Z.generateCartesianRhumbArc(j)),c.show=!0,c.positions=s.slice(),c.material=O.Z.getValue(e,t.fillMaterialProperty,c.material),c.width=L.Z.getValueOrDefault(o._width,e,1),c.distanceDisplayCondition=L.Z.getValueOrUndefined(o._distanceDisplayCondition,e,c.distanceDisplayCondition)},W.prototype.getBoundingSphere=function(e){if(r.Z.defined("result",e),this._geometryUpdater.clampToGround){const t=this._groundPolylinePrimitive;if((0,l.Z)(t)&&t.show&&t.ready){const n=t.getGeometryInstanceAttributes(this._geometryUpdater._entity);if((0,l.Z)(n)&&(0,l.Z)(n.boundingSphere))return o.Z.clone(n.boundingSphere,e),I.Z.DONE}return(0,l.Z)(t)&&!t.ready?I.Z.PENDING:I.Z.DONE}{const t=q(this);if(t.show&&t.positions.length>0)return o.Z.fromPoints(t.positions,e),I.Z.DONE}return I.Z.FAILED},W.prototype.isDestroyed=function(){return!1},W.prototype.destroy=function(){const e=this._geometryUpdater._scene.id,t=M[e];(0,l.Z)(t)&&(t.remove(this._line),0===t.length&&(this._primitives.removeAndDestroy(t),delete M[e])),(0,l.Z)(this._groundPolylinePrimitive)&&this._groundPrimitives.remove(this._groundPolylinePrimitive),(0,u.Z)(this)};const Y=G},731803:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var i=n(781382),o=n(762031),r=n(790087),s=n(234146),a=n(11020),c=n(722313),l=n(203547),u=n(396324),d=n(44799),h=n(534890),f=n(657528),p=n(731458),m=n(946931),_=n(55566),g=n(546764),Z=n(781357),y=n(206484);const b=[];function v(e,t){const n=e._batches,i=n.length;for(let e=0;e<i;e++)n[e].remove(t)}function A(e,t,n){if(n.isDynamic)return void e._dynamicBatch.add(t,n);if(n.clampToGround&&n.fillEnabled){const i=n.classificationTypeProperty.getValue(t);return void e._groundBatches[i].add(t,n)}let i;n.fillEnabled&&(i=n.shadowsProperty.getValue(t));let o,r=0;(0,a.Z)(n.depthFailMaterialProperty)&&(r=n.depthFailMaterialProperty instanceof p.Z?1:2),(0,a.Z)(i)&&(o=i+r*h.Z.NUMBER_OF_SHADOW_MODES),n.fillEnabled&&(n.fillMaterialProperty instanceof p.Z?e._colorBatches[o].add(t,n):e._materialBatches[o].add(t,n))}function T(e,t,n,o){let a;r.Z.defined("scene",e),r.Z.defined("entityCollection",t),o=(0,s.Z)(o,e.groundPrimitives),n=(0,s.Z)(n,e.primitives),this._scene=e,this._primitives=n,this._entityCollection=void 0,this._addedObjects=new i.Z,this._removedObjects=new i.Z,this._changedObjects=new i.Z;const c=h.Z.NUMBER_OF_SHADOW_MODES;for(this._colorBatches=new Array(3*c),this._materialBatches=new Array(3*c),a=0;a<c;++a)this._colorBatches[a]=new g.Z(n,u.Z,void 0,!1,a),this._materialBatches[a]=new Z.Z(n,d.Z,void 0,!1,a),this._colorBatches[a+c]=new g.Z(n,u.Z,u.Z,!1,a),this._materialBatches[a+c]=new Z.Z(n,d.Z,u.Z,!1,a),this._colorBatches[a+2*c]=new g.Z(n,u.Z,d.Z,!1,a),this._materialBatches[a+2*c]=new Z.Z(n,d.Z,d.Z,!1,a);this._dynamicBatch=new m.Z(n,o);const f=l.Z.NUMBER_OF_CLASSIFICATION_TYPES;for(this._groundBatches=new Array(f),a=0;a<f;++a)this._groundBatches[a]=new y.Z(o,a);this._batches=this._colorBatches.concat(this._materialBatches,this._dynamicBatch,this._groundBatches),this._subscriptions=new i.Z,this._updaters=new i.Z,this._entityCollection=t,t.collectionChanged.addEventListener(T.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,b)}T.prototype.update=function(e){r.Z.defined("time",e);const t=this._addedObjects,n=t.values,i=this._removedObjects,o=i.values,s=this._changedObjects,a=s.values;let c,l,u,d;for(c=a.length-1;c>-1;c--)l=a[c],u=l.id,d=this._updaters.get(u),d.entity===l?(v(this,d),A(this,e,d)):(o.push(l),n.push(l));for(c=o.length-1;c>-1;c--)l=o[c],u=l.id,d=this._updaters.get(u),v(this,d),d.destroy(),this._updaters.remove(u),this._subscriptions.get(u)(),this._subscriptions.remove(u);for(c=n.length-1;c>-1;c--)l=n[c],u=l.id,d=new _.Z(l,this._scene),this._updaters.set(u,d),A(this,e,d),this._subscriptions.set(u,d.geometryChanged.addEventListener(T._onGeometryChanged,this));t.removeAll(),i.removeAll(),s.removeAll();let h=!0;const f=this._batches,p=f.length;for(c=0;c<p;c++)h=f[c].update(e)&&h;return h};const w=[],E=new o.Z;T.prototype.getBoundingSphere=function(e,t){r.Z.defined("entity",e),r.Z.defined("result",t);const n=w,i=E;let s=0,a=f.Z.DONE;const c=this._batches,l=c.length,u=this._updaters.get(e.id);for(let e=0;e<l;e++){if(a=c[e].getBoundingSphere(u,i),a===f.Z.PENDING)return f.Z.PENDING;a===f.Z.DONE&&(n[s]=o.Z.clone(i,n[s]),s++)}return 0===s?f.Z.FAILED:(n.length=s,o.Z.fromBoundingSpheres(n,t),f.Z.DONE)},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){let e;this._entityCollection.collectionChanged.removeEventListener(T.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const t=this._batches;let n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();return this._subscriptions.removeAll(),(0,c.Z)(this)},T._onGeometryChanged=function(e){const t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;(0,a.Z)(t.get(o))||(0,a.Z)(n.get(o))||n.set(o,i)},T.prototype._onCollectionChanged=function(e,t,n){const i=this._addedObjects,o=this._removedObjects,r=this._changedObjects;let s,a,c;for(s=n.length-1;s>-1;s--)c=n[s],a=c.id,i.remove(a)||(o.set(a,c),r.remove(a));for(s=t.length-1;s>-1;s--)c=t[s],a=c.id,o.remove(a)?r.set(a,c):i.set(a,c)};const S=T},463795:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(790087),o=n(35961),r=n(376213),s=n(11020),a=n(765153),c=n(669327),l=n(156905),u=n(551332),d=n(169114),h=n(70618),f=n(489381),p=n(71880),m=n(104763),_=n(731458),g=n(452741),Z=n(674842),y=n(916269);const b=new o.Z;function v(e){this.id=e,this.vertexFormat=void 0,this.polylinePositions=void 0,this.shapePositions=void 0,this.cornerType=void 0,this.granularity=void 0}function A(e,t){Z.Z.call(this,{entity:e,scene:t,geometryOptions:new v(e),geometryPropertyName:"polylineVolume",observedPropertyNames:["availability","polylineVolume"]}),this._onEntityPropertyChanged(e,"polylineVolume",e.polylineVolume,void 0)}function T(e,t,n){g.Z.call(this,e,t,n)}(0,s.Z)(Object.create)&&(A.prototype=Object.create(Z.Z.prototype),A.prototype.constructor=A),A.prototype.createFillGeometryInstance=function(e){if(i.Z.defined("time",e),!this._fillEnabled)throw new a.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let u,h;const p=new f.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),m=this._distanceDisplayConditionProperty.getValue(e),g=c.Z.fromDistanceDisplayCondition(m);if(this._materialProperty instanceof _.Z){let t;(0,s.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,b)),(0,s.Z)(t)||(t=o.Z.WHITE),h=r.Z.fromColor(t),u={show:p,distanceDisplayCondition:g,color:h}}else u={show:p,distanceDisplayCondition:g};return new l.Z({id:t,geometry:new d.Z(this._options),attributes:u})},A.prototype.createOutlineGeometryInstance=function(e){if(i.Z.defined("time",e),!this._outlineEnabled)throw new a.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),s=y.Z.getValueOrDefault(this._outlineColorProperty,e,o.Z.BLACK,b),u=this._distanceDisplayConditionProperty.getValue(e);return new l.Z({id:t,geometry:new h.Z(this._options),attributes:{show:new f.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:r.Z.fromColor(s),distanceDisplayCondition:c.Z.fromDistanceDisplayCondition(u)}})},A.prototype._isHidden=function(e,t){return!(0,s.Z)(t.positions)||!(0,s.Z)(t.shape)||Z.Z.prototype._isHidden.call(this,e,t)},A.prototype._isDynamic=function(e,t){return!(t.positions.isConstant&&t.shape.isConstant&&y.Z.isConstant(t.granularity)&&y.Z.isConstant(t.outlineWidth)&&y.Z.isConstant(t.cornerType))},A.prototype._setStaticOptions=function(e,t){const n=t.granularity,i=t.cornerType,o=this._options,r=this._materialProperty instanceof _.Z;o.vertexFormat=r?m.Z.VERTEX_FORMAT:p.Z.MaterialSupport.TEXTURED.vertexFormat,o.polylinePositions=t.positions.getValue(u.Z.MINIMUM_VALUE,o.polylinePositions),o.shapePositions=t.shape.getValue(u.Z.MINIMUM_VALUE,o.shape),o.granularity=(0,s.Z)(n)?n.getValue(u.Z.MINIMUM_VALUE):void 0,o.cornerType=(0,s.Z)(i)?i.getValue(u.Z.MINIMUM_VALUE):void 0},A.DynamicGeometryUpdater=T,(0,s.Z)(Object.create)&&(T.prototype=Object.create(g.Z.prototype),T.prototype.constructor=T),T.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,s.Z)(i.polylinePositions)||!(0,s.Z)(i.shapePositions)||g.Z.prototype._isHidden.call(this,e,t,n)},T.prototype._setOptions=function(e,t,n){const i=this._options;i.polylinePositions=y.Z.getValueOrUndefined(t.positions,n,i.polylinePositions),i.shapePositions=y.Z.getValueOrUndefined(t.shape,n),i.granularity=y.Z.getValueOrUndefined(t.granularity,n),i.cornerType=y.Z.getValueOrUndefined(t.cornerType,n)};const w=A},569686:(e,t,n)=>{"use strict";n.d(t,{Z:()=>F});var i=n(642336),o=n(660904),r=n(532056),s=n(790087),a=n(35961),c=n(376213),l=n(11020),u=n(765153),d=n(669327),h=n(63354),f=n(156905),p=n(551332),m=n(630114),_=n(143450),g=n(749372),Z=n(75918),y=n(489381),b=n(990778),v=n(71880),A=n(104763),T=n(731458),w=n(452741),E=n(674842),S=n(792739),C=n(916269);const x=new a.Z,I=o.Z.ZERO,P=new o.Z,D=new _.Z,O=new _.Z,L=new r.Z;function N(e){this.id=e,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function M(e,t){S.Z.call(this,{entity:e,scene:t,geometryOptions:new N(e),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(e,"rectangle",e.rectangle,void 0)}function R(e,t,n){w.Z.call(this,e,t,n)}(0,l.Z)(Object.create)&&(M.prototype=Object.create(S.Z.prototype),M.prototype.constructor=M),M.prototype.createFillGeometryInstance=function(e){if(s.Z.defined("time",e),!this._fillEnabled)throw new u.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new y.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:d.Z.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof T.Z){let t;(0,l.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,x)),(0,l.Z)(t)||(t=a.Z.WHITE),i.color=c.Z.fromColor(t)}return(0,l.Z)(this._options.offsetAttribute)&&(i.offset=m.Z.fromCartesian3(C.Z.getValueOrDefault(this._terrainOffsetProperty,e,I,P))),new f.Z({id:t,geometry:new g.Z(this._options),attributes:i})},M.prototype.createOutlineGeometryInstance=function(e){if(s.Z.defined("time",e),!this._outlineEnabled)throw new u.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=C.Z.getValueOrDefault(this._outlineColorProperty,e,a.Z.BLACK,x),o=this._distanceDisplayConditionProperty.getValue(e),r={show:new y.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:c.Z.fromColor(i),distanceDisplayCondition:d.Z.fromDistanceDisplayCondition(o),offset:void 0};return(0,l.Z)(this._options.offsetAttribute)&&(r.offset=m.Z.fromCartesian3(C.Z.getValueOrDefault(this._terrainOffsetProperty,e,I,P))),new f.Z({id:t,geometry:new Z.Z(this._options),attributes:r})},M.prototype._computeCenter=function(e,t){const n=C.Z.getValueOrUndefined(this._entity.rectangle.coordinates,e,O);if(!(0,l.Z)(n))return;const i=_.Z.center(n,L);return r.Z.toCartesian(i,h.Z.WGS84,t)},M.prototype._isHidden=function(e,t){return!(0,l.Z)(t.coordinates)||E.Z.prototype._isHidden.call(this,e,t)},M.prototype._isDynamic=function(e,t){return!t.coordinates.isConstant||!C.Z.isConstant(t.height)||!C.Z.isConstant(t.extrudedHeight)||!C.Z.isConstant(t.granularity)||!C.Z.isConstant(t.stRotation)||!C.Z.isConstant(t.rotation)||!C.Z.isConstant(t.outlineWidth)||!C.Z.isConstant(t.zIndex)||this._onTerrain&&!C.Z.isConstant(this._materialProperty)&&!(this._materialProperty instanceof T.Z)},M.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof T.Z;let o=C.Z.getValueOrUndefined(t.height,p.Z.MINIMUM_VALUE);const r=C.Z.getValueOrDefault(t.heightReference,p.Z.MINIMUM_VALUE,b.Z.NONE);let s=C.Z.getValueOrUndefined(t.extrudedHeight,p.Z.MINIMUM_VALUE);const a=C.Z.getValueOrDefault(t.extrudedHeightReference,p.Z.MINIMUM_VALUE,b.Z.NONE);(0,l.Z)(s)&&!(0,l.Z)(o)&&(o=0);const c=this._options;c.vertexFormat=n?A.Z.VERTEX_FORMAT:v.Z.MaterialSupport.TEXTURED.vertexFormat,c.rectangle=t.coordinates.getValue(p.Z.MINIMUM_VALUE,c.rectangle),c.granularity=C.Z.getValueOrUndefined(t.granularity,p.Z.MINIMUM_VALUE),c.stRotation=C.Z.getValueOrUndefined(t.stRotation,p.Z.MINIMUM_VALUE),c.rotation=C.Z.getValueOrUndefined(t.rotation,p.Z.MINIMUM_VALUE),c.offsetAttribute=S.Z.computeGeometryOffsetAttribute(o,r,s,a),c.height=S.Z.getGeometryHeight(o,r),s=S.Z.getGeometryExtrudedHeight(s,a),s===S.Z.CLAMP_TO_GROUND&&(s=i.Z.getMinimumMaximumHeights(g.Z.computeRectangle(c,D)).minimumTerrainHeight),c.extrudedHeight=s},M.DynamicGeometryUpdater=R,(0,l.Z)(Object.create)&&(R.prototype=Object.create(w.Z.prototype),R.prototype.constructor=R),R.prototype._isHidden=function(e,t,n){return!(0,l.Z)(this._options.rectangle)||w.Z.prototype._isHidden.call(this,e,t,n)},R.prototype._setOptions=function(e,t,n){const o=this._options;let r=C.Z.getValueOrUndefined(t.height,n);const s=C.Z.getValueOrDefault(t.heightReference,n,b.Z.NONE);let a=C.Z.getValueOrUndefined(t.extrudedHeight,n);const c=C.Z.getValueOrDefault(t.extrudedHeightReference,n,b.Z.NONE);(0,l.Z)(a)&&!(0,l.Z)(r)&&(r=0),o.rectangle=C.Z.getValueOrUndefined(t.coordinates,n,o.rectangle),o.granularity=C.Z.getValueOrUndefined(t.granularity,n),o.stRotation=C.Z.getValueOrUndefined(t.stRotation,n),o.rotation=C.Z.getValueOrUndefined(t.rotation,n),o.offsetAttribute=S.Z.computeGeometryOffsetAttribute(r,s,a,c),o.height=S.Z.getGeometryHeight(r,s),a=S.Z.getGeometryExtrudedHeight(a,c),a===S.Z.CLAMP_TO_GROUND&&(a=i.Z.getMinimumMaximumHeights(g.Z.computeRectangle(o,D)).minimumTerrainHeight),o.extrudedHeight=a};const F=M},467369:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(11020),o=n(765153),r=n(282910),s=n(916269);function a(e){let t=e._targetProperty;if(!(0,i.Z)(t)){let n=e._targetEntity;if(!(0,i.Z)(n)){if(n=e._targetCollection.getById(e._targetId),!(0,i.Z)(n))return void(e._targetEntity=e._targetProperty=void 0);n.definitionChanged.addEventListener(c.prototype._onTargetEntityDefinitionChanged,e),e._targetEntity=n}const o=e._targetPropertyNames;t=e._targetEntity;for(let e=0,n=o.length;e<n&&(0,i.Z)(t);++e)t=t[o[e]];e._targetProperty=t}return t}function c(e,t,n){if(!(0,i.Z)(e))throw new o.Z("targetCollection is required.");if(!(0,i.Z)(t)||""===t)throw new o.Z("targetId is required.");if(!(0,i.Z)(n)||0===n.length)throw new o.Z("targetPropertyNames is required.");for(let e=0;e<n.length;e++){const t=n[e];if(!(0,i.Z)(t)||""===t)throw new o.Z("reference contains invalid properties.")}this._targetCollection=e,this._targetId=t,this._targetPropertyNames=n,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new r.Z,e.collectionChanged.addEventListener(c.prototype._onCollectionChanged,this)}Object.defineProperties(c.prototype,{isConstant:{get:function(){return s.Z.isConstant(a(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){const e=a(this);return(0,i.Z)(e)?e.referenceFrame:void 0}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return a(this)}}}),c.fromString=function(e,t){if(!(0,i.Z)(e))throw new o.Z("targetCollection is required.");if(!(0,i.Z)(t))throw new o.Z("referenceString is required.");let n;const r=[];let s=!0,a=!1,l="";for(let e=0;e<t.length;++e){const i=t.charAt(e);a?(l+=i,a=!1):"\\"===i?a=!0:s&&"#"===i?(n=l,s=!1,l=""):s||"."!==i?l+=i:(r.push(l),l="")}return r.push(l),new c(e,n,r)},c.prototype.getValue=function(e,t){const n=a(this);return(0,i.Z)(n)?n.getValue(e,t):void 0},c.prototype.getValueInReferenceFrame=function(e,t,n){const o=a(this);return(0,i.Z)(o)?o.getValueInReferenceFrame(e,t,n):void 0},c.prototype.getType=function(e){const t=a(this);return(0,i.Z)(t)?t.getType(e):void 0},c.prototype.equals=function(e){if(this===e)return!0;const t=this._targetPropertyNames,n=e._targetPropertyNames;if(this._targetCollection!==e._targetCollection||this._targetId!==e._targetId||t.length!==n.length)return!1;const i=this._targetPropertyNames.length;for(let e=0;e<i;e++)if(t[e]!==n[e])return!1;return!0},c.prototype._onTargetEntityDefinitionChanged=function(e,t,n,o){(0,i.Z)(this._targetProperty)&&this._targetPropertyNames[0]===t&&(this._targetProperty=void 0,this._definitionChanged.raiseEvent(this))},c.prototype._onCollectionChanged=function(e,t,n){let o=this._targetEntity;(0,i.Z)(o)&&-1!==n.indexOf(o)?(o.definitionChanged.removeEventListener(c.prototype._onTargetEntityDefinitionChanged,this),this._targetEntity=this._targetProperty=void 0):(0,i.Z)(o)||(o=a(this),(0,i.Z)(o)&&this._definitionChanged.raiseEvent(this))};const l=c},641256:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(660904),o=n(790087),r=n(234146),s=n(11020),a=n(765153),c=n(282910),l=n(803994),u=n(529343),d=n(916269),h=n(431763);function f(e,t){let n;if((t=(0,r.Z)(t,0))>0){n=new Array(t);for(let e=0;e<t;e++)n[e]=i.Z}this._numberOfDerivatives=t,this._property=new h.Z(i.Z,n),this._definitionChanged=new c.Z,this._referenceFrame=(0,r.Z)(e,l.Z.FIXED),this._property._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)}Object.defineProperties(f.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(e){this._property.forwardExtrapolationType=e}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(e){this._property.forwardExtrapolationDuration=e}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(e){this._property.backwardExtrapolationType=e}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(e){this._property.backwardExtrapolationDuration=e}}}),f.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,l.Z.FIXED,t)},f.prototype.getValueInReferenceFrame=function(e,t,n){if(o.Z.defined("time",e),o.Z.defined("referenceFrame",t),n=this._property.getValue(e,n),(0,s.Z)(n))return u.Z.convertToReferenceFrame(e,n,this._referenceFrame,t,n)},f.prototype.setInterpolationOptions=function(e){this._property.setInterpolationOptions(e)},f.prototype.addSample=function(e,t,n){const i=this._numberOfDerivatives;if(i>0&&(!(0,s.Z)(n)||n.length!==i))throw new a.Z("derivatives length must be equal to the number of derivatives.");this._property.addSample(e,t,n)},f.prototype.addSamples=function(e,t,n){this._property.addSamples(e,t,n)},f.prototype.addSamplesPackedArray=function(e,t){this._property.addSamplesPackedArray(e,t)},f.prototype.removeSample=function(e){return this._property.removeSample(e)},f.prototype.removeSamples=function(e){this._property.removeSamples(e)},f.prototype.equals=function(e){return this===e||e instanceof f&&d.Z.equals(this._property,e._property)&&this._referenceFrame===e._referenceFrame};const p=f},431763:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(486598),o=n(790087),r=n(234146),s=n(11020),a=n(765153),c=n(282910),l=n(165032),u=n(791364),d=n(433310);const h={packedLength:1,pack:function(e,t,n){t[n=(0,r.Z)(n,0)]=e},unpack:function(e,t,n){return e[t=(0,r.Z)(t,0)]}};function f(e,t,n){let i;const o=e.length,r=n.length,s=o+r;if(e.length=s,o!==t){let n=o-1;for(i=s-1;i>=t;i--)e[i]=e[n--]}for(i=0;i<r;i++)e[t++]=n[i]}function p(e,t){return e instanceof u.Z?e:"string"==typeof e?u.Z.fromIso8601(e):u.Z.addSeconds(t,e,new u.Z)}const m=[],_=[];function g(e,t,n,o,r){let a,c,l,d,h,g,Z=0;for(;Z<o.length;){h=p(o[Z],e),l=(0,i.Z)(t,h,u.Z.compare);let y=0,b=0;if(l<0){for(l=~l,d=l*r,c=void 0,g=t[l];Z<o.length&&(h=p(o[Z],e),!((0,s.Z)(c)&&u.Z.compare(c,h)>=0||(0,s.Z)(g)&&u.Z.compare(h,g)>=0));){for(m[y++]=h,Z+=1,a=0;a<r;a++)_[b++]=o[Z],Z+=1;c=h}y>0&&(_.length=b,f(n,d,_),m.length=y,f(t,l,m))}else{for(a=0;a<r;a++)Z++,n[l*r+a]=o[Z];Z++}}}function Z(e,t){o.Z.defined("type",e);let n=e;n===Number&&(n=h);let i,a=n.packedLength,u=(0,r.Z)(n.packedInterpolationLength,a),f=0;if((0,s.Z)(t)){const e=t.length;i=new Array(e);for(let n=0;n<e;n++){let e=t[n];e===Number&&(e=h);const o=e.packedLength;a+=o,u+=(0,r.Z)(e.packedInterpolationLength,o),i[n]=e}f=e}this._type=e,this._innerType=n,this._interpolationDegree=1,this._interpolationAlgorithm=d.Z,this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=a,this._packedInterpolationLength=u,this._updateTableLength=!0,this._interpolationResult=new Array(u),this._definitionChanged=new c.Z,this._derivativeTypes=t,this._innerDerivativeTypes=i,this._inputOrder=f,this._forwardExtrapolationType=l.Z.NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=l.Z.NONE,this._backwardExtrapolationDuration=0}function y(e,t,n){const i=e._packedLength;e._times.splice(t,n),e._values.splice(t*i,n*i),e._updateTableLength=!0,e._definitionChanged.raiseEvent(e)}Object.defineProperties(Z.prototype,{isConstant:{get:function(){return 0===this._values.length}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(e){this._forwardExtrapolationType!==e&&(this._forwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(e){this._forwardExtrapolationDuration!==e&&(this._forwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(e){this._backwardExtrapolationType!==e&&(this._backwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(e){this._backwardExtrapolationDuration!==e&&(this._backwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}}}),Z.prototype.getValue=function(e,t){o.Z.defined("time",e);const n=this._times,r=n.length;if(0===r)return;let a;const c=this._innerType,d=this._values;let h=(0,i.Z)(n,e,u.Z.compare);if(h<0){if(h=~h,0===h){const i=n[h];if(a=this._backwardExtrapolationDuration,this._backwardExtrapolationType===l.Z.NONE||0!==a&&u.Z.secondsDifference(i,e)>a)return;if(this._backwardExtrapolationType===l.Z.HOLD)return c.unpack(d,0,t)}if(h>=r){h=r-1;const i=n[h];if(a=this._forwardExtrapolationDuration,this._forwardExtrapolationType===l.Z.NONE||0!==a&&u.Z.secondsDifference(e,i)>a)return;if(this._forwardExtrapolationType===l.Z.HOLD)return h=r-1,c.unpack(d,h*c.packedLength,t)}const i=this._xTable,o=this._yTable,f=this._interpolationAlgorithm,p=this._packedInterpolationLength,m=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;const e=Math.min(f.getRequiredDataPoints(this._interpolationDegree,m),r);e!==this._numberOfPoints&&(this._numberOfPoints=e,i.length=e,o.length=e*p)}const _=this._numberOfPoints-1;if(_<1)return;let g=0,Z=r-1;if(Z-g+1>=_+1){let e=h-(_/2|0)-1;e<g&&(e=g);let t=e+_;t>Z&&(t=Z,e=t-_,e<g&&(e=g)),g=e,Z=t}const y=Z-g+1;for(let e=0;e<y;++e)i[e]=u.Z.secondsDifference(n[g+e],n[Z]);if((0,s.Z)(c.convertPackedArrayForInterpolation))c.convertPackedArrayForInterpolation(d,g,Z,o);else{let e=0;const t=this._packedLength;let n=g*t;const i=(Z+1)*t;for(;n<i;)o[e]=d[n],n++,e++}const b=u.Z.secondsDifference(e,n[Z]);let v;if(0!==m&&(0,s.Z)(f.interpolate)){const e=Math.floor(p/(m+1));v=f.interpolate(b,i,o,e,m,m,this._interpolationResult)}else v=f.interpolateOrderZero(b,i,o,p,this._interpolationResult);return(0,s.Z)(c.unpackInterpolationResult)?c.unpackInterpolationResult(v,d,g,Z,t):c.unpack(v,0,t)}return c.unpack(d,h*this._packedLength,t)},Z.prototype.setInterpolationOptions=function(e){if(!(0,s.Z)(e))return;let t=!1;const n=e.interpolationAlgorithm,i=e.interpolationDegree;(0,s.Z)(n)&&this._interpolationAlgorithm!==n&&(this._interpolationAlgorithm=n,t=!0),(0,s.Z)(i)&&this._interpolationDegree!==i&&(this._interpolationDegree=i,t=!0),t&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))},Z.prototype.addSample=function(e,t,n){const i=this._innerDerivativeTypes,r=(0,s.Z)(i);o.Z.defined("time",e),o.Z.defined("value",t),r&&o.Z.defined("derivatives",n);const a=this._innerType,c=[];if(c.push(e),a.pack(t,c,c.length),r){const e=i.length;for(let t=0;t<e;t++)i[t].pack(n[t],c,c.length)}g(void 0,this._times,this._values,c,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},Z.prototype.addSamples=function(e,t,n){const i=this._innerDerivativeTypes,r=(0,s.Z)(i);if(o.Z.defined("times",e),o.Z.defined("values",t),e.length!==t.length)throw new a.Z("times and values must be the same length.");if(r&&(!(0,s.Z)(n)||n.length!==e.length))throw new a.Z("times and derivativeValues must be the same length.");const c=this._innerType,l=e.length,u=[];for(let o=0;o<l;o++)if(u.push(e[o]),c.pack(t[o],u,u.length),r){const e=n[o],t=i.length;for(let n=0;n<t;n++)i[n].pack(e[n],u,u.length)}g(void 0,this._times,this._values,u,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},Z.prototype.addSamplesPackedArray=function(e,t){o.Z.defined("packedSamples",e),g(t,this._times,this._values,e,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},Z.prototype.removeSample=function(e){o.Z.defined("time",e);const t=(0,i.Z)(this._times,e,u.Z.compare);return!(t<0||(y(this,t,1),0))},Z.prototype.removeSamples=function(e){o.Z.defined("timeInterval",e);const t=this._times;let n=(0,i.Z)(t,e.start,u.Z.compare);n<0?n=~n:e.isStartIncluded||++n;let r=(0,i.Z)(t,e.stop,u.Z.compare);r<0?r=~r:e.isStopIncluded&&++r,y(this,n,r-n)},Z.prototype.equals=function(e){if(this===e)return!0;if(!(0,s.Z)(e))return!1;if(this._type!==e._type||this._interpolationDegree!==e._interpolationDegree||this._interpolationAlgorithm!==e._interpolationAlgorithm)return!1;const t=this._derivativeTypes,n=(0,s.Z)(t),i=e._derivativeTypes;if(n!==(0,s.Z)(i))return!1;let o,r;if(n){if(r=t.length,r!==i.length)return!1;for(o=0;o<r;o++)if(t[o]!==i[o])return!1}const a=this._times,c=e._times;if(r=a.length,r!==c.length)return!1;for(o=0;o<r;o++)if(!u.Z.equals(a[o],c[o]))return!1;const l=this._values,d=e._values;for(r=l.length,o=0;o<r;o++)if(l[o]!==d[o])return!1;return!0},Z._mergeNewSamples=g;const b=Z},357210:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(765153),r=n(63354),s=n(282910),a=n(803994),c=n(916269);function l(e){this._definitionChanged=new s.Z,this._value=void 0,this._removeSubscription=void 0,this.setValue(e)}Object.defineProperties(l.prototype,{isConstant:{get:function(){return c.Z.isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return(0,i.Z)(this._value)?this._value.referenceFrame:a.Z.FIXED}}}),l.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,a.Z.FIXED,t)},l.prototype.setValue=function(e){this._value!==e&&(this._value=e,(0,i.Z)(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),(0,i.Z)(e)&&(this._removeSubscription=e.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))},l.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,i.Z)(e))throw new o.Z("time is required.");if(!(0,i.Z)(t))throw new o.Z("referenceFrame is required.");if((0,i.Z)(this._value))return n=this._value.getValueInReferenceFrame(e,t,n),(0,i.Z)(n)?r.Z.WGS84.scaleToGeodeticSurface(n,n):void 0},l.prototype.equals=function(e){return this===e||e instanceof l&&this._value===e._value},l.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const u=l},546764:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(781382),o=n(660904),r=n(35961),s=n(376213),a=n(11020),c=n(6821),l=n(669327),u=n(630114),d=n(489381),h=n(759398),f=n(657528),p=n(731458),m=n(121221),_=n(916269);const g=new r.Z,Z=new c.Z,y=new c.Z,b=o.Z.ZERO,v=new o.Z;function A(e,t,n,o,r,s,c){let l;this.translucent=t,this.appearanceType=n,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=r,this.depthFailMaterial=void 0,this.closed=s,this.shadows=c,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.Z,this.updaters=new i.Z,this.updatersWithAttributes=new i.Z,this.attributes=new i.Z,this.subscriptions=new i.Z,this.showsUpdated=new i.Z,this.itemsToRemove=[],this.invalidated=!1,(0,a.Z)(r)&&(l=r.definitionChanged.addEventListener(A.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=l}function T(e,t,n,i,o){this._solidItems=[],this._translucentItems=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}function w(e,t){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.remove(t))return 0===i.updaters.length&&(e.splice(n,1),i.destroy()),!0}return!1}function E(e,t,n){let i=!1;const o=t.length;for(let r=0;r<o;++r){const o=t[r],s=o.itemsToRemove,a=s.length;if(a>0)for(r=0;r<a;r++){const t=s[r];o.remove(t),e.add(n,t),i=!0}}return i}function S(e,t,n,i){let o,r=t.length;for(o=r-1;o>=0;o--){const i=t[o];if(i.invalidated){t.splice(o,1);const r=i.updaters.values,s=r.length;for(let t=0;t<s;t++)e.add(n,r[t]);i.destroy()}}for(r=t.length,o=0;o<r;++o)i=t[o].update(n)&&i;return i}function C(e,t,n){const i=e.length;for(let o=0;o<i;o++){const i=e[o];if(i.contains(t))return i.getBoundingSphere(t,n)}return f.Z.FAILED}function x(e){const t=e.length;for(let n=0;n<t;n++)e[n].destroy();e.length=0}A.prototype.onMaterialChanged=function(){this.invalidated=!0},A.prototype.isMaterial=function(e){const t=this.depthFailMaterialProperty,n=e.depthFailMaterialProperty;return n===t||!!(0,a.Z)(t)&&t.equals(n)},A.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&_.Z.isConstant(e.distanceDisplayConditionProperty)&&_.Z.isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},A.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.Z)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},A.prototype.update=function(e){let t=!0,n=0,i=this.primitive;const f=this.primitives;let A;if(this.createPrimitive){const n=this.geometry.values;if(n.length>0){let o;(0,a.Z)(i)&&((0,a.Z)(this.oldPrimitive)?f.remove(i):this.oldPrimitive=i),(0,a.Z)(this.depthFailAppearanceType)&&((0,a.Z)(this.depthFailMaterialProperty)&&(this.depthFailMaterial=m.Z.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial)),o=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),i=new h.Z({show:!1,asynchronous:!0,geometryInstances:n.slice(),appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:o,shadows:this.shadows}),f.add(i),t=!1}else{(0,a.Z)(i)&&(f.remove(i),i=void 0);const e=this.oldPrimitive;(0,a.Z)(e)&&(f.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,a.Z)(i)&&i.ready){i.show=!0,(0,a.Z)(this.oldPrimitive)&&(f.remove(this.oldPrimitive),this.oldPrimitive=void 0),!(0,a.Z)(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof p.Z||(this.depthFailMaterial=m.Z.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const t=this.updatersWithAttributes.values,h=t.length,T=this.waitingOnCreate;for(A=0;A<h;A++){const h=t[A],f=this.geometry.get(h.id);let m=this.attributes.get(f.id.id);if((0,a.Z)(m)||(m=i.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,m)),!h.fillMaterialProperty.isConstant||T){const t=h.fillMaterialProperty.color,i=_.Z.getValueOrDefault(t,e,r.Z.WHITE,g);r.Z.equals(m._lastColor,i)||(m._lastColor=r.Z.clone(i,m._lastColor),m.color=s.Z.toValue(i,m.color),(this.translucent&&255===m.color[3]||!this.translucent&&255!==m.color[3])&&(this.itemsToRemove[n++]=h))}if((0,a.Z)(this.depthFailAppearanceType)&&h.depthFailMaterialProperty instanceof p.Z&&(!h.depthFailMaterialProperty.isConstant||T)){const t=h.depthFailMaterialProperty.color,n=_.Z.getValueOrDefault(t,e,r.Z.WHITE,g);r.Z.equals(m._lastDepthFailColor,n)||(m._lastDepthFailColor=r.Z.clone(n,m._lastDepthFailColor),m.depthFailColor=s.Z.toValue(n,m.depthFailColor))}const w=h.entity.isShowing&&(h.hasConstantFill||h.isFilled(e));w!==(1===m.show[0])&&(m.show=d.Z.toValue(w,m.show));const E=h.distanceDisplayConditionProperty;if(!_.Z.isConstant(E)){const t=_.Z.getValueOrDefault(E,e,y,Z);c.Z.equals(t,m._lastDistanceDisplayCondition)||(m._lastDistanceDisplayCondition=c.Z.clone(t,m._lastDistanceDisplayCondition),m.distanceDisplayCondition=l.Z.toValue(t,m.distanceDisplayCondition))}const S=h.terrainOffsetProperty;if(!_.Z.isConstant(S)){const t=_.Z.getValueOrDefault(S,e,b,v);o.Z.equals(t,m._lastOffset)||(m._lastOffset=o.Z.clone(t,m._lastOffset),m.offset=u.Z.toValue(t,m.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else(0,a.Z)(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},A.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,a.Z)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const s=n.entity.isShowing;s!==(1===r.show[0])&&(r.show=d.Z.toValue(s,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},A.prototype.contains=function(e){return this.updaters.contains(e.id)},A.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return f.Z.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.Z)(i)||!(0,a.Z)(i.boundingSphere)||(0,a.Z)(i.show)&&0===i.show[0]?f.Z.FAILED:(i.boundingSphere.clone(t),f.Z.DONE)},A.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,a.Z)(e)&&t.remove(e);const n=this.oldPrimitive;(0,a.Z)(n)&&t.remove(n),(0,a.Z)(this.removeMaterialSubscription)&&this.removeMaterialSubscription()},T.prototype.add=function(e,t){let n,i;const o=t.createFillGeometryInstance(e);255===o.attributes.color.value[3]?(n=this._solidItems,i=!1):(n=this._translucentItems,i=!0);const r=n.length;for(let e=0;e<r;e++){const i=n[e];if(i.isMaterial(t))return void i.add(t,o)}const s=new A(this._primitives,i,this._appearanceType,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);s.add(t,o),n.push(s)},T.prototype.remove=function(e){w(this._solidItems,e)||w(this._translucentItems,e)},T.prototype.update=function(e){let t=S(this,this._solidItems,e,!0);t=S(this,this._translucentItems,e,t)&&t;const n=E(this,this._solidItems,e),i=E(this,this._translucentItems,e);return(n||i)&&(t=S(this,this._solidItems,e,t)&&t,t=S(this,this._translucentItems,e,t)&&t),t},T.prototype.getBoundingSphere=function(e,t){const n=C(this._solidItems,e,t);return n===f.Z.FAILED?C(this._translucentItems,e,t):n},T.prototype.removeAllPrimitives=function(){x(this._solidItems),x(this._translucentItems)};const I=T},781357:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(781382),o=n(660904),r=n(35961),s=n(376213),a=n(11020),c=n(6821),l=n(669327),u=n(630114),d=n(489381),h=n(759398),f=n(657528),p=n(731458),m=n(121221),_=n(916269);const g=new c.Z,Z=new c.Z,y=o.Z.ZERO,b=new o.Z;function v(e,t,n,o,r,s,a){this.primitives=e,this.appearanceType=t,this.materialProperty=n,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=r,this.closed=s,this.shadows=a,this.updaters=new i.Z,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.Z,this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new i.Z,this.attributes=new i.Z,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(v.prototype.onMaterialChanged,this),this.subscriptions=new i.Z,this.showsUpdated=new i.Z}v.prototype.onMaterialChanged=function(){this.invalidated=!0},v.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty,i=this.depthFailMaterialProperty,o=e.depthFailMaterialProperty;if(n===t&&o===i)return!0;let r=(0,a.Z)(t)&&t.equals(n);return r=(!(0,a.Z)(i)&&!(0,a.Z)(o)||(0,a.Z)(i)&&i.equals(o))&&r,r},v.prototype.add=function(e,t){const n=t.id;if(this.updaters.set(n,t),this.geometry.set(n,t.createFillGeometryInstance(e)),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&_.Z.isConstant(t.distanceDisplayConditionProperty)&&_.Z.isConstant(t.terrainOffsetProperty)){const e=this;this.subscriptions.set(n,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(n,t);this.createPrimitive=!0},v.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.Z)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1};const A=new r.Z;function T(e,t,n,i,o){this._items=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}v.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives,f=this.geometry.values;let v;if(this.createPrimitive){if(f.length>0){let o;(0,a.Z)(n)&&((0,a.Z)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=m.Z.getValue(e,this.materialProperty,this.material),(0,a.Z)(this.depthFailMaterialProperty)&&(this.depthFailMaterial=m.Z.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),o=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),n=new h.Z({show:!1,asynchronous:!0,geometryInstances:f.slice(),appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:o,shadows:this.shadows}),i.add(n),t=!1}else{(0,a.Z)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,a.Z)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,a.Z)(n)&&n.ready){n.show=!0,(0,a.Z)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=m.Z.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material,!(0,a.Z)(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof p.Z||(this.depthFailMaterial=m.Z.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const t=this.updatersWithAttributes.values,h=t.length;for(v=0;v<h;v++){const i=t[v],h=i.entity,f=this.geometry.get(i.id);let m=this.attributes.get(f.id.id);if((0,a.Z)(m)||(m=n.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,m)),(0,a.Z)(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof p.Z&&!i.depthFailMaterialProperty.isConstant){const t=i.depthFailMaterialProperty.color,n=_.Z.getValueOrDefault(t,e,r.Z.WHITE,A);r.Z.equals(m._lastDepthFailColor,n)||(m._lastDepthFailColor=r.Z.clone(n,m._lastDepthFailColor),m.depthFailColor=s.Z.toValue(n,m.depthFailColor))}const T=h.isShowing&&(i.hasConstantFill||i.isFilled(e));T!==(1===m.show[0])&&(m.show=d.Z.toValue(T,m.show));const w=i.distanceDisplayConditionProperty;if(!_.Z.isConstant(w)){const t=_.Z.getValueOrDefault(w,e,Z,g);c.Z.equals(t,m._lastDistanceDisplayCondition)||(m._lastDistanceDisplayCondition=c.Z.clone(t,m._lastDistanceDisplayCondition),m.distanceDisplayCondition=l.Z.toValue(t,m.distanceDisplayCondition))}const E=i.terrainOffsetProperty;if(!_.Z.isConstant(E)){const t=_.Z.getValueOrDefault(E,e,y,b);o.Z.equals(t,m._lastOffset)||(m._lastOffset=o.Z.clone(t,m._lastOffset),m.offset=u.Z.toValue(t,m.offset))}}this.updateShows(n)}else(0,a.Z)(n)&&!n.ready&&(t=!1);return t},v.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,r=this.geometry.get(n.id);let s=this.attributes.get(r.id.id);(0,a.Z)(s)||(s=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,s));const c=o.isShowing;c!==(1===s.show[0])&&(s.show=d.Z.toValue(c,s.show),r.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(e){return this.updaters.contains(e.id)},v.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return f.Z.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.Z)(i)||!(0,a.Z)(i.boundingSphere)||(0,a.Z)(i.show)&&0===i.show[0]?f.Z.FAILED:(i.boundingSphere.clone(t),f.Z.DONE)},v.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,a.Z)(e)&&t.remove(e);const n=this.oldPrimitive;(0,a.Z)(n)&&t.remove(n),this.removeMaterialSubscription()},T.prototype.add=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.isMaterial(t))return void i.add(e,t)}const o=new v(this._primitives,this._appearanceType,t.fillMaterialProperty,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);o.add(e,t),n.push(o)},T.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.remove(e)){0===i.updaters.length&&(t.splice(n,1),i.destroy());break}}},T.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},T.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return f.Z.FAILED},T.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const w=T},617726:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(781382),o=n(35961),r=n(376213),s=n(11020),a=n(6821),c=n(669327),l=n(489381),u=n(604274),d=n(657528),h=n(916269),f=n(466294);const p=new o.Z,m=new a.Z,_=new a.Z;function g(e,t,n,o){this.primitives=e,this.zIndex=o,this.classificationType=t,this.color=n,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.Z,this.updaters=new i.Z,this.updatersWithAttributes=new i.Z,this.attributes=new i.Z,this.subscriptions=new i.Z,this.showsUpdated=new i.Z,this.itemsToRemove=[],this.isDirty=!1,this.rectangleCollisionCheck=new f.Z}function Z(e,t){this._batches=[],this._primitives=e,this._classificationType=t}g.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)},g.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),this.rectangleCollisionCheck.insert(n,t.geometry.rectangle),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&h.Z.isConstant(e.distanceDisplayConditionProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},g.prototype.remove=function(e){const t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,s.Z)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},g.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives;let d;if(this.createPrimitive){const e=this.geometry.values;if(e.length>0)(0,s.Z)(n)&&((0,s.Z)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),n=new u.Z({show:!1,asynchronous:!0,geometryInstances:e.slice(),classificationType:this.classificationType}),i.add(n,this.zIndex),t=!1;else{(0,s.Z)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,s.Z)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,s.Z)(n)&&n.ready){n.show=!0,(0,s.Z)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0);const t=this.updatersWithAttributes.values,u=t.length,f=this.waitingOnCreate;for(d=0;d<u;d++){const i=t[d],u=this.geometry.get(i.id);let g=this.attributes.get(u.id.id);if((0,s.Z)(g)||(g=n.getGeometryInstanceAttributes(u.id),this.attributes.set(u.id.id,g)),!i.fillMaterialProperty.isConstant||f){const t=i.fillMaterialProperty.color,n=h.Z.getValueOrDefault(t,e,o.Z.WHITE,p);o.Z.equals(g._lastColor,n)||(g._lastColor=o.Z.clone(n,g._lastColor),g.color=r.Z.toValue(n,g.color))}const Z=i.entity.isShowing&&(i.hasConstantFill||i.isFilled(e));Z!==(1===g.show[0])&&(g.show=l.Z.toValue(Z,g.show));const y=i.distanceDisplayConditionProperty;if(!h.Z.isConstant(y)){const t=h.Z.getValueOrDefault(y,e,_,m);a.Z.equals(t,g._lastDistanceDisplayCondition)||(g._lastDistanceDisplayCondition=a.Z.clone(t,g._lastDistanceDisplayCondition),g.distanceDisplayCondition=c.Z.toValue(t,g.distanceDisplayCondition))}}this.updateShows(n),this.waitingOnCreate=!1}else(0,s.Z)(n)&&!n.ready&&(t=!1);return this.itemsToRemove.length=0,t},g.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,s.Z)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const a=n.entity.isShowing;a!==(1===r.show[0])&&(r.show=l.Z.toValue(a,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},g.prototype.contains=function(e){return this.updaters.contains(e.id)},g.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return d.Z.PENDING;const i=n.getBoundingSphere(e.entity);return(0,s.Z)(i)?(i.clone(t),d.Z.DONE):d.Z.FAILED},g.prototype.removeAllPrimitives=function(){const e=this.primitives,t=this.primitive;(0,s.Z)(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const n=this.oldPrimitive;(0,s.Z)(n)&&(e.remove(n),this.oldPrimitive=void 0)},Z.prototype.add=function(e,t){const n=t.createFillGeometryInstance(e),i=this._batches,o=h.Z.getValueOrDefault(t.zIndex,0);let r;const a=i.length;for(let e=0;e<a;++e){const t=i[e];if(t.zIndex===o&&!t.overlapping(n.geometry.rectangle)){r=t;break}}return(0,s.Z)(r)||(r=new g(this._primitives,this._classificationType,n.attributes.color.value,o),i.push(r)),r.add(t,n),r},Z.prototype.remove=function(e){const t=this._batches,n=t.length;for(let i=0;i<n;++i)if(t[i].remove(e))return},Z.prototype.update=function(e){let t,n,i=!0;const o=this._batches,r=o.length;for(t=0;t<r;++t)i=o[t].update(e)&&i;for(t=0;t<r;++t){const i=o[t],r=i.itemsToRemove,s=r.length;for(let t=0;t<s;t++){n=r[t],i.remove(n);const o=this.add(e,n);i.isDirty=!0,o.isDirty=!0}}for(t=r-1;t>=0;--t){const n=o[t];n.isDirty&&(i=o[t].update(e)&&i,n.isDirty=!1),0===n.geometry.length&&o.splice(t,1)}return i},Z.prototype.getBoundingSphere=function(e,t){const n=this._batches,i=n.length;for(let o=0;o<i;++o){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return d.Z.FAILED},Z.prototype.removeAllPrimitives=function(){const e=this._batches,t=e.length;for(let n=0;n<t;++n)e[n].removeAllPrimitives()};const y=Z},29961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(781382),o=n(11020),r=n(6821),s=n(669327),a=n(466294),c=n(489381),l=n(604274),u=n(773983),d=n(657528),h=n(731458),f=n(121221),p=n(916269);const m=new r.Z,_=new r.Z;function g(e,t,n,o,r,s){this.primitives=e,this.classificationType=t,this.appearanceType=n,this.materialProperty=o,this.updaters=new i.Z,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.Z,this.material=void 0,this.updatersWithAttributes=new i.Z,this.attributes=new i.Z,this.invalidated=!1,this.removeMaterialSubscription=o.definitionChanged.addEventListener(g.prototype.onMaterialChanged,this),this.subscriptions=new i.Z,this.showsUpdated=new i.Z,this.usingSphericalTextureCoordinates=r,this.zIndex=s,this.rectangleCollisionCheck=new a.Z}function Z(e,t,n){this._items=[],this._primitives=e,this._classificationType=t,this._appearanceType=n}g.prototype.onMaterialChanged=function(){this.invalidated=!0},g.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)},g.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof h.Z&&t instanceof h.Z||(0,o.Z)(t)&&t.equals(n)},g.prototype.add=function(e,t,n){const i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),this.rectangleCollisionCheck.insert(i,n.geometry.rectangle),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&p.Z.isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t);this.createPrimitive=!0},g.prototype.remove=function(e){const t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,o.Z)(e)&&(e(),this.subscriptions.remove(t)),!0}return!1},g.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives,a=this.geometry.values;let u;if(this.createPrimitive){if(a.length>0)(0,o.Z)(n)&&((0,o.Z)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=f.Z.getValue(e,this.materialProperty,this.material),n=new l.Z({show:!1,asynchronous:!0,geometryInstances:a.slice(),appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),i.add(n,this.zIndex),t=!1;else{(0,o.Z)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,o.Z)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,o.Z)(n)&&n.ready){n.show=!0,(0,o.Z)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=f.Z.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material;const t=this.updatersWithAttributes.values,a=t.length;for(u=0;u<a;u++){const i=t[u],a=i.entity,l=this.geometry.get(i.id);let d=this.attributes.get(l.id.id);(0,o.Z)(d)||(d=n.getGeometryInstanceAttributes(l.id),this.attributes.set(l.id.id,d));const h=a.isShowing&&(i.hasConstantFill||i.isFilled(e));h!==(1===d.show[0])&&(d.show=c.Z.toValue(h,d.show));const f=i.distanceDisplayConditionProperty;if(!p.Z.isConstant(f)){const t=p.Z.getValueOrDefault(f,e,_,m);r.Z.equals(t,d._lastDistanceDisplayCondition)||(d._lastDistanceDisplayCondition=r.Z.clone(t,d._lastDistanceDisplayCondition),d.distanceDisplayCondition=s.Z.toValue(t,d.distanceDisplayCondition))}}this.updateShows(n)}else(0,o.Z)(n)&&!n.ready&&(t=!1);return t},g.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],r=n.entity,s=this.geometry.get(n.id);let a=this.attributes.get(s.id.id);(0,o.Z)(a)||(a=e.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,a));const l=r.isShowing;l!==(1===a.show[0])&&(a.show=c.Z.toValue(l,a.show),s.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},g.prototype.contains=function(e){return this.updaters.contains(e.id)},g.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return d.Z.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,o.Z)(i)||!(0,o.Z)(i.boundingSphere)||(0,o.Z)(i.show)&&0===i.show[0]?d.Z.FAILED:(i.boundingSphere.clone(t),d.Z.DONE)},g.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,o.Z)(e)&&t.remove(e);const n=this.oldPrimitive;(0,o.Z)(n)&&t.remove(n),this.removeMaterialSubscription()},Z.prototype.add=function(e,t){const n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=u.Z.shouldUseSphericalCoordinates(o.geometry.rectangle),s=p.Z.getValueOrDefault(t.zIndex,0);for(let a=0;a<i;++a){const i=n[a];if(i.isMaterial(t)&&i.usingSphericalTextureCoordinates===r&&i.zIndex===s&&!i.overlapping(o.geometry.rectangle))return void i.add(e,t,o)}const a=new g(this._primitives,this._classificationType,this._appearanceType,t.fillMaterialProperty,r,s);a.add(e,t,o),n.push(a)},Z.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.remove(e)){0===i.updaters.length&&(t.splice(n,1),i.destroy());break}}},Z.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},Z.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return d.Z.FAILED},Z.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const y=Z},206484:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(781382),o=n(35961),r=n(376213),s=n(234146),a=n(11020),c=n(6821),l=n(669327),u=n(489381),d=n(958913),h=n(396324),f=n(44799),p=n(657528),m=n(731458),_=n(121221),g=n(916269);const Z=new o.Z,y=new c.Z,b=new c.Z;function v(e,t,n,o,r){let s;s=n instanceof m.Z?h.Z:f.Z,this.orderedGroundPrimitives=e,this.classificationType=t,this.appearanceType=s,this.materialProperty=n,this.updaters=new i.Z,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.Z,this.material=void 0,this.updatersWithAttributes=new i.Z,this.attributes=new i.Z,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(v.prototype.onMaterialChanged,this),this.subscriptions=new i.Z,this.showsUpdated=new i.Z,this.zIndex=o,this._asynchronous=r}function A(e,t,n){this._items=[],this._orderedGroundPrimitives=e,this._classificationType=t,this._asynchronous=(0,s.Z)(n,!0)}v.prototype.onMaterialChanged=function(){this.invalidated=!0},v.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof m.Z&&t instanceof m.Z||(0,a.Z)(t)&&t.equals(n)},v.prototype.add=function(e,t,n){const i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&g.Z.isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t);this.createPrimitive=!0},v.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.Z)(e)&&(e(),this.subscriptions.remove(t)),!0}return!1},v.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.orderedGroundPrimitives,s=this.geometry.values;let h;if(this.createPrimitive){if(s.length>0)(0,a.Z)(n)&&((0,a.Z)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),n=new d.Z({show:!1,asynchronous:this._asynchronous,geometryInstances:s.slice(),appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===f.Z&&(this.material=_.Z.getValue(e,this.materialProperty,this.material),n.appearance.material=this.material),i.add(n,this.zIndex),t=!1;else{(0,a.Z)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,a.Z)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,a.Z)(n)&&n.ready){n.show=!0,(0,a.Z)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===f.Z&&(this.material=_.Z.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material);const t=this.updatersWithAttributes.values,s=t.length;for(h=0;h<s;h++){const i=t[h],s=i.entity,d=this.geometry.get(i.id);let f=this.attributes.get(d.id.id);if((0,a.Z)(f)||(f=n.getGeometryInstanceAttributes(d.id),this.attributes.set(d.id.id,f)),!i.fillMaterialProperty.isConstant){const t=i.fillMaterialProperty.color,n=g.Z.getValueOrDefault(t,e,o.Z.WHITE,Z);o.Z.equals(f._lastColor,n)||(f._lastColor=o.Z.clone(n,f._lastColor),f.color=r.Z.toValue(n,f.color))}const p=s.isShowing&&(i.hasConstantFill||i.isFilled(e));p!==(1===f.show[0])&&(f.show=u.Z.toValue(p,f.show));const m=i.distanceDisplayConditionProperty;if(!g.Z.isConstant(m)){const t=g.Z.getValueOrDefault(m,e,b,y);c.Z.equals(t,f._lastDistanceDisplayCondition)||(f._lastDistanceDisplayCondition=c.Z.clone(t,f._lastDistanceDisplayCondition),f.distanceDisplayCondition=l.Z.toValue(t,f.distanceDisplayCondition))}}this.updateShows(n)}else(0,a.Z)(n)&&!n.ready&&(t=!1);return t},v.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,r=this.geometry.get(n.id);let s=this.attributes.get(r.id.id);(0,a.Z)(s)||(s=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,s));const c=o.isShowing;c!==(1===s.show[0])&&(s.show=u.Z.toValue(c,s.show),r.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(e){return this.updaters.contains(e.id)},v.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return p.Z.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.Z)(i)||!(0,a.Z)(i.boundingSphere)||(0,a.Z)(i.show)&&0===i.show[0]?p.Z.FAILED:(i.boundingSphere.clone(t),p.Z.DONE)},v.prototype.destroy=function(){const e=this.primitive,t=this.orderedGroundPrimitives;(0,a.Z)(e)&&t.remove(e);const n=this.oldPrimitive;(0,a.Z)(n)&&t.remove(n),this.removeMaterialSubscription()},A.prototype.add=function(e,t){const n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=g.Z.getValueOrDefault(t.zIndex,0);for(let s=0;s<i;++s){const i=n[s];if(i.isMaterial(t)&&i.zIndex===r)return void i.add(e,t,o)}const s=new v(this._orderedGroundPrimitives,this._classificationType,t.fillMaterialProperty,r,this._asynchronous);s.add(e,t,o),n.push(s)},A.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.remove(e)){0===i.updaters.length&&(t.splice(n,1),i.destroy());break}}},A.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},A.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return p.Z.FAILED},A.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const T=A},953988:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(781382),o=n(660904),r=n(35961),s=n(376213),a=n(11020),c=n(6821),l=n(669327),u=n(630114),d=n(489381),h=n(104763),f=n(759398),p=n(657528),m=n(916269);const _=new r.Z,g=new c.Z,Z=new c.Z,y=o.Z.ZERO,b=new o.Z;function v(e,t,n,o){this.translucent=t,this.width=n,this.shadows=o,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.Z,this.updaters=new i.Z,this.updatersWithAttributes=new i.Z,this.attributes=new i.Z,this.itemsToRemove=[],this.subscriptions=new i.Z,this.showsUpdated=new i.Z}function A(e,t,n){this._primitives=e,this._scene=t,this._shadows=n,this._solidBatches=new i.Z,this._translucentBatches=new i.Z}v.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),e.hasConstantOutline&&e.outlineColorProperty.isConstant&&m.Z.isConstant(e.distanceDisplayConditionProperty)&&m.Z.isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},v.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.Z)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},v.prototype.update=function(e){let t=!0,n=0,i=this.primitive;const p=this.primitives;let v;if(this.createPrimitive){const e=this.geometry.values;if(e.length>0)(0,a.Z)(i)&&((0,a.Z)(this.oldPrimitive)?p.remove(i):this.oldPrimitive=i),i=new f.Z({show:!1,asynchronous:!0,geometryInstances:e.slice(),appearance:new h.Z({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),p.add(i),t=!1;else{(0,a.Z)(i)&&(p.remove(i),i=void 0);const e=this.oldPrimitive;(0,a.Z)(e)&&(p.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,a.Z)(i)&&i.ready){i.show=!0,(0,a.Z)(this.oldPrimitive)&&(p.remove(this.oldPrimitive),this.oldPrimitive=void 0);const t=this.updatersWithAttributes.values,h=t.length,f=this.waitingOnCreate;for(v=0;v<h;v++){const h=t[v],p=this.geometry.get(h.id);let A=this.attributes.get(p.id.id);if((0,a.Z)(A)||(A=i.getGeometryInstanceAttributes(p.id),this.attributes.set(p.id.id,A)),!h.outlineColorProperty.isConstant||f){const t=h.outlineColorProperty,i=m.Z.getValueOrDefault(t,e,r.Z.WHITE,_);r.Z.equals(A._lastColor,i)||(A._lastColor=r.Z.clone(i,A._lastColor),A.color=s.Z.toValue(i,A.color),(this.translucent&&255===A.color[3]||!this.translucent&&255!==A.color[3])&&(this.itemsToRemove[n++]=h))}const T=h.entity.isShowing&&(h.hasConstantOutline||h.isOutlineVisible(e));T!==(1===A.show[0])&&(A.show=d.Z.toValue(T,A.show));const w=h.distanceDisplayConditionProperty;if(!m.Z.isConstant(w)){const t=m.Z.getValueOrDefault(w,e,Z,g);c.Z.equals(t,A._lastDistanceDisplayCondition)||(A._lastDistanceDisplayCondition=c.Z.clone(t,A._lastDistanceDisplayCondition),A.distanceDisplayCondition=l.Z.toValue(t,A.distanceDisplayCondition))}const E=h.terrainOffsetProperty;if(!m.Z.isConstant(E)){const t=m.Z.getValueOrDefault(E,e,y,b);o.Z.equals(t,A._lastOffset)||(A._lastOffset=o.Z.clone(t,A._lastOffset),A.offset=u.Z.toValue(t,A.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else(0,a.Z)(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},v.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,a.Z)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const s=n.entity.isShowing;s!==(1===r.show[0])&&(r.show=d.Z.toValue(s,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(e){return this.updaters.contains(e.id)},v.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return p.Z.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.Z)(i)||!(0,a.Z)(i.boundingSphere)||(0,a.Z)(i.show)&&0===i.show[0]?p.Z.FAILED:(i.boundingSphere.clone(t),p.Z.DONE)},v.prototype.removeAllPrimitives=function(){const e=this.primitives,t=this.primitive;(0,a.Z)(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const n=this.oldPrimitive;(0,a.Z)(n)&&(e.remove(n),this.oldPrimitive=void 0)},A.prototype.add=function(e,t){const n=t.createOutlineGeometryInstance(e),i=this._scene.clampLineWidth(t.outlineWidth);let o,r;255===n.attributes.color.value[3]?(o=this._solidBatches,r=o.get(i),(0,a.Z)(r)||(r=new v(this._primitives,!1,i,this._shadows),o.set(i,r)),r.add(t,n)):(o=this._translucentBatches,r=o.get(i),(0,a.Z)(r)||(r=new v(this._primitives,!0,i,this._shadows),o.set(i,r)),r.add(t,n))},A.prototype.remove=function(e){let t;const n=this._solidBatches.values,i=n.length;for(t=0;t<i;t++)if(n[t].remove(e))return;const o=this._translucentBatches.values,r=o.length;for(t=0;t<r;t++)if(o[t].remove(e))return},A.prototype.update=function(e){let t,n,i,o;const r=this._solidBatches.values,s=r.length,a=this._translucentBatches.values,c=a.length;let l,u=!0,d=!1;do{for(d=!1,n=0;n<s;n++){o=r[n],u=o.update(e),l=o.itemsToRemove;const s=l.length;if(s>0)for(d=!0,t=0;t<s;t++)i=l[t],o.remove(i),this.add(e,i)}for(n=0;n<c;n++){o=a[n],u=o.update(e),l=o.itemsToRemove;const r=l.length;if(r>0)for(d=!0,t=0;t<r;t++)i=l[t],o.remove(i),this.add(e,i)}}while(d);return u},A.prototype.getBoundingSphere=function(e,t){let n;const i=this._solidBatches.values,o=i.length;for(n=0;n<o;n++){const o=i[n];if(o.contains(e))return o.getBoundingSphere(e,t)}const r=this._translucentBatches.values,s=r.length;for(n=0;n<s;n++){const i=r[n];if(i.contains(e))return i.getBoundingSphere(e,t)}return p.Z.FAILED},A.prototype.removeAllPrimitives=function(){let e;const t=this._solidBatches.values,n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._translucentBatches.values,o=i.length;for(e=0;e<o;e++)i[e].removeAllPrimitives()};const T=A},47046:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(660904),o=n(532056),r=n(790087),s=n(11020),a=n(722313),c=n(282910),l=n(551332),u=n(344485),d=n(990778),h=n(714233),f=n(916269);const p=new i.Z,m=new o.Z;function _(e,t,n,a){r.Z.defined("scene",e),r.Z.defined("positionProperty",t),this._scene=e,this._heightReference=n,this._extrudedHeightReference=a,this._positionProperty=t,this._position=new i.Z,this._cartographicPosition=new o.Z,this._normal=new i.Z,this._definitionChanged=new c.Z,this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;const u=this;if((0,s.Z)(e.globe)&&(this._removeEventListener=e.terrainProviderChanged.addEventListener((function(){u._updateClamping()})),this._removeModeListener=e.morphComplete.addEventListener((function(){u._updateClamping()}))),t.isConstant){const n=t.getValue(l.Z.MINIMUM_VALUE,p);if(!(0,s.Z)(n)||i.Z.equals(n,i.Z.ZERO)||!(0,s.Z)(e.globe))return;this._position=i.Z.clone(n,this._position),this._updateClamping(),this._normal=e.globe.ellipsoid.geodeticSurfaceNormal(n,this._normal)}}Object.defineProperties(_.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),_.prototype._updateClamping=function(){(0,s.Z)(this._removeCallbackFunc)&&this._removeCallbackFunc();const e=this._scene,t=e.globe,n=this._position;if(!(0,s.Z)(t)||i.Z.equals(n,i.Z.ZERO))return void(this._terrainHeight=0);const o=t.ellipsoid,r=t._surface,a=this,c=o.cartesianToCartographic(n,this._cartographicPosition),l=t.getHeight(c);(0,s.Z)(l)?this._terrainHeight=l:this._terrainHeight=0,this._removeCallbackFunc=r.updateHeight(c,(function(t){if(e.mode===h.Z.SCENE3D){const e=o.cartesianToCartographic(t,m);a._terrainHeight=e.height}else a._terrainHeight=t.x;a.definitionChanged.raiseEvent()}))},_.prototype.getValue=function(e,t){const n=f.Z.getValueOrDefault(this._heightReference,e,d.Z.NONE),o=f.Z.getValueOrDefault(this._extrudedHeightReference,e,d.Z.NONE);if(n===d.Z.NONE&&o!==d.Z.RELATIVE_TO_GROUND)return this._position=i.Z.clone(i.Z.ZERO,this._position),i.Z.clone(i.Z.ZERO,t);if(this._positionProperty.isConstant)return i.Z.multiplyByScalar(this._normal,this._terrainHeight,t);const r=this._scene,a=this._positionProperty.getValue(e,p);if(!(0,s.Z)(a)||i.Z.equals(a,i.Z.ZERO)||!(0,s.Z)(r.globe))return i.Z.clone(i.Z.ZERO,t);if(i.Z.equalsEpsilon(this._position,a,u.Z.EPSILON10))return i.Z.multiplyByScalar(this._normal,this._terrainHeight,t);this._position=i.Z.clone(a,this._position),this._updateClamping();const c=r.globe.ellipsoid.geodeticSurfaceNormal(a,this._normal);return i.Z.multiplyByScalar(c,this._terrainHeight,t)},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return(0,s.Z)(this._removeEventListener)&&this._removeEventListener(),(0,s.Z)(this._removeModeListener)&&this._removeModeListener(),(0,s.Z)(this._removeCallbackFunc)&&this._removeCallbackFunc(),(0,a.Z)(this)};const g=_},251142:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(234146),o=n(11020),r=n(765153),s=n(282910),a=n(803994),c=n(691156),l=n(529343),u=n(916269);function d(e){this._definitionChanged=new s.Z,this._intervals=new c.Z,this._intervals.changedEvent.addEventListener(d.prototype._intervalsChanged,this),this._referenceFrame=(0,i.Z)(e,a.Z.FIXED)}Object.defineProperties(d.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}}),d.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,a.Z.FIXED,t)},d.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,o.Z)(e))throw new r.Z("time is required.");if(!(0,o.Z)(t))throw new r.Z("referenceFrame is required.");const i=this._intervals.findDataForIntervalContainingDate(e);if((0,o.Z)(i))return l.Z.convertToReferenceFrame(e,i,this._referenceFrame,t,n)},d.prototype.equals=function(e){return this===e||e instanceof d&&this._intervals.equals(e._intervals,u.Z.equals)&&this._referenceFrame===e._referenceFrame},d.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};const h=d},830394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(790087),o=n(35961),r=n(376213),s=n(11020),a=n(765153),c=n(669327),l=n(156905),u=n(551332),d=n(489381),h=n(412058),f=n(111567),p=n(71880),m=n(104763),_=n(731458),g=n(452741),Z=n(674842),y=n(916269);const b=new o.Z;function v(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function A(e,t){Z.Z.call(this,{entity:e,scene:t,geometryOptions:new v(e),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(e,"wall",e.wall,void 0)}function T(e,t,n){g.Z.call(this,e,t,n)}(0,s.Z)(Object.create)&&(A.prototype=Object.create(Z.Z.prototype),A.prototype.constructor=A),A.prototype.createFillGeometryInstance=function(e){if(i.Z.defined("time",e),!this._fillEnabled)throw new a.Z("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let u,f;const p=new d.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),m=this._distanceDisplayConditionProperty.getValue(e),g=c.Z.fromDistanceDisplayCondition(m);if(this._materialProperty instanceof _.Z){let t;(0,s.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,b)),(0,s.Z)(t)||(t=o.Z.WHITE),f=r.Z.fromColor(t),u={show:p,distanceDisplayCondition:g,color:f}}else u={show:p,distanceDisplayCondition:g};return new l.Z({id:t,geometry:new h.Z(this._options),attributes:u})},A.prototype.createOutlineGeometryInstance=function(e){if(i.Z.defined("time",e),!this._outlineEnabled)throw new a.Z("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),s=y.Z.getValueOrDefault(this._outlineColorProperty,e,o.Z.BLACK,b),u=this._distanceDisplayConditionProperty.getValue(e);return new l.Z({id:t,geometry:new f.Z(this._options),attributes:{show:new d.Z(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:r.Z.fromColor(s),distanceDisplayCondition:c.Z.fromDistanceDisplayCondition(u)}})},A.prototype._isHidden=function(e,t){return!(0,s.Z)(t.positions)||Z.Z.prototype._isHidden.call(this,e,t)},A.prototype._getIsClosed=function(e){return!1},A.prototype._isDynamic=function(e,t){return!(t.positions.isConstant&&y.Z.isConstant(t.minimumHeights)&&y.Z.isConstant(t.maximumHeights)&&y.Z.isConstant(t.outlineWidth)&&y.Z.isConstant(t.granularity))},A.prototype._setStaticOptions=function(e,t){const n=t.minimumHeights,i=t.maximumHeights,o=t.granularity,r=this._materialProperty instanceof _.Z,a=this._options;a.vertexFormat=r?m.Z.VERTEX_FORMAT:p.Z.MaterialSupport.TEXTURED.vertexFormat,a.positions=t.positions.getValue(u.Z.MINIMUM_VALUE,a.positions),a.minimumHeights=(0,s.Z)(n)?n.getValue(u.Z.MINIMUM_VALUE,a.minimumHeights):void 0,a.maximumHeights=(0,s.Z)(i)?i.getValue(u.Z.MINIMUM_VALUE,a.maximumHeights):void 0,a.granularity=(0,s.Z)(o)?o.getValue(u.Z.MINIMUM_VALUE):void 0},A.DynamicGeometryUpdater=T,(0,s.Z)(Object.create)&&(T.prototype=Object.create(g.Z.prototype),T.prototype.constructor=T),T.prototype._isHidden=function(e,t,n){return!(0,s.Z)(this._options.positions)||g.Z.prototype._isHidden.call(this,e,t,n)},T.prototype._setOptions=function(e,t,n){const i=this._options;i.positions=y.Z.getValueOrUndefined(t.positions,n,i.positions),i.minimumHeights=y.Z.getValueOrUndefined(t.minimumHeights,n,i.minimumHeights),i.maximumHeights=y.Z.getValueOrUndefined(t.maximumHeights,n,i.maximumHeights),i.granularity=y.Z.getValueOrUndefined(t.granularity,n)};const w=A},902299:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(765153);const o=function(e){if("string"==typeof e){const t=document.getElementById(e);if(null===t)throw new i.Z(`Element with id "${e}" does not exist in the document.`);e=t}return e}},628353:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11020),o=n(484297),r=n(674842),s=n(47046);const a=function(e,t,n,a){if(r.Z.prototype._onEntityPropertyChanged.call(this,e,t,n,a),-1===this._observedPropertyNames.indexOf(t))return;const c=this._entity[this._geometryPropertyName];if(!(0,i.Z)(c))return;(0,i.Z)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const l=c.heightReference;if((0,i.Z)(l)){const e=new o.Z(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new s.Z(this._scene,e,l)}}},598020:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(35961),o=n(234146);function r(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this.color=e.color,this.depth=e.depth,this.stencil=e.stencil,this.renderState=e.renderState,this.framebuffer=e.framebuffer,this.owner=e.owner,this.pass=e.pass}r.ALL=Object.freeze(new r({color:new i.Z(0,0,0,0),depth:1,stencil:0})),r.prototype.execute=function(e,t){e.clear(this,t)};const s=r},673314:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(234146),o=n(431056);function r(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),this.vertexArray=e.vertexArray,this.fragmentShaderSource=e.fragmentShaderSource,this.shaderProgram=e.shaderProgram,this.uniformMap=e.uniformMap,this.outputTexture=e.outputTexture,this.preExecute=e.preExecute,this.postExecute=e.postExecute,this.canceled=e.canceled,this.persists=(0,i.Z)(e.persists,!1),this.pass=o.Z.COMPUTE,this.owner=e.owner}r.prototype.execute=function(e){e.execute(this)};const s=r},759304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(890828),o=n(790087),r=n(35961),s=n(11020),a=n(722313),c=n(765153),l=n(804868),u=n(215432),d=n(598020),h=n(661679),f=n(707258),p=n(417148),m=n(161632);function _(e){this._context=e}let g;const Z=new h.Z({primitiveType:l.Z.TRIANGLES}),y=new d.Z({color:new r.Z(0,0,0,0)});_.prototype.execute=function(e){if(o.Z.defined("computeCommand",e),(0,s.Z)(e.preExecute)&&e.preExecute(e),!(0,s.Z)(e.fragmentShaderSource)&&!(0,s.Z)(e.shaderProgram))throw new c.Z("computeCommand.fragmentShaderSource or computeCommand.shaderProgram is required.");o.Z.defined("computeCommand.outputTexture",e.outputTexture);const t=e.outputTexture,n=t.width,r=t.height,a=this._context,l=(0,s.Z)(e.vertexArray)?e.vertexArray:a.getViewportQuadVertexArray(),d=(0,s.Z)(e.shaderProgram)?e.shaderProgram:function(e,t){return m.Z.fromCache({context:e,vertexShaderSource:u.Z,fragmentShaderSource:t,attributeLocations:{position:0,textureCoordinates:1}})}(a,e.fragmentShaderSource),h=function(e,t){return new f.Z({context:e,colorTextures:[t],destroyAttachments:!1})}(a,t),_=function(e,t){return(0,s.Z)(g)&&g.viewport.width===e&&g.viewport.height===t||(g=p.Z.fromCache({viewport:new i.Z(0,0,e,t)})),g}(n,r),b=e.uniformMap,v=y;v.framebuffer=h,v.renderState=_,v.execute(a);const A=Z;A.vertexArray=l,A.renderState=_,A.shaderProgram=d,A.uniformMap=b,A.framebuffer=h,A.execute(a),h.destroy(),e.persists||(d.destroy(),(0,s.Z)(e.vertexArray)&&l.destroy()),(0,s.Z)(e.postExecute)&&e.postExecute(t)},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return(0,a.Z)(this)};const b=_},678216:(e,t,n)=>{"use strict";n.d(t,{Z:()=>W});var i=n(790087),o=n(35961),r=n(449809),s=n(973384),a=n(234146),c=n(11020),l=n(906439),u=n(722313),d=n(765153),h=n(87200),f=n(951775),p=n(684910),m=n(659635),_=n(430886),g=n(804868),Z=n(217066),y=n(248894),b=n(215432),v=n(915323),A=n(598020),T=n(591477),w=n(136525),E=n(661679),S=n(708800),C=n(545870),x=n(417148),I=n(341844),P=n(161632),D=n(609882),O=n(342617),L=n(422113),N=n(858371);function M(e,t){i.Z.defined("canvas",e);const{getWebGLStub:n,requestWebgl1:r,webgl:l={},allowTextureFilterAnisotropic:u=!0}=(0,a.Z)(t,{});l.alpha=(0,a.Z)(l.alpha,!1),l.stencil=(0,a.Z)(l.stencil,!0),l.powerPreference=(0,a.Z)(l.powerPreference,"high-performance");const d=(0,c.Z)(n)?n(e,l):function(e,t,n){if("undefined"==typeof WebGLRenderingContext)throw new Z.Z("The browser does not support WebGL.  Visit http://get.webgl.org.");const i="undefined"!=typeof WebGL2RenderingContext;n||i||(n=!0);const o=n?"webgl":"webgl2",r=e.getContext(o,t);if(!(0,c.Z)(r))throw new Z.Z("The browser supports WebGL, but initialization failed.");return r}(e,l,r),h="undefined"!=typeof WebGL2RenderingContext&&d instanceof WebGL2RenderingContext;this._canvas=e,this._originalGLContext=d,this._gl=d,this._webgl2=h,this._id=(0,s.Z)(),this.validateFramebuffer=!1,this.validateShaderProgram=!1,this.logShaderCompilation=!1,this._throwOnWebGLError=!1,this._shaderCache=new I.Z(this),this._textureCache=new O.Z;const f=d;this._stencilBits=f.getParameter(f.STENCIL_BITS),T.Z._maximumCombinedTextureImageUnits=f.getParameter(f.MAX_COMBINED_TEXTURE_IMAGE_UNITS),T.Z._maximumCubeMapSize=f.getParameter(f.MAX_CUBE_MAP_TEXTURE_SIZE),T.Z._maximumFragmentUniformVectors=f.getParameter(f.MAX_FRAGMENT_UNIFORM_VECTORS),T.Z._maximumTextureImageUnits=f.getParameter(f.MAX_TEXTURE_IMAGE_UNITS),T.Z._maximumRenderbufferSize=f.getParameter(f.MAX_RENDERBUFFER_SIZE),T.Z._maximumTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE),T.Z._maximumVaryingVectors=f.getParameter(f.MAX_VARYING_VECTORS),T.Z._maximumVertexAttributes=f.getParameter(f.MAX_VERTEX_ATTRIBS),T.Z._maximumVertexTextureImageUnits=f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T.Z._maximumVertexUniformVectors=f.getParameter(f.MAX_VERTEX_UNIFORM_VECTORS),T.Z._maximumSamples=this._webgl2?f.getParameter(f.MAX_SAMPLES):0;const m=f.getParameter(f.ALIASED_LINE_WIDTH_RANGE);T.Z._minimumAliasedLineWidth=m[0],T.Z._maximumAliasedLineWidth=m[1];const _=f.getParameter(f.ALIASED_POINT_SIZE_RANGE);T.Z._minimumAliasedPointSize=_[0],T.Z._maximumAliasedPointSize=_[1];const g=f.getParameter(f.MAX_VIEWPORT_DIMS);T.Z._maximumViewportWidth=g[0],T.Z._maximumViewportHeight=g[1];const b=f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT);T.Z._highpFloatSupported=0!==b.precision;const v=f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_INT);T.Z._highpIntSupported=0!==v.rangeMax,this._antialias=f.getContextAttributes().antialias,this._standardDerivatives=!!B(f,["OES_standard_derivatives"]),this._blendMinmax=!!B(f,["EXT_blend_minmax"]),this._elementIndexUint=!!B(f,["OES_element_index_uint"]),this._depthTexture=!!B(f,["WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),this._fragDepth=!!B(f,["EXT_frag_depth"]),this._debugShaders=B(f,["WEBGL_debug_shaders"]),this._textureFloat=!!B(f,["OES_texture_float"]),this._textureHalfFloat=!!B(f,["OES_texture_half_float"]),this._textureFloatLinear=!!B(f,["OES_texture_float_linear"]),this._textureHalfFloatLinear=!!B(f,["OES_texture_half_float_linear"]),this._colorBufferFloat=!!B(f,["EXT_color_buffer_float","WEBGL_color_buffer_float"]),this._floatBlend=!!B(f,["EXT_float_blend"]),this._colorBufferHalfFloat=!!B(f,["EXT_color_buffer_half_float"]),this._s3tc=!!B(f,["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"]),this._pvrtc=!!B(f,["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"]),this._astc=!!B(f,["WEBGL_compressed_texture_astc"]),this._etc=!!B(f,["WEBG_compressed_texture_etc"]),this._etc1=!!B(f,["WEBGL_compressed_texture_etc1"]),this._bc7=!!B(f,["EXT_texture_compression_bptc"]),p.Z.setKTX2SupportedFormats(this._s3tc,this._pvrtc,this._astc,this._etc,this._etc1,this._bc7);const A=u?B(f,["EXT_texture_filter_anisotropic","WEBKIT_EXT_texture_filter_anisotropic"]):void 0;let w,E,C,P,D,N,M,R,F,U;if(this._textureFilterAnisotropic=A,T.Z._maximumTextureFilterAnisotropy=(0,c.Z)(A)?f.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1,h){const e=this;w=function(){return e._gl.createVertexArray()},E=function(t){e._gl.bindVertexArray(t)},C=function(t){e._gl.deleteVertexArray(t)},P=function(e,t,n,i,o){f.drawElementsInstanced(e,t,n,i,o)},D=function(e,t,n,i){f.drawArraysInstanced(e,t,n,i)},N=function(e,t){f.vertexAttribDivisor(e,t)},M=function(e){f.drawBuffers(e)}}else R=B(f,["OES_vertex_array_object"]),(0,c.Z)(R)&&(w=function(){return R.createVertexArrayOES()},E=function(e){R.bindVertexArrayOES(e)},C=function(e){R.deleteVertexArrayOES(e)}),F=B(f,["ANGLE_instanced_arrays"]),(0,c.Z)(F)&&(P=function(e,t,n,i,o){F.drawElementsInstancedANGLE(e,t,n,i,o)},D=function(e,t,n,i){F.drawArraysInstancedANGLE(e,t,n,i)},N=function(e,t){F.vertexAttribDivisorANGLE(e,t)}),U=B(f,["WEBGL_draw_buffers"]),(0,c.Z)(U)&&(M=function(e){U.drawBuffersWEBGL(e)});this.glCreateVertexArray=w,this.glBindVertexArray=E,this.glDeleteVertexArray=C,this.glDrawElementsInstanced=P,this.glDrawArraysInstanced=D,this.glVertexAttribDivisor=N,this.glDrawBuffers=M,this._vertexArrayObject=!!R,this._instancedArrays=!!F,this._drawBuffers=!!U,T.Z._maximumDrawBuffers=this.drawBuffers?f.getParameter(y.Z.MAX_DRAW_BUFFERS):1,T.Z._maximumColorAttachments=this.drawBuffers?f.getParameter(y.Z.MAX_COLOR_ATTACHMENTS):1,this._clearColor=new o.Z(0,0,0,0),this._clearDepth=1,this._clearStencil=0;const k=new L.Z,V=new S.Z(this),H=x.Z.fromCache();this._defaultPassState=V,this._defaultRenderState=H,this._defaultTexture=void 0,this._defaultEmissiveTexture=void 0,this._defaultNormalTexture=void 0,this._defaultCubeMap=void 0,this._us=k,this._currentRenderState=H,this._currentPassState=V,this._currentFramebuffer=void 0,this._maxFrameTextureUnitIndex=0,this._vertexAttribDivisors=[],this._previousDrawInstanced=!1;for(let e=0;e<T.Z._maximumVertexAttributes;e++)this._vertexAttribDivisors.push(0);this._pickObjects={},this._nextPickColor=new Uint32Array(1),this.options={getWebGLStub:n,requestWebgl1:r,webgl:l,allowTextureFilterAnisotropic:u},this.cache={},x.Z.apply(f,H,V)}function R(e,t,n){const i=e.getError();if(i!==e.NO_ERROR)throw new Z.Z(function(e,t,n,i){let o=`${function(e,t){let n="WebGL Error:  ";switch(t){case e.INVALID_ENUM:n+="INVALID_ENUM";break;case e.INVALID_VALUE:n+="INVALID_VALUE";break;case e.INVALID_OPERATION:n+="INVALID_OPERATION";break;case e.OUT_OF_MEMORY:n+="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:n+="CONTEXT_LOST_WEBGL lost";break;default:n+=`Unknown (${t})`}return n}(e,i)}: ${t.name}(`;for(let e=0;e<n.length;++e)0!==e&&(o+=", "),o+=n[e];return o+=");",o}(e,t,n,i))}function F(e,t,n){return{get:function(){const i=e[t];return n(e,`get: ${t}`,i),e[t]},set:function(i){e[t]=i,n(e,`set: ${t}`,i)}}}function B(e,t){const n=t.length;for(let i=0;i<n;++i){const n=e.getExtension(t[i]);if(n)return n}}const U={};function k(e,t,n,i){const o=e._currentRenderState,r=e._currentPassState;e._currentRenderState=t,e._currentPassState=n,x.Z.partialApply(e._gl,o,t,r,n,i)}let V;function H(e,t){if(t!==e._currentFramebuffer){e._currentFramebuffer=t;let n=V;if((0,c.Z)(t))t._bind(),function(e){if(e.validateFramebuffer){const t=e._gl,n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE){let e;switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:e="Framebuffer is not complete.  Incomplete attachment: at least one attachment point with a renderbuffer or texture attached has its attached object no longer in existence or has an attached image with a width or height of zero, or the color attachment point has a non-color-renderable image attached, or the depth attachment point has a non-depth-renderable image attached, or the stencil attachment point has a non-stencil-renderable image attached.  Color-renderable formats include GL_RGBA4, GL_RGB5_A1, and GL_RGB565. GL_DEPTH_COMPONENT16 is the only depth-renderable format. GL_STENCIL_INDEX8 is the only stencil-renderable format.";break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:e="Framebuffer is not complete.  Incomplete dimensions: not all attached images have the same width and height.";break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:e="Framebuffer is not complete.  Missing attachment: no images are attached to the framebuffer.";break;case t.FRAMEBUFFER_UNSUPPORTED:e="Framebuffer is not complete.  Unsupported: the combination of internal formats of the attached images violates an implementation-dependent set of restrictions."}throw new d.Z(e)}}}(e),n=t._getActiveColorAttachments();else{const t=e._gl;t.bindFramebuffer(t.FRAMEBUFFER,null)}e.drawBuffers&&e.glDrawBuffers(n)}}Object.defineProperties(M.prototype,{id:{get:function(){return this._id}},webgl2:{get:function(){return this._webgl2}},canvas:{get:function(){return this._canvas}},shaderCache:{get:function(){return this._shaderCache}},textureCache:{get:function(){return this._textureCache}},uniformState:{get:function(){return this._us}},stencilBits:{get:function(){return this._stencilBits}},stencilBuffer:{get:function(){return this._stencilBits>=8}},antialias:{get:function(){return this._antialias}},msaa:{get:function(){return this._webgl2}},standardDerivatives:{get:function(){return this._standardDerivatives||this._webgl2}},floatBlend:{get:function(){return this._floatBlend}},blendMinmax:{get:function(){return this._blendMinmax||this._webgl2}},elementIndexUint:{get:function(){return this._elementIndexUint||this._webgl2}},depthTexture:{get:function(){return this._depthTexture||this._webgl2}},floatingPointTexture:{get:function(){return this._webgl2||this._textureFloat}},halfFloatingPointTexture:{get:function(){return this._webgl2||this._textureHalfFloat}},textureFloatLinear:{get:function(){return this._textureFloatLinear}},textureHalfFloatLinear:{get:function(){return this._webgl2&&this._textureFloatLinear||!this._webgl2&&this._textureHalfFloatLinear}},textureFilterAnisotropic:{get:function(){return!!this._textureFilterAnisotropic}},s3tc:{get:function(){return this._s3tc}},pvrtc:{get:function(){return this._pvrtc}},astc:{get:function(){return this._astc}},etc:{get:function(){return this._etc}},etc1:{get:function(){return this._etc1}},bc7:{get:function(){return this._bc7}},supportsBasis:{get:function(){return this._s3tc||this._pvrtc||this._astc||this._etc||this._etc1||this._bc7}},vertexArrayObject:{get:function(){return this._vertexArrayObject||this._webgl2}},fragmentDepth:{get:function(){return this._fragDepth||this._webgl2}},instancedArrays:{get:function(){return this._instancedArrays||this._webgl2}},colorBufferFloat:{get:function(){return this._colorBufferFloat}},colorBufferHalfFloat:{get:function(){return this._webgl2&&this._colorBufferFloat||!this._webgl2&&this._colorBufferHalfFloat}},drawBuffers:{get:function(){return this._drawBuffers||this._webgl2}},debugShaders:{get:function(){return this._debugShaders}},throwOnWebGLError:{get:function(){return this._throwOnWebGLError},set:function(e){this._throwOnWebGLError=e,this._gl=function(e,t){if(!(0,c.Z)(t))return e;function n(n){return function(){const i=n.apply(e,arguments);return t(e,n,arguments),i}}const i={};for(const o in e){const r=e[o];r instanceof Function?i[o]=n(r):Object.defineProperty(i,o,F(e,o,t))}return i}(this._originalGLContext,e?R:void 0)}},defaultTexture:{get:function(){return void 0===this._defaultTexture&&(this._defaultTexture=new D.Z({context:this,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])},flipY:!1})),this._defaultTexture}},defaultEmissiveTexture:{get:function(){return void 0===this._defaultEmissiveTexture&&(this._defaultEmissiveTexture=new D.Z({context:this,pixelFormat:_.Z.RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([0,0,0])},flipY:!1})),this._defaultEmissiveTexture}},defaultNormalTexture:{get:function(){return void 0===this._defaultNormalTexture&&(this._defaultNormalTexture=new D.Z({context:this,pixelFormat:_.Z.RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([128,128,255])},flipY:!1})),this._defaultNormalTexture}},defaultCubeMap:{get:function(){if(void 0===this._defaultCubeMap){const e={width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])};this._defaultCubeMap=new w.Z({context:this,source:{positiveX:e,negativeX:e,positiveY:e,negativeY:e,positiveZ:e,negativeZ:e},flipY:!1})}return this._defaultCubeMap}},drawingBufferHeight:{get:function(){return this._gl.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._gl.drawingBufferWidth}},defaultFramebuffer:{get:function(){return U}}}),"undefined"!=typeof WebGLRenderingContext&&(V=[y.Z.BACK]);const z=new A.Z;M.prototype.clear=function(e,t){e=(0,a.Z)(e,z),t=(0,a.Z)(t,this._defaultPassState);const n=this._gl;let i=0;const r=e.color,s=e.depth,l=e.stencil;(0,c.Z)(r)&&(o.Z.equals(this._clearColor,r)||(o.Z.clone(r,this._clearColor),n.clearColor(r.red,r.green,r.blue,r.alpha)),i|=n.COLOR_BUFFER_BIT),(0,c.Z)(s)&&(s!==this._clearDepth&&(this._clearDepth=s,n.clearDepth(s)),i|=n.DEPTH_BUFFER_BIT),(0,c.Z)(l)&&(l!==this._clearStencil&&(this._clearStencil=l,n.clearStencil(l)),i|=n.STENCIL_BUFFER_BIT),k(this,(0,a.Z)(e.renderState,this._defaultRenderState),t,!0),H(this,(0,a.Z)(e.framebuffer,t.framebuffer)),n.clear(i)},M.prototype.draw=function(e,t,n,o){i.Z.defined("drawCommand",e),i.Z.defined("drawCommand.shaderProgram",e._shaderProgram),t=(0,a.Z)(t,this._defaultPassState);const r=(0,a.Z)(e._framebuffer,t.framebuffer),s=(0,a.Z)(e._renderState,this._defaultRenderState);n=(0,a.Z)(n,e._shaderProgram),o=(0,a.Z)(o,e._uniformMap),function(e,t,n,i,o){if((0,c.Z)(t)&&o.depthTest&&o.depthTest.enabled&&!t.hasDepthAttachment)throw new d.Z("The depth test can not be enabled (drawCommand.renderState.depthTest.enabled) because the framebuffer (drawCommand.framebuffer) does not have a depth or depth-stencil renderbuffer.");H(e,t),k(e,o,n,!1),i._bind(),e._maxFrameTextureUnitIndex=Math.max(e._maxFrameTextureUnitIndex,i.maximumTextureUnitIndex)}(this,r,t,n,s),function(e,t,n,o){const r=t._primitiveType,s=t._vertexArray;let l=t._offset,u=t._count;const h=t.instanceCount;if(!g.Z.validate(r))throw new d.Z("drawCommand.primitiveType is required and must be valid.");if(i.Z.defined("drawCommand.vertexArray",s),i.Z.typeOf.number.greaterThanOrEquals("drawCommand.offset",l,0),(0,c.Z)(u)&&i.Z.typeOf.number.greaterThanOrEquals("drawCommand.count",u,0),i.Z.typeOf.number.greaterThanOrEquals("drawCommand.instanceCount",h,0),h>0&&!e.instancedArrays)throw new d.Z("Instanced arrays extension is not supported");e._us.model=(0,a.Z)(t._modelMatrix,m.Z.IDENTITY),n._setUniforms(o,e._us,e.validateShaderProgram),s._bind();const f=s.indexBuffer;(0,c.Z)(f)?(l*=f.bytesPerIndex,u=(0,a.Z)(u,f.numberOfIndices),0===h?e._gl.drawElements(r,u,f.indexDatatype,l):e.glDrawElementsInstanced(r,u,f.indexDatatype,l,h)):(u=(0,a.Z)(u,s.numberOfVertices),0===h?e._gl.drawArrays(r,l,u):e.glDrawArraysInstanced(r,l,u,h)),s._unBind()}(this,e,n,o)},M.prototype.endFrame=function(){const e=this._gl;e.useProgram(null),this._currentFramebuffer=void 0,e.bindFramebuffer(e.FRAMEBUFFER,null);const t=V;this.drawBuffers&&this.glDrawBuffers(t);const n=this._maxFrameTextureUnitIndex;this._maxFrameTextureUnitIndex=0;for(let t=0;t<n;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null)},M.prototype.readPixels=function(e){const t=this._gl;e=(0,a.Z)(e,a.Z.EMPTY_OBJECT);const n=Math.max((0,a.Z)(e.x,0),0),o=Math.max((0,a.Z)(e.y,0),0),r=(0,a.Z)(e.width,t.drawingBufferWidth),s=(0,a.Z)(e.height,t.drawingBufferHeight),l=e.framebuffer;i.Z.typeOf.number.greaterThan("readState.width",r,0),i.Z.typeOf.number.greaterThan("readState.height",s,0);let u=C.Z.UNSIGNED_BYTE;(0,c.Z)(l)&&l.numberOfColorAttachments>0&&(u=l.getColorTexture(0).pixelDatatype);const d=_.Z.createTypedArray(_.Z.RGBA,u,r,s);return H(this,l),t.readPixels(n,o,r,s,_.Z.RGBA,C.Z.toWebGLConstant(u,this),d),d};const G={position:0,textureCoordinates:1};function j(e,t,n){this._pickObjects=e,this.key=t,this.color=n}M.prototype.getViewportQuadVertexArray=function(){let e=this.cache.viewportQuad_vertexArray;if(!(0,c.Z)(e)){const t=new h.Z({attributes:{position:new f.Z({componentDatatype:r.Z.FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1]}),textureCoordinates:new f.Z({componentDatatype:r.Z.FLOAT,componentsPerAttribute:2,values:[0,0,1,0,1,1,0,1]})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:g.Z.TRIANGLES});e=N.Z.fromGeometry({context:this,geometry:t,attributeLocations:G,bufferUsage:v.Z.STATIC_DRAW,interleave:!0}),this.cache.viewportQuad_vertexArray=e}return e},M.prototype.createViewportQuadCommand=function(e,t){return t=(0,a.Z)(t,a.Z.EMPTY_OBJECT),new E.Z({vertexArray:this.getViewportQuadVertexArray(),primitiveType:g.Z.TRIANGLES,renderState:t.renderState,shaderProgram:P.Z.fromCache({context:this,vertexShaderSource:b.Z,fragmentShaderSource:e,attributeLocations:G}),uniformMap:t.uniformMap,owner:t.owner,framebuffer:t.framebuffer,pass:t.pass})},M.prototype.getObjectByPickColor=function(e){return i.Z.defined("pickColor",e),this._pickObjects[e.toRgba()]},Object.defineProperties(j.prototype,{object:{get:function(){return this._pickObjects[this.key]},set:function(e){this._pickObjects[this.key]=e}}}),j.prototype.destroy=function(){delete this._pickObjects[this.key]},M.prototype.createPickId=function(e){i.Z.defined("object",e),++this._nextPickColor[0];const t=this._nextPickColor[0];if(0===t)throw new Z.Z("Out of unique Pick IDs.");return this._pickObjects[t]=e,new j(this._pickObjects,t,o.Z.fromRgba(t))},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){const e=this.cache;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];(0,c.Z)(n.destroy)&&n.destroy()}return this._shaderCache=this._shaderCache.destroy(),this._textureCache=this._textureCache.destroy(),this._defaultTexture=this._defaultTexture&&this._defaultTexture.destroy(),this._defaultEmissiveTexture=this._defaultEmissiveTexture&&this._defaultEmissiveTexture.destroy(),this._defaultNormalTexture=this._defaultNormalTexture&&this._defaultNormalTexture.destroy(),this._defaultCubeMap=this._defaultCubeMap&&this._defaultCubeMap.destroy(),(0,u.Z)(this)},M._deprecationWarning=l.Z;const W=M},12503:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(707258),o=n(434972),r=n(545870),s=n(941537),a=n(964695),c=n(497730),l=n(609882),u=n(234146),d=n(11020),h=n(765153),f=n(430886);function p(e){if(e=(0,u.Z)(e,u.Z.EMPTY_OBJECT),this._numSamples=(0,u.Z)(e.numSamples,1),this._colorAttachmentsLength=(0,u.Z)(e.colorAttachmentsLength,1),this._color=(0,u.Z)(e.color,!0),this._depth=(0,u.Z)(e.depth,!1),this._depthStencil=(0,u.Z)(e.depthStencil,!1),this._supportsDepthTexture=(0,u.Z)(e.supportsDepthTexture,!1),!this._color&&!this._depth&&!this._depthStencil)throw new h.Z("Must enable at least one type of framebuffer attachment.");if(this._depth&&this._depthStencil)throw new h.Z("Cannot have both a depth and depth-stencil attachment.");this._createColorAttachments=(0,u.Z)(e.createColorAttachments,!0),this._createDepthAttachments=(0,u.Z)(e.createDepthAttachments,!0),this._pixelDatatype=e.pixelDatatype,this._pixelFormat=e.pixelFormat,this._width=void 0,this._height=void 0,this._framebuffer=void 0,this._multisampleFramebuffer=void 0,this._colorTextures=void 0,this._color&&(this._colorTextures=new Array(this._colorAttachmentsLength),this._colorRenderbuffers=new Array(this._colorAttachmentsLength)),this._colorRenderbuffer=void 0,this._depthStencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthRenderbuffer=void 0,this._depthTexture=void 0,this._attachmentsDirty=!1}Object.defineProperties(p.prototype,{framebuffer:{get:function(){return this._numSamples>1?this._multisampleFramebuffer.getRenderFramebuffer():this._framebuffer}},numSamples:{get:function(){return this._numSamples}},status:{get:function(){return this.framebuffer.status}}}),p.prototype.isDirty=function(e,t,n,i,o){n=(0,u.Z)(n,1);const r=this._width!==e||this._height!==t,s=this._numSamples!==n,a=(0,d.Z)(i)&&this._pixelDatatype!==i||(0,d.Z)(o)&&this._pixelFormat!==o,c=1===n?(0,d.Z)(this._framebuffer):(0,d.Z)(this._multisampleFramebuffer);return this._attachmentsDirty||r||s||a||!c||this._color&&!(0,d.Z)(this._colorTextures[0])},p.prototype.update=function(e,t,n,p,m,_){if(!(0,d.Z)(t)||!(0,d.Z)(n))throw new h.Z("width and height must be defined.");if(p=e.msaa?(0,u.Z)(p,1):1,m=(0,u.Z)(m,this._color?(0,u.Z)(this._pixelDatatype,r.Z.UNSIGNED_BYTE):void 0),_=(0,u.Z)(_,this._color?(0,u.Z)(this._pixelFormat,f.Z.RGBA):void 0),this.isDirty(t,n,p,m,_)){if(this.destroy(),this._width=t,this._height=n,this._numSamples=p,this._pixelDatatype=m,this._pixelFormat=_,this._attachmentsDirty=!1,this._color&&this._createColorAttachments)for(let i=0;i<this._colorAttachmentsLength;++i)if(this._colorTextures[i]=new l.Z({context:e,width:t,height:n,pixelFormat:_,pixelDatatype:m,sampler:c.Z.NEAREST}),this._numSamples>1){const o=a.Z.getColorFormat(m);this._colorRenderbuffers[i]=new s.Z({context:e,width:t,height:n,format:o,numSamples:this._numSamples})}this._depthStencil&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?(this._depthStencilTexture=new l.Z({context:e,width:t,height:n,pixelFormat:f.Z.DEPTH_STENCIL,pixelDatatype:r.Z.UNSIGNED_INT_24_8,sampler:c.Z.NEAREST}),this._numSamples>1&&(this._depthStencilRenderbuffer=new s.Z({context:e,width:t,height:n,format:a.Z.DEPTH24_STENCIL8,numSamples:this._numSamples}))):this._depthStencilRenderbuffer=new s.Z({context:e,width:t,height:n,format:a.Z.DEPTH_STENCIL})),this._depth&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?this._depthTexture=new l.Z({context:e,width:t,height:n,pixelFormat:f.Z.DEPTH_COMPONENT,pixelDatatype:r.Z.UNSIGNED_INT,sampler:c.Z.NEAREST}):this._depthRenderbuffer=new s.Z({context:e,width:t,height:n,format:a.Z.DEPTH_COMPONENT16})),this._numSamples>1?this._multisampleFramebuffer=new o.Z({context:e,width:this._width,height:this._height,colorTextures:this._colorTextures,colorRenderbuffers:this._colorRenderbuffers,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1}):this._framebuffer=new i.Z({context:e,colorTextures:this._colorTextures,depthTexture:this._depthTexture,depthRenderbuffer:this._depthRenderbuffer,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1})}},p.prototype.getColorTexture=function(e){if((e=(0,u.Z)(e,0))>=this._colorAttachmentsLength)throw new h.Z("index must be smaller than total number of color attachments.");return this._colorTextures[e]},p.prototype.setColorTexture=function(e,t){if(t=(0,u.Z)(t,0),this._createColorAttachments)throw new h.Z("createColorAttachments must be false if setColorTexture is called.");if(t>=this._colorAttachmentsLength)throw new h.Z("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorTextures[t],this._colorTextures[t]=e},p.prototype.getColorRenderbuffer=function(e){if((e=(0,u.Z)(e,0))>=this._colorAttachmentsLength)throw new h.Z("index must be smaller than total number of color attachments.");return this._colorRenderbuffers[e]},p.prototype.setColorRenderbuffer=function(e,t){if(t=(0,u.Z)(t,0),this._createColorAttachments)throw new h.Z("createColorAttachments must be false if setColorRenderbuffer is called.");if(t>=this._colorAttachmentsLength)throw new h.Z("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorRenderbuffers[t],this._colorRenderbuffers[t]=e},p.prototype.getDepthRenderbuffer=function(){return this._depthRenderbuffer},p.prototype.setDepthRenderbuffer=function(e){if(this._createDepthAttachments)throw new h.Z("createDepthAttachments must be false if setDepthRenderbuffer is called.");this._attachmentsDirty=e!==this._depthRenderbuffer,this._depthRenderbuffer=e},p.prototype.getDepthTexture=function(){return this._depthTexture},p.prototype.setDepthTexture=function(e){if(this._createDepthAttachments)throw new h.Z("createDepthAttachments must be false if setDepthTexture is called.");this._attachmentsDirty=e!==this._depthTexture,this._depthTexture=e},p.prototype.getDepthStencilRenderbuffer=function(){return this._depthStencilRenderbuffer},p.prototype.setDepthStencilRenderbuffer=function(e){if(this._createDepthAttachments)throw new h.Z("createDepthAttachments must be false if setDepthStencilRenderbuffer is called.");this._attachmentsDirty=e!==this._depthStencilRenderbuffer,this._depthStencilRenderbuffer=e},p.prototype.getDepthStencilTexture=function(){return this._depthStencilTexture},p.prototype.setDepthStencilTexture=function(e){if(this._createDepthAttachments)throw new h.Z("createDepthAttachments must be false if setDepthStencilTexture is called.");this._attachmentsDirty=e!==this._depthStencilTexture,this._depthStencilTexture=e},p.prototype.prepareTextures=function(e,t){this._numSamples>1&&this._multisampleFramebuffer.blitFramebuffers(e,t)},p.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this.framebuffer,t.execute(e,n),t.framebuffer=i},p.prototype.destroyFramebuffer=function(){this._framebuffer=this._framebuffer&&this._framebuffer.destroy(),this._multisampleFramebuffer=this._multisampleFramebuffer&&this._multisampleFramebuffer.destroy()},p.prototype.destroy=function(){if(this._color){let e;const t=this._colorTextures.length;for(e=0;e<t;++e){const t=this._colorTextures[e];this._createColorAttachments&&(0,d.Z)(t)&&!t.isDestroyed()&&(this._colorTextures[e].destroy(),this._colorTextures[e]=void 0),(0,d.Z)(t)&&t.isDestroyed()&&(this._colorTextures[e]=void 0);const n=this._colorRenderbuffers[e];this._createColorAttachments&&(0,d.Z)(n)&&!n.isDestroyed()&&(this._colorRenderbuffers[e].destroy(),this._colorRenderbuffers[e]=void 0),(0,d.Z)(n)&&n.isDestroyed()&&(this._colorRenderbuffers[e]=void 0)}}this._depthStencil&&(this._createDepthAttachments&&(this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()),(0,d.Z)(this._depthStencilTexture)&&this._depthStencilTexture.isDestroyed()&&(this._depthStencilTexture=void 0),(0,d.Z)(this._depthStencilRenderbuffer)&&this._depthStencilRenderbuffer.isDestroyed()&&(this._depthStencilRenderbuffer=void 0)),this._depth&&(this._createDepthAttachments&&(this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy()),(0,d.Z)(this._depthTexture)&&this._depthTexture.isDestroyed()&&(this._depthTexture=void 0),(0,d.Z)(this._depthRenderbuffer)&&this._depthRenderbuffer.isDestroyed()&&(this._depthRenderbuffer=void 0)),this.destroyFramebuffer()};const m=p},434972:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(790087),o=n(234146),r=n(11020),s=n(722313),a=n(765153),c=n(707258);function l(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).context,n=e.width,s=e.height;i.Z.defined("options.context",t),i.Z.defined("options.width",n),i.Z.defined("options.height",s),this._width=n,this._height=s;const l=e.colorRenderbuffers,u=e.colorTextures;if((0,r.Z)(l)!==(0,r.Z)(u))throw new a.Z("Both color renderbuffer and texture attachments must be provided.");const d=e.depthStencilRenderbuffer,h=e.depthStencilTexture;if((0,r.Z)(d)!==(0,r.Z)(h))throw new a.Z("Both depth-stencil renderbuffer and texture attachments must be provided.");this._renderFramebuffer=new c.Z({context:t,colorRenderbuffers:l,depthStencilRenderbuffer:d,destroyAttachments:e.destroyAttachments}),this._colorFramebuffer=new c.Z({context:t,colorTextures:u,depthStencilTexture:h,destroyAttachments:e.destroyAttachments})}l.prototype.getRenderFramebuffer=function(){return this._renderFramebuffer},l.prototype.getColorFramebuffer=function(){return this._colorFramebuffer},l.prototype.blitFramebuffers=function(e,t){this._renderFramebuffer.bindRead(),this._colorFramebuffer.bindDraw();const n=e._gl;let i=0;this._colorFramebuffer._colorTextures.length>0&&(i|=n.COLOR_BUFFER_BIT),(0,r.Z)(this._colorFramebuffer.depthStencilTexture)&&(i|=n.DEPTH_BUFFER_BIT|(t?n.STENCIL_BUFFER_BIT:0)),n.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,i,n.NEAREST),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._renderFramebuffer.destroy(),this._colorFramebuffer.destroy(),(0,s.Z)(this)};const u=l},708800:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=function(e){this.context=e,this.framebuffer=void 0,this.blendingEnabled=void 0,this.scissorTest=void 0,this.viewport=void 0}},941537:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(234146),r=n(11020),s=n(722313),a=n(765153),c=n(591477),l=n(964695);function u(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),i.Z.defined("options.context",e.context);const t=e.context._gl,n=c.Z.maximumRenderbufferSize,s=(0,o.Z)(e.format,l.Z.RGBA4),u=(0,r.Z)(e.width)?e.width:t.drawingBufferWidth,d=(0,r.Z)(e.height)?e.height:t.drawingBufferHeight,h=(0,o.Z)(e.numSamples,1);if(!l.Z.validate(s))throw new a.Z("Invalid format.");if(i.Z.typeOf.number.greaterThan("width",u,0),u>n)throw new a.Z(`Width must be less than or equal to the maximum renderbuffer size (${n}).  Check maximumRenderbufferSize.`);if(i.Z.typeOf.number.greaterThan("height",d,0),d>n)throw new a.Z(`Height must be less than or equal to the maximum renderbuffer size (${n}).  Check maximumRenderbufferSize.`);this._gl=t,this._format=s,this._width=u,this._height=d,this._renderbuffer=this._gl.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this._renderbuffer),h>1?t.renderbufferStorageMultisample(t.RENDERBUFFER,h,s,u,d):t.renderbufferStorage(t.RENDERBUFFER,s,u,d),t.bindRenderbuffer(t.RENDERBUFFER,null)}Object.defineProperties(u.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),u.prototype._getRenderbuffer=function(){return this._renderbuffer},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),(0,s.Z)(this)};const d=u},964695:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(248894);const o={RGBA4:i.Z.RGBA4,RGBA8:i.Z.RGBA8,RGBA16F:i.Z.RGBA16F,RGBA32F:i.Z.RGBA32F,RGB5_A1:i.Z.RGB5_A1,RGB565:i.Z.RGB565,DEPTH_COMPONENT16:i.Z.DEPTH_COMPONENT16,STENCIL_INDEX8:i.Z.STENCIL_INDEX8,DEPTH_STENCIL:i.Z.DEPTH_STENCIL,DEPTH24_STENCIL8:i.Z.DEPTH24_STENCIL8,validate:function(e){return e===o.RGBA4||e===o.RGBA8||e===o.RGBA16F||e===o.RGBA32F||e===o.RGB5_A1||e===o.RGB565||e===o.DEPTH_COMPONENT16||e===o.STENCIL_INDEX8||e===o.DEPTH_STENCIL||e===o.DEPTH24_STENCIL8},getColorFormat:function(e){return e===i.Z.FLOAT?o.RGBA32F:e===i.Z.HALF_FLOAT_OES?o.RGBA16F:o.RGBA8}},r=Object.freeze(o)},669133:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(790087),o=n(823438),r=n(11020),s=n(234146),a=n(765153),c=n(245929),l=n(161632),u=n(437530),d=n(663305),h=n(285468);function f(){this._positionAttributeLine=void 0,this._nextAttributeLocation=1,this._attributeLocations={},this._attributeLines=[],this._structs={},this._functions={},this._vertexShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]},this._fragmentShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]}}Object.defineProperties(f.prototype,{attributeLocations:{get:function(){return this._attributeLocations}}}),f.prototype.addDefine=function(e,t,n){i.Z.typeOf.string("identifier",e),n=(0,s.Z)(n,c.Z.BOTH);let o=e;(0,r.Z)(t)&&(o+=` ${t.toString()}`),c.Z.includesVertexShader(n)&&this._vertexShaderParts.defineLines.push(o),c.Z.includesFragmentShader(n)&&this._fragmentShaderParts.defineLines.push(o)},f.prototype.addStruct=function(e,t,n){i.Z.typeOf.string("structId",e),i.Z.typeOf.string("structName",t),i.Z.typeOf.number("destination",n),this._structs[e]=new d.Z(t),c.Z.includesVertexShader(n)&&this._vertexShaderParts.structIds.push(e),c.Z.includesFragmentShader(n)&&this._fragmentShaderParts.structIds.push(e)},f.prototype.addStructField=function(e,t,n){i.Z.typeOf.string("structId",e),i.Z.typeOf.string("type",t),i.Z.typeOf.string("identifier",n),this._structs[e].addField(t,n)},f.prototype.addFunction=function(e,t,n){i.Z.typeOf.string("functionName",e),i.Z.typeOf.string("signature",t),i.Z.typeOf.number("destination",n),this._functions[e]=new h.Z(t),c.Z.includesVertexShader(n)&&this._vertexShaderParts.functionIds.push(e),c.Z.includesFragmentShader(n)&&this._fragmentShaderParts.functionIds.push(e)},f.prototype.addFunctionLines=function(e,t){if(i.Z.typeOf.string("functionName",e),"string"!=typeof t&&!Array.isArray(t))throw new a.Z(`Expected lines to be a string or an array of strings, actual value was ${t}`);this._functions[e].addLines(t)},f.prototype.addUniform=function(e,t,n){i.Z.typeOf.string("type",e),i.Z.typeOf.string("identifier",t),n=(0,s.Z)(n,c.Z.BOTH);const o=`uniform ${e} ${t};`;c.Z.includesVertexShader(n)&&this._vertexShaderParts.uniformLines.push(o),c.Z.includesFragmentShader(n)&&this._fragmentShaderParts.uniformLines.push(o)},f.prototype.setPositionAttribute=function(e,t){if(i.Z.typeOf.string("type",e),i.Z.typeOf.string("identifier",t),(0,r.Z)(this._positionAttributeLine))throw new a.Z("setPositionAttribute() must be called exactly once for the attribute used for gl_Position. For other attributes, use addAttribute()");return this._positionAttributeLine=`in ${e} ${t};`,this._attributeLocations[t]=0,0},f.prototype.addAttribute=function(e,t){i.Z.typeOf.string("type",e),i.Z.typeOf.string("identifier",t);const n=`in ${e} ${t};`;this._attributeLines.push(n);const o=this._nextAttributeLocation;return this._attributeLocations[t]=o,this._nextAttributeLocation+=function(e){switch(e){case"mat2":return 2;case"mat3":return 3;case"mat4":return 4;default:return 1}}(e),o},f.prototype.addVarying=function(e,t){i.Z.typeOf.string("type",e),i.Z.typeOf.string("identifier",t);const n=`${e} ${t};`;this._vertexShaderParts.varyingLines.push(`out ${n}`),this._fragmentShaderParts.varyingLines.push(`in ${n}`)},f.prototype.addVertexLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new a.Z(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this._vertexShaderParts.shaderLines;Array.isArray(e)?t.push.apply(t,e):t.push(e)},f.prototype.addFragmentLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new a.Z(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this._fragmentShaderParts.shaderLines;Array.isArray(e)?t.push.apply(t,e):t.push(e)},f.prototype.buildShaderProgram=function(e){i.Z.typeOf.object("context",e);const t=(0,r.Z)(this._positionAttributeLine)?[this._positionAttributeLine]:[],n=function(e){const t=[],n=[];let i,o,r,s,a=e._vertexShaderParts.structIds;for(i=0;i<a.length;i++)o=a[i],r=e._structs[o],s=r.generateGlslLines(),t.push.apply(t,s);for(a=e._fragmentShaderParts.structIds,i=0;i<a.length;i++)o=a[i],r=e._structs[o],s=r.generateGlslLines(),n.push.apply(n,s);return{vertexLines:t,fragmentLines:n}}(this),o=function(e){const t=[],n=[];let i,o,r,s,a=e._vertexShaderParts.functionIds;for(i=0;i<a.length;i++)o=a[i],r=e._functions[o],s=r.generateGlslLines(),t.push.apply(t,s);for(a=e._fragmentShaderParts.functionIds,i=0;i<a.length;i++)o=a[i],r=e._functions[o],s=r.generateGlslLines(),n.push.apply(n,s);return{vertexLines:t,fragmentLines:n}}(this),s=t.concat(this._attributeLines,this._vertexShaderParts.uniformLines,this._vertexShaderParts.varyingLines,n.vertexLines,o.vertexLines,this._vertexShaderParts.shaderLines).join("\n"),a=new u.Z({defines:this._vertexShaderParts.defineLines,sources:[s]}),c=this._fragmentShaderParts.uniformLines.concat(this._fragmentShaderParts.varyingLines,n.fragmentLines,o.fragmentLines,this._fragmentShaderParts.shaderLines).join("\n"),d=new u.Z({defines:this._fragmentShaderParts.defineLines,sources:[c]});return l.Z.fromCache({context:e,vertexShaderSource:a,fragmentShaderSource:d,attributeLocations:this._attributeLocations})},f.prototype.clone=function(){return(0,o.Z)(this,!0)};const p=f},341844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(11020),o=n(722313),r=n(161632),s=n(437530);function a(e){this._context=e,this._shaders={},this._numberOfShaders=0,this._shadersToRelease={}}function c(e,t){const n=t.derivedKeywords,i=n.length;for(let o=0;o<i;++o){const i=n[o]+t.keyword;c(e,e._shaders[i])}delete e._shaders[t.keyword],t.shaderProgram.finalDestroy()}Object.defineProperties(a.prototype,{numberOfShaders:{get:function(){return this._numberOfShaders}}}),a.prototype.replaceShaderProgram=function(e){return(0,i.Z)(e.shaderProgram)&&e.shaderProgram.destroy(),this.getShaderProgram(e)},a.prototype.getShaderProgram=function(e){let t=e.vertexShaderSource,n=e.fragmentShaderSource;const o=e.attributeLocations;"string"==typeof t&&(t=new s.Z({sources:[t]})),"string"==typeof n&&(n=new s.Z({sources:[n]}));const a=`${t.getCacheKey()}:${n.getCacheKey()}:${(0,i.Z)(o)?function(e){const t=Object.keys(e).sort();return JSON.stringify(e,t)}(o):""}`;let c;if((0,i.Z)(this._shaders[a]))c=this._shaders[a],delete this._shadersToRelease[a];else{const e=this._context,i=t.createCombinedVertexShader(e),s=n.createCombinedFragmentShader(e),l=new r.Z({gl:e._gl,logShaderCompilation:e.logShaderCompilation,debugShaders:e.debugShaders,vertexShaderSource:t,vertexShaderText:i,fragmentShaderSource:n,fragmentShaderText:s,attributeLocations:o});c={cache:this,shaderProgram:l,keyword:a,derivedKeywords:[],count:0},l._cachedShader=c,this._shaders[a]=c,++this._numberOfShaders}return++c.count,c.shaderProgram},a.prototype.replaceDerivedShaderProgram=function(e,t,n){const o=e._cachedShader,r=t+o.keyword,s=this._shaders[r];if((0,i.Z)(s)){c(this,s);const e=o.derivedKeywords.indexOf(t);e>-1&&o.derivedKeywords.splice(e,1)}return this.createDerivedShaderProgram(e,t,n)},a.prototype.getDerivedShaderProgram=function(e,t){const n=t+e._cachedShader.keyword,o=this._shaders[n];if((0,i.Z)(o))return o.shaderProgram},a.prototype.createDerivedShaderProgram=function(e,t,n){const i=e._cachedShader,o=t+i.keyword;let a=n.vertexShaderSource,c=n.fragmentShaderSource;const l=n.attributeLocations;"string"==typeof a&&(a=new s.Z({sources:[a]})),"string"==typeof c&&(c=new s.Z({sources:[c]}));const u=this._context,d=a.createCombinedVertexShader(u),h=c.createCombinedFragmentShader(u),f=new r.Z({gl:u._gl,logShaderCompilation:u.logShaderCompilation,debugShaders:u.debugShaders,vertexShaderSource:a,vertexShaderText:d,fragmentShaderSource:c,fragmentShaderText:h,attributeLocations:l}),p={cache:this,shaderProgram:f,keyword:o,derivedKeywords:[],count:0};return i.derivedKeywords.push(t),f._cachedShader=p,this._shaders[o]=p,f},a.prototype.destroyReleasedShaderPrograms=function(){const e=this._shadersToRelease;for(const t in e)e.hasOwnProperty(t)&&(c(this,e[t]),--this._numberOfShaders);this._shadersToRelease={}},a.prototype.releaseShaderProgram=function(e){if((0,i.Z)(e)){const t=e._cachedShader;t&&0==--t.count&&(this._shadersToRelease[t.keyword]=t)}},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){const e=this._shaders;for(const t in e)e.hasOwnProperty(t)&&e[t].shaderProgram.finalDestroy();return(0,o.Z)(this)};const l=a},245929:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(790087);const o={VERTEX:0,FRAGMENT:1,BOTH:2,includesVertexShader:function(e){return i.Z.typeOf.number("destination",e),e===o.VERTEX||e===o.BOTH},includesFragmentShader:function(e){return i.Z.typeOf.number("destination",e),e===o.FRAGMENT||e===o.BOTH}},r=Object.freeze(o)},285468:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(765153);function o(e){this.signature=e,this.body=[]}o.prototype.addLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new i.Z(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this.body;if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;i++)t.push(`    ${e[i]}`)}else t.push(`    ${e}`)},o.prototype.generateGlslLines=function(){return[].concat(this.signature,"{",this.body,"}")};const r=o},663305:(e,t,n)=>{"use strict";function i(e){this.name=e,this.fields=[]}n.d(t,{Z:()=>o}),i.prototype.addField=function(e,t){const n=`    ${e} ${t};`;this.fields.push(n)},i.prototype.generateGlslLines=function(){let e=this.fields;return 0===e.length&&(e=["    float _empty;"]),[].concat(`struct ${this.name}`,"{",e,"};")};const o=i},342617:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(11020),o=n(722313);function r(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}Object.defineProperties(r.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),r.prototype.getTexture=function(e){const t=this._textures[e];if((0,i.Z)(t))return delete this._texturesToRelease[e],++t.count,t.texture},r.prototype.addTexture=function(e,t){const n={texture:t,count:1};t.finalDestroy=t.destroy;const i=this;t.destroy=function(){0==--n.count&&(i._texturesToRelease[e]=n)},this._textures[e]=n,++this._numberOfTextures},r.prototype.destroyReleasedTextures=function(){const e=this._texturesToRelease;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];delete this._textures[t],n.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){const e=this._textures;for(const t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return(0,o.Z)(this)};const s=r},422113:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var i=n(890828),o=n(405254),r=n(660904),s=n(798336),a=n(532056),c=n(35961),l=n(234146),u=n(11020),d=n(63354),h=n(180390),f=n(344485),p=n(664288),m=n(659635),_=n(223689),g=n(617703),Z=n(720794),y=n(714233),b=n(582304);function v(){this.globeDepthTexture=void 0,this.gamma=void 0,this._viewport=new i.Z,this._viewportCartesian4=new s.Z,this._viewportDirty=!1,this._viewportOrthographicMatrix=m.Z.clone(m.Z.IDENTITY),this._viewportTransformation=m.Z.clone(m.Z.IDENTITY),this._model=m.Z.clone(m.Z.IDENTITY),this._view=m.Z.clone(m.Z.IDENTITY),this._inverseView=m.Z.clone(m.Z.IDENTITY),this._projection=m.Z.clone(m.Z.IDENTITY),this._infiniteProjection=m.Z.clone(m.Z.IDENTITY),this._entireFrustum=new o.Z,this._currentFrustum=new o.Z,this._frustumPlanes=new s.Z,this._farDepthFromNearPlusOne=void 0,this._log2FarDepthFromNearPlusOne=void 0,this._oneOverLog2FarDepthFromNearPlusOne=void 0,this._frameState=void 0,this._temeToPseudoFixed=p.Z.clone(m.Z.IDENTITY),this._view3DDirty=!0,this._view3D=new m.Z,this._inverseView3DDirty=!0,this._inverseView3D=new m.Z,this._inverseModelDirty=!0,this._inverseModel=new m.Z,this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new p.Z,this._viewRotation=new p.Z,this._inverseViewRotation=new p.Z,this._viewRotation3D=new p.Z,this._inverseViewRotation3D=new p.Z,this._inverseProjectionDirty=!0,this._inverseProjection=new m.Z,this._modelViewDirty=!0,this._modelView=new m.Z,this._modelView3DDirty=!0,this._modelView3D=new m.Z,this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new m.Z,this._inverseModelViewDirty=!0,this._inverseModelView=new m.Z,this._inverseModelView3DDirty=!0,this._inverseModelView3D=new m.Z,this._viewProjectionDirty=!0,this._viewProjection=new m.Z,this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new m.Z,this._modelViewProjectionDirty=!0,this._modelViewProjection=new m.Z,this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new m.Z,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new m.Z,this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new m.Z,this._normalDirty=!0,this._normal=new p.Z,this._normal3DDirty=!0,this._normal3D=new p.Z,this._inverseNormalDirty=!0,this._inverseNormal=new p.Z,this._inverseNormal3DDirty=!0,this._inverseNormal3D=new p.Z,this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new h.Z,this._cameraPosition=new r.Z,this._sunPositionWC=new r.Z,this._sunPositionColumbusView=new r.Z,this._sunDirectionWC=new r.Z,this._sunDirectionEC=new r.Z,this._moonDirectionEC=new r.Z,this._lightDirectionWC=new r.Z,this._lightDirectionEC=new r.Z,this._lightColor=new r.Z,this._lightColorHdr=new r.Z,this._pass=void 0,this._mode=void 0,this._mapProjection=void 0,this._ellipsoid=void 0,this._cameraDirection=new r.Z,this._cameraRight=new r.Z,this._cameraUp=new r.Z,this._frustum2DWidth=0,this._eyeHeight=0,this._eyeHeight2D=new o.Z,this._pixelRatio=1,this._orthographicIn3D=!1,this._backgroundColor=new c.Z,this._brdfLut=void 0,this._environmentMap=void 0,this._sphericalHarmonicCoefficients=void 0,this._specularEnvironmentMaps=void 0,this._specularEnvironmentMapsDimensions=new o.Z,this._specularEnvironmentMapsMaximumLOD=void 0,this._fogDensity=void 0,this._invertClassificationColor=void 0,this._splitPosition=0,this._pixelSizePerMeter=void 0,this._geometricToleranceOverMeter=void 0,this._minimumDisableDepthTestDistance=void 0}Object.defineProperties(v.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(e){if(!i.Z.equals(e,this._viewport)){i.Z.clone(e,this._viewport);const t=this._viewport,n=this._viewportCartesian4;n.x=t.x,n.y=t.y,n.z=t.width,n.w=t.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return S(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return S(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(e){m.Z.clone(e,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,m.Z.inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTransposeModel:{get:function(){const e=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,m.Z.getMatrix3(this.inverseModel,e),p.Z.transpose(e,e)),e}},view:{get:function(){return this._view}},view3D:{get:function(){return R(this),this._view3D}},viewRotation:{get:function(){return R(this),this._viewRotation}},viewRotation3D:{get:function(){return R(this),this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return F(this),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return F(this),this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){var e;return(e=this)._inverseProjectionDirty&&(e._inverseProjectionDirty=!1,e._mode===y.Z.SCENE2D||e._mode===y.Z.MORPHING||e._orthographicIn3D?m.Z.clone(m.Z.ZERO,e._inverseProjection):m.Z.inverse(e._projection,e._inverseProjection)),this._inverseProjection}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){var e;return(e=this)._modelViewDirty&&(e._modelViewDirty=!1,m.Z.multiplyTransformation(e._view,e._model,e._modelView)),this._modelView}},modelView3D:{get:function(){var e;return(e=this)._modelView3DDirty&&(e._modelView3DDirty=!1,m.Z.multiplyTransformation(e.view3D,e._model,e._modelView3D)),this._modelView3D}},modelViewRelativeToEye:{get:function(){return function(e){if(e._modelViewRelativeToEyeDirty){e._modelViewRelativeToEyeDirty=!1;const t=e.modelView,n=e._modelViewRelativeToEye;n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=0,n[13]=0,n[14]=0,n[15]=t[15]}}(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){var e;return(e=this)._inverseModelViewDirty&&(e._inverseModelViewDirty=!1,m.Z.inverse(e.modelView,e._inverseModelView)),this._inverseModelView}},inverseModelView3D:{get:function(){var e;return(e=this)._inverseModelView3DDirty&&(e._inverseModelView3DDirty=!1,m.Z.inverse(e.modelView3D,e._inverseModelView3D)),this._inverseModelView3D}},viewProjection:{get:function(){var e;return(e=this)._viewProjectionDirty&&(e._viewProjectionDirty=!1,m.Z.multiply(e._projection,e._view,e._viewProjection)),this._viewProjection}},inverseViewProjection:{get:function(){var e;return(e=this)._inverseViewProjectionDirty&&(e._inverseViewProjectionDirty=!1,m.Z.inverse(e.viewProjection,e._inverseViewProjection)),this._inverseViewProjection}},modelViewProjection:{get:function(){var e;return(e=this)._modelViewProjectionDirty&&(e._modelViewProjectionDirty=!1,m.Z.multiply(e._projection,e.modelView,e._modelViewProjection)),this._modelViewProjection}},inverseModelViewProjection:{get:function(){var e;return(e=this)._inverseModelViewProjectionDirty&&(e._inverseModelViewProjectionDirty=!1,m.Z.inverse(e.modelViewProjection,e._inverseModelViewProjection)),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){var e;return(e=this)._modelViewProjectionRelativeToEyeDirty&&(e._modelViewProjectionRelativeToEyeDirty=!1,m.Z.multiply(e._projection,e.modelViewRelativeToEye,e._modelViewProjectionRelativeToEye)),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){var e;return(e=this)._modelViewInfiniteProjectionDirty&&(e._modelViewInfiniteProjectionDirty=!1,m.Z.multiply(e._infiniteProjection,e.modelView,e._modelViewInfiniteProjection)),this._modelViewInfiniteProjection}},normal:{get:function(){return function(e){if(e._normalDirty){e._normalDirty=!1;const t=e._normal;m.Z.getMatrix3(e.inverseModelView,t),p.Z.getRotation(t,t),p.Z.transpose(t,t)}}(this),this._normal}},normal3D:{get:function(){return function(e){if(e._normal3DDirty){e._normal3DDirty=!1;const t=e._normal3D;m.Z.getMatrix3(e.inverseModelView3D,t),p.Z.getRotation(t,t),p.Z.transpose(t,t)}}(this),this._normal3D}},inverseNormal:{get:function(){var e;return(e=this)._inverseNormalDirty&&(e._inverseNormalDirty=!1,m.Z.getMatrix3(e.inverseModelView,e._inverseNormal),p.Z.getRotation(e._inverseNormal,e._inverseNormal)),this._inverseNormal}},inverseNormal3D:{get:function(){var e;return(e=this)._inverseNormal3DDirty&&(e._inverseNormal3DDirty=!1,m.Z.getMatrix3(e.inverseModelView3D,e._inverseNormal3D),p.Z.getRotation(e._inverseNormal3D,e._inverseNormal3D)),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},frustumPlanes:{get:function(){return this._frustumPlanes}},farDepthFromNearPlusOne:{get:function(){return this._farDepthFromNearPlusOne}},log2FarDepthFromNearPlusOne:{get:function(){return this._log2FarDepthFromNearPlusOne}},oneOverLog2FarDepthFromNearPlusOne:{get:function(){return this._oneOverLog2FarDepthFromNearPlusOne}},eyeHeight:{get:function(){return this._eyeHeight}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},lightDirectionWC:{get:function(){return this._lightDirectionWC}},lightDirectionEC:{get:function(){return this._lightDirectionEC}},lightColor:{get:function(){return this._lightColor}},lightColorHdr:{get:function(){return this._lightColorHdr}},encodedCameraPositionMCHigh:{get:function(){return x(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return x(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},pixelRatio:{get:function(){return this._pixelRatio}},fogDensity:{get:function(){return this._fogDensity}},geometricToleranceOverMeter:{get:function(){return this._geometricToleranceOverMeter}},pass:{get:function(){return this._pass}},backgroundColor:{get:function(){return this._backgroundColor}},brdfLut:{get:function(){return this._brdfLut}},environmentMap:{get:function(){return this._environmentMap}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps}},specularEnvironmentMapsDimensions:{get:function(){return this._specularEnvironmentMapsDimensions}},specularEnvironmentMapsMaximumLOD:{get:function(){return this._specularEnvironmentMapsMaximumLOD}},splitPosition:{get:function(){return this._splitPosition}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance}},invertClassificationColor:{get:function(){return this._invertClassificationColor}},orthographicIn3D:{get:function(){return this._orthographicIn3D}},ellipsoid:{get:function(){return(0,l.Z)(this._ellipsoid,d.Z.WGS84)}}});let A=new p.Z;const T=new a.Z;v.prototype.updateCamera=function(e){var t,n;t=this,n=e.viewMatrix,m.Z.clone(n,t._view),m.Z.getMatrix3(n,t._viewRotation),t._view3DDirty=!0,t._inverseView3DDirty=!0,t._modelViewDirty=!0,t._modelView3DDirty=!0,t._modelViewRelativeToEyeDirty=!0,t._inverseModelViewDirty=!0,t._inverseModelView3DDirty=!0,t._viewProjectionDirty=!0,t._inverseViewProjectionDirty=!0,t._modelViewProjectionDirty=!0,t._modelViewProjectionRelativeToEyeDirty=!0,t._modelViewInfiniteProjectionDirty=!0,t._normalDirty=!0,t._inverseNormalDirty=!0,t._normal3DDirty=!0,t._inverseNormal3DDirty=!0,function(e,t){m.Z.clone(t,e._inverseView),m.Z.getMatrix3(t,e._inverseViewRotation)}(this,e.inverseViewMatrix),function(e,t){r.Z.clone(t.positionWC,e._cameraPosition),r.Z.clone(t.directionWC,e._cameraDirection),r.Z.clone(t.rightWC,e._cameraRight),r.Z.clone(t.upWC,e._cameraUp);const n=t.positionCartographic;(0,u.Z)(n)?e._eyeHeight=n.height:e._eyeHeight=-e._ellipsoid.maximumRadius,e._encodedCameraPositionMCDirty=!0}(this,e),this._entireFrustum.x=e.frustum.near,this._entireFrustum.y=e.frustum.far,this.updateFrustum(e.frustum),this._orthographicIn3D=this._mode!==y.Z.SCENE2D&&e.frustum instanceof _.Z},v.prototype.updateFrustum=function(e){var t,n;t=this,n=e.projectionMatrix,m.Z.clone(n,t._projection),t._inverseProjectionDirty=!0,t._viewProjectionDirty=!0,t._inverseViewProjectionDirty=!0,t._modelViewProjectionDirty=!0,t._modelViewProjectionRelativeToEyeDirty=!0,(0,u.Z)(e.infiniteProjectionMatrix)&&function(e,t){m.Z.clone(t,e._infiniteProjection),e._modelViewInfiniteProjectionDirty=!0}(this,e.infiniteProjectionMatrix),this._currentFrustum.x=e.near,this._currentFrustum.y=e.far,this._farDepthFromNearPlusOne=e.far-e.near+1,this._log2FarDepthFromNearPlusOne=f.Z.log2(this._farDepthFromNearPlusOne),this._oneOverLog2FarDepthFromNearPlusOne=1/this._log2FarDepthFromNearPlusOne;const i=e.offCenterFrustum;(0,u.Z)(i)&&(e=i),this._frustumPlanes.x=e.top,this._frustumPlanes.y=e.bottom,this._frustumPlanes.z=e.left,this._frustumPlanes.w=e.right},v.prototype.updatePass=function(e){this._pass=e};const w=[],E=new b.Z;function S(e){if(e._viewportDirty){const t=e._viewport;m.Z.computeOrthographicOffCenter(t.x,t.x+t.width,t.y,t.y+t.height,0,1,e._viewportOrthographicMatrix),m.Z.computeViewportTransformation(t,0,1,e._viewportTransformation),e._viewportDirty=!1}}v.prototype.update=function(e){this._mode=e.mode,this._mapProjection=e.mapProjection,this._ellipsoid=e.mapProjection.ellipsoid,this._pixelRatio=e.pixelRatio;const t=e.camera;this.updateCamera(t),e.mode===y.Z.SCENE2D?(this._frustum2DWidth=t.frustum.right-t.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),function(e,t){(0,u.Z)(Z.Z.computeIcrfToFixedMatrix(t.time,A))||(A=Z.Z.computeTemeToPseudoFixedMatrix(t.time,A));let n=g.Z.computeSunPositionInEarthInertialFrame(t.time,e._sunPositionWC);p.Z.multiplyByVector(A,n,n),r.Z.normalize(n,e._sunDirectionWC),n=p.Z.multiplyByVector(e.viewRotation3D,n,e._sunDirectionEC),r.Z.normalize(n,n),n=g.Z.computeMoonPositionInEarthInertialFrame(t.time,e._moonDirectionEC),p.Z.multiplyByVector(A,n,n),p.Z.multiplyByVector(e.viewRotation3D,n,n),r.Z.normalize(n,n);const i=t.mapProjection,o=i.ellipsoid.cartesianToCartographic(e._sunPositionWC,T);i.project(o,e._sunPositionColumbusView)}(this,e);const n=(0,l.Z)(e.light,E);n instanceof b.Z?(this._lightDirectionWC=r.Z.clone(this._sunDirectionWC,this._lightDirectionWC),this._lightDirectionEC=r.Z.clone(this._sunDirectionEC,this._lightDirectionEC)):(this._lightDirectionWC=r.Z.normalize(r.Z.negate(n.direction,this._lightDirectionWC),this._lightDirectionWC),this._lightDirectionEC=p.Z.multiplyByVector(this.viewRotation3D,this._lightDirectionWC,this._lightDirectionEC));const i=n.color;let s=r.Z.fromElements(i.red,i.green,i.blue,this._lightColorHdr);s=r.Z.multiplyByScalar(s,n.intensity,s);const a=r.Z.maximumComponent(s);a>1?r.Z.divideByScalar(s,a,this._lightColor):r.Z.clone(s,this._lightColor);const d=e.brdfLutGenerator,h=(0,u.Z)(d)?d.colorTexture:void 0;this._brdfLut=h,this._environmentMap=(0,l.Z)(e.environmentMap,e.context.defaultCubeMap),this._sphericalHarmonicCoefficients=(0,l.Z)(e.sphericalHarmonicCoefficients,w),this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapsMaximumLOD=e.specularEnvironmentMapsMaximumLOD,(0,u.Z)(this._specularEnvironmentMaps)&&o.Z.clone(this._specularEnvironmentMaps.dimensions,this._specularEnvironmentMapsDimensions),this._fogDensity=e.fog.density,this._invertClassificationColor=e.invertClassificationColor,this._frameState=e,this._temeToPseudoFixed=Z.Z.computeTemeToPseudoFixedMatrix(e.time,this._temeToPseudoFixed),this._splitPosition=e.splitPosition*e.context.drawingBufferWidth;const f=t.frustum.fov,m=this._viewport;let _;_=(0,u.Z)(f)?m.height>m.width?2*Math.tan(.5*f)/m.height:2*Math.tan(.5*f)/m.width:1/Math.max(m.width,m.height),this._geometricToleranceOverMeter=_*e.maximumScreenSpaceError,c.Z.clone(e.backgroundColor,this._backgroundColor),this._minimumDisableDepthTestDistance=e.minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance*=this._minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance===Number.POSITIVE_INFINITY&&(this._minimumDisableDepthTestDistance=-1)};const C=new r.Z;function x(e){e._encodedCameraPositionMCDirty&&(e._encodedCameraPositionMCDirty=!1,m.Z.multiplyByPoint(e.inverseModel,e._cameraPosition,C),h.Z.fromCartesian(C,e._encodedCameraPositionMC))}const I=new r.Z,P=new r.Z,D=new r.Z,O=new r.Z,L=new a.Z,N=new r.Z,M=new m.Z;function R(e){e._view3DDirty&&(e._mode===y.Z.SCENE3D?m.Z.clone(e._view,e._view3D):function(e,t,n,i,o,s,a,c){const l=I;l.x=e.y,l.y=e.z,l.z=e.x;const d=P;d.x=n.y,d.y=n.z,d.z=n.x;const h=D;h.x=i.y,h.y=i.z,h.z=i.x;const p=O;p.x=t.y,p.y=t.z,p.z=t.x,s===y.Z.SCENE2D&&(l.z=.5*o);const _=a.unproject(l,L);_.longitude=f.Z.clamp(_.longitude,-Math.PI,Math.PI),_.latitude=f.Z.clamp(_.latitude,-f.Z.PI_OVER_TWO,f.Z.PI_OVER_TWO);const g=a.ellipsoid,b=g.cartographicToCartesian(_,N),v=Z.Z.eastNorthUpToFixedFrame(b,g,M);m.Z.multiplyByPointAsVector(v,d,d),m.Z.multiplyByPointAsVector(v,h,h),m.Z.multiplyByPointAsVector(v,p,p),(0,u.Z)(c)||(c=new m.Z),c[0]=d.x,c[1]=h.x,c[2]=-p.x,c[3]=0,c[4]=d.y,c[5]=h.y,c[6]=-p.y,c[7]=0,c[8]=d.z,c[9]=h.z,c[10]=-p.z,c[11]=0,c[12]=-r.Z.dot(d,b),c[13]=-r.Z.dot(h,b),c[14]=r.Z.dot(p,b),c[15]=1}(e._cameraPosition,e._cameraDirection,e._cameraRight,e._cameraUp,e._frustum2DWidth,e._mode,e._mapProjection,e._view3D),m.Z.getMatrix3(e._view3D,e._viewRotation3D),e._view3DDirty=!1)}function F(e){e._inverseView3DDirty&&(m.Z.inverseTransformation(e.view3D,e._inverseView3D),m.Z.getMatrix3(e._inverseView3D,e._inverseViewRotation3D),e._inverseView3DDirty=!1)}const B=v},699012:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(11020),r=n(765153),s=n(205522),a=n(136525);const c=function(e,t,n){if(i.Z.defined("context",e),!((0,o.Z)(t)&&(0,o.Z)(t.positiveX)&&(0,o.Z)(t.negativeX)&&(0,o.Z)(t.positiveY)&&(0,o.Z)(t.negativeY)&&(0,o.Z)(t.positiveZ)&&(0,o.Z)(t.negativeZ)))throw new r.Z("urls is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");const c={flipY:!0,skipColorSpaceConversion:n,preferImageBitmap:!0},l=[s.Z.createIfNeeded(t.positiveX).fetchImage(c),s.Z.createIfNeeded(t.negativeX).fetchImage(c),s.Z.createIfNeeded(t.positiveY).fetchImage(c),s.Z.createIfNeeded(t.negativeY).fetchImage(c),s.Z.createIfNeeded(t.positiveZ).fetchImage(c),s.Z.createIfNeeded(t.negativeZ).fetchImage(c)];return Promise.all(l).then((function(t){return new a.Z({context:e,source:{positiveX:t[0],negativeX:t[1],positiveY:t[2],negativeY:t[3],positiveZ:t[4],negativeZ:t[5]}})}))}},475285:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"})},680844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({SATELLITE:1,OCEANS:2,HILLSHADE:3})},565756:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var i=n(405254),o=n(660904),r=n(532056),s=n(790087),a=n(865029),c=n(234146),l=n(11020),u=n(906439),d=n(282910),h=n(351047),f=n(729476),p=n(344485),m=n(143450),_=n(205522),g=n(217066),Z=n(709366),y=n(709855),b=n(931359),v=n(210442),A=n(516925),T=n(663630),w=n(769426),E=n(680844),S=n(765153);function C(e){this.useTiles=(0,c.Z)(e.usePreCachedTilesIfAvailable,!0);const t=e.ellipsoid;this.tilingScheme=(0,c.Z)(e.tilingScheme,new f.Z({ellipsoid:t})),this.rectangle=(0,c.Z)(e.rectangle,this.tilingScheme.rectangle),this.ellipsoid=t;let n=e.credit;"string"==typeof n&&(n=new a.Z(n)),this.credit=n,this.tileCredits=void 0,this.tileDiscardPolicy=e.tileDiscardPolicy,this.tileWidth=(0,c.Z)(e.tileWidth,256),this.tileHeight=(0,c.Z)(e.tileHeight,256),this.maximumLevel=e.maximumLevel}async function x(e,t,n){const i=e.getDerivedResource({queryParameters:{f:"json"}});try{!function(e,t){const n=e.tileInfo;if((0,l.Z)(n)){if(t.tileWidth=n.rows,t.tileHeight=n.cols,102100===n.spatialReference.wkid||102113===n.spatialReference.wkid)t.tilingScheme=new b.Z({ellipsoid:t.ellipsoid});else{if(4326!==e.tileInfo.spatialReference.wkid){const t=`Tile spatial reference WKID ${e.tileInfo.spatialReference.wkid} is not supported.`;throw new g.Z(t)}t.tilingScheme=new f.Z({ellipsoid:t.ellipsoid})}if(t.maximumLevel=e.tileInfo.lods.length-1,(0,l.Z)(e.fullExtent)){if((0,l.Z)(e.fullExtent.spatialReference)&&(0,l.Z)(e.fullExtent.spatialReference.wkid))if(102100===e.fullExtent.spatialReference.wkid||102113===e.fullExtent.spatialReference.wkid){const n=new y.Z,i=e.fullExtent,r=n.unproject(new o.Z(Math.max(i.xmin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(i.ymin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),s=n.unproject(new o.Z(Math.min(i.xmax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(i.ymax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0));t.rectangle=new m.Z(r.longitude,r.latitude,s.longitude,s.latitude)}else{if(4326!==e.fullExtent.spatialReference.wkid){const t=`fullExtent.spatialReference WKID ${e.fullExtent.spatialReference.wkid} is not supported.`;throw new g.Z(t)}t.rectangle=m.Z.fromDegrees(e.fullExtent.xmin,e.fullExtent.ymin,e.fullExtent.xmax,e.fullExtent.ymax)}}else t.rectangle=t.tilingScheme.rectangle;t.useTiles=!0}else t.useTiles=!1;(0,l.Z)(e.copyrightText)&&e.copyrightText.length>0&&((0,l.Z)(t.credit)?t.tileCredits=[new a.Z(e.copyrightText)]:t.credit=new a.Z(e.copyrightText))}(await i.fetchJson(),t)}catch(t){!function(e,t,n){let i=`An error occurred while accessing ${e.url}`;throw(0,l.Z)(t)&&(0,l.Z)(t.message)&&(i+=`: ${t.message}`),Z.Z.reportError(void 0,n,(0,l.Z)(n)?n._errorEvent:void 0,i,void 0,void 0,void 0,t),new g.Z(i)}(e,t,n)}}function I(e){e=(0,c.Z)(e,c.Z.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=(0,c.Z)(e.tileWidth,256),this._tileHeight=(0,c.Z)(e.tileHeight,256),this._maximumLevel=e.maximumLevel,this._tilingScheme=(0,c.Z)(e.tilingScheme,new f.Z({ellipsoid:e.ellipsoid})),this._useTiles=(0,c.Z)(e.usePreCachedTilesIfAvailable,!0),this._rectangle=(0,c.Z)(e.rectangle,this._tilingScheme.rectangle),this._layers=e.layers,this._credit=e.credit,this._tileCredits=void 0;let t=e.credit;if("string"==typeof t&&(t=new a.Z(t)),this.enablePickFeatures=(0,c.Z)(e.enablePickFeatures,!0),this._errorEvent=new d.Z,this._ready=!1,(0,l.Z)(e.url)){(0,u.Z)("ArcGisMapServerImageryProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGisMapServerImageryProvider.fromUrl instead.");const t=_.Z.createIfNeeded(e.url);t.appendForwardSlash(),this._tileDiscardPolicy=e.tileDiscardPolicy,(0,l.Z)(e.token)&&t.setQueryParameters({token:e.token}),this._resource=t;const n=new C(e);n.useTiles?this._readyPromise=x(t,n,this).then((()=>(n.build(this),!0))):(n.build(this),this._readyPromise=Promise.resolve(!0))}}function P(e,t,n,i,o){let r;if(e._useTiles)r=e._resource.getDerivedResource({url:`tile/${i}/${n}/${t}`,request:o});else{const s=e._tilingScheme.tileXYToNativeRectangle(t,n,i),a={bbox:`${s.west},${s.south},${s.east},${s.north}`,size:`${e._tileWidth},${e._tileHeight}`,format:"png32",transparent:!0,f:"image"};e._tilingScheme.projection instanceof h.Z?(a.bboxSR=4326,a.imageSR=4326):(a.bboxSR=3857,a.imageSR=3857),e.layers&&(a.layers=`show:${e.layers}`),r=e._resource.getDerivedResource({url:"export",request:o,queryParameters:a})}return r}C.prototype.build=function(e){e._useTiles=this.useTiles,e._tilingScheme=this.tilingScheme,e._rectangle=this.rectangle,e._credit=this.credit,e._tileCredits=this.tileCredits,e._tileDiscardPolicy=this.tileDiscardPolicy,e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,this.useTiles&&!(0,l.Z)(this.tileDiscardPolicy)&&(e._tileDiscardPolicy=new A.Z({missingImageUrl:P(e,0,0,this.maximumLevel).url,pixelsToCheck:[new i.Z(0,0),new i.Z(200,20),new i.Z(20,200),new i.Z(80,110),new i.Z(160,130)],disableCheckIfAllPixelsAreTransparent:!0})),e._ready=!0},I.fromBasemapType=async function(e,t){let n,i,o;switch(s.Z.defined("style",e),t=(0,c.Z)(t,c.Z.EMPTY_OBJECT),e){case E.Z.SATELLITE:{n=(0,c.Z)(t.token,v.Z.defaultAccessToken),i=_.Z.createIfNeeded((0,c.Z)(t.url,v.Z.defaultWorldImageryServer)),i.appendForwardSlash();const e=v.Z.getDefaultTokenCredit(n);(0,l.Z)(e)&&(o=a.Z.clone(e))}break;case E.Z.OCEANS:{n=(0,c.Z)(t.token,v.Z.defaultAccessToken),i=_.Z.createIfNeeded((0,c.Z)(t.url,v.Z.defaultWorldOceanServer)),i.appendForwardSlash();const e=v.Z.getDefaultTokenCredit(n);(0,l.Z)(e)&&(o=a.Z.clone(e))}break;case E.Z.HILLSHADE:{n=(0,c.Z)(t.token,v.Z.defaultAccessToken),i=_.Z.createIfNeeded((0,c.Z)(t.url,v.Z.defaultWorldHillshadeServer)),i.appendForwardSlash();const e=v.Z.getDefaultTokenCredit(n);(0,l.Z)(e)&&(o=a.Z.clone(e))}break;default:throw new S.Z(`Unsupported basemap type: ${e}`)}return I.fromUrl(i,{...t,token:n,credit:o,usePreCachedTilesIfAvailable:!0})},Object.defineProperties(I.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.ready","ArcGisMapServerImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGisMapServerImageryProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.readyPromise","ArcGisMapServerImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGisMapServerImageryProvider.fromUrl instead."),this._readyPromise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}},defaultAlpha:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultAlpha","ArcGisMapServerImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultAlpha","ArcGisMapServerImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultNightAlpha","ArcGisMapServerImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultNightAlpha","ArcGisMapServerImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultDayAlpha","ArcGisMapServerImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultDayAlpha","ArcGisMapServerImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultBrightness","ArcGisMapServerImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultBrightness","ArcGisMapServerImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultContrast","ArcGisMapServerImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultContrast","ArcGisMapServerImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultHue","ArcGisMapServerImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultHue","ArcGisMapServerImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultSaturation","ArcGisMapServerImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultSaturation","ArcGisMapServerImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultGamma","ArcGisMapServerImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultGamma","ArcGisMapServerImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultMinificationFilter","ArcGisMapServerImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultMinificationFilter","ArcGisMapServerImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,u.Z)("ArcGisMapServerImageryProvider.defaultMagnificationFilter","ArcGisMapServerImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,u.Z)("ArcGisMapServerImageryProvider.defaultMagnificationFilter","ArcGisMapServerImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),I.fromUrl=async function(e,t){s.Z.defined("url",e),t=(0,c.Z)(t,c.Z.EMPTY_OBJECT);const n=_.Z.createIfNeeded(e);n.appendForwardSlash(),(0,l.Z)(t.token)&&n.setQueryParameters({token:t.token});const i=new I(t);i._resource=n;const o=new C(t);return(0,c.Z)(t.usePreCachedTilesIfAvailable,!0)&&await x(n,o),o.build(i),i._readyPromise=Promise.resolve(!0),i},I.prototype.getTileCredits=function(e,t,n){return this._tileCredits},I.prototype.requestImage=function(e,t,n,i){return w.Z.loadImage(this,P(this,e,t,n,i))},I.prototype.pickFeatures=function(e,t,n,i,s){if(!this.enablePickFeatures)return;const a=this._tilingScheme.tileXYToNativeRectangle(e,t,n);let c,u,d;if(this._tilingScheme.projection instanceof h.Z)c=p.Z.toDegrees(i),u=p.Z.toDegrees(s),d="4326";else{const e=this._tilingScheme.projection.project(new r.Z(i,s,0));c=e.x,u=e.y,d="3857"}let f="visible";(0,l.Z)(this._layers)&&(f+=`:${this._layers}`);const m={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:`${c},${u}`,mapExtent:`${a.west},${a.south},${a.east},${a.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:d,layers:f};return this._resource.getDerivedResource({url:"identify",queryParameters:m}).fetchJson().then((function(e){const t=[],n=e.results;if(!(0,l.Z)(n))return t;for(let e=0;e<n.length;++e){const i=n[e],s=new T.Z;if(s.data=i,s.name=i.value,s.properties=i.attributes,s.configureDescriptionFromProperties(i.attributes),"esriGeometryPoint"===i.geometryType&&i.geometry){const e=i.geometry.spatialReference&&i.geometry.spatialReference.wkid?i.geometry.spatialReference.wkid:4326;if(4326===e||4283===e)s.position=r.Z.fromDegrees(i.geometry.x,i.geometry.y,i.geometry.z);else if(102100===e||900913===e||3857===e){const e=new y.Z;s.position=e.unproject(new o.Z(i.geometry.x,i.geometry.y,i.geometry.z))}}t.push(s)}return t}))},I._metadataCache={};const D=I},210442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(865029),o=n(11020),r=n(205522);let s;const a="AAPKac82a6d80f1340a4aa9587f789d07e96a_Jj1a4fbA59cggYHArDizxxA2U4QDofLUm36VivpUsSRyK7O1JjRPwy916Y-7ld",c={};c.defaultAccessToken=a,c.defaultWorldImageryServer=new r.Z({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}),c.defaultWorldHillshadeServer=new r.Z({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}),c.defaultWorldOceanServer=new r.Z({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"}),c.getDefaultTokenCredit=function(e){if(e===a){if(!(0,o.Z)(s)){const e='<b>             This application is using a default ArcGIS access token. Please assign <i>Cesium.ArcGisMapService.defaultAccessToken</i>             with an API key from your ArcGIS Developer account before using the ArcGIS tile services.             You can sign up for a free ArcGIS Developer account at <a href="https://developers.arcgis.com/">https://developers.arcgis.com/</a>.</b>';s=new i.Z(e,!0),s._isDefaultToken=!0}return s}};const l=c},79816:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(405254),o=n(35961),r=n(11020),s=n(722313),a=n(598020),c=n(12503),l=n(545870);function u(){this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._ready=!1,this._name="czm_autoexposure",this._logDepthChanged=void 0,this._useLogDepth=void 0,this._framebuffers=void 0,this._previousLuminance=new c.Z,this._commands=void 0,this._clearCommand=void 0,this._minMaxLuminance=new i.Z,this.enabled=!0,this._enabled=!0,this.minimumLuminance=.1,this.maximumLuminance=10}function d(e){const t=e._framebuffers;if(!(0,r.Z)(t))return;const n=t.length;for(let e=0;e<n;++e)t[e].destroy();e._framebuffers=void 0,e._previousLuminance.destroy(),e._previousLuminance=void 0}function h(e){const t=e._commands;if(!(0,r.Z)(t))return;const n=t.length;for(let e=0;e<n;++e)t[e].shaderProgram.destroy();e._commands=void 0}function f(e,t){let n;if(0===t)n={colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions}};else{const i=e._framebuffers[t-1].getColorTexture(0);n={colorTexture:function(){return i},colorTextureDimensions:function(){return i.dimensions}}}return n.minMaxLuminance=function(){return e._minMaxLuminance},n.previousLuminance=function(){return e._previousLuminance.getColorTexture(0)},n}function p(e,t){let n="uniform sampler2D colorTexture; \nin vec2 v_textureCoordinates; \nfloat sampleTexture(vec2 offset) { \n";return n+=0===e?"    vec4 color = texture(colorTexture, v_textureCoordinates + offset); \n    return czm_luminance(color.rgb); \n":"    return texture(colorTexture, v_textureCoordinates + offset).r; \n",n+="}\n\n",n+="uniform vec2 colorTextureDimensions; \nuniform vec2 minMaxLuminance; \nuniform sampler2D previousLuminance; \nvoid main() { \n    float color = 0.0; \n    float xStep = 1.0 / colorTextureDimensions.x; \n    float yStep = 1.0 / colorTextureDimensions.y; \n    int count = 0; \n    for (int i = 0; i < 3; ++i) { \n        for (int j = 0; j < 3; ++j) { \n            vec2 offset; \n            offset.x = -xStep + float(i) * xStep; \n            offset.y = -yStep + float(j) * yStep; \n            if (offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0) { \n                continue; \n            } \n            color += sampleTexture(offset); \n            ++count; \n        } \n    } \n    if (count > 0) { \n        color /= float(count); \n    } \n",e===t-1&&(n+="    float previous = texture(previousLuminance, vec2(0.5)).r; \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n    color = previous + (color - previous) / (60.0 * 1.5); \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n"),n+="    out_FragColor = vec4(color); \n} \n",n}Object.defineProperties(u.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},outputTexture:{get:function(){const e=this._framebuffers;if((0,r.Z)(e))return e[e.length-1].getColorTexture(0)}}}),u.prototype.clear=function(e){const t=this._framebuffers;if(!(0,r.Z)(t))return;let n=this._clearCommand;(0,r.Z)(n)||(n=this._clearCommand=new a.Z({color:new o.Z(0,0,0,0),framebuffer:void 0}));const i=t.length;for(let o=0;o<i;++o)t[o].clear(e,n)},u.prototype.update=function(e){const t=e.drawingBufferWidth,n=e.drawingBufferHeight;t===this._width&&n===this._height||(this._width=t,this._height=n,function(e,t){d(e);let n=e._width,i=e._height;const o=t.halfFloatingPointTexture?l.Z.HALF_FLOAT:l.Z.FLOAT,r=Math.ceil(Math.log(Math.max(n,i))/Math.log(3)),s=new Array(r);for(let e=0;e<r;++e)n=Math.max(Math.ceil(n/3),1),i=Math.max(Math.ceil(i/3),1),s[e]=new c.Z,s[e].update(t,n,i,1,o);const a=s[r-1].getColorTexture(0);e._previousLuminance.update(t,a.width,a.height,1,o),e._framebuffers=s}(this,e),function(e,t){h(e);const n=e._framebuffers,i=n.length,o=new Array(i);for(let r=0;r<i;++r)o[r]=t.createViewportQuadCommand(p(r,i),{framebuffer:n[r].framebuffer,uniformMap:f(e,r)});e._commands=o}(this,e),this._ready||(this._ready=!0)),this._minMaxLuminance.x=this.minimumLuminance,this._minMaxLuminance.y=this.maximumLuminance;const i=this._framebuffers,o=i[i.length-1];i[i.length-1]=this._previousLuminance,this._commands[this._commands.length-1].framebuffer=this._previousLuminance.framebuffer,this._previousLuminance=o},u.prototype.execute=function(e,t){this._colorTexture=t;const n=this._commands;if(!(0,r.Z)(n))return;const i=n.length;for(let t=0;t<i;++t)n[t].execute(e)},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return d(this),h(this),(0,s.Z)(this)};const m=u},418371:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(344485),r=n(664288),s=n(659635);const a={X:0,Y:1,Z:2};a.Y_UP_TO_Z_UP=s.Z.fromRotationTranslation(r.Z.fromRotationX(o.Z.PI_OVER_TWO)),a.Z_UP_TO_Y_UP=s.Z.fromRotationTranslation(r.Z.fromRotationX(-o.Z.PI_OVER_TWO)),a.X_UP_TO_Z_UP=s.Z.fromRotationTranslation(r.Z.fromRotationY(-o.Z.PI_OVER_TWO)),a.Z_UP_TO_X_UP=s.Z.fromRotationTranslation(r.Z.fromRotationY(o.Z.PI_OVER_TWO)),a.X_UP_TO_Y_UP=s.Z.fromRotationTranslation(r.Z.fromRotationZ(o.Z.PI_OVER_TWO)),a.Y_UP_TO_X_UP=s.Z.fromRotationTranslation(r.Z.fromRotationZ(-o.Z.PI_OVER_TWO)),a.fromName=function(e){return i.Z.typeOf.string("name",e),a[e]};const c=Object.freeze(a)},287043:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(790087),o=n(234146),r=n(906439),s=n(911698),a=n(217066);const c={};c._deprecationWarning=r.Z;const l=Uint32Array.BYTES_PER_ELEMENT;c.parse=function(e,t){const n=(0,o.Z)(t,0);i.Z.defined("arrayBuffer",e),t=n;const r=new Uint8Array(e),u=new DataView(e);t+=l;const d=u.getUint32(t,!0);if(1!==d)throw new a.Z(`Only Batched 3D Model version 1 is supported.  Version ${d} is not.`);t+=l;const h=u.getUint32(t,!0);t+=l;let f=u.getUint32(t,!0);t+=l;let p=u.getUint32(t,!0);t+=l;let m=u.getUint32(t,!0);t+=l;let _,g,Z=u.getUint32(t,!0);t+=l,m>=570425344?(t-=2*l,_=f,m=p,Z=0,f=0,p=0,c._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")):Z>=570425344&&(t-=l,_=m,m=f,Z=p,f=0,p=0,c._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")),0===f?g={BATCH_LENGTH:(0,o.Z)(_,0)}:(g=(0,s.Z)(r,t,f),t+=f);const y=new Uint8Array(e,t,p);let b,v;t+=p,m>0&&(b=(0,s.Z)(r,t,m),t+=m,Z>0&&(v=new Uint8Array(e,t,Z),v=new Uint8Array(v),t+=Z));const A=n+h-t;if(0===A)throw new a.Z("glTF byte length must be greater than 0.");let T;return t%4==0?T=new Uint8Array(e,t,A):(c._deprecationWarning("b3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),T=new Uint8Array(r.subarray(t,t+A))),{batchLength:_,featureTableJson:g,featureTableBinary:y,batchTableJson:b,batchTableBinary:v,gltf:T}};const u=c},978730:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(388402),o=n(790087),r=n(823438),s=n(394579),a=n(449809),c=n(11020),l=n(234146),u=n(765153),d=n(708895),h=n(217066);function f(e){this._classes=void 0,this._classIds=void 0,this._classIndexes=void 0,this._parentCounts=void 0,this._parentIndexes=void 0,this._parentIds=void 0,this._byteLength=0,o.Z.typeOf.object("options.extension",e.extension),function(e,t,n){let o,r,u;const h=t.instancesLength,f=t.classes;let _,g=t.classIds,Z=t.parentCounts,y=t.parentIds,b=h,v=0;if((0,c.Z)(g.byteOffset)&&(g.componentType=(0,l.Z)(g.componentType,a.Z.UNSIGNED_SHORT),g.type=i.Z.SCALAR,u=(0,d.Z)(g),g=u.createArrayBufferView(n.buffer,n.byteOffset+g.byteOffset,h),v+=g.byteLength),(0,c.Z)(Z)){for((0,c.Z)(Z.byteOffset)&&(Z.componentType=(0,l.Z)(Z.componentType,a.Z.UNSIGNED_SHORT),Z.type=i.Z.SCALAR,u=(0,d.Z)(Z),Z=u.createArrayBufferView(n.buffer,n.byteOffset+Z.byteOffset,h),v+=Z.byteLength),_=new Uint16Array(h),b=0,o=0;o<h;++o)_[o]=b,b+=Z[o];v+=_.byteLength}(0,c.Z)(y)&&(0,c.Z)(y.byteOffset)&&(y.componentType=(0,l.Z)(y.componentType,a.Z.UNSIGNED_SHORT),y.type=i.Z.SCALAR,u=(0,d.Z)(y),y=u.createArrayBufferView(n.buffer,n.byteOffset+y.byteOffset,b),v+=y.byteLength);const A=f.length;for(o=0;o<A;++o){const e=f[o].length,t=f[o].instances,i=p(e,t,n);v+=m(i),f[o].instances=(0,s.Z)(i,t)}const T=new Array(A).fill(0),w=new Uint16Array(h);for(o=0;o<h;++o)r=g[o],w[o]=T[r],++T[r];v+=w.byteLength,e._classes=f,e._classIds=g,e._classIndexes=w,e._parentCounts=Z,e._parentIndexes=_,e._parentIds=y,e._byteLength=v}(this,e.extension,e.binaryBody),function(e){const t=_;t.length=0;const n=e._classIds.length;for(let i=0;i<n;++i)g(e,i,t)}(this)}function p(e,t,n){let i;for(const o in t)if(t.hasOwnProperty(o)){const r=t[o],s=r.byteOffset;if((0,c.Z)(s)){const t=r.componentType,a=r.type;if(!(0,c.Z)(t))throw new h.Z("componentType is required.");if(!(0,c.Z)(a))throw new h.Z("type is required.");if(!(0,c.Z)(n))throw new h.Z(`Property ${o} requires a batch table binary.`);const l=(0,d.Z)(r),u=l.componentsPerAttribute,f=l.classType,p=l.createArrayBufferView(n.buffer,n.byteOffset+s,e);(0,c.Z)(i)||(i={}),i[o]={typedArray:p,componentCount:u,type:f}}}return i}function m(e){let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}Object.defineProperties(f.prototype,{byteLength:{get:function(){return this._byteLength}}});const _=[];function g(e,t,n){const i=e._parentCounts,o=e._parentIds,r=e._parentIndexes,s=e._classIds.length;if(!(0,c.Z)(o))return;if(t>=s)throw new u.Z(`Parent index ${t} exceeds the total number of instances: ${s}`);if(n.indexOf(t)>-1)throw new u.Z("Circular dependency detected in the batch table hierarchy.");n.push(t);const a=(0,c.Z)(i)?i[t]:1,l=(0,c.Z)(i)?r[t]:t;for(let i=0;i<a;++i){const r=o[l+i];r!==t&&g(e,r,n)}n.pop(t)}const Z=[],y=[];let b=0;function v(e,t,n){const i=e._parentCounts,o=e._parentIds;return(0,c.Z)(o)?(0,c.Z)(i)?function(e,t,n){const i=e._classIds,o=e._parentCounts,r=e._parentIds,s=e._parentIndexes,a=i.length,l=Z;l.length=Math.max(l.length,a);const u=++b,d=y;for(d.length=0,d.push(t);d.length>0;){if(l[t=d.pop()]===u)continue;l[t]=u;const i=n(e,t);if((0,c.Z)(i))return i;const a=o[t],h=s[t];for(let e=0;e<a;++e){const n=r[h+e];n!==t&&d.push(n)}}}(e,t,n):function(e,t,n){let i=!0;for(;i;){const o=n(e,t);if((0,c.Z)(o))return o;const r=e._parentIds[t];i=r!==t,t=r}}(e,t,n):n(e,t)}f.prototype.hasProperty=function(e,t){const n=v(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i].instances;if((0,c.Z)(o[t]))return!0}));return(0,c.Z)(n)},f.prototype.propertyExists=function(e){const t=this._classes,n=t.length;for(let i=0;i<n;++i){const n=t[i].instances;if((0,c.Z)(n[e]))return!0}return!1},f.prototype.getPropertyIds=function(e,t){return(t=(0,c.Z)(t)?t:[]).length=0,v(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i].instances;for(const e in o)o.hasOwnProperty(e)&&-1===t.indexOf(e)&&t.push(e)})),t},f.prototype.getProperty=function(e,t){return v(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i],s=e._classIndexes[n],a=o.instances[t];if((0,c.Z)(a))return(0,c.Z)(a.typedArray)?function(e,t){const n=e.typedArray,i=e.componentCount;return 1===i?n[t]:e.type.unpack(n,t*i)}(a,s):(0,r.Z)(a[s],!0)}))},f.prototype.setProperty=function(e,t,n){const i=v(this,e,(function(i,o){const s=i._classIds[o],a=i._classes[s],l=i._classIndexes[o],d=a.instances[t];if((0,c.Z)(d)){if(o!==e)throw new u.Z(`Inherited property "${t}" is read-only.`);return(0,c.Z)(d.typedArray)?function(e,t,n){const i=e.typedArray,o=e.componentCount;1===o?i[t]=n:e.type.pack(n,i,t*o)}(d,l,n):d[l]=(0,r.Z)(n,!0),!0}}));return(0,c.Z)(i)},f.prototype.isClass=function(e,t){const n=v(this,e,(function(e,n){const i=e._classIds[n];if(e._classes[i].name===t)return!0}));return(0,c.Z)(n)},f.prototype.getClassName=function(e){const t=this._classIds[e];return this._classes[t].name};const A=f},974914:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(405254),o=n(798336),r=n(790087),s=n(35961),a=n(973384),c=n(11020),l=n(722313),u=n(765153),d=n(430886),h=n(591477),f=n(545870),p=n(497730),m=n(609882);function _(e){r.Z.typeOf.number("options.featuresLength",e.featuresLength),r.Z.typeOf.object("options.owner",e.owner),this._id=(0,a.Z)();const t=e.featuresLength;let n,s;if(this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[],t>0){const e=Math.min(t,h.Z.maximumTextureSize),r=Math.ceil(t/h.Z.maximumTextureSize),a=1/e,c=.5*a,l=1/r,u=.5*l;n=new i.Z(e,r),s=new o.Z(a,c,l,u)}this._translucentFeaturesLength=0,this._featuresLength=t,this._textureDimensions=n,this._textureStep=s,this._owner=e.owner,this._statistics=e.statistics,this._colorChangedCallback=e.colorChangedCallback}function g(e){const t=e._textureDimensions;return t.x*t.y*4}function Z(e){if(!(0,c.Z)(e._batchValues)){const t=g(e),n=new Uint8Array(t).fill(255);e._batchValues=n}return e._batchValues}function y(e){if(!(0,c.Z)(e._showAlphaProperties)){const t=2*e._featuresLength,n=new Uint8Array(t).fill(255);e._showAlphaProperties=n}return e._showAlphaProperties}function b(e,t){if(!(0,c.Z)(e)||e<0||e>=t)throw new u.Z(`batchId is required and between zero and featuresLength - 1 (${t}`-NaN)}Object.defineProperties(_.prototype,{translucentFeaturesLength:{get:function(){return this._translucentFeaturesLength}},byteLength:{get:function(){let e=0;return(0,c.Z)(this._pickTexture)&&(e+=this._pickTexture.sizeInBytes),(0,c.Z)(this._batchTexture)&&(e+=this._batchTexture.sizeInBytes),e}},textureDimensions:{get:function(){return this._textureDimensions}},textureStep:{get:function(){return this._textureStep}},batchTexture:{get:function(){return this._batchTexture}},defaultTexture:{get:function(){return this._defaultTexture}},pickTexture:{get:function(){return this._pickTexture}}}),_.DEFAULT_COLOR_VALUE=s.Z.WHITE,_.DEFAULT_SHOW_VALUE=!0,_.prototype.setShow=function(e,t){if(b(e,this._featuresLength),r.Z.typeOf.bool("show",t),t&&!(0,c.Z)(this._showAlphaProperties))return;const n=y(this),i=2*e,o=t?255:0;n[i]!==o&&(n[i]=o,Z(this)[4*e+3]=t?n[i+1]:0,this._batchValuesDirty=!0)},_.prototype.setAllShow=function(e){r.Z.typeOf.bool("show",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setShow(n,e)},_.prototype.getShow=function(e){if(b(e,this._featuresLength),!(0,c.Z)(this._showAlphaProperties))return!0;const t=2*e;return 255===this._showAlphaProperties[t]};const v=new Array(4);function A(e,t,n){const i=e._textureDimensions;return new m.Z({context:t,pixelFormat:d.Z.RGBA,pixelDatatype:f.Z.UNSIGNED_BYTE,source:{width:i.x,height:i.y,arrayBufferView:n},flipY:!1,sampler:p.Z.NEAREST})}_.prototype.setColor=function(e,t){if(b(e,this._featuresLength),r.Z.typeOf.object("color",t),s.Z.equals(t,_.DEFAULT_COLOR_VALUE)&&!(0,c.Z)(this._batchValues))return;const n=t.toBytes(v),i=n[3],o=Z(this),a=4*e,l=y(this),u=2*e;if(o[a]!==n[0]||o[a+1]!==n[1]||o[a+2]!==n[2]||l[u+1]!==i){o[a]=n[0],o[a+1]=n[1],o[a+2]=n[2];const r=255!==l[u+1],s=0!==l[u];o[a+3]=s?i:0,l[u+1]=i;const d=255!==i;d&&!r?++this._translucentFeaturesLength:!d&&r&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,(0,c.Z)(this._colorChangedCallback)&&this._colorChangedCallback(e,t)}},_.prototype.setAllColor=function(e){r.Z.typeOf.object("color",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setColor(n,e)},_.prototype.getColor=function(e,t){if(b(e,this._featuresLength),r.Z.typeOf.object("result",t),!(0,c.Z)(this._batchValues))return s.Z.clone(_.DEFAULT_COLOR_VALUE,t);const n=this._batchValues,i=4*e,o=this._showAlphaProperties,a=2*e;return s.Z.fromBytes(n[i],n[i+1],n[i+2],o[a+1],t)},_.prototype.getPickColor=function(e){return b(e,this._featuresLength),this._pickIds[e]},_.prototype.update=function(e,t){const n=t.context;this._defaultTexture=n.defaultTexture;const i=t.passes;(i.pick||i.postProcess)&&function(e,t){const n=e._featuresLength;if(!(0,c.Z)(e._pickTexture)&&n>0){const i=e._pickIds,o=g(e),r=new Uint8Array(o),a=e._owner,l=e._statistics;for(let e=0;e<n;++e){const n=t.createPickId(a.getFeature(e));i.push(n);const o=n.color,c=4*e;r[c]=s.Z.floatToByte(o.red),r[c+1]=s.Z.floatToByte(o.green),r[c+2]=s.Z.floatToByte(o.blue),r[c+3]=s.Z.floatToByte(o.alpha)}e._pickTexture=A(e,t,r),(0,c.Z)(l)&&(l.batchTableByteLength+=e._pickTexture.sizeInBytes)}}(this,n),this._batchValuesDirty&&(this._batchValuesDirty=!1,(0,c.Z)(this._batchTexture)||(this._batchTexture=A(this,n,this._batchValues),(0,c.Z)(this._statistics)&&(this._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes)),function(e){const t=e._textureDimensions;e._batchTexture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}(this))},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();const e=this._pickIds,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,l.Z)(this)};const T=_},271834:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(949225),o=n(790087),r=n(865029),s=n(234146),a=n(11020),c=n(906439),l=n(282910),u=n(344485),d=n(143450),h=n(205522),f=n(217066),p=n(709366),m=n(931359),_=n(605943),g=n(48449),Z=n(769426);function y(e){this.tileWidth=void 0,this.tileHeight=void 0,this.maximumLevel=void 0,this.imageUrlSubdomains=void 0,this.imageUrlTemplate=void 0,this.attributionList=void 0}async function b(e,t,n){const i=e.url;let o=v._metadataCache[i];(0,a.Z)(o)||(o=e.fetchJsonp("jsonp"),v._metadataCache[i]=o);try{return function(e,t){if(1!==e.resourceSets.length)throw new f.Z("metadata does not specify one resource in resourceSets");const n=e.resourceSets[0].resources[0];t.tileWidth=n.imageWidth,t.tileHeight=n.imageHeight,t.maximumLevel=n.zoomMax-1,t.imageUrlSubdomains=n.imageUrlSubdomains,t.imageUrlTemplate=n.imageUrl,t.attributionList=n.imageryProviders}(await o,t)}catch(t){!function(e,t,n){let i=`An error occurred while accessing ${e.url}`;throw(0,a.Z)(t)&&(0,a.Z)(t.message)&&(i+=`: ${t.message}`),p.Z.reportError(void 0,n,(0,a.Z)(n)?n._errorEvent:void 0,i,void 0,void 0,void 0,t),new f.Z(i)}(e,t,n)}}function v(e){if(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._mapStyle=(0,s.Z)(e.mapStyle,_.Z.AERIAL),this._culture=(0,s.Z)(e.culture,""),this._key=e.key,this._tileDiscardPolicy=e.tileDiscardPolicy,(0,a.Z)(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new g.Z),this._proxy=e.proxy,this._credit=new r.Z(`<a href="https://www.microsoft.com/en-us/maps/product/enduserterms"><img src="${v.logoUrl}" title="Bing Imagery"/></a>`),this._tilingScheme=new m.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._attributionList=void 0,this._errorEvent=new l.Z,this._ready=!1,(0,a.Z)(e.url)){(0,c.Z)("BingMapsImageryProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use BingMapsImageryProvider.fromUrl instead."),o.Z.defined("options.key",e.key);let t=e.tileProtocol;(0,a.Z)(t)?t.length>0&&":"===t[t.length-1]&&(t=t.substr(0,t.length-1)):t="http:"===document.location.protocol?"http":"https";const n=h.Z.createIfNeeded(e.url);this._resource=n,n.appendForwardSlash();const i=n.getDerivedResource({url:`REST/v1/Imagery/Metadata/${this._mapStyle}`,queryParameters:{incl:"ImageryProviders",key:e.key,uriScheme:t}}),r=new y(e);this._readyPromise=b(i,r,this).then((()=>(r.build(this),!0)))}}y.prototype.build=function(e){e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,e._imageUrlSubdomains=this.imageUrlSubdomains,e._imageUrlTemplate=this.imageUrlTemplate;let t=e._attributionList=this.attributionList;t||(t=[]),e._attributionList=t;for(let e=0,n=t.length;e<n;++e){const n=t[e];if(n.credit instanceof r.Z)break;n.credit=new r.Z(n.attribution);const i=n.coverageAreas;for(let e=0,t=n.coverageAreas.length;e<t;++e){const t=i[e],n=t.bbox;t.bbox=new d.Z(u.Z.toRadians(n[1]),u.Z.toRadians(n[0]),u.Z.toRadians(n[3]),u.Z.toRadians(n[2]))}}e._ready=!0},Object.defineProperties(v.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,c.Z)("BingMapsImageryProvider.ready","BingMapsImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use BingMapsImageryProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,c.Z)("BingMapsImageryProvider.readyPromise","BingMapsImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use BingMapsImageryProvider.fromUrl instead."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}},defaultAlpha:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultAlpha","BingMapsImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultAlpha","BingMapsImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultNightAlpha","BingMapsImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultNightAlpha","BingMapsImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultDayAlpha","BingMapsImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultDayAlpha","BingMapsImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultBrightness","BingMapsImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultBrightness","BingMapsImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultContrast","BingMapsImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultContrast","BingMapsImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultHue","BingMapsImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultHue","BingMapsImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultSaturation","BingMapsImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultSaturation","BingMapsImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultGamma","BingMapsImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultGamma","BingMapsImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultMinificationFilter","BingMapsImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultMinificationFilter","BingMapsImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,c.Z)("BingMapsImageryProvider.defaultMagnificationFilter","BingMapsImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,c.Z)("BingMapsImageryProvider.defaultMagnificationFilter","BingMapsImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),v.fromUrl=async function(e,t){t=(0,s.Z)(t,s.Z.EMPTY_OBJECT),o.Z.defined("url",e),o.Z.defined("options.key",t.key);let n=t.tileProtocol;(0,a.Z)(n)?n.length>0&&":"===n[n.length-1]&&(n=n.substr(0,n.length-1)):n="http:"===document.location.protocol?"http":"https";const i=(0,s.Z)(t.mapStyle,_.Z.AERIAL),r=h.Z.createIfNeeded(e);r.appendForwardSlash();const c=r.getDerivedResource({url:`REST/v1/Imagery/Metadata/${i}`,queryParameters:{incl:"ImageryProviders",key:t.key,uriScheme:n}}),l=new v(t);l._resource=r;const u=new y(t);return await b(c,u),u.build(l),l._readyPromise=Promise.resolve(!0),l};const A=new d.Z;v.prototype.getTileCredits=function(e,t,n){const i=this._tilingScheme.tileXYToRectangle(e,t,n,A),o=function(e,t,n){++t;const i=[];for(let o=0,r=e.length;o<r;++o){const r=e[o],s=r.coverageAreas;let c=!1;for(let e=0,i=r.coverageAreas.length;!c&&e<i;++e){const i=s[e];if(t>=i.zoomMin&&t<=i.zoomMax){const e=d.Z.intersection(n,i.bbox,T);(0,a.Z)(e)&&(c=!0)}}c&&i.push(r.credit)}return i}(this._attributionList,n,i);return o},v.prototype.requestImage=function(e,t,n,i){const o=Z.Z.loadImage(this,function(e,t,n,i,o){const r=e._imageUrlTemplate,s=e._imageUrlSubdomains,a=(t+n+i)%s.length;return e._resource.getDerivedResource({url:r,request:o,templateValues:{quadkey:v.tileXYToQuadKey(t,n,i),subdomain:s[a],culture:e._culture},queryParameters:{n:"z"}})}(this,e,t,n,i));if((0,a.Z)(o))return o.catch((function(e){return(0,a.Z)(e.blob)&&0===e.blob.size?g.Z.EMPTY_IMAGE:Promise.reject(e)}))},v.prototype.pickFeatures=function(e,t,n,i,o){},v.tileXYToQuadKey=function(e,t,n){let i="";for(let o=n;o>=0;--o){const n=1<<o;let r=0;e&n&&(r|=1),t&n&&(r|=2),i+=r}return i},v.quadKeyToTileXY=function(e){let t=0,n=0;const i=e.length-1;for(let o=i;o>=0;--o){const r=1<<o,s=+e[i-o];1&s&&(t|=r),2&s&&(n|=r)}return{x:t,y:n,level:i}},v._logoUrl=void 0,Object.defineProperties(v,{logoUrl:{get:function(){return(0,a.Z)(v._logoUrl)||(v._logoUrl=(0,i.Z)("Assets/Images/bing_maps_credit.png")),v._logoUrl},set:function(e){o.Z.defined("value",e),v._logoUrl=e}}});const T=new d.Z;v._metadataCache={};const w=v},605943:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"})},186120:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(890828),o=n(11020),r=n(722313),s=n(430886),a=n(707258),c=n(545870),l=n(417148),u=n(497730),d=n(609882),h=n(672495);function f(){this._colorTexture=void 0,this._drawCommand=void 0}Object.defineProperties(f.prototype,{colorTexture:{get:function(){return this._colorTexture}}}),f.prototype.update=function(e){if(!(0,o.Z)(this._colorTexture)){const t=e.context,n=new d.Z({context:t,width:256,height:256,pixelFormat:s.Z.RGBA,pixelDatatype:c.Z.UNSIGNED_BYTE,sampler:u.Z.NEAREST});this._colorTexture=n;const o=new a.Z({context:t,colorTextures:[n],destroyAttachments:!1});!function(e,t,n){const o=t.createViewportQuadCommand(h.Z,{framebuffer:n,renderState:l.Z.fromCache({viewport:new i.Z(0,0,256,256)})});e._drawCommand=o}(this,t,o),this._drawCommand.execute(t),o.destroy(),this._drawCommand.shaderProgram=this._drawCommand.shaderProgram&&this._drawCommand.shaderProgram.destroy()}},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._colorTexture=this._colorTexture&&this._colorTexture.destroy(),(0,r.Z)(this)};const p=f},275062:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(234146),o=n(11020),r=n(765153),s=n(757587),a=n(897955);function c(e){const t=(e=(0,i.Z)(e,i.Z.EMPTY_OBJECT)).typedArray,n=e.resource,s=e.cacheKey;if((0,o.Z)(t)===(0,o.Z)(n))throw new r.Z("One of options.typedArray and options.resource must be defined.");this._typedArray=t,this._resource=n,this._cacheKey=s,this._state=a.Z.UNLOADED,this._promise=void 0}(0,o.Z)(Object.create)&&(c.prototype=Object.create(s.Z.prototype),c.prototype.constructor=c),Object.defineProperties(c.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),c.prototype.load=async function(){return(0,o.Z)(this._promise)?this._promise:(0,o.Z)(this._typedArray)?(this._promise=Promise.resolve(this),this._promise):(this._promise=async function(e){const t=e._resource;e._state=a.Z.LOADING;try{const n=await c._fetchArrayBuffer(t);if(e.isDestroyed())return;return e._typedArray=new Uint8Array(n),e._state=a.Z.READY,e}catch(n){if(e.isDestroyed())return;e._state=a.Z.FAILED;const i=`Failed to load external buffer: ${t.url}`;throw e.getError(i,n)}}(this),this._promise)},c._fetchArrayBuffer=function(e){return e.fetchArrayBuffer()},c.prototype.unload=function(){this._typedArray=void 0};const l=c},518931:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ft});var i=n(762031),o=n(405254),r=n(660904),s=n(798336),a=n(532056),c=n(234146),l=n(11020),u=n(765153),d=n(942841),h=n(63354),f=n(835189),p=n(282910),m=n(732292),_=n(339079),g=n(296541),Z=n(101496),y=n(998537),b=n(344485),v=n(664288),A=n(659635),T=n(223689),w=n(299594),E=n(134282),S=n(360846),C=n(638601),x=n(143450),I=n(720794),P=n(673644),D=n(305515),O=n(714233);function L(e){if(!(0,l.Z)(e))throw new u.Z("scene is required.");this._scene=e,this._transform=A.Z.clone(A.Z.IDENTITY),this._invTransform=A.Z.clone(A.Z.IDENTITY),this._actualTransform=A.Z.clone(A.Z.IDENTITY),this._actualInvTransform=A.Z.clone(A.Z.IDENTITY),this._transformChanged=!1,this.position=new r.Z,this._position=new r.Z,this._positionWC=new r.Z,this._positionCartographic=new a.Z,this._oldPositionWC=void 0,this.positionWCDeltaMagnitude=0,this.positionWCDeltaMagnitudeLastFrame=0,this.timeSinceMoved=0,this._lastMovedTimestamp=0,this.direction=new r.Z,this._direction=new r.Z,this._directionWC=new r.Z,this.up=new r.Z,this._up=new r.Z,this._upWC=new r.Z,this.right=new r.Z,this._right=new r.Z,this._rightWC=new r.Z,this.frustum=new E.Z,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=b.Z.toRadians(60),this.defaultMoveAmount=1e5,this.defaultLookAmount=Math.PI/60,this.defaultRotateAmount=Math.PI/3600,this.defaultZoomAmount=1e5,this.constrainedAxis=void 0,this.maximumZoomFactor=1.5,this._moveStart=new p.Z,this._moveEnd=new p.Z,this._changed=new p.Z,this._changedPosition=void 0,this._changedDirection=void 0,this._changedFrustum=void 0,this._changedHeading=void 0,this.percentageChanged=.5,this._viewMatrix=new A.Z,this._invViewMatrix=new A.Z,N(this),this._mode=O.Z.SCENE3D,this._modeChanged=!0;const t=e.mapProjection;this._projection=t,this._maxCoord=t.project(new a.Z(Math.PI,b.Z.PI_OVER_TWO)),this._max2Dfrustum=void 0,Je(this,L.DEFAULT_VIEW_RECTANGLE,this.position,!0);let n=r.Z.magnitude(this.position);n+=n*L.DEFAULT_VIEW_FACTOR,r.Z.normalize(this.position,this.position),r.Z.multiplyByScalar(this.position,n,this.position)}function N(e){A.Z.computeView(e._position,e._direction,e._up,e._right,e._viewMatrix),A.Z.multiply(e._viewMatrix,e._actualInvTransform,e._viewMatrix),A.Z.inverseTransformation(e._viewMatrix,e._invViewMatrix)}L.TRANSFORM_2D=new A.Z(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),L.TRANSFORM_2D_INVERSE=A.Z.inverseTransformation(L.TRANSFORM_2D,new A.Z),L.DEFAULT_VIEW_RECTANGLE=x.Z.fromDegrees(-95,-20,-70,90),L.DEFAULT_VIEW_FACTOR=.5,L.DEFAULT_OFFSET=new _.Z(0,-b.Z.PI_OVER_FOUR,0),L.prototype.canPreloadFlight=function(){return(0,l.Z)(this._currentFlight)&&this._mode!==O.Z.SCENE2D},L.prototype._updateCameraChanged=function(){const e=this;if(function(e){if((0,l.Z)(e._oldPositionWC)){e.positionWCDeltaMagnitudeLastFrame=e.positionWCDeltaMagnitude;const t=r.Z.subtract(e.positionWC,e._oldPositionWC,e._oldPositionWC);e.positionWCDeltaMagnitude=r.Z.magnitude(t),e._oldPositionWC=r.Z.clone(e.positionWC,e._oldPositionWC),e.positionWCDeltaMagnitude>0?(e.timeSinceMoved=0,e._lastMovedTimestamp=(0,m.Z)()):e.timeSinceMoved=Math.max((0,m.Z)()-e._lastMovedTimestamp,0)/1e3}else e._oldPositionWC=r.Z.clone(e.positionWC,e._oldPositionWC)}(e),0===e._changed.numberOfListeners)return;const t=e.percentageChanged,n=e.heading;(0,l.Z)(e._changedHeading)||(e._changedHeading=n);let i=Math.abs(e._changedHeading-n)%b.Z.TWO_PI;i=i>b.Z.PI?b.Z.TWO_PI-i:i;const o=i/Math.PI;if(o>t&&(e._changed.raiseEvent(o),e._changedHeading=n),e._mode===O.Z.SCENE2D){if(!(0,l.Z)(e._changedFrustum))return e._changedPosition=r.Z.clone(e.position,e._changedPosition),void(e._changedFrustum=e.frustum.clone());const n=e.position,i=e._changedPosition,o=e.frustum,s=e._changedFrustum,a=n.x+o.left,c=n.x+o.right,u=i.x+s.left,d=i.x+s.right,h=n.y+o.bottom,f=n.y+o.top,p=i.y+s.bottom,m=i.y+s.top,_=Math.max(a,u),g=Math.min(c,d),Z=Math.max(h,p),y=Math.min(f,m);let b;if(_>=g||Z>=f)b=1;else{let e=s;a<u&&c>d&&h<p&&f>m&&(e=o),b=1-(g-_)*(y-Z)/((e.right-e.left)*(e.top-e.bottom))}return void(b>t&&(e._changed.raiseEvent(b),e._changedPosition=r.Z.clone(e.position,e._changedPosition),e._changedFrustum=e.frustum.clone(e._changedFrustum)))}if(!(0,l.Z)(e._changedDirection))return e._changedPosition=r.Z.clone(e.positionWC,e._changedPosition),void(e._changedDirection=r.Z.clone(e.directionWC,e._changedDirection));const s=b.Z.acosClamped(r.Z.dot(e.directionWC,e._changedDirection));let a;a=(0,l.Z)(e.frustum.fovy)?s/(.5*e.frustum.fovy):s;const c=r.Z.distance(e.positionWC,e._changedPosition)/e.positionCartographic.height;(a>t||c>t)&&(e._changed.raiseEvent(Math.max(a,c)),e._changedPosition=r.Z.clone(e.positionWC,e._changedPosition),e._changedDirection=r.Z.clone(e.directionWC,e._changedDirection))};const M=new a.Z,R=new r.Z,F=new r.Z,B=new s.Z,U=new s.Z,k=new s.Z,V=new s.Z,H=new s.Z,z=new r.Z;function G(e){const t=e._mode;let n=!1,i=0;t===O.Z.SCENE2D&&(i=e.frustum.right-e.frustum.left,n=i!==e._positionCartographic.height);let o=e._position;const a=!r.Z.equals(o,e.position)||n;a&&(o=r.Z.clone(e.position,e._position));let c=e._direction;const l=!r.Z.equals(c,e.direction);l&&(r.Z.normalize(e.direction,e.direction),c=r.Z.clone(e.direction,e._direction));let u=e._up;const d=!r.Z.equals(u,e.up);d&&(r.Z.normalize(e.up,e.up),u=r.Z.clone(e.up,e._up));let h=e._right;const f=!r.Z.equals(h,e.right);f&&(r.Z.normalize(e.right,e.right),h=r.Z.clone(e.right,e._right));const p=e._transformChanged||e._modeChanged;e._transformChanged=!1,p&&(A.Z.inverseTransformation(e._transform,e._invTransform),e._mode===O.Z.COLUMBUS_VIEW||e._mode===O.Z.SCENE2D?A.Z.equals(A.Z.IDENTITY,e._transform)?A.Z.clone(L.TRANSFORM_2D,e._actualTransform):e._mode===O.Z.COLUMBUS_VIEW?function(e){I.Z.basisTo2D(e._projection,e._transform,e._actualTransform)}(e):function(e){const t=e._projection,n=t.ellipsoid,i=A.Z.getColumn(e._transform,3,B),o=n.cartesianToCartographic(i,M),a=t.project(o,R),c=U;c.x=a.z,c.y=a.x,c.z=a.y,c.w=1;const l=s.Z.clone(s.Z.UNIT_X,H),u=s.Z.add(A.Z.getColumn(e._transform,0,F),i,F);n.cartesianToCartographic(u,o),t.project(o,a);const d=k;d.x=a.z,d.y=a.x,d.z=a.y,d.w=0,r.Z.subtract(d,c,d),d.x=0;const h=V;if(r.Z.magnitudeSquared(d)>b.Z.EPSILON10)r.Z.cross(l,d,h);else{const l=s.Z.add(A.Z.getColumn(e._transform,1,F),i,F);n.cartesianToCartographic(l,o),t.project(o,a),h.x=a.z,h.y=a.x,h.z=a.y,h.w=0,r.Z.subtract(h,c,h),h.x=0,r.Z.magnitudeSquared(h)<b.Z.EPSILON10&&(s.Z.clone(s.Z.UNIT_Y,d),s.Z.clone(s.Z.UNIT_Z,h))}r.Z.cross(h,l,d),r.Z.normalize(d,d),r.Z.cross(l,d,h),r.Z.normalize(h,h),A.Z.setColumn(e._actualTransform,0,d,e._actualTransform),A.Z.setColumn(e._actualTransform,1,h,e._actualTransform),A.Z.setColumn(e._actualTransform,2,l,e._actualTransform),A.Z.setColumn(e._actualTransform,3,c,e._actualTransform)}(e):A.Z.clone(e._transform,e._actualTransform),A.Z.inverseTransformation(e._actualTransform,e._actualInvTransform),e._modeChanged=!1);const m=e._actualTransform;if(a||p)if(e._positionWC=A.Z.multiplyByPoint(m,o,e._positionWC),t===O.Z.SCENE3D||t===O.Z.MORPHING)e._positionCartographic=e._projection.ellipsoid.cartesianToCartographic(e._positionWC,e._positionCartographic);else{const n=z;n.x=e._positionWC.y,n.y=e._positionWC.z,n.z=e._positionWC.x,t===O.Z.SCENE2D&&(n.z=i),e._projection.unproject(n,e._positionCartographic)}if(l||d||f){const t=r.Z.dot(c,r.Z.cross(u,h,z));if(Math.abs(1-t)>b.Z.EPSILON2){const t=1/r.Z.magnitudeSquared(u),n=r.Z.dot(u,c)*t,i=r.Z.multiplyByScalar(c,n,z);u=r.Z.normalize(r.Z.subtract(u,i,e._up),e._up),r.Z.clone(u,e.up),h=r.Z.cross(c,u,e._right),r.Z.clone(h,e.right)}}(l||p)&&(e._directionWC=A.Z.multiplyByPointAsVector(m,c,e._directionWC),r.Z.normalize(e._directionWC,e._directionWC)),(d||p)&&(e._upWC=A.Z.multiplyByPointAsVector(m,u,e._upWC),r.Z.normalize(e._upWC,e._upWC)),(f||p)&&(e._rightWC=A.Z.multiplyByPointAsVector(m,h,e._rightWC),r.Z.normalize(e._rightWC,e._rightWC)),(a||l||d||f||p)&&N(e)}function j(e,t){let n;return n=b.Z.equalsEpsilon(Math.abs(e.z),1,b.Z.EPSILON3)?Math.atan2(t.y,t.x)-b.Z.PI_OVER_TWO:Math.atan2(e.y,e.x)-b.Z.PI_OVER_TWO,b.Z.TWO_PI-b.Z.zeroToTwoPi(n)}function W(e){return b.Z.PI_OVER_TWO-b.Z.acosClamped(e.z)}function q(e,t,n){let i=0;return b.Z.equalsEpsilon(Math.abs(e.z),1,b.Z.EPSILON3)||(i=Math.atan2(-n.z,t.z),i=b.Z.zeroToTwoPi(i+b.Z.TWO_PI)),i}const Y=new A.Z,X=new A.Z;Object.defineProperties(L.prototype,{transform:{get:function(){return this._transform}},inverseTransform:{get:function(){return G(this),this._invTransform}},viewMatrix:{get:function(){return G(this),this._viewMatrix}},inverseViewMatrix:{get:function(){return G(this),this._invViewMatrix}},positionCartographic:{get:function(){return G(this),this._positionCartographic}},positionWC:{get:function(){return G(this),this._positionWC}},directionWC:{get:function(){return G(this),this._directionWC}},upWC:{get:function(){return G(this),this._upWC}},rightWC:{get:function(){return G(this),this._rightWC}},heading:{get:function(){if(this._mode!==O.Z.MORPHING){const e=this._projection.ellipsoid,t=A.Z.clone(this._transform,Y),n=I.Z.eastNorthUpToFixedFrame(this.positionWC,e,X);this._setTransform(n);const i=j(this.direction,this.up);return this._setTransform(t),i}}},pitch:{get:function(){if(this._mode!==O.Z.MORPHING){const e=this._projection.ellipsoid,t=A.Z.clone(this._transform,Y),n=I.Z.eastNorthUpToFixedFrame(this.positionWC,e,X);this._setTransform(n);const i=W(this.direction);return this._setTransform(t),i}}},roll:{get:function(){if(this._mode!==O.Z.MORPHING){const e=this._projection.ellipsoid,t=A.Z.clone(this._transform,Y),n=I.Z.eastNorthUpToFixedFrame(this.positionWC,e,X);this._setTransform(n);const i=q(this.direction,this.up,this.right);return this._setTransform(t),i}}},moveStart:{get:function(){return this._moveStart}},moveEnd:{get:function(){return this._moveEnd}},changed:{get:function(){return this._changed}}}),L.prototype.update=function(e){if(!(0,l.Z)(e))throw new u.Z("mode is required.");if(e===O.Z.SCENE2D&&!(this.frustum instanceof w.Z))throw new u.Z("An OrthographicOffCenterFrustum is required in 2D.");if(!(e!==O.Z.SCENE3D&&e!==O.Z.COLUMBUS_VIEW||this.frustum instanceof E.Z||this.frustum instanceof T.Z))throw new u.Z("A PerspectiveFrustum or OrthographicFrustum is required in 3D and Columbus view");let t=!1;if(e!==this._mode&&(this._mode=e,this._modeChanged=e!==O.Z.MORPHING,t=this._mode===O.Z.SCENE2D),t){const e=this._max2Dfrustum=this.frustum.clone();if(!(e instanceof w.Z))throw new u.Z("The camera frustum is expected to be orthographic for 2D camera control.");const t=2,n=e.top/e.right;e.right=this._maxCoord.x*t,e.left=-e.right,e.top=n*e.right,e.bottom=-e.top}this._mode===O.Z.SCENE2D&&ge(this,this.position)};const J=new r.Z,Q=new r.Z,$=new r.Z;L.prototype._setTransform=function(e){const t=r.Z.clone(this.positionWC,J),n=r.Z.clone(this.upWC,Q),i=r.Z.clone(this.directionWC,$);A.Z.clone(e,this._transform),this._transformChanged=!0,G(this);const o=this._actualInvTransform;A.Z.multiplyByPoint(o,t,this.position),A.Z.multiplyByPointAsVector(o,i,this.direction),A.Z.multiplyByPointAsVector(o,n,this.up),r.Z.cross(this.direction,this.up,this.right),G(this)};const K=new o.Z,ee=new C.Z,te=new r.Z,ne=new r.Z;function ie(e){if(!A.Z.equals(A.Z.IDENTITY,e.transform))return r.Z.magnitude(e.position);const t=e._scene,n=t.globe,i=K;let o,s,a;if(i.x=t.drawingBufferWidth/2,i.y=t.drawingBufferHeight/2,(0,l.Z)(n)){const r=e.getPickRay(i,ee);o=n.pickWorldCoordinates(r,t,!0,te)}if(t.pickPositionSupported&&(s=t.pickPositionWorldCoordinates(i,ne)),(0,l.Z)(o)||(0,l.Z)(s)){const t=(0,l.Z)(s)?r.Z.distance(s,e.positionWC):Number.POSITIVE_INFINITY,n=(0,l.Z)(o)?r.Z.distance(o,e.positionWC):Number.POSITIVE_INFINITY;a=Math.min(t,n)}else a=Math.max(e.positionCartographic.height,0);return a}L.prototype._adjustOrthographicFrustum=function(e){this.frustum instanceof T.Z&&(!e&&this._positionCartographic.height<15e4||(this.frustum.width=ie(this)))};const oe=new r.Z,re=new A.Z,se=new A.Z,ae=new S.Z,ce=new v.Z,le=new a.Z,ue=new r.Z,de=new r.Z,he=new r.Z;function fe(e,t,n,i){const o=r.Z.clone(n.direction,ue),s=r.Z.clone(n.up,de);if(e._scene.mode===O.Z.SCENE3D){const n=e._projection.ellipsoid,i=I.Z.eastNorthUpToFixedFrame(t,n,Y),r=A.Z.inverseTransformation(i,X);A.Z.multiplyByPointAsVector(r,o,o),A.Z.multiplyByPointAsVector(r,s,s)}const a=r.Z.cross(o,s,he);return i.heading=j(o,s),i.pitch=W(o),i.roll=q(o,s,a),i}const pe={destination:void 0,orientation:{direction:void 0,up:void 0,heading:void 0,pitch:void 0,roll:void 0},convert:void 0,endTransform:void 0},me=new g.Z;L.prototype.setView=function(e){e=(0,c.Z)(e,c.Z.EMPTY_OBJECT);let t=(0,c.Z)(e.orientation,c.Z.EMPTY_OBJECT);const n=this._mode;if(n===O.Z.MORPHING)return;(0,l.Z)(e.endTransform)&&this._setTransform(e.endTransform);let i=(0,c.Z)(e.convert,!0),s=(0,c.Z)(e.destination,r.Z.clone(this.positionWC,oe));(0,l.Z)(s)&&(0,l.Z)(s.west)&&(s=this.getRectangleCameraCoordinates(s,oe),i=!1),(0,l.Z)(t.direction)&&(t=fe(this,s,t,pe.orientation)),me.heading=(0,c.Z)(t.heading,0),me.pitch=(0,c.Z)(t.pitch,-b.Z.PI_OVER_TWO),me.roll=(0,c.Z)(t.roll,0),n===O.Z.SCENE3D?function(e,t,n){const i=A.Z.clone(e.transform,re),o=I.Z.eastNorthUpToFixedFrame(t,e._projection.ellipsoid,se);e._setTransform(o),r.Z.clone(r.Z.ZERO,e.position),n.heading=n.heading-b.Z.PI_OVER_TWO;const s=S.Z.fromHeadingPitchRoll(n,ae),a=v.Z.fromQuaternion(s,ce);v.Z.getColumn(a,0,e.direction),v.Z.getColumn(a,2,e.up),r.Z.cross(e.direction,e.up,e.right),e._setTransform(i),e._adjustOrthographicFrustum(!0)}(this,s,me):n===O.Z.SCENE2D?function(e,t,n,i){const s=A.Z.clone(e.transform,re);if(e._setTransform(A.Z.IDENTITY),!r.Z.equals(t,e.positionWC)){if(i){const n=e._projection,i=n.ellipsoid.cartesianToCartographic(t,le);t=n.project(i,oe)}o.Z.clone(t,e.position);const n=.5*-t.z,r=-n,s=e.frustum;if(r>n){const e=s.top/s.right;s.right=r,s.left=n,s.top=s.right*e,s.bottom=-s.top}}if(e._scene.mapMode2D===D.Z.ROTATE){n.heading=n.heading-b.Z.PI_OVER_TWO,n.pitch=-b.Z.PI_OVER_TWO,n.roll=0;const t=S.Z.fromHeadingPitchRoll(n,ae),i=v.Z.fromQuaternion(t,ce);v.Z.getColumn(i,2,e.up),r.Z.cross(e.direction,e.up,e.right)}e._setTransform(s)}(this,s,me,i):function(e,t,n,i){const o=A.Z.clone(e.transform,re);if(e._setTransform(A.Z.IDENTITY),!r.Z.equals(t,e.positionWC)){if(i){const n=e._projection,i=n.ellipsoid.cartesianToCartographic(t,le);t=n.project(i,oe)}r.Z.clone(t,e.position)}n.heading=n.heading-b.Z.PI_OVER_TWO;const s=S.Z.fromHeadingPitchRoll(n,ae),a=v.Z.fromQuaternion(s,ce);v.Z.getColumn(a,0,e.direction),v.Z.getColumn(a,2,e.up),r.Z.cross(e.direction,e.up,e.right),e._setTransform(o),e._adjustOrthographicFrustum(!0)}(this,s,me,i)};const _e=new r.Z;function ge(e,t){const n=e._scene.mapMode2D===D.Z.ROTATE,i=e._maxCoord.x,o=e._maxCoord.y;let r,s;n?(s=i,r=-s):(s=t.x-2*i,r=t.x+2*i),t.x>i&&(t.x=s),t.x<-i&&(t.x=r),t.y>o&&(t.y=o),t.y<-o&&(t.y=-o)}L.prototype.flyHome=function(e){const t=this._mode;if(t===O.Z.MORPHING&&this._scene.completeMorph(),t===O.Z.SCENE2D)this.flyTo({destination:L.DEFAULT_VIEW_RECTANGLE,duration:e,endTransform:A.Z.IDENTITY});else if(t===O.Z.SCENE3D){const t=this.getRectangleCameraCoordinates(L.DEFAULT_VIEW_RECTANGLE);let n=r.Z.magnitude(t);n+=n*L.DEFAULT_VIEW_FACTOR,r.Z.normalize(t,t),r.Z.multiplyByScalar(t,n,t),this.flyTo({destination:t,duration:e,endTransform:A.Z.IDENTITY})}else if(t===O.Z.COLUMBUS_VIEW){const t=this._projection.ellipsoid.maximumRadius;let n=new r.Z(0,-1,1);n=r.Z.multiplyByScalar(r.Z.normalize(n,n),5*t,n),this.flyTo({destination:n,duration:e,orientation:{heading:0,pitch:-Math.acos(r.Z.normalize(n,_e).z),roll:0},endTransform:A.Z.IDENTITY,convert:!1})}},L.prototype.worldToCameraCoordinates=function(e,t){if(!(0,l.Z)(e))throw new u.Z("cartesian is required.");return(0,l.Z)(t)||(t=new s.Z),G(this),A.Z.multiplyByVector(this._actualInvTransform,e,t)},L.prototype.worldToCameraCoordinatesPoint=function(e,t){if(!(0,l.Z)(e))throw new u.Z("cartesian is required.");return(0,l.Z)(t)||(t=new r.Z),G(this),A.Z.multiplyByPoint(this._actualInvTransform,e,t)},L.prototype.worldToCameraCoordinatesVector=function(e,t){if(!(0,l.Z)(e))throw new u.Z("cartesian is required.");return(0,l.Z)(t)||(t=new r.Z),G(this),A.Z.multiplyByPointAsVector(this._actualInvTransform,e,t)},L.prototype.cameraToWorldCoordinates=function(e,t){if(!(0,l.Z)(e))throw new u.Z("cartesian is required.");return(0,l.Z)(t)||(t=new s.Z),G(this),A.Z.multiplyByVector(this._actualTransform,e,t)},L.prototype.cameraToWorldCoordinatesPoint=function(e,t){if(!(0,l.Z)(e))throw new u.Z("cartesian is required.");return(0,l.Z)(t)||(t=new r.Z),G(this),A.Z.multiplyByPoint(this._actualTransform,e,t)},L.prototype.cameraToWorldCoordinatesVector=function(e,t){if(!(0,l.Z)(e))throw new u.Z("cartesian is required.");return(0,l.Z)(t)||(t=new r.Z),G(this),A.Z.multiplyByPointAsVector(this._actualTransform,e,t)};const Ze=new r.Z;L.prototype.move=function(e,t){if(!(0,l.Z)(e))throw new u.Z("direction is required.");const n=this.position;r.Z.multiplyByScalar(e,t,Ze),r.Z.add(n,Ze,n),this._mode===O.Z.SCENE2D&&ge(this,n),this._adjustOrthographicFrustum(!0)},L.prototype.moveForward=function(e){e=(0,c.Z)(e,this.defaultMoveAmount),this._mode===O.Z.SCENE2D?Ie(this,e):this.move(this.direction,e)},L.prototype.moveBackward=function(e){e=(0,c.Z)(e,this.defaultMoveAmount),this._mode===O.Z.SCENE2D?Ie(this,-e):this.move(this.direction,-e)},L.prototype.moveUp=function(e){e=(0,c.Z)(e,this.defaultMoveAmount),this.move(this.up,e)},L.prototype.moveDown=function(e){e=(0,c.Z)(e,this.defaultMoveAmount),this.move(this.up,-e)},L.prototype.moveRight=function(e){e=(0,c.Z)(e,this.defaultMoveAmount),this.move(this.right,e)},L.prototype.moveLeft=function(e){e=(0,c.Z)(e,this.defaultMoveAmount),this.move(this.right,-e)},L.prototype.lookLeft=function(e){e=(0,c.Z)(e,this.defaultLookAmount),this._mode!==O.Z.SCENE2D&&this.look(this.up,-e)},L.prototype.lookRight=function(e){e=(0,c.Z)(e,this.defaultLookAmount),this._mode!==O.Z.SCENE2D&&this.look(this.up,e)},L.prototype.lookUp=function(e){e=(0,c.Z)(e,this.defaultLookAmount),this._mode!==O.Z.SCENE2D&&this.look(this.right,-e)},L.prototype.lookDown=function(e){e=(0,c.Z)(e,this.defaultLookAmount),this._mode!==O.Z.SCENE2D&&this.look(this.right,e)};const ye=new S.Z,be=new v.Z;L.prototype.look=function(e,t){if(!(0,l.Z)(e))throw new u.Z("axis is required.");const n=(0,c.Z)(t,this.defaultLookAmount),i=S.Z.fromAxisAngle(e,-n,ye),o=v.Z.fromQuaternion(i,be),r=this.direction,s=this.up,a=this.right;v.Z.multiplyByVector(o,r,r),v.Z.multiplyByVector(o,s,s),v.Z.multiplyByVector(o,a,a)},L.prototype.twistLeft=function(e){e=(0,c.Z)(e,this.defaultLookAmount),this.look(this.direction,e)},L.prototype.twistRight=function(e){e=(0,c.Z)(e,this.defaultLookAmount),this.look(this.direction,-e)};const ve=new S.Z,Ae=new v.Z;L.prototype.rotate=function(e,t){if(!(0,l.Z)(e))throw new u.Z("axis is required.");const n=(0,c.Z)(t,this.defaultRotateAmount),i=S.Z.fromAxisAngle(e,-n,ve),o=v.Z.fromQuaternion(i,Ae);v.Z.multiplyByVector(o,this.position,this.position),v.Z.multiplyByVector(o,this.direction,this.direction),v.Z.multiplyByVector(o,this.up,this.up),r.Z.cross(this.direction,this.up,this.right),r.Z.cross(this.right,this.direction,this.up),this._adjustOrthographicFrustum(!1)},L.prototype.rotateDown=function(e){Ce(this,e=(0,c.Z)(e,this.defaultRotateAmount))},L.prototype.rotateUp=function(e){Ce(this,-(e=(0,c.Z)(e,this.defaultRotateAmount)))};const Te=new r.Z,we=new r.Z,Ee=new r.Z,Se=new r.Z;function Ce(e,t){const n=e.position;if((0,l.Z)(e.constrainedAxis)&&!r.Z.equalsEpsilon(e.position,r.Z.ZERO,b.Z.EPSILON2)){const i=r.Z.normalize(n,Te),o=r.Z.equalsEpsilon(i,e.constrainedAxis,b.Z.EPSILON2),s=r.Z.equalsEpsilon(i,r.Z.negate(e.constrainedAxis,Se),b.Z.EPSILON2);if(o||s)(o&&t<0||s&&t>0)&&e.rotate(e.right,t);else{const n=r.Z.normalize(e.constrainedAxis,we);let o=r.Z.dot(i,n),s=b.Z.acosClamped(o);t>0&&t>s&&(t=s-b.Z.EPSILON4),o=r.Z.dot(i,r.Z.negate(n,Se)),s=b.Z.acosClamped(o),t<0&&-t>s&&(t=-s+b.Z.EPSILON4);const a=r.Z.cross(n,i,Ee);e.rotate(a,t)}}else e.rotate(e.right,t)}function xe(e,t){(0,l.Z)(e.constrainedAxis)?e.rotate(e.constrainedAxis,t):e.rotate(e.up,t)}function Ie(e,t){const n=e.frustum;if(!(n instanceof w.Z&&(0,l.Z)(n.left)&&(0,l.Z)(n.right)&&(0,l.Z)(n.bottom)&&(0,l.Z)(n.top)))throw new u.Z("The camera frustum is expected to be orthographic for 2D camera control.");let i;if(t*=.5,Math.abs(n.top)+Math.abs(n.bottom)>Math.abs(n.left)+Math.abs(n.right)){let o=n.top-t,r=n.bottom+t,s=e._maxCoord.y;e._scene.mapMode2D===D.Z.ROTATE&&(s*=e.maximumZoomFactor),r>s&&(r=s,o=-s),o<=r&&(o=1,r=-1),i=n.right/n.top,n.top=o,n.bottom=r,n.right=n.top*i,n.left=-n.right}else{let o=n.right-t,r=n.left+t,s=e._maxCoord.x;e._scene.mapMode2D===D.Z.ROTATE&&(s*=e.maximumZoomFactor),o>s&&(o=s,r=-s),o<=r&&(o=1,r=-1),i=n.top/n.right,n.right=o,n.left=r,n.top=n.right*i,n.bottom=-n.top}}function Pe(e,t){e.move(e.direction,t)}L.prototype.rotateRight=function(e){xe(this,-(e=(0,c.Z)(e,this.defaultRotateAmount)))},L.prototype.rotateLeft=function(e){xe(this,e=(0,c.Z)(e,this.defaultRotateAmount))},L.prototype.zoomIn=function(e){e=(0,c.Z)(e,this.defaultZoomAmount),this._mode===O.Z.SCENE2D?Ie(this,e):Pe(this,e)},L.prototype.zoomOut=function(e){e=(0,c.Z)(e,this.defaultZoomAmount),this._mode===O.Z.SCENE2D?Ie(this,-e):Pe(this,-e)},L.prototype.getMagnitude=function(){return this._mode===O.Z.SCENE3D?r.Z.magnitude(this.position):this._mode===O.Z.COLUMBUS_VIEW?Math.abs(this.position.z):this._mode===O.Z.SCENE2D?Math.max(this.frustum.right-this.frustum.left,this.frustum.top-this.frustum.bottom):void 0};const De=new A.Z;L.prototype.lookAt=function(e,t){if(!(0,l.Z)(e))throw new u.Z("target is required");if(!(0,l.Z)(t))throw new u.Z("offset is required");if(this._mode===O.Z.MORPHING)throw new u.Z("lookAt is not supported while morphing.");const n=I.Z.eastNorthUpToFixedFrame(e,h.Z.WGS84,De);this.lookAtTransform(n,t)};const Oe=new r.Z,Le=new S.Z,Ne=new S.Z,Me=new v.Z;function Re(e,t,n){t=b.Z.clamp(t,-b.Z.PI_OVER_TWO,b.Z.PI_OVER_TWO),e=b.Z.zeroToTwoPi(e)-b.Z.PI_OVER_TWO;const i=S.Z.fromAxisAngle(r.Z.UNIT_Y,-t,Le),o=S.Z.fromAxisAngle(r.Z.UNIT_Z,-e,Ne),s=S.Z.multiply(o,i,o),a=v.Z.fromQuaternion(s,Me),c=r.Z.clone(r.Z.UNIT_X,Oe);return v.Z.multiplyByVector(a,c,c),r.Z.negate(c,c),r.Z.multiplyByScalar(c,n,c),c}L.prototype.lookAtTransform=function(e,t){if(!(0,l.Z)(e))throw new u.Z("transform is required");if(this._mode===O.Z.MORPHING)throw new u.Z("lookAtTransform is not supported while morphing.");if(this._setTransform(e),!(0,l.Z)(t))return;let n;if(n=(0,l.Z)(t.heading)?Re(t.heading,t.pitch,t.range):t,this._mode===O.Z.SCENE2D){o.Z.clone(o.Z.ZERO,this.position),r.Z.negate(n,this.up),this.up.z=0,r.Z.magnitudeSquared(this.up)<b.Z.EPSILON10&&r.Z.clone(r.Z.UNIT_Y,this.up),r.Z.normalize(this.up,this.up),this._setTransform(A.Z.IDENTITY),r.Z.negate(r.Z.UNIT_Z,this.direction),r.Z.cross(this.direction,this.up,this.right),r.Z.normalize(this.right,this.right);const t=this.frustum,i=t.top/t.right;return t.right=.5*r.Z.magnitude(n),t.left=-t.right,t.top=i*t.right,t.bottom=-t.top,void this._setTransform(e)}r.Z.clone(n,this.position),r.Z.negate(this.position,this.direction),r.Z.normalize(this.direction,this.direction),r.Z.cross(this.direction,r.Z.UNIT_Z,this.right),r.Z.magnitudeSquared(this.right)<b.Z.EPSILON10&&r.Z.clone(r.Z.UNIT_X,this.right),r.Z.normalize(this.right,this.right),r.Z.cross(this.right,this.direction,this.up),r.Z.normalize(this.up,this.up),this._adjustOrthographicFrustum(!0)};const Fe=new a.Z,Be=new a.Z,Ue=new r.Z,ke=new r.Z,Ve=new r.Z,He=new r.Z,ze=new r.Z,Ge=new r.Z,je=new r.Z,We=new r.Z,qe={direction:new r.Z,right:new r.Z,up:new r.Z};let Ye;function Xe(e,t,n,i){return Math.abs(r.Z.dot(t,n))/i-r.Z.dot(e,n)}function Je(e,t,n,i){const o=e._projection.ellipsoid,s=i?e:qe,a=t.north,c=t.south;let u=t.east;const d=t.west;d>u&&(u+=b.Z.TWO_PI);const h=.5*(d+u);let p;if(c<-b.Z.PI_OVER_TWO+b.Z.RADIANS_PER_DEGREE&&a>b.Z.PI_OVER_TWO-b.Z.RADIANS_PER_DEGREE)p=0;else{const e=Fe;e.longitude=h,e.latitude=a,e.height=0;const t=Be;t.longitude=h,t.latitude=c,t.height=0;let n=Ye;(0,l.Z)(n)&&n.ellipsoid===o||(Ye=n=new f.Z(void 0,void 0,o)),n.setEndPoints(e,t),p=n.interpolateUsingFraction(.5,Fe).latitude}const m=Fe;m.longitude=h,m.latitude=p,m.height=0;const _=o.cartographicToCartesian(m,je),g=Fe;g.longitude=u,g.latitude=a;const Z=o.cartographicToCartesian(g,Ue);g.longitude=d;const y=o.cartographicToCartesian(g,Ve);g.longitude=h;const v=o.cartographicToCartesian(g,ze);g.latitude=c;const A=o.cartographicToCartesian(g,Ge);g.longitude=u;const w=o.cartographicToCartesian(g,He);g.longitude=d;const E=o.cartographicToCartesian(g,ke);r.Z.subtract(y,_,y),r.Z.subtract(w,_,w),r.Z.subtract(Z,_,Z),r.Z.subtract(E,_,E),r.Z.subtract(v,_,v),r.Z.subtract(A,_,A);const S=o.geodeticSurfaceNormal(_,s.direction);r.Z.negate(S,S);const C=r.Z.cross(S,r.Z.UNIT_Z,s.right);r.Z.normalize(C,C);const x=r.Z.cross(C,S,s.up);let I;if(e.frustum instanceof T.Z){const t=Math.max(r.Z.distance(Z,y),r.Z.distance(w,E)),n=Math.max(r.Z.distance(Z,w),r.Z.distance(y,E));let i,o;const s=e.frustum._offCenterFrustum,a=s.right/s.top,c=n*a;t>c?(i=t,o=i/a):(o=n,i=c),I=Math.max(i,o)}else{const t=Math.tan(.5*e.frustum.fovy),n=e.frustum.aspectRatio*t;if(I=Math.max(Xe(S,x,y,t),Xe(S,x,w,t),Xe(S,x,Z,t),Xe(S,x,E,t),Xe(S,x,v,t),Xe(S,x,A,t),Xe(S,C,y,n),Xe(S,C,w,n),Xe(S,C,Z,n),Xe(S,C,E,n),Xe(S,C,v,n),Xe(S,C,A,n)),c<0&&a>0){const e=Fe;e.longitude=d,e.latitude=0,e.height=0;let i=o.cartographicToCartesian(e,We);r.Z.subtract(i,_,i),I=Math.max(I,Xe(S,x,i,t),Xe(S,C,i,n)),e.longitude=u,i=o.cartographicToCartesian(e,We),r.Z.subtract(i,_,i),I=Math.max(I,Xe(S,x,i,t),Xe(S,C,i,n))}}return r.Z.add(_,r.Z.multiplyByScalar(S,-I,We),n)}const Qe=new a.Z,$e=new r.Z,Ke=new r.Z,et=new a.Z,tt=new r.Z,nt=new r.Z;L.prototype.getRectangleCameraCoordinates=function(e,t){if(!(0,l.Z)(e))throw new u.Z("rectangle is required");const n=this._mode;return(0,l.Z)(t)||(t=new r.Z),n===O.Z.SCENE3D?Je(this,e,t):n===O.Z.COLUMBUS_VIEW?function(e,t,n){const i=e._projection;t.west>t.east&&(t=x.Z.MAX_VALUE);const o=e._actualTransform,r=e._actualInvTransform,s=Qe;s.longitude=t.east,s.latitude=t.north;const a=i.project(s,$e);A.Z.multiplyByPoint(o,a,a),A.Z.multiplyByPoint(r,a,a),s.longitude=t.west,s.latitude=t.south;const c=i.project(s,Ke);if(A.Z.multiplyByPoint(o,c,c),A.Z.multiplyByPoint(r,c,c),n.x=.5*(a.x-c.x)+c.x,n.y=.5*(a.y-c.y)+c.y,(0,l.Z)(e.frustum.fovy)){const t=Math.tan(.5*e.frustum.fovy),i=e.frustum.aspectRatio*t;n.z=.5*Math.max((a.x-c.x)/i,(a.y-c.y)/t)}else{const e=a.x-c.x,t=a.y-c.y;n.z=Math.max(e,t)}return n}(this,e,t):n===O.Z.SCENE2D?function(e,t,n){const i=e._projection;let o=t.east;t.west>t.east&&(e._scene.mapMode2D===D.Z.INFINITE_SCROLL?o+=b.Z.TWO_PI:o=(t=x.Z.MAX_VALUE).east);let r=et;r.longitude=o,r.latitude=t.north;const s=i.project(r,tt);r.longitude=t.west,r.latitude=t.south;const a=i.project(r,nt),c=.5*Math.abs(s.x-a.x);let l,u,d=.5*Math.abs(s.y-a.y);const h=e.frustum.right/e.frustum.top,f=d*h;return c>f?(l=c,u=l/h):(u=d,l=f),d=Math.max(2*l,2*u),n.x=.5*(s.x-a.x)+a.x,n.y=.5*(s.y-a.y)+a.y,r=i.unproject(n,r),r.height=d,i.project(r,n)}(this,e,t):void 0};const it=new C.Z,ot=new C.Z,rt=new C.Z;L.prototype.pickEllipsoid=function(e,t,n){if(!(0,l.Z)(e))throw new u.Z("windowPosition is required.");const i=this._scene.canvas;if(0!==i.clientWidth&&0!==i.clientHeight){if((0,l.Z)(n)||(n=new r.Z),t=(0,c.Z)(t,h.Z.WGS84),this._mode===O.Z.SCENE3D)n=function(e,t,n,i){n=(0,c.Z)(n,h.Z.WGS84);const o=e.getPickRay(t,it),r=y.Z.rayEllipsoid(o,n);if(!r)return;const s=r.start>0?r.start:r.stop;return C.Z.getPoint(o,s,i)}(this,e,t,n);else if(this._mode===O.Z.SCENE2D)n=function(e,t,n,i){let o=e.getPickRay(t,ot).origin;o=r.Z.fromElements(o.y,o.z,0,o);const s=n.unproject(o);if(!(s.latitude<-b.Z.PI_OVER_TWO||s.latitude>b.Z.PI_OVER_TWO))return n.ellipsoid.cartographicToCartesian(s,i)}(this,e,this._projection,n);else{if(this._mode!==O.Z.COLUMBUS_VIEW)return;n=function(e,t,n,i){const o=e.getPickRay(t,rt),s=-o.origin.x/o.direction.x;C.Z.getPoint(o,s,i);const a=n.unproject(new r.Z(i.y,i.z,0));if(!(a.latitude<-b.Z.PI_OVER_TWO||a.latitude>b.Z.PI_OVER_TWO||a.longitude<-Math.PI||a.longitude>Math.PI))return n.ellipsoid.cartographicToCartesian(a,i)}(this,e,this._projection,n)}return n}};const st=new r.Z,at=new r.Z,ct=new r.Z,lt=new r.Z;L.prototype.getPickRay=function(e,t){if(!(0,l.Z)(e))throw new u.Z("windowPosition is required.");(0,l.Z)(t)||(t=new C.Z);const n=this._scene.canvas;if(n.clientWidth<=0||n.clientHeight<=0)return;const i=this.frustum;return(0,l.Z)(i.aspectRatio)&&(0,l.Z)(i.fov)&&(0,l.Z)(i.near)?function(e,t,n){const i=e._scene.canvas,o=i.clientWidth,s=i.clientHeight,a=Math.tan(.5*e.frustum.fovy),c=e.frustum.aspectRatio*a,l=e.frustum.near,u=2/o*t.x-1,d=2/s*(s-t.y)-1,h=e.positionWC;r.Z.clone(h,n.origin);const f=r.Z.multiplyByScalar(e.directionWC,l,st);r.Z.add(h,f,f);const p=r.Z.multiplyByScalar(e.rightWC,u*l*c,at),m=r.Z.multiplyByScalar(e.upWC,d*l*a,ct),_=r.Z.add(f,p,n.direction);return r.Z.add(_,m,_),r.Z.subtract(_,h,_),r.Z.normalize(_,_),n}(this,e,t):function(e,t,n){const i=e._scene.canvas,o=i.clientWidth,s=i.clientHeight;let a=e.frustum;const c=a.offCenterFrustum;(0,l.Z)(c)&&(a=c);let u=2/o*t.x-1;u*=.5*(a.right-a.left);let d=2/s*(s-t.y)-1;d*=.5*(a.top-a.bottom);const h=n.origin;return r.Z.clone(e.position,h),r.Z.multiplyByScalar(e.right,u,lt),r.Z.add(lt,h,h),r.Z.multiplyByScalar(e.up,d,lt),r.Z.add(lt,h,h),r.Z.clone(e.directionWC,n.direction),e._mode!==O.Z.COLUMBUS_VIEW&&e._mode!==O.Z.SCENE2D||r.Z.fromElements(n.origin.z,n.origin.x,n.origin.y,n.origin),n}(this,e,t)};const ut=new r.Z,dt=new r.Z;L.prototype.distanceToBoundingSphere=function(e){if(!(0,l.Z)(e))throw new u.Z("boundingSphere is required.");const t=r.Z.subtract(this.positionWC,e.center,ut),n=r.Z.multiplyByScalar(this.directionWC,r.Z.dot(t,this.directionWC),dt);return Math.max(0,r.Z.magnitude(n)-e.radius)};const ht=new o.Z;L.prototype.getPixelSize=function(e,t,n){if(!(0,l.Z)(e))throw new u.Z("boundingSphere is required.");if(!(0,l.Z)(t))throw new u.Z("drawingBufferWidth is required.");if(!(0,l.Z)(n))throw new u.Z("drawingBufferHeight is required.");const i=this.distanceToBoundingSphere(e),o=this.frustum.getPixelDimensions(t,n,i,this._scene.pixelRatio,ht);return Math.max(o.x,o.y)};const ft=new r.Z,pt=new r.Z,mt=new r.Z,_t=new r.Z;L.prototype.createCorrectPositionTween=function(e){if(!(0,l.Z)(e))throw new u.Z("duration is required.");if(this._mode===O.Z.COLUMBUS_VIEW)return function(e,t){let n=e.position;const i=e.direction,o=e.worldToCameraCoordinatesVector(r.Z.UNIT_X,ft),s=-r.Z.dot(o,n)/r.Z.dot(o,i),a=r.Z.add(n,r.Z.multiplyByScalar(i,s,pt),pt);e.cameraToWorldCoordinatesPoint(a,a),n=e.cameraToWorldCoordinatesPoint(e.position,mt);const c=Math.tan(.5*e.frustum.fovy),l=e.frustum.aspectRatio*c,u=r.Z.magnitude(r.Z.subtract(n,a,_t)),h=l*u,f=c*u,p=e._maxCoord.x,m=e._maxCoord.y,_=Math.max(h-p,p),g=Math.max(f-m,m);if(n.z<-_||n.z>_||n.y<-g||n.y>g){const i=a.y<-_||a.y>_,o=a.z<-g||a.z>g;if(i||o)return function(e,t,n,i,o,s){const a=r.Z.clone(t);return n.y>i?a.y-=n.y-i:n.y<-i&&(a.y+=-i-n.y),n.z>o?a.z-=n.z-o:n.z<-o&&(a.z+=-o-n.z),{easingFunction:d.Z.EXPONENTIAL_OUT,startObject:{time:0},stopObject:{time:1},duration:s,update:function(n){const i=r.Z.lerp(t,a,n.time,new r.Z);e.worldToCameraCoordinatesPoint(i,e.position)}}}(e,n,a,_,g,t)}}(this,e)};const gt=new r.Z,Zt={destination:void 0,heading:void 0,pitch:void 0,roll:void 0,duration:void 0,complete:void 0,cancel:void 0,endTransform:void 0,maximumHeight:void 0,easingFunction:void 0};function yt(e,t,n){n=_.Z.clone((0,l.Z)(n)?n:L.DEFAULT_OFFSET);const i=e._scene.screenSpaceCameraController.minimumZoomDistance,o=e._scene.screenSpaceCameraController.maximumZoomDistance,r=n.range;if(!(0,l.Z)(r)||0===r){const r=t.radius;0===r?n.range=100:e.frustum instanceof T.Z||e._mode===O.Z.SCENE2D?n.range=function(e,t){let n=e.frustum;const i=n.offCenterFrustum;let o,r;(0,l.Z)(i)&&(n=i);const s=n.right/n.top,a=t*s;return t>a?(o=t,r=o/s):(r=t,o=a),1.5*Math.max(o,r)}(e,r):n.range=function(e,t){const n=e.frustum,i=Math.tan(.5*n.fovy),o=n.aspectRatio*i;return Math.max(t/o,t/i)}(e,r),n.range=b.Z.clamp(n.range,i,o)}return n}L.prototype.cancelFlight=function(){(0,l.Z)(this._currentFlight)&&(this._currentFlight.cancelTween(),this._currentFlight=void 0)},L.prototype.completeFlight=function(){if((0,l.Z)(this._currentFlight)){this._currentFlight.cancelTween();const e={destination:void 0,orientation:{heading:void 0,pitch:void 0,roll:void 0}};e.destination=Zt.destination,e.orientation.heading=Zt.heading,e.orientation.pitch=Zt.pitch,e.orientation.roll=Zt.roll,this.setView(e),(0,l.Z)(this._currentFlight.complete)&&this._currentFlight.complete(),this._currentFlight=void 0}},L.prototype.flyTo=function(e){let t=(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT)).destination;if(!(0,l.Z)(t))throw new u.Z("destination is required.");if(this._mode===O.Z.MORPHING)return;this.cancelFlight();const n=t instanceof x.Z;n&&(t=this.getRectangleCameraCoordinates(t,gt));let i=(0,c.Z)(e.orientation,c.Z.EMPTY_OBJECT);if((0,l.Z)(i.direction)&&(i=fe(this,t,i,pe.orientation)),(0,l.Z)(e.duration)&&e.duration<=0){const t=pe;return t.destination=e.destination,t.orientation.heading=i.heading,t.orientation.pitch=i.pitch,t.orientation.roll=i.roll,t.convert=e.convert,t.endTransform=e.endTransform,this.setView(t),void("function"==typeof e.complete&&e.complete())}const o=this;let r;Zt.destination=t,Zt.heading=i.heading,Zt.pitch=i.pitch,Zt.roll=i.roll,Zt.duration=e.duration,Zt.complete=function(){r===o._currentFlight&&(o._currentFlight=void 0),(0,l.Z)(e.complete)&&e.complete()},Zt.cancel=e.cancel,Zt.endTransform=e.endTransform,Zt.convert=!n&&e.convert,Zt.maximumHeight=e.maximumHeight,Zt.pitchAdjustHeight=e.pitchAdjustHeight,Zt.flyOverLongitude=e.flyOverLongitude,Zt.flyOverLongitudeWeight=e.flyOverLongitudeWeight,Zt.easingFunction=e.easingFunction;const s=this._scene,a=P.Z.createTween(s,Zt);if(0===a.duration)return void("function"==typeof a.complete&&a.complete());r=s.tweens.add(a),this._currentFlight=r;let d=this._scene.preloadFlightCamera;this._mode!==O.Z.SCENE2D&&((0,l.Z)(d)||(d=L.clone(this)),d.setView({destination:t,orientation:i}),this._scene.preloadFlightCullingVolume=d.frustum.computeCullingVolume(d.positionWC,d.directionWC,d.upWC))},L.prototype.viewBoundingSphere=function(e,t){if(!(0,l.Z)(e))throw new u.Z("boundingSphere is required.");if(this._mode===O.Z.MORPHING)throw new u.Z("viewBoundingSphere is not supported while morphing.");t=yt(this,e,t),this.lookAt(e.center,t)};const bt=new A.Z,vt=new r.Z,At=new r.Z,Tt=new r.Z,wt=new r.Z,Et=new s.Z,St=new S.Z,Ct=new v.Z;L.prototype.flyToBoundingSphere=function(e,t){if(!(0,l.Z)(e))throw new u.Z("boundingSphere is required.");t=(0,c.Z)(t,c.Z.EMPTY_OBJECT);const n=this._mode===O.Z.SCENE2D||this._mode===O.Z.COLUMBUS_VIEW;this._setTransform(A.Z.IDENTITY);const i=yt(this,e,t.offset);let o;o=n?r.Z.multiplyByScalar(r.Z.UNIT_Z,i.range,vt):Re(i.heading,i.pitch,i.range);const s=I.Z.eastNorthUpToFixedFrame(e.center,h.Z.WGS84,bt);let a,d;if(A.Z.multiplyByPoint(s,o,o),!n){if(a=r.Z.subtract(e.center,o,At),r.Z.normalize(a,a),d=A.Z.multiplyByPointAsVector(s,r.Z.UNIT_Z,Tt),1-Math.abs(r.Z.dot(a,d))<b.Z.EPSILON6){const e=S.Z.fromAxisAngle(a,i.heading,St),t=v.Z.fromQuaternion(e,Ct);r.Z.fromCartesian4(A.Z.getColumn(s,1,Et),d),v.Z.multiplyByVector(t,d,d)}const t=r.Z.cross(a,d,wt);r.Z.cross(t,a,d),r.Z.normalize(d,d)}this.flyTo({destination:o,orientation:{direction:a,up:d},duration:t.duration,complete:t.complete,cancel:t.cancel,endTransform:t.endTransform,maximumHeight:t.maximumHeight,easingFunction:t.easingFunction,flyOverLongitude:t.flyOverLongitude,flyOverLongitudeWeight:t.flyOverLongitudeWeight,pitchAdjustHeight:t.pitchAdjustHeight})};const xt=new r.Z,It=new r.Z,Pt=new r.Z,Dt=new r.Z,Ot=[new r.Z,new r.Z,new r.Z,new r.Z],Lt=new o.Z,Nt=new r.Z,Mt=[new a.Z,new a.Z,new a.Z,new a.Z];function Rt(e,t,n,i,o,r){Lt.x=e,Lt.y=t;const s=i.pickEllipsoid(Lt,o,Nt);return(0,l.Z)(s)?(Mt[n]=o.cartesianToCartographic(s,Mt[n]),1):(Mt[n]=o.cartesianToCartographic(r[n],Mt[n]),0)}L.prototype.computeViewRectangle=function(e,t){e=(0,c.Z)(e,h.Z.WGS84);const n=this.frustum.computeCullingVolume(this.positionWC,this.directionWC,this.upWC),o=new i.Z(r.Z.ZERO,e.maximumRadius);if(n.computeVisibility(o)===Z.Z.OUTSIDE)return;const s=this._scene.canvas,a=s.clientWidth,l=s.clientHeight;let u=0;const d=function(e,t){const n=t.radii,i=e.positionWC,o=r.Z.multiplyComponents(t.oneOverRadii,i,xt),s=r.Z.magnitude(o),a=r.Z.normalize(o,It);let c,l;r.Z.equalsEpsilon(a,r.Z.UNIT_Z,b.Z.EPSILON10)?(c=new r.Z(0,1,0),l=new r.Z(0,0,1)):(c=r.Z.normalize(r.Z.cross(r.Z.UNIT_Z,a,Pt),Pt),l=r.Z.normalize(r.Z.cross(a,c,Dt),Dt));const u=Math.sqrt(r.Z.magnitudeSquared(o)-1),d=r.Z.multiplyByScalar(a,1/s,xt),h=u/s,f=r.Z.multiplyByScalar(c,h,It),p=r.Z.multiplyByScalar(l,h,Pt),m=r.Z.add(d,p,Ot[0]);r.Z.subtract(m,f,m),r.Z.multiplyComponents(n,m,m);const _=r.Z.subtract(d,p,Ot[1]);r.Z.subtract(_,f,_),r.Z.multiplyComponents(n,_,_);const g=r.Z.subtract(d,p,Ot[2]);r.Z.add(g,f,g),r.Z.multiplyComponents(n,g,g);const Z=r.Z.add(d,p,Ot[3]);return r.Z.add(Z,f,Z),r.Z.multiplyComponents(n,Z,Z),Ot}(this,e);if(u+=Rt(0,0,0,this,e,d),u+=Rt(0,l,1,this,e,d),u+=Rt(a,l,2,this,e,d),u+=Rt(a,0,3,this,e,d),u<2)return x.Z.MAX_VALUE;t=x.Z.fromCartographicArray(Mt,t);let f=0,p=Mt[3].longitude;for(let e=0;e<4;++e){const t=Mt[e].longitude,n=Math.abs(t-p);n>b.Z.PI?f+=b.Z.TWO_PI-n:f+=n,p=t}return b.Z.equalsEpsilon(Math.abs(f),b.Z.TWO_PI,b.Z.EPSILON9)&&(t.west=-b.Z.PI,t.east=b.Z.PI,Mt[0].latitude>=0?t.north=b.Z.PI_OVER_TWO:t.south=-b.Z.PI_OVER_TWO),t},L.prototype.switchToPerspectiveFrustum=function(){if(this._mode===O.Z.SCENE2D||this.frustum instanceof E.Z)return;const e=this._scene;this.frustum=new E.Z,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=b.Z.toRadians(60)},L.prototype.switchToOrthographicFrustum=function(){if(this._mode===O.Z.SCENE2D||this.frustum instanceof T.Z)return;const e=ie(this),t=this._scene;this.frustum=new T.Z,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.width=e},L.clone=function(e,t){return(0,l.Z)(t)||(t=new L(e._scene)),r.Z.clone(e.position,t.position),r.Z.clone(e.direction,t.direction),r.Z.clone(e.up,t.up),r.Z.clone(e.right,t.right),A.Z.clone(e._transform,t.transform),t._transformChanged=!0,t.frustum=e.frustum.clone(),t};const Ft=L},899546:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(405254),o=n(11020),r=n(722313),s=n(765153),a=n(568023),c=n(344485),l=n(809069),u=n(271533),d=n(335517);function h(e,t){let n=e;return(0,o.Z)(t)&&(n+=`+${t}`),n}function f(e,t,n){const r=h(d.Z.PINCH,t),s=e._update,a=e._isDown,c=e._eventStartPosition,l=e._pressTime,f=e._releaseTime;s[r]=!0,a[r]=!1,c[r]=new i.Z;let p=e._movement[r];(0,o.Z)(p)||(p=e._movement[r]={}),p.distance={startPosition:new i.Z,endPosition:new i.Z},p.angleAndHeight={startPosition:new i.Z,endPosition:new i.Z},p.prevAngle=0,e._eventHandler.setInputAction((function(t){e._buttonsDown++,a[r]=!0,l[r]=new Date,i.Z.lerp(t.position1,t.position2,.5,c[r])}),u.Z.PINCH_START,t),e._eventHandler.setInputAction((function(){e._buttonsDown=Math.max(e._buttonsDown-1,0),a[r]=!1,f[r]=new Date}),u.Z.PINCH_END,t),e._eventHandler.setInputAction((function(e){if(a[r]){s[r]?(t=e,o=p,i.Z.clone(t.distance.startPosition,o.distance.startPosition),i.Z.clone(t.distance.endPosition,o.distance.endPosition),i.Z.clone(t.angleAndHeight.startPosition,o.angleAndHeight.startPosition),i.Z.clone(t.angleAndHeight.endPosition,o.angleAndHeight.endPosition),s[r]=!1,p.prevAngle=p.angleAndHeight.startPosition.x):(i.Z.clone(e.distance.endPosition,p.distance.endPosition),i.Z.clone(e.angleAndHeight.endPosition,p.angleAndHeight.endPosition));let a=p.angleAndHeight.endPosition.x;const c=p.prevAngle,l=2*Math.PI;for(;a>=c+Math.PI;)a-=l;for(;a<c-Math.PI;)a+=l;p.angleAndHeight.endPosition.x=-a*n.clientWidth/12,p.angleAndHeight.startPosition.x=-c*n.clientWidth/12}var t,o}),u.Z.PINCH_MOVE,t)}function p(e,t){const n=h(d.Z.WHEEL,t),r=e._pressTime,s=e._releaseTime,a=e._update;a[n]=!0;let l=e._movement[n];(0,o.Z)(l)||(l=e._movement[n]={});let f=e._lastMovement[n];(0,o.Z)(f)||(f=e._lastMovement[n]={startPosition:new i.Z,endPosition:new i.Z,valid:!1}),l.startPosition=new i.Z,i.Z.clone(i.Z.ZERO,l.startPosition),l.endPosition=new i.Z,e._eventHandler.setInputAction((function(e){const t=7.5*c.Z.toRadians(e);r[n]=s[n]=new Date,l.endPosition.x=0,l.endPosition.y=t,i.Z.clone(l.endPosition,f.endPosition),f.valid=!0,a[n]=!1}),u.Z.WHEEL,t)}function m(e,t,n){const r=h(n,t),s=e._isDown,a=e._eventStartPosition,c=e._pressTime,l=e._releaseTime;s[r]=!1,a[r]=new i.Z;let f,p,m=e._lastMovement[r];(0,o.Z)(m)||(m=e._lastMovement[r]={startPosition:new i.Z,endPosition:new i.Z,valid:!1}),n===d.Z.LEFT_DRAG?(f=u.Z.LEFT_DOWN,p=u.Z.LEFT_UP):n===d.Z.RIGHT_DRAG?(f=u.Z.RIGHT_DOWN,p=u.Z.RIGHT_UP):n===d.Z.MIDDLE_DRAG&&(f=u.Z.MIDDLE_DOWN,p=u.Z.MIDDLE_UP),e._eventHandler.setInputAction((function(t){e._buttonsDown++,m.valid=!1,s[r]=!0,c[r]=new Date,i.Z.clone(t.position,a[r])}),f,t),e._eventHandler.setInputAction((function(){e._buttonsDown=Math.max(e._buttonsDown-1,0),s[r]=!1,l[r]=new Date}),p,t)}function _(e,t){i.Z.clone(e.startPosition,t.startPosition),i.Z.clone(e.endPosition,t.endPosition)}function g(e,t){const n=e._update,r=e._movement,s=e._lastMovement,a=e._isDown;for(const r in d.Z)if(d.Z.hasOwnProperty(r)){const s=d.Z[r];if((0,o.Z)(s)){const r=h(s,t);n[r]=!0,(0,o.Z)(e._lastMovement[r])||(e._lastMovement[r]={startPosition:new i.Z,endPosition:new i.Z,valid:!1}),(0,o.Z)(e._movement[r])||(e._movement[r]={startPosition:new i.Z,endPosition:new i.Z})}}e._eventHandler.setInputAction((function(c){for(const e in d.Z)if(d.Z.hasOwnProperty(e)){const l=d.Z[e];if((0,o.Z)(l)){const e=h(l,t);a[e]&&(n[e]?(_(r[e],s[e]),s[e].valid=!0,_(c,r[e]),n[e]=!1):i.Z.clone(c.endPosition,r[e].endPosition))}}i.Z.clone(c.endPosition,e._currentMousePosition)}),u.Z.MOUSE_MOVE,t)}function Z(e){if(!(0,o.Z)(e))throw new s.Z("canvas is required.");this._eventHandler=new l.Z(e),this._update={},this._movement={},this._lastMovement={},this._isDown={},this._eventStartPosition={},this._pressTime={},this._releaseTime={},this._buttonsDown=0,this._currentMousePosition=new i.Z,p(this,void 0),f(this,void 0,e),m(this,void 0,d.Z.LEFT_DRAG),m(this,void 0,d.Z.RIGHT_DRAG),m(this,void 0,d.Z.MIDDLE_DRAG),g(this,void 0);for(const t in a.Z)if(a.Z.hasOwnProperty(t)){const n=a.Z[t];(0,o.Z)(n)&&(p(this,n),f(this,n,e),m(this,n,d.Z.LEFT_DRAG),m(this,n,d.Z.RIGHT_DRAG),m(this,n,d.Z.MIDDLE_DRAG),g(this,n))}}Object.defineProperties(Z.prototype,{currentMousePosition:{get:function(){return this._currentMousePosition}},anyButtonDown:{get:function(){const e=!(this._update[h(d.Z.WHEEL)]&&this._update[h(d.Z.WHEEL,a.Z.SHIFT)]&&this._update[h(d.Z.WHEEL,a.Z.CTRL)]&&this._update[h(d.Z.WHEEL,a.Z.ALT)]);return this._buttonsDown>0||e}}}),Z.prototype.isMoving=function(e,t){if(!(0,o.Z)(e))throw new s.Z("type is required.");const n=h(e,t);return!this._update[n]},Z.prototype.getMovement=function(e,t){if(!(0,o.Z)(e))throw new s.Z("type is required.");const n=h(e,t);return this._movement[n]},Z.prototype.getLastMovement=function(e,t){if(!(0,o.Z)(e))throw new s.Z("type is required.");const n=h(e,t),i=this._lastMovement[n];if(i.valid)return i},Z.prototype.isButtonDown=function(e,t){if(!(0,o.Z)(e))throw new s.Z("type is required.");const n=h(e,t);return this._isDown[n]},Z.prototype.getStartMousePosition=function(e,t){if(!(0,o.Z)(e))throw new s.Z("type is required.");if(e===d.Z.WHEEL)return this._currentMousePosition;const n=h(e,t);return this._eventStartPosition[n]},Z.prototype.getButtonPressTime=function(e,t){if(!(0,o.Z)(e))throw new s.Z("type is required.");const n=h(e,t);return this._pressTime[n]},Z.prototype.getButtonReleaseTime=function(e,t){if(!(0,o.Z)(e))throw new s.Z("type is required.");const n=h(e,t);return this._releaseTime[n]},Z.prototype.reset=function(){for(const e in this._update)this._update.hasOwnProperty(e)&&(this._update[e]=!0)},Z.prototype.isDestroyed=function(){return!1},Z.prototype.destroy=function(){return this._eventHandler=this._eventHandler&&this._eventHandler.destroy(),(0,r.Z)(this)};const y=Z},335517:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({LEFT_DRAG:0,RIGHT_DRAG:1,MIDDLE_DRAG:2,WHEEL:3,PINCH:4})},673644:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var i=n(405254),o=n(660904),r=n(532056),s=n(234146),a=n(11020),c=n(765153),l=n(942841),u=n(344485),d=n(134282),h=n(296184),f=n(714233);const p={},m=new o.Z,_=new o.Z;function g(e,t,n,i){if((0,a.Z)(i)&&n(.5)>i){const i=n(0),o=n(1),r=n(.5),s=r-i,a=r-o;return function(r){const c=n(r);if(r<=.5){const t=(c-i)/s;return u.Z.lerp(e,-u.Z.PI_OVER_TWO,t)}const l=(c-o)/a;return u.Z.lerp(-u.Z.PI_OVER_TWO,t,1-l)}}return function(n){return u.Z.lerp(e,t,n)}}function Z(e,t,n,i,r){let s=r;const c=Math.max(n,i);if(!(0,a.Z)(s)){const n=e.position,i=t,r=e.up,a=e.right,c=e.frustum,l=o.Z.subtract(n,i,m),u=o.Z.magnitude(o.Z.multiplyByScalar(r,o.Z.dot(l,r),_)),f=o.Z.magnitude(o.Z.multiplyByScalar(a,o.Z.dot(l,a),_));s=Math.min(.2*function(e,t,n){let i,o,r;if(e instanceof d.Z){const s=Math.tan(.5*e.fovy);return i=e.near,o=e.near*s,r=e.aspectRatio*o,Math.max(t*i/r,n*i/o)}return e instanceof h.Z?(i=e.near,o=e.top,r=e.right,Math.max(t*i/r,n*i/o)):Math.max(t,n)}(c,u,f),1e9)}if(c<s){const e=8,t=1e6,o=-Math.pow((s-n)*t,1/e),r=Math.pow((s-i)*t,1/e);return function(n){const i=n*(r-o)+o;return-Math.pow(i,e)/t+s}}return function(e){return u.Z.lerp(n,i,e)}}function y(e,t){return u.Z.equalsEpsilon(e,u.Z.TWO_PI,u.Z.EPSILON11)&&(e=0),t>e+Math.PI?e+=u.Z.TWO_PI:t<e-Math.PI&&(e-=u.Z.TWO_PI),e}const b=new o.Z;function v(e,t,n,r,s,a,c,l){const d=e.camera,h=o.Z.clone(d.position,b),f=d.pitch,p=y(d.heading,r),m=y(d.roll,a),_=Z(d,n,h.z,n.z,c),v=g(f,s,_,l);return function(e){const o=e.time/t;d.setView({orientation:{heading:u.Z.lerp(p,r,o),pitch:v(o),roll:u.Z.lerp(m,a,o)}}),i.Z.lerp(h,n,o,d.position),d.position.z=_(o)}}const A=new r.Z,T=new r.Z;function w(e,t,n,i,s,c,l,d,h,f){const p=e.camera,m=e.mapProjection.ellipsoid,_=r.Z.clone(p.positionCartographic,A),b=p.pitch,v=y(p.heading,i),w=y(p.roll,c),E=m.cartesianToCartographic(n,T);_.longitude=u.Z.zeroToTwoPi(_.longitude),E.longitude=u.Z.zeroToTwoPi(E.longitude);let S=!1;if((0,a.Z)(d)){const e=u.Z.zeroToTwoPi(d),t=Math.min(_.longitude,E.longitude),n=Math.max(_.longitude,E.longitude),i=e>=t&&e<=n;if((0,a.Z)(h)){const e=Math.abs(_.longitude-E.longitude),t=u.Z.TWO_PI-e;(i?e:t)<(i?t:e)*h&&!i&&(S=!0)}else i||(S=!0)}S?function(e,t){e.longitude<t.longitude?e.longitude+=u.Z.TWO_PI:t.longitude+=u.Z.TWO_PI}(_,E):function(e,t){const n=e.longitude-t.longitude;n<-u.Z.PI?e.longitude+=u.Z.TWO_PI:n>u.Z.PI&&(t.longitude+=u.Z.TWO_PI)}(_,E);const C=Z(p,n,_.height,E.height,l),x=g(b,s,C,f);return function(){const e=_.longitude,n=E.longitude,r=_.latitude,s=E.latitude;return function(a){const l=a.time/t,d=o.Z.fromRadians(u.Z.lerp(e,n,l),u.Z.lerp(r,s,l),C(l),m);p.setView({destination:d,orientation:{heading:u.Z.lerp(v,i,l),pitch:x(l),roll:u.Z.lerp(w,c,l)}})}}()}function E(e,t,n,r,s,a,c){const l=e.camera,d=o.Z.clone(l.position,b),h=y(l.heading,r),f=l.frustum.right-l.frustum.left,p=Z(l,n,f,n.z,c);return function(e){const o=e.time/t;l.setView({orientation:{heading:u.Z.lerp(h,r,o)}}),i.Z.lerp(d,n,o,l.position);const s=p(o),a=l.frustum,c=a.top/a.right,f=.5*(s-(a.right-a.left));a.right+=f,a.left-=f,a.top=c*a.right,a.bottom=-a.top}}const S=new r.Z,C=new o.Z;function x(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function I(e,t){return function(){"function"==typeof t&&t(),e.enableInputs=!0}}p.createTween=function(e,t){let n=(t=(0,s.Z)(t,s.Z.EMPTY_OBJECT)).destination;if(!(0,a.Z)(e))throw new c.Z("scene is required.");if(!(0,a.Z)(n))throw new c.Z("destination is required.");const r=e.mode;if(r===f.Z.MORPHING)return x();const d=(0,s.Z)(t.convert,!0),h=e.mapProjection,p=h.ellipsoid,m=t.maximumHeight,_=t.flyOverLongitude,g=t.flyOverLongitudeWeight,Z=t.pitchAdjustHeight;let y=t.easingFunction;d&&r!==f.Z.SCENE3D&&(p.cartesianToCartographic(n,S),n=h.project(S,C));const b=e.camera,A=t.endTransform;(0,a.Z)(A)&&b._setTransform(A);let T=t.duration;(0,a.Z)(T)||(T=Math.ceil(o.Z.distance(b.position,n)/1e6)+2,T=Math.min(T,3));const P=(0,s.Z)(t.heading,0),D=(0,s.Z)(t.pitch,-u.Z.PI_OVER_TWO),O=(0,s.Z)(t.roll,0),L=e.screenSpaceCameraController;L.enableInputs=!1;const N=I(L,t.complete),M=I(L,t.cancel),R=b.frustum;let F=e.mode===f.Z.SCENE2D;if(F=F&&i.Z.equalsEpsilon(b.position,n,u.Z.EPSILON6),F=F&&u.Z.equalsEpsilon(Math.max(R.right-R.left,R.top-R.bottom),n.z,u.Z.EPSILON6),F=F||e.mode!==f.Z.SCENE2D&&o.Z.equalsEpsilon(n,b.position,u.Z.EPSILON10),F=F&&u.Z.equalsEpsilon(u.Z.negativePiToPi(P),u.Z.negativePiToPi(b.heading),u.Z.EPSILON10)&&u.Z.equalsEpsilon(u.Z.negativePiToPi(D),u.Z.negativePiToPi(b.pitch),u.Z.EPSILON10)&&u.Z.equalsEpsilon(u.Z.negativePiToPi(O),u.Z.negativePiToPi(b.roll),u.Z.EPSILON10),F)return x(N,M);const B=new Array(4);if(B[f.Z.SCENE2D]=E,B[f.Z.SCENE3D]=w,B[f.Z.COLUMBUS_VIEW]=v,T<=0)return x((function(){B[r](e,1,n,P,D,O,m,_,g,Z)({time:1}),"function"==typeof N&&N()}),M);const U=B[r](e,T,n,P,D,O,m,_,g,Z);if(!(0,a.Z)(y)){const e=b.positionCartographic.height;y=e>(r===f.Z.SCENE3D?p.cartesianToCartographic(n).height:n.z)&&e>11500?l.Z.CUBIC_OUT:l.Z.QUINTIC_IN_OUT}return{duration:T,easingFunction:y,startObject:{time:0},stopObject:{time:T},update:U,complete:N,cancel:M}};const P=p},612634:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(790087),o=n(234146);function r(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),i.Z.typeOf.object("options.metadata",e.metadata),this._metadata=e.metadata}Object.defineProperties(r.prototype,{metadata:{get:function(){return this._metadata}}});const s=r},164507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ue});var i=n(762031),o=n(660904),r=n(35961),s=n(376213),a=n(737400),c=n(234146),l=n(11020),u=n(906439),d=n(722313),h=n(63354),f=n(101496),p=n(791364),m=n(344485),_=n(664288),g=n(659635),Z=n(237247),y=n(223689),b=n(143450),v=n(161648),A=n(596898),T=n(338212),w=n(293685),E=n(205522),S=n(217066),C=n(612634),x=n(577094),I=n(472525),P=n(864238),D=n(298810),O=n(684236),L=n(48066),N=n(342569),M=n(849515),R=n(106215),F=n(390523),B=n(717341),U=n(284134),k=n(926040),V=n(714233),H=n(473493),z=n(525387),G=n(175084),j=n(256927),W=n(431056);function q(e,t,n,i){this._tileset=e,this._header=n;const o=(0,l.Z)(n.contents),s=o&&n.contents.length>1||(0,B.Z)(n,"3DTILES_multiple_contents"),a=o&&!s?n.contents[0]:n.content;this._contentHeader=a,this.transform=(0,l.Z)(n.transform)?g.Z.unpack(n.transform):g.Z.clone(g.Z.IDENTITY);const c=(0,l.Z)(i)?i.computedTransform:e.modelMatrix,u=g.Z.multiply(c,this.transform,new g.Z),d=(0,l.Z)(i)?i._initialTransform:g.Z.IDENTITY;let h,f,m,_;this._initialTransform=g.Z.multiply(d,this.transform,new g.Z),this.computedTransform=u,this._boundingVolume=this.createBoundingVolume(n.boundingVolume,u),this._boundingVolume2D=void 0,(0,l.Z)(a)&&(0,l.Z)(a.boundingVolume)&&(h=this.createBoundingVolume(a.boundingVolume,u)),this._contentBoundingVolume=h,this._contentBoundingVolume2D=void 0,(0,l.Z)(n.viewerRequestVolume)&&(f=this.createBoundingVolume(n.viewerRequestVolume,u)),this._viewerRequestVolume=f,this.geometricError=n.geometricError,this._geometricError=n.geometricError,(0,l.Z)(this._geometricError)||(this._geometricError=(0,l.Z)(i)?i._geometricError:e._geometricError,q._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),(0,l.Z)(n.refine)?("replace"!==n.refine&&"add"!==n.refine||q._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${n.refine}". Instead use "${n.refine.toUpperCase()}".`),m="REPLACE"===n.refine.toUpperCase()?L.Z.REPLACE:L.Z.ADD):m=(0,l.Z)(i)?i.refine:L.Z.REPLACE,this.refine=m,this.children=[],this.parent=i;let Z,y,b,v=!1;if(t=E.Z.createIfNeeded(t),s)Z=I.Z.UNLOADED,y=t.clone();else if((0,l.Z)(a)){let n=a.uri;(0,l.Z)(a.url)&&(q._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),n=a.url),""===n?(q._deprecationWarning("contentUriEmpty","content.uri property is an empty string, which creates a circular dependency, making this tileset invalid. Omit the content property instead"),_=new N.Z(e,this),v=!0,Z=I.Z.READY):(Z=I.Z.UNLOADED,y=t.getDerivedResource({url:n}),b=A.Z.getServerKey(y.getUrlComponent()))}else _=new N.Z(e,this),v=!0,Z=I.Z.READY;this._content=_,this._contentResource=y,this._contentState=Z,this._expiredContent=void 0,this._serverKey=b,this.hasEmptyContent=v,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=s,this.metadata=(0,F.Z)(e,n),this.cacheNode=void 0;const T=n.expire;let w,S;(0,l.Z)(T)&&(w=T.duration,(0,l.Z)(T.date)&&(S=p.Z.fromIso8601(T.date))),this.expireDuration=w,this.expireDate=S,this.lastStyleTime=0,this._optimChildrenWithinParent=D.Z.NOT_COMPUTED,this.clippingPlanesDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._clippingPlanesState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=r.Z.fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new p.Z,this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}q._deprecationWarning=u.Z,Object.defineProperties(q.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return(0,c.Z)(this._contentBoundingVolume,this._boundingVolume)}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},isVisible:{get:function(){return this._visible&&this._inRequestVolume}},extras:{get:function(){return this._header.extras}},color:{get:function(){return(0,l.Z)(this._color)||(this._color=new r.Z),r.Z.clone(this._color)},set:function(e){this._color=r.Z.clone(e,this._color),this._colorDirty=!0}},hasRenderableContent:{get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent&&!this.hasImplicitContent}},contentAvailable:{get:function(){return this.contentReady&&this.hasRenderableContent||(0,l.Z)(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===I.Z.READY}},contentUnloaded:{get:function(){return this._contentState===I.Z.UNLOADED}},hasUnloadedRenderableContent:{get:function(){return this.hasRenderableContent&&this.contentUnloaded}},contentExpired:{get:function(){return this._contentState===I.Z.EXPIRED}},contentFailed:{get:function(){return this._contentState===I.Z.FAILED}},commandsLength:{get:function(){return this._commandsLength}}});const Y=new o.Z,X=new p.Z;function J(e){return function(){return e._priority}}q.prototype.getScreenSpaceError=function(e,t,n){const i=this._tileset,o=(0,c.Z)(n,1),r=(0,l.Z)(this.parent)?this.parent.geometricError:i._scaledGeometricError,s=t?r:this.geometricError;if(0===s)return 0;const{camera:a,context:u}=e;let d=a.frustum;const h=u.drawingBufferWidth,f=u.drawingBufferHeight*o;let p;if(e.mode===V.Z.SCENE2D||d instanceof y.Z){const e=d.offCenterFrustum;(0,l.Z)(e)&&(d=e),p=s/(Math.max(d.top-d.bottom,d.right-d.left)/Math.max(h,f))}else{const e=Math.max(this._distanceToCamera,m.Z.EPSILON7);if(p=s*f/(e*d.sseDenominator),i.dynamicScreenSpaceError){const t=i._dynamicScreenSpaceErrorComputedDensity,n=i.dynamicScreenSpaceErrorFactor;p-=m.Z.fog(e,t)*n}}return p/=e.pixelRatio,p},q.prototype.updateVisibility=function(e){const{parent:t,tileset:n}=this;if(this._updatedVisibilityFrame===n._updatedVisibilityFrame)return;const i=(0,l.Z)(t)?t.computedTransform:n.modelMatrix,r=(0,l.Z)(t)?t._visibilityPlaneMask:a.Z.MASK_INDETERMINATE;this.updateTransform(i),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,n.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,r),this._visible=this._visibilityPlaneMask!==a.Z.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=function(e,t){const n=t.parent,i=(0,l.Z)(n)&&(!e.isSkippingLevelOfDetail||0===t._screenSpaceError||n.hasTilesetContent||n.hasImplicitContent)?n._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-i}(n,this),this._priorityProgressiveResolution=function(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;let n=t._screenSpaceErrorProgressiveResolution>e._maximumScreenSpaceError;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;const i=t.parent,o=e._maximumScreenSpaceError,r=t._screenSpaceErrorProgressiveResolution<=o,s=(0,l.Z)(i)&&i._screenSpaceErrorProgressiveResolution>o;return r&&s&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,n=!0),n}(n,this),this.priorityDeferred=function(e,t){const{tileset:n,boundingSphere:i}=e,{radius:r,center:s}=i,{camera:a}=t,c=o.Z.multiplyByScalar(a.directionWC,e._centerZDepth,Y),u=o.Z.add(a.positionWC,c,Y),d=o.Z.subtract(u,s,Y);if(o.Z.magnitude(d)>r){const t=o.Z.normalize(d,Y),n=o.Z.multiplyByScalar(t,r,Y),i=o.Z.add(s,n,Y),c=o.Z.subtract(i,a.positionWC,Y),l=o.Z.normalize(c,Y);e._foveatedFactor=1-Math.abs(o.Z.dot(a.directionWC,l))}else e._foveatedFactor=0;const h=e.refine===L.Z.REPLACE,f=n.isSkippingLevelOfDetail;if(h&&!f||!n.foveatedScreenSpaceError||1===n.foveatedConeSize||e._priorityProgressiveResolution&&h&&f||n._pass===O.Z.PRELOAD_FLIGHT||n._pass===O.Z.PRELOAD)return!1;const p=1-Math.cos(.5*a.frustum.fov),_=n.foveatedConeSize*p;if(e._foveatedFactor<=_)return!1;const g=p-_,Z=m.Z.clamp((e._foveatedFactor-_)/g,0,1),y=n.foveatedInterpolationCallback(n.foveatedMinimumScreenSpaceErrorRelaxation,n.maximumScreenSpaceError,Z),b=0===e._screenSpaceError&&(0,l.Z)(e.parent)?.5*e.parent._screenSpaceError:e._screenSpaceError;return n.maximumScreenSpaceError-y<=b}(this,e),this._updatedVisibilityFrame=n._updatedVisibilityFrame},q.prototype.updateExpiration=function(){if((0,l.Z)(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){const e=p.Z.now(X);p.Z.lessThan(this.expireDate,e)&&(this._contentState=I.Z.EXPIRED,this._expiredContent=this._content)}},q.prototype.requestContent=function(){if(!this.hasEmptyContent)return this.hasMultipleContents?function(e){let t=e._content;const n=e._tileset;if(!(0,l.Z)(t)){const i=(0,B.Z)(e._header,"3DTILES_multiple_contents")?e._header.extensions["3DTILES_multiple_contents"]:e._header;t=new U.Z(n,e,e._contentResource.clone(),i),e._content=t}const i=t.requestInnerContents();if((0,l.Z)(i))return e._contentState=I.Z.LOADING,i.then((n=>{if(!e.isDestroyed()&&(0,l.Z)(n))return e._contentState=I.Z.PROCESSING,t})).catch((t=>{if(!e.isDestroyed())throw e._contentState=I.Z.FAILED,t}))}(this):function(e){const t=e._contentResource.clone(),n=e.contentExpired;n&&t.setQueryParameters({expired:e.expireDate.toString()});const i=new v.Z({throttle:!0,throttleByServer:!0,type:w.Z.TILES3D,priorityFunction:J(e),serverKey:e._serverKey});e._request=i,t.request=i;const o=e._tileset,r=t.fetchArrayBuffer();if((0,l.Z)(r))return async function(e,t,n,i,o){const r=e._contentState;let s;e._contentState=I.Z.LOADING,++t.statistics.numberOfPendingRequests;try{s=await o}catch(i){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;if(n.cancelled||n.state===T.Z.CANCELLED)return e._contentState=r,void++t.statistics.numberOfAttemptedRequests;throw e._contentState=I.Z.FAILED,i}if(e.isDestroyed())--t.statistics.numberOfPendingRequests;else{if(n.cancelled||n.state===T.Z.CANCELLED)return e._contentState=r,--t.statistics.numberOfPendingRequests,void++t.statistics.numberOfAttemptedRequests;try{const n=await async function(e,t){const n=(0,k.Z)(t),i=e._tileset;let o;i._disableSkipLevelOfDetail=i._disableSkipLevelOfDetail||n.contentType===P.Z.GEOMETRY||n.contentType===P.Z.VECTOR,(n.contentType===P.Z.IMPLICIT_SUBTREE||n.contentType===P.Z.IMPLICIT_SUBTREE_JSON)&&(e.hasImplicitContent=!0),n.contentType===P.Z.EXTERNAL_TILESET&&(e.hasTilesetContent=!0);const r=x.Z[n.contentType];if(e.isDestroyed())return;o=(0,l.Z)(n.binaryPayload)?await Promise.resolve(r(i,e,e._contentResource,n.binaryPayload.buffer,0)):await Promise.resolve(r(i,e,e._contentResource,n.jsonPayload));const s=e._contentHeader;if(e.hasImplicitContentMetadata){const t=e.implicitSubtree,n=e.implicitCoordinates;o.metadata=t.getContentMetadataView(n,0)}else e.hasImplicitContent||(o.metadata=(0,M.Z)(i,s));const a=(0,R.Z)(i,s);return(0,l.Z)(a)&&(o.group=new C.Z({metadata:a})),o}(e,s);if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;return i&&(e.expireDate=void 0),e._content=n,e._contentState=I.Z.PROCESSING,n}catch(n){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;throw e._contentState=I.Z.FAILED,n}}}(e,o,i,n,r);++o.statistics.numberOfAttemptedRequests}(this)},q.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()},q.prototype.unloadContent=function(){this.hasRenderableContent&&(this._content=this._content&&this._content.destroy(),this._contentState=I.Z.UNLOADED,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};const Q=new i.Z;function $(e,t){if(t.mode!==V.Z.SCENE3D&&!(0,l.Z)(e._boundingVolume2D)){const n=e._boundingVolume.boundingSphere,o=i.Z.projectTo2D(n,t.mapProjection,Q);e._boundingVolume2D=new G.Z(o.center,o.radius)}return t.mode!==V.Z.SCENE3D?e._boundingVolume2D:e._boundingVolume}q.prototype.visibility=function(e,t){const n=e.cullingVolume,i=$(this,e),o=this._tileset,r=o.clippingPlanes;if((0,l.Z)(r)&&r.enabled){const e=r.computeIntersectionWithBoundingVolume(i,o.clippingPlanesOriginMatrix);if(this._isClipped=e!==f.Z.INSIDE,e===f.Z.OUTSIDE)return a.Z.MASK_OUTSIDE}return n.computeVisibilityWithPlaneMask(i,t)},q.prototype.contentVisibility=function(e){if(!(0,l.Z)(this._contentBoundingVolume))return f.Z.INSIDE;if(this._visibilityPlaneMask===a.Z.MASK_INSIDE)return f.Z.INSIDE;const t=e.cullingVolume,n=function(e,t){if(t.mode!==V.Z.SCENE3D&&!(0,l.Z)(e._contentBoundingVolume2D)){const n=e._contentBoundingVolume.boundingSphere,o=i.Z.projectTo2D(n,t.mapProjection,Q);e._contentBoundingVolume2D=new G.Z(o.center,o.radius)}return t.mode!==V.Z.SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}(this,e),o=this._tileset,r=o.clippingPlanes;if((0,l.Z)(r)&&r.enabled){const e=r.computeIntersectionWithBoundingVolume(n,o.clippingPlanesOriginMatrix);if(this._isClipped=e!==f.Z.INSIDE,e===f.Z.OUTSIDE)return f.Z.OUTSIDE}return t.computeVisibility(n)},q.prototype.distanceToTile=function(e){return $(this,e).distanceToCamera(e)};const K=new o.Z;q.prototype.distanceToTileCenter=function(e){const t=$(this,e).boundingVolume,n=o.Z.subtract(t.center,e.camera.positionWC,K);return o.Z.dot(e.camera.directionWC,n)},q.prototype.insideViewerRequestVolume=function(e){const t=this._viewerRequestVolume;return!(0,l.Z)(t)||0===t.distanceToCamera(e)};const ee=new _.Z,te=new o.Z,ne=new _.Z,ie=new o.Z,oe=new b.Z,re=new Z.Z,se=new g.Z;q.prototype.createBoundingVolume=function(e,t,n){if(!(0,l.Z)(e))throw new S.Z("boundingVolume must be defined");if((0,B.Z)(e,"3DTILES_bounding_volume_S2"))return new z.Z(e.extensions["3DTILES_bounding_volume_S2"]);const{box:i,region:r,sphere:s}=e;if((0,l.Z)(i))return function(e,t,n){let i=o.Z.fromElements(e[0],e[1],e[2],ie),r=_.Z.fromArray(e,3,ne);i=g.Z.multiplyByPoint(t,i,i);const s=g.Z.getMatrix3(t,ee);return r=_.Z.multiply(s,r,r),(0,l.Z)(n)?(n.update(i,r),n):new j.Z(i,r)}(i,t,n);if((0,l.Z)(r))return function(e,t,n,i){if(!g.Z.equalsEpsilon(t,n,m.Z.EPSILON8))return function(e,t,n,i){const o=b.Z.unpack(e,0,oe),r=e[4],s=e[5],a=Z.Z.fromRectangle(o,r,s,h.Z.WGS84,re);let c=a.center,u=a.halfAxes;t=g.Z.multiplyTransformation(t,g.Z.inverseTransformation(n,se),se),c=g.Z.multiplyByPoint(t,c,c);const d=g.Z.getMatrix3(t,ee);return u=_.Z.multiply(d,u,u),(0,l.Z)(i)&&i instanceof j.Z?(i.update(c,u),i):new j.Z(c,u)}(e,t,n,i);if((0,l.Z)(i))return i;const o=b.Z.unpack(e,0,oe);return new H.Z({rectangle:o,minimumHeight:e[4],maximumHeight:e[5]})}(r,t,this._initialTransform,n);if((0,l.Z)(s))return function(e,t,n){let i=o.Z.fromElements(e[0],e[1],e[2],ie),r=e[3];i=g.Z.multiplyByPoint(t,i,i);const s=g.Z.getScale(t,te);return r*=o.Z.maximumComponent(s),(0,l.Z)(n)?(n.update(i,r),n):new G.Z(i,r)}(s,t,n);throw new S.Z("boundingVolume must contain a sphere, region, or box")},q.prototype.updateTransform=function(e){e=(0,c.Z)(e,g.Z.IDENTITY);const t=g.Z.multiplyTransformation(e,this.transform,se);if(g.Z.equals(t,this.computedTransform))return;g.Z.clone(t,this.computedTransform);const n=this._header,i=this._contentHeader;this._boundingVolume=this.createBoundingVolume(n.boundingVolume,this.computedTransform,this._boundingVolume),(0,l.Z)(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(i.boundingVolume,this.computedTransform,this._contentBoundingVolume)),(0,l.Z)(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(n.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()},q.prototype.updateGeometricErrorScale=function(){const e=g.Z.getScale(this.computedTransform,te),t=o.Z.maximumComponent(e);if(this.geometricError=this._geometricError*t,!(0,l.Z)(this.parent)){const e=this._tileset;e._scaledGeometricError=e._geometricError*t}},q.prototype.update=function(e,t,n){const{commandList:i}=t,o=i.length;!function(e,t){const n=t.clippingPlanes;let i=0;(0,l.Z)(n)&&e._isClipped&&n.enabled&&(i=n.clippingPlanesState),i!==e._clippingPlanesState&&(e._clippingPlanesState=i,e.clippingPlanesDirty=!0)}(this,e),function(e,t,n,i){if(!i.isRender)return;const o=(0,l.Z)(e._contentHeader)&&(0,l.Z)(e._contentHeader.boundingVolume),a=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!o;if(a){let t;t=e._finalResolution?e.hasRenderableContent?r.Z.WHITE:r.Z.DARKGRAY:r.Z.YELLOW,(0,l.Z)(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(t)),e._debugBoundingVolume.update(n);const i=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");i.color=s.Z.toValue(t,i.color)}else!a&&(0,l.Z)(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&o?((0,l.Z)(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(r.Z.BLUE)),e._debugContentBoundingVolume.update(n)):!t.debugShowContentBoundingVolume&&(0,l.Z)(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&(0,l.Z)(e._viewerRequestVolume)?((0,l.Z)(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(r.Z.YELLOW)),e._debugViewerRequestVolume.update(n)):!t.debugShowViewerRequestVolume&&(0,l.Z)(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());const c=t.debugColorizeTiles&&!e._debugColorizeTiles||(0,l.Z)(t._heatmap.tilePropertyName),u=!t.debugColorizeTiles&&e._debugColorizeTiles;c?(t._heatmap.colorize(e,n),e._debugColorizeTiles=!0,e.color=e._debugColor):u&&(e._debugColorizeTiles=!1,e.color=r.Z.WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),u&&t.makeStyleDirty()}(this,e,t,n),function(e,t,n){const i=e._expiredContent;if(!e.hasMultipleContents&&(0,l.Z)(i)){if(!e.contentReady){try{i.update(t,n)}catch(e){}return}e._expiredContent.destroy(),e._expiredContent=void 0}if((0,l.Z)(e.content))try{e.content.update(t,n)}catch(t){throw e._contentState=I.Z.FAILED,t}}(this,e,t);const a=i.length;this._commandsLength=a-o;for(let e=o;e<a;++e){const t=i[e],n=t.pass===W.Z.TRANSLUCENT;t.depthForTranslucentClassification=n}this.clippingPlanesDirty=!1};const ae=[];function ce(e,t,n){const i=e*Math.pow(10,t);return parseInt(i)*Math.pow(10,n)}function le(e,t,n){return Math.max(m.Z.normalize(e,t,n)-m.Z.EPSILON7,0)}q.prototype.process=function(e,t){this.contentExpired||this.contentReady||!this._content.ready||(function(e){if(!(0,l.Z)(e.expireDuration))return;const t=p.Z.now(X);p.Z.addSeconds(t,e.expireDuration,t),(0,l.Z)(e.expireDate)?p.Z.lessThan(e.expireDate,t)&&p.Z.clone(t,e.expireDate):e.expireDate=p.Z.clone(t)}(this),this._selectedFrame=0,this.lastStyleTime=0,p.Z.now(this._loadTimestamp),this._contentState=I.Z.READY,this.hasTilesetContent||this.hasImplicitContent||(e._statistics.incrementLoadCounts(this.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(this)));const n=t.commandList;t.commandList=ae;try{this._content.update(e,t)}catch(e){throw this._contentState=I.Z.FAILED,e}ae.length=0,t.commandList=n},q.prototype.updatePriority=function(){const e=this.tileset,t=e.preferLeaves,n=e._minimumPriority,i=e._maximumPriority,o=Math.pow(10,8),r=Math.pow(10,9),s=Math.pow(10,10);let a=le(this._depth,n.depth,i.depth);a=t?1-a:a;const c=ce(e.isSkippingLevelOfDetail||this.refine!==L.Z.REPLACE?le(this._priorityReverseScreenSpaceError,n.reverseScreenSpaceError,i.reverseScreenSpaceError):le(this._priorityHolder._distanceToCamera,n.distance,i.distance),4,0),l=this._priorityProgressiveResolution?0:o,u=ce(le(this._priorityHolder._foveatedFactor,n.foveatedFactor,i.foveatedFactor),4,4),d=this.priorityDeferred?r:0,h=e._pass===O.Z.PRELOAD_FLIGHT?0:s;this._priority=a+c+l+u+d+h},q.prototype.isDestroyed=function(){return!1},q.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),(0,d.Z)(this)};const ue=q},533424:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var i=n(405254),o=n(790087),r=n(823438),s=n(35961),a=n(394579),c=n(234146),l=n(11020),u=n(906439),d=n(722313),h=n(765153),f=n(344485),p=n(217066),m=n(591477),_=n(661679),g=n(431056),Z=n(417148),y=n(437530),b=n(974914),v=n(978730),A=n(973591),T=n(461448),w=n(53839),E=n(708895),S=n(822948),C=n(489709),x=n(721902);const I=b.Z.DEFAULT_COLOR_VALUE,P=b.Z.DEFAULT_SHOW_VALUE;function D(e,t,n,i,o){let s;this.featuresLength=t,(0,l.Z)(n)&&(s=n.extensions),this._extensions=(0,c.Z)(s,{});const a=function(e){const t={};if(!(0,l.Z)(e))return t;for(const n in e)e.hasOwnProperty(n)&&"HIERARCHY"!==n&&"extensions"!==n&&"extras"!==n&&(t[n]=(0,r.Z)(e[n],!0));return t}(n);this._properties=a,this._batchTableHierarchy=function(e,t,n){if(!(0,l.Z)(t))return;let i=e._extensions["3DTILES_batch_table_hierarchy"];const o=t.HIERARCHY;return(0,l.Z)(o)&&(D._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),e._extensions["3DTILES_batch_table_hierarchy"]=o,i=o),(0,l.Z)(i)?new v.Z({extension:i,binaryBody:n}):void 0}(this,n,i);const u=O(t,a,i);this._binaryPropertiesByteLength=function(e){if(!(0,l.Z)(e))return 0;let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}(u),this._batchTableBinaryProperties=u,this._content=e,this._batchTexture=new b.Z({featuresLength:t,colorChangedCallback:o,owner:e,statistics:e.tileset.statistics})}function O(e,t,n){let i;for(const o in t)if(t.hasOwnProperty(o)){const r=t[o],s=r.byteOffset;if((0,l.Z)(s)){const t=r.componentType,a=r.type;if(!(0,l.Z)(t))throw new p.Z("componentType is required.");if(!(0,l.Z)(a))throw new p.Z("type is required.");if(!(0,l.Z)(n))throw new p.Z(`Property ${o} requires a batch table binary.`);const c=(0,E.Z)(r),u=c.componentsPerAttribute,d=c.classType,h=c.createArrayBufferView(n.buffer,n.byteOffset+s,e);(0,l.Z)(i)||(i={}),i[o]={typedArray:h,componentCount:u,type:d}}}return i}D._deprecationWarning=u.Z,Object.defineProperties(D.prototype,{batchTableByteLength:{get:function(){let e=this._binaryPropertiesByteLength;return(0,l.Z)(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e+=this._batchTexture.byteLength,e}}}),D.getBinaryProperties=function(e,t,n){return O(e,t,n)},D.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)},D.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)},D.prototype.getShow=function(e){return this._batchTexture.getShow(e)},D.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)},D.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)},D.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)},D.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};const L=new s.Z;function N(e,t){if(!(0,l.Z)(e)||e<0||e>=t)throw new h.Z(`batchId is required and must be between zero and featuresLength - 1 (${t}`-NaN)}function M(e,t){return e=y.Z.replaceMain(e,"tile_main"),t?`${e}uniform float tile_colorBlend; \nvoid tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    out_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n} \n`:`${e}void tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n} \n`}function R(e,t,n){if(!(0,l.Z)(t))return M(e,n);let i=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${t};`);const o=e.match(i);if(!(0,l.Z)(o))return M(e,n);const r=o[0],s=o[2];let a;if(e=(e=y.Z.replaceMain(e,"tile_main")).replace(r,""),"vec3"===s||"vec4"===s){const n="vec3"===s?`vec4(${t}, 1.0)`:t,o="vec3"===s?"tile_diffuse.xyz":"tile_diffuse";i=new RegExp(t,"g"),e=e.replace(i,o),a=`    vec4 source = ${n}; \n    tile_diffuse = tile_diffuse_final(source, tile_featureColor); \n    tile_main(); \n`}else"sampler2D"===s&&(e=function(e,t){const n=`texture(${t}`;let i,o=0,r=e.indexOf(n,o);for(;r>-1;){let t=0;for(let n=r;n<e.length;++n){const o=e.charAt(n);if("("===o)++t;else if(")"===o&&(--t,0===t)){i=n+1;break}}const s=`tile_diffuse_final(${e.slice(r,i)}, tile_diffuse)`;e=e.slice(0,r)+s+e.slice(i),o=r+s.length,r=e.indexOf(n,o)}return e}(e,t),a="    tile_diffuse = tile_featureColor; \n    tile_main(); \n");return e=`uniform float tile_colorBlend; \nvec4 tile_diffuse = vec4(1.0); \nbool isWhite(vec3 color) \n{ \n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); \n} \nvec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) \n{ \n    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); \n    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; \n    return vec4(diffuse.rgb, sourceDiffuse.a); \n} \n${r}\n${e}\nvoid tile_color(vec4 tile_featureColor) \n{ \n${a}`,n&&(e+="    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    out_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n"),e+"} \n"}D.prototype.applyStyle=function(e){if(!(0,l.Z)(e))return this.setAllColor(I),void this.setAllShow(P);const t=this._content,n=this.featuresLength;for(let i=0;i<n;++i){const n=t.getFeature(i),o=(0,l.Z)(e.color)?(0,c.Z)(e.color.evaluateColor(n,L),I):I,r=(0,l.Z)(e.show)?(0,c.Z)(e.show.evaluate(n),P):P;this.setColor(i,o),this.setShow(i,r)}},D.prototype.isClass=function(e,t){N(e,this.featuresLength),o.Z.typeOf.string("className",t);const n=this._batchTableHierarchy;return!!(0,l.Z)(n)&&n.isClass(e,t)},D.prototype.isExactClass=function(e,t){return o.Z.typeOf.string("className",t),this.getExactClassName(e)===t},D.prototype.getExactClassName=function(e){N(e,this.featuresLength);const t=this._batchTableHierarchy;if((0,l.Z)(t))return t.getClassName(e)},D.prototype.hasProperty=function(e,t){return N(e,this.featuresLength),o.Z.typeOf.string("name",t),(0,l.Z)(this._properties[t])||(0,l.Z)(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)},D.prototype.hasPropertyBySemantic=function(){return!1},D.prototype.getPropertyIds=function(e,t){N(e,this.featuresLength),(t=(0,l.Z)(t)?t:[]).length=0;const n=Object.keys(this._properties);return t.push.apply(t,n),(0,l.Z)(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,n)),t},D.prototype.getPropertyBySemantic=function(e,t){},D.prototype.getProperty=function(e,t){if(N(e,this.featuresLength),o.Z.typeOf.string("name",t),(0,l.Z)(this._batchTableBinaryProperties)){const n=this._batchTableBinaryProperties[t];if((0,l.Z)(n))return function(e,t){const n=e.typedArray,i=e.componentCount;return 1===i?n[t]:e.type.unpack(n,t*i)}(n,e)}const n=this._properties[t];if((0,l.Z)(n))return(0,r.Z)(n[e],!0);if((0,l.Z)(this._batchTableHierarchy)){const n=this._batchTableHierarchy.getProperty(e,t);if((0,l.Z)(n))return n}},D.prototype.setProperty=function(e,t,n){const i=this.featuresLength;if(N(e,i),o.Z.typeOf.string("name",t),(0,l.Z)(this._batchTableBinaryProperties)){const i=this._batchTableBinaryProperties[t];if((0,l.Z)(i))return void function(e,t,n){const i=e.typedArray,o=e.componentCount;1===o?i[t]=n:e.type.pack(n,i,t*o)}(i,e,n)}if((0,l.Z)(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n))return;let s=this._properties[t];(0,l.Z)(s)||(this._properties[t]=new Array(i),s=this._properties[t]),s[e]=(0,r.Z)(n,!0)},D.prototype.getVertexShaderCallback=function(e,t,n){if(0===this.featuresLength)return;const i=this;return function(o){const r=R(o,n,!1);let s;return m.Z.maximumVertexTextureImageUnits>0?(s="",e&&(s+="uniform bool tile_translucentCommand; \n"),s+=`uniform sampler2D tile_batchTexture; \nout vec4 tile_featureColor; \nout vec2 tile_featureSt; \nvoid main() \n{ \n    vec2 st = computeSt(${t}); \n    vec4 featureProperties = texture(tile_batchTexture, st); \n    tile_color(featureProperties); \n    float show = ceil(featureProperties.a); \n    gl_Position *= show; \n`,e&&(s+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n"),s+="    tile_featureColor = featureProperties; \n    tile_featureSt = st; \n}"):s=`out vec2 tile_featureSt; \nvoid main() \n{ \n    tile_color(vec4(1.0)); \n    tile_featureSt = computeSt(${t}); \n}`,`${r}\n${a=i,1===a._batchTexture.textureDimensions.y?"uniform vec4 tile_textureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    return vec2(centerX + (batchId * stepX), 0.5); \n} \n":"uniform vec4 tile_textureStep; \nuniform vec2 tile_textureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    float stepY = tile_textureStep.z; \n    float centerY = tile_textureStep.w; \n    float xId = mod(batchId, tile_textureDimensions.x); \n    float yId = floor(batchId / tile_textureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}${s}`;var a}},D.prototype.getFragmentShaderCallback=function(e,t,n){if(0!==this.featuresLength)return function(i){return i=R(i,t,!0),m.Z.maximumVertexTextureImageUnits>0?(i+="uniform sampler2D tile_pickTexture; \nin vec2 tile_featureSt; \nin vec4 tile_featureColor; \nvoid main() \n{ \n    tile_color(tile_featureColor); \n",n&&(i+="    out_FragColor.rgb *= out_FragColor.a; \n"),i+="}"):(e&&(i+="uniform bool tile_translucentCommand; \n"),i+="uniform sampler2D tile_pickTexture; \nuniform sampler2D tile_batchTexture; \nin vec2 tile_featureSt; \nvoid main() \n{ \n    vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n",e&&(i+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            discard; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            discard; \n        } \n    } \n"),i+="    tile_color(featureProperties); \n",n&&(i+="    out_FragColor.rgb *= out_FragColor.a; \n"),i+="} \n"),i}},D.prototype.getClassificationFragmentShaderCallback=function(){if(0!==this.featuresLength)return function(e){return e=y.Z.replaceMain(e,"tile_main"),m.Z.maximumVertexTextureImageUnits>0?e+="uniform sampler2D tile_pickTexture;\nin vec2 tile_featureSt; \nin vec4 tile_featureColor; \nvoid main() \n{ \n    tile_main(); \n    out_FragColor = tile_featureColor; \n    out_FragColor.rgb *= out_FragColor.a; \n}":e+="uniform sampler2D tile_batchTexture; \nuniform sampler2D tile_pickTexture;\nin vec2 tile_featureSt; \nvoid main() \n{ \n    tile_main(); \n    vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n    out_FragColor = featureProperties; \n    out_FragColor.rgb *= out_FragColor.a; \n} \n",e}},D.prototype.getUniformMapCallback=function(){if(0===this.featuresLength)return;const e=this;return function(t){const n={tile_batchTexture:function(){return(0,c.Z)(e._batchTexture.batchTexture,e._batchTexture.defaultTexture)},tile_textureDimensions:function(){return e._batchTexture.textureDimensions},tile_textureStep:function(){return e._batchTexture.textureStep},tile_colorBlend:function(){return function(e){const t=e._content.tileset,n=t.colorBlendMode,i=t.colorBlendAmount;if(n===T.Z.HIGHLIGHT)return 0;if(n===T.Z.REPLACE)return 1;if(n===T.Z.MIX)return f.Z.clamp(i,f.Z.EPSILON4,1);throw new h.Z(`Invalid color blend mode "${n}".`)}(e)},tile_pickTexture:function(){return e._batchTexture.pickTexture}};return(0,a.Z)(t,n)}},D.prototype.getPickId=function(){return"texture(tile_pickTexture, tile_featureSt)"};function F(e){const t=_.Z.shallowClone(e),n=t.pass===g.Z.TRANSLUCENT;return t.uniformMap=(0,l.Z)(t.uniformMap)?t.uniformMap:{},t.uniformMap.tile_translucentCommand=function(){return n},t}function B(e){const t=_.Z.shallowClone(e);return t.pass=g.Z.TRANSLUCENT,t.renderState=function(e){const t=(0,r.Z)(e,!0);return t.cull.enabled=!1,t.depthTest.enabled=!0,t.depthMask=!1,t.blending=A.Z.ALPHA_BLEND,t.stencilTest=S.Z.setCesium3DTileBit(),t.stencilMask=S.Z.CESIUM_3D_TILE_MASK,Z.Z.fromCache(t)}(e.renderState),t}function U(e){const t=_.Z.shallowClone(e);return t.renderState=function(e){const t=(0,r.Z)(e,!0);return t.stencilTest=S.Z.setCesium3DTileBit(),t.stencilMask=S.Z.CESIUM_3D_TILE_MASK,Z.Z.fromCache(t)}(e.renderState),t}function k(e,t){const n=_.Z.shallowClone(t),o=(0,r.Z)(n.renderState,!0);o.cull.enabled=!0,o.cull.face=w.Z.FRONT,o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},o.polygonOffset={enabled:!0,factor:5,units:5},o.stencilTest=S.Z.setCesium3DTileBit(),o.stencilMask=S.Z.CESIUM_3D_TILE_MASK,n.renderState=Z.Z.fromCache(o),n.castShadows=!1,n.receiveShadows=!1,n.uniformMap=(0,r.Z)(t.uniformMap);const s=new i.Z(5,5);return n.uniformMap.u_polygonOffset=function(){return s},n.shaderProgram=function(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"zBackfaceLogDepth");if(!(0,l.Z)(n)){const i=t.fragmentShaderSource.clone();i.defines=(0,l.Z)(i.defines)?i.defines.slice(0):[],i.defines.push("POLYGON_OFFSET"),n=e.shaderCache.createDerivedShaderProgram(t,"zBackfaceLogDepth",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:t._attributeLocations})}return n}(e,t.shaderProgram),n}function V(e,t){const n=_.Z.shallowClone(e),i=(0,r.Z)(n.renderState,!0);return i.stencilTest.enabled=!0,i.stencilTest.mask=S.Z.SKIP_LOD_MASK,i.stencilTest.reference=S.Z.CESIUM_3D_TILE_MASK|t<<S.Z.SKIP_LOD_BIT_SHIFT,i.stencilTest.frontFunction=C.Z.GREATER_OR_EQUAL,i.stencilTest.frontOperation.zPass=x.Z.REPLACE,i.stencilTest.backFunction=C.Z.GREATER_OR_EQUAL,i.stencilTest.backOperation.zPass=x.Z.REPLACE,i.stencilMask=S.Z.CESIUM_3D_TILE_MASK|S.Z.SKIP_LOD_MASK,n.renderState=Z.Z.fromCache(i),n}D.prototype.addDerivedCommands=function(e,t){const n=e.commandList,i=n.length,o=this._content._tile,r=o._finalResolution,s=o.tileset,a=s.isSkippingLevelOfDetail&&s.hasMixedContent&&e.context.stencilBuffer,c=function(e){const t=e._batchTexture.translucentFeaturesLength;return 0===t?0:t===e.featuresLength?1:2}(this);for(let u=t;u<i;++u){const t=n[u];if(t.pass===g.Z.COMPUTE)continue;let i=t.derivedCommands.tileset;(0,l.Z)(i)&&!t.dirty||(i={},t.derivedCommands.tileset=i,i.originalCommand=F(t),t.dirty=!1);const d=i.originalCommand;0!==c&&t.pass!==g.Z.TRANSLUCENT&&((0,l.Z)(i.translucent)||(i.translucent=B(d))),1!==c&&t.pass!==g.Z.TRANSLUCENT&&((0,l.Z)(i.opaque)||(i.opaque=U(d)),a&&(r||((0,l.Z)(i.zback)||(i.zback=k(e.context,d)),s._backfaceCommands.push(i.zback)),(0,l.Z)(i.stencil)&&o._selectionDepth===(i.stencil.renderState.stencilTest.reference&S.Z.SKIP_LOD_MASK)>>>S.Z.SKIP_LOD_BIT_SHIFT||(t.renderState.depthMask?i.stencil=V(d,o._selectionDepth):i.stencil=i.opaque)));const h=a?i.stencil:i.opaque,f=i.translucent;t.pass!==g.Z.TRANSLUCENT?(0===c&&(n[u]=h),1===c&&(n[u]=f),2===c&&(n[u]=h,n.push(f))):n[u]=d}},D.prototype.update=function(e,t){this._batchTexture.update(e,t)},D.prototype.isDestroyed=function(){return!1},D.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),(0,d.Z)(this)};const H=D},461448:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({HIGHLIGHT:0,REPLACE:1,MIX:2})},577094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(151802),o=n(648034),r=n(447261),s=n(630194),a=n(914238),c=n(142943),l=n(217066);const u={b3dm:function(e,t,n,i,o){return s.Z.fromB3dm(e,t,n,i,o)},pnts:function(e,t,n,i,o){return s.Z.fromPnts(e,t,n,i,o)},i3dm:function(e,t,n,i,o){return s.Z.fromI3dm(e,t,n,i,o)},cmpt:function(e,t,n,o,r){return i.Z.fromTileType(e,t,n,o,r,u)},externalTileset:function(e,t,n,i){return a.Z.fromJson(e,t,n,i)},geom:function(e,t,n,i,r){return new o.Z(e,t,n,i,r)},vctr:function(e,t,n,i,o){return new c.Z(e,t,n,i,o)},subt:function(e,t,n,i,o){return r.Z.fromSubtreeJson(e,t,n,void 0,i,o)},subtreeJson:function(e,t,n,i){return r.Z.fromSubtreeJson(e,t,n,i)},glb:function(e,t,n,i,o){if(i.byteLength<12)throw new l.Z("Invalid glb content");const r=new DataView(i,o).getUint32(8,!0),a=new Uint8Array(i,o,r);return s.Z.fromGltf(e,t,n,a)},gltf:function(e,t,n,i){return s.Z.fromGltf(e,t,n,i)},geoJson:function(e,t,n,i){return s.Z.fromGeoJson(e,t,n,i)}},d=u},472525:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5})},864238:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const i={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",GEOJSON:"geoJson",VOXEL_BINARY:"voxl",VOXEL_JSON:"voxelJson",isBinaryFormat:function(e){switch(e){case i.BATCHED_3D_MODEL:case i.INSTANCED_3D_MODEL:case i.COMPOSITE:case i.POINT_CLOUD:case i.VECTOR:case i.GEOMETRY:case i.IMPLICIT_SUBTREE:case i.VOXEL_BINARY:case i.GLTF_BINARY:return!0;default:return!1}}},o=Object.freeze(i)},812693:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(35961),o=n(11020);function r(e,t){this._content=e,this._batchId=t,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(e){this._content.batchTable.setShow(this._batchId,e)}},color:{get:function(){return(0,o.Z)(this._color)||(this._color=new i.Z),this._content.batchTable.getColor(this._batchId,this._color)},set:function(e){this._content.batchTable.setColor(this._batchId,e)}},polylinePositions:{get:function(){if((0,o.Z)(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}}),r.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},r.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)},r.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},r.getPropertyInherited=function(e,t,n){const i=e.batchTable;if((0,o.Z)(i)){if(i.hasPropertyBySemantic(t,n))return i.getPropertyBySemantic(t,n);if(i.hasProperty(t,n))return i.getProperty(t,n)}const r=e.metadata;if((0,o.Z)(r)){if(r.hasPropertyBySemantic(n))return r.getPropertyBySemantic(n);if(r.hasProperty(n))return r.getProperty(n)}const s=e.tile,a=s.metadata;if((0,o.Z)(a)){if(a.hasPropertyBySemantic(n))return a.getPropertyBySemantic(n);if(a.hasProperty(n))return a.getProperty(n)}let c;if((0,o.Z)(s.implicitSubtree)&&(c=s.implicitSubtree.metadata),(0,o.Z)(c)){if(c.hasPropertyBySemantic(n))return c.getPropertyBySemantic(n);if(c.hasProperty(n))return c.getProperty(n)}const l=(0,o.Z)(e.group)?e.group.metadata:void 0;if((0,o.Z)(l)){if(l.hasPropertyBySemantic(n))return l.getPropertyBySemantic(n);if(l.hasProperty(n))return l.getProperty(n)}const u=e.tileset.metadata;if((0,o.Z)(u)){if(u.hasPropertyBySemantic(n))return u.getPropertyBySemantic(n);if(u.hasProperty(n))return u.getProperty(n)}},r.prototype.getPropertyInherited=function(e){return r.getPropertyInherited(this._content,this._batchId,e)},r.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},r.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},r.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},r.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};const s=r},179869:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(449809),o=n(234146),r=n(11020);function s(e,t){this.json=e,this.buffer=t,this._cachedTypedArrays={},this.featuresLength=0}function a(e,t,n,o,s,a){const c=e._cachedTypedArrays;let l=c[t];return(0,r.Z)(l)||(l=i.Z.createArrayBufferView(n,e.buffer.buffer,e.buffer.byteOffset+a,s*o),c[t]=l),l}s.prototype.getGlobalProperty=function(e,t,n){const s=this.json[e];if((0,r.Z)(s))return(0,r.Z)(s.byteOffset)?a(this,e,t=(0,o.Z)(t,i.Z.UNSIGNED_INT),n=(0,o.Z)(n,1),1,s.byteOffset):s},s.prototype.hasProperty=function(e){return(0,r.Z)(this.json[e])},s.prototype.getPropertyArray=function(e,t,n){const o=this.json[e];if((0,r.Z)(o))return(0,r.Z)(o.byteOffset)?((0,r.Z)(o.componentType)&&(t=i.Z.fromName(o.componentType)),a(this,e,t,n,this.featuresLength,o.byteOffset)):function(e,t,n,o){const s=e._cachedTypedArrays;let a=s[t];return(0,r.Z)(a)||(a=i.Z.createTypedArray(n,o),s[t]=a),a}(this,e,t,o)},s.prototype.getProperty=function(e,t,n,i,o){const s=this.json[e];if(!(0,r.Z)(s))return;const a=this.getPropertyArray(e,t,n);if(1===n)return a[i];for(let e=0;e<n;++e)o[e]=a[n*i+e];return o};const c=s},298810:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0})},457145:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(660904),o=n(790087),r=n(298810),s=n(473493),a=n(256927);const c={},l=new i.Z;c.checkChildrenWithinParent=function(e){o.Z.typeOf.object("tile",e);const t=e.children,n=t.length,c=e.boundingVolume;if(c instanceof a.Z||c instanceof s.Z){const o=c._orientedBoundingBox;e._optimChildrenWithinParent=r.Z.USE_OPTIMIZATION;for(let c=0;c<n;++c){const n=t[c].boundingVolume;if(!(n instanceof a.Z||n instanceof s.Z)){e._optimChildrenWithinParent=r.Z.SKIP_OPTIMIZATION;break}const u=n._orientedBoundingBox,d=i.Z.subtract(u.center,o.center,l),h=i.Z.magnitude(d);if(i.Z.divideByScalar(d,h,d),Math.abs(o.halfAxes[0]*d.x)+Math.abs(o.halfAxes[1]*d.y)+Math.abs(o.halfAxes[2]*d.z)+Math.abs(o.halfAxes[3]*d.x)+Math.abs(o.halfAxes[4]*d.y)+Math.abs(o.halfAxes[5]*d.z)+Math.abs(o.halfAxes[6]*d.x)+Math.abs(o.halfAxes[7]*d.y)+Math.abs(o.halfAxes[8]*d.z)<=Math.abs(u.halfAxes[0]*d.x)+Math.abs(u.halfAxes[1]*d.y)+Math.abs(u.halfAxes[2]*d.z)+Math.abs(u.halfAxes[3]*d.x)+Math.abs(u.halfAxes[4]*d.y)+Math.abs(u.halfAxes[5]*d.z)+Math.abs(u.halfAxes[6]*d.x)+Math.abs(u.halfAxes[7]*d.y)+Math.abs(u.halfAxes[8]*d.z)+h){e._optimChildrenWithinParent=r.Z.SKIP_OPTIMIZATION;break}}}return e._optimChildrenWithinParent===r.Z.USE_OPTIMIZATION};const u=c},684236:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const i={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},o=new Array(i.NUMBER_OF_PASSES);o[i.RENDER]=Object.freeze({pass:i.RENDER,isRender:!0,requestTiles:!0,ignoreCommands:!1}),o[i.PICK]=Object.freeze({pass:i.PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1}),o[i.SHADOW]=Object.freeze({pass:i.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!1}),o[i.PRELOAD]=Object.freeze({pass:i.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.PRELOAD_FLIGHT]=Object.freeze({pass:i.PRELOAD_FLIGHT,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({pass:i.REQUEST_RENDER_MODE_DEFER_CHECK,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.MOST_DETAILED_PRELOAD]=Object.freeze({pass:i.MOST_DETAILED_PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.MOST_DETAILED_PICK]=Object.freeze({pass:i.MOST_DETAILED_PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1}),i.getPassOptions=function(e){return o[e]};const r=Object.freeze(i)},423842:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(790087);const o=function(e){i.Z.typeOf.object("options",e),i.Z.typeOf.number("options.pass",e.pass),this.pass=e.pass,this.commandList=e.commandList,this.camera=e.camera,this.cullingVolume=e.cullingVolume,this.ready=!1}},867328:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(532056),o=n(35961),r=n(234146),s=n(11020),a=n(812693),c=n(200659);function l(e,t,n,i,o){this._content=e,this._billboard=n,this._label=i,this._polyline=o,this._batchId=t,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),d(this)}const u=new i.Z;function d(e){const t=e._billboard;if((0,s.Z)(e._billboardImage)&&e._billboardImage!==t.image)return void(t.image=e._billboardImage);if((0,s.Z)(e._billboardImage))return;const n=(0,r.Z)(e._color,l.defaultColor),i=(0,r.Z)(e._pointOutlineColor,l.defaultPointOutlineColor),a=(0,r.Z)(e._pointOutlineWidth,l.defaultPointOutlineWidth),u=(0,r.Z)(e._pointSize,l.defaultPointSize),d=e._billboardColor,h=e._billboardOutlineColor,f=e._billboardOutlineWidth,p=e._billboardSize;if(o.Z.equals(n,d)&&o.Z.equals(i,h)&&a===f&&u===p)return;e._billboardColor=o.Z.clone(n,e._billboardColor),e._billboardOutlineColor=o.Z.clone(i,e._billboardOutlineColor),e._billboardOutlineWidth=a,e._billboardSize=u;const m=n.alpha,_=n.toCssColorString(),g=i.toCssColorString(),Z=JSON.stringify([_,u,g,a]);t.setImage(Z,(0,c.Z)(m,_,g,a,u))}Object.defineProperties(l.prototype,{show:{get:function(){return this._label.show},set:function(e){this._label.show=e,this._billboard.show=e,this._polyline.show=e}},color:{get:function(){return this._color},set:function(e){this._color=o.Z.clone(e,this._color),d(this)}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=e,d(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=o.Z.clone(e,this._pointOutlineColor),d(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=e,d(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(e){this._label.fillColor=e,this._polyline.show=this._label.show&&e.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(e){this._label.outlineColor=e}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(e){this._label.outlineWidth=e}},font:{get:function(){return this._label.font},set:function(e){this._label.font=e}},labelStyle:{get:function(){return this._label.style},set:function(e){this._label.style=e}},labelText:{get:function(){return this._label.text},set:function(e){(0,s.Z)(e)||(e=""),this._label.text=e}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(e){this._label.backgroundColor=e}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(e){this._label.backgroundPadding=e}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(e){this._label.showBackground=e}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(e){this._label.scaleByDistance=e,this._billboard.scaleByDistance=e}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(e){this._label.translucencyByDistance=e,this._billboard.translucencyByDistance=e}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(e){this._label.distanceDisplayCondition=e,this._polyline.distanceDisplayCondition=e,this._billboard.distanceDisplayCondition=e}},heightOffset:{get:function(){return this._heightOffset},set:function(e){const t=(0,r.Z)(this._heightOffset,0),n=this._content.tileset.ellipsoid,i=n.cartesianToCartographic(this._billboard.position,u);i.height=i.height-t+e;const o=n.cartographicToCartesian(i);this._billboard.position=o,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],o],this._heightOffset=e}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(e){this._polyline.show=e}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(e){this._polyline.material.uniforms.color=o.Z.clone(e,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(e){const t=this._billboardImage!==e;this._billboardImage=e,t&&d(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(e){this._label.disableDepthTestDistance=e,this._billboard.disableDepthTestDistance=e}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(e){this._billboard.horizontalOrigin=e}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(e){this._billboard.verticalOrigin=e}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(e){this._label.horizontalOrigin=e}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(e){this._label.verticalOrigin=e}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){const e=this._pickIds;return e[0]=this._billboard.pickId,e[1]=this._label.pickId,e[2]=this._polyline.pickId,e}}}),l.defaultColor=o.Z.WHITE,l.defaultPointOutlineColor=o.Z.BLACK,l.defaultPointOutlineWidth=0,l.defaultPointSize=8,l.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},l.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)},l.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},l.prototype.getPropertyInherited=function(e){return a.Z.getPropertyInherited(this._content,this._batchId,e)},l.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},l.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},l.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},l.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};const h=l},48066:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({ADD:0,REPLACE:1})},335327:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(11020);function o(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(o.prototype,{style:{get:function(){return this._style},set:function(e){e!==this._style&&(this._style=e,this._styleDirty=!0)}}}),o.prototype.makeDirty=function(){this._styleDirty=!0},o.prototype.resetDirty=function(){this._styleDirty=!1},o.prototype.applyStyle=function(e){if(!(0,i.Z)(e.root))return;if((0,i.Z)(this._style)&&!this._style._ready)return;const t=this._styleDirty;t&&++this._lastStyleTime;const n=this._lastStyleTime,o=e._statistics,r=t?e._selectedTiles:e._selectedTilesToStyle,s=r.length;for(let e=0;e<s;++e){const t=r[e];if(t.lastStyleTime!==n){const e=t.content;t.lastStyleTime=n,e.applyStyle(this._style),o.numberOfFeaturesStyled+=e.featuresLength,++o.numberOfTilesStyled}}};const r=o},204476:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ce});var i=n(642336),o=n(405254),r=n(660904),s=n(532056),a=n(790087),c=n(823438),l=n(35961),u=n(865029),d=n(234146),h=n(11020),f=n(906439),p=n(722313),m=n(63354),_=n(282910),g=n(135595),Z=n(980382),y=n(791364),b=n(189381),v=n(344485),A=n(659635),T=n(205522),w=n(217066),E=n(720794),S=n(598020),C=n(431056),x=n(417148),I=n(418371),P=n(164507),D=n(461448),O=n(472525),L=n(830904),N=n(457145),M=n(684236),R=n(48066),F=n(888463),B=n(73360),U=n(654125),k=n(335327),V=n(753577),H=n(717341),z=n(513277),G=n(146251),j=n(185447),W=n(590292),q=n(270550),Y=n(993910),X=n(518065),J=n(714233),Q=n(534890),$=n(347962),K=n(822948),ee=n(473493),te=n(175084),ne=n(256927),ie=n(449743),oe=n(60308),re=n(8e3);function se(e){e=(0,d.Z)(e,d.Z.EMPTY_OBJECT),this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._scaledGeometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._modelUpAxis=void 0,this._modelForwardAxis=void 0,this._cache=new F.Z,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=(0,d.Z)(e.showCreditsOnScreen,!1),this._cullWithChildrenBounds=(0,d.Z)(e.cullWithChildrenBounds,!0),this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new b.Z,this._maximumScreenSpaceError=(0,d.Z)(e.maximumScreenSpaceError,16),this._maximumMemoryUsage=(0,d.Z)(e.maximumMemoryUsage,512),this._styleEngine=new k.Z,this._styleApplied=!1,this._modelMatrix=(0,h.Z)(e.modelMatrix)?A.Z.clone(e.modelMatrix):A.Z.clone(A.Z.IDENTITY),this._statistics=new U.Z,this._statisticsLast=new U.Z,this._statisticsPerPass=new Array(M.Z.NUMBER_OF_PASSES);for(let e=0;e<M.Z.NUMBER_OF_PASSES;++e)this._statisticsPerPass[e]=new U.Z;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new B.Z(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=(0,d.Z)(e.cullRequestsWhileMoving,!0),this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=(0,d.Z)(e.cullRequestsWhileMovingMultiplier,60),this.progressiveResolutionHeightFraction=v.Z.clamp((0,d.Z)(e.progressiveResolutionHeightFraction,.3),0,.5),this.preferLeaves=(0,d.Z)(e.preferLeaves,!1),this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._classificationType=e.classificationType,this._ellipsoid=(0,d.Z)(e.ellipsoid,m.Z.WGS84),this._initialClippingPlanesOriginMatrix=A.Z.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=(0,d.Z)(e.vectorClassificationOnly,!1),this._vectorKeepDecodedPositions=(0,d.Z)(e.vectorKeepDecodedPositions,!1),this.preloadWhenHidden=(0,d.Z)(e.preloadWhenHidden,!1),this.preloadFlightDestinations=(0,d.Z)(e.preloadFlightDestinations,!0),this._pass=void 0,this.dynamicScreenSpaceError=(0,d.Z)(e.dynamicScreenSpaceError,!1),this.foveatedScreenSpaceError=(0,d.Z)(e.foveatedScreenSpaceError,!0),this._foveatedConeSize=(0,d.Z)(e.foveatedConeSize,.1),this._foveatedMinimumScreenSpaceErrorRelaxation=(0,d.Z)(e.foveatedMinimumScreenSpaceErrorRelaxation,0),this.foveatedInterpolationCallback=(0,d.Z)(e.foveatedInterpolationCallback,v.Z.lerp),this.foveatedTimeDelay=(0,d.Z)(e.foveatedTimeDelay,.2),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorFactor=4,this.dynamicScreenSpaceErrorHeightFalloff=.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=(0,d.Z)(e.shadows,Q.Z.ENABLED),this.show=(0,d.Z)(e.show,!0),this.colorBlendMode=D.Z.HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new Y.Z(e.pointCloudShading),this._pointCloudEyeDomeLighting=new q.Z,this.loadProgress=new _.Z,this.allTilesLoaded=new _.Z,this.initialTilesLoaded=new _.Z,this.tileLoad=new _.Z,this.tileUnload=new _.Z,this.tileFailed=new _.Z,this.tileVisible=new _.Z,this.skipLevelOfDetail=(0,d.Z)(e.skipLevelOfDetail,!1),this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=(0,d.Z)(e.baseScreenSpaceError,1024),this.skipScreenSpaceErrorFactor=(0,d.Z)(e.skipScreenSpaceErrorFactor,16),this.skipLevels=(0,d.Z)(e.skipLevels,1),this.immediatelyLoadDesiredLevelOfDetail=(0,d.Z)(e.immediatelyLoadDesiredLevelOfDetail,!1),this.loadSiblings=(0,d.Z)(e.loadSiblings,!1),this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,(0,h.Z)(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new g.Z,this._shouldDestroyImageBasedLighting=!0),this.lightColor=e.lightColor,this.backFaceCulling=(0,d.Z)(e.backFaceCulling,!0),this._enableShowOutline=(0,d.Z)(e.enableShowOutline,!0),this.showOutline=(0,d.Z)(e.showOutline,!0),this.outlineColor=(0,d.Z)(e.outlineColor,l.Z.BLACK),this.splitDirection=(0,d.Z)(e.splitDirection,$.Z.NONE),this._projectTo2D=(0,d.Z)(e.projectTo2D,!1),this.debugFreezeFrame=(0,d.Z)(e.debugFreezeFrame,!1),this.debugColorizeTiles=(0,d.Z)(e.debugColorizeTiles,!1),this._enableDebugWireframe=(0,d.Z)(e.enableDebugWireframe,!1),this.debugWireframe=(0,d.Z)(e.debugWireframe,!1),!0===this.debugWireframe&&!1===this._enableDebugWireframe&&(0,W.Z)("tileset-debug-wireframe-ignored","enableDebugWireframe must be set to true in the Cesium3DTileset constructor, otherwise debugWireframe will be ignored."),this.debugShowBoundingVolume=(0,d.Z)(e.debugShowBoundingVolume,!1),this.debugShowContentBoundingVolume=(0,d.Z)(e.debugShowContentBoundingVolume,!1),this.debugShowViewerRequestVolume=(0,d.Z)(e.debugShowViewerRequestVolume,!1),this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=(0,d.Z)(e.debugShowGeometricError,!1),this.debugShowRenderingStatistics=(0,d.Z)(e.debugShowRenderingStatistics,!1),this.debugShowMemoryUsage=(0,d.Z)(e.debugShowMemoryUsage,!1),this.debugShowUrl=(0,d.Z)(e.debugShowUrl,!1),this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader;let t=(0,d.Z)(e.featureIdLabel,"featureId_0");"number"==typeof t&&(t=`featureId_${t}`),this._featureIdLabel=t;let n=(0,d.Z)(e.instanceFeatureIdLabel,"instanceFeatureId_0");if("number"==typeof n&&(n=`instanceFeatureId_${n}`),this._instanceFeatureIdLabel=n,(0,h.Z)(e.url)){(0,f.Z)("Cesium3DTileset options.url","Cesium3DTileset constructor parameter options.url was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTileset.fromUrl instead.");const t=this;let n;this._readyPromise=Promise.resolve(e.url).then((function(e){let i;return n=T.Z.createIfNeeded(e),t._resource=n,t._credits=n.credits,"json"===n.extension?i=n.getBaseUri(!0):n.isDataUri&&(i=""),t._url=n.url,t._basePath=i,se.loadJson(n)})).then((function(e){if(!t.isDestroyed())return ce(n,e).then((n=>(t._metadataExtension=n,e)))})).then((function(o){if(t.isDestroyed())return;t._geometricError=o.geometricError,t._scaledGeometricError=o.geometricError,t._root=t.loadTileset(n,o);const r=(0,h.Z)(o.asset.gltfUpAxis)?I.Z.fromName(o.asset.gltfUpAxis):I.Z.Y,s=(0,d.Z)(e.modelUpAxis,r),a=(0,d.Z)(e.modelForwardAxis,I.Z.X),c=o.asset;t._asset=c,t._properties=o.properties,t._extensionsUsed=o.extensionsUsed,t._extensions=o.extensions,t._modelUpAxis=s,t._modelForwardAxis=a,t._extras=o.extras;const l=c.extras;if((0,h.Z)(l)&&(0,h.Z)(l.cesium)&&(0,h.Z)(l.cesium.credits)){const e=l.cesium.credits;let n=t._credits;(0,h.Z)(n)||(n=[],t._credits=n);for(let i=0;i<e.length;++i){const o=e[i];n.push(new u.Z(o.html,t._showCreditsOnScreen))}}const f=t._root.createBoundingVolume(o.root.boundingVolume,A.Z.IDENTITY).boundingSphere.center,p=t._ellipsoid.cartesianToCartographic(f);return(0,h.Z)(p)&&p.height>i.Z._defaultMinTerrainHeight&&(t._initialClippingPlanesOriginMatrix=E.Z.eastNorthUpToFixedFrame(f)),t._clippingPlanesOriginMatrix=A.Z.clone(t._initialClippingPlanesOriginMatrix),t}))}}function ae(e,t,n,i){if(!(0,h.Z)(n.implicitTiling)&&!(0,H.Z)(n,"3DTILES_implicit_tiling"))return new P.Z(e,t,n,i);const o=e.schema,r=new z.Z(t,n,o),s=new G.Z({subdivisionScheme:r.subdivisionScheme,subtreeLevels:r.subtreeLevels,level:0,x:0,y:0,z:0}),a=r.subtreeUriTemplate.getDerivedResource({templateValues:s.getTemplateValues()}).url,l=(0,c.Z)(n,!0);l.contents=[{uri:a}],delete l.content,delete l.extensions;const u=new P.Z(e,t,l,i);return u.implicitTileset=r,u.implicitCoordinates=s,u}async function ce(e,t){const n=(0,H.Z)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t;let i;if((0,h.Z)(n.schemaUri))e=e.getDerivedResource({url:n.schemaUri}),i=X.Z.getSchemaLoader({resource:e});else{if(!(0,h.Z)(n.schema))return;i=X.Z.getSchemaLoader({schema:n.schema})}await i.load();const o=new L.Z({schema:i.schema,metadataJson:n});return X.Z.unload(i),o}Object.defineProperties(se.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){return this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){V.Z.setOwner(e,this,"_clippingPlanes")}},properties:{get:function(){return this._properties}},ready:{get:function(){return(0,f.Z)("Cesium3DTileset.ready","Cesium3DTileset.ready was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTileset.fromUrl instead."),(0,h.Z)(this._root)}},readyPromise:{get:function(){return(0,f.Z)("Cesium3DTileset.readyPromise","Cesium3DTileset.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTileset.fromUrl instead."),this._readyPromise}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return(0,f.Z)("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},hasMixedContent:{get:function(){return this._hasMixedContent},set:function(e){a.Z.typeOf.bool("value",e),this._hasMixedContent=e}},isSkippingLevelOfDetail:{get:function(){return this.skipLevelOfDetail&&!(0,h.Z)(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if((0,h.Z)(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if((0,h.Z)(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("maximumScreenSpaceError",e,0),this._maximumScreenSpaceError=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMemoryUsage=e}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){a.Z.defined("pointCloudShading",e),this._pointCloudShading=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=A.Z.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){const e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return(0,h.Z)(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(A.Z.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):A.Z.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("foveatedConeSize",e,0),a.Z.typeOf.number.lessThanOrEquals("foveatedConeSize",e,1),this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,0),a.Z.typeOf.number.lessThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,this.maximumScreenSpaceError),this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){a.Z.typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"==typeof e&&(e=`featureId_${e}`),a.Z.typeOf.string("value",e),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"==typeof e&&(e=`instanceFeatureId_${e}`),a.Z.typeOf.string("value",e),this._instanceFeatureIdLabel=e}}}),se.fromIonAssetId=async function(e,t){a.Z.defined("assetId",e);const n=await Z.Z.fromAssetId(e);return se.fromUrl(n,t)},se.fromUrl=async function(e,t){a.Z.defined("url",e),t=(0,d.Z)(t,d.Z.EMPTY_OBJECT);const n=T.Z.createIfNeeded(e);let o;"json"===n.extension?o=n.getBaseUri(!0):n.isDataUri&&(o="");const r=await se.loadJson(n),s=await ce(n,r),c=new se(t);c._resource=n,c._url=n.url,c._basePath=o,c._metadataExtension=s,c._geometricError=r.geometricError,c._scaledGeometricError=r.geometricError;const l=r.asset;c._asset=l,c._extras=r.extras;let f=n.credits;(0,h.Z)(f)||(f=[]);const p=l.extras;if((0,h.Z)(p)&&(0,h.Z)(p.cesium)&&(0,h.Z)(p.cesium.credits)){const e=p.cesium.credits;for(let t=0;t<e.length;++t){const n=e[t];f.push(new u.Z(n.html,c._showCreditsOnScreen))}}c._credits=f;const m=(0,h.Z)(r.asset.gltfUpAxis)?I.Z.fromName(r.asset.gltfUpAxis):I.Z.Y,_=(0,d.Z)(t.modelUpAxis,m),g=(0,d.Z)(t.modelForwardAxis,I.Z.X);c._properties=r.properties,c._extensionsUsed=r.extensionsUsed,c._extensions=r.extensions,c._modelUpAxis=_,c._modelForwardAxis=g,c._root=c.loadTileset(n,r);const Z=c._root.createBoundingVolume(r.root.boundingVolume,A.Z.IDENTITY).boundingSphere.center,y=c._ellipsoid.cartesianToCartographic(Z);return(0,h.Z)(y)&&y.height>i.Z._defaultMinTerrainHeight&&(c._initialClippingPlanesOriginMatrix=E.Z.eastNorthUpToFixedFrame(Z)),c._clippingPlanesOriginMatrix=A.Z.clone(c._initialClippingPlanesOriginMatrix),c._readyPromise=Promise.resolve(c),c._ready=!0,c},se.loadJson=function(e){return T.Z.createIfNeeded(e).fetchJson()},se.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},se.prototype.loadTileset=function(e,t,n){const i=t.asset;if(!(0,h.Z)(i))throw new w.Z("Tileset must have an asset property.");if("0.0"!==i.version&&"1.0"!==i.version&&"1.1"!==i.version)throw new w.Z("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");(0,h.Z)(t.extensionsRequired)&&se.checkSupportedExtensions(t.extensionsRequired);const o=this._statistics,r=i.tilesetVersion;(0,h.Z)(r)&&(this._basePath+=`?v=${r}`,(e=e.clone()).setQueryParameters({v:r}));const s=ae(this,e,t.root,n);(0,h.Z)(n)&&(n.children.push(s),s._depth=n._depth+1);const a=[];for(a.push(s);a.length>0;){const t=a.pop();++o.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&t.refine===R.Z.ADD;const n=t._header.children;if((0,h.Z)(n))for(let i=0;i<n.length;++i){const o=ae(this,e,n[i],t);t.children.push(o),o._depth=t._depth+1,a.push(o)}this._cullWithChildrenBounds&&N.Z.checkChildrenWithinParent(t)}return s};const le=new r.Z,ue=new s.Z,de=new A.Z,he=new r.Z,fe=new r.Z,pe=new r.Z;function me(e,t){if(t.hasEmptyContent)return;const{statistics:n}=e,i=t.contentExpired,o=t.requestContent();(0,h.Z)(o)&&(o.then((i=>{!(0,h.Z)(i)||t.isDestroyed()||e.isDestroyed()||(e._processingQueue.push(t),++n.numberOfTilesProcessing)})).catch((n=>{ge(n,e,t)})),i&&(t.hasTilesetContent||t.hasImplicitContent?function(e,t){const n=t,i=Te;for(i.push(t);i.length>0;){const o=(t=i.pop()).children;for(let e=0;e<o.length;++e)i.push(o[e]);t!==n&&(Ee(e,t),--e._statistics.numberOfTilesTotal)}n.children=[]}(e,t):(n.decrementLoadCounts(t.content),--n.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t))}function _e(e,t){return e._priority-t._priority}function ge(e,t,n){if(t.isDestroyed())return;let i;n.isDestroyed()||(i=n._contentResource.url);const o=(0,h.Z)(e.message)?e.message:e.toString();t.tileFailed.numberOfListeners>0?t.tileFailed.raiseEvent({url:i,message:o}):(console.log(`A 3D tile failed to load: ${i}`),console.log(`Error: ${o}`))}se.prototype.postPassesUpdate=function(e){(0,h.Z)(this._root)&&(function(e,t){const n=e._requestedTilesInFlight;let i=0;for(let e=0;e<n.length;++e){const o=n[e],r=t.frameNumber-o._touchedFrame>=1;o._contentState===O.Z.LOADING?r?(o.cancelRequests(),++i):i>0&&(n[e-i]=o):++i}n.length-=i}(this,e),function(e,t){const n=e._statistics,i=e._statisticsLast,o=n.numberOfPendingRequests,r=n.numberOfTilesProcessing,s=i.numberOfPendingRequests,a=i.numberOfTilesProcessing;U.Z.clone(n,i);const c=o!==s||r!==a;c&&t.afterRender.push((function(){return e.loadProgress.raiseEvent(o,r),!0})),e._tilesLoaded=0===n.numberOfPendingRequests&&0===n.numberOfTilesProcessing&&0===n.numberOfAttemptedRequests,c&&e._tilesLoaded&&(t.afterRender.push((function(){return e.allTilesLoaded.raiseEvent(),!0})),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push((function(){return e.initialTilesLoaded.raiseEvent(),!0}))))}(this,e),this._cache.unloadTiles(this,we),this._styleApplied&&this._styleEngine.resetDirty(),this._styleApplied=!1)},se.prototype.prePassesUpdate=function(e){if(!(0,h.Z)(this._root))return;!function(e,t){!function(e){const t=e._processingQueue;let n=0;for(let e=0;e<t.length;++e){const i=t[e];i.isDestroyed()||i._contentState!==O.Z.PROCESSING?++n:n>0&&(t[e-n]=i)}t.length-=n}(e);const n=e._processingQueue,i=e._statistics;let o;for(let r=0;r<n.length;++r){o=n[r];try{o.process(e,t),o.contentReady&&(--i.numberOfTilesProcessing,e.tileLoad.raiseEvent(o))}catch(t){--i.numberOfTilesProcessing,ge(t,e,o)}}}(this,e);const t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,(0,h.Z)(t)&&t.enabled&&t.update(e),(0,h.Z)(this._loadTimestamp)||(this._loadTimestamp=y.Z.clone(e.time)),this._timeSinceLoad=Math.max(1e3*y.Z.secondsDifference(e.time,this._loadTimestamp),0),this.dynamicScreenSpaceError&&function(e,t){let n,i,o,a,c;const l=t.camera,u=e._root,d=u.contentBoundingVolume;if(d instanceof ee.Z)n=r.Z.normalize(l.positionWC,le),i=l.directionWC,o=l.positionCartographic.height,a=d.minimumHeight,c=d.maximumHeight;else{const e=A.Z.inverseTransformation(u.computedTransform,de),h=t.mapProjection.ellipsoid,f=d.boundingVolume,p=A.Z.multiplyByPoint(e,f.center,he);if(r.Z.magnitude(p)>h.minimumRadius){const e=s.Z.fromCartesian(p,h,ue);n=r.Z.normalize(l.positionWC,le),i=l.directionWC,o=l.positionCartographic.height,a=0,c=2*e.height}else{const t=A.Z.multiplyByPoint(e,l.positionWC,fe);if(n=r.Z.UNIT_Z,i=A.Z.multiplyByPointAsVector(e,l.directionWC,pe),i=r.Z.normalize(i,i),o=t.z,d instanceof ne.Z){const e=u._header.boundingVolume.box[11];a=p.z-e,c=p.z+e}else if(d instanceof te.Z){const e=f.radius;a=p.z-e,c=p.z+e}}}const h=a+(c-a)*e.dynamicScreenSpaceErrorHeightFalloff,f=c,p=v.Z.clamp((o-h)/(f-h),0,1);let m=1-Math.abs(r.Z.dot(i,n));m*=1-p,e._dynamicScreenSpaceErrorComputedDensity=e.dynamicScreenSpaceErrorDensity*m}(this,e),e.newFrame&&this._cache.reset()};const Ze=new r.Z,ye={maximumFractionDigits:3};function be(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,ye):Math.round(t).toLocaleString()}function ve(e){const{halfAxes:t,radius:n,center:i}=e.boundingVolume.boundingVolume;let o=r.Z.clone(i,Ze);if((0,h.Z)(t))o.x+=.75*(t[0]+t[3]+t[6]),o.y+=.75*(t[1]+t[4]+t[7]),o.z+=.75*(t[2]+t[5]+t[8]);else if((0,h.Z)(n)){let e=r.Z.normalize(i,Ze);e=r.Z.multiplyByScalar(e,.75*n,Ze),o=r.Z.add(e,i,Ze)}return o}function Ae(e,t,n){let i="",o=0;if(t.debugShowGeometricError&&(i+=`\nGeometric error: ${e.geometricError}`,o++),t.debugShowRenderingStatistics&&(i+=`\nCommands: ${e.commandsLength}`,o++,e.content.pointsLength>0&&(i+=`\nPoints: ${e.content.pointsLength}`,o++),e.content.trianglesLength>0&&(i+=`\nTriangles: ${e.content.trianglesLength}`,o++),i+=`\nFeatures: ${e.content.featuresLength}`,o++),t.debugShowMemoryUsage&&(i+=`\nTexture Memory: ${be(e.content.texturesByteLength)}`,i+=`\nGeometry Memory: ${be(e.content.geometryByteLength)}`,o+=2),t.debugShowUrl)if(e.hasMultipleContents){i+="\nUrls:";const t=e.content.innerContentUrls;for(let e=0;e<t.length;e++)i+=`\n- ${t[e]}`;o+=t.length}else i+=`\nUrl: ${e._contentHeader.uri}`,o++;const r={text:i.substring(1),position:n,font:19-o+"px sans-serif",showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(r)}const Te=[];function we(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function Ee(e,t){e._cache.unloadTile(e,t,we),t.destroy()}function Se(e,t,n,i){if(t.mode===J.Z.MORPHING)return!1;if(!(0,h.Z)(e._root))return!1;const r=e._statistics;r.clear(),++e._updatedVisibilityFrame,function(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}(e),function(e,t){t.frameNumber===e._updatedModelMatrixFrame&&(0,h.Z)(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!A.Z.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=A.Z.clone(e.modelMatrix,e._previousModelMatrix)))}(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;const s=e.getTraversal(i).selectTiles(e,t);if(i.requestTiles&&function(e){const t=e._requestedTiles;t.sort(_e);for(let n=0;n<t.length;++n)me(e,t[n])}(e),function(e,t,n){e._styleEngine.applyStyle(e),e._styleApplied=!0;const{commandList:i,context:r}=t,s=i.length,a=e._selectedTiles,c=e.isSkippingLevelOfDetail&&e._hasMixedContent&&r.stencilBuffer&&a.length>0;e._backfaceCommands.length=0,c&&((0,h.Z)(e._stencilClearCommand)||(e._stencilClearCommand=new S.Z({stencil:0,pass:C.Z.CESIUM_3D_TILE,renderState:x.Z.fromCache({stencilMask:K.Z.SKIP_LOD_MASK})})),i.push(e._stencilClearCommand));const{statistics:l,tileVisible:u}=e,d=n.isRender,f=i.length;for(let i=0;i<a.length;++i){const o=a[i];d&&u.raiseEvent(o),o.update(e,t,n),l.incrementSelectionCounts(o.content),++l.selected}const p=e._emptyTiles;for(let i=0;i<p.length;++i)p[i].update(e,t,n);let m=i.length-f;if(e._backfaceCommands.trim(),c){const t=e._backfaceCommands.values,n=t.length;i.length+=n;for(let e=m-1;e>=0;--e)i[f+n+e]=i[f+e];for(let e=0;e<n;++e)i[f+e]=t[e]}m=i.length-s,l.numberOfCommands=m,d&&(e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&m>0&&e._pointCloudEyeDomeLighting.update(t,s,e.pointCloudShading,e.boundingSphere),e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?((0,h.Z)(e._tileDebugLabels)||(e._tileDebugLabels=new j.Z),function(e,t){const n=e._selectedTiles,i=n.length,r=e._emptyTiles,s=r.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if((0,h.Z)(e.debugPickedTile)){const t=(0,h.Z)(e.debugPickPosition)?e.debugPickPosition:ve(e.debugPickedTile);Ae(e.debugPickedTile,e,t).pixelOffset=new o.Z(15,-15)}}else{for(let t=0;t<i;++t){const i=n[t];Ae(i,e,ve(i))}for(let t=0;t<s;++t){const n=r[t];(n.hasTilesetContent||n.hasImplicitContent)&&Ae(n,e,ve(n))}}e._tileDebugLabels.update(t)}(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}(e,t,i),U.Z.clone(r,n),i.isRender){const n=e._credits;if((0,h.Z)(n)&&0!==r.selected)for(let i=0;i<n.length;++i){const o=n[i];o.showOnScreen=e._showCreditsOnScreen||o._isDefaultToken,t.creditDisplay.addCreditToNextFrame(o)}}return s}se.prototype.trimLoadedTiles=function(){this._cache.trim()},se.prototype.getTraversal=function(e){const{pass:t}=e;return t===M.Z.MOST_DETAILED_PRELOAD||t===M.Z.MOST_DETAILED_PICK?ie.Z:this.isSkippingLevelOfDetail?re.Z:oe.Z},se.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},se.prototype.updateForPass=function(e,t){a.Z.typeOf.object("frameState",e),a.Z.typeOf.object("tilesetPassState",t);const n=t.pass;if(n===M.Z.PRELOAD&&(!this.preloadWhenHidden||this.show)||n===M.Z.PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||n===M.Z.REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;const i=e.commandList,o=e.camera,r=e.cullingVolume;t.ready=!1;const s=M.Z.getPassOptions(n),c=s.ignoreCommands,l=(0,d.Z)(t.commandList,i),u=l.length;e.commandList=l,e.camera=(0,d.Z)(t.camera,o),e.cullingVolume=(0,d.Z)(t.cullingVolume,r);const h=this._statisticsPerPass[n];(this.show||c)&&(this._pass=n,t.ready=Se(this,e,h,s)),c&&(l.length=u),e.commandList=i,e.camera=o,e.cullingVolume=r},se.prototype.hasExtension=function(e){return!!(0,h.Z)(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},se.prototype.isDestroyed=function(){return!1},se.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),(0,h.Z)(this._root)){const e=Te;for(e.push(this._root);e.length>0;){const t=e.pop();t.destroy();const n=t.children;for(let t=0;t<n.length;++t)e.push(n[t])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,(0,p.Z)(this)},se.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0,MAXAR_content_geojson:!0},se.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!se.supportedExtensions[e[t]])throw new w.Z(`Unsupported 3D Tiles Extension: ${e[t]}`)};const Ce=se},60308:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(11020),o=n(189381),r=n(48066),s=n(25765);function a(){}const c={stack:new o.Z,stackMaximumLength:0},l={stack:new o.Z,stackMaximumLength:0};function u(e,t){e.contentAvailable&&s.Z.selectTile(e,t)}function d(e,t,n){const i=e.refine===r.Z.REPLACE,{tileset:o,children:a}=e,{updateTile:c,loadTile:l,touchTile:u}=s.Z;for(let e=0;e<a.length;++e)c(a[e],n);a.sort(s.Z.sortChildrenByDistanceToCamera);const d=i&&e.hasRenderableContent;let f=!0,p=!1,m=-1,_=Number.MAX_VALUE;for(let e=0;e<a.length;++e){const i=a[e];if(i.isVisible?(t.push(i),i._foveatedFactor<_&&(m=e,_=i._foveatedFactor),p=!0):(d||o.loadSiblings)&&(i._foveatedFactor<_&&(m=e,_=i._foveatedFactor),l(i,n),u(i,n)),d){let e;e=!!i._inRequestVolume&&(i.hasRenderableContent?i.contentAvailable:h(i,n)),f=f&&e}}if(p||(f=!1),-1!==m&&i){const t=a[m];t._wasMinPriorityChild=!0;const n=(e._wasMinPriorityChild||e===o.root)&&_<=e._priorityHolder._foveatedFactor?e._priorityHolder:e;n._foveatedFactor=Math.min(t._foveatedFactor,n._foveatedFactor),n._distanceToCamera=Math.min(t._distanceToCamera,n._distanceToCamera);for(let e=0;e<a.length;++e)a[e]._priorityHolder=n}return f}function h(e,t){const{canTraverse:n,updateTile:i,loadTile:o,touchTile:r}=s.Z;let a=!0;const c=l.stack;for(c.push(e);c.length>0;){l.stackMaximumLength=Math.max(l.stackMaximumLength,c.length);const e=c.pop(),s=e.children,u=s.length,d=!e.hasRenderableContent&&n(e),h=!e.hasRenderableContent&&0===e.children.length;if(d||e.contentAvailable||h||(a=!1),i(e,t),e.isVisible||(o(e,t),r(e,t)),d)for(let e=0;e<u;++e){const t=s[e];c.push(t)}}return a}a.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;const n=e.root;if(s.Z.updateTile(n,t),!n.isVisible)return;if(n.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)return;!function(e,t){const{tileset:n}=e,{canTraverse:o,loadTile:a,visitTile:l,touchTile:h}=s.Z,f=c.stack;for(f.push(e);f.length>0;){c.stackMaximumLength=Math.max(c.stackMaximumLength,f.length);const e=f.pop(),s=e.parent,p=!(0,i.Z)(s)||s._refines;e._refines=!!o(e)&&d(e,f,t)&&p;const m=!e._refines&&p;e.hasRenderableContent?e.refine===r.Z.ADD?(u(e,t),a(e,t)):e.refine===r.Z.REPLACE&&(a(e,t),m&&u(e,t)):(n._emptyTiles.push(e),a(e,t),m&&u(e,t)),l(e,t),h(e,t)}}(n,t),c.stack.trim(c.stackMaximumLength),l.stack.trim(l.stackMaximumLength);const o=e._requestedTiles;for(let e=0;e<o.length;++e)o[e].updatePriority()};const f=a},888463:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(11020),o=n(416093);function r(){this._list=new o.Z,this._sentinel=this._list.add(),this._trimTiles=!1}r.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},r.prototype.touch=function(e){const t=e.cacheNode;(0,i.Z)(t)&&this._list.splice(this._sentinel,t)},r.prototype.add=function(e){(0,i.Z)(e.cacheNode)||(e.cacheNode=this._list.add(e))},r.prototype.unloadTile=function(e,t,n){const o=t.cacheNode;(0,i.Z)(o)&&(this._list.remove(o),t.cacheNode=void 0,n(e,t))},r.prototype.unloadTiles=function(e,t){const n=this._trimTiles;this._trimTiles=!1;const i=this._list,o=1024*e.maximumMemoryUsage*1024,r=this._sentinel;let s=i.head;for(;s!==r&&(e.totalMemoryUsageInBytes>o||n);){const n=s.item;s=s.next,this.unloadTile(e,n,t)}},r.prototype.trim=function(){this._trimTiles=!0};const s=r},73360:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(35961),o=n(11020),r=n(791364),s=n(344485);function a(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function c(e,t){let n;return n="_loadTimestamp"===t?r.Z.toDate(e).getTime():e,n}a.prototype.setReferenceMinimumMaximum=function(e,t,n){this._referenceMinimum[n]=c(e,n),this._referenceMaximum[n]=c(t,n)};const l=[new i.Z(.1,.1,.1,1),new i.Z(.153,.278,.878,1),new i.Z(.827,.231,.49,1),new i.Z(.827,.188,.22,1),new i.Z(1,.592,.259,1),new i.Z(1,.843,0,1)];a.prototype.colorize=function(e,t){const n=this.tilePropertyName;if(!(0,o.Z)(n)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;const r=function(e,t){const n=e.tilePropertyName;if((0,o.Z)(n)){const i=c(t[n],n);return(0,o.Z)(i)?(e._maximum=Math.max(i,e._maximum),e._minimum=Math.min(i,e._minimum),i):(e.tilePropertyName=void 0,i)}}(this,e),a=this._previousMinimum,u=this._previousMaximum;if(a===Number.MAX_VALUE||u===-Number.MAX_VALUE)return;const d=u-a+s.Z.EPSILON7,h=s.Z.clamp(r-a,0,d)/d*(l.length-1),f=Math.floor(h),p=Math.ceil(h),m=h-f,_=l[f],g=l[p],Z=i.Z.clone(i.Z.WHITE);Z.red=s.Z.lerp(_.red,g.red,m),Z.green=s.Z.lerp(_.green,g.green,m),Z.blue=s.Z.lerp(_.blue,g.blue,m),e._debugColor=Z},a.prototype.resetMinimumMaximum=function(){const e=this.tilePropertyName;if((0,o.Z)(e)){const t=this._referenceMinimum[e],n=this._referenceMaximum[e],i=(0,o.Z)(t)&&(0,o.Z)(n);this._previousMinimum=i?t:this._minimum,this._previousMaximum=i?n:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}};const u=a},830904:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(790087),o=n(234146),r=n(11020),s=n(66922),a=n(971437);function c(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).metadataJson,n=e.schema;i.Z.typeOf.object("options.metadataJson",t),i.Z.typeOf.object("options.schema",n);const c=(0,o.Z)(t.metadata,t.tileset);let l;(0,r.Z)(c)&&(l=new a.Z({tileset:c,class:n.classes[c.class]}));let u=[];const d=[],h=t.groups;if(Array.isArray(h)){const e=h.length;for(let t=0;t<e;t++){const e=h[t];d.push(new s.Z({group:e,class:n.classes[e.class]}))}}else if((0,r.Z)(h)){u=Object.keys(h).sort();const e=u.length;for(let t=0;t<e;t++){const e=u[t];if(h.hasOwnProperty(e)){const t=h[e];d.push(new s.Z({id:e,group:h[e],class:n.classes[t.class]}))}}}this._schema=n,this._groups=d,this._groupIds=u,this._tileset=l,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(c.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const l=c},449743:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(101496),o=n(189381),r=n(48066),s=n(25765);function a(){}const c={stack:new o.Z,stackMaximumLength:0};function l(e){return 0!==e.children.length&&(e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:(e.hasEmptyContent,!0))}function u(e,t,n){const{children:i}=e;for(let e=0;e<i.length;++e){const o=i[e];o.updateVisibility(n),o.isVisible&&t.push(o)}}function d(e,t){(t.hasUnloadedRenderableContent||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function h(e,t){e.contentAvailable&&e.contentVisibility(t)!==i.Z.OUTSIDE&&e.tileset._selectedTiles.push(e)}a.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e.hasMixedContent=!1;let n=!0;const i=e.root;if(i.updateVisibility(t),!i.isVisible)return n;const{touchTile:o,visitTile:a}=s.Z,f=c.stack;for(f.push(i);f.length>0;){c.stackMaximumLength=Math.max(c.stackMaximumLength,f.length);const i=f.pop(),s=i.refine===r.Z.ADD,p=i.refine===r.Z.REPLACE,m=l(i);m&&u(i,f,t),(s||p&&!m)&&(d(e,i),o(i,t),h(i,t),i.hasRenderableContent&&!i.contentAvailable&&(n=!1)),a(i,t)}return c.stack.trim(c.stackMaximumLength),n};const f=a},8e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(11020),o=n(189381),r=n(48066),s=n(25765);function a(){}const c={stack:new o.Z,stackMaximumLength:0},l={stack:new o.Z,stackMaximumLength:0},u={stack:new o.Z,stackMaximumLength:0,ancestorStack:new o.Z,ancestorStackMaximumLength:0};function d(e,t){const n=e.contentAvailable?e:e._ancestorWithContentAvailable;(0,i.Z)(n)?n._shouldSelect=!0:function(e,t){const{updateTile:n,touchTile:i,selectTile:o}=s.Z,r=l.stack;for(r.push(e);r.length>0;){l.stackMaximumLength=Math.max(l.stackMaximumLength,r.length);const s=r.pop().children;for(let a=0;a<s.length;++a){const c=s[a];c.isVisible&&(c.contentAvailable?(n(c,t),i(c,t),o(c,t)):c._depth-e._depth<2&&r.push(c))}}}(e,t)}function h(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;const{parent:n}=e;if(!(0,i.Z)(n))return;const o=!n.hasUnloadedRenderableContent||n._requestedFrame===t.frameNumber;e._ancestorWithContent=o?n:n._ancestorWithContent,e._ancestorWithContentAvailable=n.contentAvailable?n:n._ancestorWithContentAvailable}function f(e,t){const n=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||(0,i.Z)(n)&&t._screenSpaceError<n._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>n._depth+e.skipLevels)}function p(e,t,n){const{tileset:i,children:o}=e,{updateTile:r,loadTile:a,touchTile:c}=s.Z;for(let e=0;e<o.length;++e)r(o[e],n);o.sort(s.Z.sortChildrenByDistanceToCamera);let l=!1;for(let e=0;e<o.length;++e){const r=o[e];r.isVisible?(t.push(r),l=!0):i.loadSiblings&&(a(r,n),c(r,n))}return l}function m(e,t){const{tileset:n}=e;return!n.immediatelyLoadDesiredLevelOfDetail&&(!(0,i.Z)(e._ancestorWithContent)||(0===e._screenSpaceError?e.parent._screenSpaceError>t:e._screenSpaceError>t))}a.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;const n=e.root;if(s.Z.updateTile(n,t),!n.isVisible)return;if(n.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)return;!function(e,t){const{tileset:n}=e,o=n.immediatelyLoadDesiredLevelOfDetail?Number.MAX_VALUE:Math.max(n.baseScreenSpaceError,n.maximumScreenSpaceError),{canTraverse:a,loadTile:l,visitTile:u,touchTile:_}=s.Z,g=c.stack;for(g.push(e);g.length>0;){c.stackMaximumLength=Math.max(c.stackMaximumLength,g.length);const e=g.pop();h(e,t);const s=e.parent,Z=!(0,i.Z)(s)||s._refines;e._refines=!!a(e)&&p(e,g,t)&&Z;const y=!e._refines&&Z;e.hasRenderableContent?e.refine===r.Z.ADD?(d(e,t),l(e,t)):e.refine===r.Z.REPLACE&&(m(e,o)?(l(e,t),y&&d(e,t)):y?(d(e,t),l(e,t)):f(n,e)&&l(e,t)):(n._emptyTiles.push(e),l(e,t),y&&d(e,t)),u(e,t),_(e,t)}}(n,t),function(e,t){const{selectTile:n,canTraverse:o}=s.Z,{stack:a,ancestorStack:c}=u;let l;for(a.push(e);a.length>0||c.length>0;){if(u.stackMaximumLength=Math.max(u.stackMaximumLength,a.length),u.ancestorStackMaximumLength=Math.max(u.ancestorStackMaximumLength,c.length),c.length>0){const e=c.peek();if(e._stackLength===a.length){c.pop(),e!==l&&(e._finalResolution=!1),n(e,t);continue}}const e=a.pop();if(!(0,i.Z)(e))continue;const s=o(e);if(e._shouldSelect)if(e.refine===r.Z.ADD)n(e,t);else{if(e._selectionDepth=c.length,e._selectionDepth>0&&(e.tileset.hasMixedContent=!0),l=e,!s){n(e,t);continue}c.push(e),e._stackLength=a.length}if(s){const t=e.children;for(let e=0;e<t.length;++e){const n=t[e];n.isVisible&&a.push(n)}}}}(n,t),c.stack.trim(c.stackMaximumLength),l.stack.trim(l.stackMaximumLength),u.stack.trim(u.stackMaximumLength),u.ancestorStack.trim(u.ancestorStackMaximumLength);const o=e._requestedTiles;for(let e=0;e<o.length;++e)o[e].updatePriority()};const _=a},654125:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(11020);function o(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.batchTableByteLength=0}function r(e,t,n,o){const s=t.innerContents,a=t.pointsLength,c=t.trianglesLength,l=t.featuresLength,u=t.geometryByteLength,d=t.texturesByteLength,h=t.batchTableByteLength;if(o?(e.numberOfFeaturesLoaded+=n?-l:l,e.numberOfPointsLoaded+=n?-a:a,e.geometryByteLength+=n?-u:u,e.texturesByteLength+=n?-d:d,e.batchTableByteLength+=n?-h:h):(e.numberOfFeaturesSelected+=n?-l:l,e.numberOfPointsSelected+=n?-a:a,e.numberOfTrianglesSelected+=n?-c:c),(0,i.Z)(s)){const t=s.length;for(let i=0;i<t;++i)r(e,s[i],n,o)}}o.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},o.prototype.incrementSelectionCounts=function(e){r(this,e,!1,!1)},o.prototype.incrementLoadCounts=function(e){r(this,e,!1,!0)},o.prototype.decrementLoadCounts=function(e){r(this,e,!0,!0)},o.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.selected=e.selected,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.batchTableByteLength=e.batchTableByteLength};const s=o},25765:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(765153),r=n(101496),s=n(298810),a=n(48066);function c(){}function l(e,t){if(e.updateVisibility(t),!e.isVisible)return;const n=e.children.length>0;if((e.hasTilesetContent||e.hasImplicitContent)&&n){const n=e.children[0];return l(n,t),void(e._visible=n._visible)}if(function(e,t){const{parent:n,tileset:o}=e;return!(!(0,i.Z)(n)||n.hasTilesetContent||n.hasImplicitContent||n.refine!==a.Z.ADD)&&e.getScreenSpaceError(t,!0)<=o._maximumScreenSpaceError}(e,t))return void(e._visible=!1);const o=e.refine===a.Z.REPLACE,r=e._optimChildrenWithinParent===s.Z.USE_OPTIMIZATION;return o&&r&&n&&!function(e,t){let n=!1;const i=e.children;for(let e=0;e<i.length;++e){const o=i[e];o.updateVisibility(t),n=n||o.isVisible}return n}(e,t)?(++e.tileset._statistics.numberOfTilesCulledWithChildrenUnion,void(e._visible=!1)):void 0}c.selectTiles=function(e,t){o.Z.throwInstantiationError()},c.sortChildrenByDistanceToCamera=function(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera},c.canTraverse=function(e){return 0!==e.children.length&&(e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:e._screenSpaceError>e.tileset._maximumScreenSpaceError)},c.selectTile=function(e,t){if(e.contentVisibility(t)===r.Z.OUTSIDE)return;const{content:n,tileset:i}=e;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,e.lastStyleTime=0,i._selectedTilesToStyle.push(e)):e._selectedFrame<t.frameNumber-1&&i._selectedTilesToStyle.push(e),e._selectedFrame=t.frameNumber,i._selectedTiles.push(e)},c.visitTile=function(e,t){++e.tileset._statistics.visited,e._visitedFrame=t.frameNumber},c.touchTile=function(e,t){e._touchedFrame!==t.frameNumber&&(e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber)},c.loadTile=function(e,t){const{tileset:n}=e;if(e._requestedFrame===t.frameNumber||!e.hasUnloadedRenderableContent&&!e.contentExpired)return;if(!function(e,t){const{tileset:n}=e;if(!n._cullRequestsWhileMoving)return!0;const{positionWCDeltaMagnitude:i,positionWCDeltaMagnitudeLastFrame:o}=t.camera,r=0!==i?i:o,s=Math.max(2*e.boundingSphere.radius,1);return n.cullRequestsWhileMovingMultiplier*r/s<1}(e,t))return;const i=t.camera.timeSinceMoved<n.foveatedTimeDelay;e.priorityDeferred&&i||(e._requestedFrame=t.frameNumber,n._requestedTiles.push(e))},c.updateTile=function(e,t){l(e,t),e.updateExpiration(),e._wasMinPriorityChild=!1,e._priorityHolder=e,function(e){const t=e.tileset._minimumPriority,n=e.tileset._maximumPriority,i=e._priorityHolder;n.distance=Math.max(i._distanceToCamera,n.distance),t.distance=Math.min(i._distanceToCamera,t.distance),n.depth=Math.max(e._depth,n.depth),t.depth=Math.min(e._depth,t.depth),n.foveatedFactor=Math.max(i._foveatedFactor,n.foveatedFactor),t.foveatedFactor=Math.min(i._foveatedFactor,t.foveatedFactor),n.reverseScreenSpaceError=Math.max(e._priorityReverseScreenSpaceError,n.reverseScreenSpaceError),t.reverseScreenSpaceError=Math.min(e._priorityReverseScreenSpaceError,t.reverseScreenSpaceError)}(e),e._shouldSelect=!1,e._finalResolution=!0};const u=c},234871:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(660904),o=n(790087),r=n(11020);function s(e,t){o.Z.typeOf.object("normal",e),o.Z.typeOf.number("distance",t),this._distance=t,this._normal=new a(e,this),this.onChangeCallback=void 0,this.index=-1}function a(e,t){this._clippingPlane=t,this._cartesian3=i.Z.clone(e)}Object.defineProperties(s.prototype,{distance:{get:function(){return this._distance},set:function(e){o.Z.typeOf.number("value",e),(0,r.Z)(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){o.Z.typeOf.object("value",e),(0,r.Z)(this.onChangeCallback)&&!i.Z.equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),i.Z.clone(e,this._normal._cartesian3)}}}),s.fromPlane=function(e,t){return o.Z.typeOf.object("plane",e),(0,r.Z)(t)?(t.normal=e.normal,t.distance=e.distance):t=new s(e.normal,e.distance),t},s.clone=function(e,t){return(0,r.Z)(t)?(t.normal=e.normal,t.distance=e.distance,t):new s(e.normal,e.distance)},Object.defineProperties(a.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){o.Z.typeOf.number("value",e),(0,r.Z)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){o.Z.typeOf.number("value",e),(0,r.Z)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){o.Z.typeOf.number("value",e),(0,r.Z)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}});const c=s},753577:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var i=n(393766),o=n(405254),r=n(660904),s=n(798336),a=n(790087),c=n(35961),l=n(234146),u=n(11020),d=n(722313),h=n(765153),f=n(282910),p=n(101496),m=n(659635),_=n(430886),g=n(341633),Z=n(591477),y=n(545870),b=n(497730),v=n(609882),A=n(234871);function T(e){e=(0,l.Z)(e,l.Z.EMPTY_OBJECT),this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=(0,l.Z)(e.enabled,!0),this.modelMatrix=m.Z.clone((0,l.Z)(e.modelMatrix,m.Z.IDENTITY)),this.edgeColor=c.Z.clone((0,l.Z)(e.edgeColor,c.Z.WHITE)),this.edgeWidth=(0,l.Z)(e.edgeWidth,0),this.planeAdded=new f.Z,this.planeRemoved=new f.Z,this._owner=void 0;const t=(0,l.Z)(e.unionClippingRegions,!1);this._unionClippingRegions=t,this._testIntersection=t?w:E,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;const n=e.planes;if((0,u.Z)(n)){const e=n.length;for(let t=0;t<e;++t)this.add(n[t])}}function w(e){return e===p.Z.OUTSIDE}function E(e){return e===p.Z.INSIDE}function S(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||-1!==e._dirtyIndex&&e._dirtyIndex!==t,e._dirtyIndex=t}function C(e,t){const n=e.length;for(let i=0;i<n;++i)if(g.Z.equals(e[i],t))return i;return-1}Object.defineProperties(T.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?w:E)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}}),T.prototype.add=function(e){const t=this._planes.length,n=this;e.onChangeCallback=function(e){S(n,e)},e.index=t,S(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)},T.prototype.get=function(e){return a.Z.typeOf.number("index",e),this._planes[e]},T.prototype.contains=function(e){return-1!==C(this._planes,e)},T.prototype.remove=function(e){const t=this._planes,n=C(t,e);if(-1===n)return!1;e instanceof A.Z&&(e.onChangeCallback=void 0,e.index=-1);const i=t.length-1;for(let e=n;e<i;++e){const n=t[e+1];t[e]=n,n instanceof A.Z&&(n.index=e)}return this._multipleDirtyPlanes=!0,t.length=i,this.planeRemoved.raiseEvent(e,n),!0},T.prototype.removeAll=function(){const e=this._planes,t=e.length;for(let n=0;n<t;++n){const t=e[n];t instanceof A.Z&&(t.onChangeCallback=void 0,t.index=-1),this.planeRemoved.raiseEvent(t,n)}this._multipleDirtyPlanes=!0,this._planes=[]};const x=new s.Z,I=new s.Z;function P(e,t,n){const o=e._uint8View,r=e._planes;let a=0;for(let e=t;e<n;++e){const t=r[e],n=i.Z.octEncodeToCartesian4(t.normal,I);o[a]=n.x,o[a+1]=n.y,o[a+2]=n.z,o[a+3]=n.w;const c=s.Z.packFloat(t.distance,x);o[a+4]=c.x,o[a+5]=c.y,o[a+6]=c.z,o[a+7]=c.w,a+=8}}function D(e,t,n){const i=e._float32View,o=e._planes;let r=0;for(let e=t;e<n;++e){const t=o[e],n=t.normal;i[r]=n.x,i[r+1]=n.y,i[r+2]=n.z,i[r+3]=t.distance,r+=4}}function O(e,t){const n=Z.Z.maximumTextureSize;return t.x=Math.min(e,n),t.y=Math.ceil(e/t.x),t}const L=new o.Z;T.prototype.update=function(e){let t=this._clippingPlanesTexture;const n=e.context,i=T.useFloatTexture(n),o=i?this.length:2*this.length;if((0,u.Z)(t)){const e=t.width*t.height;(e<o||o<.25*e)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(0===this.length)return;if(!(0,u.Z)(t)){const e=O(o,L);e.y*=2,i?(t=new v.Z({context:n,width:e.x,height:e.y,pixelFormat:_.Z.RGBA,pixelDatatype:y.Z.FLOAT,sampler:b.Z.NEAREST,flipY:!1}),this._float32View=new Float32Array(e.x*e.y*4)):(t=new v.Z({context:n,width:e.x,height:e.y,pixelFormat:_.Z.RGBA,pixelDatatype:y.Z.UNSIGNED_BYTE,sampler:b.Z.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(e.x*e.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}const r=this._dirtyIndex;if(this._multipleDirtyPlanes||-1!==r){if(this._multipleDirtyPlanes)i?(D(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(P(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let e=0,n=0;i?(n=Math.floor(r/t.width),e=Math.floor(r-n*t.width),D(this,r,r+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:e,yOffset:n})):(n=Math.floor(2*r/t.width),e=Math.floor(2*r-n*t.width),P(this,r,r+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:e,yOffset:n}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};const N=new m.Z,M=new g.Z(r.Z.UNIT_X,0);T.prototype.computeIntersectionWithBoundingVolume=function(e,t){const n=this._planes,i=n.length;let o=this.modelMatrix;(0,u.Z)(t)&&(o=m.Z.multiply(t,o,N));let r=p.Z.INSIDE;!this.unionClippingRegions&&i>0&&(r=p.Z.OUTSIDE);for(let t=0;t<i;++t){const i=n[t];g.Z.transform(i,o,M);const s=e.intersectPlane(M);if(s===p.Z.INTERSECTING)r=s;else if(this._testIntersection(s))return s}return r},T.setOwner=function(e,t,n){if(e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),(0,u.Z)(e))){if((0,u.Z)(e._owner))throw new h.Z("ClippingPlaneCollection should only be assigned to one object");e._owner=t,t[n]=e}},T.useFloatTexture=function(e){return e.floatingPointTexture},T.getTextureResolution=function(e,t,n){const i=e.texture;if((0,u.Z)(i))return n.x=i.width,n.y=i.height,n;const o=O(T.useFloatTexture(t)?e.length:2*e.length,n);return o.y*=2,o},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),(0,d.Z)(this)};const R=T},66990:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(344485);const o={HIGHLIGHT:0,REPLACE:1,MIX:2,getColorBlend:function(e,t){return e===o.HIGHLIGHT?0:e===o.REPLACE?1:e===o.MIX?i.Z.clamp(t,i.Z.EPSILON4,1):void 0}},r=Object.freeze(o)},151802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(234146),o=n(11020),r=n(906439),s=n(722313),a=n(252376),c=n(217066);function l(e,t,n,i){this._tileset=e,this._tile=t,this._resource=n,(0,o.Z)(i)||(i=[]),this._contents=i,this._metadata=void 0,this._group=void 0,this._ready=!1,this._resolveContent=void 0,this._readyPromise=new Promise((e=>{this._resolveContent=e}))}Object.defineProperties(l.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,r.Z)("Composite3DTileContent.readyPromise","Composite3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Composite3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e;const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].metadata=e}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e;const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].group=e}}});const u=Uint32Array.BYTES_PER_ELEMENT;l.fromTileType=async function(e,t,n,r,s,d){s=(0,i.Z)(s,0);const h=new Uint8Array(r),f=new DataView(r);s+=u;const p=f.getUint32(s,!0);if(1!==p)throw new c.Z(`Only Composite Tile version 1 is supported. Version ${p} is not.`);s+=u,s+=u;const m=f.getUint32(s,!0);s+=u;let _=n.queryParameters.compositeIndex;_=(0,o.Z)(_)?`${_}_`:"";const g=[];g.length=m;for(let i=0;i<m;++i){const l=(0,a.Z)(h,s),p=f.getUint32(s+2*u,!0),m=d[l],Z=`${_}${i}`,y=n.getDerivedResource({queryParameters:{compositeIndex:Z}});if(!(0,o.Z)(m))throw new c.Z(`Unknown tile content type, ${l}, inside Composite tile`);g[i]=Promise.resolve(m(e,t,y,r,s)),s+=p}return new l(e,t,n,await Promise.all(g))},l.prototype.hasProperty=function(e,t){return!1},l.prototype.getFeature=function(e){},l.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)},l.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},l.prototype.update=function(e,t){const n=this._contents,i=n.length;let o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0,this._resolveContent(this))},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,s.Z)(this)};const d=l},792617:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(234146),r=n(529394);function s(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).content,n=e.class;i.Z.typeOf.object("options.content",t),i.Z.typeOf.object("options.class",n),this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(s.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.hasProperty=function(e){return r.Z.hasProperty(e,this._properties,this._class)},s.prototype.hasPropertyBySemantic=function(e){return r.Z.hasPropertyBySemantic(e,this._properties,this._class)},s.prototype.getPropertyIds=function(e){return r.Z.getPropertyIds(this._properties,this._class,e)},s.prototype.getProperty=function(e){return r.Z.getProperty(e,this._properties,this._class)},s.prototype.setProperty=function(e,t){return r.Z.setProperty(e,t,this._properties,this._class)},s.prototype.getPropertyBySemantic=function(e){return r.Z.getPropertyBySemantic(e,this._properties,this._class)},s.prototype.setPropertyBySemantic=function(e,t){return r.Z.setPropertyBySemantic(e,t,this._properties,this._class)};const a=s},628031:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var i=n(781382),o=n(949225),r=n(790087),s=n(865029),a=n(234146),c=n(11020),l=n(906439),u=n(722313),d=n(354998);const h=100,f="#ffffff",p="#48b";function m(e,t){this.credit=e,this.count=(0,a.Z)(t,1)}function _(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i];if(s.Z.equals(n,t))return!0}return!1}const g="cesium-credit-delimiter";function Z(e){const t=document.createElement("span");return t.textContent=e,t.className=g,t}function y(e,t){if((0,c.Z)(t)){const n=document.createElement(t);n._creditId=e._creditId,n.appendChild(e),e=n}return e}function b(e,t,n,i){const o=e.childNodes;let r=-1;t.sort((function(e,t){return t.count-e.count}));for(let s=0;s<t.length;++s){const a=t[s].credit;if((0,c.Z)(a)){if(r=s,(0,c.Z)(n)&&(r*=2,s>0)){const t=r-1;if(o.length<=t)e.appendChild(Z(n));else{const i=o[t];i.className!==g&&e.replaceChild(Z(n),i)}}const t=a.element;if(o.length<=r)e.appendChild(y(t,i));else{const n=o[r];n._creditId!==a._id&&e.replaceChild(y(t,i),n)}}}for(++r;r<o.length;)e.removeChild(o[r])}function v(e,t){let n=`${e} {`;for(const e in t)t.hasOwnProperty(e)&&(n+=`${e}: ${t[e]}; `);return n+=" }\n",n}function A(e,t,n){r.Z.defined("container",e);const o=this;n=(0,a.Z)(n,document.body);const c=document.createElement("div");c.className="cesium-credit-lightbox-overlay",n.appendChild(c);const l=document.createElement("div");function u(e){l.contains(e.target)||o.hideLightbox()}l.className="cesium-credit-lightbox",c.appendChild(l),c.addEventListener("click",u,!1);const d=document.createElement("div");d.className="cesium-credit-lightbox-title",d.textContent="Data provided by:",l.appendChild(d);const m=document.createElement("a");m.onclick=this.hideLightbox.bind(this),m.innerHTML="&times;",m.className="cesium-credit-lightbox-close",l.appendChild(m);const _=document.createElement("ul");l.appendChild(_);const g=document.createElement("div");g.className="cesium-credit-logoContainer",g.style.display="inline",e.appendChild(g);const Z=document.createElement("div");Z.className="cesium-credit-textContainer",Z.style.display="inline",e.appendChild(Z);const y=document.createElement("a");y.className="cesium-credit-expand-link",y.onclick=this.showLightbox.bind(this),y.textContent="Data attribution",e.appendChild(y),function(e){let t="";t+=v(".cesium-credit-lightbox-overlay",{display:"none","z-index":"1",position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-color":"rgba(80, 80, 80, 0.8)"}),t+=v(".cesium-credit-lightbox",{"background-color":"#303336",color:f,position:"relative","min-height":`${h}px`,margin:"auto"}),t+=v(".cesium-credit-lightbox > ul > li a, .cesium-credit-lightbox > ul > li a:visited",{color:f}),t+=v(".cesium-credit-lightbox > ul > li a:hover",{color:p}),t+=v(".cesium-credit-lightbox.cesium-credit-lightbox-expanded",{border:"1px solid #444","border-radius":"5px","max-width":"370px"}),t+=v(".cesium-credit-lightbox.cesium-credit-lightbox-mobile",{height:"100%",width:"100%"}),t+=v(".cesium-credit-lightbox-title",{padding:"20px 20px 0 20px"}),t+=v(".cesium-credit-lightbox-close",{"font-size":"18pt",cursor:"pointer",position:"absolute",top:"0",right:"6px",color:f}),t+=v(".cesium-credit-lightbox-close:hover",{color:p}),t+=v(".cesium-credit-lightbox > ul",{margin:"0",padding:"12px 20px 12px 40px","font-size":"13px"}),t+=v(".cesium-credit-lightbox > ul > li",{"padding-bottom":"6px"}),t+=v(".cesium-credit-lightbox > ul > li *",{padding:"0",margin:"0"}),t+=v(".cesium-credit-expand-link",{"padding-left":"5px",cursor:"pointer","text-decoration":"underline",color:f}),t+=v(".cesium-credit-expand-link:hover",{color:p}),t+=v(".cesium-credit-text",{color:f}),t+=v(".cesium-credit-textContainer *, .cesium-credit-logoContainer *",{display:"inline"});const n=(0,a.Z)(function(e){if(e.shadowRoot)return e.shadowRoot;if(e.getRootNode){const t=e.getRootNode();if(t instanceof ShadowRoot)return t}}(e),document.head),i=document.createElement("style");i.innerHTML=t,n.appendChild(i)}(e);const b=s.Z.clone(A.cesiumCredit);this._delimiter=(0,a.Z)(t,"  "),this._screenContainer=Z,this._cesiumCreditContainer=g,this._lastViewportHeight=void 0,this._lastViewportWidth=void 0,this._lightboxCredits=l,this._creditList=_,this._lightbox=c,this._hideLightbox=u,this._expandLink=y,this._expanded=!1,this._staticCredits=[],this._cesiumCredit=b,this._previousCesiumCredit=void 0,this._currentCesiumCredit=b,this._creditDisplayElementPool=[],this._creditDisplayElementIndex=0,this._currentFrameCredits={screenCredits:new i.Z,lightboxCredits:new i.Z},this._defaultCredit=void 0,this.viewport=n,this.container=e}function T(e,t,n,i){i=(0,a.Z)(i,1);let o=t.get(n.id);if((0,c.Z)(o))o.count<Number.MAX_VALUE&&(o.count+=i);else{const r=e._creditDisplayElementPool,s=e._creditDisplayElementPoolIndex;s<r.length?(o=r[s],o.credit=n,o.count=i):(o=new m(n,i),r.push(o)),++e._creditDisplayElementPoolIndex,t.set(n.id,o)}}let w;function E(){if(!(0,c.Z)(w)){let e=(0,o.Z)("Assets/Images/ion-credit.png");0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&0!==e.indexOf("data:")&&(e=new d(e).path()),w=new s.Z(`<a href="https://cesium.com/" target="_blank"><img src="${e}" title="Cesium ion"/></a>`,!0)}return A._cesiumCreditInitialized||(A._cesiumCredit=w,A._cesiumCreditInitialized=!0),w}A.prototype.addCredit=function(e){(0,l.Z)("CreditDisplay.addCredit","CreditDisplay.addCredit was deprecated in CesiumJS 1.105.  It will be removed in CesiumJS 1.107.  Use CreditDisplay.addCreditToNextFrame instead."),this.addCreditToNextFrame(e)},A.prototype.addCreditToNextFrame=function(e){if(r.Z.defined("credit",e),e._isIon)return(0,c.Z)(this._defaultCredit)||(this._defaultCredit=s.Z.clone(E())),void(this._currentCesiumCredit=this._defaultCredit);let t;t=e.showOnScreen?this._currentFrameCredits.screenCredits:this._currentFrameCredits.lightboxCredits,T(this,t,e)},A.prototype.addDefaultCredit=function(e){r.Z.defined("credit",e),(0,l.Z)("CreditDisplay.addDefaultCredit","CreditDisplay.addDefaultCredit was deprecated in CesiumJS 1.105.  It will be removed in CesiumJS 1.107.  Use CreditDisplay.addStaticCredit instead.");const t=this._staticCredits;_(t,e)||(e.showOnScreen=!0,t.push(e))},A.prototype.addStaticCredit=function(e){r.Z.defined("credit",e);const t=this._staticCredits;_(t,e)||t.push(e)},A.prototype.removeStaticCredit=function(e){r.Z.defined("credit",e);const t=this._staticCredits,n=t.indexOf(e);-1!==n&&t.splice(n,1)},A.prototype.removeDefaultCredit=function(e){(0,l.Z)("CreditDisplay.removeDefaultCredit","CreditDisplay.removeDefaultCredit was deprecated in CesiumJS 1.105.  It will be removed in CesiumJS 1.107.  Use CreditDisplay.addStaticCredit instead."),this.removeStaticCredit(e)},A.prototype.showLightbox=function(){this._lightbox.style.display="block",this._expanded=!0},A.prototype.hideLightbox=function(){this._lightbox.style.display="none",this._expanded=!1},A.prototype.update=function(){this._expanded&&function(e){const t=e._lightboxCredits,n=e.viewport.clientWidth,i=e.viewport.clientHeight;n!==e._lastViewportWidth&&(n<576?(t.className="cesium-credit-lightbox cesium-credit-lightbox-mobile",t.style.marginTop="0"):(t.className="cesium-credit-lightbox cesium-credit-lightbox-expanded",t.style.marginTop=`${Math.floor(.5*(i-t.clientHeight))}px`),e._lastViewportWidth=n),n>=576&&i!==e._lastViewportHeight&&(t.style.marginTop=`${Math.floor(.5*(i-t.clientHeight))}px`,e._lastViewportHeight=i)}(this)},A.prototype.beginFrame=function(){const e=this._currentFrameCredits;this._creditDisplayElementPoolIndex=0;const t=e.screenCredits,n=e.lightboxCredits;t.removeAll(),n.removeAll();const i=this._staticCredits;for(let e=0;e<i.length;++e){const o=i[e],r=o.showOnScreen?t:n;o._isIon&&s.Z.equals(A.cesiumCredit,this._cesiumCredit)||T(this,r,o,Number.MAX_VALUE)}s.Z.equals(A.cesiumCredit,this._cesiumCredit)||(this._cesiumCredit=s.Z.clone(A.cesiumCredit)),this._currentCesiumCredit=this._cesiumCredit},A.prototype.endFrame=function(){const e=this._currentFrameCredits.screenCredits.values;b(this._screenContainer,e,this._delimiter,void 0);const t=this._currentFrameCredits.lightboxCredits.values;this._expandLink.style.display=t.length>0?"inline":"none",b(this._creditList,t,void 0,"li"),function(e){const t=e._previousCesiumCredit,n=e._currentCesiumCredit;s.Z.equals(n,t)||((0,c.Z)(t)&&e._cesiumCreditContainer.removeChild(t.element),(0,c.Z)(n)&&e._cesiumCreditContainer.appendChild(n.element),e._previousCesiumCredit=n)}(this)},A.prototype.destroy=function(){return this._lightbox.removeEventListener("click",this._hideLightbox,!1),this.container.removeChild(this._cesiumCreditContainer),this.container.removeChild(this._screenContainer),this.container.removeChild(this._expandLink),this.viewport.removeChild(this._lightbox),(0,u.Z)(this)},A.prototype.isDestroyed=function(){return!1},A._cesiumCredit=void 0,A._cesiumCreditInitialized=!1,Object.defineProperties(A,{cesiumCredit:{get:function(){return E(),A._cesiumCredit},set:function(e){A._cesiumCredit=e,A._cesiumCreditInitialized=!0}}}),A.CreditDisplayElement=m;const S=A},868817:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var i=n(660904),o=n(35961),r=n(376213),s=n(234146),a=n(11020),c=n(722313),l=n(765153),u=n(499746),d=n(918094),h=n(156905),f=n(664288),p=n(223689),m=n(299594),_=n(134282),g=n(296184),Z=n(360846),y=n(104763),b=n(759398);function v(e){if(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),!(0,a.Z)(e.camera))throw new l.Z("options.camera is required.");this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=(0,s.Z)(e.color,o.Z.CYAN),this._updateOnChange=(0,s.Z)(e.updateOnChange,!0),this.show=(0,s.Z)(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}const A=new i.Z,T=new f.Z,w=new Z.Z,E=new _.Z,S=new g.Z,C=new p.Z,x=new m.Z,I=new o.Z,P=[1,1e5];v.prototype.update=function(e){if(!this.show)return;const t=this._planesPrimitives,n=this._outlinePrimitives;let s,c;if(this._updateOnChange){for(c=t.length,s=0;s<c;++s)n[s]=n[s]&&n[s].destroy(),t[s]=t[s]&&t[s].destroy();t.length=0,n.length=0}if(0===t.length){const e=this._camera,c=e.frustum;let l,m;l=c instanceof _.Z?E:c instanceof g.Z?S:c instanceof p.Z?C:x,l=c.clone(l);let v=this._frustumSplits;!(0,a.Z)(v)||v.length<=1?(v=P,v[0]=this._camera.frustum.near,v[1]=this._camera.frustum.far,m=1):m=v.length-1;const D=e.positionWC,O=e.directionWC,L=e.upWC;let N=e.rightWC;N=i.Z.negate(N,A);const M=T;f.Z.setColumn(M,0,N,M),f.Z.setColumn(M,1,L,M),f.Z.setColumn(M,2,O,M);const R=Z.Z.fromRotationMatrix(M,w);for(t.length=n.length=m,s=0;s<m;++s)l.near=v[s],l.far=v[s+1],t[s]=new b.Z({geometryInstances:new h.Z({geometry:new u.Z({origin:D,orientation:R,frustum:l,_drawNearPlane:0===s}),attributes:{color:r.Z.fromColor(o.Z.fromAlpha(this._color,.1,I))},id:this.id,pickPrimitive:this}),appearance:new y.Z({translucent:!0,flat:!0}),asynchronous:!1}),n[s]=new b.Z({geometryInstances:new h.Z({geometry:new d.Z({origin:D,orientation:R,frustum:l,_drawNearPlane:0===s}),attributes:{color:r.Z.fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new y.Z({translucent:!1,flat:!0}),asynchronous:!1})}for(c=t.length,s=0;s<c;++s)n[s].update(e),t[s].update(e)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){const e=this._planesPrimitives.length;for(let t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return(0,c.Z)(this)};const D=v},211547:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(35961),o=n(661679),r=n(437530),s=n(161632),a=n(11020);function c(){this._cachedShowFrustumsShaders={}}const l=new i.Z,u=new o.Z;c.prototype.executeDebugShowFrustumsCommand=function(e,t,n){const c=t.shaderProgram.id;let d=this._cachedShowFrustumsShaders[c];(0,a.Z)(d)||(d=function(e,t){const n=e.context,i=t,o=i.fragmentShaderSource.clone(),a=[];o.sources=o.sources.map((function(e){e=r.Z.replaceMain(e,"czm_Debug_main");const t=/out_FragData_(\d+)/g;let n;for(;null!==(n=t.exec(e));)-1===a.indexOf(n[1])&&a.push(n[1]);return e}));const c=a.length;let l,u="";if(u+="uniform vec3 debugShowCommandsColor;\n",u+="uniform vec3 debugShowFrustumsColor;\n",u+="void main() \n{ \n    czm_Debug_main(); \n",c>0)for(l=0;l<c;++l)u+=`    out_FragData_${a[l]}.rgb *= debugShowCommandsColor;\n`,u+=`    out_FragData_${a[l]}.rgb *= debugShowFrustumsColor;\n`;else u+="    out_FragColor.rgb *= debugShowCommandsColor;\n",u+="    out_FragColor.rgb *= debugShowFrustumsColor;\n";u+="}",o.sources.push(u);const d=function(e){const t={},n=e.vertexAttributes;for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e].index);return t}(i);return s.Z.fromCache({context:n,vertexShaderSource:i.vertexShaderSource,fragmentShaderSource:o,attributeLocations:d})}(e,t.shaderProgram),this._cachedShowFrustumsShaders[c]=d);const h=o.Z.shallowClone(t,u);h.shaderProgram=d,h.uniformMap=function(e,t){let n;return n=(0,a.Z)(t.uniformMap)?t.uniformMap:{},(0,a.Z)(n.debugShowCommandsColor)||(0,a.Z)(n.debugShowFrustumsColor)||(n.debugShowCommandsColor=function(){return e.debugShowCommands?((0,a.Z)(t._debugColor)||(t._debugColor=i.Z.fromRandom()),t._debugColor):i.Z.WHITE},n.debugShowFrustumsColor=function(){return e.debugShowFrustums?(l.red=1&t.debugOverlappingFrustums?1:0,l.green=2&t.debugOverlappingFrustums?1:0,l.blue=4&t.debugOverlappingFrustums?1:0,l.alpha=1,l):i.Z.WHITE}),n}(e,t),h.execute(e.context,n)};const d=c},460135:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var i=n(762031),o=n(660904),r=n(449809),s=n(11020),a=n(95296),c=n(87200),l=n(951775),u=n(223689),d=n(804868),h=n(915323),f=n(661679),p=n(431056),m=n(417148),_=n(161632),g=n(437530),Z=n(858371),y=n(652870),b=n(552516),v=n(714233),A=n(234146),T=n(63354);function w(e){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1,this._ellipsoidOffset=(0,A.Z)(e,0)}const E=a.Z.supportsTypedArrays()?new Float32Array(12):[],S=new o.Z,C=new o.Z,x=new o.Z,I=new o.Z,P=new o.Z;w.prototype.update=function(e){if(this._mode=e.mode,e.mode!==v.Z.SCENE3D)return;const t=e.context,n=e.mapProjection.ellipsoid.radii,a=new T.Z(n.x+this._ellipsoidOffset,n.y+this._ellipsoidOffset,n.z+this._ellipsoidOffset),A=e.useLogDepth;if((0,s.Z)(this._command)||(this._rs=m.Z.fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new f.Z({renderState:this._rs,boundingVolume:new i.Z(o.Z.ZERO,a.maximumRadius),pass:p.Z.OPAQUE,owner:this})),!(0,s.Z)(this._sp)||this._useLogDepth!==A){this._useLogDepth=A;const e=new g.Z({sources:[b.Z]}),n=new g.Z({sources:[y.Z]});A&&(n.defines.push("LOG_DEPTH"),e.defines.push("LOG_DEPTH")),this._sp=_.Z.replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:e,fragmentShaderSource:n,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}const w=function(e,t){const n=e.radii,i=t.camera;let r,s,a;if(i.frustum instanceof u.Z)r=o.Z.ZERO,s=i.rightWC,a=i.upWC;else{const t=i.positionWC,n=o.Z.multiplyComponents(e.oneOverRadii,t,S),c=o.Z.normalize(n,C),l=o.Z.normalize(o.Z.cross(o.Z.UNIT_Z,n,x),x),u=o.Z.normalize(o.Z.cross(c,l,I),I),d=o.Z.magnitude(n),h=Math.sqrt(d*d-1);r=o.Z.multiplyByScalar(c,1/d,S);const f=h/d;s=o.Z.multiplyByScalar(l,f,C),a=o.Z.multiplyByScalar(u,f,x)}const c=o.Z.add(r,a,P);o.Z.subtract(c,s,c),o.Z.multiplyComponents(n,c,c),o.Z.pack(c,E,0);const l=o.Z.subtract(r,a,P);o.Z.subtract(l,s,l),o.Z.multiplyComponents(n,l,l),o.Z.pack(l,E,3);const d=o.Z.add(r,a,P);o.Z.add(d,s,d),o.Z.multiplyComponents(n,d,d),o.Z.pack(d,E,6);const h=o.Z.subtract(r,a,P);return o.Z.add(h,s,h),o.Z.multiplyComponents(n,h,h),o.Z.pack(h,E,9),E}(a,e);if((0,s.Z)(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(w);else{const e=new c.Z({attributes:{position:new l.Z({componentDatatype:r.Z.FLOAT,componentsPerAttribute:3,values:w})},indices:[0,1,2,2,1,3],primitiveType:d.Z.TRIANGLES});this._va=Z.Z.fromGeometry({context:t,geometry:e,attributeLocations:{position:0},bufferUsage:h.Z.DYNAMIC_DRAW}),this._command.vertexArray=this._va}},w.prototype.execute=function(e,t){this._mode===v.Z.SCENE3D&&this._command.execute(e,t)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()};const D=w},40368:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(11020),o=n(661679),r=n(417148),s=n(437530);function a(){}const c=/\bgl_FragDepth\b/,l=/\bdiscard\b/;a.createDepthOnlyDerivedCommand=function(e,t,n,a){let u,d;return(0,i.Z)(a)||(a={}),(0,i.Z)(a.depthOnlyCommand)&&(u=a.depthOnlyCommand.shaderProgram,d=a.depthOnlyCommand.renderState),a.depthOnlyCommand=o.Z.shallowClone(t,a.depthOnlyCommand),(0,i.Z)(u)&&a.shaderProgramId===t.shaderProgram.id?(a.depthOnlyCommand.shaderProgram=u,a.depthOnlyCommand.renderState=d):(a.depthOnlyCommand.shaderProgram=function(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if(!(0,i.Z)(n)){const i=t._attributeLocations;let o,r=t.fragmentShaderSource,a=!1;const u=r.sources;let d=u.length;for(o=0;o<d;++o)if(c.test(u[o])||l.test(u[o])){a=!0;break}let h=!1;const f=r.defines;for(d=f.length,o=0;o<d;++o)if("LOG_DEPTH"===f[o]){h=!0;break}let p;a||h?!a&&h&&(p="void main() \n{ \n    out_FragColor = vec4(1.0); \n    czm_writeLogDepth(); \n} \n",r=new s.Z({defines:["LOG_DEPTH"],sources:[p]})):(p="void main() \n{ \n    out_FragColor = vec4(1.0); \n} \n",r=new s.Z({sources:[p]})),n=e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:r,attributeLocations:i})}return n}(n,t.shaderProgram),a.depthOnlyCommand.renderState=function(e,t){const n=e._depthOnlyRenderStateCache;let o=n[t.id];if(!(0,i.Z)(o)){const e=r.Z.getState(t);e.depthMask=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1},o=r.Z.fromCache(e),n[t.id]=o}return o}(e,t.renderState),a.shaderProgramId=t.shaderProgram.id),a};const u=/\s+czm_writeLogDepth\(/,d=/\s+czm_vertexLogDepth\(/;a.createLogDepthCommand=function(e,t,n){let r;return(0,i.Z)(n)||(n={}),(0,i.Z)(n.command)&&(r=n.command.shaderProgram),n.command=o.Z.shallowClone(e,n.command),(0,i.Z)(r)&&n.shaderProgramId===e.shaderProgram.id?n.command.shaderProgram=r:(n.command.shaderProgram=function(e,t){if(t.fragmentShaderSource.defines.indexOf("LOG_DEPTH_READ_ONLY")>=0)return t;let n=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if(!(0,i.Z)(n)){const o=t._attributeLocations,r=t.vertexShaderSource.clone(),a=t.fragmentShaderSource.clone();let c,l;r.defines=(0,i.Z)(r.defines)?r.defines.slice(0):[],r.defines.push("LOG_DEPTH"),a.defines=(0,i.Z)(a.defines)?a.defines.slice(0):[],a.defines.push("LOG_DEPTH");let h=!1,f=r.sources,p=f.length;for(c=0;c<p;++c)if(d.test(f[c])){h=!0;break}if(!h){for(c=0;c<p;++c)f[c]=s.Z.replaceMain(f[c],"czm_log_depth_main");l="\n\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_vertexLogDepth(); \n} \n",f.push(l)}for(f=a.sources,p=f.length,h=!1,c=0;c<p;++c)u.test(f[c])&&(h=!0);-1!==a.defines.indexOf("LOG_DEPTH_WRITE")&&(h=!0);let m="";if(!h){for(c=0;c<p;c++)f[c]=s.Z.replaceMain(f[c],"czm_log_depth_main");m+="\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_writeLogDepth(); \n} \n"}f.push(m),n=e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:o})}return n}(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id),n},a.createPickDerivedCommand=function(e,t,n,a){let c,l;return(0,i.Z)(a)||(a={}),(0,i.Z)(a.pickCommand)&&(c=a.pickCommand.shaderProgram,l=a.pickCommand.renderState),a.pickCommand=o.Z.shallowClone(t,a.pickCommand),(0,i.Z)(c)&&a.shaderProgramId===t.shaderProgram.id?(a.pickCommand.shaderProgram=c,a.pickCommand.renderState=l):(a.pickCommand.shaderProgram=function(e,t,n){let o=e.shaderCache.getDerivedShaderProgram(t,"pick");if(!(0,i.Z)(o)){const i=t._attributeLocations;let r=t.fragmentShaderSource;const a=r.sources,c=a.length,l=`void main() \n{ \n    czm_non_pick_main(); \n    if (out_FragColor.a == 0.0) { \n        discard; \n    } \n    out_FragColor = ${n}; \n} \n`,u=new Array(c+1);for(let e=0;e<c;++e)u[e]=s.Z.replaceMain(a[e],"czm_non_pick_main");u[c]=l,r=new s.Z({sources:u,defines:r.defines}),o=e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:r,attributeLocations:i})}return o}(n,t.shaderProgram,t.pickId),a.pickCommand.renderState=function(e,t){const n=e.picking.pickRenderStateCache;let o=n[t.id];if(!(0,i.Z)(o)){const e=r.Z.getState(t);e.blending.enabled=!1,e.depthMask=!0,o=r.Z.fromCache(e),n[t.id]=o}return o}(e,t.renderState),a.shaderProgramId=t.shaderProgram.id),a},a.createHdrCommand=function(e,t,n){let r;return(0,i.Z)(n)||(n={}),(0,i.Z)(n.command)&&(r=n.command.shaderProgram),n.command=o.Z.shallowClone(e,n.command),(0,i.Z)(r)&&n.shaderProgramId===e.shaderProgram.id?n.command.shaderProgram=r:(n.command.shaderProgram=function(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"HDR");if(!(0,i.Z)(n)){const o=t._attributeLocations,r=t.vertexShaderSource.clone(),s=t.fragmentShaderSource.clone();r.defines=(0,i.Z)(r.defines)?r.defines.slice(0):[],r.defines.push("HDR"),s.defines=(0,i.Z)(s.defines)?s.defines.slice(0):[],s.defines.push("HDR"),n=e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:o})}return n}(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id),n};const h=a},92962:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(11020),o=n(722313),r=n(765153),s=n(344485),a=n(664288),c=n(360846);function l(e){if(!(0,i.Z)(e))throw new r.Z("scene is required.");this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;const t=this;function n(e){const n=e.alpha;if(!(0,i.Z)(n))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=s.Z.toRadians(n),t._beta=s.Z.toRadians(e.beta),t._gamma=s.Z.toRadians(e.gamma)}window.addEventListener("deviceorientation",n,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",n,!1)}}const u=new c.Z,d=new c.Z,h=new a.Z;l.prototype.update=function(){if(!(0,i.Z)(this._alpha))return;(0,i.Z)(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);const e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,n=this._lastGamma-this._gamma;!function(e,t,n,i){const o=e.direction,r=e.right,s=e.up,l=c.Z.fromAxisAngle(o,n,d),f=c.Z.fromAxisAngle(r,i,u),p=c.Z.multiply(f,l,f),m=c.Z.fromAxisAngle(s,t,d);c.Z.multiply(m,p,p);const _=a.Z.fromQuaternion(p,h);a.Z.multiplyByVector(_,r,r),a.Z.multiplyByVector(_,s,s),a.Z.multiplyByVector(_,o,o)}(this._scene.camera,-e,t,n),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._removeListener(),(0,o.Z)(this)};const f=l},48449:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(11020);function o(e){}let r;o.prototype.isReady=function(){return!0},o.prototype.shouldDiscardImage=function(e){return o.EMPTY_IMAGE===e},Object.defineProperties(o,{EMPTY_IMAGE:{get:function(){return(0,i.Z)(r)||(r=new Image,r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),r}}});const s=o},516925:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(234146),o=n(11020),r=n(765153),s=n(483851),a=n(205522);function c(e){if(e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),!(0,o.Z)(e.missingImageUrl))throw new r.Z("options.missingImageUrl is required.");if(!(0,o.Z)(e.pixelsToCheck))throw new r.Z("options.pixelsToCheck is required.");this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;const t=a.Z.createIfNeeded(e.missingImageUrl),n=this;t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then((function(t){(0,o.Z)(t.blob)&&(n._missingImageByteLength=t.blob.size);let i=(0,s.Z)(t);if(e.disableCheckIfAllPixelsAreTransparent){let n=!0;const o=t.width,r=e.pixelsToCheck;for(let e=0,t=r.length;n&&e<t;++e){const t=r[e];i[4*t.x+t.y*o+3]>0&&(n=!1)}n&&(i=void 0)}n._missingImagePixels=i,n._isReady=!0})).catch((function(){n._missingImagePixels=void 0,n._isReady=!0}))}c.prototype.isReady=function(){return this._isReady},c.prototype.shouldDiscardImage=function(e){if(!this._isReady)throw new r.Z("shouldDiscardImage must not be called before the discard policy is ready.");const t=this._pixelsToCheck,n=this._missingImagePixels;if(!(0,o.Z)(n))return!1;if((0,o.Z)(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;const i=(0,s.Z)(e),a=e.width;for(let e=0,o=t.length;e<o;++e){const o=t[e],r=4*o.x+o.y*a;for(let e=0;e<4;++e){const t=r+e;if(i[t]!==n[t])return!1}}return!0};const l=c},982960:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11020),o=n(95296),r=n(511267);function s(){}s._maxDecodingConcurrency=Math.max(o.Z.hardwareConcurrency-1,1),s._decoderTaskProcessor=void 0,s._taskProcessorReady=!1,s._getDecoderTaskProcessor=function(){if(!(0,i.Z)(s._decoderTaskProcessor)){const e=new r.Z("decodeDraco",s._maxDecodingConcurrency);e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_decoder_nodejs.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then((function(){s._taskProcessorReady=!0})),s._decoderTaskProcessor=e}return s._decoderTaskProcessor},s.decodePointCloud=function(e){const t=s._getDecoderTaskProcessor();if(s._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},s.decodeBufferView=function(e){const t=s._getDecoderTaskProcessor();if(s._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])};const a=s},905278:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(762031),o=n(418547),r=n(660904),s=n(394579),a=n(234146),c=n(11020),l=n(722313),u=n(765153),d=n(659635),h=n(427183),f=n(915323),p=n(661679),m=n(431056),_=n(417148),g=n(161632),Z=n(437530),y=n(858371),b=n(771970),v=n(571690),A=n(973591),T=n(53839),w=n(420171),E=n(714233);const S={position:0};function C(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),this.center=r.Z.clone((0,a.Z)(e.center,r.Z.ZERO)),this._center=new r.Z,this.radii=r.Z.clone(e.radii),this._radii=new r.Z,this._oneOverEllipsoidRadiiSquared=new r.Z,this._boundingSphere=new i.Z,this.modelMatrix=d.Z.clone((0,a.Z)(e.modelMatrix,d.Z.IDENTITY)),this._modelMatrix=new d.Z,this._computedModelMatrix=new d.Z,this.show=(0,a.Z)(e.show,!0),this.material=(0,a.Z)(e.material,w.Z.fromType(w.Z.ColorType)),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=(0,a.Z)(e.debugShowBoundingVolume,!1),this.onlySunLighting=(0,a.Z)(e.onlySunLighting,!1),this._onlySunLighting=!1,this._depthTestEnabled=(0,a.Z)(e.depthTestEnabled,!0),this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new p.Z({owner:(0,a.Z)(e._owner,this)}),this._pickCommand=new p.Z({owner:(0,a.Z)(e._owner,this),pickOnly:!0});const t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}C.prototype.update=function(e){if(!this.show||e.mode!==E.Z.SCENE3D||!(0,c.Z)(this.center)||!(0,c.Z)(this.radii))return;if(!(0,c.Z)(this.material))throw new u.Z("this.material must be defined.");const t=e.context,n=this.material.isTranslucent(),a=this._translucent!==n;(0,c.Z)(this._rs)&&!a||(this._translucent=n,this._rs=_.Z.fromCache({cull:{enabled:!0,face:T.Z.FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!n&&t.fragmentDepth,blending:n?A.Z.ALPHA_BLEND:void 0})),(0,c.Z)(this._va)||(this._va=function(e){let t=e.cache.ellipsoidPrimitive_vertexArray;if((0,c.Z)(t))return t;const n=o.Z.createGeometry(o.Z.fromDimensions({dimensions:new r.Z(2,2,2),vertexFormat:h.Z.POSITION_ONLY}));return t=y.Z.fromGeometry({context:e,geometry:n,attributeLocations:S,bufferUsage:f.Z.STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}(t));let l=!1;const p=this.radii;if(!r.Z.equals(this._radii,p)){r.Z.clone(p,this._radii);const e=this._oneOverEllipsoidRadiiSquared;e.x=1/(p.x*p.x),e.y=1/(p.y*p.y),e.z=1/(p.z*p.z),l=!0}d.Z.equals(this.modelMatrix,this._modelMatrix)&&r.Z.equals(this.center,this._center)||(d.Z.clone(this.modelMatrix,this._modelMatrix),r.Z.clone(this.center,this._center),d.Z.multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),l=!0),l&&(r.Z.clone(r.Z.ZERO,this._boundingSphere.center),this._boundingSphere.radius=r.Z.maximumComponent(p),i.Z.transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));const w=this._material!==this.material;this._material=this.material,this._material.update(t);const C=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;const x=e.useLogDepth,I=this._useLogDepth!==x;this._useLogDepth=x;const P=this._colorCommand;let D,O;(w||C||a||I)&&(D=new Z.Z({sources:[v.Z]}),O=new Z.Z({sources:[this.material.shaderSource,b.Z]}),this.onlySunLighting&&O.defines.push("ONLY_SUN_LIGHTING"),!n&&t.fragmentDepth&&O.defines.push("WRITE_DEPTH"),this._useLogDepth&&(D.defines.push("LOG_DEPTH"),O.defines.push("LOG_DEPTH")),this._sp=g.Z.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:D,fragmentShaderSource:O,attributeLocations:S}),P.vertexArray=this._va,P.renderState=this._rs,P.shaderProgram=this._sp,P.uniformMap=(0,s.Z)(this._uniforms,this.material._uniforms),P.executeInClosestFrustum=n);const L=e.commandList,N=e.passes;if(N.render&&(P.boundingVolume=this._boundingSphere,P.debugShowBoundingVolume=this.debugShowBoundingVolume,P.modelMatrix=this._computedModelMatrix,P.pass=n?m.Z.TRANSLUCENT:m.Z.OPAQUE,L.push(P)),N.pick){const e=this._pickCommand;(0,c.Z)(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(w||C||!(0,c.Z)(this._pickSP)||I)&&(D=new Z.Z({sources:[v.Z]}),O=new Z.Z({sources:[this.material.shaderSource,b.Z],pickColorQualifier:"uniform"}),this.onlySunLighting&&O.defines.push("ONLY_SUN_LIGHTING"),!n&&t.fragmentDepth&&O.defines.push("WRITE_DEPTH"),this._useLogDepth&&(D.defines.push("LOG_DEPTH"),O.defines.push("LOG_DEPTH")),this._pickSP=g.Z.replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:D,fragmentShaderSource:O,attributeLocations:S}),e.vertexArray=this._va,e.renderState=this._rs,e.shaderProgram=this._pickSP,e.uniformMap=(0,s.Z)((0,s.Z)(this._uniforms,this._pickUniforms),this.material._uniforms),e.executeInClosestFrustum=n),e.boundingVolume=this._boundingSphere,e.modelMatrix=this._computedModelMatrix,e.pass=n?m.Z.TRANSLUCENT:m.Z.OPAQUE,L.push(e)}},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),(0,l.Z)(this)};const x=C},342569:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(906439),o=n(722313),r=n(765153);function s(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(s.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return!0}},readyPromise:{get:function(){return(0,i.Z)("Empty3DTileContent.readyPromise","Empty3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Empty3DTileContent.ready to return true instead."),Promise.resolve(this)}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){throw new r.Z("Empty3DTileContent cannot have content metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){throw new r.Z("Empty3DTileContent cannot have group metadata")}}}),s.prototype.hasProperty=function(e,t){return!1},s.prototype.getFeature=function(e){},s.prototype.applyDebugSettings=function(e,t){},s.prototype.applyStyle=function(e){},s.prototype.update=function(e,t){},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){return(0,o.Z)(this)};const a=s},237646:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var i=n(405254),o=n(660904),r=n(798336),s=n(790087),a=n(35961),c=n(11020),l=n(765153),u=n(344485),d=n(217066);class h{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+h.version}static addUnaryOp(e){return h.max_unop_len=Math.max(e.length,h.max_unop_len),h.unary_ops[e]=1,h}static addBinaryOp(e,t,n){return h.max_binop_len=Math.max(e.length,h.max_binop_len),h.binary_ops[e]=t,n?h.right_associative.add(e):h.right_associative.delete(e),h}static addIdentifierChar(e){return h.additional_identifier_chars.add(e),h}static addLiteral(e,t){return h.literals[e]=t,h}static removeUnaryOp(e){return delete h.unary_ops[e],e.length===h.max_unop_len&&(h.max_unop_len=h.getMaxKeyLen(h.unary_ops)),h}static removeAllUnaryOps(){return h.unary_ops={},h.max_unop_len=0,h}static removeIdentifierChar(e){return h.additional_identifier_chars.delete(e),h}static removeBinaryOp(e){return delete h.binary_ops[e],e.length===h.max_binop_len&&(h.max_binop_len=h.getMaxKeyLen(h.binary_ops)),h.right_associative.delete(e),h}static removeAllBinaryOps(){return h.binary_ops={},h.max_binop_len=0,h}static removeLiteral(e){return delete h.literals[e],h}static removeAllLiterals(){return h.literals={},h}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new h(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map((e=>e.length)))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return h.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!h.binary_ops[String.fromCharCode(e)]||h.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return h.isIdentifierStart(e)||h.isDecimalDigit(e)}throwError(e){const t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(h.hooks[e]){const n={context:this,node:t};return h.hooks.run(e,n),n.node}return t}searchHook(e){if(h.hooks[e]){const t={context:this};return h.hooks[e].find((function(e){return e.call(t.context,t),t.node})),t.node}}gobbleSpaces(){let e=this.code;for(;e===h.SPACE_CODE||e===h.TAB_CODE||e===h.LF_CODE||e===h.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),t=1===e.length?e[0]:{type:h.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t,n,i=[];for(;this.index<this.expr.length;)if(t=this.code,t===h.SEMCOL_CODE||t===h.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())i.push(n);else if(this.index<this.expr.length){if(t===e)break;this.throwError('Unexpected "'+this.char+'"')}return i}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,h.max_binop_len),t=e.length;for(;t>0;){if(h.binary_ops.hasOwnProperty(e)&&(!h.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!h.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,n,i,o,r,s,a,c;if(r=this.gobbleToken(),!r)return r;if(t=this.gobbleBinaryOp(),!t)return r;for(o={value:t,prec:h.binaryPrecedence(t),right_a:h.right_associative.has(t)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+t),i=[r,o,s];t=this.gobbleBinaryOp();){if(n=h.binaryPrecedence(t),0===n){this.index-=t.length;break}o={value:t,prec:n,right_a:h.right_associative.has(t)},c=t;const a=e=>o.right_a&&e.right_a?n>e.prec:n<=e.prec;for(;i.length>2&&a(i[i.length-2]);)s=i.pop(),t=i.pop().value,r=i.pop(),e={type:h.BINARY_EXP,operator:t,left:r,right:s},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+c),i.push(o,e)}for(a=i.length-1,e=i[a];a>1;)e={type:h.BINARY_EXP,operator:i[a-1].value,left:i[a-2],right:e},a-=2;return e}gobbleToken(){let e,t,n,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,h.isDecimalDigit(e)||e===h.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===h.SQUOTE_CODE||e===h.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===h.OBRACK_CODE)i=this.gobbleArray();else{for(t=this.expr.substr(this.index,h.max_unop_len),n=t.length;n>0;){if(h.unary_ops.hasOwnProperty(t)&&(!h.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!h.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=n;const e=this.gobbleToken();return e||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:h.UNARY_EXP,operator:t,argument:e,prefix:!0})}t=t.substr(0,--n)}h.isIdentifierStart(e)?(i=this.gobbleIdentifier(),h.literals.hasOwnProperty(i.name)?i={type:h.LITERAL,value:h.literals[i.name],raw:i.name}:i.name===h.this_str&&(i={type:h.THIS_EXP})):e===h.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===h.PERIOD_CODE||t===h.OBRACK_CODE||t===h.OPAREN_CODE||t===h.QUMARK_CODE;){let n;if(t===h.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==h.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===h.OBRACK_CODE?(e={type:h.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==h.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===h.OPAREN_CODE?e={type:h.CALL_EXP,arguments:this.gobbleArguments(h.CPAREN_CODE),callee:e}:(t===h.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),e={type:h.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),n&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e,t,n="";for(;h.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(this.code===h.PERIOD_CODE)for(n+=this.expr.charAt(this.index++);h.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(e=this.char,"e"===e||"E"===e){for(n+=this.expr.charAt(this.index++),e=this.char,"+"!==e&&"-"!==e||(n+=this.expr.charAt(this.index++));h.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);h.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+n+this.char+")")}return t=this.code,h.isIdentifierStart(t)?this.throwError("Variable names cannot start with a number ("+n+this.char+")"):(t===h.PERIOD_CODE||1===n.length&&n.charCodeAt(0)===h.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:h.LITERAL,value:parseFloat(n),raw:n}}gobbleStringLiteral(){let e="";const t=this.index,n=this.expr.charAt(this.index++);let i=!1;for(;this.index<this.expr.length;){let t=this.expr.charAt(this.index++);if(t===n){i=!0;break}if("\\"===t)switch(t=this.expr.charAt(this.index++),t){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:h.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(h.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,h.isIdentifierPart(e));)this.index++;return{type:h.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){const t=[];let n=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let o=this.code;if(o===e){n=!0,this.index++,e===h.CPAREN_CODE&&i&&i>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(o===h.COMMA_CODE){if(this.index++,i++,i!==t.length)if(e===h.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===h.CBRACK_CODE)for(let e=t.length;e<i;e++)t.push(null)}else if(t.length!==i&&0!==i)this.throwError("Expected comma");else{const e=this.gobbleExpression();e&&e.type!==h.COMPOUND||this.throwError("Expected comma"),t.push(e)}}return n||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(h.CPAREN_CODE);if(this.code===h.CPAREN_CODE)return this.index++,1===e.length?e[0]:!!e.length&&{type:h.SEQUENCE_EXP,expressions:e};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:h.ARRAY_EXP,elements:this.gobbleArguments(h.CBRACK_CODE)}}}const f=new class{add(e,t,n){if("string"!=typeof arguments[0])for(let e in arguments[0])this.add(e,arguments[0][e],arguments[1]);else(Array.isArray(e)?e:[e]).forEach((function(e){this[e]=this[e]||[],t&&this[e][n?"unshift":"push"](t)}),this)}run(e,t){this[e]=this[e]||[],this[e].forEach((function(e){e.call(t&&t.context?t.context:t,t)}))}};Object.assign(h,{hooks:f,plugins:new class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach((e=>{if("object"!=typeof e||!e.name||!e.init)throw new Error("Invalid JSEP plugin format");this.registered[e.name]||(e.init(this.jsep),this.registered[e.name]=e)}))}}(h),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),h.max_unop_len=h.getMaxKeyLen(h.unary_ops),h.max_binop_len=h.getMaxKeyLen(h.binary_ops);const p=e=>new h(e).parse();Object.getOwnPropertyNames(h).forEach((e=>{void 0===p[e]&&"prototype"!==e&&(p[e]=h[e])})),p.Jsep=h;var m={name:"ternary",init(e){e.hooks.add("after-expression",(function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;const n=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;const o=this.gobbleExpression();if(o||this.throwError("Expected expression"),t.node={type:"ConditionalExpression",test:n,consequent:i,alternate:o},n.operator&&e.binary_ops[n.operator]<=.9){let i=n;for(;i.right.operator&&e.binary_ops[i.right.operator]<=.9;)i=i.right;t.node.test=i.right,i.right=t.node,t.node=n}}else this.throwError("Expected :")}}))}};p.plugins.register(m);var _=n(313167);function g(e,t){let n;s.Z.typeOf.string("expression",e),this._expression=e,e=function(e,t){if(!(0,c.Z)(t))return e;for(const n in t)if(t.hasOwnProperty(n)){const i=new RegExp(`\\$\\{${n}\\}`,"g"),o=`(${t[n]})`;(0,c.Z)(o)&&(e=e.replace(i,o))}return e}(e,t),e=function(e){let t=e,n="",i=t.indexOf("${");for(;i>=0;){const e=t.indexOf("'"),o=t.indexOf('"');let r;if(e>=0&&e<i)r=t.indexOf("'",e+1),n+=t.substr(0,r+1),t=t.substr(r+1),i=t.indexOf("${");else if(o>=0&&o<i)r=t.indexOf('"',o+1),n+=t.substr(0,r+1),t=t.substr(r+1),i=t.indexOf("${");else{n+=t.substr(0,i);const e=t.indexOf("}");if(e<0)throw new d.Z("Unmatched {.");n+=`czm_${t.substr(i+2,e-(i+2))}`,t=t.substr(e+1),i=t.indexOf("${")}}return n+=t,n}(function(e){return e.replace(A,T)}(e)),p.addBinaryOp("=~",0),p.addBinaryOp("!~",0);try{n=p(e)}catch(e){throw new d.Z(e)}this._runtimeAst=M(this,n)}Object.defineProperties(g.prototype,{expression:{get:function(){return this._expression}}});const Z={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new i.Z],cartesian3Array:[new o.Z],cartesian4Array:[new r.Z],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);const e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new i.Z),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new o.Z),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new r.Z),this.cartesian4Array[this.cartesian4Index++]}};g.prototype.evaluate=function(e,t){Z.reset();const n=this._runtimeAst.evaluate(e);return t instanceof a.Z&&n instanceof r.Z?a.Z.fromCartesian4(n,t):n instanceof i.Z||n instanceof o.Z||n instanceof r.Z?n.clone(t):n},g.prototype.evaluateColor=function(e,t){Z.reset();const n=this._runtimeAst.evaluate(e);return a.Z.fromCartesian4(n,t)},g.prototype.getShaderFunction=function(e,t,n,i){let o=this.getShaderExpression(t,n);return o=`${i} ${e}\n{\n    return ${o};\n}\n`,o},g.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)},g.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter((function(e,t,n){return n.indexOf(e)===t})),e};const y=["!","-","+"],b=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],v=/\${(.*?)}/g,A=/\\/g,T="@#%",w=/@#%/g,E=new a.Z,S={abs:I(Math.abs),sqrt:I(Math.sqrt),cos:I(Math.cos),sin:I(Math.sin),tan:I(Math.tan),acos:I(Math.acos),asin:I(Math.asin),atan:I(Math.atan),radians:I(u.Z.toRadians),degrees:I(u.Z.toDegrees),sign:I(u.Z.sign),floor:I(Math.floor),ceil:I(Math.ceil),round:I(Math.round),exp:I(Math.exp),exp2:I((function(e){return Math.pow(2,e)})),log:I(Math.log),log2:I((function(e){return u.Z.log2(e)})),fract:I((function(e){return e-Math.floor(e)})),length:function(e,t){if("number"==typeof t)return Math.abs(t);if(t instanceof i.Z)return i.Z.magnitude(t);if(t instanceof o.Z)return o.Z.magnitude(t);if(t instanceof r.Z)return r.Z.magnitude(t);throw new d.Z(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)},normalize:function(e,t){if("number"==typeof t)return 1;if(t instanceof i.Z)return i.Z.normalize(t,Z.getCartesian2());if(t instanceof o.Z)return o.Z.normalize(t,Z.getCartesian3());if(t instanceof r.Z)return r.Z.normalize(t,Z.getCartesian4());throw new d.Z(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}},C={atan2:P(Math.atan2,!1),pow:P(Math.pow,!1),min:P(Math.min,!0),max:P(Math.max,!0),distance:function(e,t,n){if("number"==typeof t&&"number"==typeof n)return Math.abs(t-n);if(t instanceof i.Z&&n instanceof i.Z)return i.Z.distance(t,n);if(t instanceof o.Z&&n instanceof o.Z)return o.Z.distance(t,n);if(t instanceof r.Z&&n instanceof r.Z)return r.Z.distance(t,n);throw new d.Z(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},dot:function(e,t,n){if("number"==typeof t&&"number"==typeof n)return t*n;if(t instanceof i.Z&&n instanceof i.Z)return i.Z.dot(t,n);if(t instanceof o.Z&&n instanceof o.Z)return o.Z.dot(t,n);if(t instanceof r.Z&&n instanceof r.Z)return r.Z.dot(t,n);throw new d.Z(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},cross:function(e,t,n){if(t instanceof o.Z&&n instanceof o.Z)return o.Z.cross(t,n,Z.getCartesian3());throw new d.Z(`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${n}.`)}},x={clamp:D(u.Z.clamp,!0),mix:D(u.Z.lerp,!0)};function I(e){return function(t,n){if("number"==typeof n)return e(n);if(n instanceof i.Z)return i.Z.fromElements(e(n.x),e(n.y),Z.getCartesian2());if(n instanceof o.Z)return o.Z.fromElements(e(n.x),e(n.y),e(n.z),Z.getCartesian3());if(n instanceof r.Z)return r.Z.fromElements(e(n.x),e(n.y),e(n.z),e(n.w),Z.getCartesian4());throw new d.Z(`Function "${t}" requires a vector or number argument. Argument is ${n}.`)}}function P(e,t){return function(n,s,a){if(t&&"number"==typeof a){if("number"==typeof s)return e(s,a);if(s instanceof i.Z)return i.Z.fromElements(e(s.x,a),e(s.y,a),Z.getCartesian2());if(s instanceof o.Z)return o.Z.fromElements(e(s.x,a),e(s.y,a),e(s.z,a),Z.getCartesian3());if(s instanceof r.Z)return r.Z.fromElements(e(s.x,a),e(s.y,a),e(s.z,a),e(s.w,a),Z.getCartesian4())}if("number"==typeof s&&"number"==typeof a)return e(s,a);if(s instanceof i.Z&&a instanceof i.Z)return i.Z.fromElements(e(s.x,a.x),e(s.y,a.y),Z.getCartesian2());if(s instanceof o.Z&&a instanceof o.Z)return o.Z.fromElements(e(s.x,a.x),e(s.y,a.y),e(s.z,a.z),Z.getCartesian3());if(s instanceof r.Z&&a instanceof r.Z)return r.Z.fromElements(e(s.x,a.x),e(s.y,a.y),e(s.z,a.z),e(s.w,a.w),Z.getCartesian4());throw new d.Z(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${s} and ${a}.`)}}function D(e,t){return function(n,s,a,c){if(t&&"number"==typeof c){if("number"==typeof s&&"number"==typeof a)return e(s,a,c);if(s instanceof i.Z&&a instanceof i.Z)return i.Z.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),Z.getCartesian2());if(s instanceof o.Z&&a instanceof o.Z)return o.Z.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),e(s.z,a.z,c),Z.getCartesian3());if(s instanceof r.Z&&a instanceof r.Z)return r.Z.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),e(s.z,a.z,c),e(s.w,a.w,c),Z.getCartesian4())}if("number"==typeof s&&"number"==typeof a&&"number"==typeof c)return e(s,a,c);if(s instanceof i.Z&&a instanceof i.Z&&c instanceof i.Z)return i.Z.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),Z.getCartesian2());if(s instanceof o.Z&&a instanceof o.Z&&c instanceof o.Z)return o.Z.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),e(s.z,a.z,c.z),Z.getCartesian3());if(s instanceof r.Z&&a instanceof r.Z&&c instanceof r.Z)return r.Z.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),e(s.z,a.z,c.z),e(s.w,a.w,c.w),Z.getCartesian4());throw new d.Z(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${s}, ${a}, and ${c}.`)}}function O(e,t,n,i,o){var r;this._type=e,this._value=t,this._left=n,this._right=i,this._test=o,this.evaluate=void 0,(r=this)._type===_.Z.CONDITIONAL?r.evaluate=r._evaluateConditional:r._type===_.Z.FUNCTION_CALL?"test"===r._value?r.evaluate=r._evaluateRegExpTest:"exec"===r._value?r.evaluate=r._evaluateRegExpExec:"toString"===r._value&&(r.evaluate=r._evaluateToString):r._type===_.Z.UNARY?"!"===r._value?r.evaluate=r._evaluateNot:"-"===r._value?r.evaluate=r._evaluateNegative:"+"===r._value?r.evaluate=r._evaluatePositive:"isNaN"===r._value?r.evaluate=r._evaluateNaN:"isFinite"===r._value?r.evaluate=r._evaluateIsFinite:"isExactClass"===r._value?r.evaluate=r._evaluateIsExactClass:"isClass"===r._value?r.evaluate=r._evaluateIsClass:"getExactClassName"===r._value?r.evaluate=r._evaluateGetExactClassName:"Boolean"===r._value?r.evaluate=r._evaluateBooleanConversion:"Number"===r._value?r.evaluate=r._evaluateNumberConversion:"String"===r._value?r.evaluate=r._evaluateStringConversion:(0,c.Z)(S[r._value])&&(r.evaluate=function(e){const t=S[e];return function(n){const i=this._left.evaluate(n);return t(e,i)}}(r._value)):r._type===_.Z.BINARY?"+"===r._value?r.evaluate=r._evaluatePlus:"-"===r._value?r.evaluate=r._evaluateMinus:"*"===r._value?r.evaluate=r._evaluateTimes:"/"===r._value?r.evaluate=r._evaluateDivide:"%"===r._value?r.evaluate=r._evaluateMod:"==="===r._value?r.evaluate=r._evaluateEqualsStrict:"!=="===r._value?r.evaluate=r._evaluateNotEqualsStrict:"<"===r._value?r.evaluate=r._evaluateLessThan:"<="===r._value?r.evaluate=r._evaluateLessThanOrEquals:">"===r._value?r.evaluate=r._evaluateGreaterThan:">="===r._value?r.evaluate=r._evaluateGreaterThanOrEquals:"&&"===r._value?r.evaluate=r._evaluateAnd:"||"===r._value?r.evaluate=r._evaluateOr:"=~"===r._value?r.evaluate=r._evaluateRegExpMatch:"!~"===r._value?r.evaluate=r._evaluateRegExpNotMatch:(0,c.Z)(C[r._value])&&(r.evaluate=function(e){const t=C[e];return function(n){const i=this._left.evaluate(n),o=this._right.evaluate(n);return t(e,i,o)}}(r._value)):r._type===_.Z.TERNARY?r.evaluate=function(e){const t=x[e];return function(n){const i=this._left.evaluate(n),o=this._right.evaluate(n),r=this._test.evaluate(n);return t(e,i,o,r)}}(r._value):r._type===_.Z.MEMBER?"brackets"===r._value?r.evaluate=r._evaluateMemberBrackets:r.evaluate=r._evaluateMemberDot:r._type===_.Z.ARRAY?r.evaluate=r._evaluateArray:r._type===_.Z.VARIABLE?r.evaluate=r._evaluateVariable:r._type===_.Z.VARIABLE_IN_STRING?r.evaluate=r._evaluateVariableString:r._type===_.Z.LITERAL_COLOR?r.evaluate=r._evaluateLiteralColor:r._type===_.Z.LITERAL_VECTOR?r.evaluate=r._evaluateLiteralVector:r._type===_.Z.LITERAL_STRING?r.evaluate=r._evaluateLiteralString:r._type===_.Z.REGEX?r.evaluate=r._evaluateRegExp:r._type===_.Z.BUILTIN_VARIABLE?"tiles3d_tileset_time"===r._value&&(r.evaluate=R):r.evaluate=r._evaluateLiteral}function L(e){return e.replace(w,"\\")}function N(e){return e._type>=_.Z.LITERAL_NULL}function M(e,t){let n,i,o,r;if("Literal"===t.type)n=function(e){const t=typeof e.value;return null===e.value?new O(_.Z.LITERAL_NULL,null):"boolean"===t?new O(_.Z.LITERAL_BOOLEAN,e.value):"number"===t?new O(_.Z.LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new O(_.Z.VARIABLE_IN_STRING,e.value):new O(_.Z.LITERAL_STRING,L(e.value)):void 0}(t);else if("CallExpression"===t.type)n=function(e,t){const n=t.arguments,i=n.length;let o,r,s,a;if("MemberExpression"===t.callee.type){o=t.callee.property.name;const l=t.callee.object;if("test"===o||"exec"===o){if(!(0,c.Z)(l.callee)||"regExp"!==l.callee.name)throw new d.Z(`${o} is not a function.`);return 0===i?"test"===o?new O(_.Z.LITERAL_BOOLEAN,!1):new O(_.Z.LITERAL_NULL,null):(s=M(e,l),a=M(e,n[0]),new O(_.Z.FUNCTION_CALL,o,s,a))}if("toString"===o)return r=M(e,l),new O(_.Z.FUNCTION_CALL,o,r);throw new d.Z(`Unexpected function call "${o}".`)}if(o=t.callee.name,"color"===o){if(0===i)return new O(_.Z.LITERAL_COLOR,o);if(r=M(e,n[0]),(0,c.Z)(n[1])){const t=M(e,n[1]);return new O(_.Z.LITERAL_COLOR,o,[r,t])}return new O(_.Z.LITERAL_COLOR,o,[r])}if("rgb"===o||"hsl"===o){if(i<3)throw new d.Z(`${o} requires three arguments.`);return r=[M(e,n[0]),M(e,n[1]),M(e,n[2])],new O(_.Z.LITERAL_COLOR,o,r)}if("rgba"===o||"hsla"===o){if(i<4)throw new d.Z(`${o} requires four arguments.`);return r=[M(e,n[0]),M(e,n[1]),M(e,n[2]),M(e,n[3])],new O(_.Z.LITERAL_COLOR,o,r)}if("vec2"===o||"vec3"===o||"vec4"===o){r=new Array(i);for(let t=0;t<i;++t)r[t]=M(e,n[t]);return new O(_.Z.LITERAL_VECTOR,o,r)}if("isNaN"===o||"isFinite"===o)return 0===i?new O(_.Z.LITERAL_BOOLEAN,"isNaN"===o):(r=M(e,n[0]),new O(_.Z.UNARY,o,r));if("isExactClass"===o||"isClass"===o){if(i<1||i>1)throw new d.Z(`${o} requires exactly one argument.`);return r=M(e,n[0]),new O(_.Z.UNARY,o,r)}if("getExactClassName"===o){if(i>0)throw new d.Z(`${o} does not take any argument.`);return new O(_.Z.UNARY,o)}if((0,c.Z)(S[o])){if(1!==i)throw new d.Z(`${o} requires exactly one argument.`);return r=M(e,n[0]),new O(_.Z.UNARY,o,r)}if((0,c.Z)(C[o])){if(2!==i)throw new d.Z(`${o} requires exactly two arguments.`);return s=M(e,n[0]),a=M(e,n[1]),new O(_.Z.BINARY,o,s,a)}if((0,c.Z)(x[o])){if(3!==i)throw new d.Z(`${o} requires exactly three arguments.`);s=M(e,n[0]),a=M(e,n[1]);const t=M(e,n[2]);return new O(_.Z.TERNARY,o,s,a,t)}if("Boolean"===o)return 0===i?new O(_.Z.LITERAL_BOOLEAN,!1):(r=M(e,n[0]),new O(_.Z.UNARY,o,r));if("Number"===o)return 0===i?new O(_.Z.LITERAL_NUMBER,0):(r=M(e,n[0]),new O(_.Z.UNARY,o,r));if("String"===o)return 0===i?new O(_.Z.LITERAL_STRING,""):(r=M(e,n[0]),new O(_.Z.UNARY,o,r));if("regExp"===o)return function(e,t){const n=t.arguments;if(0===n.length)return new O(_.Z.LITERAL_REGEX,new RegExp);const i=M(e,n[0]);let o;if(n.length>1){const t=M(e,n[1]);if(N(i)&&N(t)){try{o=new RegExp(L(String(i._value)),t._value)}catch(e){throw new d.Z(e)}return new O(_.Z.LITERAL_REGEX,o)}return new O(_.Z.REGEX,i,t)}if(N(i)){try{o=new RegExp(L(String(i._value)))}catch(e){throw new d.Z(e)}return new O(_.Z.LITERAL_REGEX,o)}return new O(_.Z.REGEX,i)}(e,t);throw new d.Z(`Unexpected function call "${o}".`)}(e,t);else if("Identifier"===t.type)n=function(e){if("czm_"===e.name.substr(0,4)){const t=e.name.substr(4);return"tiles3d_"===t.substr(0,8)?new O(_.Z.BUILTIN_VARIABLE,t):new O(_.Z.VARIABLE,t)}if("NaN"===e.name)return new O(_.Z.LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new O(_.Z.LITERAL_NUMBER,1/0);if("undefined"===e.name)return new O(_.Z.LITERAL_UNDEFINED,void 0);throw new d.Z(`${e.name} is not defined.`)}(t);else if("UnaryExpression"===t.type){i=t.operator;const o=M(e,t.argument);if(!(y.indexOf(i)>-1))throw new d.Z(`Unexpected operator "${i}".`);n=new O(_.Z.UNARY,i,o)}else if("BinaryExpression"===t.type){if(i=t.operator,o=M(e,t.left),r=M(e,t.right),!(b.indexOf(i)>-1))throw new d.Z(`Unexpected operator "${i}".`);n=new O(_.Z.BINARY,i,o,r)}else if("LogicalExpression"===t.type)i=t.operator,o=M(e,t.left),r=M(e,t.right),b.indexOf(i)>-1&&(n=new O(_.Z.BINARY,i,o,r));else if("ConditionalExpression"===t.type){const i=M(e,t.test);o=M(e,t.consequent),r=M(e,t.alternate),n=new O(_.Z.CONDITIONAL,"?",o,r,i)}else if("MemberExpression"===t.type)n=function(e,t){if("Math"===t.object.name)return function(e){const t=e.property.name;return"PI"===t?new O(_.Z.LITERAL_NUMBER,Math.PI):"E"===t?new O(_.Z.LITERAL_NUMBER,Math.E):void 0}(t);if("Number"===t.object.name)return function(e){if("POSITIVE_INFINITY"===e.property.name)return new O(_.Z.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}(t);let n;const i=M(e,t.object);return t.computed?(n=M(e,t.property),new O(_.Z.MEMBER,"brackets",i,n)):(n=new O(_.Z.LITERAL_STRING,t.property.name),new O(_.Z.MEMBER,"dot",i,n))}(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new d.Z("Provide exactly one expression."):new d.Z("Cannot parse expression.");{const i=[];for(let n=0;n<t.elements.length;n++)i[n]=M(e,t.elements[n]);n=new O(_.Z.ARRAY,i)}}return n}function R(e){return(0,c.Z)(e)?e.content.tileset.timeSinceLoad:0}function F(e,t){if((0,c.Z)(e))return e.getPropertyInherited(t)}function B(e){return"feature"===e._value}function U(e){const t=e._left,n=t.length;for(let e=0;e<n;++e)if(t[e]._type!==_.Z.LITERAL_NUMBER)return;const i=t[0]._value,o=t[1]._value,r=t[2]._value,s=4===n?t[3]._value:1;return a.Z.fromHsl(i,o,r,s,E)}function k(e){const t=e._left,n=t.length;for(let e=0;e<n;++e)if(t[e]._type!==_.Z.LITERAL_NUMBER)return;const i=E;return i.red=t[0]._value/255,i.green=t[1]._value/255,i.blue=t[2]._value/255,i.alpha=4===n?t[3]._value:1,i}function V(e){return e%1==0?e.toFixed(1):e.toString()}function H(e){return`vec4(${V(e.red)}, ${V(e.green)}, ${V(e.blue)}, ${V(e.alpha)})`}function z(e,t,n,i){const o=e.length,r=new Array(o);for(let s=0;s<o;++s)r[s]=e[s].getShaderExpression(t,n,i);return r}function G(e,t){return(0,c.Z)(t[e])?t[e]:g.NULL_SENTINEL}O.prototype._evaluateLiteral=function(){return this._value},O.prototype._evaluateLiteralColor=function(e){const t=E,n=this._left;if("color"===this._value)(0,c.Z)(n)?n.length>1?(a.Z.fromCssColorString(n[0].evaluate(e),t),t.alpha=n[1].evaluate(e)):a.Z.fromCssColorString(n[0].evaluate(e),t):a.Z.fromBytes(255,255,255,255,t);else if("rgb"===this._value)a.Z.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),255,t);else if("rgba"===this._value){const i=255*n[3].evaluate(e);a.Z.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),i,t)}else"hsl"===this._value?a.Z.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),1,t):"hsla"===this._value&&a.Z.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),n[3].evaluate(e),t);return r.Z.fromColor(t,Z.getCartesian4())},O.prototype._evaluateLiteralVector=function(e){const t=Z.getArray(),n=this._value,s=this._left,a=s.length;for(let c=0;c<a;++c){const a=s[c].evaluate(e);if("number"==typeof a)t.push(a);else if(a instanceof i.Z)t.push(a.x,a.y);else if(a instanceof o.Z)t.push(a.x,a.y,a.z);else{if(!(a instanceof r.Z))throw new d.Z(`${n} argument must be a vector or number. Argument is ${a}.`);t.push(a.x,a.y,a.z,a.w)}}const c=t.length,l=parseInt(n.charAt(3));if(0===c)throw new d.Z(`Invalid ${n} constructor. No valid arguments.`);if(c<l&&c>1)throw new d.Z(`Invalid ${n} constructor. Not enough arguments.`);if(c>l&&a>1)throw new d.Z(`Invalid ${n} constructor. Too many arguments.`);if(1===c){const e=t[0];t.push(e,e,e)}return"vec2"===n?i.Z.fromArray(t,0,Z.getCartesian2()):"vec3"===n?o.Z.fromArray(t,0,Z.getCartesian3()):"vec4"===n?r.Z.fromArray(t,0,Z.getCartesian4()):void 0},O.prototype._evaluateLiteralString=function(){return this._value},O.prototype._evaluateVariableString=function(e){let t=this._value,n=v.exec(t);for(;null!==n;){const i=n[0];let o=F(e,n[1]);(0,c.Z)(o)||(o=""),t=t.replace(i,o),n=v.exec(t)}return t},O.prototype._evaluateVariable=function(e){return F(e,this._value)},O.prototype._evaluateMemberDot=function(e){if(B(this._left))return F(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!(0,c.Z)(t))return;const n=this._right.evaluate(e);if(t instanceof i.Z||t instanceof o.Z||t instanceof r.Z){if("r"===n)return t.x;if("g"===n)return t.y;if("b"===n)return t.z;if("a"===n)return t.w}return t[n]},O.prototype._evaluateMemberBrackets=function(e){if(B(this._left))return F(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!(0,c.Z)(t))return;const n=this._right.evaluate(e);if(t instanceof i.Z||t instanceof o.Z||t instanceof r.Z){if(0===n||"r"===n)return t.x;if(1===n||"g"===n)return t.y;if(2===n||"b"===n)return t.z;if(3===n||"a"===n)return t.w}return t[n]},O.prototype._evaluateArray=function(e){const t=[];for(let n=0;n<this._value.length;n++)t[n]=this._value[n].evaluate(e);return t},O.prototype._evaluateNot=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new d.Z(`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t},O.prototype._evaluateNegative=function(e){const t=this._left.evaluate(e);if(t instanceof i.Z)return i.Z.negate(t,Z.getCartesian2());if(t instanceof o.Z)return o.Z.negate(t,Z.getCartesian3());if(t instanceof r.Z)return r.Z.negate(t,Z.getCartesian4());if("number"==typeof t)return-t;throw new d.Z(`Operator "-" requires a vector or number argument. Argument is ${t}.`)},O.prototype._evaluatePositive=function(e){const t=this._left.evaluate(e);if(!(t instanceof i.Z||t instanceof o.Z||t instanceof r.Z||"number"==typeof t))throw new d.Z(`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t},O.prototype._evaluateLessThan=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new d.Z(`Operator "<" requires number arguments. Arguments are ${t} and ${n}.`);return t<n},O.prototype._evaluateLessThanOrEquals=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new d.Z(`Operator "<=" requires number arguments. Arguments are ${t} and ${n}.`);return t<=n},O.prototype._evaluateGreaterThan=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new d.Z(`Operator ">" requires number arguments. Arguments are ${t} and ${n}.`);return t>n},O.prototype._evaluateGreaterThanOrEquals=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new d.Z(`Operator ">=" requires number arguments. Arguments are ${t} and ${n}.`);return t>=n},O.prototype._evaluateOr=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new d.Z(`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;const n=this._right.evaluate(e);if("boolean"!=typeof n)throw new d.Z(`Operator "||" requires boolean arguments. Second argument is ${n}.`);return t||n},O.prototype._evaluateAnd=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new d.Z(`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;const n=this._right.evaluate(e);if("boolean"!=typeof n)throw new d.Z(`Operator "&&" requires boolean arguments. Second argument is ${n}.`);return t&&n},O.prototype._evaluatePlus=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.Z&&t instanceof i.Z)return i.Z.add(t,n,Z.getCartesian2());if(n instanceof o.Z&&t instanceof o.Z)return o.Z.add(t,n,Z.getCartesian3());if(n instanceof r.Z&&t instanceof r.Z)return r.Z.add(t,n,Z.getCartesian4());if("string"==typeof t||"string"==typeof n)return t+n;if("number"==typeof t&&"number"==typeof n)return t+n;throw new d.Z(`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${n}.`)},O.prototype._evaluateMinus=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.Z&&t instanceof i.Z)return i.Z.subtract(t,n,Z.getCartesian2());if(n instanceof o.Z&&t instanceof o.Z)return o.Z.subtract(t,n,Z.getCartesian3());if(n instanceof r.Z&&t instanceof r.Z)return r.Z.subtract(t,n,Z.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t-n;throw new d.Z(`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},O.prototype._evaluateTimes=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.Z&&t instanceof i.Z)return i.Z.multiplyComponents(t,n,Z.getCartesian2());if(n instanceof i.Z&&"number"==typeof t)return i.Z.multiplyByScalar(n,t,Z.getCartesian2());if(t instanceof i.Z&&"number"==typeof n)return i.Z.multiplyByScalar(t,n,Z.getCartesian2());if(n instanceof o.Z&&t instanceof o.Z)return o.Z.multiplyComponents(t,n,Z.getCartesian3());if(n instanceof o.Z&&"number"==typeof t)return o.Z.multiplyByScalar(n,t,Z.getCartesian3());if(t instanceof o.Z&&"number"==typeof n)return o.Z.multiplyByScalar(t,n,Z.getCartesian3());if(n instanceof r.Z&&t instanceof r.Z)return r.Z.multiplyComponents(t,n,Z.getCartesian4());if(n instanceof r.Z&&"number"==typeof t)return r.Z.multiplyByScalar(n,t,Z.getCartesian4());if(t instanceof r.Z&&"number"==typeof n)return r.Z.multiplyByScalar(t,n,Z.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t*n;throw new d.Z(`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${n}.`)},O.prototype._evaluateDivide=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.Z&&t instanceof i.Z)return i.Z.divideComponents(t,n,Z.getCartesian2());if(t instanceof i.Z&&"number"==typeof n)return i.Z.divideByScalar(t,n,Z.getCartesian2());if(n instanceof o.Z&&t instanceof o.Z)return o.Z.divideComponents(t,n,Z.getCartesian3());if(t instanceof o.Z&&"number"==typeof n)return o.Z.divideByScalar(t,n,Z.getCartesian3());if(n instanceof r.Z&&t instanceof r.Z)return r.Z.divideComponents(t,n,Z.getCartesian4());if(t instanceof r.Z&&"number"==typeof n)return r.Z.divideByScalar(t,n,Z.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t/n;throw new d.Z(`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${n}.`)},O.prototype._evaluateMod=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.Z&&t instanceof i.Z)return i.Z.fromElements(t.x%n.x,t.y%n.y,Z.getCartesian2());if(n instanceof o.Z&&t instanceof o.Z)return o.Z.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,Z.getCartesian3());if(n instanceof r.Z&&t instanceof r.Z)return r.Z.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,t.w%n.w,Z.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t%n;throw new d.Z(`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},O.prototype._evaluateEqualsStrict=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof i.Z&&t instanceof i.Z||n instanceof o.Z&&t instanceof o.Z||n instanceof r.Z&&t instanceof r.Z?t.equals(n):t===n},O.prototype._evaluateNotEqualsStrict=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof i.Z&&t instanceof i.Z||n instanceof o.Z&&t instanceof o.Z||n instanceof r.Z&&t instanceof r.Z?!t.equals(n):t!==n},O.prototype._evaluateConditional=function(e){const t=this._test.evaluate(e);if("boolean"!=typeof t)throw new d.Z(`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)},O.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},O.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},O.prototype._evaluateIsExactClass=function(e){return!!(0,c.Z)(e)&&e.isExactClass(this._left.evaluate(e))},O.prototype._evaluateIsClass=function(e){return!!(0,c.Z)(e)&&e.isClass(this._left.evaluate(e))},O.prototype._evaluateGetExactClassName=function(e){if((0,c.Z)(e))return e.getExactClassName()},O.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},O.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},O.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},O.prototype._evaluateRegExp=function(e){const t=this._value.evaluate(e);let n,i="";(0,c.Z)(this._left)&&(i=this._left.evaluate(e));try{n=new RegExp(t,i)}catch(e){throw new d.Z(e)}return n},O.prototype._evaluateRegExpTest=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"==typeof n))throw new d.Z(`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);return t.test(n)},O.prototype._evaluateRegExpMatch=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&"string"==typeof n)return t.test(n);if(n instanceof RegExp&&"string"==typeof t)return n.test(t);throw new d.Z(`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)},O.prototype._evaluateRegExpNotMatch=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&"string"==typeof n)return!t.test(n);if(n instanceof RegExp&&"string"==typeof t)return!n.test(t);throw new d.Z(`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)},O.prototype._evaluateRegExpExec=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"==typeof n))throw new d.Z(`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);const i=t.exec(n);return(0,c.Z)(i)?i[1]:null},O.prototype._evaluateToString=function(e){const t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof i.Z||t instanceof o.Z||t instanceof r.Z)return String(t);throw new d.Z(`Unexpected function call "${this._value}".`)},g.NULL_SENTINEL="czm_infinity",O.prototype.getShaderExpression=function(e,t,n){let i,o,r,s;const u=this._type;let h,f,p,m=this._value;switch((0,c.Z)(this._left)&&(o=Array.isArray(this._left)?z(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),(0,c.Z)(this._right)&&(r=this._right.getShaderExpression(e,t,this)),(0,c.Z)(this._test)&&(s=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(m=z(this._value,e,t,this)),u){case _.Z.VARIABLE:if(B(this))return;return G(m,e);case _.Z.UNARY:if("Boolean"===m)return`bool(${o})`;if("Number"===m)return`float(${o})`;if("round"===m)return`floor(${o} + 0.5)`;if((0,c.Z)(S[m]))return`${m}(${o})`;if("isNaN"===m)return`(${o} != ${o})`;if("isFinite"===m)return`(abs(${o}) < czm_infinity)`;if("String"===m||"isExactClass"===m||"isClass"===m||"getExactClassName"===m)throw new d.Z(`Error generating style shader: "${m}" is not supported.`);return m+o;case _.Z.BINARY:return"%"===m?`mod(${o}, ${r})`:"==="===m?`(${o} == ${r})`:"!=="===m?`(${o} != ${r})`:"atan2"===m?`atan(${o}, ${r})`:(0,c.Z)(C[m])?`${m}(${o}, ${r})`:`(${o} ${m} ${r})`;case _.Z.TERNARY:if((0,c.Z)(x[m]))return`${m}(${o}, ${r}, ${s})`;break;case _.Z.CONDITIONAL:return`(${s} ? ${o} : ${r})`;case _.Z.MEMBER:return B(this._left)?G(r,e):"r"===r||"x"===r||"0.0"===r?`${o}[0]`:"g"===r||"y"===r||"1.0"===r?`${o}[1]`:"b"===r||"z"===r||"2.0"===r?`${o}[2]`:"a"===r||"w"===r||"3.0"===r?`${o}[3]`:`${o}[int(${r})]`;case _.Z.FUNCTION_CALL:throw new d.Z(`Error generating style shader: "${m}" is not supported.`);case _.Z.ARRAY:if(4===m.length)return`vec4(${m[0]}, ${m[1]}, ${m[2]}, ${m[3]})`;if(3===m.length)return`vec3(${m[0]}, ${m[1]}, ${m[2]})`;if(2===m.length)return`vec2(${m[0]}, ${m[1]})`;throw new d.Z("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case _.Z.REGEX:throw new d.Z("Error generating style shader: Regular expressions are not supported.");case _.Z.VARIABLE_IN_STRING:throw new d.Z("Error generating style shader: Converting a variable to a string is not supported.");case _.Z.LITERAL_NULL:return g.NULL_SENTINEL;case _.Z.LITERAL_BOOLEAN:return m?"true":"false";case _.Z.LITERAL_NUMBER:return V(m);case _.Z.LITERAL_STRING:if((0,c.Z)(n)&&n._type===_.Z.MEMBER&&("r"===m||"g"===m||"b"===m||"a"===m||"x"===m||"y"===m||"z"===m||"w"===m||B(n._left)))return m;if(i=a.Z.fromCssColorString(m,E),(0,c.Z)(i))return function(e){return`vec3(${V(e.red)}, ${V(e.green)}, ${V(e.blue)})`}(i);throw new d.Z("Error generating style shader: String literals are not supported.");case _.Z.LITERAL_COLOR:if(h=o,"color"===m){if(!(0,c.Z)(h))return"vec4(1.0)";if(h.length>1){const e=h[0],n=h[1];return"1.0"!==n&&(t.translucent=!0),`vec4(${e}, ${n})`}return`vec4(${h[0]}, 1.0)`}if("rgb"===m)return i=k(this),(0,c.Z)(i)?H(i):`vec4(${h[0]} / 255.0, ${h[1]} / 255.0, ${h[2]} / 255.0, 1.0)`;if("rgba"===m)return"1.0"!==h[3]&&(t.translucent=!0),i=k(this),(0,c.Z)(i)?H(i):`vec4(${h[0]} / 255.0, ${h[1]} / 255.0, ${h[2]} / 255.0, ${h[3]})`;if("hsl"===m)return i=U(this),(0,c.Z)(i)?H(i):`vec4(czm_HSLToRGB(vec3(${h[0]}, ${h[1]}, ${h[2]})), 1.0)`;if("hsla"===m)return i=U(this),(0,c.Z)(i)?(1!==i.alpha&&(t.translucent=!0),H(i)):("1.0"!==h[3]&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${h[0]}, ${h[1]}, ${h[2]})), ${h[3]})`);break;case _.Z.LITERAL_VECTOR:if(!(0,c.Z)(o))throw new l.Z("left should always be defined for type ExpressionNodeType.LITERAL_VECTOR");f=o.length,p=`${m}(`;for(let e=0;e<f;++e)p+=o[e],e<f-1&&(p+=", ");return p+=")",p;case _.Z.LITERAL_REGEX:throw new d.Z("Error generating style shader: Regular expressions are not supported.");case _.Z.LITERAL_UNDEFINED:return g.NULL_SENTINEL;case _.Z.BUILTIN_VARIABLE:if("tiles3d_tileset_time"===m)return m}},O.prototype.getVariables=function(e,t){let n,i,o;const r=this._type,s=this._value;if((0,c.Z)(this._left))if(Array.isArray(this._left))for(n=this._left,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);else this._left.getVariables(e,this);if((0,c.Z)(this._right)&&this._right.getVariables(e,this),(0,c.Z)(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(n=this._value,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);let a;switch(r){case _.Z.VARIABLE:B(this)||e.push(s);break;case _.Z.VARIABLE_IN_STRING:for(a=v.exec(s);null!==a;)e.push(a[1]),a=v.exec(s);break;case _.Z.LITERAL_STRING:(0,c.Z)(t)&&t._type===_.Z.MEMBER&&B(t._left)&&e.push(s)}};const j=g},313167:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18})},699765:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(660904),o=n(11020),r=n(344485),s=n(714233);function a(){this.enabled=!0,this.renderable=!0,this.density=2e-4,this.screenSpaceErrorFactor=2,this.minimumBrightness=.03}const c=[359.393,800.749,1275.6501,2151.1192,3141.7763,4777.5198,6281.2493,12364.307,15900.765,49889.0549,78026.8259,99260.7344,120036.3873,151011.0158,156091.1953,203849.3112,274866.9803,319916.3149,493552.0528,628733.5874],l=[2e-5,2e-4,1e-4,7e-5,5e-5,4e-5,3e-5,19e-6,1e-5,85e-7,62e-7,58e-7,53e-7,52e-7,51e-7,42e-7,4e-6,34e-7,26e-7,22e-7];for(let e=0;e<l.length;++e)l[e]*=1e6;const u=l[1],d=l[l.length-1];for(let e=0;e<l.length;++e)l[e]=(l[e]-d)/(u-d);let h=0;const f=new i.Z;a.prototype.update=function(e){if(!(e.fog.enabled=this.enabled))return;e.fog.renderable=this.renderable;const t=e.camera,n=t.positionCartographic;if(!(0,o.Z)(n)||n.height>8e5||e.mode!==s.Z.SCENE3D)return void(e.fog.enabled=!1);const a=n.height,p=function(e){const t=c,n=t.length;if(e<t[0])return h=0,h;if(e>t[n-1])return h=n-2,h;if(e>=t[h]){if(h+1<n&&e<t[h+1])return h;if(h+2<n&&e<t[h+2])return++h,h}else if(h-1>=0&&e>=t[h-1])return--h,h;let i;for(i=0;i<n-2&&!(e>=t[i]&&e<t[i+1]);++i);return h=i,h}(a),m=r.Z.clamp((a-c[p])/(c[p+1]-c[p]),0,1);let _=r.Z.lerp(l[p],l[p+1],m);const g=1e6*this.density;_=_*(g-g/u*d)*1e-6;const Z=i.Z.normalize(t.positionWC,f);_*=1-Math.abs(i.Z.dot(t.directionWC,Z)),e.fog.density=_,e.fog.sse=this.screenSpaceErrorFactor,e.fog.minimumBrightness=this.minimumBrightness};const p=a},987315:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(714233);const o=function(e,t,n){this.context=e,this.commandList=[],this.shadowMaps=[],this.brdfLutGenerator=void 0,this.environmentMap=void 0,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this.specularEnvironmentMapsMaximumLOD=void 0,this.mode=i.Z.SCENE3D,this.morphTime=i.Z.getMorphTime(i.Z.SCENE3D),this.frameNumber=0,this.newFrame=!1,this.time=void 0,this.jobScheduler=n,this.mapProjection=void 0,this.camera=void 0,this.cameraUnderground=!1,this.globeTranslucencyState=void 0,this.cullingVolume=void 0,this.occluder=void 0,this.maximumScreenSpaceError=void 0,this.pixelRatio=1,this.passes={render:!1,pick:!1,depth:!1,postProcess:!1,offscreen:!1},this.creditDisplay=t,this.afterRender=[],this.scene3DOnly=!1,this.fog={enabled:!1,density:void 0,sse:void 0,minimumBrightness:void 0},this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.shadowState={shadowsEnabled:!0,shadowMaps:[],lightShadowMaps:[],nearPlane:1,farPlane:5e3,closestObjectSize:1e3,lastDirtyTime:0,outOfView:!0},this.splitPosition=0,this.frustumSplits=[],this.backgroundColor=void 0,this.light=void 0,this.minimumDisableDepthTestDistance=void 0,this.invertClassification=!1,this.invertClassificationColor=void 0,this.useLogDepth=!1,this.tilesetPassState=void 0,this.minimumTerrainHeight=0}},482787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(234146),o=n(431056);const r=function(e,t){this.near=(0,i.Z)(e,0),this.far=(0,i.Z)(t,0);const n=o.Z.NUMBER_OF_PASSES,r=new Array(n),s=new Array(n);for(let e=0;e<n;++e)r[e]=[],s[e]=0;this.commands=r,this.indices=s}},648034:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(660904),o=n(234146),r=n(11020),s=n(906439),a=n(722313),c=n(765153),l=n(911698),u=n(659635),d=n(217066),h=n(533424),f=n(505368);function p(e,t,n,s,a){this._tileset=e,this._tile=t,this._resource=n,this._geometries=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,this._resolveContent=void 0,this._readyPromise=new Promise((e=>{this._resolveContent=e})),function(e,t,n){n=(0,o.Z)(n,0);const s=new Uint8Array(t),a=new DataView(t);n+=m;const c=a.getUint32(n,!0);if(1!==c)throw new d.Z(`Only Geometry tile version 1 is supported.  Version ${c} is not.`);n+=m;const p=a.getUint32(n,!0);if(n+=m,0===p)return e._ready=!0,void e._resolveContent(e);const _=a.getUint32(n,!0);if(n+=m,0===_)throw new d.Z("Feature table must have a byte length greater than zero");const g=a.getUint32(n,!0);n+=m;const Z=a.getUint32(n,!0);n+=m;const y=a.getUint32(n,!0);n+=m;const b=(0,l.Z)(s,n,_);n+=_;const v=new Uint8Array(t,n,g);let A,T;n+=g,Z>0&&(A=(0,l.Z)(s,n,Z),n+=Z,y>0&&(T=new Uint8Array(t,n,y),T=new Uint8Array(T)));const w=(0,o.Z)(b.BOXES_LENGTH,0),E=(0,o.Z)(b.CYLINDERS_LENGTH,0),S=(0,o.Z)(b.ELLIPSOIDS_LENGTH,0),C=(0,o.Z)(b.SPHERES_LENGTH,0),x=w+E+S+C,I=new h.Z(e,x,A,T,function(e){return function(t,n){(0,r.Z)(e._geometries)&&e._geometries.updateCommands(t,n)}}(e));if(e._batchTable=I,0===x)return;const P=e.tile.computedTransform;let D;(0,r.Z)(b.RTC_CENTER)&&(D=i.Z.unpack(b.RTC_CENTER),u.Z.multiplyByPoint(P,D,D));const O=function(e,t){let n,i,s,a,c;const l=(0,o.Z)(e.BOXES_LENGTH,0),u=(0,o.Z)(e.CYLINDERS_LENGTH,0),h=(0,o.Z)(e.ELLIPSOIDS_LENGTH,0),f=(0,o.Z)(e.SPHERES_LENGTH,0);if(l>0&&(0,r.Z)(e.BOX_BATCH_IDS)){const i=t.byteOffset+e.BOX_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,l)}if(u>0&&(0,r.Z)(e.CYLINDER_BATCH_IDS)){const n=t.byteOffset+e.CYLINDER_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,u)}if(h>0&&(0,r.Z)(e.ELLIPSOID_BATCH_IDS)){const n=t.byteOffset+e.ELLIPSOID_BATCH_IDS.byteOffset;s=new Uint16Array(t.buffer,n,h)}if(f>0&&(0,r.Z)(e.SPHERE_BATCH_IDS)){const n=t.byteOffset+e.SPHERE_BATCH_IDS.byteOffset;a=new Uint16Array(t.buffer,n,f)}const p=(0,r.Z)(n)||(0,r.Z)(i)||(0,r.Z)(s)||(0,r.Z)(a),m=l>0&&!(0,r.Z)(n)||u>0&&!(0,r.Z)(i)||h>0&&!(0,r.Z)(s)||f>0&&!(0,r.Z)(a);if(p&&m)throw new d.Z("If one group of batch ids is defined, then all batch ids must be defined");if(!((0,r.Z)(n)||(0,r.Z)(i)||(0,r.Z)(s)||(0,r.Z)(a))){let e=0;if(!(0,r.Z)(n)&&l>0)for(n=new Uint16Array(l),c=0;c<l;++c)n[c]=e++;if(!(0,r.Z)(i)&&u>0)for(i=new Uint16Array(u),c=0;c<u;++c)i[c]=e++;if(!(0,r.Z)(s)&&h>0)for(s=new Uint16Array(h),c=0;c<h;++c)s[c]=e++;if(!(0,r.Z)(a)&&f>0)for(a=new Uint16Array(f),c=0;c<f;++c)a[c]=e++}return{boxes:n,cylinders:i,ellipsoids:s,spheres:a}}(b,v);if(w>0||E>0||S>0||C>0){let t,n,i,o;if(w>0){const e=v.byteOffset+b.BOXES.byteOffset;t=new Float32Array(v.buffer,e,f.Z.packedBoxLength*w)}if(E>0){const e=v.byteOffset+b.CYLINDERS.byteOffset;n=new Float32Array(v.buffer,e,f.Z.packedCylinderLength*E)}if(S>0){const e=v.byteOffset+b.ELLIPSOIDS.byteOffset;i=new Float32Array(v.buffer,e,f.Z.packedEllipsoidLength*S)}if(C>0){const e=v.byteOffset+b.SPHERES.byteOffset;o=new Float32Array(v.buffer,e,f.Z.packedSphereLength*C)}return e._geometries=new f.Z({boxes:t,boxBatchIds:O.boxes,cylinders:n,cylinderBatchIds:O.cylinders,ellipsoids:i,ellipsoidBatchIds:O.ellipsoids,spheres:o,sphereBatchIds:O.spheres,center:D,modelMatrix:P,batchTable:I,boundingVolume:e.tile.boundingVolume.boundingVolume}),e}Promise.resolve(e)}(this,s,a)}Object.defineProperties(p.prototype,{featuresLength:{get:function(){return(0,r.Z)(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return(0,r.Z)(this._geometries)?this._geometries.trianglesLength:0}},geometryByteLength:{get:function(){return(0,r.Z)(this._geometries)?this._geometries.geometryByteLength:0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return(0,r.Z)(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,s.Z)("Geometry3DTileContent.readyPromise","Geometry3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Geometry3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const m=Uint32Array.BYTES_PER_ELEMENT;function _(e){const t=e.featuresLength;if(!(0,r.Z)(e._features)&&t>0){const n=new Array(t);(0,r.Z)(e._geometries)&&e._geometries.createFeatures(e,n),e._features=n}}p.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},p.prototype.getFeature=function(e){const t=this.featuresLength;if(!(0,r.Z)(e)||e<0||e>=t)throw new c.Z(`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return _(this),this._features[e]},p.prototype.applyDebugSettings=function(e,t){(0,r.Z)(this._geometries)&&this._geometries.applyDebugSettings(e,t)},p.prototype.applyStyle=function(e){_(this),(0,r.Z)(this._geometries)&&this._geometries.applyStyle(e,this._features)},p.prototype.update=function(e,t){(0,r.Z)(this._geometries)&&(this._geometries.classificationType=this._tileset.classificationType,this._geometries.debugWireframe=this._tileset.debugWireframe,this._geometries.update(t)),(0,r.Z)(this._batchTable)&&this._geometries.ready&&(this._batchTable.update(e,t),this._ready=!0,this._resolveContent(this))},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){return this._geometries=this._geometries&&this._geometries.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,a.Z)(this)};const g=p},792560:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(532056),o=n(11020),r=n(765153),s=n(217066),a=n(663630);function c(e){const t=[],n=e.features;for(let e=0;e<n.length;++e){const r=n[e],s=new a.Z;if(s.data=r,s.properties=r.properties,s.configureNameFromProperties(r.properties),s.configureDescriptionFromProperties(r.properties),(0,o.Z)(r.geometry)&&"Point"===r.geometry.type){const e=r.geometry.coordinates[0],t=r.geometry.coordinates[1];s.position=i.Z.fromDegrees(e,t)}t.push(s)}return t}const l="http://www.mapinfo.com/mxp";function u(e){const t=e.documentElement;if("MultiFeatureCollection"===t.localName&&t.namespaceURI===l)return function(e){const t=[],n=e.documentElement.getElementsByTagNameNS(l,"Feature");for(let e=0;e<n.length;++e){const i=n[e],o={},r=i.getElementsByTagNameNS(l,"Val");for(let e=0;e<r.length;++e){const t=r[e];if(t.hasAttribute("ref")){const e=t.getAttribute("ref"),n=t.textContent.trim();o[e]=n}}const s=new a.Z;s.data=i,s.properties=o,s.configureNameFromProperties(o),s.configureDescriptionFromProperties(o),t.push(s)}return t}(e);if("FeatureInfoResponse"===t.localName&&"http://www.esri.com/wms"===t.namespaceURI)return function(e){const t=e.documentElement,n=[];let i;const o=t.getElementsByTagNameNS("*","FIELDS");if(o.length>0)for(let e=0;e<o.length;++e){const t=o[e];i={};const r=t.attributes;for(let e=0;e<r.length;++e){const t=r[e];i[t.name]=t.value}n.push(h(t,i))}else{const e=t.getElementsByTagNameNS("*","FeatureInfo");for(let t=0;t<e.length;++t){const o=e[t];i={};const r=o.childNodes;for(let e=0;e<r.length;++e){const t=r[e];t.nodeType===Node.ELEMENT_NODE&&(i[t.localName]=t.textContent)}n.push(h(o,i))}}return n}(e);if("FeatureCollection"===t.localName&&"http://www.opengis.net/wfs"===t.namespaceURI)return function(e){const t=[],n=e.documentElement.getElementsByTagNameNS("http://www.opengis.net/gml","featureMember");for(let e=0;e<n.length;++e){const i=n[e],o={};d(i,o),t.push(h(i,o))}return t}(e);if("ServiceExceptionReport"===t.localName)throw new s.Z((new XMLSerializer).serializeToString(t));return"msGMLOutput"===t.localName?function(e){const t=[];let n;const i=e.documentElement.childNodes;for(let e=0;e<i.length;e++)if(i[e].nodeType===Node.ELEMENT_NODE){n=i[e];break}if(!(0,o.Z)(n))throw new s.Z("Unable to find first child of the feature info xml document");const r=n.childNodes;for(let e=0;e<r.length;++e){const n=r[e];if(n.nodeType===Node.ELEMENT_NODE){const e={};d(n,e),t.push(h(n,e))}}return t}(e):function(e){const t=(new XMLSerializer).serializeToString(e),n=document.createElement("div"),i=document.createElement("pre");i.textContent=t,n.appendChild(i);const o=new a.Z;return o.data=e,o.description=n.innerHTML,[o]}(e)}function d(e,t){let n=!0;for(let i=0;i<e.childNodes.length;++i){const o=e.childNodes[i];o.nodeType===Node.ELEMENT_NODE&&(n=!1),"Point"!==o.localName&&"LineString"!==o.localName&&"Polygon"!==o.localName&&"boundedBy"!==o.localName&&o.hasChildNodes()&&d(o,t)&&(t[o.localName]=o.textContent)}return n}function h(e,t){const n=new a.Z;return n.data=e,n.properties=t,n.configureNameFromProperties(t),n.configureDescriptionFromProperties(t),n}const f=/<body>\s*<\/body>/im,p=/<ServiceExceptionReport([\s\S]*)<\/ServiceExceptionReport>/im,m=/<title>([\s\S]*)<\/title>/im;function _(e){if(f.test(e))return;if(p.test(e))return;let t;const n=m.exec(e);n&&n.length>1&&(t=n[1]);const i=new a.Z;return i.name=t,i.description=e,i.data=e,[i]}const g=function(e,t,n){if(!(0,o.Z)(e))throw new r.Z("type is required.");if(this.type=e,!(0,o.Z)(t))if("json"===e)t="application/json";else if("xml"===e)t="text/xml";else if("html"===e)t="text/html";else{if("text"!==e)throw new r.Z('format is required when type is not "json", "xml", "html", or "text".');t="text/plain"}if(this.format=t,!(0,o.Z)(n))if("json"===e)n=c;else if("xml"===e)n=u;else if("html"===e)n=_;else{if("text"!==e)throw new r.Z('callback is required when type is not "json", "xml", "html", or "text".');n=_}this.callback=n}},228672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var i=n(762031),o=n(949225),r=n(660904),s=n(532056),a=n(35961),c=n(234146),l=n(11020),u=n(722313),d=n(765153),h=n(63354),f=n(250305),p=n(282910),m=n(998537),_=n(485662),g=n(638601),Z=n(143450),y=n(205522),b=n(437530),v=n(609882),A=n(643267),T=n(454854),w=n(644114),E=n(679498),S=n(749754),C=n(208311),x=n(812305),I=n(244167),P=n(640365),D=n(714233),O=n(534890);function L(e){e=(0,c.Z)(e,h.Z.WGS84);const t=new f.Z({ellipsoid:e}),n=new I.Z;this._ellipsoid=e,this._imageryLayerCollection=n,this._surfaceShaderSet=new S.Z,this._material=void 0,this._surface=new P.Z({tileProvider:new C.Z({terrainProvider:t,imageryLayers:n,surfaceShaderSet:this._surfaceShaderSet})}),this._terrainProvider=t,this._terrainProviderChanged=new p.Z,this._undergroundColor=a.Z.clone(a.Z.BLACK),this._undergroundColorAlphaByDistance=new _.Z(e.maximumRadius/1e3,0,e.maximumRadius/5,1),this._translucency=new x.Z,N(this),this.show=!0,this._oceanNormalMapResourceDirty=!0,this._oceanNormalMapResource=new y.Z({url:(0,o.Z)("Assets/Textures/waterNormalsSmall.jpg")}),this.maximumScreenSpaceError=2,this.tileCacheSize=100,this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this.fillHighlightColor=void 0,this.enableLighting=!1,this.lambertDiffuseMultiplier=.9,this.dynamicAtmosphereLighting=!0,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!0,this.atmosphereLightIntensity=10,this.atmosphereRayleighCoefficient=new r.Z(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new r.Z(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.lightingFadeOutDistance=1e7,this.lightingFadeInDistance=2e7,this.nightFadeOutDistance=1e7,this.nightFadeInDistance=5e7,this.showWaterEffect=!0,this.depthTestAgainstTerrain=!1,this.shadows=O.Z.RECEIVE_ONLY,this.atmosphereHueShift=0,this.atmosphereSaturationShift=0,this.atmosphereBrightnessShift=0,this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.showSkirts=!0,this.backFaceCulling=!0,this._oceanNormalMap=void 0,this._zoomedOutOceanSpecularIntensity=void 0,this.vertexShadowDarkness=.3}function N(e){const t=[],n=(0,l.Z)(e._material)&&(e._material.shaderSource.match(/slope/)||e._material.shaderSource.match("normalEC")),i=[w.Z,E.Z];!(0,l.Z)(e._material)||n&&!e._terrainProvider.requestVertexNormals?e._surface._tileProvider.materialUniformMap=void 0:(i.push(e._material.shaderSource),t.push("APPLY_MATERIAL"),e._surface._tileProvider.materialUniformMap=e._material._uniforms),i.push(A.Z),e._surfaceShaderSet.baseVertexShaderSource=new b.Z({sources:[w.Z,E.Z,T.Z],defines:t}),e._surfaceShaderSet.baseFragmentShaderSource=new b.Z({sources:i,defines:t}),e._surfaceShaderSet.material=e._material}Object.defineProperties(L.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},imageryLayers:{get:function(){return this._imageryLayerCollection}},imageryLayersUpdatedEvent:{get:function(){return this._surface.tileProvider.imageryLayersUpdatedEvent}},tilesLoaded:{get:function(){return!(0,l.Z)(this._surface)||this._surface.tileProvider.ready&&0===this._surface._tileLoadQueueHigh.length&&0===this._surface._tileLoadQueueMedium.length&&0===this._surface._tileLoadQueueLow.length}},baseColor:{get:function(){return this._surface.tileProvider.baseColor},set:function(e){this._surface.tileProvider.baseColor=e}},clippingPlanes:{get:function(){return this._surface.tileProvider.clippingPlanes},set:function(e){this._surface.tileProvider.clippingPlanes=e}},cartographicLimitRectangle:{get:function(){return this._surface.tileProvider.cartographicLimitRectangle},set:function(e){(0,l.Z)(e)||(e=Z.Z.clone(Z.Z.MAX_VALUE)),this._surface.tileProvider.cartographicLimitRectangle=e}},oceanNormalMapUrl:{get:function(){return this._oceanNormalMapResource.url},set:function(e){this._oceanNormalMapResource.url=e,this._oceanNormalMapResourceDirty=!0}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){e!==this._terrainProvider&&(this._terrainProvider=e,this._terrainProviderChanged.raiseEvent(e),(0,l.Z)(this._material)&&N(this))}},terrainProviderChanged:{get:function(){return this._terrainProviderChanged}},tileLoadProgressEvent:{get:function(){return this._surface.tileLoadProgressEvent}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,N(this))}},undergroundColor:{get:function(){return this._undergroundColor},set:function(e){this._undergroundColor=a.Z.clone(e,this._undergroundColor)}},undergroundColorAlphaByDistance:{get:function(){return this._undergroundColorAlphaByDistance},set:function(e){if((0,l.Z)(e)&&e.far<e.near)throw new d.Z("far distance must be greater than near distance.");this._undergroundColorAlphaByDistance=_.Z.clone(e,this._undergroundColorAlphaByDistance)}},translucency:{get:function(){return this._translucency}}});const M=[],R={start:0,stop:0};L.prototype.pickWorldCoordinates=function(e,t,n,o){if(!(0,l.Z)(e))throw new d.Z("ray is required");if(!(0,l.Z)(t))throw new d.Z("scene is required");n=(0,c.Z)(n,!0);const s=t.mode,a=t.mapProjection,u=M;u.length=0;const h=this._surface._tilesToRender;let f,p,_=h.length;for(p=0;p<_;++p){f=h[p];const t=f.data;if(!(0,l.Z)(t))continue;let n=t.pickBoundingSphere;if(s!==D.Z.SCENE3D)t.pickBoundingSphere=n=i.Z.fromRectangleWithHeights2D(f.rectangle,a,t.tileBoundingRegion.minimumHeight,t.tileBoundingRegion.maximumHeight,n),r.Z.fromElements(n.center.z,n.center.x,n.center.y,n.center);else{if(!(0,l.Z)(t.renderedMesh))continue;i.Z.clone(t.tileBoundingRegion.boundingSphere,n)}const o=m.Z.raySphere(e,n,R);(0,l.Z)(o)&&u.push(t)}var g;let Z;for(u.sort((g=e.origin,function(e,t){return i.Z.distanceSquaredTo(e.pickBoundingSphere,g)-i.Z.distanceSquaredTo(t.pickBoundingSphere,g)})),_=u.length,p=0;p<_&&(Z=u[p].pick(e,t.mode,t.mapProjection,n,o),!(0,l.Z)(Z));++p);return Z};const F=new s.Z;L.prototype.pick=function(e,t,n){if(n=this.pickWorldCoordinates(e,t,!0,n),(0,l.Z)(n)&&t.mode!==D.Z.SCENE3D){n=r.Z.fromElements(n.y,n.z,n.x,n);const e=t.mapProjection.unproject(n,F);n=t.globe.ellipsoid.cartographicToCartesian(e,n)}return n};const B=new r.Z,U=new r.Z,k=new s.Z,V=new g.Z;function H(e,t){return(0,l.Z)(e)&&Z.Z.contains(e.rectangle,t)?e:void 0}L.prototype.getHeight=function(e){if(!(0,l.Z)(e))throw new d.Z("cartographic is required");const t=this._surface._levelZeroTiles;if(!(0,l.Z)(t))return;let n,i;const o=t.length;for(i=0;i<o&&(n=t[i],!Z.Z.contains(n.rectangle,e));++i);if(i>=o)return;let s=n;for(;(0,l.Z)(n);)n=H(n._southwestChild,e)||H(n._southeastChild,e)||H(n._northwestChild,e)||n._northeastChild,(0,l.Z)(n)&&(0,l.Z)(n.data)&&(0,l.Z)(n.data.renderedMesh)&&(s=n);if(n=s,!(0,l.Z)(n)||!(0,l.Z)(n.data)||!(0,l.Z)(n.data.renderedMesh))return;const a=this._surface._tileProvider.tilingScheme.projection,u=this._surface._tileProvider.tilingScheme.ellipsoid,h=r.Z.fromRadians(e.longitude,e.latitude,0,u,B),f=V,p=u.geodeticSurfaceNormal(h,f.direction),m=u.getSurfaceNormalIntersectionWithZAxis(h,11500,f.origin);if(!(0,l.Z)(m)){let e;(0,l.Z)(n.data.tileBoundingRegion)&&(e=n.data.tileBoundingRegion.minimumHeight);const t=Math.min((0,c.Z)(e,0),-11500),i=r.Z.multiplyByScalar(p,Math.abs(t)+1,U);r.Z.subtract(h,i,f.origin)}const _=n.data.pick(f,void 0,a,!1,U);return(0,l.Z)(_)?u.cartesianToCartographic(_,k).height:void 0},L.prototype.update=function(e){this.show&&e.passes.render&&this._surface.update(e)},L.prototype.beginFrame=function(e){const t=this._surface,n=t.tileProvider,i=this.terrainProvider,o=(0,l.Z)(i)&&((0,l.Z)(i._ready)?i._ready:!(0,l.Z)(i.ready)||i.ready),r=this.showWaterEffect&&o&&i.hasWaterMask&&i.hasWaterMask;if(r&&this._oceanNormalMapResourceDirty){this._oceanNormalMapResourceDirty=!1;const t=this._oceanNormalMapResource,n=t.url;if((0,l.Z)(n)){const i=this;t.fetchImage().then((function(t){n===i._oceanNormalMapResource.url&&(i._oceanNormalMap=i._oceanNormalMap&&i._oceanNormalMap.destroy(),i._oceanNormalMap=new v.Z({context:e.context,source:t}))}))}else this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy()}const s=e.passes,a=e.mode;s.render&&(this.showGroundAtmosphere?this._zoomedOutOceanSpecularIntensity=.4:this._zoomedOutOceanSpecularIntensity=.5,t.maximumScreenSpaceError=this.maximumScreenSpaceError,t.tileCacheSize=this.tileCacheSize,t.loadingDescendantLimit=this.loadingDescendantLimit,t.preloadAncestors=this.preloadAncestors,t.preloadSiblings=this.preloadSiblings,n.terrainProvider=this.terrainProvider,n.lightingFadeOutDistance=this.lightingFadeOutDistance,n.lightingFadeInDistance=this.lightingFadeInDistance,n.nightFadeOutDistance=this.nightFadeOutDistance,n.nightFadeInDistance=this.nightFadeInDistance,n.zoomedOutOceanSpecularIntensity=a===D.Z.SCENE3D?this._zoomedOutOceanSpecularIntensity:0,n.hasWaterMask=r,n.oceanNormalMap=this._oceanNormalMap,n.enableLighting=this.enableLighting,n.dynamicAtmosphereLighting=this.dynamicAtmosphereLighting,n.dynamicAtmosphereLightingFromSun=this.dynamicAtmosphereLightingFromSun,n.showGroundAtmosphere=this.showGroundAtmosphere,n.atmosphereLightIntensity=this.atmosphereLightIntensity,n.atmosphereRayleighCoefficient=this.atmosphereRayleighCoefficient,n.atmosphereMieCoefficient=this.atmosphereMieCoefficient,n.atmosphereRayleighScaleHeight=this.atmosphereRayleighScaleHeight,n.atmosphereMieScaleHeight=this.atmosphereMieScaleHeight,n.atmosphereMieAnisotropy=this.atmosphereMieAnisotropy,n.shadows=this.shadows,n.hueShift=this.atmosphereHueShift,n.saturationShift=this.atmosphereSaturationShift,n.brightnessShift=this.atmosphereBrightnessShift,n.fillHighlightColor=this.fillHighlightColor,n.showSkirts=this.showSkirts,n.backFaceCulling=this.backFaceCulling,n.vertexShadowDarkness=this.vertexShadowDarkness,n.undergroundColor=this._undergroundColor,n.undergroundColorAlphaByDistance=this._undergroundColorAlphaByDistance,n.lambertDiffuseMultiplier=this.lambertDiffuseMultiplier,t.beginFrame(e))},L.prototype.render=function(e){this.show&&((0,l.Z)(this._material)&&this._material.update(e.context),this._surface.render(e))},L.prototype.endFrame=function(e){this.show&&e.passes.render&&this._surface.endFrame(e)},L.prototype.isDestroyed=function(){return!1},L.prototype.destroy=function(){return this._surfaceShaderSet=this._surfaceShaderSet&&this._surfaceShaderSet.destroy(),this._surface=this._surface&&this._surface.destroy(),this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy(),(0,u.Z)(this)};const z=L},166570:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(890828),o=n(35961),r=n(11020),s=n(722313),a=n(598020),c=n(12503),l=n(545870),u=n(417148),d=n(58038),h=n(622388),f=n(973591),p=n(822948),m=n(489709),_=n(721902);function g(){this._picking=!1,this._numSamples=1,this._tempCopyDepthTexture=void 0,this._pickColorFramebuffer=new c.Z({depthStencil:!0,supportsDepthTexture:!0}),this._outputFramebuffer=new c.Z({depthStencil:!0,supportsDepthTexture:!0}),this._copyDepthFramebuffer=new c.Z,this._tempCopyDepthFramebuffer=new c.Z,this._updateDepthFramebuffer=new c.Z({createColorAttachments:!1,createDepthAttachments:!1,depthStencil:!0}),this._clearGlobeColorCommand=void 0,this._copyColorCommand=void 0,this._copyDepthCommand=void 0,this._tempCopyDepthCommand=void 0,this._updateDepthCommand=void 0,this._viewport=new i.Z,this._rs=void 0,this._rsBlend=void 0,this._rsUpdate=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0,this._clearGlobeDepth=void 0}function Z(e,t,n,s,c){e._viewport.width=n,e._viewport.height=s;const l=!i.Z.equals(e._viewport,c.viewport);let g=l!==e._useScissorTest;e._useScissorTest=l,i.Z.equals(e._scissorRectangle,c.viewport)||(e._scissorRectangle=i.Z.clone(c.viewport,e._scissorRectangle),g=!0),(0,r.Z)(e._rs)&&i.Z.equals(e._viewport,e._rs.viewport)&&!g||(e._rs=u.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}}),e._rsBlend=u.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:f.Z.ALPHA_BLEND}),e._rsUpdate=u.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:m.Z.EQUAL,frontOperation:{fail:_.Z.KEEP,zFail:_.Z.KEEP,zPass:_.Z.KEEP},backFunction:m.Z.NEVER,reference:p.Z.CESIUM_3D_TILE_MASK,mask:p.Z.CESIUM_3D_TILE_MASK}})),(0,r.Z)(e._copyDepthCommand)||(e._copyDepthCommand=t.createViewportQuadCommand(h.Z,{uniformMap:{u_depthTexture:function(){return e.colorFramebufferManager.getDepthStencilTexture()}},owner:e})),e._copyDepthCommand.framebuffer=e._copyDepthFramebuffer.framebuffer,e._copyDepthCommand.renderState=e._rs,(0,r.Z)(e._copyColorCommand)||(e._copyColorCommand=t.createViewportQuadCommand(d.Z,{uniformMap:{colorTexture:function(){return e.colorFramebufferManager.getColorTexture()}},owner:e})),e._copyColorCommand.renderState=e._rs,(0,r.Z)(e._tempCopyDepthCommand)||(e._tempCopyDepthCommand=t.createViewportQuadCommand(h.Z,{uniformMap:{u_depthTexture:function(){return e._tempCopyDepthTexture}},owner:e})),e._tempCopyDepthCommand.framebuffer=e._tempCopyDepthFramebuffer.framebuffer,e._tempCopyDepthCommand.renderState=e._rs,(0,r.Z)(e._updateDepthCommand)||(e._updateDepthCommand=t.createViewportQuadCommand(d.Z,{uniformMap:{colorTexture:function(){return e._tempCopyDepthFramebuffer.getColorTexture()}},owner:e})),e._updateDepthCommand.framebuffer=e._updateDepthFramebuffer.framebuffer,e._updateDepthCommand.renderState=e._rsUpdate,(0,r.Z)(e._clearGlobeColorCommand)||(e._clearGlobeColorCommand=new a.Z({color:new o.Z(0,0,0,0),stencil:0,owner:e})),e._clearGlobeColorCommand.framebuffer=e.framebuffer}Object.defineProperties(g.prototype,{colorFramebufferManager:{get:function(){return this._picking?this._pickColorFramebuffer:this._outputFramebuffer}},framebuffer:{get:function(){return this.colorFramebufferManager.framebuffer}},depthStencilTexture:{get:function(){return this.colorFramebufferManager.getDepthStencilTexture()}},picking:{get:function(){return this._picking},set:function(e){this._picking=e}}}),g.prototype.update=function(e,t,n,i,o,r){const s=n.width,a=n.height,c=o?e.halfFloatingPointTexture?l.Z.HALF_FLOAT:l.Z.FLOAT:l.Z.UNSIGNED_BYTE;this._numSamples=i,this.picking?this._pickColorFramebuffer.update(e,s,a):this._outputFramebuffer.update(e,s,a,i,c),this._copyDepthFramebuffer.update(e,s,a),Z(this,e,s,a,t),e.uniformState.globeDepthTexture=void 0,this._useHdr=o,this._clearGlobeDepth=r},g.prototype.prepareColorTextures=function(e,t){!this.picking&&this._numSamples>1&&this._outputFramebuffer.prepareTextures(e,t)},g.prototype.executeCopyDepth=function(e,t){(0,r.Z)(this._copyDepthCommand)&&(this.prepareColorTextures(e),this._copyDepthCommand.execute(e,t),e.uniformState.globeDepthTexture=this._copyDepthFramebuffer.getColorTexture())},g.prototype.executeUpdateDepth=function(e,t,n,i){const o=(0,r.Z)(i)?i:t.framebuffer.depthStencilTexture;if(n||o!==this.colorFramebufferManager.getDepthStencilTexture()){if((0,r.Z)(this._updateDepthCommand)){if(!(0,r.Z)(this._updateDepthFramebuffer.framebuffer)||this._updateDepthFramebuffer.getDepthStencilTexture()!==o||this._updateDepthFramebuffer.getColorTexture()!==this._copyDepthFramebuffer.getColorTexture()){const n=this._copyDepthFramebuffer.getColorTexture().width,i=this._copyDepthFramebuffer.getColorTexture().height;this._tempCopyDepthFramebuffer.destroy(),this._tempCopyDepthFramebuffer.update(e,n,i);const r=this._copyDepthFramebuffer.getColorTexture();this._updateDepthFramebuffer.setColorTexture(r,0),this._updateDepthFramebuffer.setDepthStencilTexture(o),this._updateDepthFramebuffer.update(e,n,i),Z(this,e,n,i,t)}this._tempCopyDepthTexture=o,this._tempCopyDepthCommand.execute(e,t),this._updateDepthCommand.execute(e,t)}}else(0,r.Z)(this._copyDepthCommand)&&this._copyDepthCommand.execute(e,t)},g.prototype.executeCopyColor=function(e,t){(0,r.Z)(this._copyColorCommand)&&this._copyColorCommand.execute(e,t)},g.prototype.clear=function(e,t,n){const i=this._clearGlobeColorCommand;(0,r.Z)(i)&&(o.Z.clone(n,i.color),this.colorFramebufferManager.clear(e,i,t))},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){var e;return(e=this)._pickColorFramebuffer.destroy(),e._outputFramebuffer.destroy(),e._copyDepthFramebuffer.destroy(),e._tempCopyDepthFramebuffer.destroy(),e._updateDepthFramebuffer.destroy(),(0,r.Z)(this._copyColorCommand)&&(this._copyColorCommand.shaderProgram=this._copyColorCommand.shaderProgram.destroy()),(0,r.Z)(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=this._copyDepthCommand.shaderProgram.destroy()),(0,r.Z)(this._tempCopyDepthCommand)&&(this._tempCopyDepthCommand.shaderProgram=this._tempCopyDepthCommand.shaderProgram.destroy()),(0,r.Z)(this._updateDepthCommand)&&(this._updateDepthCommand.shaderProgram=this._updateDepthCommand.shaderProgram.destroy()),(0,s.Z)(this)};const y=g},749754:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(11020),o=n(722313),r=n(155772),s=n(161632),a=n(807549),c=n(714233);function l(e,t,n,i,o){this.numberOfDayTextures=e,this.flags=t,this.material=n,this.shaderProgram=i,this.clippingShaderState=o}function u(){this.baseVertexShaderSource=void 0,this.baseFragmentShaderSource=void 0,this._shadersByTexturesFlags=[],this.material=void 0}u.prototype.getShaderProgram=function(e){const t=e.frameState,n=e.surfaceTile,o=e.numberOfDayTextures,u=e.applyBrightness,d=e.applyContrast,h=e.applyHue,f=e.applySaturation,p=e.applyGamma,m=e.applyAlpha,_=e.applyDayNightAlpha,g=e.applySplit,Z=e.showReflectiveOcean,y=e.showOceanWaves,b=e.enableLighting,v=e.dynamicAtmosphereLighting,A=e.dynamicAtmosphereLightingFromSun,T=e.showGroundAtmosphere,w=e.perFragmentGroundAtmosphere,E=e.hasVertexNormals,S=e.useWebMercatorProjection,C=e.enableFog,x=e.enableClippingPlanes,I=e.clippingPlanes,P=e.clippedByBoundaries,D=e.hasImageryLayerCutout,O=e.colorCorrect,L=e.highlightFillTile,N=e.colorToAlpha,M=e.hasGeodeticSurfaceNormals,R=e.hasExaggeration,F=e.showUndergroundColor,B=e.translucent;let U=0,k="";const V=n.renderedMesh.encoding;V.quantization===r.Z.BITS12&&(U=1,k="QUANTIZATION_BITS12");let H=0,z="";P&&(H=1,z="TILE_LIMIT_RECTANGLE");let G=0,j="";D&&(G=1,j="APPLY_IMAGERY_CUTOUT");const W=t.mode,q=W|u<<2|d<<3|h<<4|f<<5|p<<6|m<<7|Z<<8|y<<9|b<<10|v<<11|A<<12|T<<13|w<<14|E<<15|S<<16|C<<17|U<<18|g<<19|x<<20|H<<21|G<<22|O<<23|L<<24|N<<25|M<<26|R<<27|F<<28|B<<29|_<<30;let Y=0;(0,i.Z)(I)&&I.length>0&&(Y=x?I.clippingPlanesState:0);let X=n.surfaceShader;if((0,i.Z)(X)&&X.numberOfDayTextures===o&&X.flags===q&&X.material===this.material&&X.clippingShaderState===Y)return X.shaderProgram;let J=this._shadersByTexturesFlags[o];if((0,i.Z)(J)||(J=this._shadersByTexturesFlags[o]=[]),X=J[q],!(0,i.Z)(X)||X.material!==this.material||X.clippingShaderState!==Y){const e=this.baseVertexShaderSource.clone(),n=this.baseFragmentShaderSource.clone();0!==Y&&n.sources.unshift((0,a.Z)(I,t.context)),e.defines.push(k),n.defines.push(`TEXTURE_UNITS ${o}`,z,j),u&&n.defines.push("APPLY_BRIGHTNESS"),d&&n.defines.push("APPLY_CONTRAST"),h&&n.defines.push("APPLY_HUE"),f&&n.defines.push("APPLY_SATURATION"),p&&n.defines.push("APPLY_GAMMA"),m&&n.defines.push("APPLY_ALPHA"),_&&n.defines.push("APPLY_DAY_NIGHT_ALPHA"),Z&&(n.defines.push("SHOW_REFLECTIVE_OCEAN"),e.defines.push("SHOW_REFLECTIVE_OCEAN")),y&&n.defines.push("SHOW_OCEAN_WAVES"),N&&n.defines.push("APPLY_COLOR_TO_ALPHA"),F&&(e.defines.push("UNDERGROUND_COLOR"),n.defines.push("UNDERGROUND_COLOR")),B&&(e.defines.push("TRANSLUCENT"),n.defines.push("TRANSLUCENT")),b&&(E?(e.defines.push("ENABLE_VERTEX_LIGHTING"),n.defines.push("ENABLE_VERTEX_LIGHTING")):(e.defines.push("ENABLE_DAYNIGHT_SHADING"),n.defines.push("ENABLE_DAYNIGHT_SHADING"))),v&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),n.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),A&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"),n.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"))),T&&(e.defines.push("GROUND_ATMOSPHERE"),n.defines.push("GROUND_ATMOSPHERE"),w&&(e.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"),n.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"))),e.defines.push("INCLUDE_WEB_MERCATOR_Y"),n.defines.push("INCLUDE_WEB_MERCATOR_Y"),C&&(e.defines.push("FOG"),n.defines.push("FOG")),g&&n.defines.push("APPLY_SPLIT"),x&&n.defines.push("ENABLE_CLIPPING_PLANES"),O&&n.defines.push("COLOR_CORRECT"),L&&n.defines.push("HIGHLIGHT_FILL_TILE"),M&&e.defines.push("GEODETIC_SURFACE_NORMALS"),R&&e.defines.push("EXAGGERATION");let i="    vec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend)\n    {\n        vec4 color = initialColor;\n";D&&(i+="        vec4 cutoutAndColorResult;\n        bool texelUnclipped;\n");for(let e=0;e<o;++e)i+=D?`        cutoutAndColorResult = u_dayTextureCutoutRectangles[${e}];\n        texelUnclipped = v_textureCoordinates.x < cutoutAndColorResult.x || cutoutAndColorResult.z < v_textureCoordinates.x || v_textureCoordinates.y < cutoutAndColorResult.y || cutoutAndColorResult.w < v_textureCoordinates.y;\n        cutoutAndColorResult = sampleAndBlend(\n`:"        color = sampleAndBlend(\n",i+=`            color,\n            u_dayTextures[${e}],\n            u_dayTextureUseWebMercatorT[${e}] ? textureCoordinates.xz : textureCoordinates.xy,\n            u_dayTextureTexCoordsRectangle[${e}],\n            u_dayTextureTranslationAndScale[${e}],\n            ${m?`u_dayTextureAlpha[${e}]`:"1.0"},\n            ${_?`u_dayTextureNightAlpha[${e}]`:"1.0"},\n${_?`u_dayTextureDayAlpha[${e}]`:"1.0"},\n${u?`u_dayTextureBrightness[${e}]`:"0.0"},\n            ${d?`u_dayTextureContrast[${e}]`:"0.0"},\n            ${h?`u_dayTextureHue[${e}]`:"0.0"},\n            ${f?`u_dayTextureSaturation[${e}]`:"0.0"},\n            ${p?`u_dayTextureOneOverGamma[${e}]`:"0.0"},\n            ${g?`u_dayTextureSplit[${e}]`:"0.0"},\n            ${N?`u_colorsToAlpha[${e}]`:"vec4(0.0)"},\n        nightBlend        );\n`,D&&(i+="        color = czm_branchFreeTernary(texelUnclipped, cutoutAndColorResult, color);\n");i+="        return color;\n    }",n.sources.push(i),e.sources.push(function(e){let t;switch(e){case c.Z.SCENE3D:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPosition3DMode(position, height, textureCoordinates); }";break;case c.Z.SCENE2D:case c.Z.COLUMBUS_VIEW:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionColumbusViewMode(position, height, textureCoordinates); }";break;case c.Z.MORPHING:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionMorphingMode(position, height, textureCoordinates); }"}return t}(W)),e.sources.push(function(e){return e?"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DMercatorYPositionFraction(textureCoordinates); }":"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DGeographicYPositionFraction(textureCoordinates); }"}(S));const r=s.Z.fromCache({context:t.context,vertexShaderSource:e,fragmentShaderSource:n,attributeLocations:V.getAttributeLocations()});X=J[q]=new l(o,q,this.material,r,Y)}return n.surfaceShader=X,X.shaderProgram},u.prototype.destroy=function(){let e,t;const n=this._shadersByTexturesFlags;for(const o in n)if(n.hasOwnProperty(o)){const r=n[o];if(!(0,i.Z)(r))continue;for(e in r)r.hasOwnProperty(e)&&(t=r[e],(0,i.Z)(t)&&t.shaderProgram.destroy())}return(0,o.Z)(this)};const d=u},59707:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var i=n(762031),o=n(660904),r=n(798336),s=n(532056),a=n(11020),c=n(342209),l=n(998537),u=n(430886),d=n(638601),h=n(161648),f=n(338212),p=n(293685),m=n(502954),_=n(709366),g=n(379593),Z=n(915323),y=n(545870),b=n(497730),v=n(609882),A=n(442429),T=n(55248),w=n(49940),E=n(858371),S=n(544930),C=n(715372),x=n(714233),I=n(388973);function P(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new r.Z(0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new o.Z,this.boundingVolumeSourceTile=void 0,this.boundingVolumeIsFromMesh=!1,this.terrainState=I.Z.UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new i.Z,this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}Object.defineProperties(P.prototype,{eligibleForUnloading:{get:function(){const e=this.terrainState;let t=!(e===I.Z.RECEIVING||e===I.Z.TRANSFORMING);const n=this.imagery;for(let e=0,i=n.length;t&&e<i;++e){const i=n[e];t=!(0,a.Z)(i.loadingImagery)||i.loadingImagery.state!==S.Z.TRANSITIONING}return t}},renderedMesh:{get:function(){return(0,a.Z)(this.vertexArray)?this.mesh:(0,a.Z)(this.fill)?this.fill.mesh:void 0}}});const D=new s.Z;function O(e,t,n,i,r,s){let c=e.getExaggeratedPosition(i,r,s);if((0,a.Z)(t)&&t!==x.Z.SCENE3D){const e=n.ellipsoid.cartesianToCartographic(c,D);c=n.project(e,s),c=o.Z.fromElements(c.z,c.x,c.y,s)}return c}const L=new o.Z,N=new o.Z,M=new o.Z;function R(e,t,n,i){const o=e.renderedMesh,r=o.vertices,s=o.encoding,a=r.length/s.stride;let c=m.Z.clone(s);c.hasGeodeticSurfaceNormals=t,c=m.Z.clone(c);const l=c.stride,u=new Float32Array(a*l);t?s.addGeodeticSurfaceNormals(r,u,n):s.removeGeodeticSurfaceNormals(r,u),o.vertices=u,o.stride=l,o!==e.mesh?(P._freeVertexArray(e.fill.vertexArray),e.fill.vertexArray=P._createVertexArrayForMesh(i.context,o)):(P._freeVertexArray(e.vertexArray),e.vertexArray=P._createVertexArrayForMesh(i.context,o)),P._freeVertexArray(e.wireframeVertexArray),e.wireframeVertexArray=void 0}P.prototype.pick=function(e,t,n,i,o){const r=this.renderedMesh;if(!(0,a.Z)(r))return;const s=r.vertices,c=r.indices,u=r.encoding,h=c.length;let f=Number.MAX_VALUE;for(let o=0;o<h;o+=3){const r=c[o],d=c[o+1],h=c[o+2],p=O(u,t,n,s,r,L),m=O(u,t,n,s,d,N),_=O(u,t,n,s,h,M),g=l.Z.rayTriangleParametric(e,p,m,_,i);(0,a.Z)(g)&&g<f&&g>=0&&(f=g)}return f!==Number.MAX_VALUE?d.Z.getPoint(e,f,o):void 0},P.prototype.freeResources=function(){(0,a.Z)(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=I.Z.UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();const e=this.imagery;for(let t=0,n=e.length;t<n;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()},P.prototype.freeVertexArray=function(){P._freeVertexArray(this.vertexArray),this.vertexArray=void 0,P._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0},P.initialize=function(e,t,n){let i=e.data;(0,a.Z)(i)||(i=e.data=new P),e.state===C.Z.START&&(function(e,t,n){let i=t.getTileDataAvailable(e.x,e.y,e.level);if(!(0,a.Z)(i)&&(0,a.Z)(e.parent)){const t=e.parent,n=t.data;(0,a.Z)(n)&&(0,a.Z)(n.terrainData)&&(i=n.terrainData.isChildAvailable(t.x,t.y,e.x,e.y))}!1===i&&(e.data.terrainState=I.Z.FAILED);for(let i=0,o=n.length;i<o;++i){const o=n.get(i);o.show&&o._createTileImagerySkeletons(e,t)}}(e,t,n),e.state=C.Z.LOADING)},P.processStateMachine=function(e,t,n,i,o,s,c){P.initialize(e,n,i);const l=e.data;if(e.state===C.Z.LOADING&&function(e,t,n,i,o,s){const c=e.data,l=e.parent;if(c.terrainState===I.Z.FAILED&&void 0!==l&&(void 0!==l.data&&void 0!==l.data.terrainData&&!1!==l.data.terrainData.canUpsample||P.processStateMachine(l,t,n,i,o,s,!0)),c.terrainState===I.Z.FAILED&&function(e,t,n,i,o,r,s){const c=t.parent;if(!c)return void(t.state=C.Z.FAILED);const l=c.data.terrainData,u=c.x,d=c.y,h=c.level;if(!(0,a.Z)(l))return;const f=l.upsample(i.tilingScheme,u,d,h,o,r,s);(0,a.Z)(f)&&(e.terrainState=I.Z.RECEIVING,Promise.resolve(f).then((function(t){e.terrainData=t,e.terrainState=I.Z.RECEIVED})).catch((function(){e.terrainState=I.Z.FAILED})))}(c,e,0,n,e.x,e.y,e.level),c.terrainState===I.Z.UNLOADED&&function(e,t,n,i,o){function r(){const s=new h.Z({throttle:!1,throttleByServer:!0,type:p.Z.TERRAIN});e.request=s;const c=t.requestTileGeometry(n,i,o,s);(0,a.Z)(c)?(e.terrainState=I.Z.RECEIVING,Promise.resolve(c).then((function(t){!function(t){e.terrainData=t,e.terrainState=I.Z.RECEIVED,e.request=void 0}(t)})).catch((function(s){!function(s){if(e.request.state===f.Z.CANCELLED)return e.terrainData=void 0,e.terrainState=I.Z.UNLOADED,void(e.request=void 0);e.terrainState=I.Z.FAILED,e.request=void 0;const a=`Failed to obtain terrain tile X: ${n} Y: ${i} Level: ${o}. Error message: "${s}"`;t._requestError=_.Z.reportError(t._requestError,t,t.errorEvent,a,n,i,o),t._requestError.retry&&r()}(s)}))):(e.terrainState=I.Z.UNLOADED,e.request=void 0)}r()}(c,n,e.x,e.y,e.level),c.terrainState===I.Z.RECEIVED&&function(e,t,n,i,o,r){const s=n.tilingScheme,c=F;c.tilingScheme=s,c.x=i,c.y=o,c.level=r,c.exaggeration=t.terrainExaggeration,c.exaggerationRelativeHeight=t.terrainExaggerationRelativeHeight,c.throttle=!0;const l=e.terrainData.createMesh(c);(0,a.Z)(l)&&(e.terrainState=I.Z.TRANSFORMING,Promise.resolve(l).then((function(t){e.mesh=t,e.terrainState=I.Z.TRANSFORMED})).catch((function(){e.terrainState=I.Z.FAILED})))}(c,t,n,e.x,e.y,e.level),c.terrainState===I.Z.TRANSFORMED&&(function(e,t,n,i,o,r,s){e.vertexArray=P._createVertexArrayForMesh(t,e.mesh),e.terrainState=I.Z.READY,e.fill=e.fill&&e.fill.destroy(s)}(c,t.context,0,e.x,e.y,e.level,s),c.updateExaggeration(e,t,o)),c.terrainState>=I.Z.RECEIVED&&void 0===c.waterMaskTexture&&n.hasWaterMask)if(void 0!==c.terrainData.waterMask)!function(e,t){const n=t.terrainData.waterMask,i=function(e){let t=e.cache.tile_waterMaskData;if(!(0,a.Z)(t)){const n=v.Z.create({context:e,pixelFormat:u.Z.LUMINANCE,pixelDatatype:y.Z.UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});n.referenceCount=1,t={allWaterTexture:n,sampler:new b.Z({wrapS:w.Z.CLAMP_TO_EDGE,wrapT:w.Z.CLAMP_TO_EDGE,minificationFilter:T.Z.LINEAR,magnificationFilter:A.Z.LINEAR}),destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}(e);let o;const s=n.length;if(1===s){if(0===n[0])return;o=i.allWaterTexture}else{const t=Math.sqrt(s);o=v.Z.create({context:e,pixelFormat:u.Z.LUMINANCE,pixelDatatype:y.Z.UNSIGNED_BYTE,source:{width:t,height:t,arrayBufferView:n},sampler:i.sampler,flipY:!1}),o.referenceCount=0}++o.referenceCount,t.waterMaskTexture=o,r.Z.fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}(t.context,c);else{const t=c._findAncestorTileWithTerrainData(e);(0,a.Z)(t)&&(0,a.Z)(t.data.waterMaskTexture)&&(c.waterMaskTexture=t.data.waterMaskTexture,++c.waterMaskTexture.referenceCount,c._computeWaterMaskTranslationAndScale(e,t,c.waterMaskTranslationAndScale))}}(e,t,n,i,o,s),c)return;const d=e.renderable;e.renderable=(0,a.Z)(l.vertexArray);const m=l.terrainState===I.Z.READY;e.upsampledFromParent=(0,a.Z)(l.terrainData)&&l.terrainData.wasCreatedByUpsampling();const g=l.processImagery(e,n,t);if(m&&g){const t=e._loadedCallbacks,n={};for(const i in t)t.hasOwnProperty(i)&&(t[i](e)||(n[i]=t[i]));e._loadedCallbacks=n,e.state=C.Z.DONE}d&&(e.renderable=!0)},P.prototype.processImagery=function(e,t,n,i){const o=e.data;let r=e.upsampledFromParent,s=!1,c=!0;const l=o.imagery;let u,d;for(u=0,d=l.length;u<d;++u){const o=l[u];if(!(0,a.Z)(o.loadingImagery)){r=!1;continue}if(o.loadingImagery.state===S.Z.PLACEHOLDER){const n=o.loadingImagery.imageryLayer,i=n.imageryProvider;if(n.ready&&((0,a.Z)(i._ready)?i._ready:!(0,a.Z)(i.ready)||i.ready)){o.freeResources(),l.splice(u,1),n._createTileImagerySkeletons(e,t,u),--u,d=l.length;continue}r=!1}const h=o.processStateMachine(e,n,i);c=c&&h,s=s||h||(0,a.Z)(o.readyImagery),r=r&&(0,a.Z)(o.loadingImagery)&&(o.loadingImagery.state===S.Z.FAILED||o.loadingImagery.state===S.Z.INVALID)}return e.upsampledFromParent=r,e.renderable=e.renderable&&(s||c),c},P.prototype.addGeodeticSurfaceNormals=function(e,t){R(this,!0,e,t)},P.prototype.removeGeodeticSurfaceNormals=function(e){R(this,!1,void 0,e)},P.prototype.updateExaggeration=function(e,t,n){const i=this,o=i.renderedMesh;if(void 0===o)return;const r=t.terrainExaggeration,s=t.terrainExaggerationRelativeHeight,a=1!==r,c=o.encoding,l=c.exaggeration!==r,u=c.exaggerationRelativeHeight!==s;if(l||u){if(l)if(a&&!c.hasGeodeticSurfaceNormals){const n=e.tilingScheme.ellipsoid;i.addGeodeticSurfaceNormals(n,t)}else!a&&c.hasGeodeticSurfaceNormals&&i.removeGeodeticSurfaceNormals(t);if(c.exaggeration=r,c.exaggerationRelativeHeight=s,void 0!==n){n._tileToUpdateHeights.push(e);const t=e.customData,i=t.length;for(let e=0;e<i;e++)t[e].level=-1}}};const F={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0,throttle:!0};P._createVertexArrayForMesh=function(e,t){const n=t.vertices,i=g.Z.createVertexBuffer({context:e,typedArray:n,usage:Z.Z.STATIC_DRAW}),o=t.encoding.getAttributes(i),r=t.indices.indexBuffers||{};let s=r[e.id];if(!(0,a.Z)(s)||s.isDestroyed()){const n=t.indices;s=g.Z.createIndexBuffer({context:e,typedArray:n,usage:Z.Z.STATIC_DRAW,indexDatatype:c.Z.fromSizeInBytes(n.BYTES_PER_ELEMENT)}),s.vertexArrayDestroyable=!1,s.referenceCount=1,r[e.id]=s,t.indices.indexBuffers=r}else++s.referenceCount;return new E.Z({context:e,attributes:o,indexBuffer:s})},P._freeVertexArray=function(e){if((0,a.Z)(e)){const t=e.indexBuffer;e.isDestroyed()||e.destroy(),(0,a.Z)(t)&&!t.isDestroyed()&&(0,a.Z)(t.referenceCount)&&(--t.referenceCount,0===t.referenceCount&&t.destroy())}},P.prototype._findAncestorTileWithTerrainData=function(e){let t=e.parent;for(;(0,a.Z)(t)&&(!(0,a.Z)(t.data)||!(0,a.Z)(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling());)t=t.parent;return t},P.prototype._computeWaterMaskTranslationAndScale=function(e,t,n){const i=t.rectangle,o=e.rectangle,r=o.width,s=o.height,a=r/i.width,c=s/i.height;return n.x=a*(o.west-i.west)/r,n.y=c*(o.south-i.south)/s,n.z=a,n.w=c,n};const B=P},208311:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Fe});var i=n(762031),o=n(77305),r=n(405254),s=n(660904),a=n(798336),c=n(532056),l=n(823438),u=n(35961),d=n(376213),h=n(394579),f=n(234146),p=n(11020),m=n(722313),_=n(765153),g=n(282910),Z=n(156905),y=n(5450),b=n(342209),v=n(101496),A=n(344485),T=n(659635),w=n(485662),E=n(237247),S=n(223689),C=n(804868),x=n(143450),I=n(252054),P=n(497286),D=n(155772),O=n(140874),L=n(709855),N=n(379593),M=n(915323),R=n(591477),F=n(661679),B=n(431056),U=n(417148),k=n(858371),V=n(973591),H=n(753577),z=n(800640),G=n(59707),j=n(18929),W=n(544930),q=n(104763),Y=n(759398),X=n(715372),J=n(714233),Q=n(534890),$=n(228714),K=n(388973),ee=n(473493),te=n(565760);function ne(e){if(!(0,p.Z)(e))throw new _.Z("options is required.");if(!(0,p.Z)(e.terrainProvider))throw new _.Z("options.terrainProvider is required.");if(!(0,p.Z)(e.imageryLayers))throw new _.Z("options.imageryLayers is required.");if(!(0,p.Z)(e.surfaceShaderSet))throw new _.Z("options.surfaceShaderSet is required.");this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this.enableLighting=!1,this.dynamicAtmosphereLighting=!1,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!1,this.shadows=Q.Z.RECEIVE_ONLY,this.vertexShadowDarkness=.3,this.fillHighlightColor=void 0,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.showSkirts=!0,this.backFaceCulling=!0,this.undergroundColor=void 0,this.undergroundColorAlphaByDistance=void 0,this.lambertDiffuseMultiplier=0,this.materialUniformMap=void 0,this._materialUniformMap=void 0,this._quadtree=void 0,this._terrainProvider=e.terrainProvider,this._imageryLayers=e.imageryLayers,this._surfaceShaderSet=e.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._disableCullingRenderState=void 0,this._disableCullingBlendRenderState=void 0,this._errorEvent=new g.Z,this._removeLayerAddedListener=this._imageryLayers.layerAdded.addEventListener(ne.prototype._onLayerAdded,this),this._removeLayerRemovedListener=this._imageryLayers.layerRemoved.addEventListener(ne.prototype._onLayerRemoved,this),this._removeLayerMovedListener=this._imageryLayers.layerMoved.addEventListener(ne.prototype._onLayerMoved,this),this._removeLayerShownListener=this._imageryLayers.layerShownOrHidden.addEventListener(ne.prototype._onLayerShownOrHidden,this),this._imageryLayersUpdatedEvent=new g.Z,this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._vertexArraysToDestroy=[],this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new u.Z(0,0,.5,1),this._clippingPlanes=void 0,this.cartographicLimitRectangle=x.Z.clone(x.Z.MAX_VALUE),this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1,this._oldTerrainExaggeration=void 0,this._oldTerrainExaggerationRelativeHeight=void 0}function ie(e,t){let n=e.loadingImagery;(0,p.Z)(n)||(n=e.readyImagery);let i=t.loadingImagery;return(0,p.Z)(i)||(i=t.readyImagery),n.imageryLayer._layerIndex-i.imageryLayer._layerIndex}function oe(e,t){const n=t.globeTranslucencyState;if(n.translucent){const i=e.renderState.blending.enabled;n.pushDerivedCommands(e,i,t)}else t.commandList.push(e)}Object.defineProperties(ne.prototype,{baseColor:{get:function(){return this._baseColor},set:function(e){if(!(0,p.Z)(e))throw new _.Z("value is required.");this._baseColor=e,this._firstPassInitialColor=a.Z.fromColor(e,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(e){if(!(0,p.Z)(e))throw new _.Z("value is required.");this._quadtree=e}},ready:{get:function(){const e=this._terrainProvider;if(!(0,p.Z)(e)||((0,p.Z)(e._ready)?!e._ready:(0,p.Z)(e.ready)&&!e.ready))return!1;if(0===this._imageryLayers.length)return!0;const t=this._imageryLayers.get(0);if(!t.ready)return!1;const n=t.imageryProvider;return(0,p.Z)(n._ready)?n._ready:!(0,p.Z)(n.ready)||n.ready}},tilingScheme:{get:function(){return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},imageryLayersUpdatedEvent:{get:function(){return this._imageryLayersUpdatedEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){this._terrainProvider!==e&&(this._terrainProvider=e,(0,p.Z)(this._quadtree)&&this._quadtree.invalidateAllTiles())}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){H.Z.setOwner(e,this,"_clippingPlanes")}}}),ne.prototype.update=function(e){this._imageryLayers._update()},ne.prototype.initialize=function(e){this._imageryLayers.queueReprojectionCommands(e),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile((function(e){e.data.imagery.sort(ie)}))),function(e,t){const n=t.creditDisplay,i=e._terrainProvider;(0,p.Z)(i)&&((0,p.Z)(i._ready)?i._ready:!(0,p.Z)(i.ready)||i.ready)&&(0,p.Z)(i.credit)&&n.addCreditToNextFrame(i.credit);const o=e._imageryLayers;for(let e=0,t=o.length;e<t;++e){const t=o.get(e);if(t.ready){const e=t.imageryProvider;((0,p.Z)(e._ready)?e._ready:!(0,p.Z)(e.ready)||e.ready)&&(0,p.Z)(t.imageryProvider.credit)&&n.addCreditToNextFrame(t.imageryProvider.credit)}}}(this,e);const t=this._vertexArraysToDestroy,n=t.length;for(let e=0;e<n;++e)G.Z._freeVertexArray(t[e]);t.length=0},ne.prototype.beginUpdate=function(e){const t=this._tilesToRenderByTextureCount;for(let e=0,n=t.length;e<n;++e){const n=t[e];(0,p.Z)(n)&&(n.length=0)}const n=this._clippingPlanes;(0,p.Z)(n)&&n.enabled&&n.update(e),this._usedDrawCommands=0,this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1},ne.prototype.endUpdate=function(e){if(!(0,p.Z)(this._renderState)){this._renderState=U.Z.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:z.Z.LESS}}),this._blendRenderState=U.Z.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:z.Z.LESS_OR_EQUAL},blending:V.Z.ALPHA_BLEND});let e=(0,l.Z)(this._renderState,!0);e.cull.enabled=!1,this._disableCullingRenderState=U.Z.fromCache(e),e=(0,l.Z)(this._blendRenderState,!0),e.cull.enabled=!1,this._disableCullingBlendRenderState=U.Z.fromCache(e)}this._hasFillTilesThisFrame&&this._hasLoadedTilesThisFrame&&$.Z.updateFillTiles(this,this._quadtree._tilesToRender,e,this._vertexArraysToDestroy);const t=this.quadtree,n=e.terrainExaggeration,i=e.terrainExaggerationRelativeHeight,o=this._oldTerrainExaggeration!==n||this._oldTerrainExaggerationRelativeHeight!==i;this._oldTerrainExaggeration=n,this._oldTerrainExaggerationRelativeHeight=i,o&&t.forEachLoadedTile((function(n){n.data.updateExaggeration(n,e,t)}));const r=this._tilesToRenderByTextureCount;for(let t=0,n=r.length;t<n;++t){const n=r[t];if((0,p.Z)(n))for(let t=0,i=n.length;t<i;++t){const i=n[t],o=i.data.tileBoundingRegion;Re(this,i,e),e.minimumTerrainHeight=Math.min(e.minimumTerrainHeight,o.minimumHeight)}}},ne.prototype.updateForPick=function(e){const t=this._drawCommands;for(let n=0,i=this._usedDrawCommands;n<i;++n)oe(t[n],e)},ne.prototype.cancelReprojections=function(){this._imageryLayers.cancelReprojections()},ne.prototype.getLevelMaximumGeometricError=function(e){return(0,p.Z)(this._terrainProvider)?this._terrainProvider.getLevelMaximumGeometricError(e):0},ne.prototype.loadTile=function(e,t){let n,i=t.data,o=!0;(0,p.Z)(i)&&(o=i.boundingVolumeSourceTile!==t||t._lastSelectionResult===te.Z.CULLED_BUT_NEEDED,n=i.terrainState),G.Z.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,o),i=t.data,o&&n!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)!==O.Z.NONE&&i.boundingVolumeSourceTile===t&&(o=!1,G.Z.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,o))};const re=new i.Z,se=new x.Z,ae=new x.Z,ce=new c.Z;function le(e,t){if(t.west<t.east)return t;const n=x.Z.clone(t,ae);return x.Z.center(e,ce).longitude>0?n.east=A.Z.PI:n.west=-A.Z.PI,n}function ue(e,t){if(t.cameraUnderground)return!0;if(t.globeTranslucencyState.translucent)return!0;if(e.backFaceCulling)return!1;const n=e._clippingPlanes;return!(!(0,p.Z)(n)||!n.enabled)||!x.Z.equals(e.cartographicLimitRectangle,x.Z.MAX_VALUE)}ne.prototype.computeTileVisibility=function(e,t,n){const o=this.computeDistanceToTile(e,t);e._distance=o;const r=ue(this,t);if(t.fog.enabled&&!r&&A.Z.fog(o,t.fog.density)>=1)return O.Z.NONE;const a=e.data,c=a.tileBoundingRegion;if(void 0===a.boundingVolumeSourceTile)return O.Z.PARTIAL;const l=t.cullingVolume;let u=c.boundingVolume;(0,p.Z)(u)||(u=c.boundingSphere),a.clippedByBoundaries=!1;const d=le(e.rectangle,this.cartographicLimitRectangle),h=x.Z.simpleIntersection(d,e.rectangle,se);if(!(0,p.Z)(h))return O.Z.NONE;if(x.Z.equals(h,e.rectangle)||(a.clippedByBoundaries=!0),t.mode!==J.Z.SCENE3D&&(u=re,i.Z.fromRectangleWithHeights2D(e.rectangle,t.mapProjection,c.minimumHeight,c.maximumHeight,u),s.Z.fromElements(u.center.z,u.center.x,u.center.y,u.center),t.mode===J.Z.MORPHING&&(0,p.Z)(a.renderedMesh)&&(u=i.Z.union(c.boundingSphere,u,u))),!(0,p.Z)(u))return O.Z.PARTIAL;const f=this._clippingPlanes;if((0,p.Z)(f)&&f.enabled){const t=f.computeIntersectionWithBoundingVolume(u);if(e.isClipped=t!==v.Z.INSIDE,t===v.Z.OUTSIDE)return O.Z.NONE}let m;const _=l.computeVisibility(u);if(_===v.Z.OUTSIDE?m=O.Z.NONE:_===v.Z.INTERSECTING?m=O.Z.PARTIAL:_===v.Z.INSIDE&&(m=O.Z.FULL),m===O.Z.NONE)return m;const g=t.mode===J.Z.SCENE3D&&t.camera.frustum instanceof S.Z;if(t.mode===J.Z.SCENE3D&&!g&&(0,p.Z)(n)&&!r){const e=a.occludeePointInScaledSpace;return(0,p.Z)(e)?n.ellipsoid.isScaledSpacePointVisiblePossiblyUnderEllipsoid(e,c.minimumHeight)?m:O.Z.NONE:m}return m},ne.prototype.canRefine=function(e){return!!(0,p.Z)(e.data.terrainData)||void 0!==this.terrainProvider.getTileDataAvailable(2*e.x,2*e.y,e.level+1)};const de=[],he=[];ne.prototype.canRenderWithoutLosingDetail=function(e,t){const n=e.data,i=de;i.length=this._imageryLayers.length;let o,r,s,a=!1,c=!1;for((0,p.Z)(n)&&(a=n.terrainState===K.Z.READY,c=!0,o=n.imagery),r=0,s=i.length;r<s;++r)i[r]=c;if((0,p.Z)(o))for(r=0,s=o.length;r<s;++r){const e=o[r],t=e.loadingImagery,n=!(0,p.Z)(t)||t.state===W.Z.FAILED||t.state===W.Z.INVALID,s=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;i[s]=n&&i[s]}const l=this.quadtree._lastSelectionFrameNumber,u=he;for(u.length=0,u.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);u.length>0;){const e=u.pop(),t=e._lastSelectionResultFrame===l?e._lastSelectionResult:te.Z.NONE;if(t===te.Z.RENDERED){const t=e.data;if(!(0,p.Z)(t))continue;if(!a&&e.data.terrainState===K.Z.READY)return!1;const n=e.data.imagery;for(r=0,s=n.length;r<s;++r){const e=n[r],t=e.loadingImagery,o=!(0,p.Z)(t)||t.state===W.Z.FAILED||t.state===W.Z.INVALID,s=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;if(o&&!i[s])return!1}}else t===te.Z.REFINED&&u.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild)}return!0};const fe=new s.Z;ne.prototype.computeTileLoadPriority=function(e,t){const n=e.data;if(void 0===n)return 0;const i=n.tileBoundingRegion.boundingVolume;if(void 0===i)return 0;const o=t.camera.positionWC,r=t.camera.directionWC,a=s.Z.subtract(i.center,o,fe),c=s.Z.magnitude(a);return c<A.Z.EPSILON5?0:(s.Z.divideByScalar(a,c,a),(1-s.Z.dot(a,r))*e._distance)};const pe=new T.Z,me=new T.Z,_e=new a.Z,ge=new a.Z,Ze=new a.Z,ye=new s.Z,be=new s.Z,ve=new s.Z,Ae=new s.Z;ne.prototype.showTileThisFrame=function(e,t){let n=0;const i=e.data.imagery;for(let e=0,t=i.length;e<t;++e){const t=i[e];(0,p.Z)(t.readyImagery)&&0!==t.readyImagery.imageryLayer.alpha&&++n}let o=this._tilesToRenderByTextureCount[n];(0,p.Z)(o)||(o=[],this._tilesToRenderByTextureCount[n]=o),o.push(e);const r=e.data;(0,p.Z)(r.vertexArray)?this._hasLoadedTilesThisFrame=!0:this._hasFillTilesThisFrame=!0;const s=this._debug;++s.tilesRendered,s.texturesRendered+=n};const Te=[new s.Z,new s.Z,new s.Z,new s.Z];function we(e,t,n,i,o,r){const a=e.quadtree._occluders.ellipsoid,c=a.ellipsoid,l=Te;return s.Z.fromRadians(n.west,n.south,o,c,l[0]),s.Z.fromRadians(n.east,n.south,o,c,l[1]),s.Z.fromRadians(n.west,n.north,o,c,l[2]),s.Z.fromRadians(n.east,n.north,o,c,l[3]),a.computeHorizonCullingPointPossiblyUnderEllipsoid(t,l,i,r)}ne.prototype.computeDistanceToTile=function(e,t){!function(e,t,n){let o=e.data;void 0===o&&(o=e.data=new G.Z);const r=e.tilingScheme.ellipsoid;void 0===o.tileBoundingRegion&&(o.tileBoundingRegion=new ee.Z({computeBoundingVolumes:!1,rectangle:e.rectangle,ellipsoid:r,minimumHeight:0,maximumHeight:0}));const a=o.tileBoundingRegion,c=a.minimumHeight,l=a.maximumHeight;let u=!1,d=e;const h=o.mesh,f=o.terrainData;if(void 0!==h&&void 0!==h.minimumHeight&&void 0!==h.maximumHeight)a.minimumHeight=h.minimumHeight,a.maximumHeight=h.maximumHeight,u=!0;else if(void 0!==f&&void 0!==f._minimumHeight&&void 0!==f._maximumHeight)a.minimumHeight=f._minimumHeight,a.maximumHeight=f._maximumHeight;else{a.minimumHeight=Number.NaN,a.maximumHeight=Number.NaN;let t=e.parent;for(;void 0!==t;){const e=t.data;if(void 0!==e){const t=e.mesh,n=e.terrainData;if(void 0!==t&&void 0!==t.minimumHeight&&void 0!==t.maximumHeight){a.minimumHeight=t.minimumHeight,a.maximumHeight=t.maximumHeight;break}if(void 0!==n&&void 0!==n._minimumHeight&&void 0!==n._maximumHeight){a.minimumHeight=n._minimumHeight,a.maximumHeight=n._maximumHeight;break}}t=t.parent}d=t}if(void 0!==d){const f=n.terrainExaggeration,m=n.terrainExaggerationRelativeHeight;if(1!==f&&(u=!1,a.minimumHeight=P.Z.getHeight(a.minimumHeight,f,m),a.maximumHeight=P.Z.getHeight(a.maximumHeight,f,m)),u)o.boundingVolumeIsFromMesh||(a._orientedBoundingBox=E.Z.clone(h.orientedBoundingBox,a._orientedBoundingBox),a._boundingSphere=i.Z.clone(h.boundingSphere3D,a._boundingSphere),o.occludeePointInScaledSpace=s.Z.clone(h.occludeePointInScaledSpace,o.occludeePointInScaledSpace),(0,p.Z)(o.occludeePointInScaledSpace)||(o.occludeePointInScaledSpace=we(t,a._orientedBoundingBox.center,e.rectangle,a.minimumHeight,a.maximumHeight,o.occludeePointInScaledSpace)));else{const n=void 0===a._orientedBoundingBox||void 0===a._boundingSphere;(a.minimumHeight!==c||a.maximumHeight!==l||n)&&(a.computeBoundingVolumes(r),o.occludeePointInScaledSpace=we(t,a._orientedBoundingBox.center,e.rectangle,a.minimumHeight,a.maximumHeight,o.occludeePointInScaledSpace))}o.boundingVolumeSourceTile=d,o.boundingVolumeIsFromMesh=u}else o.boundingVolumeSourceTile=void 0,o.boundingVolumeIsFromMesh=!1}(e,this,t);const n=e.data;if(void 0===n.boundingVolumeSourceTile)return 9999999999;const o=n.tileBoundingRegion,r=o.minimumHeight,a=o.maximumHeight;if(n.boundingVolumeSourceTile!==e){const e=t.camera.positionCartographic.height;Math.abs(e-r)>Math.abs(e-a)?(o.minimumHeight=r,o.maximumHeight=r):(o.minimumHeight=a,o.maximumHeight=a)}const c=o.distanceToCamera(t);return o.minimumHeight=r,o.maximumHeight=a,c},ne.prototype.isDestroyed=function(){return!1},ne.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._removeLayerAddedListener=this._removeLayerAddedListener&&this._removeLayerAddedListener(),this._removeLayerRemovedListener=this._removeLayerRemovedListener&&this._removeLayerRemovedListener(),this._removeLayerMovedListener=this._removeLayerMovedListener&&this._removeLayerMovedListener(),this._removeLayerShownListener=this._removeLayerShownListener&&this._removeLayerShownListener(),(0,m.Z)(this)},ne.prototype._onLayerAdded=function(e,t){if(!this.isDestroyed()&&e.show){const t=this._terrainProvider,n=this,i=this._imageryLayersUpdatedEvent,o=function(){e._imageryCache={},n._quadtree.forEachLoadedTile((function(n){if((0,p.Z)(n._loadedCallbacks[e._layerIndex]))return;let i;const o=n.data.imagery,r=o.length;let s=-1,a=0;for(i=0;i<r;++i){const t=o[i];if((0,f.Z)(t.readyImagery,t.loadingImagery).imageryLayer===e)-1===s&&(s=i),++a;else if(-1!==s)break}if(-1===s)return;const c=s+a;e._createTileImagerySkeletons(n,t,c)&&(n._loadedCallbacks[e._layerIndex]=function(e,t,n){return function(i){let o,r,s=-1;const a=i.data.imagery,c=a.length;let l;for(l=0;l<c;++l)if(o=a[l],r=(0,f.Z)(o.readyImagery,o.loadingImagery),r.imageryLayer===t){s=l;break}if(-1!==s){const c=s+e;if(o=a[c],r=(0,p.Z)(o)?(0,f.Z)(o.readyImagery,o.loadingImagery):void 0,!(0,p.Z)(r)||r.imageryLayer!==t)return!t._createTileImagerySkeletons(i,n,c);for(l=s;l<c;++l)a[l].freeResources();a.splice(s,e)}return!0}}(a,e,t),n.state=X.Z.LOADING)}))};e.ready&&(e.imageryProvider._reload=o),this._quadtree.forEachLoadedTile((function(i){e._createTileImagerySkeletons(i,t)&&(i.state=X.Z.LOADING,0===i.level||i._lastSelectionResultFrame===n.quadtree._lastSelectionFrameNumber&&i._lastSelectionResult===te.Z.RENDERED||(i.renderable=!1))})),this._layerOrderChanged=!0,i.raiseEvent()}},ne.prototype._onLayerRemoved=function(e,t){this._quadtree.forEachLoadedTile((function(t){const n=t.data.imagery;let i=-1,o=0;for(let t=0,r=n.length;t<r;++t){const r=n[t];let s=r.loadingImagery;if((0,p.Z)(s)||(s=r.readyImagery),s.imageryLayer===e)-1===i&&(i=t),r.freeResources(),++o;else if(-1!==i)break}-1!==i&&n.splice(i,o)})),(0,p.Z)(e.imageryProvider)&&(e.imageryProvider._reload=void 0),this._imageryLayersUpdatedEvent.raiseEvent()},ne.prototype._onLayerMoved=function(e,t,n){this._layerOrderChanged=!0,this._imageryLayersUpdatedEvent.raiseEvent()},ne.prototype._onLayerShownOrHidden=function(e,t,n){n?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)};const Ee=new T.Z,Se=new T.Z;function Ce(e,t){const n={u_initialColor:function(){return this.properties.initialColor},u_fillHighlightColor:function(){return this.properties.fillHighlightColor},u_zoomedOutOceanSpecularIntensity:function(){return this.properties.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.properties.oceanNormalMap},u_atmosphereLightIntensity:function(){return this.properties.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return this.properties.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return this.properties.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return this.properties.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return this.properties.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return this.properties.atmosphereMieAnisotropy},u_lightingFadeDistance:function(){return this.properties.lightingFadeDistance},u_nightFadeDistance:function(){return this.properties.nightFadeDistance},u_center3D:function(){return this.properties.center3D},u_terrainExaggerationAndRelativeHeight:function(){return this.properties.terrainExaggerationAndRelativeHeight},u_tileRectangle:function(){return this.properties.tileRectangle},u_modifiedModelView:function(){const t=e.context.uniformState.view,n=T.Z.multiplyByPoint(t,this.properties.rtc,be);return T.Z.setTranslation(t,n,pe),pe},u_modifiedModelViewProjection:function(){const t=e.context.uniformState.view,n=e.context.uniformState.projection,i=T.Z.multiplyByPoint(t,this.properties.rtc,be);return T.Z.setTranslation(t,i,me),T.Z.multiply(n,me,me),me},u_dayTextures:function(){return this.properties.dayTextures},u_dayTextureTranslationAndScale:function(){return this.properties.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.properties.dayTextureTexCoordsRectangle},u_dayTextureUseWebMercatorT:function(){return this.properties.dayTextureUseWebMercatorT},u_dayTextureAlpha:function(){return this.properties.dayTextureAlpha},u_dayTextureNightAlpha:function(){return this.properties.dayTextureNightAlpha},u_dayTextureDayAlpha:function(){return this.properties.dayTextureDayAlpha},u_dayTextureBrightness:function(){return this.properties.dayTextureBrightness},u_dayTextureContrast:function(){return this.properties.dayTextureContrast},u_dayTextureHue:function(){return this.properties.dayTextureHue},u_dayTextureSaturation:function(){return this.properties.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.properties.dayTextureOneOverGamma},u_dayIntensity:function(){return this.properties.dayIntensity},u_southAndNorthLatitude:function(){return this.properties.southAndNorthLatitude},u_southMercatorYAndOneOverHeight:function(){return this.properties.southMercatorYAndOneOverHeight},u_waterMask:function(){return this.properties.waterMask},u_waterMaskTranslationAndScale:function(){return this.properties.waterMaskTranslationAndScale},u_minMaxHeight:function(){return this.properties.minMaxHeight},u_scaleAndBias:function(){return this.properties.scaleAndBias},u_dayTextureSplit:function(){return this.properties.dayTextureSplit},u_dayTextureCutoutRectangles:function(){return this.properties.dayTextureCutoutRectangles},u_clippingPlanes:function(){const n=t._clippingPlanes;return(0,p.Z)(n)&&(0,p.Z)(n.texture)?n.texture:e.context.defaultTexture},u_cartographicLimitRectangle:function(){return this.properties.localizedCartographicLimitRectangle},u_clippingPlanesMatrix:function(){const n=t._clippingPlanes,i=(0,p.Z)(n)?T.Z.multiply(e.context.uniformState.view,n.modelMatrix,Ee):T.Z.IDENTITY;return T.Z.inverseTranspose(i,Se)},u_clippingPlanesEdgeStyle:function(){const e=this.properties.clippingPlanesEdgeColor;return e.alpha=this.properties.clippingPlanesEdgeWidth,e},u_minimumBrightness:function(){return e.fog.minimumBrightness},u_hsbShift:function(){return this.properties.hsbShift},u_colorsToAlpha:function(){return this.properties.colorsToAlpha},u_frontFaceAlphaByDistance:function(){return this.properties.frontFaceAlphaByDistance},u_backFaceAlphaByDistance:function(){return this.properties.backFaceAlphaByDistance},u_translucencyRectangle:function(){return this.properties.localizedTranslucencyRectangle},u_undergroundColor:function(){return this.properties.undergroundColor},u_undergroundColorAlphaByDistance:function(){return this.properties.undergroundColorAlphaByDistance},u_lambertDiffuseMultiplier:function(){return this.properties.lambertDiffuseMultiplier},u_vertexShadowDarkness:function(){return this.properties.vertexShadowDarkness},properties:{initialColor:new a.Z(0,0,.5,1),fillHighlightColor:new u.Z(0,0,0,0),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new r.Z(65e5,9e6),nightFadeDistance:new r.Z(1e7,4e7),atmosphereLightIntensity:10,atmosphereRayleighCoefficient:new s.Z(55e-7,13e-6,284e-7),atmosphereMieCoefficient:new s.Z(21e-6,21e-6,21e-6),atmosphereRayleighScaleHeight:1e4,atmosphereMieScaleHeight:3200,atmosphereMieAnisotropy:.9,hsbShift:new s.Z,center3D:void 0,rtc:new s.Z,modifiedModelView:new T.Z,tileRectangle:new a.Z,terrainExaggerationAndRelativeHeight:new r.Z(1,0),dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureUseWebMercatorT:[],dayTextureAlpha:[],dayTextureNightAlpha:[],dayTextureDayAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayTextureSplit:[],dayTextureCutoutRectangles:[],dayIntensity:0,colorsToAlpha:[],southAndNorthLatitude:new r.Z,southMercatorYAndOneOverHeight:new r.Z,waterMask:void 0,waterMaskTranslationAndScale:new a.Z,minMaxHeight:new r.Z,scaleAndBias:new T.Z,clippingPlanesEdgeColor:u.Z.clone(u.Z.WHITE),clippingPlanesEdgeWidth:0,localizedCartographicLimitRectangle:new a.Z,frontFaceAlphaByDistance:new a.Z,backFaceAlphaByDistance:new a.Z,localizedTranslucencyRectangle:new a.Z,undergroundColor:u.Z.clone(u.Z.TRANSPARENT),undergroundColorAlphaByDistance:new a.Z,lambertDiffuseMultiplier:0,vertexShadowDarkness:0}};return(0,p.Z)(t.materialUniformMap)?(0,h.Z)(n,t.materialUniformMap):n}function xe(e,t,n){const i=n.data;let o,r;if((0,p.Z)(i.vertexArray)?(o=i.mesh,r=i.vertexArray):(0,p.Z)(i.fill)&&(0,p.Z)(i.fill.vertexArray)&&(o=i.fill.mesh,r=i.fill.vertexArray),(0,p.Z)(o)&&(0,p.Z)(r)){if((0,p.Z)(i.wireframeVertexArray)){if(i.wireframeVertexArray.mesh===o)return;i.wireframeVertexArray.destroy(),i.wireframeVertexArray=void 0}i.wireframeVertexArray=function(e,t,n){const i={indices:n.indices,primitiveType:C.Z.TRIANGLES};y.Z.toWireframe(i);const o=i.indices,r=N.Z.createIndexBuffer({context:e,typedArray:o,usage:M.Z.STATIC_DRAW,indexDatatype:b.Z.fromSizeInBytes(o.BYTES_PER_ELEMENT)});return new k.Z({context:e,attributes:t._attributes,indexBuffer:r})}(e,r,o),i.wireframeVertexArray.mesh=o}}let Ie,Pe,De;!function(){const e=new Z.Z({geometry:o.Z.fromDimensions({dimensions:new s.Z(2,2,2)})}),t=new Z.Z({geometry:new I.Z({radius:1})});let n,i,r=new T.Z;function a(e){return new Y.Z({geometryInstances:e,appearance:new q.Z({translucent:!1,flat:!0}),asynchronous:!1})}Ie=function(t,o){return t===n||(De(),n=t,r=T.Z.fromRotationTranslation(t.halfAxes,t.center,r),e.modelMatrix=r,e.attributes.color=d.Z.fromColor(o),i=a(e)),i},Pe=function(e,o){return e===n||(De(),n=e,r=T.Z.fromTranslation(e.center,r),r=T.Z.multiplyByUniformScale(r,e.radius,r),t.modelMatrix=r,t.attributes.color=d.Z.fromColor(o),i=a(t)),i},De=function(){(0,p.Z)(i)&&(i.destroy(),i=void 0,n=void 0)}}();const Oe=new a.Z(0,0,0,0),Le={frameState:void 0,surfaceTile:void 0,numberOfDayTextures:void 0,applyBrightness:void 0,applyContrast:void 0,applyHue:void 0,applySaturation:void 0,applyGamma:void 0,applyAlpha:void 0,applyDayNightAlpha:void 0,applySplit:void 0,showReflectiveOcean:void 0,showOceanWaves:void 0,enableLighting:void 0,dynamicAtmosphereLighting:void 0,dynamicAtmosphereLightingFromSun:void 0,showGroundAtmosphere:void 0,perFragmentGroundAtmosphere:void 0,hasVertexNormals:void 0,useWebMercatorProjection:void 0,enableFog:void 0,enableClippingPlanes:void 0,clippingPlanes:void 0,clippedByBoundaries:void 0,hasImageryLayerCutout:void 0,colorCorrect:void 0,colorToAlpha:void 0,hasGeodeticSurfaceNormals:void 0,hasExaggeration:void 0},Ne=u.Z.TRANSPARENT,Me=new w.Z;function Re(e,t,n){const o=t.data;(0,p.Z)(o.vertexArray)||(void 0===o.fill&&(o.fill=new $.Z(t)),o.fill.update(e,n));const r=n.creditDisplay,c=o.terrainData;if((0,p.Z)(c)&&(0,p.Z)(c.credits)){const e=c.credits;for(let t=0,n=e.length;t<n;++t)r.addCreditToNextFrame(e[t])}let l=R.Z.maximumTextureImageUnits,d=o.waterMaskTexture,h=o.waterMaskTranslationAndScale;!(0,p.Z)(d)&&(0,p.Z)(o.fill)&&(d=o.fill.waterMaskTexture,h=o.fill.waterMaskTranslationAndScale);const m=n.cameraUnderground,g=n.globeTranslucencyState,Z=g.translucent,y=g.frontFaceAlphaByDistance,b=g.backFaceAlphaByDistance,v=g.rectangle,w=(0,f.Z)(e.undergroundColor,Ne),S=(0,f.Z)(e.undergroundColorAlphaByDistance,Me),I=ue(e,n)&&n.mode===J.Z.SCENE3D&&w.alpha>0&&(S.nearValue>0||S.farValue>0),P=e.lambertDiffuseMultiplier,O=e.vertexShadowDarkness,N=e.hasWaterMask&&(0,p.Z)(d),M=e.oceanNormalMap,U=N&&(0,p.Z)(M),k=e.terrainProvider,V=(0,p.Z)(k)&&((0,p.Z)(k._ready)?k._ready:!(0,p.Z)(k.ready)||k.ready)&&e.terrainProvider.hasVertexNormals,H=n.fog.enabled&&n.fog.renderable&&!m,z=e.showGroundAtmosphere&&n.mode===J.Z.SCENE3D,G=Q.Z.castShadows(e.shadows)&&!Z,W=Q.Z.receiveShadows(e.shadows)&&!Z,q=e.hueShift,Y=e.saturationShift,X=e.brightnessShift;let K=!(A.Z.equalsEpsilon(q,0,A.Z.EPSILON7)&&A.Z.equalsEpsilon(Y,0,A.Z.EPSILON7)&&A.Z.equalsEpsilon(X,0,A.Z.EPSILON7)),ee=!1;z&&(ee=s.Z.magnitude(n.camera.positionWC)>e.nightFadeOutDistance),N&&--l,U&&--l,(0,p.Z)(n.shadowState)&&n.shadowState.shadowsEnabled&&--l,(0,p.Z)(e.clippingPlanes)&&e.clippingPlanes.enabled&&--l,l-=g.numberOfTextureUniforms;const te=o.renderedMesh;let ne=te.center;const ie=te.encoding,re=o.tileBoundingRegion,ae=n.terrainExaggeration,ce=n.terrainExaggerationRelativeHeight,de=1!==ae,he=ie.hasGeodeticSurfaceNormals,fe=_e;let pe=0,me=0,be=0,Te=0,we=!1;if(n.mode!==J.Z.SCENE3D){const e=n.mapProjection,i=e.project(x.Z.southwest(t.rectangle),ve),o=e.project(x.Z.northeast(t.rectangle),Ae);if(fe.x=i.x,fe.y=i.y,fe.z=o.x,fe.w=o.y,n.mode!==J.Z.MORPHING&&(ne=ye,ne.x=0,ne.y=.5*(fe.z+fe.x),ne.z=.5*(fe.w+fe.y),fe.x-=ne.y,fe.y-=ne.z,fe.z-=ne.y,fe.w-=ne.z),n.mode===J.Z.SCENE2D&&ie.quantization===D.Z.BITS12){const e=1/(Math.pow(2,12)-1)*.5,t=(fe.z-fe.x)*e,n=(fe.w-fe.y)*e;fe.x-=t,fe.y-=n,fe.z+=t,fe.w+=n}e instanceof L.Z&&(pe=t.rectangle.south,me=t.rectangle.north,be=L.Z.geodeticLatitudeToMercatorAngle(pe),Te=1/(L.Z.geodeticLatitudeToMercatorAngle(me)-be),we=!0)}const Ee=Le;Ee.frameState=n,Ee.surfaceTile=o,Ee.showReflectiveOcean=N,Ee.showOceanWaves=U,Ee.enableLighting=e.enableLighting,Ee.dynamicAtmosphereLighting=e.dynamicAtmosphereLighting,Ee.dynamicAtmosphereLightingFromSun=e.dynamicAtmosphereLightingFromSun,Ee.showGroundAtmosphere=z,Ee.atmosphereLightIntensity=e.atmosphereLightIntensity,Ee.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,Ee.atmosphereMieCoefficient=e.atmosphereMieCoefficient,Ee.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,Ee.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,Ee.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,Ee.perFragmentGroundAtmosphere=ee,Ee.hasVertexNormals=V,Ee.useWebMercatorProjection=we,Ee.clippedByBoundaries=o.clippedByBoundaries,Ee.hasGeodeticSurfaceNormals=he,Ee.hasExaggeration=de;const Se=o.imagery;let Re=0;const Fe=Se.length,Be=e.showSkirts&&!m&&!Z,Ue=e.backFaceCulling&&!m&&!Z,ke=Ue?e._renderState:e._disableCullingRenderState,Ve=Ue?e._blendRenderState:e._disableCullingBlendRenderState;let He=ke,ze=e._firstPassInitialColor;const Ge=n.context;if((0,p.Z)(e._debug.boundingSphereTile)||De(),e._materialUniformMap!==e.materialUniformMap){e._materialUniformMap=e.materialUniformMap;const t=e._drawCommands.length;for(let i=0;i<t;++i)e._uniformMaps[i]=Ce(n,e)}do{let c,f,D=0;if(e._drawCommands.length<=e._usedDrawCommands?(c=new F.Z,c.owner=t,c.cull=!1,c.boundingVolume=new i.Z,c.orientedBoundingBox=void 0,f=Ce(n,e),e._drawCommands.push(c),e._uniformMaps.push(f)):(c=e._drawCommands[e._usedDrawCommands],f=e._uniformMaps[e._usedDrawCommands]),c.owner=t,++e._usedDrawCommands,t===e._debug.boundingSphereTile){const e=re.boundingVolume,t=re.boundingSphere;(0,p.Z)(e)?Ie(e,u.Z.RED).update(n):(0,p.Z)(t)&&Pe(t,u.Z.RED).update(n)}const L=f.properties;a.Z.clone(ze,L.initialColor),L.oceanNormalMap=M,L.lightingFadeDistance.x=e.lightingFadeOutDistance,L.lightingFadeDistance.y=e.lightingFadeInDistance,L.nightFadeDistance.x=e.nightFadeOutDistance,L.nightFadeDistance.y=e.nightFadeInDistance,L.atmosphereLightIntensity=e.atmosphereLightIntensity,L.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,L.atmosphereMieCoefficient=e.atmosphereMieCoefficient,L.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,L.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,L.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,L.zoomedOutOceanSpecularIntensity=e.zoomedOutOceanSpecularIntensity;const N=m?b:y,R=m?y:b;(0,p.Z)(N)&&(a.Z.fromElements(N.near,N.nearValue,N.far,N.farValue,L.frontFaceAlphaByDistance),a.Z.fromElements(R.near,R.nearValue,R.far,R.farValue,L.backFaceAlphaByDistance)),a.Z.fromElements(S.near,S.nearValue,S.far,S.farValue,L.undergroundColorAlphaByDistance),u.Z.clone(w,L.undergroundColor),L.lambertDiffuseMultiplier=P,L.vertexShadowDarkness=O;const U=!(0,p.Z)(o.vertexArray)&&(0,p.Z)(e.fillHighlightColor)&&e.fillHighlightColor.alpha>0;U&&u.Z.clone(e.fillHighlightColor,L.fillHighlightColor),L.terrainExaggerationAndRelativeHeight.x=ae,L.terrainExaggerationAndRelativeHeight.y=ce,L.center3D=te.center,s.Z.clone(ne,L.rtc),a.Z.clone(fe,L.tileRectangle),L.southAndNorthLatitude.x=pe,L.southAndNorthLatitude.y=me,L.southMercatorYAndOneOverHeight.x=be,L.southMercatorYAndOneOverHeight.y=Te;const k=ge,V=le(t.rectangle,e.cartographicLimitRectangle),Q=Ze,$=le(t.rectangle,v);s.Z.fromElements(q,Y,X,L.hsbShift);const ee=t.rectangle,ue=1/ee.width,de=1/ee.height;k.x=(V.west-ee.west)*ue,k.y=(V.south-ee.south)*de,k.z=(V.east-ee.west)*ue,k.w=(V.north-ee.south)*de,a.Z.clone(k,L.localizedCartographicLimitRectangle),Q.x=($.west-ee.west)*ue,Q.y=($.south-ee.south)*de,Q.z=($.east-ee.west)*ue,Q.w=($.north-ee.south)*de,a.Z.clone(Q,L.localizedTranslucencyRectangle);const he=H&&A.Z.fog(t._distance,n.fog.density)>A.Z.EPSILON3;K=K&&(he||z);let _e=!1,ye=!1,ve=!1,Ae=!1,we=!1,De=!1,Le=!1,Ne=!1,Me=!1,Ue=!1;for(;D<l&&Re<Fe;){const e=Se[Re],n=e.readyImagery;if(++Re,!(0,p.Z)(n)||0===n.imageryLayer.alpha)continue;const i=e.useWebMercatorT?n.textureWebMercator:n.texture;if(!(0,p.Z)(i))throw new _.Z("readyImagery is not actually ready!");const o=n.imageryLayer;(0,p.Z)(e.textureTranslationAndScale)||(e.textureTranslationAndScale=o._calculateTextureTranslationAndScale(t,e)),L.dayTextures[D]=i,L.dayTextureTranslationAndScale[D]=e.textureTranslationAndScale,L.dayTextureTexCoordsRectangle[D]=e.textureCoordinateRectangle,L.dayTextureUseWebMercatorT[D]=e.useWebMercatorT,L.dayTextureAlpha[D]=o.alpha,De=De||1!==L.dayTextureAlpha[D],L.dayTextureNightAlpha[D]=o.nightAlpha,Le=Le||1!==L.dayTextureNightAlpha[D],L.dayTextureDayAlpha[D]=o.dayAlpha,Le=Le||1!==L.dayTextureDayAlpha[D],L.dayTextureBrightness[D]=o.brightness,_e=_e||L.dayTextureBrightness[D]!==j.Z.DEFAULT_BRIGHTNESS,L.dayTextureContrast[D]=o.contrast,ye=ye||L.dayTextureContrast[D]!==j.Z.DEFAULT_CONTRAST,L.dayTextureHue[D]=o.hue,ve=ve||L.dayTextureHue[D]!==j.Z.DEFAULT_HUE,L.dayTextureSaturation[D]=o.saturation,Ae=Ae||L.dayTextureSaturation[D]!==j.Z.DEFAULT_SATURATION,L.dayTextureOneOverGamma[D]=1/o.gamma,we=we||L.dayTextureOneOverGamma[D]!==1/j.Z.DEFAULT_GAMMA,L.dayTextureSplit[D]=o.splitDirection,Ne=Ne||0!==L.dayTextureSplit[D];let s=L.dayTextureCutoutRectangles[D];if((0,p.Z)(s)||(s=L.dayTextureCutoutRectangles[D]=new a.Z),a.Z.clone(a.Z.ZERO,s),(0,p.Z)(o.cutoutRectangle)){const e=le(ee,o.cutoutRectangle),t=x.Z.simpleIntersection(e,ee,se);Me=(0,p.Z)(t)||Me,s.x=(e.west-ee.west)*ue,s.y=(e.south-ee.south)*de,s.z=(e.east-ee.west)*ue,s.w=(e.north-ee.south)*de}let c=L.colorsToAlpha[D];(0,p.Z)(c)||(c=L.colorsToAlpha[D]=new a.Z);const l=(0,p.Z)(o.colorToAlpha)&&o.colorToAlphaThreshold>0;if(Ue=Ue||l,l){const e=o.colorToAlpha;c.x=e.red,c.y=e.green,c.z=e.blue,c.w=o.colorToAlphaThreshold}else c.w=-1;if((0,p.Z)(n.credits)){const e=n.credits;for(let t=0,n=e.length;t<n;++t)r.addCreditToNextFrame(e[t])}++D}L.dayTextures.length=D,L.waterMask=d,a.Z.clone(h,L.waterMaskTranslationAndScale),L.minMaxHeight.x=ie.minimumHeight,L.minMaxHeight.y=ie.maximumHeight,T.Z.clone(ie.matrix,L.scaleAndBias);const ke=e._clippingPlanes,je=(0,p.Z)(ke)&&ke.enabled&&t.isClipped;je&&(L.clippingPlanesEdgeColor=u.Z.clone(ke.edgeColor,L.clippingPlanesEdgeColor),L.clippingPlanesEdgeWidth=ke.edgeWidth),Ee.numberOfDayTextures=D,Ee.applyBrightness=_e,Ee.applyContrast=ye,Ee.applyHue=ve,Ee.applySaturation=Ae,Ee.applyGamma=we,Ee.applyAlpha=De,Ee.applyDayNightAlpha=Le,Ee.applySplit=Ne,Ee.enableFog=he,Ee.enableClippingPlanes=je,Ee.clippingPlanes=ke,Ee.hasImageryLayerCutout=Me,Ee.colorCorrect=K,Ee.highlightFillTile=U,Ee.colorToAlpha=Ue,Ee.showUndergroundColor=I,Ee.translucent=Z;let We=o.renderedMesh.indices.length;Be||(We=o.renderedMesh.indexCountWithoutSkirts),c.shaderProgram=e._surfaceShaderSet.getShaderProgram(Ee),c.castShadows=G,c.receiveShadows=W,c.renderState=He,c.primitiveType=C.Z.TRIANGLES,c.vertexArray=o.vertexArray||o.fill.vertexArray,c.count=We,c.uniformMap=f,c.pass=B.Z.GLOBE,e._debug.wireframe&&(xe(Ge,0,t),(0,p.Z)(o.wireframeVertexArray)&&(c.vertexArray=o.wireframeVertexArray,c.primitiveType=C.Z.LINES,c.count=2*We));let qe=c.boundingVolume;const Ye=c.orientedBoundingBox;n.mode!==J.Z.SCENE3D?(i.Z.fromRectangleWithHeights2D(t.rectangle,n.mapProjection,re.minimumHeight,re.maximumHeight,qe),s.Z.fromElements(qe.center.z,qe.center.x,qe.center.y,qe.center),n.mode===J.Z.MORPHING&&(qe=i.Z.union(re.boundingSphere,qe,qe))):(c.boundingVolume=i.Z.clone(re.boundingSphere,qe),c.orientedBoundingBox=E.Z.clone(re.boundingVolume,Ye)),c.dirty=!0,Z&&g.updateDerivedCommands(c,n),oe(c,n),He=Ve,ze=Oe}while(Re<Fe)}const Fe=ne},812305:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(790087),o=n(11020),r=n(765153),s=n(485662),a=n(143450);function c(){this._enabled=!1,this._frontFaceAlpha=1,this._frontFaceAlphaByDistance=void 0,this._backFaceAlpha=1,this._backFaceAlphaByDistance=void 0,this._rectangle=a.Z.clone(a.Z.MAX_VALUE)}Object.defineProperties(c.prototype,{enabled:{get:function(){return this._enabled},set:function(e){i.Z.typeOf.bool("enabled",e),this._enabled=e}},frontFaceAlpha:{get:function(){return this._frontFaceAlpha},set:function(e){i.Z.typeOf.number.greaterThanOrEquals("frontFaceAlpha",e,0),i.Z.typeOf.number.lessThanOrEquals("frontFaceAlpha",e,1),this._frontFaceAlpha=e}},frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance},set:function(e){if((0,o.Z)(e)&&e.far<e.near)throw new r.Z("far distance must be greater than near distance.");this._frontFaceAlphaByDistance=s.Z.clone(e,this._frontFaceAlphaByDistance)}},backFaceAlpha:{get:function(){return this._backFaceAlpha},set:function(e){i.Z.typeOf.number.greaterThanOrEquals("backFaceAlpha",e,0),i.Z.typeOf.number.lessThanOrEquals("backFaceAlpha",e,1),this._backFaceAlpha=e}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance},set:function(e){if((0,o.Z)(e)&&e.far<e.near)throw new r.Z("far distance must be greater than near distance.");this._backFaceAlphaByDistance=s.Z.clone(e,this._backFaceAlphaByDistance)}},rectangle:{get:function(){return this._rectangle},set:function(e){(0,o.Z)(e)||(e=a.Z.clone(a.Z.MAX_VALUE)),a.Z.clone(e,this._rectangle)}}});const l=c},761288:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(890828),o=n(35961),r=n(11020),s=n(722313),a=n(598020),c=n(12503),l=n(545870),u=n(417148),d=n(622388);function h(){this._framebuffer=new c.Z({depthStencil:!0,supportsDepthTexture:!0}),this._packedDepthFramebuffer=new c.Z,this._renderState=void 0,this._packedDepthCommand=void 0,this._clearCommand=void 0,this._viewport=new i.Z,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0}Object.defineProperties(h.prototype,{classificationTexture:{get:function(){return this._framebuffer.getColorTexture()}},classificationFramebuffer:{get:function(){return this._framebuffer.framebuffer}},packedDepthFramebuffer:{get:function(){return this._packedDepthFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._framebuffer.getDepthStencilTexture()}},depthStencilRenderbuffer:{get:function(){return this._framebuffer.getDepthStencilRenderbuffer()}},packedDepthTexture:{get:function(){return this._packedDepthFramebuffer.getColorTexture()}}}),h.prototype.updateAndClear=function(e,t,n,s){const c=t.width,h=t.height;!function(e,t,n,i,o){const r=o?t.halfFloatingPointTexture?l.Z.HALF_FLOAT:l.Z.FLOAT:l.Z.UNSIGNED_BYTE;e._framebuffer.update(t,n,i,1,r),e._packedDepthFramebuffer.update(t,n,i)}(this,n,c,h,e),function(e,t,n,s,c){e._viewport.width=n,e._viewport.height=s;const l=!i.Z.equals(e._viewport,c.viewport);let h=l!==e._useScissorTest;e._useScissorTest=l,i.Z.equals(e._scissorRectangle,c.viewport)||(e._scissorRectangle=i.Z.clone(c.viewport,e._scissorRectangle),h=!0),(0,r.Z)(e._renderState)&&i.Z.equals(e._viewport,e._renderState.viewport)&&!h||(e._renderState=u.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),(0,r.Z)(e._packedDepthCommand)||(e._packedDepthCommand=t.createViewportQuadCommand(d.Z,{uniformMap:{u_depthTexture:function(){return e.depthStencilTexture}},owner:e})),(0,r.Z)(e._clearCommand)||(e._clearCommand=new a.Z({color:new o.Z(0,0,0,0),depth:1,stencil:0,owner:e})),e._packedDepthCommand.framebuffer=e._packedDepthFramebuffer.framebuffer,e._packedDepthCommand.renderState=e._renderState,e._clearCommand.framebuffer=e.classificationFramebuffer,e._clearCommand.renderState=e._renderState}(this,n,c,h,s),this._useHdr=e},h.prototype.clearClassification=function(e,t){this._clearCommand.execute(e,t)},h.prototype.packDepth=function(e,t){return this._packedDepthCommand.execute(e,t),this.packedDepthTexture},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){var e;return(e=this)._framebuffer.destroy(),e._packedDepthFramebuffer.destroy(),(0,s.Z)(this)};const f=h},722866:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ce});var i=n(394579),o=n(234146),r=n(11020),s=n(485662),a=n(143450),c=n(661679),l=n(431056),u=n(417148),d=n(437530),h=n(973591),f=n(53839),p=n(714233);const m=0,_=1,g=2,Z=3,y=4,b=5,v=6,A=7,T=8,w=9,E=10,S=11,C=["opaqueFrontFaceCommand","opaqueBackFaceCommand","depthOnlyFrontFaceCommand","depthOnlyBackFaceCommand","depthOnlyFrontAndBackFaceCommand","translucentFrontFaceCommand","translucentBackFaceCommand","translucentFrontFaceManualDepthTestCommand","translucentBackFaceManualDepthTestCommand","pickFrontFaceCommand","pickBackFaceCommand"];function x(){this._frontFaceAlphaByDistance=new s.Z(0,1,0,1),this._backFaceAlphaByDistance=new s.Z(0,1,0,1),this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._requiresManualDepthTest=!1,this._sunVisibleThroughGlobe=!1,this._environmentVisible=!1,this._useDepthPlane=!1,this._numberOfTextureUniforms=0,this._globeTranslucencyFramebuffer=void 0,this._rectangle=a.Z.clone(a.Z.MAX_VALUE),this._derivedCommandKey=0,this._derivedCommandsDirty=!1,this._derivedCommandPacks=void 0,this._derivedCommandTypes=new Array(S),this._derivedBlendCommandTypes=new Array(S),this._derivedPickCommandTypes=new Array(S),this._derivedCommandTypesToUpdate=new Array(S),this._derivedCommandsLength=0,this._derivedBlendCommandsLength=0,this._derivedPickCommandsLength=0,this._derivedCommandsToUpdateLength=0}function I(e,t,n,i){return e?(0,r.Z)(n)?(s.Z.clone(n,i),i.nearValue*=t,i.farValue*=t,i):(i.nearValue=t,i.farValue=t,i):(i.nearValue=1,i.farValue=1,i)}function P(e,t,n){return e&&(n.baseColor.alpha<1||t.nearValue<1||t.farValue<1)}function D(e,t,n,i,o){let r=0;const s=e._frontFaceTranslucent,a=e._backFaceTranslucent;if(!s)return r;const c=t.cameraUnderground,l=e._requiresManualDepthTest,u=i?w:l?A:b,d=i?E:l?T:v;return t.mode===p.Z.SCENE2D?(o[r++]=g,o[r++]=u,r):(a?(n||(o[r++]=y),c?(o[r++]=u,o[r++]=d):(o[r++]=d,o[r++]=u)):c?(n||(o[r++]=Z),o[r++]=m,o[r++]=d):(n||(o[r++]=g),o[r++]=_,o[r++]=u),r)}function O(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function L(e,t){return e.indexOf(t)>-1}function N(e,t){O(e.defines,"TRANSLUCENT"),O(t.defines,"TRANSLUCENT")}function M(e,t){O(e.defines,"GROUND_ATMOSPHERE"),O(t.defines,"GROUND_ATMOSPHERE"),O(e.defines,"FOG"),O(t.defines,"FOG"),O(e.defines,"TRANSLUCENT"),O(t.defines,"TRANSLUCENT")}function R(e,t){L(t.defines,"TILE_LIMIT_RECTANGLE")||L(t.defines,"ENABLE_CLIPPING_PLANES")||(t.sources=["void main() \n{ \n    out_FragColor = vec4(1.0); \n} \n"])}function F(e,t){const n=t.sources,i=n.length;for(let e=0;e<i;++e)n[e]=d.Z.replaceMain(n[e],"czm_globe_translucency_main");n.push("\n\nuniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n#ifdef MANUAL_DEPTH_TEST \n    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, st)); \n    if (logDepthOrDepth != 0.0) \n    { \n        vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth); \n        float depthEC = eyeCoordinate.z / eyeCoordinate.w; \n        if (v_positionEC.z < depthEC) \n        { \n            discard; \n        } \n    } \n#endif \n    czm_globe_translucency_main(); \n    vec4 classificationColor = texture(u_classificationTexture, st); \n    if (classificationColor.a > 0.0) \n    { \n        // Reverse premultiplication process to get the correct composited result of the classification primitives \n        classificationColor.rgb /= classificationColor.a; \n    } \n    out_FragColor = classificationColor * vec4(classificationColor.aaa, 1.0) + out_FragColor * (1.0 - classificationColor.a); \n} \n")}function B(e,t){F(0,t),O(e.defines,"GROUND_ATMOSPHERE"),O(t.defines,"GROUND_ATMOSPHERE"),O(e.defines,"FOG"),O(t.defines,"FOG")}function U(e,t){F(0,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function k(e,t){B(e,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function V(e,t){t.sources=["uniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n    vec4 pickColor = texture(u_classificationTexture, st); \n    if (pickColor == vec4(0.0)) \n    { \n        discard; \n    } \n    out_FragColor = pickColor; \n} \n"]}function H(e,t,n,i,o,s){if(!(0,r.Z)(o))return t;if(!i&&(0,r.Z)(n))return n;let a=e.shaderCache.getDerivedShaderProgram(t,s);if(!(0,r.Z)(a)){const n=t._attributeLocations,i=t.vertexShaderSource.clone(),c=t.fragmentShaderSource.clone();i.defines=(0,r.Z)(i.defines)?i.defines.slice(0):[],c.defines=(0,r.Z)(c.defines)?c.defines.slice(0):[],o(i,c),a=e.shaderCache.createDerivedShaderProgram(t,s,{vertexShaderSource:i,fragmentShaderSource:c,attributeLocations:n})}return a}function z(e){e.cull.face=f.Z.BACK,e.cull.enabled=!0}function G(e){e.cull.face=f.Z.FRONT,e.cull.enabled=!0}function j(e){e.cull.face=f.Z.BACK,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function W(e){e.cull.face=f.Z.FRONT,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function q(e){e.cull.enabled=!1,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function Y(e){e.cull.face=f.Z.BACK,e.cull.enabled=!0,e.depthMask=!1,e.blending=h.Z.ALPHA_BLEND}function X(e){e.cull.face=f.Z.FRONT,e.cull.enabled=!0,e.depthMask=!1,e.blending=h.Z.ALPHA_BLEND}function J(e){e.cull.face=f.Z.BACK,e.cull.enabled=!0,e.blending.enabled=!1}function Q(e){e.cull.face=f.Z.FRONT,e.cull.enabled=!0,e.blending.enabled=!1}function $(e,t,n,i,o){if(!(0,r.Z)(i))return e;if(!n&&(0,r.Z)(t))return t;let s=o[e.id];if(!(0,r.Z)(s)){const t=u.Z.getState(e);i(t),s=u.Z.fromCache(t),o[e.id]=s}return s}function K(e){return{u_classificationTexture:function(){return e._globeTranslucencyFramebuffer.classificationTexture}}}function ee(e,t,n,o,s){return(0,r.Z)(s)?!o&&(0,r.Z)(n)?n:(0,i.Z)(t,s(e),!1):t}function te(e){this.pass=e.pass,this.pickOnly=e.pickOnly,this.getShaderProgramFunction=e.getShaderProgramFunction,this.getRenderStateFunction=e.getRenderStateFunction,this.getUniformMapFunction=e.getUniformMapFunction,this.renderStateCache={}}Object.defineProperties(x.prototype,{frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance}},translucent:{get:function(){return this._frontFaceTranslucent}},sunVisibleThroughGlobe:{get:function(){return this._sunVisibleThroughGlobe}},environmentVisible:{get:function(){return this._environmentVisible}},useDepthPlane:{get:function(){return this._useDepthPlane}},numberOfTextureUniforms:{get:function(){return this._numberOfTextureUniforms}},rectangle:{get:function(){return this._rectangle}}}),x.prototype.update=function(e){const t=e.globe;if(!(0,r.Z)(t)||!t.show)return this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._sunVisibleThroughGlobe=!0,this._environmentVisible=!0,void(this._useDepthPlane=!1);this._frontFaceAlphaByDistance=I(t.translucency.enabled,t.translucency.frontFaceAlpha,t.translucency.frontFaceAlphaByDistance,this._frontFaceAlphaByDistance),this._backFaceAlphaByDistance=I(t.translucency.enabled,t.translucency.backFaceAlpha,t.translucency.backFaceAlphaByDistance,this._backFaceAlphaByDistance),this._frontFaceTranslucent=P(t.translucency.enabled,this._frontFaceAlphaByDistance,t),this._backFaceTranslucent=P(t.translucency.enabled,this._backFaceAlphaByDistance,t),this._requiresManualDepthTest=function(e,t,n){return e._frontFaceTranslucent&&!e._backFaceTranslucent&&!n.depthTestAgainstTerrain&&t.mode!==p.Z.SCENE2D&&t.context.depthTexture}(this,e,t),this._sunVisibleThroughGlobe=function(e,t){const n=e._frontFaceTranslucent,i=e._backFaceTranslucent;return n&&(t.cameraUnderground||i)}(this,e),this._environmentVisible=function(e,t){return!t.cameraUnderground||e._frontFaceTranslucent}(this,e),this._useDepthPlane=function(e,t){return!t.cameraUnderground&&!e._frontFaceTranslucent}(this,e),this._numberOfTextureUniforms=function(e){let t=0;return e._frontFaceTranslucent&&++t,e._requiresManualDepthTest&&++t,t}(this),this._rectangle=a.Z.clone(t.translucency.rectangle,this._rectangle),function(e,t){let n;e._derivedCommandsLength=D(e,t,!1,!1,e._derivedCommandTypes),e._derivedBlendCommandsLength=D(e,t,!0,!1,e._derivedBlendCommandTypes),e._derivedPickCommandsLength=D(e,t,!1,!0,e._derivedPickCommandTypes);let i=0;for(n=0;n<e._derivedCommandsLength;++n)i|=1<<e._derivedCommandTypes[n];for(n=0;n<e._derivedBlendCommandsLength;++n)i|=1<<e._derivedBlendCommandTypes[n];for(n=0;n<e._derivedPickCommandsLength;++n)i|=1<<e._derivedPickCommandTypes[n];let o=0;for(n=0;n<S;++n)(i&1<<n)>0&&(e._derivedCommandTypesToUpdate[o++]=n);e._derivedCommandsToUpdateLength=o;const s=i!==e._derivedCommandKey;e._derivedCommandKey=i,e._derivedCommandsDirty=s,!(0,r.Z)(e._derivedCommandPacks)&&e._frontFaceTranslucent&&(e._derivedCommandPacks=[new te({pass:l.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:N,getRenderStateFunction:z,getUniformMapFunction:void 0}),new te({pass:l.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:M,getRenderStateFunction:G,getUniformMapFunction:void 0}),new te({pass:l.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:R,getRenderStateFunction:j,getUniformMapFunction:void 0}),new te({pass:l.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:R,getRenderStateFunction:W,getUniformMapFunction:void 0}),new te({pass:l.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:R,getRenderStateFunction:q,getUniformMapFunction:void 0}),new te({pass:l.Z.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:F,getRenderStateFunction:Y,getUniformMapFunction:K}),new te({pass:l.Z.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:B,getRenderStateFunction:X,getUniformMapFunction:K}),new te({pass:l.Z.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:U,getRenderStateFunction:Y,getUniformMapFunction:K}),new te({pass:l.Z.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:k,getRenderStateFunction:X,getUniformMapFunction:K}),new te({pass:l.Z.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:V,getRenderStateFunction:J,getUniformMapFunction:K}),new te({pass:l.Z.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:V,getRenderStateFunction:Q,getUniformMapFunction:K})])}(this,e)};const ne=new Array(S),ie=new Array(S);function oe(e,t,n,i,o,s,a){for(let c=0;c<t;++c){const t=e[c],l=t.derivedCommands.type;(!(0,r.Z)(a)||a.indexOf(l)>-1)&&n(t,i,o,s)}}function re(e,t,n,i,o,r){for(let s=0;s<t;++s)n(e[s],i,o,r)}x.prototype.updateDerivedCommands=function(e,t){const n=this._derivedCommandTypesToUpdate,i=this._derivedCommandsToUpdateLength;if(0!==i){for(let e=0;e<i;++e)ie[e]=this._derivedCommandPacks[n[e]],ne[e]=C[n[e]];!function(e,t,n,i,s,a,l){let u=t.derivedCommands.globeTranslucency;const d=e._derivedCommandsDirty;if(t.dirty||!(0,r.Z)(u)||d){t.dirty=!1,(0,r.Z)(u)||(u={},t.derivedCommands.globeTranslucency=u);const d=l.frameNumber,h=(0,o.Z)(u.uniformMapDirtyFrame,0),f=(0,o.Z)(u.shaderProgramDirtyFrame,0),p=(0,o.Z)(u.renderStateDirtyFrame,0),m=u.uniformMap!==t.uniformMap,_=u.shaderProgramId!==t.shaderProgram.id,g=u.renderStateId!==t.renderState.id;m&&(u.uniformMapDirtyFrame=d),_&&(u.shaderProgramDirtyFrame=d),g&&(u.renderStateDirtyFrame=d),u.uniformMap=t.uniformMap,u.shaderProgramId=t.shaderProgram.id,u.renderStateId=t.renderState.id;for(let Z=0;Z<n;++Z){const n=a[Z],y=i[Z],b=s[Z];let v,A,T,w=u[b];(0,r.Z)(w)?(v=w.uniformMap,A=w.shaderProgram,T=w.renderState):(v=void 0,A=void 0,T=void 0),w=c.Z.shallowClone(t,w),u[b]=w;const E=(0,o.Z)(w.derivedCommands.uniformMapDirtyFrame,0),S=(0,o.Z)(w.derivedCommands.shaderProgramDirtyFrame,0),C=(0,o.Z)(w.derivedCommands.renderStateDirtyFrame,0),x=m||E<h,I=_||S<f,P=g||C<p;x&&(w.derivedCommands.uniformMapDirtyFrame=d),I&&(w.derivedCommands.shaderProgramDirtyFrame=d),P&&(w.derivedCommands.renderStateDirtyFrame=d),w.derivedCommands.type=y,w.pass=n.pass,w.pickOnly=n.pickOnly,w.uniformMap=ee(e,t.uniformMap,v,x,n.getUniformMapFunction),w.shaderProgram=H(l.context,t.shaderProgram,A,I,n.getShaderProgramFunction,b),w.renderState=$(t.renderState,T,P,n.getRenderStateFunction,n.renderStateCache)}}}(this,e,i,n,ne,ie,t)}},x.prototype.pushDerivedCommands=function(e,t,n){const i=n.passes.pick;if(i&&t)return;let o=this._derivedCommandTypes,r=this._derivedCommandsLength;if(i?(o=this._derivedPickCommandTypes,r=this._derivedPickCommandsLength):t&&(o=this._derivedBlendCommandTypes,r=this._derivedBlendCommandsLength),0===r)return void n.commandList.push(e);const s=e.derivedCommands.globeTranslucency;for(let e=0;e<r;++e){const t=C[o[e]];n.commandList.push(s[t])}};const se=[m,_],ae=[g,Z,y];x.prototype.executeGlobeCommands=function(e,t,n,i,o){const r=i.context,s=e.commands[l.Z.GLOBE],a=e.indices[l.Z.GLOBE];0!==a&&(this._globeTranslucencyFramebuffer=n,n.clearClassification(r,o),oe(s,a,t,i,r,o,se))},x.prototype.executeGlobeClassificationCommands=function(e,t,n,i,o){const r=i.context,s=e.commands[l.Z.GLOBE],a=e.indices[l.Z.GLOBE],c=e.commands[l.Z.TERRAIN_CLASSIFICATION],u=e.indices[l.Z.TERRAIN_CLASSIFICATION];if(0===a||0===u)return;const d=this._frontFaceTranslucent,h=this._backFaceTranslucent;if(d&&h||re(c,u,t,i,r,o),!d&&!h)return;this._globeTranslucencyFramebuffer=n;const f=r.uniformState.globeDepthTexture,p=o.framebuffer;if(o.framebuffer=n.classificationFramebuffer,oe(s,a,t,i,r,o,ae),r.depthTexture){const e=n.packDepth(r,o);r.uniformState.globeDepthTexture=e}re(c,u,t,i,r,o),r.uniformState.globeDepthTexture=f,o.framebuffer=p};const ce=x},106899:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(234146),r=n(11020),s=n(717341),a=(function(){var e,t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};WebAssembly.instantiate(function(e){for(var n=new Uint8Array(10792),i=0;i<10792;++i){var o=e.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<10792;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}("b9H79TebbbeJq9Geueu9Geub9Gbb9Gvuuuuueu9Gduueu9Gluuuueu9Gvuuuuub9Gouuuuuub9Gluuuub9GiuuueuiLQdilevlevlooroowwvbDDbelve9Weiiviebeoweuec:G;kekr;qiHo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWVbe8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9c9V919U9KbdE9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949wWV79P9V9UbiY9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWVbl8E9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWV9c9V919U9Kbv8A9TW79O9V9Wt9FW9U9J9V9KW69U9KW949wWV79P9V9UboE9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JWbra9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JW9c9V919U9KbwL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9p9JtbDK9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9r919HtbqL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVT949WbkE9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OWbPa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OW9ttV9P9Wbsa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9Wbzl79IV9RbHDwebcekdXCq:fSQdbk:fxeYu8Jjjjjbcjo9Rgv8Kjjjjbcbhodnalcefae0mbabcbRb:q:kjjbc:GeV86bbavcjdfcbcjdz:tjjjb8AdnaiTmbavcjdfadalzMjjjb8Akabaefhrabcefhwavalfcbcbcjdal9RalcFe0Ez:tjjjb8AavavcjdfalzMjjjbhDcj;abal9UhodndndndndnalTmbaoc;WFbGgecjdaecjd6Ehqcbhkdninakai9pmiaDcjlfcbcjdz:tjjjb8Aaqaiak9Rakaqfai6Egxcsfgecl4cifcd4hmadakal2fhPdndndndndnaec9WGgsTmbcbhzcehHaPhOawhAxekdnaxTmbcbhAcehHaPhCinaDaAfRbbhXaDcjlfheaChoaxhQinaeaoRbbgLaX9RgXcetaXcKtcK91cr4786bbaoalfhoaecefheaLhXaQcufgQmbkaraw9Ram6miawcbamz:tjjjbgeTmiaCcefhCaeamfhwaAcefgAal6hHaAal9hmbxvkkaraw9Ram6mvawcbamz:tjjjb8AceheinawgXamfhwalaegoSmldnaraw9Ram6mbaocefheawcbamz:tjjjb8AaXmekkcbhwaoal6mvxikindnaxTmbaDazfRbbhXaDcjlfheaOhoaxhQinaeaoRbbgLaX9RgXcetaXcKtcK91cr4786bbaoalfhoaecefheaLhXaQcufgQmbkkaraA9Ram6mearaAcbamz:tjjjbgKamfgw9RcK6mdcbhYaDcjlfhAinaDcjlfaYfh8AcwhCczhLcehQindndnaQce9hmbcuhoa8ARbbmecbhodninaogecsSmeaecefhoaAaefcefRbbTmbkkcucbaecs6EhoxekaQcetc;:FFFeGhocuaQtcu7cFeGhXcbheinaoaXaAaefRbb9nfhoaecefgecz9hmbkkaoaLaoaL6geEhLaQaCaeEhCaQcetgQcw6mbkdndndndnaCcufPdiebkaKaYco4fgeaeRbbcdciaCclSEaYci4coGtV86bbaCcw9hmeawa8A8Pbb83bbawcwfa8Acwf8Pbb83bbawczfhwxdkaKaYco4fgeaeRbbceaYci4coGtV86bbkdncwaC9TgEmbinawcb86bbawcefhwxbkkcuaCtcu7h8Acbh3aAh5ina5heaEhQcbhoinaeRbbgLa8AcFeGgXaLaX6EaoaCtVhoaecefheaQcufgQmbkawao86bba5aEfh5awcefhwa3aEfg3cz6mbkcbheindnaAaefRbbgoaX6mbawao86bbawcefhwkaecefgecz9hmbkkdnaYczfgYas9pmbaAczfhAaraw9RcL0mekkaYas6meawTmeaOcefhOazcefgzal6hHawhAazalSmixbkkcbhwaHceGTmexikcbhwaHceGmdkaDaPaxcufal2falzMjjjb8AaxakfhkawmbkcbhoxokcbhoxvkaiTmekcbhoaraw9Ralcaalca0E6mialc8F9nmexdkcbhoaecufca6mdkawcbcaal9Rgez:tjjjbaefhwkawaDcjdfalzMjjjbalfab9Rhokavcjof8Kjjjjbaok9heeuaecaaeca0Eabcj;abae9Uc;WFbGgdcjdadcjd6Egdfcufad9Uae2adcl4cifcd4adV2fcefkmbcbabBd:q:kjjbk;use3u8Jjjjjbc;ae9Rgl8Kjjjjbcbhvdnaici9UgocHfae0mbabcbydN:kjjbgrc;GeV86bbalc;abfcFecjez:tjjjb8AalcUfgw9cu83ibalc8WfgD9cu83ibalcyfgq9cu83ibalcafgk9cu83ibalcKfgx9cu83ibalczfgm9cu83ibal9cu83iwal9cu83ibabaefc9WfhPabcefgsaofhednaiTmbcmcsarcb9kgzEhHcbhOcbhAcbhCcbhXcbhQindnaeaP9nmbcbhvxikaQcufhvadaCcdtfgoydbhLaocwfydbhKaoclfydbhYcbh8Adndninalc;abfavcsGcitfgoydlhEdndndnaoydbgoaL9hmbaEaYSmekdnaoaY9hmbaEaK9hmba8Acefh8AxekaoaK9hmeaEaL9hmea8Acdfh8Aka8Ac870mdaXcufhvada8AciGcx2goc:y1jjbfydbaCfcdtfydbhEadaocN1jjbfydbaCfcdtfydbhKadaoc:q1jjbfydbaCfcdtfydbhLcbhodnindnalavcsGcdtfydbaE9hmbaohYxdkcuhYavcufhvaocefgocz9hmbkkaEaOSgvaYcb9kaYaH9iGgoce7Gh3dndndndndnaYcbcsavEaoEgvcs9hmbarce9imbaEaEaAaEcefaASgvEgAcefSmecmcsavEhvkasava8Acdtc;WeGV86bbavcs9hmeaEaA9Rgvcetavc8F917hvinaeavcFb0crtavcFbGV86bbaecefheavcje6hoavcr4hvaoTmbkaEhAxdkcPhvasa8AcdtcPV86bbaEhAkavTmbavaH9imekalaXcdtfaEBdbaXcefcsGhXkaOa3fhOalc;abfaQcitfgvaKBdlavaEBdbalc;abfaQcefcsGgvcitfgoaEBdlaoaLBdbavcefhoxikavcufhva8Aclfg8Ac;ab9hmbkkdnadceaKaOScetaYaOSEcx2gvc:q1jjbfydbaCfcdtfydbgLTadavcN1jjbfydbaCfcdtfydbg8AceSGadavc:y1jjbfydbaCfcdtfydbgYcdSGaOcb9hGazGg5ce9hmbaw9cu83ibaD9cu83ibaq9cu83ibak9cu83ibax9cu83ibam9cu83ibal9cu83iwal9cu83ibcbhOkcbhEaXcufgvhodnindnalaocsGcdtfydba8A9hmbaEhKxdkcuhKaocufhoaEcefgEcz9hmbkkcbhodnindnalavcsGcdtfydbaY9hmbaohExdkcuhEavcufhvaocefgocz9hmbkkaOaLaOSg8Efh3dndnaKcm0mbaKcefhKxekcbcsa8Aa3SgvEhKa3avfh3kdndnaEcm0mbaEcefhExekcbcsaYa3SgvEhEa3avfh3kc9:cua8EEh8FaEaKcltVhocbhvdndndninavcj1jjbfRbbaocFeGSmeavcefgvcz9hmbxdkkaLaO9havcm0Va5Vmbasavc;WeV86bbxekasa8F86bbaeao86bbaecefhekdna8EmbaLaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombkaLhAkdnaKcs9hmba8AaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka8AhAkdnaEcs9hmbaYaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombkaYhAkalaXcdtfaLBdbaXcefcsGhvdndnaKPzbeeeeeeeeeeeeeebekalavcdtfa8ABdbaXcdfcsGhvkdndnaEPzbeeeeeeeeeeeeeebekalavcdtfaYBdbavcefcsGhvkalc;abfaQcitfgoaLBdlaoa8ABdbalc;abfaQcefcsGcitfgoa8ABdlaoaYBdbalc;abfaQcdfcsGcitfgoaYBdlaoaLBdbaQcifhoavhXa3hOkascefhsaocsGhQaCcifgCai6mbkkcbhvaeaP0mbcbhvinaeavfavcj1jjbfRbb86bbavcefgvcz9hmbkaeab9Ravfhvkalc;aef8KjjjjbavkZeeucbhddninadcefgdc8F0meceadtae6mbkkadcrfcFeGcr9Uci2cdfabci9U2cHfkmbcbabBdN:kjjbk:ydewu8Jjjjjbcz9Rhlcbhvdnaicvfae0mbcbhvabcbRbN:kjjbc;qeV86bbal9cb83iwabcefhoabaefc98fhrdnaiTmbcbhwcbhDindnaoar6mbcbskadaDcdtfydbgqalcwfawaqav9Rgvavc8F91gv7av9Rc507gwcdtfgkydb9Rgvc8E91c9:Gavcdt7awVhvinaoavcFb0gecrtavcFbGV86bbavcr4hvaocefhoaembkakaqBdbaqhvaDcefgDai9hmbkkcbhvaoar0mbaocbBbbaoab9RclfhvkavkBeeucbhddninadcefgdc8F0meceadtae6mbkkadcwfcFeGcr9Uab2cvfk:dvli99dui99ludnaeTmbcuadcetcuftcu7:Yhvdndncuaicuftcu7:YgoJbbbZMgr:lJbbb9p9DTmbar:Ohwxekcjjjj94hwkcbhicbhDinalclfIdbgrJbbbbJbbjZalIdbgq:lar:lMalcwfIdbgk:lMgr:varJbbbb9BEgrNhxaqarNhralcxfIdbhqdndnakJbbbb9GTmbaxhkxekJbbjZar:l:tgkak:maxJbbbb9GEhkJbbjZax:l:tgxax:marJbbbb9GEhrkdndnaqJbbj:;aqJbbj:;9GEgxJbbjZaxJbbjZ9FEavNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohmxekcjjjj94hmkdndnakJbbj:;akJbbj:;9GEgqJbbjZaqJbbjZ9FEaoNJbbbZJbbb:;akJbbbb9GEMgq:lJbbb9p9DTmbaq:OhPxekcjjjj94hPkdndnarJbbj:;arJbbj:;9GEgqJbbjZaqJbbjZ9FEaoNJbbbZJbbb:;arJbbbb9GEMgr:lJbbb9p9DTmbar:Ohsxekcjjjj94hskdndnadcl9hmbabaDfgzas86bbazcifam86bbazcdfaw86bbazcefaP86bbxekabaifgzas87ebazcofam87ebazclfaw87ebazcdfaP87ebkalczfhlaicwfhiaDclfhDaecufgembkkk;klld99eud99eudnaeTmbdndncuaicuftcu7:YgvJbbbZMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikaic;8FiGhrinabcofcicdalclfIdb:lalIdb:l9EgialcwfIdb:lalaicdtfIdb:l9EEgialcxfIdb:lalaicdtfIdb:l9EEgiarV87ebdndnalaicefciGcdtfIdbJ;Zl:1ZNJbbj:;JbbjZalaicdtfIdbJbbbb9DEgoNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabaq87ebdndnaoalaicdfciGcdtfIdbJ;Zl:1ZNNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabcdfaq87ebdndnaoalaicufciGcdtfIdbJ;Zl:1ZNNgoJbbj:;aoJbbj:;9GEgwJbbjZawJbbjZ9FEavNJbbbZJbbb:;aoJbbbb9GEMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikabclfai87ebabcwfhbalczfhlaecufgembkkk:Hvdxue998Jjjjjbcjd9Rgo8Kjjjjbadcd4hrdndndndnavcd9hmbadcl6mearcearce0EhwaohDinaDc:CuBdbaDclfhDawcufgwmbkaeTmiadcl6mdarcearce0EhqarcdthkalhxcbhminaohDaxhwaqhPinaDaDydbgsawydbgzcL4cFeGc:cufcbazEgzasaz9kEBdbawclfhwaDclfhDaPcufgPmbkaxakfhxamcefgmae9hmbkkaeTmdxekaeTmekavcb9hadcl6gqVhHarcearce0Ehkarcdthrceai9Rhmcbhdindndndnavce9hmbaqmdc:CuhwalhDakhPinawaDydbgscL4cFeGc:cufcbasEgsawas9kEhwaDclfhDaPcufgPmbxdkkc:CuhwaHmbaohDalhPakhsinaDaPydbgzcL4cFeGgxc8Aaxc8A9kEc:cufcbazEBdbaPclfhPaDclfhDascufgsmbkkaqmbcbhDakhsinawhPdnavceSmbaoaDfydbhPkdndnalaDfIdbgOcjjj;8iamaPfgPcLt9R::NJbbbZJbbb:;aOJbbbb9GEMgO:lJbbb9p9DTmbaO:Ohzxekcjjjj94hzkabaDfazcFFFrGaPcKtVBdbaDclfhDascufgsmbkkabarfhbalarfhladcefgdae9hmbkkaocjdf8Kjjjjbk;TkdCui998Jjjjjbc:qd9Rgv8Kjjjjbavc:Oefcbc;Kbz:tjjjb8AcbhodnadTmbcbhoaiTmbdnabae9hmbavcuadcdtgoadcFFFFi0Ecbyd1:kjjbHjjjjbbgeBd:OeavceBd1daeabaozMjjjb8Akavc:yefcwfcbBdbav9cb83i:yeavc:yefaeadaiavc:Oefz:njjjbcuaicdtgraicFFFFi0Egwcbyd1:kjjbHjjjjbbhoavc:Oefavyd1dgDcdtfaoBdbavaDcefgqBd1daoavyd:yegkarzMjjjbhxavc:Oefaqcdtfadci9Ugmcbyd1:kjjbHjjjjbbgoBdbavaDcdfgrBd1daocbamz:tjjjbhPavc:Oefarcdtfawcbyd1:kjjbHjjjjbbgsBdbavaDcifgqBd1daxhoashrinaralIdbalaoydbgwcwawcw6Ecdtfc;ebfIdbMUdbaoclfhoarclfhraicufgimbkavc:OefaqcdtfcuamcdtadcFFFF970Ecbyd1:kjjbHjjjjbbgqBdbavaDclfBd1ddnadci6mbamceamce0EhiaehoaqhrinarasaoydbcdtfIdbasaoclfydbcdtfIdbMasaocwfydbcdtfIdbMUdbaocxfhoarclfhraicufgimbkkavc;mbfhzavhoavyd:CehHavyd:GehOcbhwcbhrcbhAcehCinaohXcihQaearci2gLcdtfgocwfydbhKaoydbhdabaAcx2fgiclfaoclfydbgDBdbaiadBdbaicwfaKBdbaParfce86bbazaKBdwazaDBdlazadBdbaqarcdtfcbBdbdnawTmbcihQaXhiindnaiydbgoadSmbaoaDSmbaoaKSmbazaQcdtfaoBdbaQcefhQkaiclfhiawcufgwmbkkaAcefhAaxadcdtfgoaoydbcufBdbaxaDcdtfgoaoydbcufBdbaxaKcdtfgoaoydbcufBdbcbhwinaOaHaeawaLfcdtfydbcdtgifydbcdtfgKhoakaifgDydbgdhidnadTmbdninaoydbarSmeaoclfhoaicufgiTmdxbkkaoadcdtaKfc98fydbBdbaDaDydbcufBdbkawcefgwci9hmbkdndndnaQTmbcuhrJbbbbhYcbhoinasazaocdtfydbcdtgifgwIdbh8AawalcbaocefgDaocs0EcdtfIdbalaxaifydbgocwaocw6Ecdtfc;ebfIdbMgEUdbdnakaifydbgwTmbaEa8A:thEaOaHaifydbcdtfhoawcdthiinaqaoydbgwcdtfgdaEadIdbMg8AUdba8AaYaYa8A9DgdEhYawaradEhraoclfhoaic98fgimbkkaDhoaDaQ9hmbkarcu9hmekaCam9pmeindnaPaCfRbbmbaChrxdkamaCcefgC9hmbxdkkaQczaQcz6EhwazhoaXhzarcu9hmekkavyd1dhokaocdtavc:Oeffc98fhrdninaoTmearydbcbyd:e:kjjbH:bjjjbbarc98fhraocufhoxbkkavc:qdf8Kjjjjbk;UlevucuaicdtgvaicFFFFi0Egocbyd1:kjjbHjjjjbbhralalyd9GgwcdtfarBdbalawcefBd9GabarBdbaocbyd1:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdlcuadcdtadcFFFFi0Ecbyd1:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdwabydbcbavz:tjjjb8Aadci9UhwdnadTmbabydbhoaehladhrinaoalydbcdtfgvavydbcefBdbalclfhlarcufgrmbkkdnaiTmbabydbhlabydlhrcbhvaihoinaravBdbarclfhralydbavfhvalclfhlaocufgombkkdnadci6mbawceawce0EhDabydlhrabydwhvcbhlinaecwfydbhoaeclfydbhdaraeydbcdtfgwawydbgwcefBdbavawcdtfalBdbaradcdtfgdadydbgdcefBdbavadcdtfalBdbaraocdtfgoaoydbgocefBdbavaocdtfalBdbaecxfheaDalcefgl9hmbkkdnaiTmbabydlheabydbhlinaeaeydbalydb9RBdbalclfhlaeclfheaicufgimbkkkQbabaeadaic:01jjbz:mjjjbkQbabaeadaic:C:jjjbz:mjjjbk9DeeuabcFeaicdtz:tjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk9teiucbcbyd:m:kjjbgeabcifc98GfgbBd:m:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd:m:kjjbgeabcrfc94GfgbBd:m:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd:m:kjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd:m:kjjbfgdBd:m:kjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk:Eddbcjwk:edb4:h9w9N94:P:gW:j9O:ye9Pbbbbbbebbbdbbbebbbdbbbbbbbdbbbbbbbebbbbbbb:l29hZ;69:9kZ;N;76Z;rg97Z;z;o9xZ8J;B85Z;:;u9yZ;b;k9HZ:2;Z9DZ9e:l9mZ59A8KZ:r;T3Z:A:zYZ79OHZ;j4::8::Y:D9V8:bbbb9s:49:Z8R:hBZ9M9M;M8:L;z;o8:;8:PG89q;x:J878R:hQ8::M:B;e87bbbbbbjZbbjZbbjZ:E;V;N8::Y:DsZ9i;H;68:xd;R8:;h0838:;W:NoZbbbb:WV9O8:uf888:9i;H;68:9c9G;L89;n;m9m89;D8Ko8:bbbbf:8tZ9m836ZS:2AZL;zPZZ818EZ9e:lxZ;U98F8:819E;68:bc:eqkxebbbdbbbaWbb"),{}).then((function(t){(e=t.instance).exports.__wasm_call_ctors(),e.exports.meshopt_encodeVertexVersion(0),e.exports.meshopt_encodeIndexVersion(1)}))}(),function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var n,i=WebAssembly.validate(e)?"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;a9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;d8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgAclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;tzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfalaDcu7gPcl4fcsGcitfgsydlhzasydbhHdnaDcsGgDak9pmbavaiaPfcsGcdtfydbaxaDEhsaDThDdndnadcd9hmbabarcetfgPaH87ebaPcdfaz87ebaPclfas87ebxekabarcdtfgPaHBdbaPclfazBdbaPcwfasBdbkaxaDfhxavc;abfalcitfgPasBdbaPazBdlavaicdtfasBdbavc;abfalcefcsGglcitfgPaHBdbaPasBdlaiaDfhialcefhlxdkdndnaDcsSmbamaDfaDc987fcefhmxekaocefhDao8SbbgscFeGhPdndnascu9mmbaDhoxekaocvfhoaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhokaPce4cbaPceG9R7amfhmkdndnadcd9hmbabarcetfgDaH87ebaDcdfaz87ebaDclfam87ebxekabarcdtfgDaHBdbaDclfazBdbaDcwfamBdbkavc;abfalcitfgDamBdbaDazBdlavaicdtfamBdbavc;abfalcefcsGglcitfgDaHBdbaDamBdlaicefhialcefhlxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHcdfaD87ebaHclfas87ebxekabarcdtfgHaxBdbaHclfaDBdbaHcwfasBdbkavaicdtfaxBdbavc;abfalcitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfalcefcsGcitfgHasBdbaHaDBdlavaiaPfcsGgicdtfasBdbavc;abfalcdfcsGglcitfgDaxBdbaDasBdlalcefhlaiaOfhiazaOfhxxekaxcbaoRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbaocefhDxekaocdfhDao8SbegPcFeGhsdnaPcu9kmbaocofhAascFbGhscrhodninaD8SbbgPcFbGaotasVhsaPcu9kmeaDcefhDaocrfgoc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbgocFeGhPdnaocu9kmbaDcvfhzaPcFbGhPcrhodninas8SbbgDcFbGaotaPVhPaDcu9kmeascefhsaocrfgoc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashoxekascefhoas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninao8SbbgscFbGaDtaPVhPascu9kmeaocefhoaDcrfgDc8J9hmbkaOhoxekaocefhokaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDcdfaz87ebaDclfaO87ebxekabarcdtfgDaABdbaDclfazBdbaDcwfaOBdbkavc;abfalcitfgDazBdbaDaABdlavaicdtfaABdbavc;abfalcefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfalcdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiarcifgrae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:wPliuo97eue978Jjjjjbca9Rhiaec98Ghldndnadcl9hmbdnalTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaipxbbbbbbbbbbbbbbbbgqpklbaiabalcdtfgdaeciGglcdtgv;8qbbdnalTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDaqp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkadaiav;8qbbskdnalTmbcbhvabhdinadczfgxaxpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgval6mbkkalae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabalcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbheabhdinadadpbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbadczfhdaeclfgeav6mbkkdnaval9pmbaialciGgecdtgdVcbc;abad9R;8kbaiabavcdtfgvad;8qbbdnaeTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiad;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb":"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:78Yqdbk:qzezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhlaicefhodnadTmbalc;WFbGglcjdalcjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfglcl4cifcd4hxdndndndnalc9WGgmTmbcbhPcehsawcjdfhzaohHinaraH9Rax6midnaraHaxfgo9RcK6mbczhlinalgic9Wfglawcj;cbffhOdndndndndnaHalco4fRbbalci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOaoRblaoRbbgAco4glalciSgCE86bbawcj;cbfaifglcGfaoclfaCfgORbbaAcl4ciGgCaCciSgCE86bbalcVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbalc7faOaCfgORbbaAciGgAaAciSgAE86bbalctfaOaAfgARbbaoRbegOco4gCaCciSgCE86bbalc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc93faAaCfgARbbaOciGgOaOciSgOE86bbalc94faAaOfgARbbaoRbdgOco4gCaCciSgCE86bbalc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc97faAaCfgARbbaOciGgOaOciSgOE86bbalc98faAaOfgORbbaoRbigoco4gAaAciSgAE86bbalc99faOaAfgORbbaocl4ciGgAaAciSgAE86bbalc9:faOaAfgORbbaocd4ciGgAaAciSgAE86bbalcufaOaAfglRbbaociGgoaociSgoE86bbalaofhoxdkaOaoRbwaoRbbgAcl4glalcsSgCE86bbawcj;cbfaifglcGfaocwfaCfgORbbaAcsGgAaAcsSgAE86bbalcVfaOaAfgORbbaoRbegAcl4gCaCcsSgCE86bbalc7faOaCfgORbbaAcsGgAaAcsSgAE86bbalctfaOaAfgORbbaoRbdgAcl4gCaCcsSgCE86bbalc91faOaCfgORbbaAcsGgAaAcsSgAE86bbalc4faOaAfgORbbaoRbigAcl4gCaCcsSgCE86bbalc93faOaCfgORbbaAcsGgAaAcsSgAE86bbalc94faOaAfgORbbaoRblgAcl4gCaCcsSgCE86bbalc95faOaCfgORbbaAcsGgAaAcsSgAE86bbalc96faOaAfgORbbaoRbvgAcl4gCaCcsSgCE86bbalc97faOaCfgORbbaAcsGgAaAcsSgAE86bbalc98faOaAfgORbbaoRbogAcl4gCaCcsSgCE86bbalc99faOaCfgORbbaAcsGgAaAcsSgAE86bbalc9:faOaAfgORbbaoRbrgocl4gAaAcsSgAE86bbalcufaOaAfglRbbaocsGgoaocsSgoE86bbalaofhoxekaOao8Pbb83bbaOcwfaocwf8Pbb83bbaoczfhokdnaiam9pmbaiczfhlarao9RcL0mekkaiam6miaoTmidnakTmbawaPfRbbhOawcj;cbfhlazhiakhHinaialRbbgAce4cbaAceG9R7aOfgO86bbaiadfhialcefhlaHcufgHmbkkazcefhzaPcefgPad6hsaohHaPad9hmexvkkcbhoasceGmdxikaoaxad2fhPdnakTmbcbhmcehsawcjdfhCinarao9Rax6miaoTmdaoaxfhoawamfRbbhOawcj;cbfhlaChiakhHinaialRbbgAce4cbaAceG9R7aOfgO86bbaiadfhialcefhlaHcufgHmbkaCcefhCamcefgmad6hsamad9hmbkaPhoxikcbhlcehsinarao9Rax6mdaoTmeaoaxfhoalcefglad6hsadal9hmbkaPhoxdkcbhoasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqaombkc9:hoxekcbc99arao9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;xzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfalaDcu7gPcl4fcsGcitfgsydlhzasydbhHdnaDcsGgDak9pmbavaiaPfcsGcdtfydbaxaDEhsaDThDdndnadcd9hmbabarcetfgPaH87ebaPcdfaz87ebaPclfas87ebxekabarcdtfgPaHBdbaPclfazBdbaPcwfasBdbkaxaDfhxavc;abfalcitfgPasBdbaPazBdlavaicdtfasBdbavc;abfalcefcsGglcitfgPaHBdbaPasBdlaiaDfhialcefhlxdkdndnaDcsSmbamaDfaDc987fcefhmxekaocefhDao8SbbgscFeGhPdndnascu9mmbaDhoxekaocvfhoaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhokaPce4cbaPceG9R7amfhmkdndnadcd9hmbabarcetfgDaH87ebaDcdfaz87ebaDclfam87ebxekabarcdtfgDaHBdbaDclfazBdbaDcwfamBdbkavc;abfalcitfgDamBdbaDazBdlavaicdtfamBdbavc;abfalcefcsGglcitfgDaHBdbaDamBdlaicefhialcefhlxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHcdfaD87ebaHclfas87ebxekabarcdtfgHaxBdbaHclfaDBdbaHcwfasBdbkavaicdtfaxBdbavc;abfalcitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfalcefcsGcitfgHasBdbaHaDBdlavaiaPfcsGgicdtfasBdbavc;abfalcdfcsGglcitfgDaxBdbaDasBdlalcefhlaiaOfhiazaOfhxxekaxcbaoRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbaocefhDxekaocdfhDao8SbegPcFeGhsdnaPcu9kmbaocofhAascFbGhscrhodninaD8SbbgPcFbGaotasVhsaPcu9kmeaDcefhDaocrfgoc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbgocFeGhPdnaocu9kmbaDcvfhzaPcFbGhPcrhodninas8SbbgDcFbGaotaPVhPaDcu9kmeascefhsaocrfgoc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashoxekascefhoas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninao8SbbgscFbGaDtaPVhPascu9kmeaocefhoaDcrfgDc8J9hmbkaOhoxekaocefhokaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDcdfaz87ebaDclfaO87ebxekabarcdtfgDaABdbaDclfazBdbaDcwfaOBdbkavc;abfalcitfgDazBdbaDaABdlavaicdtfaABdbavc;abfalcefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfalcdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiarcifgrae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2gdTmbinababydbgecwtcw91:Yaece91cjjj;8ifcjjj98G::NUdbabclfhbadcufgdmbkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",o=WebAssembly.instantiate(r(i),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function r(e){for(var n=new Uint8Array(e.length),i=0;i<e.length;++i){var o=e.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}function s(e,t,i,o,r,s){var a=n.exports.sbrk,c=i+3&-4,l=a(c*o),u=a(r.length),d=new Uint8Array(n.exports.memory.buffer);d.set(r,u);var h=e(l,i,o,u,r.length);if(0==h&&s&&s(l,c,o),t.set(d.subarray(l,l+i*o)),a(l-a(0)),0!=h)throw new Error("Malformed buffer data: "+h)}var a={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},l=[],u=0;function d(e){var t={object:new Worker(e),pending:0,requests:{}};return t.object.onmessage=function(e){var n=e.data;t.pending-=n.count,t.requests[n.id][n.action](n.value),delete t.requests[n.id]},t}function h(e){for(var t="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(r(i))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+s.toString()+f.toString(),n=new Blob([t],{type:"text/javascript"}),o=URL.createObjectURL(n),a=0;a<e;++a)l[a]=d(o);URL.revokeObjectURL(o)}function f(e){o.then((function(){var t=e.data;try{var i=new Uint8Array(t.count*t.size);s(n.exports[t.mode],i,t.count,t.size,t.source,n.exports[t.filter]),self.postMessage({id:t.id,count:t.count,action:"resolve",value:i},[i.buffer])}catch(e){self.postMessage({id:t.id,count:t.count,action:"reject",value:e})}}))}return{ready:o,supported:!0,useWorkers:function(e){h(e)},decodeVertexBuffer:function(e,t,i,o,r){s(n.exports.meshopt_decodeVertexBuffer,e,t,i,o,n.exports[a[r]])},decodeIndexBuffer:function(e,t,i,o){s(n.exports.meshopt_decodeIndexBuffer,e,t,i,o)},decodeIndexSequence:function(e,t,i,o){s(n.exports.meshopt_decodeIndexSequence,e,t,i,o)},decodeGltfBuffer:function(e,t,i,o,r,l){s(n.exports[c[r]],e,t,i,o,n.exports[a[l]])},decodeGltfBufferAsync:function(e,t,i,r,d){return l.length>0?function(e,t,n,i,o){for(var r=l[0],s=1;s<l.length;++s)l[s].pending<r.pending&&(r=l[s]);return new Promise((function(s,a){var c=new Uint8Array(n),l=u++;r.pending+=e,r.requests[l]={resolve:s,reject:a},r.object.postMessage({id:l,count:e,size:t,source:c,mode:i,filter:o},[c.buffer])}))}(e,t,i,c[r],a[d]):o.then((function(){var o=new Uint8Array(e*t);return s(n.exports[c[r]],o,e,t,i,n.exports[a[d]]),o}))}}}()),c=(function(){var e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};WebAssembly.instantiate(function(t){for(var n=new Uint8Array(9709),i=0;i<9709;++i){var o=t.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<9709;++i)n[r++]=n[i]<60?e[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}("b9H79TebbbecD9Geueu9Geub9Gbb9Gquuuuuuu99uueu9Gvuuuuub9Gluuuue999Giuuue999Gluuuueu9Giuuueuimxdilvorbwwbewlve9Weiiviebeoweuecj;jekr7oo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bbz9TW79O9V9Wt9F79P9T9W29P9M95beX9TW79O9V9Wt9F79P9T9W29P9M959t9J9H2Wbla9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9Wbvl79IV9RboDwebcekdDqq:XJxdbkp8WiKuP99Hu8Jjjjjbcj;bb9Rgq8KjjjjbaqcKfcbc;Kbz1jjjb8AaqcualcdtgkalcFFFFi0Egxcbyd;S1jjbHjjjjbbgmBdKaqceBd94aqamBdwaqaxcbyd;S1jjbHjjjjbbgPBd3aqcdBd94aqaPBdxaqcuadcitadcFFFFe0Ecbyd;S1jjbHjjjjbbgsBdaaqciBd94aqasBdzaqcwfaeadalcbz:cjjjbaqaxcbyd;S1jjbHjjjjbbgzBd8KaqclBd94aqaxcbyd;S1jjbHjjjjbbgHBdyaqcvBd94alcd4alfhOcehAinaAgCcethAaCaO6mbkcbhXaqcuaCcdtgAaCcFFFFi0Ecbyd;S1jjbHjjjjbbgOBd8SaqcoBd94aOcFeaAz1jjjbhQdnalTmbavcd4hLaCcufhKinaiaXaL2cdtfgYydlgCcH4aC7c:F:b:DD2aYydbgCcH4aC7c;D;O:B8J27aYydwgCcH4aC7c:3F;N8N27hOcbhCdndninaQaOaKGgOcdtfg8AydbgAcuSmeaiaAaL2cdtfaYcxz:ljjjbTmdaCcefgCaOfhOaCaK9nmbxdkka8AaXBdbaXhAkazaXcdtfaABdbaXcefgXal9hmbkcbhCaHhAinaAaCBdbaAclfhAalaCcefgC9hmbkcbhCazhAaHhOindnaCaAydbgKSmbaOaHaKcdtfgKydbBdbaKaCBdbkaAclfhAaOclfhOalaCcefgC9hmbkkcbhOaqalcbyd;S1jjbHjjjjbbgYBd8WaqcrBd94aqaxcbyd;S1jjbHjjjjbbgCBd80aqcwBd94aqaxcbyd;S1jjbHjjjjbbgABdUaqcDBd94aCcFeakz1jjjbhEaAcFeakz1jjjbh3dnalTmbascwfh5indnamaOcdtgCfydbg8ETmbasaPaCfydbcitfh8Fa3aCfhaaEaCfhXcbhLindndna8FaLcitfydbgQaO9hmbaXaOBdbaaaOBdbxekdnamaQcdtgkfydbghTmbasaPakfydbcitgCfydbaOSmeahcufh8Aa5aCfhAcbhCina8AaCSmeaCcefhCaAydbhKaAcwfhAaKaO9hmbkaCah6meka3akfgCaOaQaCydbcuSEBdbaXaQaOaXydbcuSEBdbkaLcefgLa8E9hmbkkaOcefgOal9hmbkazhAaHhOa3hKaEhLcbhCindndnaCaAydbg8A9hmbdnaCaOydbg8A9hmbaLydbh8AdnaKydbgQcu9hmba8Acu9hmbaYaCfcb86bbxikaYaCfhXdnaCaQSmbaCa8ASmbaXce86bbxikaXcl86bbxdkdnaCaHa8AcdtgQfydb9hmbdnaKydbgXcuSmbaCaXSmbaLydbgkcuSmbaCakSmba3aQfydbg8EcuSmba8Ea8ASmbaEaQfydbgQcuSmbaQa8ASmbdnazaXcdtfydbazaQcdtfydb9hmbazakcdtfydbaza8Ecdtfydb9hmbaYaCfcd86bbxlkaYaCfcl86bbxikaYaCfcl86bbxdkaYaCfcl86bbxekaYaCfaYa8AfRbb86bbkaAclfhAaOclfhOaKclfhKaLclfhLalaCcefgC9hmbkawceGTmbaYhCalhAindnaCRbbce9hmbaCcl86bbkaCcefhCaAcufgAmbkkcbhLcualcx2alc;v:Q;v:Qe0Ecbyd;S1jjbHjjjjbbhmaqcKfaqyd94gCcdtfamBdbaqaCcefgABd94amaialavz:djjjb8AaqcKfaAcdtfcualc8S2gAalc;D;O;f8U0Ecbyd;S1jjbHjjjjbbgOBdbaqaCcdfBd94aOcbaAz1jjjbhsdnadTmbaehAindnamaAclfydbg8Acx2fgCIdbamaAydbgQcx2fgOIdbgg:tg8JamaAcwfydbgXcx2fgKIdlaOIdlg8K:tg8LNaKIdbag:tg8MaCIdla8K:tg8NN:tgyayNa8NaKIdwaOIdwg8P:tgINa8LaCIdwa8P:tg8NN:tg8La8LNa8Na8MNaIa8JN:tg8Ja8JNMM:rg8MJbbbb9ETmbaya8M:vhya8Ja8M:vh8Ja8La8M:vh8LkasazaQcdtfydbc8S2fgCa8La8M:rg8Ma8LNNg8NaCIdbMUdbaCa8Ja8Ma8JNg8RNgIaCIdlMUdlaCaya8MayNg8SNgRaCIdwMUdwaCa8Ra8LNg8RaCIdxMUdxaCa8Sa8LNg8UaCIdzMUdzaCa8Sa8JNg8SaCIdCMUdCaCa8La8Maya8PNa8LagNa8Ka8JNMM:mg8KNggNg8LaCIdKMUdKaCa8JagNg8JaCId3MUd3aCayagNgyaCIdaMUdaaCaga8KNggaCId8KMUd8KaCa8MaCIdyMUdyasaza8Acdtfydbc8S2fgCa8NaCIdbMUdbaCaIaCIdlMUdlaCaRaCIdwMUdwaCa8RaCIdxMUdxaCa8UaCIdzMUdzaCa8SaCIdCMUdCaCa8LaCIdKMUdKaCa8JaCId3MUd3aCayaCIdaMUdaaCagaCId8KMUd8KaCa8MaCIdyMUdyasazaXcdtfydbc8S2fgCa8NaCIdbMUdbaCaIaCIdlMUdlaCaRaCIdwMUdwaCa8RaCIdxMUdxaCa8UaCIdzMUdzaCa8SaCIdCMUdCaCa8LaCIdKMUdKaCa8JaCId3MUd3aCayaCIdaMUdaaCagaCId8KMUd8KaCa8MaCIdyMUdyaAcxfhAaLcifgLad6mbkcbh8AaehXincbhAinaYaeaAc:81jjbfydbgQa8AfcdtfydbgOfRbbhCdndnaYaXaAfydbgKfRbbgLc99fcFeGcpe0mbaCceSmbaCcd9hmekdnaLcufcFeGce0mbaEaKcdtfydbaO9hmekdnaCcufcFeGce0mba3aOcdtfydbaK9hmekdnaLcv2aCfc:G1jjbfRbbTmbazaOcdtfydbazaKcdtfydb0mekJbbacJbbjZaCceSEh8MaLceShkamaeaQcdtc:81jjbfydba8Afcdtfydbcx2fhCdnamaOcx2fgLIdwamaKcx2fgQIdwg8K:tg8La8LNaLIdbaQIdbg8P:tg8Ja8JNaLIdlaQIdlg8N:tgyayNMM:rggJbbbb9ETmba8Lag:vh8Layag:vhya8Jag:vh8JkJbbaca8MakEh8SdnaCIdwa8K:tg8Ma8La8Ma8LNaCIdba8P:tgRa8JNayaCIdla8N:tg8RNMMgIN:tg8Ma8MNaRa8JaIN:tg8La8LNa8RayaIN:tg8Ja8JNMM:rgyJbbbb9ETmba8May:vh8Ma8Jay:vh8Ja8Lay:vh8LkasazaKcdtfydbc8S2fgCa8La8SagNgya8LNNgIaCIdbMUdbaCa8Jaya8JNg8SNgRaCIdlMUdlaCa8Maya8MNggNg8RaCIdwMUdwaCa8Sa8LNg8SaCIdxMUdxaCaga8LNg8UaCIdzMUdzaCaga8JNg8VaCIdCMUdCaCa8Laya8Ma8KNa8La8PNa8Na8JNMM:mg8KNggNg8LaCIdKMUdKaCa8JagNg8JaCId3MUd3aCa8MagNg8MaCIdaMUdaaCaga8KNggaCId8KMUd8KaCayaCIdyMUdyasazaOcdtfydbc8S2fgCaIaCIdbMUdbaCaRaCIdlMUdlaCa8RaCIdwMUdwaCa8SaCIdxMUdxaCa8UaCIdzMUdzaCa8VaCIdCMUdCaCa8LaCIdKMUdKaCa8JaCId3MUd3aCa8MaCIdaMUdaaCagaCId8KMUd8KaCayaCIdyMUdykaAclfgAcx9hmbkaXcxfhXa8Acifg8Aad6mbkkdnabaeSmbabaeadcdtz:hjjjb8Akcuadcx2adc;v:Q;v:Qe0Ecbyd;S1jjbHjjjjbbhaaqcKfaqyd94gCcdtfaaBdbaqaCcefgABd94aqcKfaAcdtfcuadcdtadcFFFFi0Ecbyd;S1jjbHjjjjbbg5BdbaqaCcdfgABd94aqcKfaAcdtfaxcbyd;S1jjbHjjjjbbgiBdbaqaCcifgABd94aqcKfaAcdtfalcbyd;S1jjbHjjjjbbg8WBdbaqaCclfBd94JbbbbhRdnadao9nmbararNh8Saacwfh8Xaqydwh8Yaqydxh8Zaqydzh80JbbbbhRinaqcwfabadgPalazz:cjjjbcbhhabhXcbhkincbhCindnazaXaCfydbgOcdtgefydbgLazabaCc:81jjbfydbakfcdtfydbgAcdtfydbg8ASmbaYaAfRbbgQcv2aYaOfRbbgKfc;q1jjbfRbbg8FaKcv2aQfg8Ec;q1jjbfRbbgdVcFeGTmbdna8Ec:G1jjbfRbbTmba8AaL0mekdnaKaQ9hmbaKcufcFeGce0mbaEaefydbaA9hmekaaahcx2fgKaAaOadcFeGgLEBdlaKaOaAaLEBdbaKaLa8FGcb9hBdwahcefhhkaCclfgCcx9hmbkaXcxfhXakcifgkaP6mbkdndnahTmbaahAahh8AinaAcwfgQJbbbbJbbjZasazaAydbgOcdtfydbc8S2fgCIdyg8L:va8LJbbbb9BEaCIdwamaAclfgeydbgKcx2fgLIdwg8LNaCIdzaLIdbg8JNaCIdaMg8Ma8MMMa8LNaCIdlaLIdlg8MNaCIdCa8LNaCId3Mg8La8LMMa8MNaCIdba8JNaCIdxa8MNaCIdKMg8La8LMMa8JNaCId8KMMM:lNgyJbbbbJbbjZasazaKaOaQydbgLEgQcdtfydbc8S2fgCIdyg8L:va8LJbbbb9BEaCIdwamaOaKaLEgXcx2fgLIdwg8LNaCIdzaLIdbg8JNaCIdaMg8Ma8MMMa8LNaCIdlaLIdlg8MNaCIdCa8LNaCId3Mg8La8LMMa8MNaCIdba8JNaCIdxa8MNaCIdKMg8La8LMMa8JNaCId8KMMM:lNg8Laya8L9FgCEUdbaeaKaXaCEBdbaAaOaQaCEBdbaAcxfhAa8Acufg8Ambkaqcjefcbcj;abz1jjjb8Aa8XhCahhAinaqcjefaCydbcO4c;8ZGfgOaOydbcefBdbaCcxfhCaAcufgAmbkcbhCcbhAinaqcjefaCfgOydbhKaOaABdbaKaAfhAaCclfgCcj;ab9hmbkcbhCa8XhAinaqcjefaAydbcO4c;8ZGfgOaOydbgOcefBdba5aOcdtfaCBdbaAcxfhAahaCcefgC9hmbkaPao9RgOci9Uh81dnalTmbcbhCaihAinaAaCBdbaAclfhAalaCcefgC9hmbkkcbhBa8Wcbalz1jjjbh83aOcO9UhUa81ce4h85cbh86cbhkdninaaa5akcdtfydbcx2fgXIdwg8Ja8S9Emea86a819pmeJFFuuh8Ldna85ah9pmbaaa5a85cdtfydbcx2fIdwJbb;aZNh8Lkdna8Ja8L9ETmba86aU0mdkdna83azaXydlg87cdtg88fydbgOfg89Rbba83azaXydbgecdtg8:fydbgZfgnRbbVmbdna8YaZcdtgCfydbgKTmba80a8ZaCfydbcitfhCamaOcx2fg8Ecwfhda8EclfhxamaZcx2fg8Fcwfhva8FclfhwcbhAcehQdnindnaiaCydbcdtfydbgLaOSmbaiaCclfydbcdtfydbg8AaOSmbama8Acx2fg8AIdbamaLcx2fgLIdbg8M:tg8LawIdbaLIdlgy:tggNa8FIdba8M:tg8Ka8AIdlay:tg8JN:ta8LaxIdbay:tg8PNa8EIdba8M:tg8Na8JN:tNa8JavIdbaLIdwgy:tgINaga8AIdway:tg8MN:ta8JadIdbay:tgyNa8Pa8MN:tNa8Ma8KNaIa8LN:ta8Ma8NNaya8LN:tNMMJbbbb9DmdkaCcwfhCaAcefgAaK6hQaKaA9hmbkkaQceGTmba85cefh85xekaXcwfhKasaOc8S2fgCasaZc8S2fgAIdbaCIdbMUdbaCaAIdlaCIdlMUdlaCaAIdwaCIdwMUdwaCaAIdxaCIdxMUdxaCaAIdzaCIdzMUdzaCaAIdCaCIdCMUdCaCaAIdKaCIdKMUdKaCaAId3aCId3MUd3aCaAIdaaCIdaMUdaaCaAId8KaCId8KMUd8KaCaAIdyaCIdyMUdydndndndnaYaefgARbbc9:fPdebdkaehCinaiaCcdtgCfaOBdbaHaCfydbgCae9hmbxikkaHa88fydbhCaHa8:fydbheaia8:fa87BdbaCh87kaiaecdtfa87Bdbkance86bba89ce86bbaKIdbg8LaRaRa8L9DEhRaBcefhBcecdaARbbceSEa86fh86kakcefgkah9hmbkkaBTmbdnalTmbcbhAaEhCindnaCydbgOcuSmbdnaAaiaOcdtgKfydbgO9hmbaEaKfydbhOkaCaOBdbkaCclfhCalaAcefgA9hmbkcbhAa3hCindnaCydbgOcuSmbdnaAaiaOcdtgKfydbgO9hmba3aKfydbhOkaCaOBdbkaCclfhCalaAcefgA9hmbkkcbhdabhCcbhLindnaiaCydbcdtfydbgAaiaCclfydbcdtfydbgOSmbaAaiaCcwfydbcdtfydbgKSmbaOaKSmbabadcdtfg8AaABdba8AclfaOBdba8AcwfaKBdbadcifhdkaCcxfhCaLcifgLaP9pmdxbkkaPhdxdkadao0mbkkdnaDTmbaDaR:rUdbkaqyd94gCcdtaqcKffc98fhzdninaCTmeazydbcbyd;W1jjbH:bjjjbbazc98fhzaCcufhCxbkkaqcj;bbf8Kjjjjbadk;pleouabydbcbaicdtz1jjjb8Aadci9UhvdnadTmbabydbhodnalTmbaehradhwinaoalarydbcdtfydbcdtfgDaDydbcefBdbarclfhrawcufgwmbxdkkaehradhwinaoarydbcdtfgDaDydbcefBdbarclfhrawcufgwmbkkdnaiTmbabydbhrabydlhwcbhDaihoinawaDBdbawclfhwarydbaDfhDarclfhraocufgombkkdnadci6mbavceavce0EhqabydlhvabydwhrinaecwfydbhwaeclfydbhDaeydbhodnalTmbalawcdtfydbhwalaDcdtfydbhDalaocdtfydbhokaravaocdtfgdydbcitfaDBdbaradydbcitfawBdladadydbcefBdbaravaDcdtfgdydbcitfawBdbaradydbcitfaoBdladadydbcefBdbaravawcdtfgwydbcitfaoBdbarawydbcitfaDBdlawawydbcefBdbaecxfheaqcufgqmbkkdnaiTmbabydlhrabydbhwinararydbawydb9RBdbawclfhwarclfhraicufgimbkkk:3ldouv998Jjjjjbca9Rglczfcwfcbyd11jjbBdbalcb8Pdj1jjb83izalcwfcbydN1jjbBdbalcb8Pd:m1jjb83ibdnadTmbaicd4hvdnabTmbavcdthocbhraehwinabarcx2fgiaearav2cdtfgDIdbUdbaiaDIdlUdlaiaDIdwUdwcbhiinalczfaifgDawaifIdbgqaDIdbgkakaq9EEUdbalaifgDaqaDIdbgkakaq9DEUdbaiclfgicx9hmbkawaofhwarcefgrad9hmbxdkkavcdthrcbhwincbhiinalczfaifgDaeaifIdbgqaDIdbgkakaq9EEUdbalaifgDaqaDIdbgkakaq9DEUdbaiclfgicx9hmbkaearfheawcefgwad9hmbkkalIdbalIdzgk:tJbbbb:xgqalIdlalIdCgx:tgmamaq9DEgqalIdwalIdKgm:tgPaPaq9DEhPdnabTmbadTmbJbbbbJbbjZaP:vaPJbbbb9BEhqinabaqabIdbak:tNUdbabclfgiaqaiIdbax:tNUdbabcwfgiaqaiIdbam:tNUdbabcxfhbadcufgdmbkkaPk:Qdidui99ducbhi8Jjjjjbca9Rglczfcwfcbyd11jjbBdbalcb8Pdj1jjb83izalcwfcbydN1jjbBdbalcb8Pd:m1jjb83ibdndnaembJbbjFhvJbbjFhoJbbjFhrxekadcd4cdthwincbhdinalczfadfgDabadfIdbgoaDIdbgrarao9EEUdbaladfgDaoaDIdbgrarao9DEUdbadclfgdcx9hmbkabawfhbaicefgiae9hmbkalIdwalIdK:thralIdlalIdC:thoalIdbalIdz:thvkavJbbbb:xgvaoaoav9DEgoararao9DEk9DeeuabcFeaicdtz1jjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk9teiucbcbyd;01jjbgeabcifc98GfgbBd;01jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;01jjbgeabcrfc94GfgbBd;01jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;01jjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;01jjbfgdBd;01jjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akk6eiucbhidnadTmbdninabRbbglaeRbbgv9hmeaecefheabcefhbadcufgdmbxdkkalav9Rhikaikk:cedbcjwk9PFFuuFFuuFFuuFFuFFFuFFFuFbbbbbbbbeeebeebebbeeebebbbbbebebbbbbebbbdbbbbbbbbbbbbbbbeeeeebebbbbbebbbbbeebbbbbbc;Swkxebbbdbbbj9Kbb"),{}).then((function(e){e.instance.exports.__wasm_call_ctors()}))}(),n(757587)),l=n(897955);function u(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resourceCache,n=e.gltf,r=e.bufferViewId,a=e.gltfResource,c=e.baseResource,u=e.cacheKey;i.Z.typeOf.func("options.resourceCache",t),i.Z.typeOf.object("options.gltf",n),i.Z.typeOf.number("options.bufferViewId",r),i.Z.typeOf.object("options.gltfResource",a),i.Z.typeOf.object("options.baseResource",c);const d=n.bufferViews[r];let h,f,p,m,_=d.buffer,g=d.byteOffset,Z=d.byteLength,y=!1;if((0,s.Z)(d,"EXT_meshopt_compression")){const e=d.extensions.EXT_meshopt_compression;_=e.buffer,g=(0,o.Z)(e.byteOffset,0),Z=e.byteLength,y=!0,h=e.byteStride,f=e.count,p=e.mode,m=(0,o.Z)(e.filter,"NONE")}const b=n.buffers[_];this._hasMeshopt=y,this._meshoptByteStride=h,this._meshoptCount=f,this._meshoptMode=p,this._meshoptFilter=m,this._resourceCache=t,this._gltfResource=a,this._baseResource=c,this._buffer=b,this._bufferId=_,this._byteOffset=g,this._byteLength=Z,this._cacheKey=u,this._bufferLoader=void 0,this._typedArray=void 0,this._state=l.Z.UNLOADED,this._promise=void 0}(0,r.Z)(Object.create)&&(u.prototype=Object.create(c.Z.prototype),u.prototype.constructor=u),Object.defineProperties(u.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),u.prototype.load=async function(){return(0,r.Z)(this._promise)||(this._state=l.Z.LOADING,this._promise=async function(e){try{const t=function(e){const t=e._resourceCache,n=e._buffer;if((0,r.Z)(n.uri)){const i=e._baseResource.getDerivedResource({url:n.uri});return t.getExternalBufferLoader({resource:i})}return t.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:e._bufferId})}(e);if(e._bufferLoader=t,await t.load(),e.isDestroyed())return;const n=t.typedArray,i=new Uint8Array(n.buffer,n.byteOffset+e._byteOffset,e._byteLength);if(e.unload(),e._typedArray=i,e._hasMeshopt){const t=e._meshoptCount,n=e._meshoptByteStride,i=new Uint8Array(t*n);a.decodeGltfBuffer(i,t,n,e._typedArray,e._meshoptMode,e._meshoptFilter),e._typedArray=i}return e._state=l.Z.READY,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=l.Z.FAILED;const n="Failed to load buffer view";throw e.getError(n,t)}}(this)),this._promise},u.prototype.unload=function(){(0,r.Z)(this._bufferLoader)&&!this._bufferLoader.isDestroyed()&&this._resourceCache.unload(this._bufferLoader),this._bufferLoader=void 0,this._typedArray=void 0};const d=u},513581:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(234146),r=n(11020),s=n(982960),a=n(757587),c=n(897955);function l(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resourceCache,n=e.gltf,r=e.draco,s=e.gltfResource,a=e.baseResource,l=e.cacheKey;i.Z.typeOf.func("options.resourceCache",t),i.Z.typeOf.object("options.gltf",n),i.Z.typeOf.object("options.draco",r),i.Z.typeOf.object("options.gltfResource",s),i.Z.typeOf.object("options.baseResource",a),this._resourceCache=t,this._gltfResource=s,this._baseResource=a,this._gltf=n,this._draco=r,this._cacheKey=l,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=c.Z.UNLOADED,this._promise=void 0,this._dracoError=void 0}function u(e,t){throw e.unload(),e._state=c.Z.FAILED,e.getError("Failed to load Draco",t)}(0,r.Z)(Object.create)&&(l.prototype=Object.create(a.Z.prototype),l.prototype.constructor=l),Object.defineProperties(l.prototype,{cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}}),l.prototype.load=async function(){return(0,r.Z)(this._promise)||(this._state=c.Z.LOADING,this._promise=async function(e){const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._draco.bufferView,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;return e._bufferViewTypedArray=n.typedArray,e._state=c.Z.PROCESSING,e}catch(t){if(e.isDestroyed())return;u(e,t)}}(this)),this._promise},l.prototype.process=function(e){if(i.Z.typeOf.object("frameState",e),this._state===c.Z.READY)return!0;if(this._state!==c.Z.PROCESSING)return!1;if((0,r.Z)(this._dracoError)&&u(this,this._dracoError),!(0,r.Z)(this._bufferViewTypedArray))return!1;if((0,r.Z)(this._decodePromise))return!1;const t=this._draco,n=this._gltf.bufferViews[t.bufferView],o=t.attributes,a={array:new Uint8Array(this._bufferViewTypedArray),bufferView:n,compressedAttributes:o,dequantizeInShader:!0},l=s.Z.decodeBufferView(a);if(!(0,r.Z)(l))return!1;this._decodePromise=async function(e,t){try{const n=await t;if(e.isDestroyed())return;return e.unload(),e._decodedData={indices:n.indexArray,vertexAttributes:n.attributeData},e._state=c.Z.READY,e._baseResource}catch(t){if(e.isDestroyed())return;e._dracoError=t}}(this,l)},l.prototype.unload=function(){(0,r.Z)(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0};const d=l},676674:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(790087),o=n(234146),r=n(11020),s=n(143073),a=n(684910),c=n(217066),l=n(757587),u=n(897955);function d(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resourceCache,n=e.gltf,r=e.imageId,s=e.gltfResource,a=e.baseResource,c=e.cacheKey;i.Z.typeOf.func("options.resourceCache",t),i.Z.typeOf.object("options.gltf",n),i.Z.typeOf.number("options.imageId",r),i.Z.typeOf.object("options.gltfResource",s),i.Z.typeOf.object("options.baseResource",a);const l=n.images[r],d=l.bufferView,h=l.uri;this._resourceCache=t,this._gltfResource=s,this._baseResource=a,this._gltf=n,this._bufferViewId=d,this._uri=h,this._cacheKey=c,this._bufferViewLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._state=u.Z.UNLOADED,this._promise=void 0}function h(e){let t;return Array.isArray(e)&&(t=e.slice(1,e.length).map((function(e){return e.bufferView})),e=e[0]),{image:e,mipLevels:t}}function f(e,t,n){return e.unload(),e._state=u.Z.FAILED,Promise.reject(e.getError(n,t))}(0,r.Z)(Object.create)&&(d.prototype=Object.create(l.Z.prototype),d.prototype.constructor=d),Object.defineProperties(d.prototype,{cacheKey:{get:function(){return this._cacheKey}},image:{get:function(){return this._image}},mipLevels:{get:function(){return this._mipLevels}}}),d.prototype.load=function(){return(0,r.Z)(this._promise)?this._promise:(0,r.Z)(this._bufferViewId)?(this._promise=async function(e){e._state=u.Z.LOADING;const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;const i=n.typedArray,o=await async function(e){const t=function(e){const t=e.subarray(0,2),n=e.subarray(0,4),i=e.subarray(8,12);if(255===t[0]&&216===t[1])return"image/jpeg";if(137===t[0]&&80===t[1])return"image/png";if(171===t[0]&&75===t[1])return"image/ktx2";if(82===n[0]&&73===n[1]&&70===n[2]&&70===n[3]&&87===i[0]&&69===i[1]&&66===i[2]&&80===i[3])return"image/webp";throw new c.Z("Image format is not recognized")}(e);if("image/ktx2"===t){const t=new Uint8Array(e);return(0,a.Z)(t)}return d._loadImageFromTypedArray({uint8Array:e,format:t,flipY:!1,skipColorSpaceConversion:!0})}(i);if(e.isDestroyed())return;const r=h(o);return e.unload(),e._image=r.image,e._mipLevels=r.mipLevels,e._state=u.Z.READY,e}catch(t){if(e.isDestroyed())return;return f(e,t,"Failed to load embedded image")}}(this),this._promise):(this._promise=async function(e){e._state=u.Z.LOADING;const t=e._baseResource,n=e._uri,i=t.getDerivedResource({url:n});try{const t=await function(e){const t=e.getUrlComponent(!1,!0);return p.test(t)?(0,a.Z)(e):e.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0})}(i);if(e.isDestroyed())return;const n=h(t);return e.unload(),e._image=n.image,e._mipLevels=n.mipLevels,e._state=u.Z.READY,e}catch(t){if(e.isDestroyed())return;return f(e,t,`Failed to load image: ${n}`)}}(this),this._promise)};const p=/(^data:image\/ktx2)|(\.ktx2$)/i;d.prototype.unload=function(){(0,r.Z)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._uri=void 0,this._image=void 0,this._mipLevels=void 0,this._gltf=void 0},d._loadImageFromTypedArray=s.Z;const m=d},912017:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(790087),o=n(449809),r=n(234146),s=n(11020),a=n(906439),c=n(765153),l=n(342209),u=n(379593),d=n(915323),h=n(754672),f=n(757587),p=n(897955);function m(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).resourceCache,n=e.gltf,o=e.accessorId,s=e.gltfResource,a=e.baseResource,l=e.draco,u=e.cacheKey,d=(0,r.Z)(e.asynchronous,!0),h=(0,r.Z)(e.loadBuffer,!1),f=(0,r.Z)(e.loadTypedArray,!1);if(i.Z.typeOf.func("options.resourceCache",t),i.Z.typeOf.object("options.gltf",n),i.Z.typeOf.number("options.accessorId",o),i.Z.typeOf.object("options.gltfResource",s),i.Z.typeOf.object("options.baseResource",a),!h&&!f)throw new c.Z("At least one of loadBuffer and loadTypedArray must be true.");const m=n.accessors[o].componentType;this._resourceCache=t,this._gltfResource=s,this._baseResource=a,this._gltf=n,this._accessorId=o,this._indexDatatype=m,this._draco=l,this._cacheKey=u,this._asynchronous=d,this._loadBuffer=h,this._loadTypedArray=f,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=p.Z.UNLOADED,this._promise=void 0}(0,s.Z)(Object.create)&&(m.prototype=Object.create(f.Z.prototype),m.prototype.constructor=m),Object.defineProperties(m.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},indexDatatype:{get:function(){return this._indexDatatype}}});const _=new Z;function g(e,t){throw e.unload(),e._state=p.Z.FAILED,e.getError("Failed to load index buffer",t)}function Z(){this.typedArray=void 0,this.indexDatatype=void 0,this.context=void 0,this.buffer=void 0}function y(e,t,n){const i=u.Z.createIndexBuffer({typedArray:e,context:n,usage:d.Z.STATIC_DRAW,indexDatatype:t});return i.vertexArrayDestroyable=!1,i}m.prototype.load=async function(){return(0,s.Z)(this._promise)?this._promise:(0,s.Z)(this._draco)?(this._promise=async function(e){e._state=p.Z.LOADING;const t=e._resourceCache;try{const n=t.getDracoLoader({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._dracoLoader=n,await n.load(),e.isDestroyed())return;return e._state=p.Z.LOADED,e}catch(t){if(e.isDestroyed())return;g(e,t)}}(this),this._promise):(this._promise=async function(e){const t=e._gltf,n=e._accessorId,i=t.accessors[n].bufferView;e._state=p.Z.LOADING;const o=e._resourceCache;try{const n=o.getBufferViewLoader({gltf:t,bufferViewId:i,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;const r=n.typedArray;return e._typedArray=function(e,t){const n=e._gltf,i=e._accessorId,o=n.accessors[i],r=o.count,s=o.componentType,c=l.Z.getSizeInBytes(s);let u,d=t.buffer,h=t.byteOffset+o.byteOffset;if(h%c!=0){const e=new Uint8Array(d,h,r*c);d=new Uint8Array(e).buffer,h=0,(0,a.Z)("index-buffer-unaligned",`The index array is not aligned to a ${c}-byte boundary.`)}return s===l.Z.UNSIGNED_BYTE?u=new Uint8Array(d,h,r):s===l.Z.UNSIGNED_SHORT?u=new Uint16Array(d,h,r):s===l.Z.UNSIGNED_INT&&(u=new Uint32Array(d,h,r)),u}(e,r),e._state=p.Z.PROCESSING,e}catch(t){if(e.isDestroyed())return;g(e,t)}}(this),this._promise)},Z.prototype.set=function(e,t,n){this.typedArray=e,this.indexDatatype=t,this.context=n},Z.prototype.execute=function(){this.buffer=y(this.typedArray,this.indexDatatype,this.context)},m.prototype.process=function(e){if(i.Z.typeOf.object("frameState",e),this._state===p.Z.READY)return!0;if(this._state!==p.Z.LOADED&&this._state!==p.Z.PROCESSING)return!1;let t,n=this._typedArray,r=this._indexDatatype;if((0,s.Z)(this._dracoLoader))try{this._dracoLoader.process(e)&&(n=this._dracoLoader.decodedData.indices.typedArray,this._typedArray=n,r=o.Z.fromTypedArray(n),this._indexDatatype=r)}catch(e){g(this,e)}if(!(0,s.Z)(n))return!1;if(this._loadBuffer&&this._asynchronous){const i=_;if(i.set(n,r,e.context),!e.jobScheduler.execute(i,h.Z.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=y(n,r,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=p.Z.READY,this._resourceCache.statistics.addGeometryLoader(this),!0},m.prototype.unload=function(){(0,s.Z)(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;(0,s.Z)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),(0,s.Z)(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0};const b=m},533763:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(790087),o=n(234146),r=n(11020),s=n(911698),a=n(252376),c=n(51891),l=n(205522),u=n(217066),d=n(895007),h=n(780131),f=n(616671),p=n(867089),m=n(770404),_=n(887719),g=n(21629),Z=n(757587),y=n(897955),b=n(708956);function v(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resourceCache,n=e.gltfResource,r=e.baseResource,s=e.typedArray,a=e.gltfJson,c=e.cacheKey;i.Z.typeOf.func("options.resourceCache",t),i.Z.typeOf.object("options.gltfResource",n),i.Z.typeOf.object("options.baseResource",r),this._resourceCache=t,this._gltfResource=n,this._baseResource=r,this._typedArray=s,this._gltfJson=a,this._cacheKey=c,this._gltf=void 0,this._bufferLoaders=[],this._state=y.Z.UNLOADED,this._promise=void 0}function A(e,t){e.unload(),e._state=y.Z.FAILED;const n=`Failed to load glTF: ${e._gltfResource.url}`;throw e.getError(n,t)}async function T(e,t){try{(0,h.Z)(t),await function(e){const t=[];return f.Z.buffer(e,(function(e){const n=e.uri;!(0,r.Z)(e.extras._pipeline.source)&&(0,r.Z)(n)&&(0,c.Z)(n)&&(delete e.uri,t.push(l.Z.fetchArrayBuffer(n).then((function(t){e.extras._pipeline.source=new Uint8Array(t)}))))})),Promise.all(t)}(t),await async function(e,t){if((0,r.Z)(t.asset)&&"2.0"===t.asset.version&&!(0,g.Z)(t,"KHR_techniques_webgl")&&!(0,g.Z)(t,"KHR_materials_common"))return Promise.resolve();const n=[];f.Z.buffer(t,(function(t){if(!(0,r.Z)(t.extras._pipeline.source)&&(0,r.Z)(t.uri)){const i=e._baseResource.getDerivedResource({url:t.uri}),o=e._resourceCache.getExternalBufferLoader({resource:i});e._bufferLoaders.push(o),n.push(o.load().then((function(){o.isDestroyed()||(t.extras._pipeline.source=o.typedArray)})))}})),await Promise.all(n),(0,_.Z)(t)}(e,t),(0,d.Z)(t),await function(e,t){const n=[];return f.Z.buffer(t,(function(t,i){const o=t.extras._pipeline.source;if((0,r.Z)(o)&&!(0,r.Z)(t.uri)){const t=e._resourceCache.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:i,typedArray:o});e._bufferLoaders.push(t),n.push(t.load())}})),Promise.all(n)}(e,t),(0,m.Z)(t);const n=t.asset.version;if("1.0"!==n&&"2.0"!==n)throw new u.Z(`Unsupported glTF version: ${n}`);const i=t.extensionsRequired;return(0,r.Z)(i)&&b.Z.checkSupportedExtensions(i),e._gltf=t,e._state=y.Z.READY,e}catch(t){if(e.isDestroyed())return;A(e,t)}}async function w(e,t){let n;try{n="glTF"===(0,a.Z)(t)?(0,p.Z)(t):(0,s.Z)(t)}catch(t){if(e.isDestroyed())return;A(e,t)}return T(e,n)}(0,r.Z)(Object.create)&&(v.prototype=Object.create(Z.Z.prototype),v.prototype.constructor=v),Object.defineProperties(v.prototype,{cacheKey:{get:function(){return this._cacheKey}},gltf:{get:function(){return this._gltf}}}),v.prototype.load=async function(){return(0,r.Z)(this._promise)?this._promise:(this._state=y.Z.LOADING,(0,r.Z)(this._gltfJson)?(this._promise=T(this,this._gltfJson),this._promise):(0,r.Z)(this._typedArray)?(this._promise=w(this,this._typedArray),this._promise):(this._promise=async function(e){let t;try{const n=await e._fetchGltf();if(e.isDestroyed())return;t=new Uint8Array(n)}catch(t){if(e.isDestroyed())return;A(e,t)}return w(e,t)}(this),this._promise))},v.prototype.unload=function(){const e=this._bufferLoaders,t=e.length;for(let n=0;n<t;++n)e[n]=!e[n].isDestroyed()&&this._resourceCache.unload(e[n]);this._bufferLoaders.length=0,this._gltf=void 0},v.prototype._fetchGltf=function(){return this._gltfResource.fetchArrayBuffer()};const E=v},272424:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Fe});var i=n(979811),o=n(405254),r=n(660904),s=n(798336),a=n(790087),c=n(449809),l=n(865029),u=n(234146),d=n(11020),h=n(95296),f=n(515604),p=n(659635),m=n(804868),_=n(360846),g=n(217066),Z=n(497730),y=n(882366),b=n(207412),v=n(600593),A=n(261804),T=n(388402),w=n(418371),E=n(822518),S=n(717341),C=n(272490),x=n(583982),I=n(831970),P=n(518065),D=n(757587),O=n(748990),L=n(677684);const N=x.Z.Attribute,M=x.Z.Indices,R=x.Z.FeatureIdAttribute,F=x.Z.FeatureIdTexture,B=x.Z.FeatureIdImplicitRange,U=x.Z.MorphTarget,k=x.Z.Primitive,V=x.Z.Instances,H=x.Z.Skin,z=x.Z.Node,G=x.Z.AnimatedPropertyType,j=x.Z.AnimationSampler,W=x.Z.AnimationTarget,q=x.Z.AnimationChannel,Y=x.Z.Animation,X=x.Z.ArticulationStage,J=x.Z.Articulation,Q=x.Z.Asset,$=x.Z.Scene,K=x.Z.Components,ee=x.Z.MetallicRoughness,te=x.Z.SpecularGlossiness,ne=x.Z.Material,ie={NOT_LOADED:0,LOADING:1,LOADED:2,PROCESSING:3,POST_PROCESSING:4,PROCESSED:5,READY:6,FAILED:7,UNLOADED:8};function oe(e){const t=(e=(0,u.Z)(e,u.Z.EMPTY_OBJECT)).gltfResource;let n=e.baseResource;const i=e.typedArray,o=(0,u.Z)(e.releaseGltfJson,!1),r=(0,u.Z)(e.asynchronous,!0),s=(0,u.Z)(e.incrementallyLoadTextures,!0),c=(0,u.Z)(e.upAxis,w.Z.Y),l=(0,u.Z)(e.forwardAxis,w.Z.Z),h=(0,u.Z)(e.loadAttributesAsTypedArray,!1),f=(0,u.Z)(e.loadAttributesFor2D,!1),p=(0,u.Z)(e.loadIndicesForWireframe,!1),m=(0,u.Z)(e.loadPrimitiveOutline,!0),_=(0,u.Z)(e.loadForClassification,!1),g=(0,u.Z)(e.renameBatchIdSemantic,!1);a.Z.typeOf.object("options.gltfResource",t),n=(0,d.Z)(n)?n:t.clone(),this._gltfJson=e.gltfJson,this._gltfResource=t,this._baseResource=n,this._typedArray=i,this._releaseGltfJson=o,this._asynchronous=r,this._incrementallyLoadTextures=s,this._upAxis=c,this._forwardAxis=l,this._loadAttributesAsTypedArray=h,this._loadAttributesFor2D=f,this._loadIndicesForWireframe=p,this._loadPrimitiveOutline=m,this._loadForClassification=_,this._renameBatchIdSemantic=g,this._sortedPropertyTableIds=void 0,this._sortedFeatureTextureIds=void 0,this._gltfJsonLoader=void 0,this._state=ie.NOT_LOADED,this._textureState=ie.NOT_LOADED,this._promise=void 0,this._processError=void 0,this._textureErrors=[],this._primitiveLoadPlans=[],this._loaderPromises=[],this._textureLoaders=[],this._texturesPromises=[],this._textureCallbacks=[],this._bufferViewLoaders=[],this._geometryLoaders=[],this._geometryCallbacks=[],this._structuralMetadataLoader=void 0,this._loadResourcesPromise=void 0,this._resourcesLoaded=!1,this._texturesLoaded=!1,this._postProcessBuffers=[],this._components=void 0}function re(e,t){throw e.unload(),e.getError("Failed to load glTF",t)}function se(e,t){const n=e._postProcessBuffers,i=t.primitive,o=i.outlineCoordinates;(0,d.Z)(o)&&n.push(o.buffer);const r=i.attributes,s=r.length;for(let e=0;e<s;e++){const t=r[e];(0,d.Z)(t.buffer)&&n.push(t.buffer)}const a=i.indices;(0,d.Z)(a)&&(0,d.Z)(a.buffer)&&n.push(a.buffer)}function ae(e,t,n){let i=t.byteOffset;const o=(0,y.Z)(e,t),r=t.count,s=(0,v.Z)(t.type),a=t.componentType,l=c.Z.getSizeInBytes(a),u=r*s;if(o===l*s)return n=new Uint8Array(n),c.Z.createArrayBufferView(a,n.buffer,n.byteOffset+i,u);const d=c.Z.createTypedArray(a,u),h=new DataView(n.buffer),f=new Array(s),p=(0,b.Z)(t.componentType);i=n.byteOffset+i;for(let e=0;e<r;++e){p(h,i,s,l,f);for(let t=0;t<s;++t)d[e*s+t]=f[t];i+=o}return d}function ce(e,t,n,i){const o=t.accessors[n],r=o.count,s=new Array(r),a=o.bufferView;if((0,d.Z)(a)){const n=function(e,t,n){const i=P.Z.getBufferViewLoader({gltf:t,bufferViewId:n,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoaders.push(i),i}(e,t,a),r=async function(e,t,n,i,o,r){await t.load(),e.isDestroyed()||function(e,t,n,i){const o=e.type,r=e.count;if(o===T.Z.SCALAR)for(let e=0;e<r;e++)n[e]=t[e];else if(o===T.Z.VEC4&&i)for(let e=0;e<r;e++)n[e]=_.Z.unpack(t,4*e);else{const e=T.Z.getMathType(o),i=T.Z.getNumberOfComponents(o);for(let o=0;o<r;o++)n[o]=e.unpack(t,o*i)}}(i,ae(n,i,t.typedArray),r,o=(0,u.Z)(o,!1))}(e,n,t,o,i,s);return e._loaderPromises.push(r),s}return function(e,t){const n=e.type;if(n===T.Z.SCALAR)return t.fill(0);const i=T.Z.getMathType(n);return t.fill(i.clone(i.ZERO))}(o,s)}function le(e,t){if((0,d.Z)(t))return e===Number?t[0]:e.unpack(t)}(0,d.Z)(Object.create)&&(oe.prototype=Object.create(D.Z.prototype),oe.prototype.constructor=oe),Object.defineProperties(oe.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},gltfJson:{get:function(){return(0,d.Z)(this._gltfJsonLoader)?this._gltfJsonLoader.gltf:this._gltfJson}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},texturesLoaded:{get:function(){return this._texturesLoaded}}}),oe.prototype.load=async function(){return(0,d.Z)(this._promise)||(this._promise=async function(e){e._state=ie.LOADING,e._textureState=ie.LOADING;try{const t=P.Z.getGltfJsonLoader({gltfResource:e._gltfResource,baseResource:e._baseResource,typedArray:e._typedArray,gltfJson:e._gltfJson});if(e._gltfJsonLoader=t,await t.load(),e.isDestroyed()||e.isUnloaded()||t.isDestroyed())return;return e._state=ie.LOADED,e._textureState=ie.LOADED,e}catch(t){if(e.isDestroyed())return;e._state=ie.FAILED,e._textureState=ie.FAILED,re(e,t)}}(this)),this._promise},oe.prototype._process=function(e){return this._state===ie.READY||(this._state===ie.PROCESSING&&function(e,t){let n,i=!0;const o=e._geometryLoaders,r=o.length;for(n=0;n<r;++n){const r=o[n].process(t);r&&(0,d.Z)(e._geometryCallbacks[n])&&(e._geometryCallbacks[n](),e._geometryCallbacks[n]=void 0),i=i&&r}const s=e._structuralMetadataLoader;if((0,d.Z)(s)){const n=s.process(t);n&&(e._components.structuralMetadata=s.structuralMetadata),i=i&&n}i&&(e._state=ie.POST_PROCESSING)}(this,e),this._resourcesLoaded&&this._state===ie.POST_PROCESSING&&(function(e,t){const n=e._primitiveLoadPlans,i=n.length;for(let o=0;o<i;o++){const i=n[o];i.postProcess(t),i.needsOutlines&&se(e,i)}}(this,e.context),this._state=ie.PROCESSED),!(!this._resourcesLoaded||this._state!==ie.PROCESSED||(Re(this),this._typedArray=void 0,this._state=ie.READY,0)))},oe.prototype._processTextures=function(e){if(this._textureState===ie.READY)return!0;if(this._textureState!==ie.PROCESSING)return!1;let t,n=!0;const i=this._textureLoaders,o=i.length;for(t=0;t<o;++t){const o=i[t].process(e);o&&(0,d.Z)(this._textureCallbacks[t])&&(this._textureCallbacks[t](),this._textureCallbacks[t]=void 0),n=n&&o}return!!n&&(this._textureState=ie.READY,this._texturesLoaded=!0,!0)},oe.prototype.process=function(e){if(a.Z.typeOf.object("frameState",e),this._state!==ie.LOADED||(0,d.Z)(this._loadResourcesPromise)||(this._loadResourcesPromise=async function(e,t){h.Z.supportsWebP.initialized||await h.Z.supportsWebP.initialize();const n=new O.Z({webp:h.Z.supportsWebP(),basis:t.context.supportsBasis}),i=function(e,t,n,i){const o=(0,u.Z)(t.extensions,u.Z.EMPTY_OBJECT),s=o.EXT_structural_metadata,a=o.EXT_feature_metadata,c=o.CESIUM_RTC;if((0,d.Z)(a)){const t=a.featureTables,n=a.featureTextures,i=(0,d.Z)(t)?t:[],o=(0,d.Z)(n)?n:[];e._sortedPropertyTableIds=Object.keys(i).sort(),e._sortedFeatureTextureIds=Object.keys(o).sort()}const h=function(e,t,n,i){if(!(0,d.Z)(t.nodes))return[];let o,r;const s=t.nodes.length,a=new Array(s);for(o=0;o<s;++o){const r=xe(e,t,t.nodes[o],n,i);r.index=o,a[o]=r}for(o=0;o<s;++o){const e=t.nodes[o].children;if((0,d.Z)(e)){const t=e.length;for(r=0;r<t;++r)a[o].children.push(a[e[r]])}}return a}(e,t,n,i),f=function(e,t,n){const i=t.skins;if(e._loadForClassification||!(0,d.Z)(i))return[];const o=t.skins.length,r=new Array(o);for(let i=0;i<o;++i){const o=Ie(e,t,t.skins[i],n);o.index=i,r[i]=o}const s=n.length;for(let e=0;e<s;++e){const i=t.nodes[e].skin;(0,d.Z)(i)&&(n[e].skin=r[i])}return r}(e,t,h),m=function(e,t,n){const i=t.animations;if(e._loadForClassification||!(0,d.Z)(i))return[];const o=t.animations.length,r=new Array(o);for(let i=0;i<o;++i){const o=Oe(e,t,t.animations[i],n);o.index=i,r[i]=o}return r}(e,t,h),_=function(e){const t=(0,u.Z)(e.extensions,u.Z.EMPTY_OBJECT).AGI_articulations;if(!(0,d.Z)(t))return[];const n=t.articulations;if(!(0,d.Z)(n))return[];const i=n.length,o=new Array(i);for(let e=0;e<i;e++){const t=Ne(n[e]);o[e]=t}return o}(t),g=function(e,t){const n=new $,i=function(e){let t;return(0,d.Z)(e.scenes)&&(0,d.Z)(e.scene)&&(t=e.scenes[e.scene].nodes),t=(0,u.Z)(t,e.nodes),t=(0,d.Z)(t)?t:[],t}(e);return n.nodes=i.map((function(e){return t[e]})),n}(t,h),Z=new K,y=new Q,b=t.asset.copyright;if((0,d.Z)(b)){const e=b.split(";").map((function(e){return new l.Z(e.trim())}));y.credits=e}if(Z.asset=y,Z.scene=g,Z.nodes=h,Z.skins=f,Z.animations=m,Z.articulations=_,Z.upAxis=e._upAxis,Z.forwardAxis=e._forwardAxis,(0,d.Z)(c)){const e=r.Z.fromArray(c.center,0,Me);Z.transform=p.Z.fromTranslation(e,Z.transform)}if(e._components=Z,(0,d.Z)(s)||(0,d.Z)(a)){const o=async function(e,t,n,i,o,r){const s=new A.Z({gltf:t,extension:n,extensionLegacy:i,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:o,frameState:r,asynchronous:e._asynchronous});return e._structuralMetadataLoader=s,s.load()}(e,t,s,a,n,i);e._loaderPromises.push(o)}const v=[];return v.push.apply(v,e._loaderPromises),e._incrementallyLoadTextures||v.push.apply(v,e._texturesPromises),Promise.all(v)}(e,e.gltfJson,n,t);return e._state=ie.PROCESSING,e._textureState=ie.PROCESSING,(0,d.Z)(e._gltfJsonLoader)&&e._releaseGltfJson&&(P.Z.unload(e._gltfJsonLoader),e._gltfJsonLoader=void 0),i}(this,e).then((()=>{this._resourcesLoaded=!0})).catch((e=>{this._processError=e}))),(0,d.Z)(this._processError)){this._state=ie.FAILED;const e=this._processError;this._processError=void 0,re(this,e)}const t=this._textureErrors.pop();if((0,d.Z)(t)){const e=this.getError("Failed to load glTF texture",t);throw e.name="TextureError",e}if(this._state===ie.FAILED)return!1;let n=!1;try{n=this._process(e)}catch(e){this._state=ie.FAILED,re(this,e)}let i=!1;try{i=this._processTextures(e)}catch(e){this._textureState=ie.FAILED,re(this,e)}return this._incrementallyLoadTextures?n:n&&i};const ue={VEC2:new o.Z(-1,-1),VEC3:new r.Z(-1,-1,-1),VEC4:new s.Z(-1,-1,-1,-1)};function de(e,t,n,i,a){const l=e.accessors[t],h=T.Z.getMathType(l.type),f=(0,u.Z)(l.normalized,!1),p=new N;p.name=n,p.semantic=i,p.setIndex=a,p.constant=function(e){return e===Number?0:new e}(h),p.componentDatatype=l.componentType,p.normalized=f,p.count=l.count,p.type=l.type,p.min=le(h,l.min),p.max=le(h,l.max),p.byteOffset=l.byteOffset,p.byteStride=(0,y.Z)(e,l),(0,S.Z)(l,"WEB3D_quantized_attributes")&&function(e,t,n){const i=e.decodeMatrix,a=le(n,e.decodedMin),c=le(n,e.decodedMax);(0,d.Z)(a)&&(0,d.Z)(c)&&(t.min=a,t.max=c);const l=new x.Z.Quantization;l.componentDatatype=t.componentDatatype,l.type=t.type,4===i.length?(l.quantizedVolumeOffset=i[2],l.quantizedVolumeStepSize=i[0]):9===i.length?(l.quantizedVolumeOffset=new o.Z(i[6],i[7]),l.quantizedVolumeStepSize=new o.Z(i[0],i[4])):16===i.length?(l.quantizedVolumeOffset=new r.Z(i[12],i[13],i[14]),l.quantizedVolumeStepSize=new r.Z(i[0],i[5],i[10])):25===i.length&&(l.quantizedVolumeOffset=new s.Z(i[20],i[21],i[22],i[23]),l.quantizedVolumeStepSize=new s.Z(i[0],i[6],i[12],i[18])),t.quantization=l}(l.extensions.WEB3D_quantized_attributes,p,h);const m=p.semantic===L.Z.POSITION||p.semantic===L.Z.NORMAL||p.semantic===L.Z.TANGENT||p.semantic===L.Z.TEXCOORD,_=e.extensionsRequired?.includes("KHR_mesh_quantization");return _&&f&&m&&function(e,t){const n=function(e){switch(e){case c.Z.BYTE:return 127;case c.Z.UNSIGNED_BYTE:return 255;case c.Z.SHORT:return 32767;case c.Z.UNSIGNED_SHORT:return 65535;default:return 1}}(e.componentDatatype),i=ue[e.type];let o=e.min;(0,d.Z)(o)&&(o=t.divideByScalar(o,n,o),o=t.maximumByComponent(o,i,o));let r=e.max;(0,d.Z)(r)&&(r=t.divideByScalar(r,n,r),r=t.maximumByComponent(r,i,r)),e.min=o,e.max=r}(p,h),p}function he(e){const t=/^\w+_(\d+)$/.exec(e);if(null!==t)return parseInt(t[1])}const fe={gltfSemantic:void 0,renamedSemantic:void 0,modelSemantic:void 0};function pe(e,t,n){let i=n;!e._renameBatchIdSemantic||"_BATCHID"!==n&&"BATCHID"!==n||(i="_FEATURE_ID_0");const o=t.fromGltfSemantic(i),r=fe;return r.gltfSemantic=n,r.renamedSemantic=i,r.modelSemantic=o,r}function me(e){const t=e===L.Z.POSITION,n=e===L.Z.FEATURE_ID,i=e===L.Z.TEXCOORD;return t||n||i}function _e(e,t,n,i,o,r,s,a){const l=t.accessors[n],u=l.bufferView,h=i.gltfSemantic,f=i.renamedSemantic,p=i.modelSemantic,m=(0,d.Z)(p)?he(f):void 0,_=de(t,n,h,p,m);if(!(0,d.Z)(o)&&!(0,d.Z)(u))return _;const g=function(e,t,n,i,o,r,s,a){const c=t.accessors[n].bufferView;return P.Z.getVertexBufferLoader({gltf:t,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:a,bufferViewId:c,draco:o,attributeSemantic:i,accessorId:n,asynchronous:e._asynchronous,loadBuffer:r,loadTypedArray:s})}(e,t,n,h,o,r,s,a),Z=e._geometryLoaders.length;e._geometryLoaders.push(g);const y=g.load();return e._loaderPromises.push(y),e._geometryCallbacks[Z]=()=>{(0,d.Z)(o)&&(0,d.Z)(o.attributes)&&(0,d.Z)(o.attributes[h])?function(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,e.quantization=t.quantization,n&&(e.buffer=t.buffer),i){const n=(0,d.Z)(t.quantization)?t.quantization.componentDatatype:e.componentDatatype;e.typedArray=c.Z.createArrayBufferView(n,t.typedArray.buffer)}}(_,g,r,s):function(e,t,n,i,o,r){if(o&&(n.buffer=i.buffer),r){const r=i.typedArray;n.typedArray=ae(e,t,r),o||(n.byteOffset=0,n.byteStride=void 0)}}(t,l,_,g,r,s)},_}function ge(e,t,n,i,o,r,s,a){const c=i.modelSemantic,l=c===L.Z.POSITION,u=c===L.Z.FEATURE_ID,d=l&&!r&&e._loadAttributesFor2D&&!a.scene3DOnly,h=e._loadForClassification&&u,f=e._loadAttributesAsTypedArray,p=!f,m=f||d||h,_=_e(e,t,n,i,o,!s&&p,!!s||m,a),g=new I.Z.AttributeLoadPlan(_);return g.loadBuffer=p,g.loadTypedArray=m,g}function Ze(e,t,n,i,o,r){const s=(0,d.Z)(i.ROTATION),a=(0,d.Z)(i.TRANSLATION)&&(0,d.Z)(t.accessors[i.TRANSLATION].min)&&(0,d.Z)(t.accessors[i.TRANSLATION].max),c=pe(e,C.Z,o),l=c.modelSemantic,u=l===C.Z.TRANSLATION||l===C.Z.ROTATION||l===C.Z.SCALE,h=l===C.Z.TRANSLATION,f=e._loadAttributesAsTypedArray||s&&u||!r.context.instancedArrays,p=!f,m=e._loadAttributesFor2D&&!r.scene3DOnly;return _e(e,t,n,c,void 0,p,f||h&&(!a||m),r)}function ye(e,t,n,i,o,r){const s=E.Z.getImageIdFromTexture({gltf:t,textureId:n.index,supportedImageFormats:i});if(!(0,d.Z)(s))return;const a=P.Z.getTextureLoader({gltf:t,textureInfo:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:i,frameState:o,asynchronous:e._asynchronous}),c=E.Z.createModelTextureReader({textureInfo:n}),l=e._textureLoaders.length;e._textureLoaders.push(a);const u=a.load().catch((t=>{if(!e.isDestroyed()){if(!e._incrementallyLoadTextures)throw t;e._textureState=ie.FAILED,e._textureErrors.push(t)}}));return e._texturesPromises.push(u),e._textureCallbacks[l]=()=>{c.texture=a.texture,(0,d.Z)(r)&&(c.texture.sampler=r)},c}function be(e,t){const n=new R;return n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.propertyTableId=e.propertyTable,n.setIndex=e.attribute,n.label=e.label,n.positionalLabel=t,n}function ve(e,t,n,i){const o=new R,r=e.featureIds;return o.featureCount=n,o.propertyTableId=t,o.setIndex=he(r.attribute),o.positionalLabel=i,o}function Ae(e,t){const n=new B;return n.propertyTableId=e.propertyTable,n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.label=e.label,n.positionalLabel=t,n.offset=0,n.repeat=1,n}function Te(e,t,n,i){const o=new B,r=e.featureIds;o.propertyTableId=t,o.featureCount=n,o.offset=(0,u.Z)(r.constant,0);const s=(0,u.Z)(r.divisor,0);return o.repeat=0===s?void 0:s,o.positionalLabel=i,o}function we(e,t,n,i,o,r){const s=new F;s.featureCount=n.featureCount,s.nullFeatureId=n.nullFeatureId,s.propertyTableId=n.propertyTable,s.label=n.label,s.positionalLabel=r;const a=n.texture;s.textureReader=ye(e,t,a,i,o,Z.Z.NEAREST);const c=((0,d.Z)(a.channels)?a.channels:[0]).map((function(e){return"rgba".charAt(e)})).join("");return s.textureReader.channels=c,s}function Ee(e,t,n,i,o,r,s,a){const c=new F,l=n.featureIds,u=l.texture;return c.featureCount=s,c.propertyTableId=i,c.textureReader=ye(e,t,u,o,r,Z.Z.NEAREST),c.textureReader.channels=l.channels,c.positionalLabel=a,c}function Se(e,t,n,i,o,r){const s=new U;for(const a in n)if(n.hasOwnProperty(a)){const c=ge(e,t,n[a],pe(e,L.Z,a),void 0,!1,i,r);s.attributes.push(c.attribute),o.attributePlans.push(c)}return s}function Ce(e,t,n,i,o,a){const c=new k,l=new I.Z(c);e._primitiveLoadPlans.push(l);const h=n.material;(0,d.Z)(h)&&(c.material=function(e,t,n,i,o){const a=new ne,c=(0,u.Z)(n.extensions,u.Z.EMPTY_OBJECT),l=c.KHR_materials_pbrSpecularGlossiness,h=n.pbrMetallicRoughness;if(a.unlit=(0,d.Z)(c.KHR_materials_unlit),(0,d.Z)(l)){const n=new te;a.specularGlossiness=n,(0,d.Z)(l.diffuseTexture)&&(n.diffuseTexture=ye(e,t,l.diffuseTexture,i,o)),(0,d.Z)(l.specularGlossinessTexture)&&(0,d.Z)(l.specularGlossinessTexture)&&(n.specularGlossinessTexture=ye(e,t,l.specularGlossinessTexture,i,o)),n.diffuseFactor=le(s.Z,l.diffuseFactor),n.specularFactor=le(r.Z,l.specularFactor),n.glossinessFactor=l.glossinessFactor,a.pbrSpecularGlossiness=l}else if((0,d.Z)(h)){const n=new ee;(0,d.Z)(h.baseColorTexture)&&(n.baseColorTexture=ye(e,t,h.baseColorTexture,i,o)),(0,d.Z)(h.metallicRoughnessTexture)&&(n.metallicRoughnessTexture=ye(e,t,h.metallicRoughnessTexture,i,o)),n.baseColorFactor=le(s.Z,h.baseColorFactor),n.metallicFactor=h.metallicFactor,n.roughnessFactor=h.roughnessFactor,a.metallicRoughness=n}return(0,d.Z)(n.emissiveTexture)&&(a.emissiveTexture=ye(e,t,n.emissiveTexture,i,o)),(0,d.Z)(n.normalTexture)&&!e._loadForClassification&&(a.normalTexture=ye(e,t,n.normalTexture,i,o)),(0,d.Z)(n.occlusionTexture)&&(a.occlusionTexture=ye(e,t,n.occlusionTexture,i,o)),a.emissiveFactor=le(r.Z,n.emissiveFactor),a.alphaMode=n.alphaMode,a.alphaCutoff=n.alphaCutoff,a.doubleSided=n.doubleSided,a}(e,t,t.materials[h],o,a));const f=(0,u.Z)(n.extensions,u.Z.EMPTY_OBJECT);let p=!1;const _=f.CESIUM_primitive_outline;e._loadPrimitiveOutline&&(0,d.Z)(_)&&(p=!0,l.needsOutlines=!0,l.outlineIndices=function(e,t,n){return ce(e,t,n.indices,!1)}(e,t,_));const Z=e._loadForClassification,y=f.KHR_draco_mesh_compression;let b=!1;const v=n.attributes;if((0,d.Z)(v))for(const n in v)if(v.hasOwnProperty(n)){const o=v[n],r=pe(e,L.Z,n),s=r.modelSemantic;if(Z&&!me(s))continue;s===L.Z.FEATURE_ID&&(b=!0);const u=ge(e,t,o,r,y,i,p,a);l.attributePlans.push(u),c.attributes.push(u.attribute)}const A=n.targets;if((0,d.Z)(A)&&!Z){const n=A.length;for(let i=0;i<n;++i)c.morphTargets.push(Se(e,t,A[i],p,l,a))}const T=n.indices;if((0,d.Z)(T)){const n=function(e,t,n,i,o,r,s){const a=t.accessors[n],c=a.bufferView;if(!(0,d.Z)(i)&&!(0,d.Z)(c))return;const l=new M;l.count=a.count;const u=e._loadAttributesAsTypedArray,h=e._loadIndicesForWireframe&&!s.context.webgl2,f=e._loadForClassification&&o,p=!u,m=u||h||f,_=function(e,t,n,i,o,r,s){return P.Z.getIndexBufferLoader({gltf:t,accessorId:n,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:s,draco:i,asynchronous:e._asynchronous,loadBuffer:o,loadTypedArray:r})}(e,t,n,i,!r&&p,!!r||m,s),g=e._geometryLoaders.length;e._geometryLoaders.push(_);const Z=_.load();e._loaderPromises.push(Z),e._geometryCallbacks[g]=()=>{l.indexDatatype=_.indexDatatype,l.buffer=_.buffer,l.typedArray=_.typedArray};const y=new I.Z.IndicesLoadPlan(l);return y.loadBuffer=p,y.loadTypedArray=m,y}(e,t,T,y,b,p,a);(0,d.Z)(n)&&(l.indicesPlan=n,c.indices=n.indices)}const w=f.EXT_structural_metadata,E=f.EXT_mesh_features,S=f.EXT_feature_metadata,C=(0,d.Z)(S);(0,d.Z)(E)?function(e,t,n,i,o,r){let s;s=(0,d.Z)(i)&&(0,d.Z)(i.featureIds)?i.featureIds:[];for(let i=0;i<s.length;i++){const a=s[i],c=`featureId_${i}`;let l;l=(0,d.Z)(a.texture)?we(e,t,a,o,r,c):(0,d.Z)(a.attribute)?be(a,c):Ae(a,c),n.featureIds.push(l)}}(e,t,c,E,o,a):C&&function(e,t,n,i,o,r){const s=t.extensions.EXT_feature_metadata.featureTables;let a=0;const c=i.featureIdAttributes;if((0,d.Z)(c)){const t=c.length;for(let i=0;i<t;++i){const t=c[i],o=t.featureTable,r=e._sortedPropertyTableIds.indexOf(o),l=s[o].count,u=`featureId_${a}`;let h;a++,h=(0,d.Z)(t.featureIds.attribute)?ve(t,r,l,u):Te(t,r,l,u),n.featureIds.push(h)}}const l=i.featureIdTextures;if((0,d.Z)(l)){const i=l.length;for(let c=0;c<i;++c){const i=l[c],u=i.featureTable,d=e._sortedPropertyTableIds.indexOf(u),h=`featureId_${a}`;a++;const f=Ee(e,t,i,d,o,r,s[u].count,h);n.featureIds.push(f)}}}(e,t,c,S,o,a),(0,d.Z)(w)?function(e,t){(0,d.Z)(t)&&((0,d.Z)(t.propertyTextures)&&(e.propertyTextureIds=t.propertyTextures),(0,d.Z)(t.propertyAttributes)&&(e.propertyAttributeIds=t.propertyAttributes))}(c,w):C&&function(e,t,n){(0,d.Z)(n.featureTextures)&&(t.propertyTextureIds=n.featureTextures.map((function(t){return e._sortedFeatureTextureIds.indexOf(t)})))}(e,c,S);const x=n.mode;if(Z&&x!==m.Z.TRIANGLES)throw new g.Z("Only triangle meshes can be used for classification.");return c.primitiveType=x,c}function xe(e,t,n,i,o){const s=new z;s.name=n.name,s.matrix=le(p.Z,n.matrix),s.translation=le(r.Z,n.translation),s.rotation=le(_.Z,n.rotation),s.scale=le(r.Z,n.scale);const a=(0,u.Z)(n.extensions,u.Z.EMPTY_OBJECT),c=a.EXT_mesh_gpu_instancing,l=a.AGI_articulations;if((0,d.Z)(c)){if(e._loadForClassification)throw new g.Z("Models with the EXT_mesh_gpu_instancing extension cannot be used for classification.");s.instances=function(e,t,n,i){const o=n.EXT_mesh_gpu_instancing,r=new V,s=o.attributes;if((0,d.Z)(s))for(const n in s)if(s.hasOwnProperty(n)){const o=s[n];r.attributes.push(Ze(e,t,o,s,n,i))}const a=(0,u.Z)(o.extensions,u.Z.EMPTY_OBJECT),c=n.EXT_instance_features,l=a.EXT_feature_metadata;return(0,d.Z)(c)?function(e,t){const n=t.featureIds;for(let t=0;t<n.length;t++){const i=n[t],o=`instanceFeatureId_${t}`;let r;r=(0,d.Z)(i.attribute)?be(i,o):Ae(i,o),e.featureIds.push(r)}}(r,c):(0,d.Z)(l)&&function(e,t,n,i){const o=e.extensions.EXT_feature_metadata.featureTables,r=n.featureIdAttributes;if((0,d.Z)(r)){const e=r.length;for(let n=0;n<e;++n){const e=r[n],s=e.featureTable,a=i.indexOf(s),c=o[s].count,l=`instanceFeatureId_${n}`;let u;u=(0,d.Z)(e.featureIds.attribute)?ve(e,a,c,l):Te(e,a,c,l),t.featureIds.push(u)}}}(t,r,l,e._sortedPropertyTableIds),r}(e,t,a,o)}(0,d.Z)(l)&&(s.articulationName=l.articulationName);const h=n.mesh;if((0,d.Z)(h)){const r=t.meshes[h],a=r.primitives,c=a.length;for(let n=0;n<c;++n)s.primitives.push(Ce(e,t,a[n],(0,d.Z)(s.instances),i,o));const l=(0,u.Z)(n.weights,r.weights),f=s.primitives[0].morphTargets.length;s.morphWeights=(0,d.Z)(l)?l.slice():new Array(f).fill(0)}return s}function Ie(e,t,n,i){const o=new H,r=n.joints,s=r.length,a=new Array(s);for(let e=0;e<s;++e)a[e]=i[r[e]];o.joints=a;const c=n.inverseBindMatrices;return(0,d.Z)(c)?o.inverseBindMatrices=ce(e,t,c):o.inverseBindMatrices=new Array(s).fill(p.Z.IDENTITY),o}function Pe(e,t,n){const i=new j,o=n.input;i.input=ce(e,t,o);const r=n.interpolation;i.interpolation=(0,u.Z)(f.Z[r],f.Z.LINEAR);const s=n.output;return i.output=ce(e,t,s,!0),i}function De(e,t,n){const i=new q,o=e.sampler;return i.sampler=t[o],i.target=function(e,t){const n=new W,i=e.node;if(!(0,d.Z)(i))return;n.node=t[i];const o=e.path.toUpperCase();return n.path=G[o],n}(e.target,n),i}function Oe(e,t,n,i){let o;const r=new Y;r.name=n.name;const s=n.samplers,a=s.length,c=new Array(a);for(o=0;o<a;o++){const n=Pe(e,t,s[o]);n.index=o,c[o]=n}const l=n.channels,u=l.length,d=new Array(u);for(o=0;o<u;o++)d[o]=De(l[o],c,i);return r.samplers=c,r.channels=d,r}function Le(e){const t=new X;t.name=e.name;const n=e.type.toUpperCase();return t.type=i.Z[n],t.minimumValue=e.minimumValue,t.maximumValue=e.maximumValue,t.initialValue=e.initialValue,t}function Ne(e){const t=new J;t.name=e.name;const n=e.stages,i=n.length,o=new Array(i);for(let e=0;e<i;e++){const t=Le(n[e]);o[e]=t}return t.stages=o,t}const Me=new r.Z;function Re(e){const t=e._bufferViewLoaders,n=t.length;for(let e=0;e<n;++e)t[e]=!t[e].isDestroyed()&&P.Z.unload(t[e]);e._bufferViewLoaders.length=0}oe.prototype.isUnloaded=function(){return this._state===ie.UNLOADED},oe.prototype.unload=function(){var e;(0,d.Z)(this._gltfJsonLoader)&&!this._gltfJsonLoader.isDestroyed()&&P.Z.unload(this._gltfJsonLoader),this._gltfJsonLoader=void 0,function(e){const t=e._textureLoaders,n=t.length;for(let e=0;e<n;++e)t[e]=!t[e].isDestroyed()&&P.Z.unload(t[e]);e._textureLoaders.length=0}(this),Re(this),function(e){const t=e._geometryLoaders,n=t.length;for(let e=0;e<n;++e)t[e]=!t[e].isDestroyed()&&P.Z.unload(t[e]);e._geometryLoaders.length=0}(this),function(e){const t=e._postProcessBuffers,n=t.length;for(let e=0;e<n;e++){const n=t[e];n.isDestroyed()||n.destroy()}t.length=0}(this),e=this,(0,d.Z)(e._structuralMetadataLoader)&&!e._structuralMetadataLoader.isDestroyed()&&(e._structuralMetadataLoader.destroy(),e._structuralMetadataLoader=void 0),this._components=void 0,this._typedArray=void 0,this._state=ie.UNLOADED};const Fe=oe},822518:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(405254),o=n(790087),r=n(234146),s=n(11020),a=n(664288),c=n(497730),l=n(442429),u=n(55248),d=n(49940),h=n(583982);const f={getImageIdFromTexture:function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).gltf,n=e.textureId,i=e.supportedImageFormats;o.Z.typeOf.object("options.gltf",t),o.Z.typeOf.number("options.textureId",n),o.Z.typeOf.object("options.supportedImageFormats",i);const a=t.textures[n],c=a.extensions;if((0,s.Z)(c)){if(i.webp&&(0,s.Z)(c.EXT_texture_webp))return c.EXT_texture_webp.source;if(i.basis&&(0,s.Z)(c.KHR_texture_basisu))return c.KHR_texture_basisu.source}return a.source},createSampler:function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).gltf,n=e.textureInfo,i=(0,r.Z)(e.compressedTextureNoMipmap,!1);o.Z.typeOf.object("options.gltf",t),o.Z.typeOf.object("options.textureInfo",n);let a=d.Z.REPEAT,h=d.Z.REPEAT,f=u.Z.LINEAR,p=l.Z.LINEAR;const m=n.index,_=t.textures[m].sampler;if((0,s.Z)(_)){const e=t.samplers[_];a=(0,r.Z)(e.wrapS,a),h=(0,r.Z)(e.wrapT,h),f=(0,r.Z)(e.minFilter,f),p=(0,r.Z)(e.magFilter,p)}let g=!1;const Z=n.extensions;return(0,s.Z)(Z)&&(0,s.Z)(Z.KHR_texture_transform)&&(g=!0),(i||g)&&f!==u.Z.LINEAR&&f!==u.Z.NEAREST&&(f=f===u.Z.NEAREST_MIPMAP_NEAREST||f===u.Z.NEAREST_MIPMAP_LINEAR?u.Z.NEAREST:u.Z.LINEAR),new c.Z({wrapS:a,wrapT:h,minificationFilter:f,magnificationFilter:p})}},p=new i.Z(1,1);f.createModelTextureReader=function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).textureInfo,n=e.channels,c=e.texture;o.Z.typeOf.object("options.textureInfo",t);let l,u=(0,r.Z)(t.texCoord,0);const d=(0,r.Z)(t.extensions,r.Z.EMPTY_OBJECT).KHR_texture_transform;if((0,s.Z)(d)){u=(0,r.Z)(d.texCoord,u);const e=(0,s.Z)(d.offset)?i.Z.unpack(d.offset):i.Z.ZERO;let t=(0,r.Z)(d.rotation,0);const n=(0,s.Z)(d.scale)?i.Z.unpack(d.scale):p;t=-t,l=new a.Z(Math.cos(t)*n.x,-Math.sin(t)*n.y,e.x,Math.sin(t)*n.x,Math.cos(t)*n.y,e.y,0,0,1)}const f=new h.Z.TextureReader;return f.index=t.index,f.texture=c,f.texCoord=u,f.transform=l,f.channels=n,f};const m=f},616671:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(21629),o=n(11020);function r(){}r.objectLegacy=function(e,t){if((0,o.Z)(e))for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=t(e[n],n);if((0,o.Z)(i))return i}},r.object=function(e,t){if((0,o.Z)(e)){const n=e.length;for(let i=0;i<n;i++){const n=t(e[i],i);if((0,o.Z)(n))return n}}},r.topLevel=function(e,t,n){const i=e[t];return(0,o.Z)(i)&&!Array.isArray(i)?r.objectLegacy(i,n):r.object(i,n)},r.accessor=function(e,t){return r.topLevel(e,"accessors",t)},r.accessorWithSemantic=function(e,t,n){const i={};return r.mesh(e,(function(e){return r.meshPrimitive(e,(function(e){const s=r.meshPrimitiveAttribute(e,(function(e,r){if(0===r.indexOf(t)&&!(0,o.Z)(i[e])){i[e]=!0;const t=n(e);if((0,o.Z)(t))return t}}));return(0,o.Z)(s)?s:r.meshPrimitiveTarget(e,(function(e){return r.meshPrimitiveTargetAttribute(e,(function(e,r){if(0===r.indexOf(t)&&!(0,o.Z)(i[e])){i[e]=!0;const t=n(e);if((0,o.Z)(t))return t}}))}))}))}))},r.accessorContainingVertexAttributeData=function(e,t){const n={};return r.mesh(e,(function(e){return r.meshPrimitive(e,(function(e){const i=r.meshPrimitiveAttribute(e,(function(e){if(!(0,o.Z)(n[e])){n[e]=!0;const i=t(e);if((0,o.Z)(i))return i}}));return(0,o.Z)(i)?i:r.meshPrimitiveTarget(e,(function(e){return r.meshPrimitiveTargetAttribute(e,(function(e){if(!(0,o.Z)(n[e])){n[e]=!0;const i=t(e);if((0,o.Z)(i))return i}}))}))}))}))},r.accessorContainingIndexData=function(e,t){const n={};return r.mesh(e,(function(e){return r.meshPrimitive(e,(function(e){const i=e.indices;if((0,o.Z)(i)&&!(0,o.Z)(n[i])){n[i]=!0;const e=t(i);if((0,o.Z)(e))return e}}))}))},r.animation=function(e,t){return r.topLevel(e,"animations",t)},r.animationChannel=function(e,t){const n=e.channels;return r.object(n,t)},r.animationSampler=function(e,t){const n=e.samplers;return r.object(n,t)},r.buffer=function(e,t){return r.topLevel(e,"buffers",t)},r.bufferView=function(e,t){return r.topLevel(e,"bufferViews",t)},r.camera=function(e,t){return r.topLevel(e,"cameras",t)},r.image=function(e,t){return r.topLevel(e,"images",t)},r.material=function(e,t){return r.topLevel(e,"materials",t)},r.materialValue=function(e,t){let n=e.values;(0,o.Z)(e.extensions)&&(0,o.Z)(e.extensions.KHR_techniques_webgl)&&(n=e.extensions.KHR_techniques_webgl.values);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.Z)(i))return i}},r.mesh=function(e,t){return r.topLevel(e,"meshes",t)},r.meshPrimitive=function(e,t){const n=e.primitives;if((0,o.Z)(n)){const e=n.length;for(let i=0;i<e;i++){const e=t(n[i],i);if((0,o.Z)(e))return e}}},r.meshPrimitiveAttribute=function(e,t){const n=e.attributes;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.Z)(i))return i}},r.meshPrimitiveTarget=function(e,t){const n=e.targets;if((0,o.Z)(n)){const e=n.length;for(let i=0;i<e;++i){const e=t(n[i],i);if((0,o.Z)(e))return e}}},r.meshPrimitiveTargetAttribute=function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=t(e[n],n);if((0,o.Z)(i))return i}},r.node=function(e,t){return r.topLevel(e,"nodes",t)},r.nodeInTree=function(e,t,n){const i=e.nodes;if((0,o.Z)(i)){const s=t.length;for(let a=0;a<s;a++){const s=t[a],c=i[s];if((0,o.Z)(c)){let t=n(c,s);if((0,o.Z)(t))return t;const i=c.children;if((0,o.Z)(i)&&(t=r.nodeInTree(e,i,n),(0,o.Z)(t)))return t}}}},r.nodeInScene=function(e,t,n){const i=t.nodes;if((0,o.Z)(i))return r.nodeInTree(e,i,n)},r.program=function(e,t){return(0,i.Z)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.programs,t):r.topLevel(e,"programs",t)},r.sampler=function(e,t){return r.topLevel(e,"samplers",t)},r.scene=function(e,t){return r.topLevel(e,"scenes",t)},r.shader=function(e,t){return(0,i.Z)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.shaders,t):r.topLevel(e,"shaders",t)},r.skin=function(e,t){return r.topLevel(e,"skins",t)},r.skinJoint=function(e,t){const n=e.joints;if((0,o.Z)(n)){const e=n.length;for(let i=0;i<e;i++){const e=t(n[i]);if((0,o.Z)(e))return e}}},r.techniqueAttribute=function(e,t){const n=e.attributes;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.Z)(i))return i}},r.techniqueUniform=function(e,t){const n=e.uniforms;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.Z)(i))return i}},r.techniqueParameter=function(e,t){const n=e.parameters;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.Z)(i))return i}},r.technique=function(e,t){return(0,i.Z)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.techniques,t):r.topLevel(e,"techniques",t)},r.texture=function(e,t){return r.topLevel(e,"textures",t)};const s=r},600789:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(304982);const o=function(e,t){const n={byteLength:t.length,extras:{_pipeline:{source:t}}},o={buffer:(0,i.Z)(e.buffers,n),byteOffset:0,byteLength:t.length};return(0,i.Z)(e.bufferViews,o)}},895007:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(304982),o=n(616671),r=n(882366),s=n(234146),a=n(11020),c=n(248894);function l(e){(0,a.Z)(e)&&(e.texCoord=(0,s.Z)(e.texCoord,0))}const u=function(e){o.Z.accessor(e,(function(e){(0,a.Z)(e.bufferView)&&(e.byteOffset=(0,s.Z)(e.byteOffset,0))})),o.Z.bufferView(e,(function(e){(0,a.Z)(e.buffer)&&(e.byteOffset=(0,s.Z)(e.byteOffset,0))})),o.Z.mesh(e,(function(t){o.Z.meshPrimitive(t,(function(t){if(t.mode=(0,s.Z)(t.mode,c.Z.TRIANGLES),!(0,a.Z)(t.material)){(0,a.Z)(e.materials)||(e.materials=[]);const n={name:"default"};t.material=(0,i.Z)(e.materials,n)}}))})),o.Z.accessorContainingVertexAttributeData(e,(function(t){const n=e.accessors[t],i=n.bufferView;if(n.normalized=(0,s.Z)(n.normalized,!1),(0,a.Z)(i)){const t=e.bufferViews[i];t.byteStride=(0,r.Z)(e,n),t.target=c.Z.ARRAY_BUFFER}})),o.Z.accessorContainingIndexData(e,(function(t){const n=e.accessors[t].bufferView;(0,a.Z)(n)&&(e.bufferViews[n].target=c.Z.ELEMENT_ARRAY_BUFFER)})),o.Z.material(e,(function(e){const t=(0,s.Z)(e.extensions,s.Z.EMPTY_OBJECT),n=t.KHR_materials_common;if((0,a.Z)(n)){const e=n.technique,t=(0,a.Z)(n.values)?n.values:{};return n.values=t,t.ambient=(0,a.Z)(t.ambient)?t.ambient:[0,0,0,1],t.emission=(0,a.Z)(t.emission)?t.emission:[0,0,0,1],t.transparency=(0,s.Z)(t.transparency,1),"CONSTANT"!==e&&(t.diffuse=(0,a.Z)(t.diffuse)?t.diffuse:[0,0,0,1],"LAMBERT"!==e&&(t.specular=(0,a.Z)(t.specular)?t.specular:[0,0,0,1],t.shininess=(0,s.Z)(t.shininess,0))),n.transparent=(0,s.Z)(n.transparent,!1),void(n.doubleSided=(0,s.Z)(n.doubleSided,!1))}e.emissiveFactor=(0,s.Z)(e.emissiveFactor,[0,0,0]),e.alphaMode=(0,s.Z)(e.alphaMode,"OPAQUE"),e.doubleSided=(0,s.Z)(e.doubleSided,!1),"MASK"===e.alphaMode&&(e.alphaCutoff=(0,s.Z)(e.alphaCutoff,.5));const i=t.KHR_techniques_webgl;(0,a.Z)(i)&&o.Z.materialValue(e,(function(e){(0,a.Z)(e.index)&&l(e)})),l(e.emissiveTexture),l(e.normalTexture),l(e.occlusionTexture);const r=e.pbrMetallicRoughness;(0,a.Z)(r)&&(r.baseColorFactor=(0,s.Z)(r.baseColorFactor,[1,1,1,1]),r.metallicFactor=(0,s.Z)(r.metallicFactor,1),r.roughnessFactor=(0,s.Z)(r.roughnessFactor,1),l(r.baseColorTexture),l(r.metallicRoughnessTexture));const c=t.KHR_materials_pbrSpecularGlossiness;(0,a.Z)(c)&&(c.diffuseFactor=(0,s.Z)(c.diffuseFactor,[1,1,1,1]),c.specularFactor=(0,s.Z)(c.specularFactor,[1,1,1]),c.glossinessFactor=(0,s.Z)(c.glossinessFactor,1),l(c.specularGlossinessTexture))})),o.Z.animation(e,(function(e){o.Z.animationSampler(e,(function(e){e.interpolation=(0,s.Z)(e.interpolation,"LINEAR")}))}));const t=function(e){const t={};return o.Z.animation(e,(function(e){o.Z.animationChannel(e,(function(e){const n=e.target,i=n.node,o=n.path;"translation"!==o&&"rotation"!==o&&"scale"!==o||(t[i]=!0)}))})),t}(e);return o.Z.node(e,(function(e,n){(0,a.Z)(t[n])||(0,a.Z)(e.translation)||(0,a.Z)(e.rotation)||(0,a.Z)(e.scale)?(e.translation=(0,s.Z)(e.translation,[0,0,0]),e.rotation=(0,s.Z)(e.rotation,[0,0,0,1]),e.scale=(0,s.Z)(e.scale,[1,1,1])):e.matrix=(0,s.Z)(e.matrix,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])})),o.Z.sampler(e,(function(e){e.wrapS=(0,s.Z)(e.wrapS,c.Z.REPEAT),e.wrapT=(0,s.Z)(e.wrapT,c.Z.REPEAT)})),(0,a.Z)(e.scenes)&&!(0,a.Z)(e.scene)&&(e.scene=0),e}},412827:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(297720),o=n(304982),r=n(11020);const s=function(e,t){let n=e.extensionsRequired;(0,r.Z)(n)||(n=[],e.extensionsRequired=n),(0,o.Z)(n,t,!0),(0,i.Z)(e,t)}},297720:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(304982),o=n(11020);const r=function(e,t){let n=e.extensionsUsed;(0,o.Z)(n)||(n=[],e.extensionsUsed=n),(0,i.Z)(n,t,!0)}},780131:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(616671),o=n(11020);function r(e){e.extras=(0,o.Z)(e.extras)?e.extras:{},e.extras._pipeline=(0,o.Z)(e.extras._pipeline)?e.extras._pipeline:{}}const s=function(e){return i.Z.shader(e,(function(e){r(e)})),i.Z.buffer(e,(function(e){r(e)})),i.Z.image(e,(function(e){r(e)})),r(e),e}},304982:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(234146);const o=function(e,t,n){if(n=(0,i.Z)(n,!1)){const n=e.indexOf(t);if(n>-1)return n}return e.push(t),e.length-1}},738067:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(882366),o=n(207412),r=n(600593),s=n(449809),a=n(11020);const c=function(e,t){const n=e.bufferViews,c=e.buffers,l=t.bufferView,u=(0,r.Z)(t.type);if(!(0,a.Z)(t.bufferView))return{min:new Array(u).fill(0),max:new Array(u).fill(0)};const d=new Array(u).fill(Number.POSITIVE_INFINITY),h=new Array(u).fill(Number.NEGATIVE_INFINITY),f=n[l],p=c[f.buffer].extras._pipeline.source,m=t.count,_=(0,i.Z)(e,t);let g=t.byteOffset+f.byteOffset+p.byteOffset;const Z=t.componentType,y=s.Z.getSizeInBytes(Z),b=new DataView(p.buffer),v=new Array(u),A=(0,o.Z)(Z);for(let e=0;e<m;e++){A(b,g,u,y,v);for(let e=0;e<u;e++){const t=v[e];d[e]=Math.min(d[e],t),h[e]=Math.max(h[e],t)}g+=_}return{min:d,max:h}}},476265:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(616671),o=n(790087),r=n(11020);const s=function(e,t){o.Z.typeOf.object("material",e),o.Z.defined("handler",t);const n=e.pbrMetallicRoughness;if((0,r.Z)(n)){if((0,r.Z)(n.baseColorTexture)){const e=n.baseColorTexture,i=t(e.index,e);if((0,r.Z)(i))return i}if((0,r.Z)(n.metallicRoughnessTexture)){const e=n.metallicRoughnessTexture,i=t(e.index,e);if((0,r.Z)(i))return i}}if((0,r.Z)(e.extensions)){const n=e.extensions.KHR_materials_pbrSpecularGlossiness;if((0,r.Z)(n)){if((0,r.Z)(n.diffuseTexture)){const e=n.diffuseTexture,i=t(e.index,e);if((0,r.Z)(i))return i}if((0,r.Z)(n.specularGlossinessTexture)){const e=n.specularGlossinessTexture,i=t(e.index,e);if((0,r.Z)(i))return i}}const i=e.extensions.KHR_materials_common;if((0,r.Z)(i)&&(0,r.Z)(i.values)){const e=i.values.diffuse,n=i.values.ambient,o=i.values.emission,s=i.values.specular;if((0,r.Z)(e)&&(0,r.Z)(e.index)){const n=t(e.index,e);if((0,r.Z)(n))return n}if((0,r.Z)(n)&&(0,r.Z)(n.index)){const e=t(n.index,n);if((0,r.Z)(e))return e}if((0,r.Z)(o)&&(0,r.Z)(o.index)){const e=t(o.index,o);if((0,r.Z)(e))return e}if((0,r.Z)(s)&&(0,r.Z)(s.index)){const e=t(s.index,s);if((0,r.Z)(e))return e}}}const s=i.Z.materialValue(e,(function(e){if((0,r.Z)(e.index)){const n=t(e.index,e);if((0,r.Z)(n))return n}}));if((0,r.Z)(s))return s;if((0,r.Z)(e.emissiveTexture)){const n=e.emissiveTexture,i=t(n.index,n);if((0,r.Z)(i))return i}if((0,r.Z)(e.normalTexture)){const n=e.normalTexture,i=t(n.index,n);if((0,r.Z)(i))return i}if((0,r.Z)(e.occlusionTexture)){const n=e.occlusionTexture,i=t(n.index,n);if((0,r.Z)(i))return i}}},882366:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(600593),o=n(449809),r=n(11020);const s=function(e,t){const n=t.bufferView;if((0,r.Z)(n)){const t=e.bufferViews[n];if((0,r.Z)(t.byteStride)&&t.byteStride>0)return t.byteStride}return o.Z.getSizeInBytes(t.componentType)*(0,i.Z)(t.type)}},207412:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(449809);const o=function(e){switch(e){case i.Z.BYTE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt8(t+r*i)};case i.Z.UNSIGNED_BYTE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint8(t+r*i)};case i.Z.SHORT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt16(t+r*i,!0)};case i.Z.UNSIGNED_SHORT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint16(t+r*i,!0)};case i.Z.INT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt32(t+r*i,!0)};case i.Z.UNSIGNED_INT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint32(t+r*i,!0)};case i.Z.FLOAT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getFloat32(t+r*i,!0)};case i.Z.DOUBLE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getFloat64(t+r*i,!0)}}}},284625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(297720),o=n(616671),r=n(234146),s=n(11020),a=n(248894);const c=[a.Z.FUNC_ADD,a.Z.FUNC_ADD],l=[a.Z.ONE,a.Z.ZERO,a.Z.ONE,a.Z.ZERO];function u(e,t){const n=e.enable;return!!(0,s.Z)(n)&&n.indexOf(t)>-1}const d=[a.Z.ZERO,a.Z.ONE,a.Z.SRC_COLOR,a.Z.ONE_MINUS_SRC_COLOR,a.Z.SRC_ALPHA,a.Z.ONE_MINUS_SRC_ALPHA,a.Z.DST_ALPHA,a.Z.ONE_MINUS_DST_ALPHA,a.Z.DST_COLOR,a.Z.ONE_MINUS_DST_COLOR];function h(e,t){if(!(0,s.Z)(e))return t;for(let n=0;n<4;n++)if(-1===d.indexOf(e[n]))return t;return e}const f=function(e){const t={},n={},d=e.techniques;return(0,s.Z)(d)?(o.Z.technique(e,(function(e,i){const o=e.states;if((0,s.Z)(o)){const d=n[i]={};if(u(o,a.Z.BLEND)){d.alphaMode="BLEND";const e=o.functions;(0,s.Z)(e)&&((0,s.Z)(e.blendEquationSeparate)||(0,s.Z)(e.blendFuncSeparate))&&(t[i]={blendEquation:(0,r.Z)(e.blendEquationSeparate,c),blendFactors:h(e.blendFuncSeparate,l)})}u(o,a.Z.CULL_FACE)||(d.doubleSided=!0),delete e.states}})),Object.keys(t).length>0&&((0,s.Z)(e.extensions)||(e.extensions={}),(0,i.Z)(e,"KHR_blend")),o.Z.material(e,(function(e){if((0,s.Z)(e.technique)){const i=n[e.technique];o.Z.objectLegacy(i,(function(t,n){e[n]=t}));const r=t[e.technique];(0,s.Z)(r)&&((0,s.Z)(e.extensions)||(e.extensions={}),e.extensions.KHR_blend=r)}})),e):e}},67293:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(297720),o=n(412827),r=n(304982),s=n(616671),a=n(11020);const c=function(e){const t=e.techniques,n={},c={},l={};if((0,a.Z)(t)){const t={programs:[],shaders:[],techniques:[]},u=e.glExtensionsUsed;delete e.glExtensionsUsed,s.Z.technique(e,(function(i,o){const d={name:i.name,program:void 0,attributes:{},uniforms:{}};let h;if(s.Z.techniqueAttribute(i,(function(e,t){h=i.parameters[e],d.attributes[t]={semantic:h.semantic}})),s.Z.techniqueUniform(i,(function(e,t){h=i.parameters[e],d.uniforms[t]={count:h.count,node:h.node,type:h.type,semantic:h.semantic,value:h.value},(0,a.Z)(n[o])||(n[o]={}),n[o][e]=t})),(0,a.Z)(l[i.program]))d.program=l[i.program];else{const n=e.programs[i.program],o={name:n.name,fragmentShader:void 0,vertexShader:void 0,glExtensions:u},s=e.shaders[n.fragmentShader];o.fragmentShader=(0,r.Z)(t.shaders,s,!0);const a=e.shaders[n.vertexShader];o.vertexShader=(0,r.Z)(t.shaders,a,!0),d.program=(0,r.Z)(t.programs,o),l[i.program]=d.program}c[o]=(0,r.Z)(t.techniques,d)})),t.techniques.length>0&&((0,a.Z)(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t,(0,i.Z)(e,"KHR_techniques_webgl"),(0,o.Z)(e,"KHR_techniques_webgl"))}return s.Z.material(e,(function(e){if((0,a.Z)(e.technique)){const t={technique:c[e.technique]};s.Z.objectLegacy(e.values,(function(i,o){(0,a.Z)(t.values)||(t.values={});const r=n[e.technique][o];(0,a.Z)(r)&&(t.values[r]=i)})),(0,a.Z)(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t}delete e.technique,delete e.values})),delete e.techniques,delete e.programs,delete e.shaders,e}},600593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=function(e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}}},867089:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(780131),o=n(611129),r=n(234146),s=n(11020),a=n(252376),c=n(932799),l=n(217066);function u(e,t,n){const i=new DataView(e.buffer),o=new Array(n);for(let r=0;r<n;++r)o[r]=i.getUint32(e.byteOffset+t+4*r,!0);return o}const d=function(e){if("glTF"!==(0,a.Z)(e))throw new l.Z("File is not valid binary glTF");const t=u(e,0,5),n=t[1];if(1!==n&&2!==n)throw new l.Z("Binary glTF version is not 1 or 2");return 1===n?function(e,t){const n=t[2],a=t[3];if(0!==t[4])throw new l.Z("Binary glTF scene format is not JSON");const u=20+a,d=(0,c.Z)(e,20,a),h=JSON.parse(d);(0,i.Z)(h);const f=e.subarray(u,n),p=h.buffers;if((0,s.Z)(p)&&Object.keys(p).length>0){const e=(0,r.Z)(p.binary_glTF,p.KHR_binary_glTF);(0,s.Z)(e)&&(e.extras._pipeline.source=f,delete e.uri)}return(0,o.Z)(h,"KHR_binary_glTF"),h}(e,t):function(e,t){const n=t[2];let o,r,a=12;for(;a<n;){const t=u(e,a,2),n=t[0],s=t[1];a+=8;const l=e.subarray(a,a+n);if(a+=n,1313821514===s){const e=(0,c.Z)(l);o=JSON.parse(e),(0,i.Z)(o)}else 5130562===s&&(r=l)}if((0,s.Z)(o)&&(0,s.Z)(r)){const e=o.buffers;(0,s.Z)(e)&&e.length>0&&(e[0].extras._pipeline.source=r)}return o}(e,t)}},148759:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(882366),o=n(207412),r=n(600593),s=n(449809),a=n(11020);const c=function(e,t){const n=(0,i.Z)(e,t),c=s.Z.getSizeInBytes(t.componentType),l=(0,r.Z)(t.type),u=t.count,d=new Array(l*u);if(!(0,a.Z)(t.bufferView))return d.fill(0);const h=e.bufferViews[t.bufferView],f=e.buffers[h.buffer].extras._pipeline.source;let p=t.byteOffset+h.byteOffset+f.byteOffset;const m=new DataView(f.buffer),_=new Array(l),g=(0,o.Z)(t.componentType);for(let e=0;e<u;++e){g(m,p,l,c,_);for(let t=0;t<l;++t)d[e*l+t]=_[t];p+=n}return d}},934157:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(616671),o=n(611129),r=n(11020);function s(e,t){if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;++i)s(e[i],t)}else if(null!==e&&"object"==typeof e&&e.constructor===Object){const n=e.extensions;let i;(0,r.Z)(n)&&(i=n[t],(0,r.Z)(i)&&(delete n[t],0===Object.keys(n).length&&delete e.extensions));for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&s(e[n],t);return i}}const a=function(e,t){return(0,o.Z)(e,t),"CESIUM_RTC"===t&&function(e){i.Z.technique(e,(function(e){i.Z.techniqueUniform(e,(function(e){"CESIUM_RTC_MODELVIEW"===e.semantic&&(e.semantic="MODELVIEW")}))}))}(e),s(e,t)}},824640:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(11020);const o=function(e,t){const n=e.extensionsRequired;if((0,i.Z)(n)){const i=n.indexOf(t);i>=0&&n.splice(i,1),0===n.length&&delete e.extensionsRequired}}},611129:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(824640),o=n(11020);const r=function(e,t){const n=e.extensionsUsed;if((0,o.Z)(n)){const o=n.indexOf(t);o>=0&&n.splice(o,1),(0,i.Z)(e,t),0===n.length&&delete e.extensionsUsed}}},770404:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(616671),o=n(11020);function r(e){(0,o.Z)(e.extras)&&((0,o.Z)(e.extras._pipeline)&&delete e.extras._pipeline,0===Object.keys(e.extras).length&&delete e.extras)}const s=function(e){return i.Z.shader(e,(function(e){r(e)})),i.Z.buffer(e,(function(e){r(e)})),i.Z.image(e,(function(e){r(e)})),r(e),e}},835198:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(616671),o=n(476265),r=n(21629),s=n(234146),a=n(11020);const c=["mesh","node","material","accessor","bufferView","buffer","texture","sampler","image"],l={accessor:"accessors",buffer:"buffers",bufferView:"bufferViews",image:"images",node:"nodes",material:"materials",mesh:"meshes",sampler:"samplers",texture:"textures"};function u(){}function d(){}function h(e,t,n){const i=e.nodes[t];return!((0,a.Z)(i.mesh)||(0,a.Z)(i.camera)||(0,a.Z)(i.skin)||(0,a.Z)(i.weights)||(0,a.Z)(i.extras)||(0,a.Z)(i.extensions)&&0!==Object.keys(i.extensions).length||(0,a.Z)(n[t])||(0,a.Z)(i.children)&&0!==i.children.filter((function(t){return!h(e,t,n)})).length)}u.accessor=function(e,t){e.accessors.splice(t,1),i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){i.Z.meshPrimitiveAttribute(e,(function(n,i){n>t&&e.attributes[i]--})),i.Z.meshPrimitiveTarget(e,(function(e){i.Z.meshPrimitiveTargetAttribute(e,(function(n,i){n>t&&e[i]--}))}));const n=e.indices;(0,a.Z)(n)&&n>t&&e.indices--}))})),i.Z.skin(e,(function(e){(0,a.Z)(e.inverseBindMatrices)&&e.inverseBindMatrices>t&&e.inverseBindMatrices--})),i.Z.animation(e,(function(e){i.Z.animationSampler(e,(function(e){(0,a.Z)(e.input)&&e.input>t&&e.input--,(0,a.Z)(e.output)&&e.output>t&&e.output--}))}))},u.buffer=function(e,t){e.buffers.splice(t,1),i.Z.bufferView(e,(function(e){(0,a.Z)(e.buffer)&&e.buffer>t&&e.buffer--,(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.EXT_meshopt_compression)&&e.extensions.EXT_meshopt_compression.buffer--}))},u.bufferView=function(e,t){if(e.bufferViews.splice(t,1),i.Z.accessor(e,(function(e){(0,a.Z)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),i.Z.shader(e,(function(e){(0,a.Z)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),i.Z.image(e,(function(e){(0,a.Z)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),(0,r.Z)(e,"KHR_draco_mesh_compression")&&i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.KHR_draco_mesh_compression)&&e.extensions.KHR_draco_mesh_compression.bufferView>t&&e.extensions.KHR_draco_mesh_compression.bufferView--}))})),(0,r.Z)(e,"EXT_feature_metadata")){const n=e.extensions.EXT_feature_metadata.featureTables;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.Z)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];(0,a.Z)(n.bufferView)&&n.bufferView>t&&n.bufferView--,(0,a.Z)(n.arrayOffsetBufferView)&&n.arrayOffsetBufferView>t&&n.arrayOffsetBufferView--,(0,a.Z)(n.stringOffsetBufferView)&&n.stringOffsetBufferView>t&&n.stringOffsetBufferView--}}}if((0,r.Z)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTables;if((0,a.Z)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];(0,a.Z)(i.values)&&i.values>t&&i.values--,(0,a.Z)(i.arrayOffsets)&&i.arrayOffsets>t&&i.arrayOffsets--,(0,a.Z)(i.stringOffsets)&&i.stringOffsets>t&&i.stringOffsets--}}}}},u.image=function(e,t){e.images.splice(t,1),i.Z.texture(e,(function(e){(0,a.Z)(e.source)&&e.source>t&&--e.source;const n=e.extensions;(0,a.Z)(n)&&(0,a.Z)(n.EXT_texture_webp)&&n.EXT_texture_webp.source>t?--e.extensions.EXT_texture_webp.source:(0,a.Z)(n)&&(0,a.Z)(n.KHR_texture_basisu)&&n.KHR_texture_basisu.source>t&&--e.extensions.KHR_texture_basisu.source}))},u.mesh=function(e,t){e.meshes.splice(t,1),i.Z.node(e,(function(e){(0,a.Z)(e.mesh)&&(e.mesh>t?e.mesh--:e.mesh===t&&delete e.mesh)}))},u.node=function(e,t){e.nodes.splice(t,1),i.Z.skin(e,(function(e){(0,a.Z)(e.skeleton)&&e.skeleton>t&&e.skeleton--,e.joints=e.joints.map((function(e){return e>t?e-1:e}))})),i.Z.animation(e,(function(e){i.Z.animationChannel(e,(function(e){(0,a.Z)(e.target)&&(0,a.Z)(e.target.node)&&e.target.node>t&&e.target.node--}))})),i.Z.technique(e,(function(e){i.Z.techniqueUniform(e,(function(e){(0,a.Z)(e.node)&&e.node>t&&e.node--}))})),i.Z.node(e,(function(e){(0,a.Z)(e.children)&&(e.children=e.children.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e})))})),i.Z.scene(e,(function(e){e.nodes=e.nodes.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e}))}))},u.material=function(e,t){e.materials.splice(t,1),i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){(0,a.Z)(e.material)&&e.material>t&&e.material--}))}))},u.sampler=function(e,t){e.samplers.splice(t,1),i.Z.texture(e,(function(e){(0,a.Z)(e.sampler)&&e.sampler>t&&--e.sampler}))},u.texture=function(e,t){if(e.textures.splice(t,1),i.Z.material(e,(function(e){(0,o.Z)(e,(function(e,n){n.index>t&&--n.index}))})),(0,r.Z)(e,"EXT_feature_metadata")){i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){const n=e.extensions;if((0,a.Z)(n)&&(0,a.Z)(n.EXT_feature_metadata)){const e=n.EXT_feature_metadata.featureIdTextures;if((0,a.Z)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i].featureIds.texture;n.index>t&&--n.index}}}}))}));const n=e.extensions.EXT_feature_metadata.featureTextures;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.Z)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e].texture;n.index>t&&--n.index}}}if((0,r.Z)(e,"EXT_mesh_features")&&i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){const n=e.extensions;if((0,a.Z)(n)&&(0,a.Z)(n.EXT_mesh_features)){const e=n.EXT_mesh_features.featureIds;if((0,a.Z)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i];(0,a.Z)(n.texture)&&n.texture.index>t&&--n.texture.index}}}}))})),(0,r.Z)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTextures;if((0,a.Z)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];i.index>t&&--i.index}}}}},d.accessor=function(e){const t={};return i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){i.Z.meshPrimitiveAttribute(e,(function(e){t[e]=!0})),i.Z.meshPrimitiveTarget(e,(function(e){i.Z.meshPrimitiveTargetAttribute(e,(function(e){t[e]=!0}))}));const n=e.indices;(0,a.Z)(n)&&(t[n]=!0)}))})),i.Z.skin(e,(function(e){(0,a.Z)(e.inverseBindMatrices)&&(t[e.inverseBindMatrices]=!0)})),i.Z.animation(e,(function(e){i.Z.animationSampler(e,(function(e){(0,a.Z)(e.input)&&(t[e.input]=!0),(0,a.Z)(e.output)&&(t[e.output]=!0)}))})),(0,r.Z)(e,"EXT_mesh_gpu_instancing")&&i.Z.node(e,(function(e){(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.EXT_mesh_gpu_instancing)&&Object.keys(e.extensions.EXT_mesh_gpu_instancing.attributes).forEach((function(n){const i=e.extensions.EXT_mesh_gpu_instancing.attributes[n];t[i]=!0}))})),t},d.buffer=function(e){const t={};return i.Z.bufferView(e,(function(e){(0,a.Z)(e.buffer)&&(t[e.buffer]=!0),(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.EXT_meshopt_compression)&&(t[e.extensions.EXT_meshopt_compression.buffer]=!0)})),t},d.bufferView=function(e){const t={};if(i.Z.accessor(e,(function(e){(0,a.Z)(e.bufferView)&&(t[e.bufferView]=!0)})),i.Z.shader(e,(function(e){(0,a.Z)(e.bufferView)&&(t[e.bufferView]=!0)})),i.Z.image(e,(function(e){(0,a.Z)(e.bufferView)&&(t[e.bufferView]=!0)})),(0,r.Z)(e,"KHR_draco_mesh_compression")&&i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.KHR_draco_mesh_compression)&&(t[e.extensions.KHR_draco_mesh_compression.bufferView]=!0)}))})),(0,r.Z)(e,"EXT_feature_metadata")){const n=e.extensions.EXT_feature_metadata.featureTables;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.Z)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];(0,a.Z)(n.bufferView)&&(t[n.bufferView]=!0),(0,a.Z)(n.arrayOffsetBufferView)&&(t[n.arrayOffsetBufferView]=!0),(0,a.Z)(n.stringOffsetBufferView)&&(t[n.stringOffsetBufferView]=!0)}}}if((0,r.Z)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTables;if((0,a.Z)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];(0,a.Z)(i.values)&&(t[i.values]=!0),(0,a.Z)(i.arrayOffsets)&&(t[i.arrayOffsets]=!0),(0,a.Z)(i.stringOffsets)&&(t[i.stringOffsets]=!0)}}}}return t},d.image=function(e){const t={};return i.Z.texture(e,(function(e){(0,a.Z)(e.source)&&(t[e.source]=!0),(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.EXT_texture_webp)?t[e.extensions.EXT_texture_webp.source]=!0:(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.KHR_texture_basisu)&&(t[e.extensions.KHR_texture_basisu.source]=!0)})),t},d.mesh=function(e){const t={};return i.Z.node(e,(function(n){if((0,a.Z)(n.mesh&&(0,a.Z)(e.meshes))){const i=e.meshes[n.mesh];(0,a.Z)(i)&&(0,a.Z)(i.primitives)&&i.primitives.length>0&&(t[n.mesh]=!0)}})),t},d.node=function(e){const t={};return i.Z.skin(e,(function(e){(0,a.Z)(e.skeleton)&&(t[e.skeleton]=!0),i.Z.skinJoint(e,(function(e){t[e]=!0}))})),i.Z.animation(e,(function(e){i.Z.animationChannel(e,(function(e){(0,a.Z)(e.target)&&(0,a.Z)(e.target.node)&&(t[e.target.node]=!0)}))})),i.Z.technique(e,(function(e){i.Z.techniqueUniform(e,(function(e){(0,a.Z)(e.node)&&(t[e.node]=!0)}))})),i.Z.node(e,(function(n,i){h(e,i,t)||(t[i]=!0)})),t},d.material=function(e){const t={};return i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){(0,a.Z)(e.material)&&(t[e.material]=!0)}))})),t},d.texture=function(e){const t={};if(i.Z.material(e,(function(e){(0,o.Z)(e,(function(e){t[e]=!0}))})),(0,r.Z)(e,"EXT_feature_metadata")){i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){const n=e.extensions;if((0,a.Z)(n)&&(0,a.Z)(n.EXT_feature_metadata)){const e=n.EXT_feature_metadata.featureIdTextures;if((0,a.Z)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i].featureIds.texture;t[n.index]=!0}}}}))}));const n=e.extensions.EXT_feature_metadata.featureTextures;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.Z)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e].texture;t[n.index]=!0}}}if((0,r.Z)(e,"EXT_mesh_features")&&i.Z.mesh(e,(function(e){i.Z.meshPrimitive(e,(function(e){const n=e.extensions;if((0,a.Z)(n)&&(0,a.Z)(n.EXT_mesh_features)){const e=n.EXT_mesh_features.featureIds;if((0,a.Z)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i];(0,a.Z)(n.texture)&&(t[n.texture.index]=!0)}}}}))})),(0,r.Z)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTextures;if((0,a.Z)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t[i.index]=!0}}}}return t},d.sampler=function(e){const t={};return i.Z.texture(e,(function(e){(0,a.Z)(e.sampler)&&(t[e.sampler]=!0)})),t};const f=function(e,t){return t=(0,s.Z)(t,c),c.forEach((function(n){t.indexOf(n)>-1&&function(e,t){const n=e[l[t]];if((0,a.Z)(n)){let i=0;const o=d[t](e),r=n.length;for(let n=0;n<r;++n)o[n]||(u[t](e,n-i),i++)}}(e,n)})),e}},796157:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(600789),o=n(616671),r=n(148759),s=n(449809),a=n(248894);function c(e,t,n){const o=s.Z.createTypedArray(n,(0,r.Z)(e,t)),a=new Uint8Array(o.buffer);t.bufferView=(0,i.Z)(e,a),t.componentType=n,t.byteOffset=0}const l=function(e){let t;return o.Z.accessorWithSemantic(e,"JOINTS_0",(function(n){const i=e.accessors[n];t=i.componentType,t===a.Z.BYTE?c(e,i,s.Z.UNSIGNED_BYTE):t!==a.Z.UNSIGNED_BYTE&&t!==a.Z.UNSIGNED_SHORT&&c(e,i,s.Z.UNSIGNED_SHORT)})),o.Z.accessorWithSemantic(e,"WEIGHTS_0",(function(n){const i=e.accessors[n];t=i.componentType,t===a.Z.BYTE?c(e,i,s.Z.UNSIGNED_BYTE):t===a.Z.SHORT&&c(e,i,s.Z.UNSIGNED_SHORT)})),e}},887719:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var i=n(297720),o=n(304982),r=n(738067),s=n(616671),a=n(882366),c=n(600593),l=n(284625),u=n(67293),d=n(835198),h=n(796157),f=n(934157),p=n(660904),m=n(798336),_=n(823438),g=n(449809),Z=n(234146),y=n(11020),b=n(659635),v=n(360846),A=n(248894);const T={.8:function(e){(0,y.Z)(e.asset)||(e.asset={});const t=e.asset;if(t.version="1.0","string"==typeof t.profile){const e=t.profile.split(" ");t.profile={api:e[0],version:e[1]}}else t.profile={};if((0,y.Z)(e.version)&&delete e.version,w(e),function(e){const t=e.meshes;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e].primitives;if((0,y.Z)(n)){const e=n.length;for(let t=0;t<e;++t){const e=n[t],i=(0,Z.Z)(e.primitive,A.Z.TRIANGLES);e.mode=(0,Z.Z)(e.mode,i),delete e.primitive}}}}(e),function(e){const t=e.nodes,n=new p.Z,i=new v.Z;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const o=t[e];if((0,y.Z)(o.rotation)){const e=o.rotation;p.Z.fromArray(e,0,n),v.Z.fromAxisAngle(n,e[3],i),o.rotation=[i.x,i.y,i.z,i.w]}const r=o.instanceSkin;(0,y.Z)(r)&&(o.skeletons=r.skeletons,o.skin=r.skin,o.meshes=r.meshes,delete o.instanceSkin)}}(e),function(e){const t=e.animations,n=e.accessors,i=e.bufferViews,o=e.buffers,r={},s=new p.Z,a=new v.Z;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const l=t[e],u=l.channels,d=l.parameters,h=l.samplers;if((0,y.Z)(u)){const e=u.length;for(let t=0;t<e;++t){const e=u[t];if("rotation"===e.target.path){const t=d[h[e.sampler].output];if((0,y.Z)(r[t]))continue;r[t]=!0;const l=n[t],u=i[l.bufferView],f=o[u.buffer].extras._pipeline.source,m=f.byteOffset+u.byteOffset+l.byteOffset,_=l.componentType,Z=l.count,b=(0,c.Z)(l.type),A=l.count*b,T=g.Z.createArrayBufferView(_,f.buffer,m,A);for(let e=0;e<Z;e++){const t=e*b;p.Z.unpack(T,t,s);const n=T[t+3];v.Z.fromAxisAngle(s,n,a),v.Z.pack(a,T,t)}}}}}}(e),function(e){const t=e.techniques;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.passes;if((0,y.Z)(i)){const e=(0,Z.Z)(n.pass,"defaultPass");if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e],o=t.instanceProgram;n.attributes=(0,Z.Z)(n.attributes,o.attributes),n.program=(0,Z.Z)(n.program,o.program),n.uniforms=(0,Z.Z)(n.uniforms,o.uniforms),n.states=(0,Z.Z)(n.states,t.states)}delete n.passes,delete n.pass}}}(e),(0,y.Z)(e.allExtensions)&&(e.extensionsUsed=e.allExtensions,delete e.allExtensions),(0,y.Z)(e.lights)){const t=(0,Z.Z)(e.extensions,{});e.extensions=t;const n=(0,Z.Z)(t.KHR_materials_common,{});t.KHR_materials_common=n,n.lights=e.lights,delete e.lights,(0,i.Z)(e,"KHR_materials_common")}},"1.0":function(e){e.asset=(0,Z.Z)(e.asset,{}),e.asset.version="2.0",w(e),function(e){const t=e.animations;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.parameters;if((0,y.Z)(i)){const e=n.samplers;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];n.input=i[n.input],n.output=i[n.output]}delete n.parameters}}}(e),function(e){s.Z.node(e,(function(t,n){P(t)&&D(e,n)}))}(e),function(e){let t;const n={accessors:{},animations:{},buffers:{},bufferViews:{},cameras:{},images:{},materials:{},meshes:{},nodes:{},programs:{},samplers:{},scenes:{},shaders:{},skins:{},textures:{},techniques:{}};let i;const r={},a=e.nodes;for(const e in a)Object.prototype.hasOwnProperty.call(a,e)&&(i=a[e].jointName,(0,y.Z)(i)&&(r[i]=e));for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&(0,y.Z)(n[t])){const i={},o=e[t];e[t]=E(o,i),n[t]=i}for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(r[i]=n.nodes[r[i]]);(0,y.Z)(e.scene)&&(e.scene=n.scenes[e.scene]),s.Z.bufferView(e,(function(e){(0,y.Z)(e.buffer)&&(e.buffer=n.buffers[e.buffer])})),s.Z.accessor(e,(function(e){(0,y.Z)(e.bufferView)&&(e.bufferView=n.bufferViews[e.bufferView])})),s.Z.shader(e,(function(e){const t=e.extensions;if((0,y.Z)(t)){const i=t.KHR_binary_glTF;(0,y.Z)(i)&&(e.bufferView=n.bufferViews[i.bufferView],delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}})),s.Z.program(e,(function(e){(0,y.Z)(e.vertexShader)&&(e.vertexShader=n.shaders[e.vertexShader]),(0,y.Z)(e.fragmentShader)&&(e.fragmentShader=n.shaders[e.fragmentShader])})),s.Z.technique(e,(function(e){(0,y.Z)(e.program)&&(e.program=n.programs[e.program]),s.Z.techniqueParameter(e,(function(e){(0,y.Z)(e.node)&&(e.node=n.nodes[e.node]);const t=e.value;"string"==typeof t&&(e.value={index:n.textures[t]})}))})),s.Z.mesh(e,(function(e){s.Z.meshPrimitive(e,(function(e){(0,y.Z)(e.indices)&&(e.indices=n.accessors[e.indices]),s.Z.meshPrimitiveAttribute(e,(function(t,i){e.attributes[i]=n.accessors[t]})),(0,y.Z)(e.material)&&(e.material=n.materials[e.material])}))})),s.Z.node(e,(function(i){let r=i.children;if((0,y.Z)(r)){const e=r.length;for(t=0;t<e;++t)r[t]=n.nodes[r[t]]}if((0,y.Z)(i.meshes)){const s=i.meshes,a=s.length;if(a>0)for(i.mesh=n.meshes[s[0]],t=1;t<a;++t){const a={mesh:n.meshes[s[t]]},c=(0,o.Z)(e.nodes,a);(0,y.Z)(r)||(r=[],i.children=r),r.push(c)}delete i.meshes}if((0,y.Z)(i.camera)&&(i.camera=n.cameras[i.camera]),(0,y.Z)(i.skin)&&(i.skin=n.skins[i.skin]),(0,y.Z)(i.skeletons)){const t=i.skeletons;t.length>0&&(0,y.Z)(i.skin)&&(e.skins[i.skin].skeleton=n.nodes[t[0]]),delete i.skeletons}(0,y.Z)(i.jointName)&&delete i.jointName})),s.Z.skin(e,(function(e){(0,y.Z)(e.inverseBindMatrices)&&(e.inverseBindMatrices=n.accessors[e.inverseBindMatrices]);const i=e.jointNames;if((0,y.Z)(i)){const n=[],o=i.length;for(t=0;t<o;++t)n[t]=r[i[t]];e.joints=n,delete e.jointNames}})),s.Z.scene(e,(function(e){const i=e.nodes;if((0,y.Z)(i)){const e=i.length;for(t=0;t<e;++t)i[t]=n.nodes[i[t]]}})),s.Z.animation(e,(function(e){const t={};e.samplers=E(e.samplers,t),s.Z.animationSampler(e,(function(e){e.input=n.accessors[e.input],e.output=n.accessors[e.output]})),s.Z.animationChannel(e,(function(e){e.sampler=t[e.sampler];const i=e.target;(0,y.Z)(i)&&(i.node=n.nodes[i.id],delete i.id)}))})),s.Z.material(e,(function(e){(0,y.Z)(e.technique)&&(e.technique=n.techniques[e.technique]),s.Z.materialValue(e,(function(t,i){"string"==typeof t&&(e.values[i]={index:n.textures[t]})}));const t=e.extensions;if((0,y.Z)(t)){const e=t.KHR_materials_common;(0,y.Z)(e)&&(0,y.Z)(e.values)&&s.Z.materialValue(e,(function(t,i){"string"==typeof t&&(e.values[i]={index:n.textures[t]})}))}})),s.Z.image(e,(function(e){const t=e.extensions;if((0,y.Z)(t)){const i=t.KHR_binary_glTF;(0,y.Z)(i)&&(e.bufferView=n.bufferViews[i.bufferView],e.mimeType=i.mimeType,delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}})),s.Z.texture(e,(function(e){(0,y.Z)(e.sampler)&&(e.sampler=n.samplers[e.sampler]),(0,y.Z)(e.source)&&(e.source=n.images[e.source])}))}(e),function(e){s.Z.animation(e,(function(e){s.Z.animationSampler(e,(function(e){delete e.name}))}))}(e),function(e){const t=e.asset;delete t.profile,delete t.premultipliedAlpha}(e),function(e){const t=e.extensionsUsed;if(e.extensionsRequired=(0,Z.Z)(e.extensionsRequired,[]),(0,y.Z)(t)){const n=t.length;for(let i=0;i<n;++i){const n=t[i];(0,y.Z)(S[n])&&e.extensionsRequired.push(n)}}}(e),function(e){s.Z.buffer(e,(function(e){(0,y.Z)(e.byteLength)||(e.byteLength=e.extras._pipeline.source.length)})),s.Z.accessor(e,(function(t){const n=t.bufferView;if((0,y.Z)(n)){const i=e.bufferViews[n],o=I(e,t),r=t.byteOffset+t.count*o;i.byteLength=Math.max((0,Z.Z)(i.byteLength,0),r)}}))}(e),function(e){let t,n,i;const r=e.bufferViews,a={};s.Z.accessorContainingVertexAttributeData(e,(function(t){const n=e.accessors[t];(0,y.Z)(n.bufferView)&&(a[n.bufferView]=!0)}));const c={};s.Z.accessor(e,(function(e){(0,y.Z)(e.bufferView)&&(c[e.bufferView]=(0,Z.Z)(c[e.bufferView],[]),c[e.bufferView].push(e))}));for(const s in c)if(Object.prototype.hasOwnProperty.call(c,s)){i=r[s];const l=c[s];l.sort((function(e,t){return e.byteOffset-t.byteOffset}));let u=0,d=0;const h=l.length;for(t=0;t<h;++t){let c=l[t];const f=I(e,c),p=c.byteOffset,m=c.count*f;delete c.byteStride;const g=t<h-1;if(f!==(g?I(e,l[t+1]):void 0)){const e=(0,_.Z)(i,!0);a[s]&&(e.byteStride=f),e.byteOffset+=u,e.byteLength=p+m-u;const h=(0,o.Z)(r,e);for(n=d;n<=t;++n)c=l[n],c.bufferView=h,c.byteOffset=c.byteOffset-u;u=g?l[t+1].byteOffset:void 0,d=t+1}}}(0,d.Z)(e,["accessor","bufferView","buffer"])}(e),function(e){s.Z.accessorWithSemantic(e,"POSITION",(function(t){const n=e.accessors[t];if(!(0,y.Z)(n.min)||!(0,y.Z)(n.max)){const t=(0,r.Z)(e,n);n.min=t.min,n.max=t.max}}))}(e),function(e){s.Z.animation(e,(function(t){s.Z.animationSampler(t,(function(t){const n=e.accessors[t.input];if(!(0,y.Z)(n.min)||!(0,y.Z)(n.max)){const t=(0,r.Z)(e,n);n.min=t.min,n.max=t.max}}))}))}(e),function(e){s.Z.accessor(e,(function(t){if((0,y.Z)(t.min)||(0,y.Z)(t.max)){const n=(0,r.Z)(e,t);(0,y.Z)(t.min)&&(t.min=n.min),(0,y.Z)(t.max)&&(t.max=n.max)}}))}(e),function(e){s.Z.buffer(e,(function(e){delete e.type}))}(e),function(e){s.Z.texture(e,(function(e){delete e.format,delete e.internalFormat,delete e.target,delete e.type}))}(e),function(e){s.Z.mesh(e,(function(e){s.Z.meshPrimitive(e,(function(e){s.Z.meshPrimitiveAttribute(e,(function(t,n){"TEXCOORD"===n?e.attributes.TEXCOORD_0=t:"COLOR"===n&&(e.attributes.COLOR_0=t)})),delete e.attributes.TEXCOORD,delete e.attributes.COLOR}))})),s.Z.technique(e,(function(e){s.Z.techniqueParameter(e,(function(e){const t=e.semantic;(0,y.Z)(t)&&("TEXCOORD"===t?e.semantic="TEXCOORD_0":"COLOR"===t&&(e.semantic="COLOR_0"))}))}))}(e),function(e){const t={};s.Z.mesh(e,(function(e){s.Z.meshPrimitive(e,(function(e){s.Z.meshPrimitiveAttribute(e,(function(e,n){if("_"!==n.charAt(0)){const e=n.search(/_[0-9]+/g);let i,o=n,r="_0";e>=0&&(o=n.substring(0,e),r=n.substring(e));const s=x[o];(0,y.Z)(s)?(i=s+r,t[n]=i):(0,y.Z)(C[o])||(i=`_${n}`,t[n]=i)}}));for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n],o=e.attributes[n];(0,y.Z)(o)&&(delete e.attributes[n],e.attributes[i]=o)}}))})),s.Z.technique(e,(function(e){s.Z.techniqueParameter(e,(function(e){const n=t[e.semantic];(0,y.Z)(n)&&(e.semantic=n)}))}))}(e),(0,h.Z)(e),function(e){s.Z.camera(e,(function(e){const t=e.perspective;if((0,y.Z)(t)){const e=t.aspectRatio;(0,y.Z)(e)&&0===e&&delete t.aspectRatio;const n=t.yfov;(0,y.Z)(n)&&0===n&&(t.yfov=1)}}))}(e),(0,l.Z)(e),(0,u.Z)(e),function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];Array.isArray(n)&&0===n.length&&delete e[t]}s.Z.node(e,(function(e){(0,y.Z)(e.children)&&0===e.children.length&&delete e.children}))}(e)},"2.0":void 0};function w(e){const t=e.materials;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.instanceTechnique;(0,y.Z)(i)&&(n.technique=i.technique,n.values=i.values,delete n.instanceTechnique)}}function E(e,t){const n=[];for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];t[i]=n.length,n.push(o),(0,y.Z)(o.name)||(o.name=i)}return n}const S={CESIUM_RTC:!0,KHR_materials_common:!0,WEB3D_quantized_attributes:!0},C={POSITION:!0,NORMAL:!0,TANGENT:!0},x={COLOR:"COLOR",JOINT:"JOINTS",JOINTS:"JOINTS",TEXCOORD:"TEXCOORD",WEIGHT:"WEIGHTS",WEIGHTS:"WEIGHTS"};function I(e,t){return(0,y.Z)(t.byteStride)&&0!==t.byteStride?t.byteStride:(0,a.Z)(e,t)}function P(e){return(!(0,y.Z)(e.children)||0===e.children.length)&&(!(0,y.Z)(e.meshes)||0===e.meshes.length)&&!(0,y.Z)(e.camera)&&!(0,y.Z)(e.skin)&&!(0,y.Z)(e.skeletons)&&!(0,y.Z)(e.jointName)&&(!(0,y.Z)(e.translation)||p.Z.fromArray(e.translation).equals(p.Z.ZERO))&&(!(0,y.Z)(e.scale)||p.Z.fromArray(e.scale).equals(new p.Z(1,1,1)))&&(!(0,y.Z)(e.rotation)||m.Z.fromArray(e.rotation).equals(new m.Z(0,0,0,1)))&&(!(0,y.Z)(e.matrix)||b.Z.fromColumnMajorArray(e.matrix).equals(b.Z.IDENTITY))&&!(0,y.Z)(e.extensions)&&!(0,y.Z)(e.extras)}function D(e,t){s.Z.scene(e,(function(e){const n=e.nodes;if((0,y.Z)(n))for(let e=n.length;e>=0;--e)if(n[e]===t)return void n.splice(e,1)})),s.Z.node(e,(function(n,i){if((0,y.Z)(n.children)){const o=n.children.indexOf(t);o>-1&&(n.children.splice(o,1),P(n)&&D(e,i))}})),delete e.nodes[t]}const O=["u_tex","u_diffuse","u_emission"],L=["u_diffuse"];function N(e){e.pbrMetallicRoughness=(0,y.Z)(e.pbrMetallicRoughness)?e.pbrMetallicRoughness:{},e.pbrMetallicRoughness.roughnessFactor=1,e.pbrMetallicRoughness.metallicFactor=0}function M(e){return(0,y.Z)(e.index)}function R(e){return Array.isArray(e)&&4===e.length}function F(e){const t=new Array(4);t[3]=e[3];for(let n=0;n<3;n++){const i=e[n];t[n]=i<=.04045?.07739938080495357*e[n]:Math.pow(.9478672985781991*(i+.055),2.4)}return t}const B=function(e,t){const n=(t=(0,Z.Z)(t,Z.Z.EMPTY_OBJECT)).targetVersion;let o=e.version;e.asset=(0,Z.Z)(e.asset,{version:"1.0"}),e.asset.version=(0,Z.Z)(e.asset.version,"1.0"),o=(0,Z.Z)(o,e.asset.version).toString(),Object.prototype.hasOwnProperty.call(T,o)||((0,y.Z)(o)&&(o=o.substring(0,3)),Object.prototype.hasOwnProperty.call(T,o)||(o="1.0"));let r=T[o];for(;(0,y.Z)(r)&&o!==n;)r(e,t),o=e.asset.version,r=T[o];return t.keepLegacyExtensions||(function(e){s.Z.material(e,(function(e){s.Z.materialValue(e,(function(t,n){-1!==O.indexOf(n)&&M(t)?(N(e),e.pbrMetallicRoughness.baseColorTexture=t):-1!==L.indexOf(n)&&R(t)&&(N(e),e.pbrMetallicRoughness.baseColorFactor=F(t))}))})),(0,f.Z)(e,"KHR_techniques_webgl"),(0,f.Z)(e,"KHR_blend")}(e),function(e){s.Z.material(e,(function(t){const n=(0,Z.Z)(t.extensions,Z.Z.EMPTY_OBJECT).KHR_materials_common;if((0,y.Z)(n)){"CONSTANT"===n.technique&&((0,i.Z)(e,"KHR_materials_unlit"),t.extensions=(0,y.Z)(t.extensions)?t.extensions:{},t.extensions.KHR_materials_unlit={});const o=(0,y.Z)(n.values)?n.values:{},r=o.ambient,s=o.diffuse,a=o.emission,c=o.transparency,l=n.doubleSided,u=n.transparent;N(t),(0,y.Z)(r)&&(R(r)?t.emissiveFactor=r.slice(0,3):M(r)&&(t.emissiveTexture=r)),(0,y.Z)(s)&&(R(s)?t.pbrMetallicRoughness.baseColorFactor=F(s):M(s)&&(t.pbrMetallicRoughness.baseColorTexture=s)),(0,y.Z)(l)&&(t.doubleSided=l),(0,y.Z)(a)&&(R(a)?t.emissiveFactor=a.slice(0,3):M(a)&&(t.emissiveTexture=a)),(0,y.Z)(c)&&((0,y.Z)(t.pbrMetallicRoughness.baseColorFactor)?t.pbrMetallicRoughness.baseColorFactor[3]*=c:t.pbrMetallicRoughness.baseColorFactor=[1,1,1,c]),(0,y.Z)(u)&&(t.alphaMode=u?"BLEND":"OPAQUE")}})),(0,f.Z)(e,"KHR_materials_common")}(e)),e}},21629:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(11020);const o=function(e,t){return(0,i.Z)(e.extensionsUsed)&&e.extensionsUsed.indexOf(t)>=0}},261804:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(790087),o=n(234146),r=n(11020),s=n(765153),a=n(963951),c=n(532298),l=n(518065),u=n(757587),d=n(897955);function h(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.extension,a=e.extensionLegacy,c=e.gltfResource,l=e.baseResource,u=e.supportedImageFormats,h=e.frameState,f=e.cacheKey,p=(0,o.Z)(e.asynchronous,!0);if(i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.object("options.gltfResource",c),i.Z.typeOf.object("options.baseResource",l),i.Z.typeOf.object("options.supportedImageFormats",u),i.Z.typeOf.object("options.frameState",h),!(0,r.Z)(e.extension)&&!(0,r.Z)(e.extensionLegacy))throw new s.Z("One of options.extension or options.extensionLegacy must be specified");this._gltfResource=c,this._baseResource=l,this._gltf=t,this._extension=n,this._extensionLegacy=a,this._supportedImageFormats=u,this._frameState=h,this._cacheKey=f,this._asynchronous=p,this._bufferViewLoaders=[],this._bufferViewIds=[],this._textureLoaders=[],this._textureIds=[],this._schemaLoader=void 0,this._structuralMetadata=void 0,this._state=d.Z.UNLOADED,this._promise=void 0}function f(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.values,s=i.arrayOffsets,a=i.stringOffsets;(0,r.Z)(o)&&(t[o]=!0),(0,r.Z)(s)&&(t[s]=!0),(0,r.Z)(a)&&(t[a]=!0)}}function p(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.bufferView,s=i.arrayOffsetBufferView,a=i.stringOffsetBufferView;(0,r.Z)(o)&&(t[o]=!0),(0,r.Z)(s)&&(t[s]=!0),(0,r.Z)(a)&&(t[a]=!0)}}function m(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t[i.index]=i}}function _(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n].texture;t[i.index]=i}}function g(e){const t=e._bufferViewLoaders,n=t.length;for(let e=0;e<n;++e)l.Z.unload(t[e]);e._bufferViewLoaders.length=0,e._bufferViewIds.length=0}(0,r.Z)(Object.create)&&(h.prototype=Object.create(u.Z.prototype),h.prototype.constructor=h),Object.defineProperties(h.prototype,{cacheKey:{get:function(){return this._cacheKey}},structuralMetadata:{get:function(){return this._structuralMetadata}}}),h.prototype.load=function(){return(0,r.Z)(this._promise)||(this._state=d.Z.LOADING,this._promise=async function(e){try{const t=async function(e){let t;t=(0,r.Z)(e._extension)?function(e){const t=e.propertyTables,n={};if((0,r.Z)(t))for(let e=0;e<t.length;e++)f(t[e].properties,n);return n}(e._extension):function(e){const t=e.featureTables,n={};if((0,r.Z)(t))for(const e in t)if(t.hasOwnProperty(e)){const i=t[e].properties;(0,r.Z)(i)&&p(i,n)}return n}(e._extensionLegacy);const n=[];for(const i in t)if(t.hasOwnProperty(i)){const t=l.Z.getBufferViewLoader({gltf:e._gltf,bufferViewId:parseInt(i),gltfResource:e._gltfResource,baseResource:e._baseResource});e._bufferViewLoaders.push(t),e._bufferViewIds.push(i),n.push(t.load())}return Promise.all(n)}(e),n=function(e){let t;t=(0,r.Z)(e._extension)?function(e){const t={},n=e.propertyTextures;if((0,r.Z)(n))for(let e=0;e<n.length;e++){const i=n[e].properties;(0,r.Z)(i)&&m(i,t)}return t}(e._extension):function(e){const t={},n=e.featureTextures;if((0,r.Z)(n))for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;(0,r.Z)(i)&&_(i,t)}return t}(e._extensionLegacy);const n=e._gltf,i=e._gltfResource,o=e._baseResource,s=e._supportedImageFormats,a=e._frameState,c=e._asynchronous,u=[];for(const r in t)if(t.hasOwnProperty(r)){const d=l.Z.getTextureLoader({gltf:n,textureInfo:t[r],gltfResource:i,baseResource:o,supportedImageFormats:s,frameState:a,asynchronous:c});e._textureLoaders.push(d),e._textureIds.push(r),u.push(d.load())}return Promise.all(u)}(e),i=async function(e){const t=(0,o.Z)(e._extension,e._extensionLegacy);let n;if((0,r.Z)(t.schemaUri)){const i=e._baseResource.getDerivedResource({url:t.schemaUri});n=l.Z.getSchemaLoader({resource:i})}else n=l.Z.getSchemaLoader({schema:t.schema});if(e._schemaLoader=n,await n.load(),!n.isDestroyed())return n.schema}(e);if(await Promise.all([t,n,i]),e.isDestroyed())return;return e._gltf=void 0,e._state=d.Z.LOADED,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=d.Z.FAILED;const n="Failed to load structural metadata";throw e.getError(n,t)}}(this)),this._promise},h.prototype.process=function(e){if(i.Z.typeOf.object("frameState",e),this._state===d.Z.READY)return!0;if(this._state!==d.Z.LOADED)return!1;const t=this._textureLoaders,n=t.length;let o=!0;for(let i=0;i<n;++i){const n=t[i].process(e);o=o&&n}if(!o)return!1;const s=this._schemaLoader.schema,l={};for(let e=0;e<this._bufferViewIds.length;++e){const t=this._bufferViewIds[e],n=this._bufferViewLoaders[e];if(!n.isDestroyed()){const e=new Uint8Array(n.typedArray);l[t]=e}}const u={};for(let e=0;e<this._textureIds.length;++e){const n=this._textureIds[e],i=t[e];i.isDestroyed()||(u[n]=i.texture)}return(0,r.Z)(this._extension)?this._structuralMetadata=(0,a.Z)({extension:this._extension,schema:s,bufferViews:l,textures:u}):this._structuralMetadata=(0,c.Z)({extension:this._extensionLegacy,schema:s,bufferViews:l,textures:u}),g(this),this._state=d.Z.READY,!0},h.prototype.unload=function(){g(this),function(e){const t=e._textureLoaders,n=t.length;for(let e=0;e<n;++e)l.Z.unload(t[e]);e._textureLoaders.length=0,e._textureIds.length=0}(this),(0,r.Z)(this._schemaLoader)&&l.Z.unload(this._schemaLoader),this._schemaLoader=void 0,this._structuralMetadata=void 0};const Z=h},941826:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(790087),o=n(344485),r=n(234146),s=n(11020),a=n(430886),c=n(609882),l=n(55248),u=n(49940),d=n(822518),h=n(754672),f=n(757587),p=n(897955),m=n(804376);function _(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).resourceCache,n=e.gltf,o=e.textureInfo,s=e.gltfResource,a=e.baseResource,c=e.supportedImageFormats,l=e.cacheKey,u=(0,r.Z)(e.asynchronous,!0);i.Z.typeOf.func("options.resourceCache",t),i.Z.typeOf.object("options.gltf",n),i.Z.typeOf.object("options.textureInfo",o),i.Z.typeOf.object("options.gltfResource",s),i.Z.typeOf.object("options.baseResource",a),i.Z.typeOf.object("options.supportedImageFormats",c);const h=o.index,f=d.Z.getImageIdFromTexture({gltf:n,textureId:h,supportedImageFormats:c});this._resourceCache=t,this._gltf=n,this._textureInfo=o,this._imageId=f,this._gltfResource=s,this._baseResource=a,this._cacheKey=l,this._asynchronous=u,this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._state=p.Z.UNLOADED,this._promise=void 0}(0,s.Z)(Object.create)&&(_.prototype=Object.create(f.Z.prototype),_.prototype.constructor=_),Object.defineProperties(_.prototype,{cacheKey:{get:function(){return this._cacheKey}},texture:{get:function(){return this._texture}}});const g=new Z;function Z(){this.gltf=void 0,this.textureInfo=void 0,this.image=void 0,this.context=void 0,this.texture=void 0}function y(e,t,n,i,r){const h=n.internalFormat;let f=!1;a.Z.isCompressedFormat(h)&&!(0,s.Z)(i)&&(f=!0);const p=d.Z.createSampler({gltf:e,textureInfo:t,compressedTextureNoMipmap:f}),_=p.minificationFilter,g=p.wrapS,Z=p.wrapT,y=_===l.Z.NEAREST_MIPMAP_NEAREST||_===l.Z.NEAREST_MIPMAP_LINEAR||_===l.Z.LINEAR_MIPMAP_NEAREST||_===l.Z.LINEAR_MIPMAP_LINEAR,b=!(0,s.Z)(h)&&y,v=b||g===u.Z.REPEAT||g===u.Z.MIRRORED_REPEAT||Z===u.Z.REPEAT||Z===u.Z.MIRRORED_REPEAT,A=!o.Z.isPowerOfTwo(n.width)||!o.Z.isPowerOfTwo(n.height),T=v&&A;let w;return(0,s.Z)(h)?(!r.webgl2&&a.Z.isCompressedFormat(h)&&A&&v&&console.warn("Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly."),w=c.Z.create({context:r,source:{arrayBufferView:n.bufferView,mipLevels:i},width:n.width,height:n.height,pixelFormat:n.internalFormat,sampler:p})):(T&&(n=(0,m.Z)(n)),w=c.Z.create({context:r,source:n,sampler:p,flipY:!1,skipColorSpaceConversion:!0})),b&&w.generateMipmap(),w}_.prototype.load=async function(){return(0,s.Z)(this._promise)||(this._state=p.Z.LOADING,this._promise=async function(e){const t=e._resourceCache;try{const n=t.getImageLoader({gltf:e._gltf,imageId:e._imageId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._imageLoader=n,await n.load(),e.isDestroyed())return;return e._image=n.image,e._mipLevels=n.mipLevels,e._state=p.Z.LOADED,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=p.Z.FAILED;const n="Failed to load texture";throw e.getError(n,t)}}(this)),this._promise},Z.prototype.set=function(e,t,n,i,o){this.gltf=e,this.textureInfo=t,this.image=n,this.mipLevels=i,this.context=o},Z.prototype.execute=function(){this.texture=y(this.gltf,this.textureInfo,this.image,this.mipLevels,this.context)},_.prototype.process=function(e){if(i.Z.typeOf.object("frameState",e),this._state===p.Z.READY)return!0;if(this._state!==p.Z.LOADED&&this._state!==p.Z.PROCESSING)return!1;if((0,s.Z)(this._texture))return!1;if(!(0,s.Z)(this._image))return!1;let t;if(this._state=p.Z.PROCESSING,this._asynchronous){const n=g;if(n.set(this._gltf,this._textureInfo,this._image,this._mipLevels,e.context),!e.jobScheduler.execute(n,h.Z.TEXTURE))return;t=n.texture}else t=y(this._gltf,this._textureInfo,this._image,this._mipLevels,e.context);return this.unload(),this._texture=t,this._state=p.Z.READY,this._resourceCache.statistics.addTextureLoader(this),!0},_.prototype.unload=function(){(0,s.Z)(this._texture)&&this._texture.destroy(),(0,s.Z)(this._imageLoader)&&!this._imageLoader.isDestroyed()&&this._resourceCache.unload(this._imageLoader),this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._gltf=void 0};const b=_},32018:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(790087),o=n(234146),r=n(11020),s=n(765153),a=n(379593),c=n(915323),l=n(388402),u=n(754672),d=n(583982),h=n(757587),f=n(897955);function p(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resourceCache,n=e.gltf,a=e.gltfResource,c=e.baseResource,l=e.bufferViewId,u=e.draco,d=e.attributeSemantic,h=e.accessorId,p=e.cacheKey,_=(0,o.Z)(e.asynchronous,!0),g=(0,o.Z)(e.loadBuffer,!1),Z=(0,o.Z)(e.loadTypedArray,!1);if(i.Z.typeOf.func("options.resourceCache",t),i.Z.typeOf.object("options.gltf",n),i.Z.typeOf.object("options.gltfResource",a),i.Z.typeOf.object("options.baseResource",c),!g&&!Z)throw new s.Z("At least one of loadBuffer and loadTypedArray must be true.");const y=(0,r.Z)(l),b=m(u,d),v=(0,r.Z)(d),A=(0,r.Z)(h);if(y===b)throw new s.Z("One of options.bufferViewId and options.draco must be defined.");if(b&&!v)throw new s.Z("When options.draco is defined options.attributeSemantic must also be defined.");if(b&&!A)throw new s.Z("When options.draco is defined options.accessorId must also be defined.");b&&(i.Z.typeOf.object("options.draco",u),i.Z.typeOf.string("options.attributeSemantic",d),i.Z.typeOf.number("options.accessorId",h)),this._resourceCache=t,this._gltfResource=a,this._baseResource=c,this._gltf=n,this._bufferViewId=l,this._draco=u,this._attributeSemantic=d,this._accessorId=h,this._cacheKey=p,this._asynchronous=_,this._loadBuffer=g,this._loadTypedArray=Z,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._quantization=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=f.Z.UNLOADED,this._promise=void 0}function m(e,t){return(0,r.Z)(e)&&(0,r.Z)(e.attributes)&&(0,r.Z)(e.attributes[t])}function _(e,t){throw e.unload(),e._state=f.Z.FAILED,e.getError("Failed to load vertex buffer",t)}function g(){this.typedArray=void 0,this.context=void 0,this.buffer=void 0}function Z(e,t){const n=a.Z.createVertexBuffer({typedArray:e,context:t,usage:c.Z.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}(0,r.Z)(Object.create)&&(p.prototype=Object.create(h.Z.prototype),p.prototype.constructor=p),Object.defineProperties(p.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},quantization:{get:function(){return this._quantization}}}),p.prototype.load=async function(){return(0,r.Z)(this._promise)?this._promise:m(this._draco,this._attributeSemantic)?(this._promise=async function(e){e._state=f.Z.LOADING;const t=e._resourceCache;try{const n=t.getDracoLoader({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._dracoLoader=n,await n.load(),e.isDestroyed())return;return e._state=f.Z.LOADED,e}catch{if(e.isDestroyed())return;_(e)}}(this),this._promise):(this._promise=async function(e){e._state=f.Z.LOADING;const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;return e._typedArray=n.typedArray,e._state=f.Z.PROCESSING,e}catch(t){if(e.isDestroyed())return;_(e,t)}}(this),this._promise)},g.prototype.set=function(e,t){this.typedArray=e,this.context=t},g.prototype.execute=function(){this.buffer=Z(this.typedArray,this.context)};const y=new g;p.prototype.process=function(e){if(i.Z.typeOf.object("frameState",e),this._state===f.Z.READY)return!0;if(this._state!==f.Z.LOADED&&this._state!==f.Z.PROCESSING)return!1;if((0,r.Z)(this._dracoLoader)){try{if(!this._dracoLoader.process(e))return!1}catch(e){_(this,e)}!function(e){e._state=f.Z.PROCESSING;const t=e._dracoLoader.decodedData.vertexAttributes[e._attributeSemantic],n=e._accessorId,i=e._gltf.accessors[n].type,o=t.array,s=t.data.quantization;(0,r.Z)(s)&&(e._quantization=function(e,t,n,i){const o=(1<<e.quantizationBits)-1,r=1/o,s=new d.Z.Quantization;if(s.componentDatatype=t,s.octEncoded=e.octEncoded,s.octEncodedZXY=!0,s.type=i,s.octEncoded)s.type=l.Z.VEC2,s.normalizationRange=o;else{const t=l.Z.getMathType(i);if(t===Number){const t=e.range;s.quantizedVolumeOffset=e.minValues[0],s.quantizedVolumeDimensions=t,s.normalizationRange=o,s.quantizedVolumeStepSize=t*r}else{s.quantizedVolumeOffset=t.unpack(e.minValues),s.normalizationRange=t.unpack(new Array(n).fill(o));const i=new Array(n).fill(e.range);s.quantizedVolumeDimensions=t.unpack(i);const a=i.map((function(e){return e*r}));s.quantizedVolumeStepSize=t.unpack(a)}}return s}(s,t.data.componentDatatype,t.data.componentsPerAttribute,i)),e._typedArray=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}(this)}let t;const n=this._typedArray;if(this._loadBuffer&&this._asynchronous){const i=y;if(i.set(n,e.context),!e.jobScheduler.execute(i,u.Z.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=Z(n,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=f.Z.READY,this._resourceCache.statistics.addGeometryLoader(this),!0},p.prototype.unload=function(){(0,r.Z)(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;(0,r.Z)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),(0,r.Z)(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0};const b=p},578049:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(949225),o=n(790087),r=n(865029),s=n(234146),a=n(11020),c=n(906439),l=n(765153),u=n(282910),d=n(729476),h=n(143450),f=n(205522),p=n(217066),m=n(709366),_=n(931359),g=n(769426);function Z(e){this.channel=e.channel,this.ellipsoid=e.ellipsoid,this.tilingScheme=void 0,this.version=void 0}async function y(e,t,n){try{!function(e,t){let n,i;try{n=JSON.parse(e)}catch(t){n=JSON.parse(e.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}for(let e=0;e<n.layers.length;e++)if(n.layers[e].id===t.channel){i=n.layers[e];break}if(!(0,a.Z)(i)){const e=`Could not find layer with channel (id) of ${t.channel}.`;throw new p.Z(e)}if(!(0,a.Z)(i.version)){const e=`Could not find a version in channel (id) ${t.channel}.`;throw new p.Z(e)}if(t.version=i.version,(0,a.Z)(n.projection)&&"flat"===n.projection)t.tilingScheme=new d.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new h.Z(-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:t.ellipsoid});else{if((0,a.Z)(n.projection)&&"mercator"!==n.projection){const e=`Unsupported projection ${n.projection}.`;throw new p.Z(e)}t.tilingScheme=new _.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:t.ellipsoid})}}(await e.fetchText(),t)}catch(t){!function(e,t,n){let i=`An error occurred while accessing ${t.url}.`;throw(0,a.Z)(e)&&(0,a.Z)(e.message)&&(i+=`: ${e.message}`),m.Z.reportError(void 0,n,(0,a.Z)(n)?n._errorEvent:void 0,i),new p.Z(i)}(t,e,n)}}function b(e){if(e=(0,s.Z)(e,{}),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1.9,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new r.Z(`<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="${b.logoUrl}" title="Google Imagery"/></a>`),this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new u.Z,(0,a.Z)(e.url)||(0,a.Z)(e.channel)){if(!(0,a.Z)(e.url))throw new l.Z("options.url is required.");if(!(0,a.Z)(e.channel))throw new l.Z("options.channel is required.");(0,c.Z)("GoogleEarthEnterpriseMapsProvider.url","GoogleEarthEnterpriseMapsProvider.url and GoogleEarthEnterpriseMapsProvider.channel were deprecated in CesiumJS 1.104.  They will be in CesiumJS 1.107. Use GoogleEarthEnterpriseMapsProvider.fromUrl instead.");const t=e.url,n=(0,s.Z)(e.path,"/default_map"),i=f.Z.createIfNeeded(t).getDerivedResource({url:"/"===n[0]?n.substring(1):n});i.appendForwardSlash(),this._resource=i,this._url=t,this._path=n,this._ready=!1;const o=i.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),r=new Z(e);this._readyPromise=y(o,r,this).then((()=>(r.build(this),this._ready=!0,!0)))}}Z.prototype.build=function(e){e._channel=this.channel,e._version=this.version,e._tilingScheme=this.tilingScheme},Object.defineProperties(b.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},version:{get:function(){return this._version}},requestType:{get:function(){return this._requestType}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.ready","GoogleEarthEnterpriseMapsProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use GoogleEarthEnterpriseMapsProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.readyPromise","GoogleEarthEnterpriseMapsProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use GoogleEarthEnterpriseMapsProvider.fromUrl instead."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},defaultAlpha:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultAlpha","GoogleEarthEnterpriseMapsProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultAlpha","GoogleEarthEnterpriseMapsProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultNightAlpha","GoogleEarthEnterpriseMapsProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultNightAlpha","GoogleEarthEnterpriseMapsProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultDayAlpha","GoogleEarthEnterpriseMapsProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultDayAlpha","GoogleEarthEnterpriseMapsProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultBrightness","GoogleEarthEnterpriseMapsProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultBrightness","GoogleEarthEnterpriseMapsProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultContrast","GoogleEarthEnterpriseMapsProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultContrast","GoogleEarthEnterpriseMapsProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultHue","GoogleEarthEnterpriseMapsProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultHue","GoogleEarthEnterpriseMapsProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultSaturation","GoogleEarthEnterpriseMapsProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultSaturation","GoogleEarthEnterpriseMapsProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultGamma","GoogleEarthEnterpriseMapsProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultGamma","GoogleEarthEnterpriseMapsProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultMinificationFilter","GoogleEarthEnterpriseMapsProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultMinificationFilter","GoogleEarthEnterpriseMapsProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultMagnificationFilter","GoogleEarthEnterpriseMapsProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,c.Z)("GoogleEarthEnterpriseMapsProvider.defaultMagnificationFilter","GoogleEarthEnterpriseMapsProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),b.fromUrl=async function(e,t,n){o.Z.defined("url",e),o.Z.defined("channel",t),n=(0,s.Z)(n,{});const i=(0,s.Z)(n.path,"/default_map"),r=f.Z.createIfNeeded(e).getDerivedResource({url:"/"===i[0]?i.substring(1):i});r.appendForwardSlash();const a=r.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),c=new Z(n);c.channel=t,await y(a,c);const l=new b(n);return c.build(l),l._readyPromise=Promise.resolve(!0),l._ready=!0,l._resource=r,l._url=e,l._path=i,l},b.prototype.getTileCredits=function(e,t,n){},b.prototype.requestImage=function(e,t,n,i){const o=this._resource.getDerivedResource({url:"query",request:i,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:n+1}});return g.Z.loadImage(this,o)},b.prototype.pickFeatures=function(e,t,n,i,o){},b._logoUrl=void 0,Object.defineProperties(b,{logoUrl:{get:function(){return(0,a.Z)(b._logoUrl)||(b._logoUrl=(0,i.Z)("Assets/Images/google_earth_credit.png")),b._logoUrl},set:function(e){o.Z.defined("value",e),b._logoUrl=e}}});const v=b},66922:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(234146),r=n(11020),s=n(529394);function a(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).id,n=e.group,s=e.class;i.Z.typeOf.object("options.group",n),i.Z.typeOf.object("options.class",s);const a=(0,r.Z)(n.properties)?n.properties:{};this._class=s,this._properties=a,this._id=t,this._extras=n.extras,this._extensions=n.extensions}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},id:{get:function(){return this._id}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return s.Z.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return s.Z.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return s.Z.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return s.Z.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return s.Z.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return s.Z.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return s.Z.setPropertyBySemantic(e,t,this._properties,this._class)};const c=a},301330:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(790087),o=n(234146),r=n(906439),s=n(911698),a=n(217066);const c={};c._deprecationWarning=r.Z;const l=Uint32Array.BYTES_PER_ELEMENT;c.parse=function(e,t){i.Z.defined("arrayBuffer",e);const n=(0,o.Z)(t,0);t=n;const r=new Uint8Array(e),u=new DataView(e);t+=l;const d=u.getUint32(t,!0);if(1!==d)throw new a.Z(`Only Instanced 3D Model version 1 is supported. Version ${d} is not.`);t+=l;const h=u.getUint32(t,!0);t+=l;const f=u.getUint32(t,!0);if(0===f)throw new a.Z("featureTableJsonByteLength is zero, the feature table must be defined.");t+=l;const p=u.getUint32(t,!0);t+=l;const m=u.getUint32(t,!0);t+=l;const _=u.getUint32(t,!0);t+=l;const g=u.getUint32(t,!0);if(1!==g&&0!==g)throw new a.Z(`Only glTF format 0 (uri) or 1 (embedded) are supported. Format ${g} is not.`);t+=l;const Z=(0,s.Z)(r,t,f);t+=f;const y=new Uint8Array(e,t,p);let b,v;t+=p,m>0&&(b=(0,s.Z)(r,t,m),t+=m,_>0&&(v=new Uint8Array(e,t,_),v=new Uint8Array(v),t+=_));const A=n+h-t;if(0===A)throw new a.Z("glTF byte length must be greater than 0.");let T;return t%4==0?T=new Uint8Array(e,t,A):(c._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),T=new Uint8Array(r.subarray(t,t+A))),{gltfFormat:g,featureTableJson:Z,featureTableBinary:y,batchTableJson:b,batchTableBinary:v,gltf:T}};const u=c},135595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(405254),o=n(790087),r=n(11020),s=n(234146),a=n(722313),c=n(765153),l=n(394472);function u(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT);const t=(0,r.Z)(e.imageBasedLightingFactor)?i.Z.clone(e.imageBasedLightingFactor):new i.Z(1,1);o.Z.typeOf.object("options.imageBasedLightingFactor",t),o.Z.typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.x",t.x,0),o.Z.typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.x",t.x,1),o.Z.typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.y",t.y,0),o.Z.typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.y",t.y,1),this._imageBasedLightingFactor=t;const n=(0,s.Z)(e.luminanceAtZenith,.2);o.Z.typeOf.number("options.luminanceAtZenith",n),this._luminanceAtZenith=n;const a=e.sphericalHarmonicCoefficients;if((0,r.Z)(a)&&(!Array.isArray(a)||9!==a.length))throw new c.Z("options.sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._sphericalHarmonicCoefficients=a,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapAtlas=void 0,this._specularEnvironmentMapAtlasDirty=!0,this._specularEnvironmentMapLoaded=!1,this._previousSpecularEnvironmentMapLoaded=!1,this._useDefaultSpecularMaps=!1,this._useDefaultSphericalHarmonics=!1,this._shouldRegenerateShaders=!1,this._previousFrameNumber=void 0,this._previousImageBasedLightingFactor=i.Z.clone(t),this._previousLuminanceAtZenith=n,this._previousSphericalHarmonicCoefficients=a,this._removeErrorListener=void 0}Object.defineProperties(u.prototype,{imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){o.Z.typeOf.object("imageBasedLightingFactor",e),o.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.x",e.x,0),o.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.x",e.x,1),o.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.y",e.y,0),o.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.y",e.y,1),this._previousImageBasedLightingFactor=i.Z.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor),this._imageBasedLightingFactor=i.Z.clone(e,this._imageBasedLightingFactor)}},luminanceAtZenith:{get:function(){return this._luminanceAtZenith},set:function(e){this._previousLuminanceAtZenith=this._luminanceAtZenith,this._luminanceAtZenith=e}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){if((0,r.Z)(e)&&(!Array.isArray(e)||9!==e.length))throw new c.Z("sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients,this._sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){e!==this._specularEnvironmentMaps&&(this._specularEnvironmentMapAtlasDirty=this._specularEnvironmentMapAtlasDirty||e!==this._specularEnvironmentMaps,this._specularEnvironmentMapLoaded=!1),this._specularEnvironmentMaps=e}},enabled:{get:function(){return this._imageBasedLightingFactor.x>0||this._imageBasedLightingFactor.y>0}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},useDefaultSphericalHarmonics:{get:function(){return this._useDefaultSphericalHarmonics}},useSphericalHarmonicCoefficients:{get:function(){return(0,r.Z)(this._sphericalHarmonicCoefficients)||this._useDefaultSphericalHarmonics}},specularEnvironmentMapAtlas:{get:function(){return this._specularEnvironmentMapAtlas}},useDefaultSpecularMaps:{get:function(){return this._useDefaultSpecularMaps}},useSpecularEnvironmentMaps:{get:function(){return(0,r.Z)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready||this._useDefaultSpecularMaps}}}),u.prototype.update=function(e){if(e.frameNumber===this._previousFrameNumber)return;this._previousFrameNumber=e.frameNumber;const t=e.context;e.brdfLutGenerator.update(e),this._shouldRegenerateShaders=!1;const n=this._imageBasedLightingFactor,o=this._previousImageBasedLightingFactor;i.Z.equals(n,o)||(this._shouldRegenerateShaders=n.x>0&&0===o.x||0===n.x&&o.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||n.y>0&&0===o.y||0===n.y&&o.y>0,this._previousImageBasedLightingFactor=i.Z.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor)),this._luminanceAtZenith!==this._previousLuminanceAtZenith&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,r.Z)(this._luminanceAtZenith)!==(0,r.Z)(this._previousLuminanceAtZenith),this._previousLuminanceAtZenith=this._luminanceAtZenith),this._previousSphericalHarmonicCoefficients!==this._sphericalHarmonicCoefficients&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,r.Z)(this._previousSphericalHarmonicCoefficients)!==(0,r.Z)(this._sphericalHarmonicCoefficients),this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients),this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._previousSpecularEnvironmentMapLoaded!==this._specularEnvironmentMapLoaded,this._previousSpecularEnvironmentMapLoaded=this._specularEnvironmentMapLoaded,this._specularEnvironmentMapAtlasDirty&&(function(e,t){if(l.Z.isSupported(t)){if(e._specularEnvironmentMapAtlas=e._specularEnvironmentMapAtlas&&e._specularEnvironmentMapAtlas.destroy(),(0,r.Z)(e._specularEnvironmentMaps)){const t=new l.Z(e._specularEnvironmentMaps);e._specularEnvironmentMapAtlas=t,e._removeErrorListener=t.errorEvent.addEventListener((e=>{console.error(`Error loading specularEnvironmentMaps: ${e}`)}))}e._shouldRegenerateShaders=!0}}(this,t),this._specularEnvironmentMapAtlasDirty=!1),(0,r.Z)(this._specularEnvironmentMapAtlas)&&(this._specularEnvironmentMapAtlas.update(e),this._specularEnvironmentMapAtlas.ready&&(this._specularEnvironmentMapLoaded=!0));const s=!(0,r.Z)(this._specularEnvironmentMapAtlas)&&(0,r.Z)(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,a=!(0,r.Z)(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,c=!(0,r.Z)(this._sphericalHarmonicCoefficients)&&(0,r.Z)(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,u=!(0,r.Z)(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||s||a||c||u,this._useDefaultSpecularMaps=!(0,r.Z)(this._specularEnvironmentMapAtlas)&&(0,r.Z)(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!(0,r.Z)(this._sphericalHarmonicCoefficients)&&(0,r.Z)(e.sphericalHarmonicCoefficients)},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._specularEnvironmentMapAtlas=this._specularEnvironmentMapAtlas&&this._specularEnvironmentMapAtlas.destroy(),this._removeErrorListener=this._removeErrorListener&&this._removeErrorListener(),(0,a.Z)(this)};const d=u},975409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11020),o=n(722313),r=n(544930);function s(e,t,n,o,s){if(this.imageryLayer=e,this.x=t,this.y=n,this.level=o,this.request=void 0,0!==o){const i=t/2|0,r=n/2|0,s=o-1;this.parent=e.getImageryFromCache(i,r,s)}this.state=r.Z.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0;const a=e.imageryProvider;!(0,i.Z)(s)&&e.ready&&((0,i.Z)(a._ready)?a._ready:!(0,i.Z)(a.ready)||a.ready)&&(s=e.imageryProvider.tilingScheme.tileXYToRectangle(t,n,o)),this.rectangle=s}s.createPlaceholder=function(e){const t=new s(e,0,0,0);return t.addReference(),t.state=r.Z.PLACEHOLDER,t},s.prototype.addReference=function(){++this.referenceCount},s.prototype.releaseReference=function(){return--this.referenceCount,0===this.referenceCount?(this.imageryLayer.removeImageryFromCache(this),(0,i.Z)(this.parent)&&this.parent.releaseReference(),(0,i.Z)(this.image)&&(0,i.Z)(this.image.destroy)&&this.image.destroy(),(0,i.Z)(this.texture)&&this.texture.destroy(),(0,i.Z)(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),(0,o.Z)(this),0):this.referenceCount},s.prototype.processStateMachine=function(e,t,n){this.state!==r.Z.UNLOADED||n||(this.state=r.Z.TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===r.Z.RECEIVED&&(this.state=r.Z.TRANSITIONING,this.imageryLayer._createTexture(e.context,this));const i=this.state===r.Z.READY&&t&&!this.texture;(this.state===r.Z.TEXTURE_LOADED||i)&&(this.state=r.Z.TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};const a=s},18929:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var i=n(405254),o=n(798336),r=n(790087),s=n(272802),a=n(234146),c=n(11020),l=n(722313),u=n(906439),d=n(765153),h=n(282910),f=n(95296),p=n(351047),m=n(342209),_=n(344485),g=n(430886),Z=n(143450),y=n(161648),b=n(338212),v=n(293685),A=n(96828),T=n(709366),w=n(709855),E=n(379593),S=n(915323),C=n(673314),x=n(591477),I=n(741514),P=n(497730),D=n(161632),O=n(437530),L=n(609882),N=n(442429),M=n(55248),R=n(49940),F=n(858371),B=n(64801),U=n(840054),k=n(975409),V=n(544930),H=n(347962),z=n(701077);function G(e,t){this._imageryProvider=e,this._readyEvent=new h.Z,this._errorEvent=new h.Z,t=(0,a.Z)(t,a.Z.EMPTY_OBJECT),e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),this.alpha=(0,a.Z)(t.alpha,(0,a.Z)(e._defaultAlpha,1)),this.nightAlpha=(0,a.Z)(t.nightAlpha,(0,a.Z)(e._defaultNightAlpha,1)),this.dayAlpha=(0,a.Z)(t.dayAlpha,(0,a.Z)(e._defaultDayAlpha,1)),this.brightness=(0,a.Z)(t.brightness,(0,a.Z)(e._defaultBrightness,G.DEFAULT_BRIGHTNESS)),this.contrast=(0,a.Z)(t.contrast,(0,a.Z)(e._defaultContrast,G.DEFAULT_CONTRAST)),this.hue=(0,a.Z)(t.hue,(0,a.Z)(e._defaultHue,G.DEFAULT_HUE)),this.saturation=(0,a.Z)(t.saturation,(0,a.Z)(e._defaultSaturation,G.DEFAULT_SATURATION)),this.gamma=(0,a.Z)(t.gamma,(0,a.Z)(e._defaultGamma,G.DEFAULT_GAMMA)),this.splitDirection=(0,a.Z)(t.splitDirection,G.DEFAULT_SPLIT),this.minificationFilter=(0,a.Z)(t.minificationFilter,(0,a.Z)(e._defaultMinificationFilter,G.DEFAULT_MINIFICATION_FILTER)),this.magnificationFilter=(0,a.Z)(t.magnificationFilter,(0,a.Z)(e._defaultMagnificationFilter,G.DEFAULT_MAGNIFICATION_FILTER)),this.show=(0,a.Z)(t.show,!0),this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=(0,a.Z)(t.rectangle,Z.Z.MAX_VALUE),this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new z.Z(k.Z.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=(0,a.Z)(t.colorToAlphaThreshold,G.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD)}Object.defineProperties(G.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},ready:{get:function(){return(0,c.Z)(this._imageryProvider)}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},rectangle:{get:function(){return this._rectangle}}}),G.DEFAULT_BRIGHTNESS=1,G.DEFAULT_CONTRAST=1,G.DEFAULT_HUE=0,G.DEFAULT_SATURATION=1,G.DEFAULT_GAMMA=1,G.DEFAULT_SPLIT=H.Z.NONE,G.DEFAULT_MINIFICATION_FILTER=M.Z.LINEAR,G.DEFAULT_MAGNIFICATION_FILTER=N.Z.LINEAR,G.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004,G.fromProviderAsync=function(e,t){r.Z.typeOf.object("imageryProviderPromise",e);const n=new G(void 0,t);return async function(e,t){let n;try{if(n=await Promise.resolve(t),e.isDestroyed())return;e._imageryProvider=n,e._readyEvent.raiseEvent(n)}catch(t){!function(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}(e._errorEvent,t)}}(n,Promise.resolve(e)),n},G.fromWorldImagery=function(e){return e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),G.fromProviderAsync((0,s.Z)({style:e.style}),e)},G.prototype.isBaseLayer=function(){return this._isBaseLayer},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){return(0,l.Z)(this)};const j=new Z.Z,W=new Z.Z,q=new Z.Z,Y=new Z.Z;function X(e,t,n){return`${e}:${t}:${n}`}function J(e,t,n){return JSON.stringify([e,t,n])}G.prototype.getViewableRectangle=async function(){(0,u.Z)("ImageryLayer.getViewableRectangle","ImageryLayer.getViewableRectangle was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.getImageryRectangle instead.");const e=this._imageryProvider,t=this._rectangle;return(0,c.Z)(e._readyPromise)?await e._readyPromise:(0,c.Z)(e.readyPromise)&&await e.readyPromise,Z.Z.intersection(e.rectangle,t)},G.prototype.getImageryRectangle=function(){const e=this._imageryProvider,t=this._rectangle;return Z.Z.intersection(e.rectangle,t)},G.prototype._createTileImagerySkeletons=function(e,t,n){const i=e.data;if(!(0,c.Z)(t)||(0,c.Z)(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel)return!1;if((0,c.Z)(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;(0,c.Z)(n)||(n=i.imagery.length);const r=this._imageryProvider;if(!this.ready||((0,c.Z)(r._ready)?!r._ready:(0,c.Z)(r.ready)&&!r.ready))return this._skeletonPlaceholder.loadingImagery.addReference(),i.imagery.splice(n,0,this._skeletonPlaceholder),!0;const s=r.tilingScheme.projection instanceof w.Z&&e.rectangle.north<w.Z.MaximumLatitude&&e.rectangle.south>-w.Z.MaximumLatitude,a=Z.Z.intersection(r.rectangle,this._rectangle,j);let l=Z.Z.intersection(e.rectangle,a,W);if(!(0,c.Z)(l)){if(!this.isBaseLayer())return!1;const t=a,n=e.rectangle;l=W,n.south>=t.north?l.north=l.south=t.north:n.north<=t.south?l.north=l.south=t.south:(l.south=Math.max(n.south,t.south),l.north=Math.min(n.north,t.north)),n.west>=t.east?l.west=l.east=t.east:n.east<=t.west?l.west=l.east=t.west:(l.west=Math.max(n.west,t.west),l.east=Math.min(n.east,t.east))}let u=0;l.south>0?u=l.south:l.north<0&&(u=l.north);let d=function(e,t,n){const i=e._imageryProvider,o=i.tilingScheme,r=o.ellipsoid,s=e._imageryProvider.tilingScheme.projection instanceof p.Z?1:Math.cos(n),a=o.rectangle,c=r.maximumRadius*a.width*s/(i.tileWidth*o.getNumberOfXTilesAtLevel(0))/t,l=Math.log(c)/Math.log(2);return 0|Math.round(l)}(this,1*t.getLevelMaximumGeometricError(e.level),u);d=Math.max(0,d);const h=r.maximumLevel;if(d>h&&(d=h),(0,c.Z)(r.minimumLevel)){const e=r.minimumLevel;d<e&&(d=e)}const f=r.tilingScheme,m=f.positionToTileXY(Z.Z.northwest(l),d),_=f.positionToTileXY(Z.Z.southeast(l),d);let g=e.rectangle.width/512,y=e.rectangle.height/512;const b=f.tileXYToRectangle(m.x,m.y,d);Math.abs(b.south-e.rectangle.north)<y&&m.y<_.y&&++m.y,Math.abs(b.east-e.rectangle.west)<g&&m.x<_.x&&++m.x;const v=f.tileXYToRectangle(_.x,_.y,d);Math.abs(v.north-e.rectangle.south)<y&&_.y>m.y&&--_.y,Math.abs(v.west-e.rectangle.east)<g&&_.x>m.x&&--_.x;const A=Z.Z.clone(e.rectangle,Y);let T,E,S=f.tileXYToRectangle(m.x,m.y,d),C=Z.Z.intersection(S,a,q);s?(f.rectangleToNativeRectangle(A,A),f.rectangleToNativeRectangle(S,S),f.rectangleToNativeRectangle(C,C),f.rectangleToNativeRectangle(a,a),T=f.tileXYToNativeRectangle.bind(f),g=A.width/512,y=A.height/512):T=f.tileXYToRectangle.bind(f);let x,I=0,P=1;!this.isBaseLayer()&&Math.abs(C.west-A.west)>=g&&(I=Math.min(1,(C.west-A.west)/A.width)),!this.isBaseLayer()&&Math.abs(C.north-A.north)>=y&&(P=Math.max(0,(C.north-A.south)/A.height));const D=P;for(let e=m.x;e<=_.x;e++)if(E=I,S=T(e,m.y,d),C=Z.Z.simpleIntersection(S,a,q),(0,c.Z)(C)){I=Math.min(1,(C.east-A.west)/A.width),e===_.x&&(this.isBaseLayer()||Math.abs(C.east-A.east)<g)&&(I=1),P=D;for(let t=m.y;t<=_.y;t++){if(x=P,S=T(e,t,d),C=Z.Z.simpleIntersection(S,a,q),!(0,c.Z)(C))continue;P=Math.max(0,(C.south-A.south)/A.height),t===_.y&&(this.isBaseLayer()||Math.abs(C.south-A.south)<y)&&(P=0);const r=new o.Z(E,P,I,x),l=this.getImageryFromCache(e,t,d);i.imagery.splice(n,0,new z.Z(l,r,s)),++n}}return!0},G.prototype._calculateTextureTranslationAndScale=function(e,t){let n=t.readyImagery.rectangle,i=e.rectangle;if(t.useWebMercatorT){const e=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;n=e.rectangleToNativeRectangle(n,j),i=e.rectangleToNativeRectangle(i,Y)}const r=i.width,s=i.height,a=r/n.width,c=s/n.height;return new o.Z(a*(i.west-n.west)/r,c*(i.south-n.south)/s,a,c)},G.prototype._requestImagery=function(e){const t=this._imageryProvider,n=this;function i(i){if(e.request.state===b.Z.CANCELLED)return e.state=V.Z.UNLOADED,void(e.request=void 0);e.state=V.Z.FAILED,e.request=void 0;const r=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;n._requestImageError=T.Z.reportError(n._requestImageError,t,t.errorEvent,r,e.x,e.y,e.level,i),n._requestImageError.retry&&o()}function o(){const o=new y.Z({throttle:!1,throttleByServer:!0,type:v.Z.IMAGERY});e.request=o,e.state=V.Z.TRANSITIONING;const r=t.requestImage(e.x,e.y,e.level,o);if(!(0,c.Z)(r))return e.state=V.Z.UNLOADED,void(e.request=void 0);(0,c.Z)(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),r.then((function(t){!function(t){if(!(0,c.Z)(t))return i();e.image=t,e.state=V.Z.RECEIVED,e.request=void 0,T.Z.reportSuccess(n._requestImageError)}(t)})).catch((function(e){i(e)}))}o()},G.prototype._createTextureWebGL=function(e,t){const n=new P.Z({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),i=t.image;return(0,c.Z)(i.internalFormat)?new L.Z({context:e,pixelFormat:i.internalFormat,width:i.width,height:i.height,source:{arrayBufferView:i.bufferView},sampler:n}):new L.Z({context:e,source:i,pixelFormat:this._imageryProvider.hasAlphaChannel?g.Z.RGBA:g.Z.RGB,sampler:n})},G.prototype._createTexture=function(e,t){const n=this._imageryProvider,i=t.image;if((0,c.Z)(n.tileDiscardPolicy)){const e=n.tileDiscardPolicy;if((0,c.Z)(e)){if(!e.isReady())return void(t.state=V.Z.RECEIVED);if(e.shouldDiscardImage(i))return void(t.state=V.Z.INVALID)}}if(this.minificationFilter!==M.Z.NEAREST&&this.minificationFilter!==M.Z.LINEAR)throw new d.Z("ImageryLayer minification filter must be NEAREST or LINEAR");const o=this._createTextureWebGL(e,t);n.tilingScheme.projection instanceof w.Z?t.textureWebMercator=o:t.texture=o,t.image=void 0,t.state=V.Z.TEXTURE_LOADED},G.prototype._finalizeReprojectTexture=function(e,t){let n=this.minificationFilter;const i=this.magnificationFilter;if(n===M.Z.LINEAR&&i===N.Z.LINEAR&&!g.Z.isCompressedFormat(t.pixelFormat)&&_.Z.isPowerOfTwo(t.width)&&_.Z.isPowerOfTwo(t.height)){n=M.Z.LINEAR_MIPMAP_LINEAR;const o=x.Z.maximumTextureFilterAnisotropy,r=Math.min(o,(0,a.Z)(this._maximumAnisotropy,o)),s=X(n,i,r);let l=e.cache.imageryLayerMipmapSamplers;(0,c.Z)(l)||(l={},e.cache.imageryLayerMipmapSamplers=l);let u=l[s];(0,c.Z)(u)||(u=l[s]=new P.Z({wrapS:R.Z.CLAMP_TO_EDGE,wrapT:R.Z.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i,maximumAnisotropy:r})),t.generateMipmap(I.Z.NICEST),t.sampler=u}else{const o=X(n,i,0);let r=e.cache.imageryLayerNonMipmapSamplers;(0,c.Z)(r)||(r={},e.cache.imageryLayerNonMipmapSamplers=r);let s=r[o];(0,c.Z)(s)||(s=r[o]=new P.Z({wrapS:R.Z.CLAMP_TO_EDGE,wrapT:R.Z.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i})),t.sampler=s}},G.prototype._reprojectTexture=function(e,t,n){const i=t.textureWebMercator||t.texture,o=t.rectangle,r=e.context;if((n=(0,a.Z)(n,!0))&&!(this._imageryProvider.tilingScheme.projection instanceof p.Z)&&o.width/i.width>1e-5){const e=this;t.addReference();const n=new C.Z({persists:!0,owner:this,preExecute:function(e){!function(e,t,n,i){let o=t.cache.imageryLayer_reproject;if(!(0,c.Z)(o)){o=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){(0,c.Z)(this.framebuffer)&&this.framebuffer.destroy(),(0,c.Z)(this.vertexArray)&&this.vertexArray.destroy(),(0,c.Z)(this.shaderProgram)&&this.shaderProgram.destroy()}};const e=new Float32Array(256);let n=0;for(let t=0;t<64;++t){const i=t/63;e[n++]=0,e[n++]=i,e[n++]=1,e[n++]=i}const i={position:0,webMercatorT:1},r=A.Z.getRegularGridIndices(2,64),s=E.Z.createIndexBuffer({context:t,typedArray:r,usage:S.Z.STATIC_DRAW,indexDatatype:m.Z.UNSIGNED_SHORT});o.vertexArray=new F.Z({context:t,attributes:[{index:i.position,vertexBuffer:E.Z.createVertexBuffer({context:t,typedArray:e,usage:S.Z.STATIC_DRAW}),componentsPerAttribute:2},{index:i.webMercatorT,vertexBuffer:E.Z.createVertexBuffer({context:t,sizeInBytes:512,usage:S.Z.STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:s});const a=new O.Z({sources:[U.Z]});o.shaderProgram=D.Z.fromCache({context:t,vertexShaderSource:a,fragmentShaderSource:B.Z,attributeLocations:i}),o.sampler=new P.Z({wrapS:R.Z.CLAMP_TO_EDGE,wrapT:R.Z.CLAMP_TO_EDGE,minificationFilter:M.Z.LINEAR,magnificationFilter:N.Z.LINEAR})}n.sampler=o.sampler;const r=n.width,s=n.height;Q.textureDimensions.x=r,Q.textureDimensions.y=s,Q.texture=n;let a=Math.sin(i.south);const l=.5*Math.log((1+a)/(1-a));a=Math.sin(i.north);const u=1/(.5*Math.log((1+a)/(1-a))-l),d=new L.Z({context:t,width:r,height:s,pixelFormat:n.pixelFormat,pixelDatatype:n.pixelDatatype,preMultiplyAlpha:n.preMultiplyAlpha});_.Z.isPowerOfTwo(r)&&_.Z.isPowerOfTwo(s)&&d.generateMipmap(I.Z.NICEST);const h=i.south,f=i.north,p=$;let g=0;for(let e=0;e<64;++e){const t=e/63,n=_.Z.lerp(h,f,t);a=Math.sin(n);const i=(.5*Math.log((1+a)/(1-a))-l)*u;p[g++]=i,p[g++]=i}o.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(p),e.shaderProgram=o.shaderProgram,e.outputTexture=d,e.uniformMap=Q,e.vertexArray=o.vertexArray}(e,r,i,t.rectangle)},postExecute:function(n){t.texture=n,e._finalizeReprojectTexture(r,n),t.state=V.Z.READY,t.releaseReference()},canceled:function(){t.state=V.Z.TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(n)}else n&&(t.texture=i),this._finalizeReprojectTexture(r,i),t.state=V.Z.READY},G.prototype.queueReprojectionCommands=function(e){const t=this._reprojectComputeCommands,n=t.length;for(let i=0;i<n;++i)e.commandList.push(t[i]);t.length=0},G.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach((function(e){(0,c.Z)(e.canceled)&&e.canceled()})),this._reprojectComputeCommands.length=0},G.prototype.getImageryFromCache=function(e,t,n,i){const o=J(e,t,n);let r=this._imageryCache[o];return(0,c.Z)(r)||(r=new k.Z(this,e,t,n,i),this._imageryCache[o]=r),r.addReference(),r},G.prototype.removeImageryFromCache=function(e){const t=J(e.x,e.y,e.level);delete this._imageryCache[t]};const Q={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new i.Z,texture:void 0},$=f.Z.supportsTypedArrays()?new Float32Array(128):void 0,K=G},244167:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(234146),o=n(11020),r=n(722313),s=n(765153),a=n(282910),c=n(344485),l=n(143450),u=n(18929);function d(){this._layers=[],this.layerAdded=new a.Z,this.layerRemoved=new a.Z,this.layerMoved=new a.Z,this.layerShownOrHidden=new a.Z}function h(e,t){if(!(0,o.Z)(t))throw new s.Z("layer is required.");const n=e.indexOf(t);if(-1===n)throw new s.Z("layer is not in this collection.");return n}function f(e,t,n){const i=e._layers;if((t=c.Z.clamp(t,0,i.length-1))===(n=c.Z.clamp(n,0,i.length-1)))return;const o=i[t];i[t]=i[n],i[n]=o,e._update(),e.layerMoved.raiseEvent(o,n,t)}Object.defineProperties(d.prototype,{length:{get:function(){return this._layers.length}}}),d.prototype.add=function(e,t){const n=(0,o.Z)(t);if(!(0,o.Z)(e))throw new s.Z("layer is required.");if(n){if(t<0)throw new s.Z("index must be greater than or equal to zero.");if(t>this._layers.length)throw new s.Z("index must be less than or equal to the number of layers.")}n?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t);const i=e.readyEvent.addEventListener((()=>{this.layerShownOrHidden.raiseEvent(e,e._layerIndex,e.show),i()}))},d.prototype.addImageryProvider=function(e,t){if(!(0,o.Z)(e))throw new s.Z("imageryProvider is required.");const n=new u.Z(e);return this.add(n,t),n},d.prototype.remove=function(e,t){t=(0,i.Z)(t,!0);const n=this._layers.indexOf(e);return-1!==n&&(this._layers.splice(n,1),this._update(),this.layerRemoved.raiseEvent(e,n),t&&e.destroy(),!0)},d.prototype.removeAll=function(e){e=(0,i.Z)(e,!0);const t=this._layers;for(let n=0,i=t.length;n<i;n++){const i=t[n];this.layerRemoved.raiseEvent(i,n),e&&i.destroy()}this._layers=[]},d.prototype.contains=function(e){return-1!==this.indexOf(e)},d.prototype.indexOf=function(e){return this._layers.indexOf(e)},d.prototype.get=function(e){if(!(0,o.Z)(e))throw new s.Z("index is required.","index");return this._layers[e]},d.prototype.raise=function(e){const t=h(this._layers,e);f(this,t,t+1)},d.prototype.lower=function(e){const t=h(this._layers,e);f(this,t,t-1)},d.prototype.raiseToTop=function(e){const t=h(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))},d.prototype.lowerToBottom=function(e){const t=h(this._layers,e);0!==t&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};const p=new l.Z;function m(e,t,n,i){const r=e.globe._surface._tilesToRender;let s;for(let e=0;!(0,o.Z)(s)&&e<r.length;++e){const n=r[e];l.Z.contains(n.rectangle,t)&&(s=n)}if(!(0,o.Z)(s))return;const a=s.data.imagery;for(let e=a.length-1;e>=0;--e){const r=a[e],u=r.readyImagery;if(!(0,o.Z)(u))continue;if(!u.imageryLayer.ready)continue;const d=u.imageryLayer.imageryProvider;if(n&&!(0,o.Z)(d.pickFeatures))continue;if(!l.Z.contains(u.rectangle,t))continue;const h=p,f=1/1024;h.west=c.Z.lerp(s.rectangle.west,s.rectangle.east,r.textureCoordinateRectangle.x-f),h.east=c.Z.lerp(s.rectangle.west,s.rectangle.east,r.textureCoordinateRectangle.z+f),h.south=c.Z.lerp(s.rectangle.south,s.rectangle.north,r.textureCoordinateRectangle.y-f),h.north=c.Z.lerp(s.rectangle.south,s.rectangle.north,r.textureCoordinateRectangle.w+f),l.Z.contains(h,t)&&i(u)}}d.prototype.pickImageryLayers=function(e,t){const n=t.globe.pick(e,t);if(!(0,o.Z)(n))return;const i=t.globe.ellipsoid.cartesianToCartographic(n),r=[];return m(t,i,!1,(function(e){r.push(e.imageryLayer)})),0!==r.length?r:void 0},d.prototype.pickImageryLayerFeatures=function(e,t){const n=t.globe.pick(e,t);if(!(0,o.Z)(n))return;const i=t.globe.ellipsoid.cartesianToCartographic(n),r=[],s=[];return m(t,i,!0,(function(e){if(!e.imageryLayer.ready)return;const t=e.imageryLayer.imageryProvider.pickFeatures(e.x,e.y,e.level,i.longitude,i.latitude);(0,o.Z)(t)&&(r.push(t),s.push(e.imageryLayer))})),0!==r.length?Promise.all(r).then((function(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n],a=s[n];if((0,o.Z)(r)&&r.length>0)for(let e=0;e<r.length;++e){const n=r[e];n.imageryLayer=a,(0,o.Z)(n.position)||(n.position=i),t.push(n)}}return t})):void 0},d.prototype.queueReprojectionCommands=function(e){const t=this._layers;for(let n=0,i=t.length;n<i;++n)t[n].queueReprojectionCommands(e)},d.prototype.cancelReprojections=function(){const e=this._layers;for(let t=0,n=e.length;t<n;++t)e[t].cancelReprojections()},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this.removeAll(!0),(0,r.Z)(this)},d.prototype._update=function(){let e=!0;const t=this._layers;let n,i,r,s;for(r=0,s=t.length;r<s;++r)i=t[r],i._layerIndex=r,i.show?(i._isBaseLayer=e,e=!1):i._isBaseLayer=!1,i.show!==i._show&&((0,o.Z)(i._show)&&((0,o.Z)(n)||(n=[]),n.push(i)),i._show=i.show);if((0,o.Z)(n))for(r=0,s=n.length;r<s;++r)i=n[r],this.layerShownOrHidden.raiseEvent(i,i._layerIndex,i.show)};const _=d},663630:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(11020);function o(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}o.prototype.configureNameFromProperties=function(e){let t,n=10;for(const i in e)if(e.hasOwnProperty(i)&&e[i]){const e=i.toLowerCase();n>1&&"name"===e?(n=1,t=i):n>2&&"title"===e?(n=2,t=i):n>3&&/name/i.test(i)?(n=3,t=i):n>4&&/title/i.test(i)&&(n=4,t=i)}(0,i.Z)(t)&&(this.name=e[t])},o.prototype.configureDescriptionFromProperties=function(e){this.description=function e(t){let n='<table class="cesium-infoBox-defaultTable">';for(const o in t)if(t.hasOwnProperty(o)){const r=t[o];(0,i.Z)(r)&&(n+="object"==typeof r?`<tr><td>${o}</td><td>${e(r)}</td></tr>`:`<tr><td>${o}</td><td>${r}</td></tr>`)}return n+="</table>",n}(e)};const r=o},769426:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(790087),o=n(11020),r=n(765153),s=n(684910),a=n(205522);function c(){r.Z.throwInstantiationError()}Object.defineProperties(c.prototype,{ready:{get:r.Z.throwInstantiationError},readyPromise:{get:r.Z.throwInstantiationError},rectangle:{get:r.Z.throwInstantiationError},tileWidth:{get:r.Z.throwInstantiationError},tileHeight:{get:r.Z.throwInstantiationError},maximumLevel:{get:r.Z.throwInstantiationError},minimumLevel:{get:r.Z.throwInstantiationError},tilingScheme:{get:r.Z.throwInstantiationError},tileDiscardPolicy:{get:r.Z.throwInstantiationError},errorEvent:{get:r.Z.throwInstantiationError},credit:{get:r.Z.throwInstantiationError},proxy:{get:r.Z.throwInstantiationError},hasAlphaChannel:{get:r.Z.throwInstantiationError},defaultAlpha:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultNightAlpha:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultDayAlpha:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultBrightness:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultContrast:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultHue:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultSaturation:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultGamma:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultMinificationFilter:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError},defaultMagnificationFilter:{get:r.Z.throwInstantiationError,set:r.Z.throwInstantiationError}}),c.prototype.getTileCredits=function(e,t,n){r.Z.throwInstantiationError()},c.prototype.requestImage=function(e,t,n,i){r.Z.throwInstantiationError()},c.prototype.pickFeatures=function(e,t,n,i,o){r.Z.throwInstantiationError()};const l=/\.ktx2$/i;c.loadImage=function(e,t){i.Z.defined("url",t);const n=a.Z.createIfNeeded(t);return l.test(n.url)?(0,s.Z)(n):(0,o.Z)(e)&&(0,o.Z)(e.tileDiscardPolicy)?n.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):n.fetchImage({preferImageBitmap:!0,flipY:!0})};const u=c},544930:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7})},447261:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var i=n(660904),o=n(790087),r=n(823438),s=n(394579),a=n(234146),c=n(11020),l=n(906439),u=n(722313),d=n(765153),h=n(344485),f=n(99377),p=n(664288),m=n(143450),_=n(686592),g=n(475203),Z=n(717341),y=n(817787),b=n(377559);function v(e,t,n){o.Z.defined("tile.implicitTileset",t.implicitTileset),o.Z.defined("tile.implicitCoordinates",t.implicitCoordinates);const i=t.implicitTileset,r=t.implicitCoordinates;this._implicitTileset=i,this._implicitCoordinates=r,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=n,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;const s=r.getTemplateValues(),a=i.subtreeUriTemplate.getDerivedResource({templateValues:s});this._url=a.getUrlComponent(!0),this._ready=!1,this._readyPromise=void 0}function A(e,t,n){const i=y.Z.TILE_GEOMETRIC_ERROR;return(0,c.Z)(e)&&e.hasPropertyBySemantic(i)?e.getPropertyBySemantic(i):t.geometricError/Math.pow(2,n.level)}function T(e,t,n,i,o,l){const u=e._implicitTileset;let d,h,f,p;if(d=(0,a.Z)(l,!1)?n.implicitCoordinates:n.implicitCoordinates.getChildCoordinates(i),(0,c.Z)(t.tilePropertyTableJson)){h=t.getTileMetadataView(d);const e=(0,b.Z)(h);f=e.tile,p=e.content}const m=t.contentPropertyTableJsons.length;let _=!1;for(let e=0;e<m;e++)if(t.contentIsAvailableAtCoordinates(d,e)){_=!0;break}const g=function(e,t,n,i,o,r){let s;return s=!(0,c.Z)(r)||!(0,c.Z)(r.boundingVolume)||!w(r.boundingVolume,r)&&w(e.boundingVolume,r)?C(e,t,n,(0,a.Z)(i,!1),o):r.boundingVolume,E(s,r),s}(u,d,i,l,n,f),Z=[];for(let e=0;e<u.contentCount;e++){if(!t.contentIsAvailableAtIndex(o,e))continue;const n={uri:u.contentUriTemplates[e].getDerivedResource({templateValues:d.getTemplateValues()}).url},i=S(g,p);(0,c.Z)(i)&&(n.boundingVolume=i),Z.push((0,s.Z)(n,u.contentHeaders[e]))}const y={boundingVolume:g,geometricError:A(h,u,d),refine:u.refine,contents:Z},v=!0,T=(0,r.Z)(u.tileHeader,v);delete T.boundingVolume,delete T.transform;const x=(0,s.Z)(y,T,v),I=F(e,u.baseResource,x,n);return I.implicitCoordinates=d,I.implicitSubtree=t,I.metadata=h,I.hasImplicitContentMetadata=_,I}function w(e,t){return(0,c.Z)(e)&&(0,c.Z)(t)&&((0,c.Z)(t.minimumHeight)||(0,c.Z)(t.maximumHeight))&&((0,Z.Z)(e,"3DTILES_bounding_volume_S2")||(0,c.Z)(e.region))}function E(e,t){var n,i,o;(0,c.Z)(t)&&((0,Z.Z)(e,"3DTILES_bounding_volume_S2")?(n=e.extensions["3DTILES_bounding_volume_S2"],i=t.minimumHeight,o=t.maximumHeight,(0,c.Z)(i)&&(n.minimumHeight=i),(0,c.Z)(o)&&(n.maximumHeight=o)):(0,c.Z)(e.region)&&function(e,t,n){(0,c.Z)(t)&&(e[4]=t),(0,c.Z)(n)&&(e[5]=n)}(e.region,t.minimumHeight,t.maximumHeight))}function S(e,t){let n;return(0,c.Z)(t)&&(n=t.boundingVolume),w(n,t)?E(n,t):w(e,t)&&(n=(0,r.Z)(e,!0),E(n,t)),n}function C(e,t,n,i,o){const r=e.boundingVolume;return(0,Z.Z)(r,"3DTILES_bounding_volume_S2")?x(i,o,n,t.level,t.x,t.y,t.z):(0,c.Z)(r.region)?{region:M(r.region,t.level,t.x,t.y,t.z)}:{box:L(r.box,t.level,t.x,t.y,t.z)}}function x(e,t,n,i,r,s,a){o.Z.typeOf.bool("parentIsPlaceholderTile",e),o.Z.typeOf.object("parentTile",t),o.Z.typeOf.number("childIndex",n),o.Z.typeOf.number("level",i),o.Z.typeOf.number("x",r),o.Z.typeOf.number("y",s),(0,c.Z)(a)&&o.Z.typeOf.number("z",a);const l=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:_.Z.getTokenFromId(l.s2Cell._cellId),minimumHeight:l.minimumHeight,maximumHeight:l.maximumHeight}}};const u=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),d=u%2==0?f.Z.encode2D(i,r,s):f.Z.encode2D(i,s,r),h=_.Z.fromFacePositionLevel(u,BigInt(d),i);let p,m;if((0,c.Z)(a)){const e=(l.maximumHeight+l.minimumHeight)/2;p=n<4?l.minimumHeight:e,m=n<4?e:l.maximumHeight}else p=l.minimumHeight,m=l.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:_.Z.getTokenFromId(h._cellId),minimumHeight:p,maximumHeight:m}}}}Object.defineProperties(v.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,l.Z)("Implicit3DTileContent.readyPromise","Implicit3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Implicit3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){throw new d.Z("Implicit3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),v.fromSubtreeJson=async function(e,t,n,i,r,s){if(o.Z.defined("tile.implicitTileset",t.implicitTileset),o.Z.defined("tile.implicitCoordinates",t.implicitCoordinates),(0,c.Z)(i)===(0,c.Z)(r))throw new d.Z("One of json and arrayBuffer must be defined.");let l;s=(0,a.Z)(s,0),(0,c.Z)(r)&&(l=new Uint8Array(r,s));const u=t.implicitTileset,h=t.implicitCoordinates,f=await g.Z.fromSubtreeJson(n,i,l,u,h),p=new v(e,t,n);return p._implicitSubtree=f,function(e,t){const n=e._tile,i=function(e,t,n,i){const o=T(e,t,n,i,0,!0),r=e._tileset.statistics;let s=[o],a=[];const c=e._implicitTileset;for(let n=1;n<c.subtreeLevels;n++){const i=t.getLevelOffset(n),o=c.branchingFactor*s.length;for(let n=0;n<o;n++){const o=i+n;if(!t.tileIsAvailableAtIndex(o)){a.push(void 0);continue}const l=s[t.getParentMortonIndex(n)],u=T(e,t,l,n%c.branchingFactor,o);l.children.push(u),r.numberOfTilesTotal++,a.push(u)}s=a,a=[]}return{rootTile:o,bottomRow:s}}(e,t,n,e._implicitCoordinates.childIndex),o=e._tileset.statistics;n.children.push(i.rootTile),o.numberOfTilesTotal++;const r=function(e,t,n){const i=[],o=e._implicitTileset.branchingFactor;for(let e=0;e<n.length;e++){const r=n[e];if((0,c.Z)(r))for(let n=0;n<o;n++){const s=e*o+n;t.childSubtreeIsAvailableAtIndex(s)&&i.push({tile:r,childIndex:n})}}return i}(e,t,i.bottomRow);for(let t=0;t<r.length;t++){const n=r[t],i=n.tile,s=R(e,i,n.childIndex);i.children.push(s),o.numberOfTilesTotal++}}(p,f),p._ready=!0,p._readyPromise=Promise.resolve(p),p};const I=new i.Z,P=new i.Z,D=new i.Z,O=new p.Z;function L(e,t,n,r,s){if(o.Z.typeOf.object("rootBox",e),o.Z.typeOf.number("level",t),o.Z.typeOf.number("x",n),o.Z.typeOf.number("y",r),(0,c.Z)(s)&&o.Z.typeOf.number("z",s),0===t)return e;const a=i.Z.unpack(e,0,P),l=p.Z.unpack(e,3,O),u=Math.pow(2,-t),d=(2*n+1)*u-1,h=(2*r+1)*u-1;let f=0;const m=i.Z.fromElements(u,u,1,I);(0,c.Z)(s)&&(f=(2*s+1)*u-1,m.z=u);let _=i.Z.fromElements(d,h,f,D);_=p.Z.multiplyByVector(l,_,D),_=i.Z.add(_,a,D);let g=p.Z.clone(l);g=p.Z.multiplyByScale(g,m,g);const Z=new Array(12);return i.Z.pack(_,Z),p.Z.pack(g,Z,3),Z}const N=new m.Z;function M(e,t,n,i,r){if(o.Z.typeOf.object("rootRegion",e),o.Z.typeOf.number("level",t),o.Z.typeOf.number("x",n),o.Z.typeOf.number("y",i),(0,c.Z)(r)&&o.Z.typeOf.number("z",r),0===t)return e.slice();const s=m.Z.unpack(e,0,N),a=e[4],l=e[5],u=Math.pow(2,-t),d=u*s.width,f=h.Z.negativePiToPi(s.west+n*d),p=h.Z.negativePiToPi(f+d),_=u*s.height,g=h.Z.negativePiToPi(s.south+i*_),Z=h.Z.negativePiToPi(g+_);let y=a,b=l;if((0,c.Z)(r)){const e=u*(l-a);y+=r*e,b=y+e}return[f,g,p,Z,y,b]}function R(e,t,n){const i=e._implicitTileset,o=t.implicitCoordinates.getChildCoordinates(n),r=C(i,o,n,!1,t),s=A(void 0,i,o),a=i.subtreeUriTemplate.getDerivedResource({templateValues:o.getTemplateValues()}).url,c={boundingVolume:r,geometricError:s,refine:i.refine,contents:[{uri:a}]},l=F(e,i.baseResource,c,t);return l.implicitTileset=i,l.implicitCoordinates=o,l}function F(e,t,n,i){return new(0,e._tile.constructor)(e._tileset,t,n,i)}v.prototype.hasProperty=function(e,t){return!1},v.prototype.getFeature=function(e){},v.prototype.applyDebugSettings=function(e,t){},v.prototype.applyStyle=function(e){},v.prototype.update=function(e,t){},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),(0,u.Z)(this)},v._deriveBoundingBox=L,v._deriveBoundingRegion=M,v._deriveBoundingVolumeS2=x;const B=v},781495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(790087),o=n(11020),r=n(234146),s=n(765153),a=n(217066);function c(e){const t=e.lengthBits;let n=e.availableCount;i.Z.typeOf.number("options.lengthBits",t);const s=e.constant,c=e.bitstream;if((0,o.Z)(s))n=t;else{const i=Math.ceil(t/8);if(c.length!==i)throw new a.Z(`Availability bitstream must be exactly ${i} bytes long to store ${t} bits. Actual bitstream was ${c.length} bytes long.`);const s=(0,r.Z)(e.computeAvailableCountEnabled,!1);!(0,o.Z)(n)&&s&&(n=function(e,t){let n=0;for(let i=0;i<t;i++){const t=i%8;n+=e[i>>3]>>t&1}return n}(c,t))}this._lengthBits=t,this._availableCount=n,this._constant=s,this._bitstream=c}Object.defineProperties(c.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}}),c.prototype.getBit=function(e){if(e<0||e>=this._lengthBits)throw new s.Z("Bit index out of bounds.");if((0,o.Z)(this._constant))return this._constant;const t=e>>3,n=e%8;return 1==(this._bitstream[t]>>n&1)};const l=c},666093:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(790087),o=n(234146);function r(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).metadataTable,n=e.class,r=e.entityId,s=e.propertyTableJson;i.Z.typeOf.object("options.metadataTable",t),i.Z.typeOf.object("options.class",n),i.Z.typeOf.number("options.entityId",r),i.Z.typeOf.object("options.propertyTableJson",s),this._class=n,this._metadataTable=t,this._entityId=r,this._extensions=s.extensions,this._extras=s.extras}Object.defineProperties(r.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),r.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)},r.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)},r.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)},r.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)},r.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)},r.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)},r.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)};const s=r},616130:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(765153);const o={QUADTREE:"QUADTREE",OCTREE:"OCTREE",getBranchingFactor:function(e){switch(e){case o.OCTREE:return 8;case o.QUADTREE:return 4;default:throw new i.Z("subdivisionScheme is not a valid value.")}}},r=Object.freeze(o)},475203:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(790087),o=n(234146),r=n(765153),s=n(11020),a=n(722313),c=n(911698),l=n(217066),u=n(717341),d=n(781495),h=n(666093),f=n(616130),p=n(299260),m=n(878942),_=n(518065);function g(e,t,n){i.Z.typeOf.object("resource",e),i.Z.typeOf.object("implicitTileset",t),i.Z.typeOf.object("implicitCoordinates",n),this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=n,this._subtreeLevels=t.subtreeLevels,this._subdivisionScheme=t.subdivisionScheme,this._branchingFactor=t.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._ready=!1}function Z(e,t){const n=e.properties;let i;for(const e in n)if(n.hasOwnProperty(e)){const r=n[e];i=t[(0,o.Z)(r.values,r.bufferView)],i.isActive=!0,i.bufferHeader.isActive=!0;const a=(0,o.Z)(r.stringOffsets,r.stringOffsetBufferView);(0,s.Z)(a)&&(i=t[a],i.isActive=!0,i.bufferHeader.isActive=!0);const c=(0,o.Z)(r.arrayOffsets,r.arrayOffsetBufferView);(0,s.Z)(c)&&(i=t[c],i.isActive=!0,i.bufferHeader.isActive=!0)}}async function y(e,t){const n=e._resource.getDerivedResource({url:t.uri}),i=_.Z.getExternalBufferLoader({resource:n});e._bufferLoader=i;try{await i.load()}catch(e){if(i.isDestroyed())return;throw e}return i.typedArray}function b(e,t,n,i){if((0,s.Z)(e.constant))return new d.Z({constant:Boolean(e.constant),lengthBits:n,availableCount:e.availableCount});let o;return(0,s.Z)(e.bitstream)?o=t[e.bitstream]:(0,s.Z)(e.bufferView)&&(o=t[e.bufferView]),new d.Z({bitstream:o,lengthBits:n,availableCount:e.availableCount,computeAvailableCountEnabled:i})}function v(e){let t=0;const n=e.lengthBits,i=e.availableCount;let o;o=i<256?new Uint8Array(n):i<65536?new Uint16Array(n):new Uint32Array(n);for(let n=0;n<e.lengthBits;n++)e.getBit(n)&&(o[n]=t,t++);return o}Object.defineProperties(g.prototype,{ready:{get:function(){return this._ready}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}}),g.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)},g.prototype.tileIsAvailableAtCoordinates=function(e){const t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)},g.prototype.contentIsAvailableAtIndex=function(e,t){if((t=(0,o.Z)(t,0))<0||t>=this._contentAvailabilityBitstreams.length)throw new r.Z("contentIndex out of bounds.");return this._contentAvailabilityBitstreams[t].getBit(e)},g.prototype.contentIsAvailableAtCoordinates=function(e,t){const n=this.getTileIndex(e);return this.contentIsAvailableAtIndex(n,t)},g.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)},g.prototype.childSubtreeIsAvailableAtCoordinates=function(e){const t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)},g.prototype.getLevelOffset=function(e){const t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)},g.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===f.Z.OCTREE&&(t=3),e>>t},g.fromSubtreeJson=async function(e,t,n,a,l){if(i.Z.typeOf.object("resource",e),(0,s.Z)(t)===(0,s.Z)(n))throw new r.Z("One of json and subtreeView must be defined.");i.Z.typeOf.object("implicitTileset",a),i.Z.typeOf.object("implicitCoordinates",l);const d=new g(e,a,l);let h;h=(0,s.Z)(t)?{json:t,binary:void 0}:function(e){const t=!0,n=new DataView(e.buffer,e.byteOffset);let i=8;const o=n.getUint32(i,t);i+=8;const r=n.getUint32(i,t);i+=8;const s=(0,c.Z)(e,i,o);i+=o;return{json:s,binary:e.subarray(i,i+r)}}(n);const f=h.json;let _;if(d._subtreeJson=f,(0,u.Z)(f,"3DTILES_metadata"))_=f.extensions["3DTILES_metadata"];else if((0,s.Z)(f.tileMetadata)){const e=f.tileMetadata;_=f.propertyTables[e]}const A=[];if((0,s.Z)(f.contentMetadata)){const e=f.contentMetadata.length;for(let t=0;t<e;t++){const e=f.contentMetadata[t];A.push(f.propertyTables[e])}}let T;const w=a.metadataSchema,E=f.subtreeMetadata;if((0,s.Z)(E)){const e=E.class,t=w.classes[e];T=new p.Z({subtreeMetadata:E,class:t})}d._metadata=T,d._tilePropertyTableJson=_,d._contentPropertyTableJsons=A;f.contentAvailabilityHeaders=[],(0,u.Z)(f,"3DTILES_multiple_contents")?f.contentAvailabilityHeaders=f.extensions["3DTILES_multiple_contents"].contentAvailability:Array.isArray(f.contentAvailability)?f.contentAvailabilityHeaders=f.contentAvailability:f.contentAvailabilityHeaders.push((0,o.Z)(f.contentAvailability,{constant:0}));const S=function(e){e=(0,s.Z)(e)?e:[];for(let t=0;t<e.length;t++){const n=e[t];n.isExternal=(0,s.Z)(n.uri),n.isActive=!1}return e}(f.buffers),C=function(e,t){e=(0,s.Z)(e)?e:[];for(let n=0;n<e.length;n++){const i=e[n],o=t[i.buffer];i.bufferHeader=o,i.isActive=!1}return e}(f.bufferViews,S);!function(e,t){let n;const i=e.tileAvailability;(0,s.Z)(i.bitstream)?n=t[i.bitstream]:(0,s.Z)(i.bufferView)&&(n=t[i.bufferView]),(0,s.Z)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);const o=e.contentAvailabilityHeaders;for(let e=0;e<o.length;e++)n=void 0,(0,s.Z)(o[e].bitstream)?n=t[o[e].bitstream]:(0,s.Z)(o[e].bufferView)&&(n=t[o[e].bufferView]),(0,s.Z)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);n=void 0;const r=e.childSubtreeAvailability;(0,s.Z)(r.bitstream)?n=t[r.bitstream]:(0,s.Z)(r.bufferView)&&(n=t[r.bufferView]),(0,s.Z)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0)}(f,C),(0,s.Z)(_)&&Z(_,C);for(let e=0;e<A.length;e++)Z(A[e],C);const x=await function(e,t,n){const i=[];for(let o=0;o<t.length;o++){const r=t[o];if(r.isActive)if(r.isExternal){const t=y(e,r);i.push(t)}else i.push(Promise.resolve(n));else i.push(Promise.resolve(void 0))}return Promise.all(i).then((function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];(0,s.Z)(i)&&(t[n]=i)}return t}))}(d,S,h.binary),I=function(e,t){const n={};for(let i=0;i<e.length;i++){const o=e[i];if(!o.isActive)continue;const r=o.byteOffset,s=r+o.byteLength,a=t[o.buffer].subarray(r,s);n[i]=a}return n}(C,x);return function(e,t,n,i){const o=n.branchingFactor,r=n.subtreeLevels,a=(Math.pow(o,r)-1)/(o-1),c=Math.pow(o,r),l=(0,u.Z)(t,"3DTILES_metadata"),d=(0,s.Z)(e._tilePropertyTableJson);let h=l||d;e._tileAvailability=b(t.tileAvailability,i,a,h);const f=e._contentPropertyTableJsons.length>0;h=h||f;for(let n=0;n<t.contentAvailabilityHeaders.length;n++){const o=b(t.contentAvailabilityHeaders[n],i,a,h);e._contentAvailabilityBitstreams.push(o)}e._childSubtreeAvailability=b(t.childSubtreeAvailability,i,c)}(d,f,a,I),(0,s.Z)(_)&&(function(e,t,n){const i=e._tilePropertyTableJson,o=e._tileAvailability.availableCount,r=t.metadataSchema,s=i.class,a=r.classes[s];e._tileMetadataTable=new m.Z({class:a,count:o,properties:i.properties,bufferViews:n})}(d,a,I),function(e){const t=v(e._tileAvailability);e._tileJumpBuffer=t}(d)),function(e,t,n){const i=e._contentPropertyTableJsons,o=e._contentAvailabilityBitstreams,r=t.metadataSchema,s=e._contentMetadataTables;for(let e=0;e<i.length;e++){const t=i[e],a=o[e].availableCount,c=t.class,l=r.classes[c],u=new m.Z({class:l,count:a,properties:t.properties,bufferViews:n});s.push(u)}}(d,a,I),function(e){const t=e._contentJumpBuffers,n=e._contentAvailabilityBitstreams;for(let e=0;e<n.length;e++){const i=v(n[e]);t.push(i)}}(d),d._ready=!0,d},g.prototype.getTileIndex=function(e){const t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new l.Z("level is out of bounds for this subtree");return e.getSubtreeCoordinates().getOffsetCoordinates(e).tileIndex},g.prototype.getChildSubtreeIndex=function(e){if(e.level-this._implicitCoordinates.level!==this._implicitCoordinates.subtreeLevels)throw new l.Z("level is out of bounds for this subtree");return e.getParentSubtreeCoordinates().getOffsetCoordinates(e).mortonIndex},g.prototype.getTileMetadataView=function(e){const t=function(e,t){if(!(0,s.Z)(e._tileMetadataTable))return;const n=e.getTileIndex(t);return e._tileAvailability.getBit(n)?e._tileJumpBuffer[n]:void 0}(this,e);if(!(0,s.Z)(t))return;const n=this._tileMetadataTable;return new h.Z({class:n.class,metadataTable:n,entityId:t,propertyTableJson:this._tilePropertyTableJson})},g.prototype.getContentMetadataView=function(e,t){const n=function(e,t,n){const i=e._contentMetadataTables;if(!(0,s.Z)(i))return;const o=i[n];if(!(0,s.Z)(o))return;const r=e._contentAvailabilityBitstreams[n],a=e.getTileIndex(t);return r.getBit(a)?e._contentJumpBuffers[n][a]:void 0}(this,e,t);if(!(0,s.Z)(n))return;const i=this._contentMetadataTables[t],o=this._contentPropertyTableJsons[t];return new h.Z({class:i.class,metadataTable:i,entityId:n,contentIndex:t,propertyTableJson:o})},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return(0,s.Z)(this._bufferLoader)&&_.Z.unload(this._bufferLoader),(0,a.Z)(this)};const A=g},299260:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(234146),r=n(11020),s=n(529394);function a(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).subtreeMetadata,n=e.class;i.Z.typeOf.object("options.subtreeMetadata",t),i.Z.typeOf.object("options.class",n);const s=(0,r.Z)(t.properties)?t.properties:{};this._class=n,this._properties=s,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return s.Z.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return s.Z.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return s.Z.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return s.Z.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return s.Z.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return s.Z.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return s.Z.setPropertyBySemantic(e,t,this._properties,this._class)};const c=a},146251:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(344485),o=n(790087),r=n(765153),s=n(683278),a=n(616130);function c(e){if(o.Z.typeOf.string("options.subdivisionScheme",e.subdivisionScheme),o.Z.typeOf.number("options.subtreeLevels",e.subtreeLevels),o.Z.typeOf.number("options.level",e.level),o.Z.typeOf.number("options.x",e.x),o.Z.typeOf.number("options.y",e.y),e.subdivisionScheme===a.Z.OCTREE&&o.Z.typeOf.number("options.z",e.z),e.level<0)throw new r.Z("level must be non-negative");if(e.x<0)throw new r.Z("x must be non-negative");if(e.y<0)throw new r.Z("y must be non-negative");if(e.subdivisionScheme===a.Z.OCTREE&&e.z<0)throw new r.Z("z must be non-negative");const t=1<<e.level;if(e.x>=t)throw new r.Z("x is out of range");if(e.y>=t)throw new r.Z("y is out of range");if(e.subdivisionScheme===a.Z.OCTREE&&e.z>=t)throw new r.Z("z is out of range");this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===a.Z.OCTREE&&(this.z=e.z)}function l(e,t){if(e.subdivisionScheme!==t.subdivisionScheme)throw new r.Z("coordinates must have same subdivisionScheme");if(e.subtreeLevels!==t.subtreeLevels)throw new r.Z("coordinates must have same subtreeLevels")}Object.defineProperties(c.prototype,{childIndex:{get:function(){let e=0;return e|=1&this.x,e|=(1&this.y)<<1,this.subdivisionScheme===a.Z.OCTREE&&(e|=(1&this.z)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===a.Z.OCTREE?s.Z.encode3D(this.x,this.y,this.z):s.Z.encode2D(this.x,this.y)}},tileIndex:{get:function(){return(this.subdivisionScheme===a.Z.OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3)+this.mortonIndex}}}),c.prototype.getDescendantCoordinates=function(e){o.Z.typeOf.object("offsetCoordinates",e),l(this,e);const t=this.level+e.level,n=(this.x<<e.level)+e.x,i=(this.y<<e.level)+e.y;if(this.subdivisionScheme===a.Z.OCTREE){const o=(this.z<<e.level)+e.z;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i,z:o})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i})},c.prototype.getAncestorCoordinates=function(e){if(o.Z.typeOf.number("offsetLevels",e),e<0)throw new r.Z("offsetLevels must be non-negative");if(e>this.level)throw new r.Z("ancestor cannot be above the tileset root");const t=1<<e,n=this.level-e,i=Math.floor(this.x/t),s=Math.floor(this.y/t);if(this.subdivisionScheme===a.Z.OCTREE){const e=Math.floor(this.z/t);return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:s,z:e})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:s})},c.prototype.getOffsetCoordinates=function(e){if(o.Z.typeOf.object("descendantCoordinates",e),!this.isEqual(e)&&!this.isAncestor(e))throw new r.Z("this is not an ancestor of descendant");l(this,e);const t=e.level-this.level,n=1<<t,i=e.x%n,s=e.y%n;if(this.subdivisionScheme===a.Z.OCTREE){const o=e.z%n;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:s,z:o})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:s})},c.prototype.getChildCoordinates=function(e){o.Z.typeOf.number("childIndex",e);const t=a.Z.getBranchingFactor(this.subdivisionScheme);if(e<0||t<=e)throw new r.Z(`childIndex must be at least 0 and less than ${t}`);const n=this.level+1,i=2*this.x+e%2,s=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===a.Z.OCTREE){const t=2*this.z+Math.floor(e/4)%2;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:s,z:t})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:s})},c.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)},c.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)},c.prototype.isAncestor=function(e){o.Z.typeOf.object("descendantCoordinates",e),l(this,e);const t=e.level-this.level;if(t<=0)return!1;const n=e.x>>t,i=e.y>>t,r=this.x===n,s=this.y===i;if(this.subdivisionScheme===a.Z.OCTREE){const n=e.z>>t,i=this.z===n;return r&&s&&i}return r&&s},c.prototype.isEqual=function(e){return o.Z.typeOf.object("otherCoordinates",e),this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme!==a.Z.OCTREE||this.z===e.z)},c.prototype.isImplicitTilesetRoot=function(){return 0===this.level},c.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels==0},c.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels==this.subtreeLevels-1},c.prototype.getTemplateValues=function(){const e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===a.Z.OCTREE&&(e.z=this.z),e};const u=[0,0,0];c.fromMortonIndex=function(e,t,n,i){let o;return e===a.Z.OCTREE?(o=s.Z.decode3D(i,u),new c({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1],z:o[2]})):(o=s.Z.decode2D(i,u),new c({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1]}))},c.fromTileIndex=function(e,t,n){let o,r,s;return e===a.Z.OCTREE?(o=Math.floor(i.Z.log2(7*n+1)/3),r=((1<<3*o)-1)/7,s=n-r):(o=Math.floor(i.Z.log2(3*n+1)/2),r=((1<<2*o)-1)/3,s=n-r),c.fromMortonIndex(e,t,o,s)};const d=c},513277:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(790087),o=n(823438),r=n(11020),s=n(205522),a=n(217066),c=n(717341),l=n(616130);const u=function(e,t,n){const u=(0,c.Z)(t,"3DTILES_implicit_tiling")?t.extensions["3DTILES_implicit_tiling"]:t.implicitTiling;i.Z.typeOf.object("implicitTiling",u),this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=n;const d=t.boundingVolume;if(!((0,r.Z)(d.box)||(0,r.Z)(d.region)||(0,c.Z)(d,"3DTILES_bounding_volume_S2")||(0,c.Z)(d,"3DTILES_bounding_volume_cylinder")))throw new a.Z("Only box, region, 3DTILES_bounding_volume_S2, and 3DTILES_bounding_volume_cylinder are supported for implicit tiling");this.boundingVolume=d,this.refine=t.refine,this.subtreeUriTemplate=new s.Z({url:u.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];const h=function(e){if((0,c.Z)(e,"3DTILES_multiple_contents")){const t=e.extensions["3DTILES_multiple_contents"];return(0,r.Z)(t.contents)?t.contents:t.content}return(0,r.Z)(e.contents)?e.contents:(0,r.Z)(e.content)?[e.content]:[]}(t);for(let e=0;e<h.length;e++){const t=h[e];this.contentHeaders.push((0,o.Z)(t,!0));const n=new s.Z({url:t.uri});this.contentUriTemplates.push(n)}this.contentCount=this.contentHeaders.length,this.tileHeader=function(e){const t=(0,o.Z)(e,!0);return(0,r.Z)(t.extensions)&&(delete t.extensions["3DTILES_implicit_tiling"],delete t.extensions["3DTILES_multiple_contents"],0===Object.keys(t.extensions).length&&delete t.extensions),delete t.implicitTiling,delete t.contents,delete t.content,t}(t),this.subdivisionScheme=l.Z[u.subdivisionScheme],this.branchingFactor=l.Z.getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=u.subtreeLevels,(0,r.Z)(u.availableLevels)?this.availableLevels=u.availableLevels:this.availableLevels=u.maximumLevel+1}},272490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(790087);const o={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"_FEATURE_ID",fromGltfSemantic:function(e){i.Z.typeOf.string("gltfSemantic",e);let t=e;const n=/^(\w+)_\d+$/.exec(e);switch(null!==n&&(t=n[1]),t){case"TRANSLATION":return o.TRANSLATION;case"ROTATION":return o.ROTATION;case"SCALE":return o.SCALE;case"_FEATURE_ID":return o.FEATURE_ID}}},r=Object.freeze(o)},183839:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(35961),o=n(11020),r=n(722313),s=n(430886),a=n(598020),c=n(12503),l=n(545870),u=n(941537),d=n(964695),h=n(417148),f=n(437530),p=n(609882),m=n(58038),_=n(973591),g=n(822948),Z=n(489709),y=n(721902);function b(){this._numSamples=1,this.previousFramebuffer=void 0,this._previousFramebuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this._fbo=new c.Z({depthStencil:!0,createDepthAttachments:!1}),this._fboClassified=new c.Z({depthStencil:!0,createDepthAttachments:!1}),this._rsUnclassified=void 0,this._rsClassified=void 0,this._unclassifiedCommand=void 0,this._classifiedCommand=void 0,this._translucentCommand=void 0,this._clearColorCommand=new a.Z({color:new i.Z(0,0,0,0),owner:this}),this._clearCommand=new a.Z({color:new i.Z(0,0,0,0),depth:1,stencil:0});const e=this;this._uniformMap={colorTexture:function(){return e._fbo.getColorTexture()},depthTexture:function(){return e._depthStencilTexture},classifiedTexture:function(){return e._fboClassified.getColorTexture()}}}Object.defineProperties(b.prototype,{unclassifiedCommand:{get:function(){return this._unclassifiedCommand}}}),b.isTranslucencySupported=function(e){return e.depthTexture&&e.fragmentDepth};const v={depthMask:!1,stencilTest:{enabled:!0,frontFunction:Z.Z.EQUAL,frontOperation:{fail:y.Z.KEEP,zFail:y.Z.KEEP,zPass:y.Z.KEEP},backFunction:Z.Z.NEVER,reference:0,mask:g.Z.CLASSIFICATION_MASK},blending:_.Z.ALPHA_BLEND},A={depthMask:!1,stencilTest:{enabled:!0,frontFunction:Z.Z.NOT_EQUAL,frontOperation:{fail:y.Z.KEEP,zFail:y.Z.KEEP,zPass:y.Z.KEEP},backFunction:Z.Z.NEVER,reference:0,mask:g.Z.CLASSIFICATION_MASK},blending:_.Z.ALPHA_BLEND},T={depthMask:!0,depthTest:{enabled:!0},stencilTest:g.Z.setCesium3DTileBit(),stencilMask:g.Z.CESIUM_3D_TILE_MASK,blending:_.Z.ALPHA_BLEND};b.prototype.update=function(e,t,n){const i=this._fbo.getColorTexture(),r=this.previousFramebuffer!==this._previousFramebuffer;this._previousFramebuffer=this.previousFramebuffer;const a=this._numSamples!==t,c=e.drawingBufferWidth,_=e.drawingBufferHeight,g=!(0,o.Z)(i)||i.width!==c||i.height!==_;if((g||r||a)&&(this._numSamples=t,this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),(0,o.Z)(this._previousFramebuffer)||(this._depthStencilTexture=new p.Z({context:e,width:c,height:_,pixelFormat:s.Z.DEPTH_STENCIL,pixelDatatype:l.Z.UNSIGNED_INT_24_8}),t>1&&(this._depthStencilRenderbuffer=new u.Z({context:e,width:c,height:_,format:d.Z.DEPTH24_STENCIL8,numSamples:t})))),!(0,o.Z)(this._fbo.framebuffer)||g||r||a){let i,r;this._fbo.destroy(),this._fboClassified.destroy(),(0,o.Z)(this._previousFramebuffer)?(i=n.getDepthStencilTexture(),r=n.getDepthStencilRenderbuffer()):(i=this._depthStencilTexture,r=this._depthStencilRenderbuffer),this._fbo.setDepthStencilTexture(i),(0,o.Z)(r)&&this._fbo.setDepthStencilRenderbuffer(r),this._fbo.update(e,c,_,t),(0,o.Z)(this._previousFramebuffer)||(this._fboClassified.setDepthStencilTexture(i),this._fboClassified.update(e,c,_))}if((0,o.Z)(this._rsUnclassified)||(this._rsUnclassified=h.Z.fromCache(v),this._rsClassified=h.Z.fromCache(A),this._rsDefault=h.Z.fromCache(T)),!(0,o.Z)(this._unclassifiedCommand)||r||a){(0,o.Z)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy());const t=(0,o.Z)(this._previousFramebuffer)?"uniform sampler2D colorTexture;\nin vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n#ifdef UNCLASSIFIED\n    out_FragColor = color * czm_invertClassificationColor;\n#else\n    out_FragColor = color;\n#endif\n}\n":"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform sampler2D classifiedTexture;\nin vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n    bool isClassified = all(equal(texture(classifiedTexture, v_textureCoordinates), vec4(0.0)));\n#ifdef UNCLASSIFIED\n    vec4 highlightColor = czm_invertClassificationColor;\n    if (isClassified)\n    {\n        discard;\n    }\n#else\n    vec4 highlightColor = vec4(1.0);\n    if (!isClassified)\n    {\n        discard;\n    }\n#endif\n    out_FragColor = color * highlightColor;\n    gl_FragDepth = texture(depthTexture, v_textureCoordinates).r;\n}\n",n=new f.Z({defines:["UNCLASSIFIED"],sources:[t]}),i=new f.Z({sources:[t]});this._unclassifiedCommand=e.createViewportQuadCommand(n,{renderState:(0,o.Z)(this._previousFramebuffer)?this._rsUnclassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),this._classifiedCommand=e.createViewportQuadCommand(i,{renderState:(0,o.Z)(this._previousFramebuffer)?this._rsClassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),(0,o.Z)(this._translucentCommand)&&(this._translucentCommand.shaderProgram=this._translucentCommand.shaderProgram&&this._translucentCommand.shaderProgram.destroy()),(0,o.Z)(this._previousFramebuffer)||(this._translucentCommand=e.createViewportQuadCommand(m.Z,{renderState:this._rsUnclassified,uniformMap:this._uniformMap,owner:this}))}},b.prototype.prepareTextures=function(e,t){this._fbo._numSamples>1&&this._fbo.prepareTextures(e,t)},b.prototype.clear=function(e,t){(0,o.Z)(this._previousFramebuffer)?this._fbo.clear(e,this._clearColorCommand,t):(this._fbo.clear(e,this._clearCommand,t),this._fboClassified.clear(e,this._clearCommand,t))},b.prototype.executeClassified=function(e,t){if(!(0,o.Z)(this._previousFramebuffer)){const n=t.framebuffer;this.prepareTextures(e,!0),t.framebuffer=this._fboClassified.framebuffer,this._translucentCommand.execute(e,t),t.framebuffer=n}this._classifiedCommand.execute(e,t)},b.prototype.executeUnclassified=function(e,t){this._unclassifiedCommand.execute(e,t)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._fbo.destroy(),this._fboClassified.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),(0,o.Z)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy()),(0,r.Z)(this)};const w=b},588632:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(790087),o=n(234146),r=n(11020),s=n(906439),a=n(282910),c=n(980382),l=n(217066),u=n(565756),d=n(271834),h=n(619233),f=n(578049),p=n(636452),m=n(586085),_=n(267428),g=n(604450),Z=n(203230);function y(e){return function(t){return new e(t)}}const b={ARCGIS_MAPSERVER:y(u.Z),BING:y(d.Z),GOOGLE_EARTH:y(f.Z),MAPBOX:y(p.Z),SINGLE_TILE:y(m.Z),TMS:y(h.Z),URL_TEMPLATE:y(_.Z),WMS:y(g.Z),WMTS:y(Z.Z)},v={ARCGIS_MAPSERVER:u.Z.fromUrl,BING:async(e,t)=>d.Z.fromUrl(e,t),GOOGLE_EARTH:async(e,t)=>{const n=t.channel;return delete t.channel,f.Z.fromUrl(e,n,t)},MAPBOX:(e,t)=>new p.Z({url:e,...t}),SINGLE_TILE:m.Z.fromUrl,TMS:h.Z.fromUrl,URL_TEMPLATE:(e,t)=>new _.Z({url:e,...t}),WMS:(e,t)=>new g.Z({url:e,...t}),WMTS:(e,t)=>new Z.Z({url:e,...t})};function A(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._ready=!1,this._tileCredits=void 0,this._errorEvent=new a.Z;const t=e.assetId;(0,r.Z)(t)&&((0,s.Z)("IonImageryProvider options.assetId","options.assetId was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use IonImageryProvider.fromAssetId instead."),A._initialize(this,t,e))}Object.defineProperties(A.prototype,{ready:{get:function(){return(0,s.Z)("IonImageryProvider.ready","IonImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use IonImageryProvider.fromAssetId instead."),this._ready}},readyPromise:{get:function(){return(0,s.Z)("IonImageryProvider.readyPromise","IonImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use IonImageryProvider.fromAssetId instead."),this._readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},proxy:{get:function(){}},defaultAlpha:{get:function(){return(0,s.Z)("IonImageryProvider.defaultAlpha","IonImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,s.Z)("IonImageryProvider.defaultAlpha","IonImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,s.Z)("IonImageryProvider.defaultNightAlpha","IonImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,s.Z)("IonImageryProvider.defaultNightAlpha","IonImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,s.Z)("IonImageryProvider.defaultDayAlpha","IonImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,s.Z)("IonImageryProvider.defaultDayAlpha","IonImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,s.Z)("IonImageryProvider.defaultBrightness","IonImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,s.Z)("IonImageryProvider.defaultBrightness","IonImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,s.Z)("IonImageryProvider.defaultContrast","IonImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,s.Z)("IonImageryProvider.defaultContrast","IonImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,s.Z)("IonImageryProvider.defaultHue","IonImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,s.Z)("IonImageryProvider.defaultHue","IonImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,s.Z)("IonImageryProvider.defaultSaturation","IonImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,s.Z)("IonImageryProvider.defaultSaturation","IonImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,s.Z)("IonImageryProvider.defaultGamma","IonImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,s.Z)("IonImageryProvider.defaultGamma","IonImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,s.Z)("IonImageryProvider.defaultMinificationFilter","IonImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,s.Z)("IonImageryProvider.defaultMinificationFilter","IonImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,s.Z)("IonImageryProvider.defaultMagnificationFilter","IonImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,s.Z)("IonImageryProvider.defaultMagnificationFilter","IonImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),A._initialize=function(e,t,n){const i=c.Z._createEndpointResource(t,n),o=t.toString()+n.accessToken+n.server;let s=A._endpointCache[o];(0,r.Z)(s)||(s=i.fetchJson(),A._endpointCache[o]=s),e._readyPromise=s.then((function(n){if("IMAGERY"!==n.type)return Promise.reject(new l.Z(`Cesium ion asset ${t} is not an imagery asset.`));let o;const s=n.externalType;if((0,r.Z)(s)){const e=b[s];if(!(0,r.Z)(e))return Promise.reject(new l.Z(`Unrecognized Cesium ion imagery type: ${s}`));o=e(n.options)}else o=new h.Z({url:new c.Z(n,i)});return e._tileCredits=c.Z.getCreditsFromEndpoint(n,i),o.errorEvent.addEventListener((function(t){t.provider=e,e._errorEvent.raiseEvent(t)})),e._imageryProvider=o,Promise.resolve(o._readyPromise).then((function(){return e._ready=!0,!0}))}))},A.fromAssetId=async function(e,t){i.Z.typeOf.number("assetId",e),t=(0,o.Z)(t,o.Z.EMPTY_OBJECT);const n=c.Z._createEndpointResource(e,t),s=e.toString()+t.accessToken+t.server;let a=A._endpointCache[s];(0,r.Z)(a)||(a=n.fetchJson(),A._endpointCache[s]=a);const u=await a;if("IMAGERY"!==u.type)throw new l.Z(`Cesium ion asset ${e} is not an imagery asset.`);let d;const f=u.externalType;if((0,r.Z)(f)){const e=v[f];if(!(0,r.Z)(e))throw new l.Z(`Unrecognized Cesium ion imagery type: ${f}`);const t={...u.options},n=t.url;delete t.url,d=await e(n,t)}else d=await h.Z.fromUrl(new c.Z(u,n));const p=new A(t);return d.errorEvent.addEventListener((function(e){e.provider=p,p._errorEvent.raiseEvent(e)})),p._tileCredits=c.Z.getCreditsFromEndpoint(u,n),p._imageryProvider=d,p._ready=!0,p._readyPromise=Promise.resolve(!0),p},A.prototype.getTileCredits=function(e,t,n){const i=this._imageryProvider.getTileCredits(e,t,n);return(0,r.Z)(i)?this._tileCredits.concat(i):this._tileCredits},A.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)},A.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)},A._endpointCache={};const T=A},741741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4})},11951:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(11020),o=n(765153),r=n(732292),s=n(754672);function a(e){this._total=e,this.usedThisFrame=0,this.stolenFromMeThisFrame=0,this.starvedThisFrame=!1,this.starvedLastFrame=!1}function c(e){if((0,i.Z)(e)&&e.length!==s.Z.NUMBER_OF_JOB_TYPES)throw new o.Z("A budget must be specified for each job type; budgets.length should equal JobType.NUMBER_OF_JOB_TYPES.");const t=new Array(s.Z.NUMBER_OF_JOB_TYPES);t[s.Z.TEXTURE]=new a((0,i.Z)(e)?e[s.Z.TEXTURE]:10),t[s.Z.PROGRAM]=new a((0,i.Z)(e)?e[s.Z.PROGRAM]:10),t[s.Z.BUFFER]=new a((0,i.Z)(e)?e[s.Z.BUFFER]:30);const n=t.length;let r,c=0;for(r=0;r<n;++r)c+=t[r].total;const l=new Array(n);for(r=0;r<n;++r)l[r]=!1;this._totalBudget=c,this._totalUsedThisFrame=0,this._budgets=t,this._executedThisFrame=l}Object.defineProperties(a.prototype,{total:{get:function(){return this._total}}}),c.getTimestamp=r.Z,Object.defineProperties(c.prototype,{totalBudget:{get:function(){return this._totalBudget}}}),c.prototype.disableThisFrame=function(){this._totalUsedThisFrame=this._totalBudget},c.prototype.resetBudgets=function(){const e=this._budgets,t=e.length;for(let n=0;n<t;++n){const t=e[n];t.starvedLastFrame=t.starvedThisFrame,t.starvedThisFrame=!1,t.usedThisFrame=0,t.stolenFromMeThisFrame=0}this._totalUsedThisFrame=0},c.prototype.execute=function(e,t){const n=this._budgets,i=n[t],o=this._executedThisFrame[t];if(this._totalUsedThisFrame>=this._totalBudget&&o)return i.starvedThisFrame=!0,!1;let r;if(i.usedThisFrame+i.stolenFromMeThisFrame>=i.total){const e=n.length;let t;for(t=0;t<e&&(r=n[t],!(r.usedThisFrame+r.stolenFromMeThisFrame<r.total)||r.starvedLastFrame);++t);if(t===e&&o)return!1;o&&(i.starvedThisFrame=!0)}const s=c.getTimestamp();e.execute();const a=c.getTimestamp()-s;return this._totalUsedThisFrame+=a,r?r.stolenFromMeThisFrame+=a:i.usedThisFrame+=a,this._executedThisFrame[t]=!0,!0};const l=c},754672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3})},788844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(790087),o=n(823438),r=n(11020),s=n(765153),a=n(529394);const c={};function l(e){i.Z.typeOf.number.greaterThan("options.count",e.count,0),i.Z.typeOf.object("options.properties",e.properties),this._count=e.count,this._properties=(0,o.Z)(e.properties,!0)}l.prototype.hasProperty=function(e){return a.Z.hasProperty(e,this._properties,c)},l.prototype.getPropertyIds=function(e){return a.Z.getPropertyIds(this._properties,c,e)},l.prototype.getProperty=function(e,t){if(i.Z.typeOf.number("index",e),i.Z.typeOf.string("propertyId",t),e<0||e>=this._count)throw new s.Z(`index must be in the range [0, ${this._count})`);const n=this._properties[t];if((0,r.Z)(n))return(0,o.Z)(n[e],!0)},l.prototype.setProperty=function(e,t,n){if(i.Z.typeOf.number("index",e),i.Z.typeOf.string("propertyId",t),e<0||e>=this._count)throw new s.Z(`index must be in the range [0, ${this._count})`);let a=this._properties[t];(0,r.Z)(a)||(a=new Array(this._count),this._properties[t]=a),a[e]=(0,o.Z)(n,!0)};const u=l},548410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const i=Object.freeze({UNLOADED:0,RECEIVING:1,RECEIVED:2,LOADED:3,FAILED:4,UNAVAILABLE:5});function o(e,t){this.spatialNode=e,this.keyframe=t,this.state=i.UNLOADED,this.metadatas=[],this.megatextureIndex=-1,this.priority=-Number.MAX_VALUE,this.highPriorityFrameNumber=-1}o.priorityComparator=function(e,t){return e.priority-t.priority},o.searchComparator=function(e,t){return e.keyframe-t.keyframe},o.LoadState=i;const r=o},305515:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({ROTATE:0,INFINITE_SCROLL:1})},636452:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(865029),o=n(234146),r=n(11020),s=n(906439),a=n(765153),c=n(205522),l=n(267428);const u=/\/$/,d=new i.Z('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function h(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).mapId;if(!(0,r.Z)(t))throw new a.Z("options.mapId is required.");const n=e.accessToken;if(!(0,r.Z)(n))throw new a.Z("options.accessToken is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const s=c.Z.createIfNeeded((0,o.Z)(e.url,"https://{s}.tiles.mapbox.com/v4/"));this._mapId=t,this._accessToken=n;let h=(0,o.Z)(e.format,"png");/\./.test(h)||(h=`.${h}`),this._format=h;let f,p=s.getUrlComponent();u.test(p)||(p+="/"),p+=`${t}/{z}/{x}/{y}${this._format}`,s.url=p,s.setQueryParameters({access_token:n}),(0,r.Z)(e.credit)?(f=e.credit,"string"==typeof f&&(f=new i.Z(f))):f=d,this._resource=s,this._imageryProvider=new l.Z({url:s,credit:f,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle}),this._ready=!0,this._readyPromise=Promise.resolve(!0)}Object.defineProperties(h.prototype,{url:{get:function(){return this._imageryProvider.url}},ready:{get:function(){return(0,s.Z)("MapboxImageryProvider.ready","MapboxImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._imageryProvider.ready}},readyPromise:{get:function(){return(0,s.Z)("MapboxImageryProvider.readyPromise","MapboxImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._imageryProvider._readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},defaultAlpha:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultAlpha","MapboxImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultAlpha","MapboxImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultNightAlpha","MapboxImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultNightAlpha","MapboxImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultDayAlpha","MapboxImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultDayAlpha","MapboxImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultBrightness","MapboxImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultBrightness","MapboxImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultContrast","MapboxImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultContrast","MapboxImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultHue","MapboxImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultHue","MapboxImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultSaturation","MapboxImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultSaturation","MapboxImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultGamma","MapboxImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultGamma","MapboxImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultMinificationFilter","MapboxImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultMinificationFilter","MapboxImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,s.Z)("MapboxImageryProvider.defaultMagnificationFilter","MapboxImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,s.Z)("MapboxImageryProvider.defaultMagnificationFilter","MapboxImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),h.prototype.getTileCredits=function(e,t,n){},h.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)},h.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)},h._defaultCredit=d;const f=h},71880:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(234146),o=n(11020),r=n(427183),s=n(89234),a=n(176935),c=n(449899),l=n(198178),u=n(412748),d=n(46698),h=n(285185),f=n(420171);function p(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT);const t=(0,i.Z)(e.translucent,!0),n=(0,i.Z)(e.closed,!1),r=(0,i.Z)(e.materialSupport,p.MaterialSupport.TEXTURED);this.material=(0,o.Z)(e.material)?e.material:f.Z.fromType(f.Z.ColorType),this.translucent=t,this._vertexShaderSource=(0,i.Z)(e.vertexShaderSource,r.vertexShaderSource),this._fragmentShaderSource=(0,i.Z)(e.fragmentShaderSource,r.fragmentShaderSource),this._renderState=h.Z.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._materialSupport=r,this._vertexFormat=r.vertexFormat,this._flat=(0,i.Z)(e.flat,!1),this._faceForward=(0,i.Z)(e.faceForward,!n)}Object.defineProperties(p.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),p.prototype.getFragmentShaderSource=h.Z.prototype.getFragmentShaderSource,p.prototype.isTranslucent=h.Z.prototype.isTranslucent,p.prototype.getRenderState=h.Z.prototype.getRenderState,p.MaterialSupport={BASIC:Object.freeze({vertexFormat:r.Z.POSITION_AND_NORMAL,vertexShaderSource:l.Z,fragmentShaderSource:c.Z}),TEXTURED:Object.freeze({vertexFormat:r.Z.POSITION_NORMAL_AND_ST,vertexShaderSource:d.Z,fragmentShaderSource:u.Z}),ALL:Object.freeze({vertexFormat:r.Z.ALL,vertexShaderSource:a.Z,fragmentShaderSource:s.Z})};const m=p},536814:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(405254),o=n(660904),r=n(449809),s=n(591477),a=n(234146),c=n(11020),l=n(722313),u=n(765153),d=n(344485),h=n(832670),f=n(545870),p=n(430886),m=n(217066),_=n(497730),g=n(609882),Z=n(442429),y=n(55248),b=n(49940);function v(e,t,n,c,l){c===h.Z.UNSIGNED_SHORT&&(c=h.Z.FLOAT32);const u=e.floatingPointTexture;if(c===h.Z.FLOAT32&&!u)throw new m.Z("Floating point texture not supported");let v,T;c===h.Z.FLOAT32||c===h.Z.FLOAT64?v=f.Z.FLOAT:c===h.Z.UINT8&&(v=f.Z.UNSIGNED_BYTE),1===n?T=e.webgl2?p.Z.RED:p.Z.LUMINANCE:2===n?T=e.webgl2?p.Z.RG:p.Z.LUMINANCE_ALPHA:3===n?T=p.Z.RGB:4===n&&(T=p.Z.RGBA),l=Math.min((0,a.Z)(l,134217728),536870912);const w=s.Z.maximumTextureSize,E=h.Z.getSizeInBytes(c),S=Math.floor(l/(n*E)),C=Math.min(w,d.Z.previousPowerOfTwo(Math.floor(Math.sqrt(S)))),x=Math.ceil(Math.sqrt(t.x)),I=Math.ceil(t.z/x),P=x*t.x,D=I*t.y,O=Math.floor(C/P),L=Math.floor(C/D);if(0===O||0===L)throw new m.Z("Tileset is too large to fit into megatexture");this.channelCount=n,this.componentType=c,this.voxelCountPerTile=o.Z.clone(t,new o.Z),this.maximumTileCount=O*L,this.regionCountPerMegatexture=new i.Z(O,L),this.voxelCountPerRegion=new i.Z(P,D),this.sliceCountPerRegion=new i.Z(x,I),this.voxelSizeUv=new i.Z(1/C,1/C),this.sliceSizeUv=new i.Z(t.x/C,t.y/C),this.regionSizeUv=new i.Z(P/C,D/C),this.texture=new g.Z({context:e,pixelFormat:T,pixelDatatype:v,flipY:!1,width:C,height:C,sampler:new _.Z({wrapS:b.Z.CLAMP_TO_EDGE,wrapT:b.Z.CLAMP_TO_EDGE,minificationFilter:y.Z.LINEAR,magnificationFilter:Z.Z.LINEAR})});const N=h.Z.toComponentDatatype(c);this.tileVoxelDataTemp=r.Z.createTypedArray(N,P*D*n),this.nodes=new Array(this.maximumTileCount);for(let e=0;e<this.maximumTileCount;e++)this.nodes[e]=new A(e);for(let e=0;e<this.maximumTileCount;e++){const t=this.nodes[e];t.previousNode=e>0?this.nodes[e-1]:void 0,t.nextNode=e<this.maximumTileCount-1?this.nodes[e+1]:void 0}this.occupiedList=void 0,this.emptyList=this.nodes[0],this.occupiedCount=0}function A(e){this.index=e,this.nextNode=void 0,this.previousNode=void 0}v.prototype.add=function(e){if(this.isFull())throw new u.Z("Trying to add when there are no empty spots");const t=this.emptyList;this.emptyList=this.emptyList.nextNode,(0,c.Z)(this.emptyList)&&(this.emptyList.previousNode=void 0),t.nextNode=this.occupiedList,(0,c.Z)(t.nextNode)&&(t.nextNode.previousNode=t),this.occupiedList=t;const n=t.index;return this.writeDataToTexture(n,e),this.occupiedCount++,n},v.prototype.remove=function(e){if(e<0||e>=this.maximumTileCount)throw new u.Z("Megatexture index out of bounds");const t=this.nodes[e];(0,c.Z)(t.previousNode)&&(t.previousNode.nextNode=t.nextNode),(0,c.Z)(t.nextNode)&&(t.nextNode.previousNode=t.previousNode),t.nextNode=this.emptyList,(0,c.Z)(t.nextNode)&&(t.nextNode.previousNode=t),t.previousNode=void 0,this.emptyList=t,this.occupiedCount--},v.prototype.isFull=function(){return void 0===this.emptyList},v.getApproximateTextureMemoryByteLength=function(e,t,n,i){i===h.Z.UNSIGNED_SHORT&&(i=h.Z.FLOAT32);const o=h.Z.getSizeInBytes(i),r=e*t.x*t.y*t.z,s=Math.ceil(Math.sqrt(t.z)),a=Math.ceil(t.z/s),c=s*t.x,l=a*t.y;let u=d.Z.previousPowerOfTwo(Math.floor(Math.sqrt(r)));for(;!(Math.floor(u/c)*Math.floor(u/l)>=e);)u*=2;return u*u*n*o},v.prototype.writeDataToTexture=function(e,t){const n=t.constructor===Uint16Array?new Float32Array(t):t,i=this.voxelCountPerTile,o=this.sliceCountPerRegion,r=this.voxelCountPerRegion,s=this.channelCount,a=this.tileVoxelDataTemp;for(let e=0;e<i.z;e++){const t=e%o.x*i.x,c=Math.floor(e/o.x)*i.y;for(let o=0;o<i.y;o++)for(let l=0;l<i.x;l++){const u=e*i.y*i.x+o*i.x+l,d=(c+o)*r.x+(t+l);for(let e=0;e<s;e++)a[d*s+e]=n[u*s+e]}}const c=this.regionCountPerMegatexture,l={source:{arrayBufferView:a,width:r.x,height:r.y},xOffset:e%c.x*r.x,yOffset:Math.floor(e/c.x)*r.y};this.texture.copyFrom(l)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this.texture=this.texture&&this.texture.destroy(),(0,l.Z)(this)};const T=v},943881:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(790087),o=n(823438),r=n(234146),s=n(11020),a=n(132866);function c(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).id;i.Z.typeOf.string("options.id",t);const n=(0,r.Z)(e.properties,{}),a={};for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];(0,s.Z)(t.semantic)&&(a[t.semantic]=t)}this._id=t,this._name=e.name,this._description=e.description,this._properties=n,this._propertiesBySemantic=a,this._extras=(0,o.Z)(e.extras,!0),this._extensions=(0,o.Z)(e.extensions,!0)}c.fromJson=function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).id,n=e.class;i.Z.typeOf.string("options.id",t),i.Z.typeOf.object("options.class",n);const o={};for(const t in n.properties)if(n.properties.hasOwnProperty(t)){const i=a.Z.fromJson({id:t,property:n.properties[t],enums:e.enums});o[t]=i}return new c({id:t,name:n.name,description:n.description,properties:o,extras:n.extras,extensions:n.extensions})},Object.defineProperties(c.prototype,{properties:{get:function(){return this._properties}},propertiesBySemantic:{get:function(){return this._propertiesBySemantic}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),c.BATCH_TABLE_CLASS_NAME="_batchTable";const l=c},132866:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(405254),o=n(660904),r=n(798336),s=n(790087),a=n(823438),c=n(234146),l=n(11020),u=n(765153),d=n(571945),h=n(664288),f=n(659635),p=n(784246),m=n(832670);function _(e){const t=(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT)).id,n=e.type;s.Z.typeOf.string("options.id",t),s.Z.typeOf.string("options.type",n);const i=e.componentType,o=e.enumType,r=(0,l.Z)(i)&&m.Z.isIntegerType(i)&&(0,c.Z)(e.normalized,!1);this._id=t,this._name=e.name,this._description=e.description,this._semantic=e.semantic,this._isLegacyExtension=e.isLegacyExtension,this._type=n,this._componentType=i,this._enumType=o,this._valueType=(0,l.Z)(o)?o.valueType:i,this._isArray=(0,c.Z)(e.isArray,!1),this._isVariableLengthArray=(0,c.Z)(e.isVariableLengthArray,!1),this._arrayLength=e.arrayLength,this._min=(0,a.Z)(e.min,!0),this._max=(0,a.Z)(e.max,!0),this._normalized=r;let u=(0,a.Z)(e.offset,!0),d=(0,a.Z)(e.scale,!0);const h=(0,l.Z)(u)||(0,l.Z)(d),f=!0;(0,l.Z)(u)||(u=this.expandConstant(0,f)),(0,l.Z)(d)||(d=this.expandConstant(1,f)),this._offset=u,this._scale=d,this._hasValueTransform=h,this._noData=(0,a.Z)(e.noData,!0),this._default=(0,a.Z)(e.default,!0),this._required=(0,c.Z)(e.required,!0),this._extras=(0,a.Z)(e.extras,!0),this._extensions=(0,a.Z)(e.extensions,!0)}function g(e,t){if(!Array.isArray(e))return e===t;if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!g(e[n],t[n]))return!1;return!0}function Z(e,t){const n=e._type,s=e._componentType,a=e._enumType,c=e._normalized;return p.Z.isVectorType(n)?function(e,t,n){return m.Z.isVectorCompatible(n)?t!==p.Z.VEC2||e instanceof i.Z?t!==p.Z.VEC3||e instanceof o.Z?t!==p.Z.VEC4||e instanceof r.Z?void 0:`vector value ${e} must be a Cartesian4`:`vector value ${e} must be a Cartesian3`:`vector value ${e} must be a Cartesian2`:`componentType ${n} is incompatible with vector type ${t}`}(t,n,s):p.Z.isMatrixType(n)?function(e,t,n){return m.Z.isVectorCompatible(n)?t!==p.Z.MAT2||e instanceof d.Z?t!==p.Z.MAT3||e instanceof h.Z?t!==p.Z.MAT4||e instanceof f.Z?void 0:`matrix value ${e} must be a Matrix4`:`matrix value ${e} must be a Matrix3`:`matrix value ${e} must be a Matrix2`:`componentType ${n} is incompatible with matrix type ${t}`}(t,n,s):n===p.Z.STRING?function(e){if("string"!=typeof e)return y(e,p.Z.STRING)}(t):n===p.Z.BOOLEAN?function(e){if("boolean"!=typeof e)return y(e,p.Z.BOOLEAN)}(t):n===p.Z.ENUM?function(e,t){const n=typeof e;if((0,l.Z)(t))return"string"===n&&(0,l.Z)(t.valuesByName[e])?void 0:`value ${e} is not a valid enum name for ${t.id}`}(t,a):function(e,t,n){const i=typeof e;switch(t){case m.Z.INT8:case m.Z.UINT8:case m.Z.INT16:case m.Z.UINT16:case m.Z.INT32:case m.Z.UINT32:case m.Z.FLOAT32:case m.Z.FLOAT64:return"number"!==i?y(e,t):isFinite(e)?v(e,t,n):A(e,t);case m.Z.INT64:case m.Z.UINT64:return"number"!==i&&"bigint"!==i?y(e,t):"number"!==i||isFinite(e)?v(e,t,n):A(e,t)}}(t,s,c)}function y(e,t){return`value ${e} does not match type ${t}`}function b(e,t,n){let i=`value ${e} is out of range for type ${t}`;return n&&(i+=" (normalized)"),i}function v(e,t,n){return n?e<(m.Z.isUnsignedIntegerType(t)?0:-1)||e>1?b(e,t,n):void 0:e<m.Z.getMinimum(t)||e>m.Z.getMaximum(t)?b(e,t,n):void 0}function A(e,t){return`value ${e} of type ${t} must be finite`}function T(e,t,n){if(!Array.isArray(e))return n(e,t);for(let i=0;i<e.length;i++)e[i]=T(e[i],t,n);return e}_.fromJson=function(e){const t=(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT)).id,n=e.property;s.Z.typeOf.string("options.id",t),s.Z.typeOf.object("options.property",n),s.Z.typeOf.string("options.property.type",n.type);const i=function(e){if("ARRAY"===e.type)return!0;const t=e.type;return t!==p.Z.SCALAR&&!p.Z.isMatrixType(t)&&!p.Z.isVectorType(t)&&(!!(0,l.Z)(m.Z[t])||!((0,l.Z)(e.noData)||(0,l.Z)(e.scale)||(0,l.Z)(e.offset)||(0,l.Z)(e.required)||(0,l.Z)(e.count)||(0,l.Z)(e.array))&&(!(0,l.Z)(e.optional)&&void 0))}(n),o=function(e,t){const n=e.type,i=e.componentType,o="ARRAY"===n;let r,s,a,c;if(o?(r=!0,s=e.componentCount,a=!(0,l.Z)(s)):e.array?(r=!0,s=e.count,a=!(0,l.Z)(e.count)):(r=!1,s=void 0,a=!1),(0,l.Z)(e.enumType)&&(c=t[e.enumType]),n===p.Z.ENUM)return{type:n,componentType:void 0,enumType:c,valueType:c.valueType,isArray:r,isVariableLengthArray:a,arrayLength:s};if(o&&i===p.Z.ENUM)return{type:i,componentType:void 0,enumType:c,valueType:c.valueType,isArray:r,isVariableLengthArray:a,arrayLength:s};if(n===p.Z.SCALAR||p.Z.isMatrixType(n)||p.Z.isVectorType(n))return{type:n,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:a,arrayLength:s};if(n===p.Z.BOOLEAN||n===p.Z.STRING)return{type:n,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:a,arrayLength:s};if(o&&(i===p.Z.BOOLEAN||i===p.Z.STRING))return{type:i,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:a,arrayLength:s};if((0,l.Z)(i)&&(0,l.Z)(m.Z[i]))return{type:p.Z.SCALAR,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:a,arrayLength:s};if((0,l.Z)(m.Z[n]))return{type:p.Z.SCALAR,componentType:n,enumType:void 0,valueType:n,isArray:r,isVariableLengthArray:a,arrayLength:s};throw new u.Z(`unknown metadata type {type: ${n}, componentType: ${i})`)}(n,e.enums);let r;return r=!!(0,l.Z)(i)&&(i?!(0,l.Z)(n.optional)||!n.optional:(0,c.Z)(n.required,!1)),new _({id:t,type:o.type,componentType:o.componentType,enumType:o.enumType,isArray:o.isArray,isVariableLengthArray:o.isVariableLengthArray,arrayLength:o.arrayLength,normalized:n.normalized,min:n.min,max:n.max,offset:n.offset,scale:n.scale,noData:n.noData,default:n.default,required:r,name:n.name,description:n.description,semantic:n.semantic,extras:n.extras,extensions:n.extensions,isLegacyExtension:i})},Object.defineProperties(_.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},type:{get:function(){return this._type}},enumType:{get:function(){return this._enumType}},componentType:{get:function(){return this._componentType}},valueType:{get:function(){return this._valueType}},isArray:{get:function(){return this._isArray}},isVariableLengthArray:{get:function(){return this._isVariableLengthArray}},arrayLength:{get:function(){return this._arrayLength}},normalized:{get:function(){return this._normalized}},max:{get:function(){return this._max}},min:{get:function(){return this._min}},noData:{get:function(){return this._noData}},default:{get:function(){return this._default}},required:{get:function(){return this._required}},semantic:{get:function(){return this._semantic}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),_.prototype.normalize=function(e){return this._normalized?T(e,this._valueType,m.Z.normalize):e},_.prototype.unnormalize=function(e){return this._normalized?T(e,this._valueType,m.Z.unnormalize):e},_.prototype.applyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:_.valueTransformInPlace(e,this._offset,this._scale,m.Z.applyValueTransform)},_.prototype.unapplyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:_.valueTransformInPlace(e,this._offset,this._scale,m.Z.unapplyValueTransform)},_.prototype.expandConstant=function(e,t){t=(0,c.Z)(t,!1);const n=this._isArray,i=this._arrayLength,o=p.Z.getComponentCount(this._type),r=n&&o>1;if(!n&&1===o)return e;if(!n)return new Array(o).fill(e);if(!r)return new Array(i).fill(e);if(!t)return new Array(this._arrayLength*o).fill(e);const s=new Array(o).fill(e);return new Array(this._arrayLength).fill(s)},_.prototype.handleNoData=function(e){const t=this._noData;return(0,l.Z)(t)&&g(e,t)?void 0:e},_.prototype.unpackVectorAndMatrixTypes=function(e,t){t=(0,c.Z)(t,!1);const n=p.Z.getMathType(this._type),i=this._isArray,o=p.Z.getComponentCount(this._type),r=i&&o>1;return(0,l.Z)(n)?t&&r?e.map((function(e){return n.unpack(e)})):i?n.unpackArray(e):n.unpack(e):e},_.prototype.packVectorAndMatrixTypes=function(e,t){t=(0,c.Z)(t,!1);const n=p.Z.getMathType(this._type),i=this._isArray,o=p.Z.getComponentCount(this._type),r=i&&o>1;return(0,l.Z)(n)?t&&r?e.map((function(e){return n.pack(e,[])})):i?n.packArray(e,[]):n.pack(e,[]):e},_.prototype.validate=function(e){if((0,l.Z)(e)||!(0,l.Z)(this._default))return this._required&&!(0,l.Z)(e)?"required property must have a value":this._isArray?function(e,t){if(!Array.isArray(t))return`value ${t} must be an array`;const n=t.length;if(!e._isVariableLengthArray&&n!==e._arrayLength)return"Array length does not match property.arrayLength";for(let i=0;i<n;i++){const n=Z(e,t[i]);if((0,l.Z)(n))return n}}(this,e):Z(this,e)},_.valueTransformInPlace=function(e,t,n,i){if(!Array.isArray(e))return i(e,t,n);for(let o=0;o<e.length;o++)e[o]=_.valueTransformInPlace(e[o],t[o],n[o],i);return e};const w=_},832670:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(344485),o=n(790087),r=n(449809),s=n(765153),a=n(95296);const c={INT8:"INT8",UINT8:"UINT8",INT16:"INT16",UINT16:"UINT16",INT32:"INT32",UINT32:"UINT32",INT64:"INT64",UINT64:"UINT64",FLOAT32:"FLOAT32",FLOAT64:"FLOAT64",getMinimum:function(e){switch(o.Z.typeOf.string("type",e),e){case c.INT8:return-128;case c.UINT8:return 0;case c.INT16:return-32768;case c.UINT16:return 0;case c.INT32:return-2147483648;case c.UINT32:return 0;case c.INT64:return a.Z.supportsBigInt()?BigInt("-9223372036854775808"):-Math.pow(2,63);case c.UINT64:return a.Z.supportsBigInt()?BigInt(0):0;case c.FLOAT32:return-34028234663852886e22;case c.FLOAT64:return-Number.MAX_VALUE}},getMaximum:function(e){switch(o.Z.typeOf.string("type",e),e){case c.INT8:return 127;case c.UINT8:return 255;case c.INT16:return 32767;case c.UINT16:return 65535;case c.INT32:return 2147483647;case c.UINT32:return 4294967295;case c.INT64:return a.Z.supportsBigInt()?BigInt("9223372036854775807"):Math.pow(2,63)-1;case c.UINT64:return a.Z.supportsBigInt()?BigInt("18446744073709551615"):Math.pow(2,64)-1;case c.FLOAT32:return 34028234663852886e22;case c.FLOAT64:return Number.MAX_VALUE}},isIntegerType:function(e){switch(o.Z.typeOf.string("type",e),e){case c.INT8:case c.UINT8:case c.INT16:case c.UINT16:case c.INT32:case c.UINT32:case c.INT64:case c.UINT64:return!0;default:return!1}},isUnsignedIntegerType:function(e){switch(o.Z.typeOf.string("type",e),e){case c.UINT8:case c.UINT16:case c.UINT32:case c.UINT64:return!0;default:return!1}},isVectorCompatible:function(e){switch(o.Z.typeOf.string("type",e),e){case c.INT8:case c.UINT8:case c.INT16:case c.UINT16:case c.INT32:case c.UINT32:case c.FLOAT32:case c.FLOAT64:return!0;default:return!1}},normalize:function(e,t){if("number"!=typeof e&&"bigint"!=typeof e)throw new s.Z("value must be a number or a BigInt");if(!c.isIntegerType(t))throw new s.Z("type must be an integer type");return Math.max(Number(e)/Number(c.getMaximum(t)),-1)},unnormalize:function(e,t){if(o.Z.typeOf.number("value",e),!c.isIntegerType(t))throw new s.Z("type must be an integer type");const n=c.getMaximum(t),r=c.isUnsignedIntegerType(t)?0:-n;return e=i.Z.sign(e)*Math.round(Math.abs(e)*Number(n)),t!==c.INT64&&t!==c.UINT64||!a.Z.supportsBigInt()||(e=BigInt(e)),e>n?n:e<r?r:e},applyValueTransform:function(e,t,n){return n*e+t},unapplyValueTransform:function(e,t,n){return 0===n?0:(e-t)/n},getSizeInBytes:function(e){switch(o.Z.typeOf.string("type",e),e){case c.INT8:case c.UINT8:return 1;case c.INT16:case c.UINT16:return 2;case c.INT32:case c.UINT32:return 4;case c.INT64:case c.UINT64:return 8;case c.FLOAT32:return 4;case c.FLOAT64:return 8}},fromComponentDatatype:function(e){switch(o.Z.typeOf.number("componentDatatype",e),e){case r.Z.BYTE:return c.INT8;case r.Z.UNSIGNED_BYTE:return c.UINT8;case r.Z.SHORT:return c.INT16;case r.Z.UNSIGNED_SHORT:return c.UINT16;case r.Z.INT:return c.INT32;case r.Z.UNSIGNED_INT:return c.UINT32;case r.Z.FLOAT:return c.FLOAT32;case r.Z.DOUBLE:return c.FLOAT64}},toComponentDatatype:function(e){switch(o.Z.typeOf.string("type",e),e){case c.INT8:return r.Z.BYTE;case c.UINT8:return r.Z.UNSIGNED_BYTE;case c.INT16:return r.Z.SHORT;case c.UINT16:return r.Z.UNSIGNED_SHORT;case c.INT32:return r.Z.INT;case c.UINT32:return r.Z.UNSIGNED_INT;case c.FLOAT32:return r.Z.FLOAT;case c.FLOAT64:return r.Z.DOUBLE}}},l=Object.freeze(c)},529394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(823438),r=n(11020),s=n(765153);function a(){}Object.defineProperties(a.prototype,{class:{get:function(){s.Z.throwInstantiationError()}}}),a.prototype.hasProperty=function(e){s.Z.throwInstantiationError()},a.prototype.hasPropertyBySemantic=function(e){s.Z.throwInstantiationError()},a.prototype.getPropertyIds=function(e){s.Z.throwInstantiationError()},a.prototype.getProperty=function(e){s.Z.throwInstantiationError()},a.prototype.setProperty=function(e,t){s.Z.throwInstantiationError()},a.prototype.getPropertyBySemantic=function(e){s.Z.throwInstantiationError()},a.prototype.setPropertyBySemantic=function(e,t){s.Z.throwInstantiationError()},a.hasProperty=function(e,t,n){if(i.Z.typeOf.string("propertyId",e),i.Z.typeOf.object("properties",t),i.Z.typeOf.object("classDefinition",n),(0,r.Z)(t[e]))return!0;const o=n.properties;if(!(0,r.Z)(o))return!1;const s=o[e];return!(!(0,r.Z)(s)||!(0,r.Z)(s.default))},a.hasPropertyBySemantic=function(e,t,n){i.Z.typeOf.string("semantic",e),i.Z.typeOf.object("properties",t),i.Z.typeOf.object("classDefinition",n);const o=n.propertiesBySemantic;if(!(0,r.Z)(o))return!1;const s=o[e];return(0,r.Z)(s)},a.getPropertyIds=function(e,t,n){i.Z.typeOf.object("properties",e),i.Z.typeOf.object("classDefinition",t),(n=(0,r.Z)(n)?n:[]).length=0;for(const t in e)e.hasOwnProperty(t)&&(0,r.Z)(e[t])&&n.push(t);const o=t.properties;if((0,r.Z)(o))for(const t in o)o.hasOwnProperty(t)&&!(0,r.Z)(e[t])&&(0,r.Z)(o[t].default)&&n.push(t);return n},a.getProperty=function(e,t,n){if(i.Z.typeOf.string("propertyId",e),i.Z.typeOf.object("properties",t),i.Z.typeOf.object("classDefinition",n),!(0,r.Z)(n.properties[e]))throw new s.Z(`Class definition missing property ${e}`);const a=n.properties[e];let c=t[e];Array.isArray(c)&&(c=c.slice());const l=!0;return c=a.handleNoData(c),!(0,r.Z)(c)&&(0,r.Z)(a.default)?(c=(0,o.Z)(a.default,!0),a.unpackVectorAndMatrixTypes(c,l)):(0,r.Z)(c)?(c=a.normalize(c),c=a.applyValueTransform(c),a.unpackVectorAndMatrixTypes(c,l)):void 0},a.setProperty=function(e,t,n,o){if(i.Z.typeOf.string("propertyId",e),i.Z.defined("value",t),i.Z.typeOf.object("properties",n),i.Z.typeOf.object("classDefinition",o),!(0,r.Z)(n[e]))return!1;let s;Array.isArray(t)&&(t=t.slice());const a=o.properties;return(0,r.Z)(a)&&(s=a[e]),(0,r.Z)(s)&&(t=s.packVectorAndMatrixTypes(t,!0),t=s.unapplyValueTransform(t),t=s.unnormalize(t)),n[e]=t,!0},a.getPropertyBySemantic=function(e,t,n){i.Z.typeOf.string("semantic",e),i.Z.typeOf.object("properties",t),i.Z.typeOf.object("classDefinition",n);const o=n.propertiesBySemantic;if(!(0,r.Z)(o))return;const s=o[e];return(0,r.Z)(s)?a.getProperty(s.id,t,n):void 0},a.setPropertyBySemantic=function(e,t,n,o){i.Z.typeOf.string("semantic",e),i.Z.defined("value",t),i.Z.typeOf.object("properties",n),i.Z.typeOf.object("classDefinition",o);const s=o.propertiesBySemantic;if(!(0,r.Z)(s))return!1;const c=o.propertiesBySemantic[e];return!!(0,r.Z)(c)&&a.setProperty(c.id,t,n,o)};const c=a},868129:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(790087),o=n(823438),r=n(234146),s=n(700627),a=n(832670);function c(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).id,n=e.values;i.Z.typeOf.string("options.id",t),i.Z.defined("options.values",n);const s={},c={},l=n.length;for(let e=0;e<l;++e){const t=n[e];s[t.value]=t.name,c[t.name]=t.value}const u=(0,r.Z)(e.valueType,a.Z.UINT16);this._values=n,this._namesByValue=s,this._valuesByName=c,this._valueType=u,this._id=t,this._name=e.name,this._description=e.description,this._extras=(0,o.Z)(e.extras,!0),this._extensions=(0,o.Z)(e.extensions,!0)}c.fromJson=function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).id,n=e.enum;return i.Z.typeOf.string("options.id",t),i.Z.typeOf.object("options.enum",n),new c({id:t,values:n.values.map((function(e){return s.Z.fromJson(e)})),valueType:a.Z[n.valueType],name:n.name,description:n.description,extras:n.extras,extensions:n.extensions})},Object.defineProperties(c.prototype,{values:{get:function(){return this._values}},namesByValue:{get:function(){return this._namesByValue}},valuesByName:{get:function(){return this._valuesByName}},valueType:{get:function(){return this._valueType}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const l=c},700627:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(823438),r=n(234146);function s(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).value,n=e.name;i.Z.typeOf.number("options.value",t),i.Z.typeOf.string("options.name",n),this._value=t,this._name=n,this._description=e.description,this._extras=(0,o.Z)(e.extras,!0),this._extensions=(0,o.Z)(e.extensions,!0)}s.fromJson=function(e){return i.Z.typeOf.object("value",e),new s({value:e.value,name:e.name,description:e.description,extras:e.extras,extensions:e.extensions})},Object.defineProperties(s.prototype,{value:{get:function(){return this._value}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const a=s},640397:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(790087),o=n(823438),r=n(234146),s=n(11020),a=n(943881),c=n(868129);function l(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT);const t=(0,r.Z)(e.classes,{}),n=(0,r.Z)(e.enums,{});this._classes=t,this._enums=n,this._id=e.id,this._name=e.name,this._description=e.description,this._version=e.version,this._extras=(0,o.Z)(e.extras,!0),this._extensions=(0,o.Z)(e.extensions,!0)}l.fromJson=function(e){i.Z.typeOf.object("schema",e);const t={};if((0,s.Z)(e.enums))for(const n in e.enums)e.enums.hasOwnProperty(n)&&(t[n]=c.Z.fromJson({id:n,enum:e.enums[n]}));const n={};if((0,s.Z)(e.classes))for(const i in e.classes)e.classes.hasOwnProperty(i)&&(n[i]=a.Z.fromJson({id:i,class:e.classes[i],enums:t}));return new l({id:e.id,name:e.name,description:e.description,version:e.version,classes:n,enums:t,extras:e.extras,extensions:e.extensions})},Object.defineProperties(l.prototype,{classes:{get:function(){return this._classes}},enums:{get:function(){return this._enums}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},version:{get:function(){return this._version}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const u=l},756366:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(234146),o=n(11020),r=n(765153),s=n(640397),a=n(757587),c=n(897955);function l(e){const t=(e=(0,i.Z)(e,i.Z.EMPTY_OBJECT)).schema,n=e.resource,a=e.cacheKey;if((0,o.Z)(t)===(0,o.Z)(n))throw new r.Z("One of options.schema and options.resource must be defined.");this._schema=(0,o.Z)(t)?s.Z.fromJson(t):void 0,this._resource=n,this._cacheKey=a,this._state=c.Z.UNLOADED,this._promise=void 0}(0,o.Z)(Object.create)&&(l.prototype=Object.create(a.Z.prototype),l.prototype.constructor=l),Object.defineProperties(l.prototype,{cacheKey:{get:function(){return this._cacheKey}},schema:{get:function(){return this._schema}}}),l.prototype.load=async function(){return(0,o.Z)(this._promise)?this._promise:(0,o.Z)(this._schema)?(this._promise=Promise.resolve(this),this._promise):(this._promise=async function(e){const t=e._resource;e._state=c.Z.LOADING;try{const n=await t.fetchJson();if(e.isDestroyed())return;return e._schema=s.Z.fromJson(n),e._state=c.Z.READY,e}catch(n){if(e.isDestroyed())return;e._state=c.Z.FAILED;const i=`Failed to load schema: ${t.url}`;throw e.getError(i,n)}}(this),this._promise)},l.prototype.unload=function(){this._schema=void 0};const u=l},817787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({ID:"ID",NAME:"NAME",DESCRIPTION:"DESCRIPTION",TILESET_TILE_COUNT:"TILESET_TILE_COUNT",TILE_BOUNDING_BOX:"TILE_BOUNDING_BOX",TILE_BOUNDING_REGION:"TILE_BOUNDING_REGION",TILE_BOUNDING_SPHERE:"TILE_BOUNDING_SPHERE",TILE_MINIMUM_HEIGHT:"TILE_MINIMUM_HEIGHT",TILE_MAXIMUM_HEIGHT:"TILE_MAXIMUM_HEIGHT",TILE_HORIZON_OCCLUSION_POINT:"TILE_HORIZON_OCCLUSION_POINT",TILE_GEOMETRIC_ERROR:"TILE_GEOMETRIC_ERROR",CONTENT_BOUNDING_BOX:"CONTENT_BOUNDING_BOX",CONTENT_BOUNDING_REGION:"CONTENT_BOUNDING_REGION",CONTENT_BOUNDING_SPHERE:"CONTENT_BOUNDING_SPHERE",CONTENT_MINIMUM_HEIGHT:"CONTENT_MINIMUM_HEIGHT",CONTENT_MAXIMUM_HEIGHT:"CONTENT_MAXIMUM_HEIGHT",CONTENT_HORIZON_OCCLUSION_POINT:"CONTENT_HORIZON_OCCLUSION_POINT"})},878942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(790087),o=n(823438),r=n(234146),s=n(11020),a=n(529394),c=n(62935);function l(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).count,n=e.class;i.Z.typeOf.number.greaterThan("options.count",t,0),i.Z.typeOf.object("options.class",n);let o=0;const a={};if((0,s.Z)(e.properties))for(const i in e.properties)if(e.properties.hasOwnProperty(i)){const r=new c.Z({count:t,property:e.properties[i],classProperty:n.properties[i],bufferViews:e.bufferViews});a[i]=r,o+=r.byteLength}this._count=t,this._class=n,this._properties=a,this._byteLength=o}Object.defineProperties(l.prototype,{count:{get:function(){return this._count}},class:{get:function(){return this._class}},byteLength:{get:function(){return this._byteLength}}}),l.prototype.hasProperty=function(e){return a.Z.hasProperty(e,this._properties,this._class)},l.prototype.hasPropertyBySemantic=function(e){return a.Z.hasPropertyBySemantic(e,this._properties,this._class)},l.prototype.getPropertyIds=function(e){return a.Z.getPropertyIds(this._properties,this._class,e)},l.prototype.getProperty=function(e,t){i.Z.typeOf.string("propertyId",t);const n=this._properties[t];let r;return r=(0,s.Z)(n)?n.get(e):function(e,t){const n=e.properties;if(!(0,s.Z)(n))return;const i=n[t];if((0,s.Z)(i)&&(0,s.Z)(i.default)){let e=i.default;return i.isArray&&(e=(0,o.Z)(e,!0)),e=i.normalize(e),i.unpackVectorAndMatrixTypes(e)}}(this._class,t),r},l.prototype.setProperty=function(e,t,n){i.Z.typeOf.string("propertyId",t);const o=this._properties[t];return!!(0,s.Z)(o)&&(o.set(e,n),!0)},l.prototype.getPropertyBySemantic=function(e,t){let n;i.Z.typeOf.string("semantic",t);const o=this._class.propertiesBySemantic;if((0,s.Z)(o)&&(n=o[t]),(0,s.Z)(n))return this.getProperty(e,n.id)},l.prototype.setPropertyBySemantic=function(e,t,n){let o;i.Z.typeOf.string("semantic",t);const r=this._class.propertiesBySemantic;return(0,s.Z)(r)&&(o=r[t]),!!(0,s.Z)(o)&&this.setProperty(e,o.id,n)},l.prototype.getPropertyTypedArray=function(e){i.Z.typeOf.string("propertyId",e);const t=this._properties[e];if((0,s.Z)(t))return t.getTypedArray()},l.prototype.getPropertyTypedArrayBySemantic=function(e){let t;i.Z.typeOf.string("semantic",e);const n=this._class.propertiesBySemantic;if((0,s.Z)(n)&&(t=n[e]),(0,s.Z)(t))return this.getPropertyTypedArray(t.id)};const u=l},62935:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(790087),o=n(823438),r=n(449809),s=n(234146),a=n(11020),c=n(765153),l=n(95296),u=n(932799),d=n(590292),h=n(832670),f=n(132866),p=n(784246);function m(e){const t=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).count,n=e.property,o=e.classProperty,r=e.bufferViews;i.Z.typeOf.number.greaterThan("options.count",t,0),i.Z.typeOf.object("options.property",n),i.Z.typeOf.object("options.classProperty",o),i.Z.typeOf.object("options.bufferViews",r);const c=o.type,l=o.isArray,d=o.isVariableLengthArray;let f=o.valueType;const m=o.enumType,g=c===p.Z.STRING,Z=c===p.Z.BOOLEAN;let y,b=0;if(d){let e=(0,s.Z)(n.arrayOffsetType,n.offsetType);e=(0,s.Z)(h.Z[e],h.Z.UINT32),y=new v(r[(0,s.Z)(n.arrayOffsets,n.arrayOffsetBufferView)],e,t+1),b+=y.typedArray.byteLength}const A=p.Z.getComponentCount(c);let T;T=d?y.get(t)-y.get(0):l?t*o.arrayLength:t;const w=A*T;let E,S;if(g){let e=(0,s.Z)(n.stringOffsetType,n.offsetType);e=(0,s.Z)(h.Z[e],h.Z.UINT32),E=new v(r[(0,s.Z)(n.stringOffsets,n.stringOffsetBufferView)],e,w+1),b+=E.typedArray.byteLength}(g||Z)&&(f=h.Z.UINT8),S=g?E.get(w)-E.get(0):Z?Math.ceil(w/8):w;const C=new v(r[(0,s.Z)(n.values,n.bufferView)],f,S);b+=C.typedArray.byteLength;let x=n.offset,I=n.scale;const P=o.hasValueTransform||(0,a.Z)(x)||(0,a.Z)(I);let D,O;x=(0,s.Z)(x,o.offset),I=(0,s.Z)(I,o.scale),x=_(x),I=_(I);const L=this;g?D=function(e){return function(e,t,n){const i=n.get(e),o=n.get(e+1)-i;return(0,u.Z)(t.typedArray,i,o)}(e,L._values,L._stringOffsets)}:Z?(D=function(e){return function(e,t){const n=e>>3,i=e%8;return 1==(t.typedArray[n]>>i&1)}(e,L._values)},O=function(e,t){!function(e,t,n){const i=e>>3,o=e%8;n?t.typedArray[i]|=1<<o:t.typedArray[i]&=~(1<<o)}(e,L._values,t)}):(0,a.Z)(m)?(D=function(e){const t=L._values.get(e);return m.namesByValue[t]},O=function(e,t){const n=m.valuesByName[t];L._values.set(e,n)}):(D=function(e){return L._values.get(e)},O=function(e,t){L._values.set(e,t)}),this._arrayOffsets=y,this._stringOffsets=E,this._values=C,this._classProperty=o,this._count=t,this._vectorComponentCount=A,this._min=n.min,this._max=n.max,this._offset=x,this._scale=I,this._hasValueTransform=P,this._getValue=D,this._setValue=O,this._unpackedValues=void 0,this._extras=n.extras,this._extensions=n.extensions,this._byteLength=b}function _(e){if(!Array.isArray(e))return e;const t=[];for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}function g(e,t){const n=e._count;if(!(0,a.Z)(t)||t<0||t>=n){const e=n-1;throw new c.Z(`index is required and between zero and count - 1. Actual value: ${e}`)}}function Z(e,t,n){let i,o;if(t.isVariableLengthArray){i=e._arrayOffsets.get(n),o=e._arrayOffsets.get(n+1)-i;const r=p.Z.getComponentCount(t.type);i*=r,o*=r}else{const r=(0,s.Z)(t.arrayLength,1)*e._vectorComponentCount;i=n*r,o=r}const r=new Array(o);for(let t=0;t<o;t++)r[t]=e._getValue(i+t);return r}function y(e){if((0,a.Z)(e._unpackedValues))return!1;const t=e._classProperty,n=t.type,i=t.valueType;return n===p.Z.STRING||i===h.Z.INT64&&!l.Z.supportsBigInt64Array()||i===h.Z.UINT64&&!l.Z.supportsBigUint64Array()}function b(e){e._unpackedValues=function(e){const t=e._count,n=new Array(t),i=e._classProperty,o=i.isArray,r=i.type,s=p.Z.getComponentCount(r);if(!o&&1===s){for(let i=0;i<t;++i)n[i]=e._getValue(i);return n}for(let o=0;o<t;o++)n[o]=Z(e,i,o);return n}(e),e._arrayOffsets=void 0,e._stringOffsets=void 0,e._values=void 0}function v(e,t,n){const i=this;let o,s,c;if(t===h.Z.INT64)l.Z.supportsBigInt()?l.Z.supportsBigInt64Array()?(o=new BigInt64Array(e.buffer,e.byteOffset,n),c=function(e,t){i.typedArray[e]=BigInt(t)}):(o=new Uint8Array(e.buffer,e.byteOffset,8*n),s=function(e){return function(e,t){const n=t.dataView,i=8*e;let o=BigInt(0);const r=(128&n.getUint8(i+7))>0;let s=!0;for(let e=0;e<8;++e){let t=n.getUint8(i+e);r&&(s?0!==t&&(t=255&~(t-1),s=!1):t=255&~t),o+=BigInt(t)*(BigInt(1)<<BigInt(8*e))}return r&&(o=-o),o}(e,i)}):((0,d.Z)("INT64 type is not fully supported on this platform. Values greater than 2^53 - 1 or less than -(2^53 - 1) may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,8*n),s=function(e){return function(e,t){const n=t.dataView,i=8*e;let o=0;const r=(128&n.getUint8(i+7))>0;let s=!0;for(let e=0;e<8;++e){let t=n.getUint8(i+e);r&&(s?0!==t&&(t=255&~(t-1),s=!1):t=255&~t),o+=t*Math.pow(256,e)}return r&&(o=-o),o}(e,i)});else if(t===h.Z.UINT64)l.Z.supportsBigInt()?l.Z.supportsBigUint64Array()?(o=new BigUint64Array(e.buffer,e.byteOffset,n),c=function(e,t){i.typedArray[e]=BigInt(t)}):(o=new Uint8Array(e.buffer,e.byteOffset,8*n),s=function(e){return function(e,t){const n=t.dataView,i=8*e,o=BigInt(n.getUint32(i,!0)),r=BigInt(n.getUint32(i+4,!0));return o+BigInt(4294967296)*r}(e,i)}):((0,d.Z)("UINT64 type is not fully supported on this platform. Values greater than 2^53 - 1 may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,8*n),s=function(e){return function(e,t){const n=t.dataView,i=8*e;return n.getUint32(i,!0)+4294967296*n.getUint32(i+4,!0)}(e,i)});else{const s=function(e){switch(e){case h.Z.INT8:return r.Z.BYTE;case h.Z.UINT8:return r.Z.UNSIGNED_BYTE;case h.Z.INT16:return r.Z.SHORT;case h.Z.UINT16:return r.Z.UNSIGNED_SHORT;case h.Z.INT32:return r.Z.INT;case h.Z.UINT32:return r.Z.UNSIGNED_INT;case h.Z.FLOAT32:return r.Z.FLOAT;case h.Z.FLOAT64:return r.Z.DOUBLE}}(t);o=r.Z.createArrayBufferView(s,e.buffer,e.byteOffset,n),c=function(e,t){i.typedArray[e]=t}}(0,a.Z)(s)||(s=function(e){return i.typedArray[e]}),this.typedArray=o,this.dataView=new DataView(o.buffer,o.byteOffset),this.get=s,this.set=c,this._componentType=t}Object.defineProperties(m.prototype,{hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){return this._byteLength}}}),m.prototype.get=function(e){g(this,e);let t=function(e,t){y(e)&&b(e);const n=e._classProperty,i=n.isArray,r=n.type,s=p.Z.getComponentCount(r);if((0,a.Z)(e._unpackedValues)){const n=e._unpackedValues[t];return i?(0,o.Z)(n,!0):n}return i||1!==s?Z(e,n,t):e._getValue(t)}(this,e);return t=this._classProperty.handleNoData(t),(0,a.Z)(t)?(t=this._classProperty.normalize(t),t=function(e,t){const n=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||n?t:f.Z.valueTransformInPlace(t,e._offset,e._scale,h.Z.applyValueTransform)}(this,t),this._classProperty.unpackVectorAndMatrixTypes(t)):(t=this._classProperty.default,this._classProperty.unpackVectorAndMatrixTypes(t))},m.prototype.set=function(e,t){const n=this._classProperty;i.Z.defined("value",t),g(this,e);const r=n.validate(t);if((0,a.Z)(r))throw new c.Z(r);t=function(e,t){const n=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||n?t:f.Z.valueTransformInPlace(t,e._offset,e._scale,h.Z.unapplyValueTransform)}(this,t=n.packVectorAndMatrixTypes(t)),function(e,t,n){(function(e,t,n){if(y(e))return!0;const i=e._arrayOffsets;return!(!(0,a.Z)(i)||i.get(t+1)-i.get(t)===n.length)})(e,t,n)&&b(e);const i=e._classProperty,r=i.isArray,c=i.type,l=p.Z.getComponentCount(c);if((0,a.Z)(e._unpackedValues))return i.isArray&&(n=(0,o.Z)(n,!0)),void(e._unpackedValues[t]=n);if(!r&&1===l)return void e._setValue(t,n);let u,d;if(i.isVariableLengthArray)u=e._arrayOffsets.get(t),d=e._arrayOffsets.get(t+1)-u;else{const n=(0,s.Z)(i.arrayLength,1)*e._vectorComponentCount;u=t*n,d=n}for(let t=0;t<d;++t)e._setValue(u+t,n[t])}(this,e,t=n.unnormalize(t))},m.prototype.getTypedArray=function(){if((0,a.Z)(this._values))return this._values.typedArray};const A=m},784246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(790087),o=n(405254),r=n(660904),s=n(798336),a=n(765153),c=n(571945),l=n(664288),u=n(659635);const d={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",BOOLEAN:"BOOLEAN",STRING:"STRING",ENUM:"ENUM",isVectorType:function(e){switch(i.Z.typeOf.string("type",e),e){case d.VEC2:case d.VEC3:case d.VEC4:return!0;default:return!1}},isMatrixType:function(e){switch(i.Z.typeOf.string("type",e),e){case d.MAT2:case d.MAT3:case d.MAT4:return!0;default:return!1}},getComponentCount:function(e){switch(i.Z.typeOf.string("type",e),e){case d.SCALAR:case d.STRING:case d.ENUM:case d.BOOLEAN:return 1;case d.VEC2:return 2;case d.VEC3:return 3;case d.VEC4:case d.MAT2:return 4;case d.MAT3:return 9;case d.MAT4:return 16;default:throw new a.Z(`Invalid metadata type ${e}`)}},getMathType:function(e){switch(e){case d.VEC2:return o.Z;case d.VEC3:return r.Z;case d.VEC4:return s.Z;case d.MAT2:return c.Z;case d.MAT3:return l.Z;case d.MAT4:return u.Z;default:return}}},h=Object.freeze(d)},443674:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(234146),o=n(11020),r=n(245929),s=n(973591),a=n(431056);const c={name:"AlphaPipelineStage",process:function(e,t,n){const c=e.alphaOptions,l=e.model;c.pass=(0,i.Z)(c.pass,l.opaquePass);const u=e.renderStateOptions;c.pass===a.Z.TRANSLUCENT&&(u.cull.enabled=!1,u.depthMask=!1,u.blending=s.Z.ALPHA_BLEND);const d=e.shaderBuilder,h=e.uniformMap;(0,o.Z)(c.alphaCutoff)&&(d.addDefine("ALPHA_MODE_MASK",void 0,r.Z.FRAGMENT),d.addUniform("float","u_alphaCutoff",r.Z.FRAGMENT),h.u_alphaCutoff=function(){return c.alphaCutoff})}}},381009:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(418371),o=n(287043),r=n(660904),s=n(179869),a=n(790087),c=n(449809),l=n(234146),u=n(11020),d=n(764172),h=n(272424),f=n(659635),p=n(943881),m=n(583982),_=n(708956),g=n(943618),Z=n(600959),y=n(757587),b=n(677684);const v=m.Z.FeatureIdAttribute;function A(e){const t=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).b3dmResource;let n=e.baseResource;const o=e.arrayBuffer,r=(0,l.Z)(e.byteOffset,0),s=(0,l.Z)(e.releaseGltfJson,!1),c=(0,l.Z)(e.asynchronous,!0),d=(0,l.Z)(e.incrementallyLoadTextures,!0),h=(0,l.Z)(e.upAxis,i.Z.Y),p=(0,l.Z)(e.forwardAxis,i.Z.X),m=(0,l.Z)(e.loadAttributesAsTypedArray,!1),_=(0,l.Z)(e.loadAttributesFor2D,!1),g=(0,l.Z)(e.loadIndicesForWireframe,!1),Z=(0,l.Z)(e.loadPrimitiveOutline,!0),y=(0,l.Z)(e.loadForClassification,!1);a.Z.typeOf.object("options.b3dmResource",t),a.Z.typeOf.object("options.arrayBuffer",o),n=(0,u.Z)(n)?n:t.clone(),this._b3dmResource=t,this._baseResource=n,this._arrayBuffer=o,this._byteOffset=r,this._releaseGltfJson=s,this._asynchronous=c,this._incrementallyLoadTextures=d,this._upAxis=h,this._forwardAxis=p,this._loadAttributesAsTypedArray=m,this._loadAttributesFor2D=_,this._loadIndicesForWireframe=g,this._loadPrimitiveOutline=Z,this._loadForClassification=y,this._state=0,this._promise=void 0,this._gltfLoader=void 0,this._batchLength=0,this._propertyTable=void 0,this._batchTable=void 0,this._components=void 0,this._transform=f.Z.IDENTITY}function T(e){const t=e.children.length;for(let n=0;n<t;n++)T(e.children[n]);const n=e.primitives.length;for(let t=0;t<n;t++){const n=e.primitives[t],i=_.Z.getAttributeBySemantic(n,b.Z.FEATURE_ID);if((0,u.Z)(i)){i.setIndex=0;const e=new v;e.propertyTableId=0,e.setIndex=0,e.positionalLabel="featureId_0",n.featureIds.push(e)}}}(0,u.Z)(Object.create)&&(A.prototype=Object.create(y.Z.prototype),A.prototype.constructor=A),Object.defineProperties(A.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),A.prototype.load=function(){if((0,u.Z)(this._promise))return this._promise;const e=o.Z.parse(this._arrayBuffer,this._byteOffset);let t=e.batchLength;const n=e.featureTableJson,i=e.featureTableBinary,a=e.batchTableJson,l=e.batchTableBinary,d=new s.Z(n,i);t=d.getGlobalProperty("BATCH_LENGTH"),this._batchLength=t;const p=d.getGlobalProperty("RTC_CENTER",c.Z.FLOAT,3);(0,u.Z)(p)&&(this._transform=f.Z.fromTranslation(r.Z.fromArray(p))),this._batchTable={json:a,binary:l};const m=new h.Z({typedArray:e.gltf,upAxis:this._upAxis,forwardAxis:this._forwardAxis,gltfResource:this._b3dmResource,baseResource:this._baseResource,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadAttributesFor2D:this._loadAttributesFor2D,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline,loadForClassification:this._loadForClassification,renameBatchIdSemantic:!0});this._gltfLoader=m,this._state=1;const _=this;return this._promise=m.load().then((function(){if(!_.isDestroyed())return _._state=2,_})).catch((function(e){if(!_.isDestroyed())return function(e,t){e.unload(),e._state=4;return t=e.getError("Failed to load b3dm",t),Promise.reject(t)}(_,e)})),this._promise},A.prototype.process=function(e){if(a.Z.typeOf.object("frameState",e),3===this._state)return!0;if(2!==this._state)return!1;if(!this._gltfLoader.process(e))return!1;const t=this._gltfLoader.components;return t.transform=f.Z.multiplyTransformation(this._transform,t.transform,t.transform),function(e,t){const n=e._batchTable,i=e._batchLength;if(0===i)return;let o;if((0,u.Z)(n.json))o=(0,g.Z)({count:i,batchTable:n.json,binaryBody:n.binary});else{const e=new Z.Z({name:p.Z.BATCH_TABLE_CLASS_NAME,count:i});o=new d.Z({schema:{},propertyTables:[e]})}const r=t.scene.nodes,s=r.length;for(let e=0;e<s;e++)T(r[e]);t.structuralMetadata=o}(this,t),this._components=t,this._arrayBuffer=void 0,this._state=3,!0},A.prototype.unload=function(){(0,u.Z)(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),this._components=void 0,this._arrayBuffer=void 0};const w=A},653384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(394579),o=n(234146);const r={name:"BatchTexturePipelineStage",process:function(e,t,n){const r=e.shaderBuilder,s={},a=e.model,c=a.featureTables[a.featureTableId],l=c.featuresLength;r.addUniform("int","model_featuresLength"),s.model_featuresLength=function(){return l};const u=c.batchTexture;r.addUniform("sampler2D","model_batchTexture"),s.model_batchTexture=function(){return(0,o.Z)(u.batchTexture,u.defaultTexture)},r.addUniform("vec4","model_textureStep"),s.model_textureStep=function(){return u.textureStep},u.textureDimensions.y>1&&(r.addDefine("MULTILINE_BATCH_TEXTURE"),r.addUniform("vec2","model_textureDimensions"),s.model_textureDimensions=function(){return u.textureDimensions}),e.uniformMap=(0,i.Z)(s,e.uniformMap)}}},922778:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(66990),o=n(713554),r=n(422039),s=n(11020),a=n(147714),c=n(431056),l=n(245929);const u={name:"CPUStylingPipelineStage",process:function(e,t,n){const u=e.model,d=e.shaderBuilder;d.addVertexLines(o.Z),d.addFragmentLines(r.Z),d.addDefine("USE_CPU_STYLING",void 0,l.Z.BOTH),(0,s.Z)(u.color)||(d.addUniform("float",a.Z.COLOR_BLEND_UNIFORM_NAME,l.Z.FRAGMENT),e.uniformMap[a.Z.COLOR_BLEND_UNIFORM_NAME]=function(){return i.Z.getColorBlend(u.colorBlendMode,u.colorBlendAmount)}),d.addUniform("bool","model_commandTranslucent",l.Z.BOTH),e.uniformMap.model_commandTranslucent=function(){return e.alphaOptions.pass===c.Z.TRANSLUCENT}}}},391639:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(762031),o=n(790087),r=n(234146),s=n(659635),a=n(661679),c=n(431056),l=n(417148),u=n(973591),d=n(203547),h=n(800640),f=n(822948),p=n(489709),m=n(721902);function _(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).command,n=e.primitiveRenderResources;o.Z.typeOf.object("options.command",t),o.Z.typeOf.object("options.primitiveRenderResources",n);const i=n.model;this._command=t,this._model=i,this._runtimePrimitive=n.runtimePrimitive,this._modelMatrix=t.modelMatrix,this._boundingVolume=t.boundingVolume,this._cullFace=t.renderState.cull.face;const s=i.classificationType;this._classificationType=s,this._classifiesTerrain=s!==d.Z.CESIUM_3D_TILE,this._classifies3DTiles=s!==d.Z.TERRAIN,this._useDebugWireframe=i._enableDebugWireframe&&i.debugWireframe,this._pickId=n.pickId,this._commandListTerrain=[],this._commandList3DTiles=[],this._commandListIgnoreShow=[],this._commandListDebugWireframe=[],this._commandListTerrainPicking=[],this._commandList3DTilesPicking=[],function(e){const t=e._command,n=y;if(e._useDebugWireframe){t.pass=c.Z.OPAQUE,n.length=0,n.push(t),e._commandListDebugWireframe=b(e,n,e._commandListDebugWireframe);const i=e._commandListDebugWireframe,o=i.length;for(let e=0;e<o;e++){const t=i[e];t.count*=2,t.offset*=2}return}const i=e.model.allowPicking;if(e._classifiesTerrain){const o=c.Z.TERRAIN_CLASSIFICATION,r=v(t,o),s=A(t,o);n.length=0,n.push(r,s),e._commandListTerrain=b(e,n,e._commandListTerrain),i&&(e._commandListTerrainPicking=w(e,n,e._commandListTerrainPicking))}if(e._classifies3DTiles){const o=c.Z.CESIUM_3D_TILE_CLASSIFICATION,r=v(t,o),s=A(t,o);n.length=0,n.push(r,s),e._commandList3DTiles=b(e,n,e._commandList3DTiles),i&&(e._commandList3DTilesPicking=w(e,n,e._commandList3DTilesPicking))}}(this)}const g={stencilTest:{enabled:!0,frontFunction:p.Z.NOT_EQUAL,frontOperation:{fail:m.Z.ZERO,zFail:m.Z.ZERO,zPass:m.Z.ZERO},backFunction:p.Z.NOT_EQUAL,backOperation:{fail:m.Z.ZERO,zFail:m.Z.ZERO,zPass:m.Z.ZERO},reference:0,mask:f.Z.CLASSIFICATION_MASK},stencilMask:f.Z.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:u.Z.PRE_MULTIPLIED_ALPHA_BLEND},Z={stencilTest:{enabled:!0,frontFunction:p.Z.NOT_EQUAL,frontOperation:{fail:m.Z.ZERO,zFail:m.Z.ZERO,zPass:m.Z.ZERO},backFunction:p.Z.NOT_EQUAL,backOperation:{fail:m.Z.ZERO,zFail:m.Z.ZERO,zPass:m.Z.ZERO},reference:0,mask:f.Z.CLASSIFICATION_MASK},stencilMask:f.Z.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},y=[];function b(e,t,n){const i=e._runtimePrimitive,o=i.batchLengths,r=i.batchOffsets,s=o.length,c=t.length;for(let e=0;e<s;e++){const i=o[e],s=r[e];for(let e=0;e<c;e++){const o=t[e],r=a.Z.shallowClone(o);r.count=i,r.offset=s,n.push(r)}}return n}function v(e,t){const n=a.Z.shallowClone(e);n.cull=!1,n.pass=t;const i={colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:o=t===c.Z.TERRAIN_CLASSIFICATION?p.Z.ALWAYS:p.Z.EQUAL,frontOperation:{fail:m.Z.KEEP,zFail:m.Z.DECREMENT_WRAP,zPass:m.Z.KEEP},backFunction:o,backOperation:{fail:m.Z.KEEP,zFail:m.Z.INCREMENT_WRAP,zPass:m.Z.KEEP},reference:f.Z.CESIUM_3D_TILE_MASK,mask:f.Z.CESIUM_3D_TILE_MASK},stencilMask:f.Z.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:h.Z.LESS_OR_EQUAL},depthMask:!1};var o;return n.renderState=l.Z.fromCache(i),n}function A(e,t){const n=a.Z.shallowClone(e);return n.cull=!1,n.pass=t,n.renderState=l.Z.fromCache(g),n}const T=[];function w(e,t,n){const i=l.Z.fromCache(Z),o=t[0],r=t[1],s=a.Z.shallowClone(o);s.cull=!0,s.pickOnly=!0;const c=a.Z.shallowClone(r);c.cull=!0,c.pickOnly=!0,c.renderState=i,c.pickId=e._pickId;const u=T;return u.length=0,u.push(s,c),b(e,u,n)}Object.defineProperties(_.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},batchLengths:{get:function(){return this._runtimePrimitive.batchLengths}},batchOffsets:{get:function(){return this._runtimePrimitive.batchOffsets}},model:{get:function(){return this._model}},classificationType:{get:function(){return this._classificationType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=s.Z.clone(e,this._modelMatrix);const t=this._runtimePrimitive.boundingSphere;this._boundingVolume=i.Z.transform(t,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace=e}}}),_.prototype.pushCommands=function(e,t){const n=e.passes;if(n.render){if(this._useDebugWireframe)return void t.push.apply(t,this._commandListDebugWireframe);if(this._classifiesTerrain&&t.push.apply(t,this._commandListTerrain),this._classifies3DTiles&&t.push.apply(t,this._commandList3DTiles),e.invertClassification&&this._classifies3DTiles){if(0===this._commandListIgnoreShow.length){const e=c.Z.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,t=v(this._command,e),n=y;n.length=0,n.push(t),this._commandListIgnoreShow=b(this,n,this._commandListIgnoreShow)}t.push.apply(t,this._commandListIgnoreShow)}}return n.pick&&(this._classifiesTerrain&&t.push.apply(t,this._commandListTerrainPicking),this._classifies3DTiles&&t.push.apply(t,this._commandList3DTilesPicking)),t};const E=_},705917:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(11020),o=n(217066),r=n(245929),s=n(677684),a=n(708956);const c={name:"ClassificationPipelineStage",process:function(e,t,n){e.shaderBuilder.addDefine("HAS_CLASSIFICATION",void 0,r.Z.BOTH);const c=e.runtimePrimitive;(0,i.Z)(c.batchLengths)||function(e,t){const n=a.Z.getAttributeBySemantic(e,s.Z.POSITION);if(!(0,i.Z)(n))throw new o.Z("Primitives must have a position attribute to be used for classification.");let r;const c=e.indices,l=(0,i.Z)(c);l&&(r=c.typedArray,c.typedArray=void 0);const u=l?c.count:n.count,d=a.Z.getAttributeBySemantic(e,s.Z.FEATURE_ID,0);if(!(0,i.Z)(d))return t.batchLengths=[u],void(t.batchOffsets=[0]);const h=d.typedArray;d.typedArray=void 0;const f=[],p=[0];let m=h[l?r[0]:0],_=0;for(let e=1;e<u;e++){const t=h[l?r[e]:e];if(t!==m){const n=e-_,i=e;f.push(n),p.push(i),_=i,m=t}}const g=u-_;f.push(g),t.batchLengths=f,t.batchOffsets=p}(t,c)}},l=c},641746:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(790087),o=n(234146),r=n(11020),s=n(722313),a=n(765153),c=n(806055),l=n(564438),u=n(32492),d=n(386978);function h(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this.mode=(0,o.Z)(e.mode,c.Z.MODIFY_MATERIAL),this.lightingModel=e.lightingModel,this.uniforms=(0,o.Z)(e.uniforms,o.Z.EMPTY_OBJECT),this.varyings=(0,o.Z)(e.varyings,o.Z.EMPTY_OBJECT),this.vertexShaderText=e.vertexShaderText,this.fragmentShaderText=e.fragmentShaderText,this.translucencyMode=(0,o.Z)(e.translucencyMode,d.Z.INHERIT),this._textureManager=new u.Z,this._defaultTexture=void 0,this.uniformMap=function(e){const t=e.uniforms,n={};for(const i in t)if(t.hasOwnProperty(i)){const o=t[i],r=o.type;if(r===l.Z.SAMPLER_CUBE)throw new a.Z("CustomShader does not support samplerCube uniforms");r===l.Z.SAMPLER_2D?(e._textureManager.loadTexture2D(i,o.value),n[i]=f(e,i)):n[i]=p(e,i)}return n}(this),this.usedVariablesVertex={attributeSet:{},featureIdSet:{},metadataSet:{}},this.usedVariablesFragment={attributeSet:{},featureIdSet:{},metadataSet:{},materialSet:{}},function(e){const t=/[vf]sInput\.attributes\.(\w+)/g,n=/[vf]sInput\.featureIds\.(\w+)/g,i=/[vf]sInput\.metadata.(\w+)/g;let o;const s=e.vertexShaderText;(0,r.Z)(s)&&(o=e.usedVariablesVertex.attributeSet,m(s,t,o),o=e.usedVariablesVertex.featureIdSet,m(s,n,o),o=e.usedVariablesVertex.metadataSet,m(s,i,o));const a=e.fragmentShaderText;(0,r.Z)(a)&&(o=e.usedVariablesFragment.attributeSet,m(a,t,o),o=e.usedVariablesFragment.featureIdSet,m(a,n,o),o=e.usedVariablesFragment.metadataSet,m(a,i,o),m(a,/material\.(\w+)/g,e.usedVariablesFragment.materialSet))}(this),function(e){const t=e.usedVariablesVertex.attributeSet;g(t,"position","positionMC","vertex"),g(t,"normal","normalMC","vertex"),g(t,"tangent","tangentMC","vertex"),g(t,"bitangent","bitangentMC","vertex"),g(t,"positionWC","positionMC","vertex"),g(t,"positionEC","positionMC","vertex"),g(t,"normalEC","normalMC","vertex"),g(t,"tangentEC","tangentMC","vertex"),g(t,"bitangentEC","bitangentMC","vertex");const n=e.usedVariablesFragment.attributeSet;g(n,"position","positionEC","fragment"),g(n,"normal","normalEC","fragment"),g(n,"tangent","tangentEC","fragment"),g(n,"bitangent","bitangentEC","fragment"),g(n,"normalMC","normalEC","fragment"),g(n,"tangentMC","tangentEC","fragment"),g(n,"bitangentMC","bitangentEC","fragment")}(this)}function f(e,t){return function(){return(0,o.Z)(e._textureManager.getTexture(t),e._defaultTexture)}}function p(e,t){return function(){return e.uniforms[t].value}}function m(e,t,n){let i;for(;null!==(i=t.exec(e));)n[i[1]]=!0}function _(e){return/^.*MC$/.test(e)?`${e} (model coordinates)`:/^.*WC$/.test(e)?`${e} (Cartesian world coordinates)`:/^.*EC$/.test(e)?`${e} (eye coordinates)`:e}function g(e,t,n,i){if(e.hasOwnProperty(t)){const e=`${_(t)} is not available in the ${i} shader. Did you mean ${_(n)} instead?`;throw new a.Z(e)}}h.prototype.setUniform=function(e,t){if(i.Z.typeOf.string("uniformName",e),i.Z.defined("value",t),!(0,r.Z)(this.uniforms[e]))throw new a.Z(`Uniform ${e} must be declared in the CustomShader constructor.`);const n=this.uniforms[e];n.type===l.Z.SAMPLER_2D?this._textureManager.loadTexture2D(e,t):(0,r.Z)(t.clone)?n.value=t.clone(n.value):n.value=t},h.prototype.update=function(e){this._defaultTexture=e.context.defaultTexture,this._textureManager.update(e)},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){this._textureManager=this._textureManager&&this._textureManager.destroy(),(0,s.Z)(this)};const Z=h},806055:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({MODIFY_MATERIAL:"MODIFY_MATERIAL",REPLACE_MATERIAL:"REPLACE_MATERIAL",getDefineName:function(e){return`CUSTOM_SHADER_${e}`}})},414885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(394579),o=n(11020),r=n(590292),s=n(245929),a=n(431056),c=n(908484),l=n(66574),u=n(806055),d=n(98869),h=n(436106),f=n(708956),p=n(386978);const m={name:"CustomShaderPipelineStage",STRUCT_ID_ATTRIBUTES_VS:"AttributesVS",STRUCT_ID_ATTRIBUTES_FS:"AttributesFS",STRUCT_NAME_ATTRIBUTES:"Attributes",STRUCT_ID_VERTEX_INPUT:"VertexInput",STRUCT_NAME_VERTEX_INPUT:"VertexInput",STRUCT_ID_FRAGMENT_INPUT:"FragmentInput",STRUCT_NAME_FRAGMENT_INPUT:"FragmentInput",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS:"initializeInputStructVS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS:"void initializeInputStruct(out VertexInput vsInput, ProcessedAttributes attributes)",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS:"initializeInputStructFS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS:"void initializeInputStruct(out FragmentInput fsInput, ProcessedAttributes attributes)",_oneTimeWarning:r.Z,process:function(e,t,n){const r=e.shaderBuilder,_=e.model.customShader;(0,o.Z)(_.lightingModel)&&(e.lightingOptions.lightingModel=_.lightingModel);const g=e.alphaOptions;_.translucencyMode===p.Z.TRANSLUCENT?g.pass=a.Z.TRANSLUCENT:_.translucencyMode===p.Z.OPAQUE&&(g.pass=void 0);const y=function(e,t){const n={enabled:!1},i={enabled:!1},r=function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=f.Z.getAttributeInfo(i);t[o.variableName]=o}return t}(t.attributes);(0,o.Z)(e.vertexShaderText)&&function(e,t,n){const i=b(t,e.usedVariablesVertex.attributeSet,!1),r=i.addToShader,s=i.missingAttributes;let a,c;const l=[],u=[];for(a in r)if(r.hasOwnProperty(a)){const e=[r[a].glslType,a];l.push(e),c=`vsInput.attributes.${a} = attributes.${a};`,u.push(c)}for(let e=0;e<s.length;e++){a=s[e];const t=Z(a);if(!(0,o.Z)(t))return void m._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveVS",`Primitive is missing attribute ${a}, disabling custom vertex shader`);l.push(t.attributeField),c=`vsInput.attributes.${a} = ${t.value};`,u.push(c)}n.enabled=!0,n.attributeFields=l,n.initializationLines=u}(e,r,n),(0,o.Z)(e.fragmentShaderText)&&function(e,t,n){const i=b(t,e.usedVariablesFragment.attributeSet,!0),r=i.addToShader,s=i.missingAttributes;let a,c;const l=[],u=[];for(a in r)if(r.hasOwnProperty(a)){const e=[r[a].glslType,a];l.push(e),c=`fsInput.attributes.${a} = attributes.${a};`,u.push(c)}for(let e=0;e<s.length;e++){a=s[e];const t=Z(a);if(!(0,o.Z)(t))return void m._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveFS",`Primitive is missing attribute ${a}, disabling custom fragment shader.`);l.push(t.attributeField),c=`fsInput.attributes.${a} = ${t.value};`,u.push(c)}const d=function(e){const t=[],n=[],i=e.usedVariablesFragment.attributeSet;return i.hasOwnProperty("positionWC")&&(t.push(["vec3","positionWC"]),n.push("fsInput.attributes.positionWC = attributes.positionWC;")),i.hasOwnProperty("positionEC")&&(t.push(["vec3","positionEC"]),n.push("fsInput.attributes.positionEC = attributes.positionEC;")),{attributeFields:t,initializationLines:n}}(e);n.enabled=!0,n.attributeFields=l.concat(d.attributeFields),n.initializationLines=d.initializationLines.concat(u)}(e,r,i);const s=e.usedVariablesFragment.attributeSet.hasOwnProperty("positionWC")&&i.enabled;return{vertexLines:n,fragmentLines:i,vertexLinesEnabled:n.enabled,fragmentLinesEnabled:i.enabled,customShaderEnabled:n.enabled||i.enabled,shouldComputePositionWC:s}}(_,t);if(!y.customShaderEnabled)return;if(function(e,t,n){const i=n.vertexLines,o=v;i.enabled&&(function(e,t){let n,i=m.STRUCT_ID_ATTRIBUTES_VS;e.addStruct(i,m.STRUCT_NAME_ATTRIBUTES,s.Z.VERTEX);const o=t.attributeFields;for(n=0;n<o.length;n++){const t=o[n],r=t[0],s=t[1];e.addStructField(i,r,s)}i=m.STRUCT_ID_VERTEX_INPUT,e.addStruct(i,m.STRUCT_NAME_VERTEX_INPUT,s.Z.VERTEX),e.addStructField(i,m.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(i,d.Z.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(i,h.Z.STRUCT_NAME_METADATA,"metadata"),e.addStructField(i,h.Z.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(i,h.Z.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");const r=m.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS;e.addFunction(r,m.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS,s.Z.VERTEX);const a=t.initializationLines;e.addFunctionLines(r,a)}(e,i),o.length=0,o.push("#line 0",t.vertexShaderText,c.Z),e.addVertexLines(o));const r=n.fragmentLines;r.enabled&&(function(e,t){let n,i,o,r,a=m.STRUCT_ID_ATTRIBUTES_FS;e.addStruct(a,m.STRUCT_NAME_ATTRIBUTES,s.Z.FRAGMENT);const c=t.attributeFields;for(n=0;n<c.length;n++)i=c[n],o=i[0],r=i[1],e.addStructField(a,o,r);a=m.STRUCT_ID_FRAGMENT_INPUT,e.addStruct(a,m.STRUCT_NAME_FRAGMENT_INPUT,s.Z.FRAGMENT),e.addStructField(a,m.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(a,d.Z.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(a,h.Z.STRUCT_NAME_METADATA,"metadata"),e.addStructField(a,h.Z.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(a,h.Z.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");const l=m.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS;e.addFunction(l,m.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS,s.Z.FRAGMENT);const u=t.initializationLines;e.addFunctionLines(l,u)}(e,r),o.length=0,o.push("#line 0",t.fragmentShaderText,l.Z),e.addFragmentLines(o))}(r,_,y),y.shouldComputePositionWC&&r.addDefine("COMPUTE_POSITION_WC_CUSTOM_SHADER",void 0,s.Z.BOTH),(0,o.Z)(_.vertexShaderText)&&r.addDefine("HAS_CUSTOM_VERTEX_SHADER",void 0,s.Z.VERTEX),(0,o.Z)(_.fragmentShaderText)){r.addDefine("HAS_CUSTOM_FRAGMENT_SHADER",void 0,s.Z.FRAGMENT);const e=u.Z.getDefineName(_.mode);r.addDefine(e,void 0,s.Z.FRAGMENT)}const A=_.uniforms;for(const e in A)if(A.hasOwnProperty(e)){const t=A[e];r.addUniform(t.type,e)}const T=_.varyings;for(const e in T)if(T.hasOwnProperty(e)){const t=T[e];r.addVarying(t,e)}e.uniformMap=(0,i.Z)(e.uniformMap,_.uniformMap)}},_={position:"vec3",normal:"vec3",tangent:"vec3",bitangent:"vec3",texCoord:"vec2",color:"vec4",joints:"ivec4",weights:"vec4"},g={position:"vec3(0.0)",normal:"vec3(0.0, 0.0, 1.0)",tangent:"vec3(1.0, 0.0, 0.0)",bitangent:"vec3(0.0, 1.0, 0.0)",texCoord:"vec2(0.0)",color:"vec4(1.0)",joints:"ivec4(0)",weights:"vec4(0.0)"};function Z(e){let t=e.replace(/_[0-9]+$/,"");t=t.replace(/(MC|EC)$/,"");const n=_[t],i=g[t];if((0,o.Z)(n))return{attributeField:[n,e],value:i}}const y={positionWC:!0,positionEC:!0};function b(e,t,n){let i,o;const r={};for(o in e)if(e.hasOwnProperty(o)){const s=e[o];i=o,n&&"normalMC"===o?i="normalEC":n&&"tangentMC"===o&&(i="tangentEC"),t.hasOwnProperty(i)&&(r[i]=s)}const s=[];for(o in t)if(t.hasOwnProperty(o)){if(y.hasOwnProperty(o))continue;i=o,n&&"normalEC"===o?i="normalMC":n&&"tangentEC"===o&&(i="tangentMC"),e.hasOwnProperty(i)||s.push(o)}return{addToShader:r,missingAttributes:s}}const v=[],A=m},386978:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({INHERIT:0,OPAQUE:1,TRANSLUCENT:2})},257867:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(11020),o=n(798336),r=n(245929),s=n(708956),a=n(677684);const c={name:"DequantizationPipelineStage",FUNCTION_ID_DEQUANTIZATION_STAGE_VS:"dequantizationStage",FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS:"void dequantizationStage(inout ProcessedAttributes attributes)"};function l(e,t){const n=e.shaderBuilder,i=e.uniformMap,o=t.variableName,s=t.attribute.quantization;if(s.octEncoded){const e=`model_normalizationRange_${o}`;n.addUniform("float",e,r.Z.VERTEX),i[e]=function(){return s.normalizationRange}}else{const e=`model_quantizedVolumeOffset_${o}`,a=`model_quantizedVolumeStepSize_${o}`,c=t.glslType;n.addUniform(c,e,r.Z.VERTEX),n.addUniform(c,a,r.Z.VERTEX);let l=s.quantizedVolumeOffset,d=s.quantizedVolumeStepSize;/^color_\d+$/.test(o)&&(l=u(l,0),d=u(d,1)),i[e]=function(){return l},i[a]=function(){return d}}}function u(e,t){return e instanceof o.Z?e:new o.Z(e.x,e.y,e.z,t)}function d(e,t){const n=t.variableName,i=t.attribute.quantization;let o;o=i.octEncoded?function(e,t){return`${`attributes.${e}`} = czm_octDecode(${`a_quantized_${e}`}, ${`model_normalizationRange_${e}`})${t.octEncodedZXY?".zxy":".xyz"};`}(n,i):function(e){return`${`attributes.${e}`} = ${`model_quantizedVolumeOffset_${e}`} + ${`a_quantized_${e}`} * ${`model_quantizedVolumeStepSize_${e}`};`}(n),e.addFunctionLines(c.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,[o])}c.process=function(e,t,n){const o=e.shaderBuilder,u=e.model,h=(0,i.Z)(u.classificationType);o.addDefine("USE_DEQUANTIZATION",void 0,r.Z.VERTEX),o.addFunction(c.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,c.FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS,r.Z.VERTEX);const f=t.attributes;for(let t=0;t<f.length;t++){const n=f[t],r=n.quantization;if(!(0,i.Z)(r))continue;const c=n.semantic===a.Z.POSITION,u=n.semantic===a.Z.TEXCOORD;if(h&&!c&&!u)continue;const p=s.Z.getAttributeInfo(n);d(o,p),l(e,p)}};const h=c},98869:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(449809),o=n(234146),r=n(11020),s=n(245929),a=n(379593),c=n(915323),l=n(822225),u=n(391504),d=n(583982),h=n(677684),f=n(708956);const p={name:"FeatureIdPipelineStage",STRUCT_ID_FEATURE_IDS_VS:"FeatureIdsVS",STRUCT_ID_FEATURE_IDS_FS:"FeatureIdsFS",STRUCT_NAME_FEATURE_IDS:"FeatureIds",FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS:"initializeFeatureIdsVS",FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS:"initializeFeatureIdsFS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS:"initializeFeatureIdAliasesVS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS:"initializeFeatureIdAliasesFS",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS:"void initializeFeatureIds(out FeatureIds featureIds, ProcessedAttributes attributes)",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES:"void initializeFeatureIdAliases(inout FeatureIds featureIds)",FUNCTION_ID_SET_FEATURE_ID_VARYINGS:"setFeatureIdVaryings",FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS:"void setFeatureIdVaryings()"};function m(e,t,n){const i=e.shaderBuilder;i.addStructField(p.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(p.STRUCT_ID_FEATURE_IDS_FS,"int",n);const o=t.setIndex,r=n.replace(/_\d+$/,"_"),s=`a_${r}${o}`,a=`v_${r}${o}`,c=`featureIds.${n} = int(czm_round(${s}));`,l=`featureIds.${n} = int(czm_round(${a}));`;i.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[c]),i.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[l]),i.addVarying("float",a),i.addFunctionLines(p.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${a} = ${s};`])}function _(e,t,n){const i=e.shaderBuilder;i.addStructField(p.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(p.STRUCT_ID_FEATURE_IDS_FS,"int",n);const o=t.setIndex,r=n.replace(/_\d+$/,"_"),s=[`featureIds.${n} = int(czm_round(attributes.${r}${o}));`];i.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,s),i.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,s)}function g(e,t,n,o,s,l){!function(e,t,n,o,s){const l=e.model;let u,d;if((0,r.Z)(t.repeat)){const e=function(e,t){const n=e.offset,i=e.repeat,o=new Float32Array(t);for(let e=0;e<t;e++)o[e]=n+Math.floor(e/i);return o}(t,n);u=a.Z.createVertexBuffer({context:s.context,typedArray:e,usage:c.Z.STATIC_DRAW}),u.vertexArrayDestroyable=!1,l._pipelineResources.push(u);const i=!1;l.statistics.addBuffer(u,i)}else d=[t.offset];const h={index:e.attributeIndex++,instanceDivisor:o,value:d,vertexBuffer:u,normalize:!1,componentsPerAttribute:1,componentDatatype:i.Z.FLOAT,strideInBytes:i.Z.getSizeInBytes(i.Z.FLOAT),offsetInBytes:0};e.attributes.push(h)}(e,t,o,s,l);const u=e.shaderBuilder,d=`a_implicit_${n}`;u.addAttribute("float",d);const h=`v_implicit_${n}`;u.addVarying("float",h),u.addStructField(p.STRUCT_ID_FEATURE_IDS_VS,"int",n),u.addStructField(p.STRUCT_ID_FEATURE_IDS_FS,"int",n),u.addFunctionLines(p.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${h} = ${d};`]),u.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[`featureIds.${n} = int(czm_round(${d}));`]),u.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[`featureIds.${n} = int(czm_round(${h}));`])}function Z(e,t,n,i,r){const a=`u_featureIdTexture_${i}`,c=e.uniformMap,l=t.textureReader;c[a]=function(){return(0,o.Z)(l.texture,r.context.defaultTexture)};const u=l.channels,d=e.shaderBuilder;d.addStructField(p.STRUCT_ID_FEATURE_IDS_FS,"int",n),d.addUniform("sampler2D",a,s.Z.FRAGMENT);const h=`featureIds.${n} = czm_unpackUint(texture(${a}, v_texCoord_${l.texCoord}).${u});`;d.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[h])}function y(e,t,n,i){const o=e.shaderBuilder,r=s.Z.includesVertexShader(i);r&&o.addStructField(p.STRUCT_ID_FEATURE_IDS_VS,"int",n),o.addStructField(p.STRUCT_ID_FEATURE_IDS_FS,"int",n);const a=[`featureIds.${n} = featureIds.${t};`];r&&o.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,a),o.addFunctionLines(p.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,a)}p.process=function(e,t,n){const i=e.shaderBuilder;!function(e){e.addStruct(p.STRUCT_ID_FEATURE_IDS_VS,p.STRUCT_NAME_FEATURE_IDS,s.Z.VERTEX),e.addStruct(p.STRUCT_ID_FEATURE_IDS_FS,p.STRUCT_NAME_FEATURE_IDS,s.Z.FRAGMENT),e.addFunction(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,p.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,s.Z.VERTEX),e.addFunction(p.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,p.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,s.Z.FRAGMENT),e.addFunction(p.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,p.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,s.Z.VERTEX),e.addFunction(p.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,p.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,s.Z.FRAGMENT),e.addFunction(p.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,p.FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS,s.Z.VERTEX)}(i);const o=e.runtimeNode.node.instances;(0,r.Z)(o)&&function(e,t,n){const i=t.featureIds,o=t.attributes[0].count;for(let t=0;t<i.length;t++){const a=i[t],c=a.positionalLabel;a instanceof d.Z.FeatureIdAttribute?m(e,a,c):g(e,a,c,o,1,n);const l=a.label;(0,r.Z)(l)&&y(e,c,l,s.Z.BOTH)}}(e,o,n),function(e,t,n){const i=t.featureIds,o=f.Z.getAttributeBySemantic(t,h.Z.POSITION).count;for(let t=0;t<i.length;t++){const a=i[t],c=a.positionalLabel;let l=s.Z.BOTH;a instanceof d.Z.FeatureIdAttribute?_(e,a,c):a instanceof d.Z.FeatureIdImplicitRange?g(e,a,c,o,void 0,n):(Z(e,a,c,t,n),l=s.Z.FRAGMENT);const u=a.label;(0,r.Z)(u)&&y(e,c,u,l)}}(e,t,n),i.addVertexLines(u.Z),i.addFragmentLines(l.Z)};const b=p},148746:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var i=n(660904),o=n(790087),r=n(449809),s=n(234146),a=n(11020),c=n(63354),l=n(342209),u=n(659635),d=n(804868),h=n(217066),f=n(720794),p=n(388402),m=n(788844),_=n(640397),g=n(583982),Z=n(600959),y=n(757587),b=n(764172),v=n(677684),A=n(379593),T=n(915323);function w(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),o.Z.typeOf.object("options.geoJson",e.geoJson),this._geoJson=e.geoJson,this._components=void 0}function E(){this.lines=void 0,this.points=void 0,this.properties=void 0}function S(){this.features=[]}function C(e){const t=e[0],n=e[1],o=(0,s.Z)(e[2],0);return new i.Z(t,n,o)}function x(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=C(e[i]);return[n]}function I(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=x(e[i])[0];return n}(0,a.Z)(Object.create)&&(w.prototype=Object.create(y.Z.prototype),w.prototype.constructor=w),Object.defineProperties(w.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),w.prototype.load=function(){return Promise.resolve(this)},w.prototype.process=function(e){return o.Z.typeOf.object("frameState",e),(0,a.Z)(this._components)||(this._components=function(e,t){const n=new S,o=L[e.type];(0,a.Z)(o)&&o(e,n);const y=n.features,w=y.length;if(0===w)throw new h.Z("GeoJSON must have at least one feature");const E={};for(let e=0;e<w;e++){const t=y[e],n=(0,s.Z)(t.properties,s.Z.EMPTY_OBJECT);for(const e in n)n.hasOwnProperty(e)&&((0,a.Z)(E[e])||(E[e]=new Array(w)))}for(let e=0;e<w;e++){const t=y[e];for(const n in E)if(E.hasOwnProperty(n)){const i=(0,s.Z)(t.properties[n],"");E[n][e]=i}}const C=new m.Z({count:w,properties:E}),x=[new Z.Z({id:0,count:w,jsonMetadataTable:C})],I=_.Z.fromJson({}),P=new b.Z({schema:I,propertyTables:x}),D=new i.Z(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),O=new i.Z(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let M=!1,R=!1;for(let e=0;e<w;e++){const t=y[e];if((0,a.Z)(t.lines)){M=!0;const e=t.lines.length;for(let n=0;n<e;n++){const e=t.lines[n],o=e.length;for(let t=0;t<o;t++)i.Z.minimumByComponent(D,e[t],D),i.Z.maximumByComponent(O,e[t],O)}}if((0,a.Z)(t.points)){R=!0;const e=t.points.length;for(let n=0;n<e;n++){const e=t.points[n];i.Z.minimumByComponent(D,e,D),i.Z.maximumByComponent(O,e,O)}}}const F=i.Z.midpoint(D,O,new i.Z),B=i.Z.fromDegrees(F.x,F.y,F.z,c.Z.WGS84,new i.Z),U=f.Z.eastNorthUpToFixedFrame(B,c.Z.WGS84,new u.Z),k=u.Z.inverseTransformation(U,new u.Z),V=[];M&&V.push(function(e,t,n){let o=0,s=0;const h=e.length;for(let t=0;t<h;t++){const n=e[t];if((0,a.Z)(n.lines)){const e=n.lines.length;for(let t=0;t<e;t++){const e=n.lines[t];o+=e.length,s+=2*(e.length-1)}}}const f=new Float32Array(3*o),m=new Float32Array(o),_=l.Z.createTypedArray(o,s),Z=l.Z.fromTypedArray(_),y=new i.Z(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),b=new i.Z(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let w=0,E=0;for(let n=0;n<h;n++){const o=e[n];if(!(0,a.Z)(o.lines))continue;const r=o.lines.length;for(let e=0;e<r;e++){const r=o.lines[e],s=r.length;for(let e=0;e<s;e++){const o=r[e],a=i.Z.fromDegrees(o.x,o.y,o.z,c.Z.WGS84,N),l=u.Z.multiplyByPoint(t,a,N);i.Z.minimumByComponent(y,l,y),i.Z.maximumByComponent(b,l,b),i.Z.pack(l,f,3*w),m[w]=n,e<s-1&&(_[2*E]=w,_[2*E+1]=w+1,E++),w++}}}const S=A.Z.createVertexBuffer({typedArray:f,context:n.context,usage:T.Z.STATIC_DRAW});S.vertexArrayDestroyable=!1;const C=A.Z.createVertexBuffer({typedArray:m,context:n.context,usage:T.Z.STATIC_DRAW});C.vertexArrayDestroyable=!1;const x=A.Z.createIndexBuffer({typedArray:_,context:n.context,usage:T.Z.STATIC_DRAW,indexDatatype:Z});x.vertexArrayDestroyable=!1;const I=new g.Z.Attribute;I.semantic=v.Z.POSITION,I.componentDatatype=r.Z.FLOAT,I.type=p.Z.VEC3,I.count=o,I.min=y,I.max=b,I.buffer=S;const P=new g.Z.Attribute;P.semantic=v.Z.FEATURE_ID,P.setIndex=0,P.componentDatatype=r.Z.FLOAT,P.type=p.Z.SCALAR,P.count=o,P.buffer=C;const D=[I,P],O=new g.Z.Material;O.unlit=!0;const L=new g.Z.Indices;L.indexDatatype=Z,L.count=_.length,L.buffer=x;const M=new g.Z.FeatureIdAttribute;M.featureCount=h,M.propertyTableId=0,M.setIndex=0,M.positionalLabel="featureId_0";const R=[M],F=new g.Z.Primitive;return F.attributes=D,F.indices=L,F.featureIds=R,F.primitiveType=d.Z.LINES,F.material=O,F}(y,k,t)),R&&V.push(function(e,t,n){let o=0;const s=e.length;for(let t=0;t<s;t++){const n=e[t];(0,a.Z)(n.points)&&(o+=n.points.length)}const l=new Float32Array(3*o),h=new Float32Array(o),f=new i.Z(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),m=new i.Z(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let _=0;for(let n=0;n<s;n++){const o=e[n];if(!(0,a.Z)(o.points))continue;const r=o.points.length;for(let e=0;e<r;e++){const r=o.points[e],s=i.Z.fromDegrees(r.x,r.y,r.z,c.Z.WGS84,N),a=u.Z.multiplyByPoint(t,s,N);i.Z.minimumByComponent(f,a,f),i.Z.maximumByComponent(m,a,m),i.Z.pack(a,l,3*_),h[_]=n,_++}}const Z=A.Z.createVertexBuffer({typedArray:l,context:n.context,usage:T.Z.STATIC_DRAW});Z.vertexArrayDestroyable=!1;const y=A.Z.createVertexBuffer({typedArray:h,context:n.context,usage:T.Z.STATIC_DRAW});y.vertexArrayDestroyable=!1;const b=new g.Z.Attribute;b.semantic=v.Z.POSITION,b.componentDatatype=r.Z.FLOAT,b.type=p.Z.VEC3,b.count=o,b.min=f,b.max=m,b.buffer=Z;const w=new g.Z.Attribute;w.semantic=v.Z.FEATURE_ID,w.setIndex=0,w.componentDatatype=r.Z.FLOAT,w.type=p.Z.SCALAR,w.count=o,w.buffer=y;const E=[b,w],S=new g.Z.Material;S.unlit=!0;const C=new g.Z.FeatureIdAttribute;C.featureCount=s,C.propertyTableId=0,C.setIndex=0,C.positionalLabel="featureId_0";const x=[C],I=new g.Z.Primitive;return I.attributes=E,I.featureIds=x,I.primitiveType=d.Z.POINTS,I.material=S,I}(y,k,t));const H=new g.Z.Node;H.index=0,H.primitives=V;const z=[H],G=new g.Z.Scene;G.nodes=z;const j=new g.Z.Components;return j.scene=G,j.nodes=z,j.transform=U,j.structuralMetadata=P,j}(this._geoJson,e),this._geoJson=void 0),!0};const P={LineString:x,MultiLineString:function(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=x(e[i])[0];return n},MultiPolygon:function(e){const t=e.length,n=[];for(let i=0;i<t;i++)Array.prototype.push.apply(n,I(e[i]));return n},Polygon:I,MultiPoint:function(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=C(e[i]);return n},Point:function(e){return[C(e)]}},D={LineString:d.Z.LINES,MultiLineString:d.Z.LINES,MultiPolygon:d.Z.LINES,Polygon:d.Z.LINES,MultiPoint:d.Z.POINTS,Point:d.Z.POINTS};function O(e,t){if(!(0,a.Z)(e.geometry))return;const n=e.geometry.type,i=P[n],o=D[n],r=e.geometry.coordinates;if(!(0,a.Z)(i))return;if(!(0,a.Z)(r))return;const s=new E;o===d.Z.LINES?s.lines=i(r):o===d.Z.POINTS&&(s.points=i(r)),s.properties=e.properties,t.features.push(s)}const L={FeatureCollection:function(e,t){const n=e.features,i=n.length;for(let e=0;e<i;e++)O(n[e],t)},Feature:O},N=new i.Z;w.prototype.unload=function(){this._components=void 0};const M=w},362167:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(449809),o=n(11020),r=n(765153),s=n(804868),a=n(245929),c=n(512766),l=n(838873),u=n(388402),d=n(714233),h=n(420136),f=n(708956),p=n(427709),m=n(677684);const _={name:"GeometryPipelineStage",STRUCT_ID_PROCESSED_ATTRIBUTES_VS:"ProcessedAttributesVS",STRUCT_ID_PROCESSED_ATTRIBUTES_FS:"ProcessedAttributesFS",STRUCT_NAME_PROCESSED_ATTRIBUTES:"ProcessedAttributes",FUNCTION_ID_INITIALIZE_ATTRIBUTES:"initializeAttributes",FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES:"void initializeAttributes(out ProcessedAttributes attributes)",FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS:"setDynamicVaryingsVS",FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS:"setDynamicVaryingsFS",FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS:"void setDynamicVaryings(inout ProcessedAttributes attributes)"};function g(e,t,n,r,s,a){const c=e.shaderBuilder,l=f.Z.getAttributeInfo(t),d=s&&!a;r>1?function(e,t,n,r){const s=t.quantization;let a,c;(0,o.Z)(s)?(a=s.type,c=s.componentDatatype):(a=t.type,c=t.componentDatatype);const l=t.normalized,d=u.Z.getNumberOfComponents(a)/r,h=d*i.Z.getSizeInBytes(c),f=t.byteStride;for(let i=0;i<r;i++){const o=t.byteOffset+i*h,r={index:n+i,vertexBuffer:t.buffer,componentsPerAttribute:d,componentDatatype:c,offsetInBytes:o,strideInBytes:f,normalize:l};e.attributes.push(r)}}(e,t,n,r):function(e,t,n,r){const s=t.quantization;let a,c;(0,o.Z)(s)?(a=s.type,c=s.componentDatatype):(a=t.type,c=t.componentDatatype);const l=t.semantic,d=t.setIndex;l===m.Z.FEATURE_ID&&d>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=d+1);const h=l===m.Z.POSITION,f=h?0:n,p=u.Z.getNumberOfComponents(a),_={index:f,value:(0,o.Z)(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,count:t.count,componentsPerAttribute:p,componentDatatype:c,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};if(e.attributes.push(_),!h||!r)return;const g={index:n,vertexBuffer:e.runtimePrimitive.positionBuffer2D,count:t.count,componentsPerAttribute:p,componentDatatype:i.Z.FLOAT,offsetInBytes:0,strideInBytes:void 0,normalize:t.normalized};e.attributes.push(g)}(e,t,n,d),function(e,t,n){const i=t.attribute.semantic,o=t.variableName;let r,s;t.isQuantized?(r=`a_quantized_${o}`,s=t.quantizedGlslType):(r=`a_${o}`,s=t.glslType);const a=i===m.Z.POSITION;a?e.setPositionAttribute(s,r):e.addAttribute(s,r),a&&n&&e.addAttribute("vec3","a_position2D")}(c,l,d),function(e,t){const n=t.variableName;let i,o=`v_${n}`;"normalMC"===n?(o="v_normalEC",i=t.glslType):"tangentMC"===n?(i="vec3",o="v_tangentEC"):i=t.glslType,e.addVarying(i,o)}(c,l),(0,o.Z)(t.semantic)&&function(e,t){const n=t.semantic,i=t.setIndex;switch(n){case m.Z.NORMAL:e.addDefine("HAS_NORMALS");break;case m.Z.TANGENT:e.addDefine("HAS_TANGENTS");break;case m.Z.FEATURE_ID:e.addDefine(`HAS${n}_${i}`);break;case m.Z.TEXCOORD:case m.Z.COLOR:e.addDefine(`HAS_${n}_${i}`)}}(c,t),function(e,t,n){const i=_.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,o=_.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,r=t.variableName;"tangentMC"===r?(e.addStructField(i,"vec3","tangentMC"),e.addStructField(i,"float","tangentSignMC"),e.addStructField(o,"vec3","tangentEC")):"normalMC"===r?(e.addStructField(i,"vec3","normalMC"),e.addStructField(o,"vec3","normalEC")):(e.addStructField(i,t.glslType,r),e.addStructField(o,t.glslType,r)),"positionMC"===r&&n&&e.addStructField(i,"vec3","position2D")}(c,l,s),function(e,t,n){const i=_.FUNCTION_ID_INITIALIZE_ATTRIBUTES,o=t.variableName;if("positionMC"===o&&n){const t="attributes.position2D = a_position2D;";e.addFunctionLines(i,[t])}if(t.isQuantized)return;const r=[];"tangentMC"===o?(r.push("attributes.tangentMC = a_tangentMC.xyz;"),r.push("attributes.tangentSignMC = a_tangentMC.w;")):r.push(`attributes.${o} = a_${o};`),e.addFunctionLines(i,r)}(c,l,d),function(e,t){const n=t.attribute.semantic,i=t.attribute.setIndex;if((0,o.Z)(n)&&!(0,o.Z)(i))return;let r=_.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS;const s=t.variableName;let a=`v_${s} = attributes.${s};`;e.addFunctionLines(r,[a]),r=_.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,a=`attributes.${s} = v_${s};`,e.addFunctionLines(r,[a])}(c,l)}_.process=function(e,t,n){const i=e.shaderBuilder,f=e.model;i.addStruct(_.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"ProcessedAttributes",a.Z.VERTEX),i.addStruct(_.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"ProcessedAttributes",a.Z.FRAGMENT),i.addStruct(p.Z.STRUCT_ID_SELECTED_FEATURE,p.Z.STRUCT_NAME_SELECTED_FEATURE,a.Z.BOTH),i.addFunction(_.FUNCTION_ID_INITIALIZE_ATTRIBUTES,_.FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES,a.Z.VERTEX),i.addVarying("vec3","v_positionWC"),i.addVarying("vec3","v_positionEC"),i.addStructField(_.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionWC"),i.addStructField(_.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionEC"),i.addFunction(_.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS,_.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,a.Z.VERTEX),i.addFunction(_.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,_.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,a.Z.FRAGMENT),f.type===h.Z.TILE_PNTS&&i.addDefine("HAS_SRGB_COLOR",void 0,a.Z.FRAGMENT);const Z=n.mode!==d.Z.SCENE3D&&!n.scene3DOnly&&f._projectTo2D,y=(0,o.Z)(e.runtimeNode.node.instances),b=Z&&!y,v=t.attributes.length;for(let n=0;n<v;n++){const i=t.attributes[n],s=u.Z.getAttributeLocationCount(i.type);if(!(0,o.Z)(i.buffer)&&!(0,o.Z)(i.constant))throw new r.Z("Attributes must be provided as a Buffer or constant value");const a=i.semantic===m.Z.POSITION;let c;s>1?(c=e.attributeIndex,e.attributeIndex+=s):c=a&&!b?0:e.attributeIndex++,g(e,i,c,s,Z,y)}!function(e,t){let n=!1,i=!1;for(let e=0;e<t.length;e++){const o=t[e];o.semantic===m.Z.NORMAL?n=!0:o.semantic===m.Z.TANGENT&&(i=!0)}n&&i&&(e.addDefine("HAS_BITANGENTS"),e.addVarying("vec3","v_bitangentEC"),e.addStructField(_.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"vec3","bitangentMC"),e.addStructField(_.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","bitangentEC"))}(i,t.attributes),t.primitiveType===s.Z.POINTS&&i.addDefine("PRIMITIVE_TYPE_POINTS"),i.addVertexLines(l.Z),i.addFragmentLines(c.Z)};const Z=_},435154:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var i=n(393766),o=n(762031),r=n(660904),s=n(790087),a=n(823438),c=n(449809),l=n(234146),u=n(11020),d=n(63354),h=n(932799),f=n(664288),p=n(659635),m=n(360846),_=n(217066),g=n(720794),Z=n(379593),y=n(915323),b=n(388402),v=n(418371),A=n(179869),T=n(272424),w=n(272490),E=n(301330),S=n(943881),C=n(583982),x=n(943618),I=n(600959),P=n(757587),D=n(764172);const O=C.Z.Attribute,L=C.Z.FeatureIdAttribute,N=C.Z.Instances;function M(e){const t=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).i3dmResource,n=e.arrayBuffer;let i=e.baseResource;const o=(0,l.Z)(e.byteOffset,0),r=(0,l.Z)(e.releaseGltfJson,!1),a=(0,l.Z)(e.asynchronous,!0),c=(0,l.Z)(e.incrementallyLoadTextures,!0),d=(0,l.Z)(e.upAxis,v.Z.Y),h=(0,l.Z)(e.forwardAxis,v.Z.X),f=(0,l.Z)(e.loadAttributesAsTypedArray,!1),m=(0,l.Z)(e.loadIndicesForWireframe,!1),_=(0,l.Z)(e.loadPrimitiveOutline,!0);s.Z.typeOf.object("options.i3dmResource",t),s.Z.typeOf.object("options.arrayBuffer",n),i=(0,u.Z)(i)?i:t.clone(),this._i3dmResource=t,this._baseResource=i,this._arrayBuffer=n,this._byteOffset=o,this._releaseGltfJson=r,this._asynchronous=a,this._incrementallyLoadTextures=c,this._upAxis=d,this._forwardAxis=h,this._loadAttributesAsTypedArray=f,this._loadIndicesForWireframe=m,this._loadPrimitiveOutline=_,this._state=0,this._promise=void 0,this._gltfLoader=void 0,this._buffers=[],this._components=void 0,this._transform=p.Z.IDENTITY,this._batchTable=void 0,this._featureTable=void 0,this._instancesLength=0}(0,u.Z)(Object.create)&&(M.prototype=Object.create(P.Z.prototype),M.prototype.constructor=M),Object.defineProperties(M.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),M.prototype.load=function(){if((0,u.Z)(this._promise))return this._promise;const e=E.Z.parse(this._arrayBuffer,this._byteOffset),t=e.featureTableJson,n=e.featureTableBinary,i=e.batchTableJson,o=e.batchTableBinary,s=e.gltfFormat,a=new A.Z(t,n);this._featureTable=a;const l=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=l,!(0,u.Z)(l))throw new _.Z("Feature table global property: INSTANCES_LENGTH must be defined");this._instancesLength=l;const d=a.getGlobalProperty("RTC_CENTER",c.Z.FLOAT,3);(0,u.Z)(d)&&(this._transform=p.Z.fromTranslation(r.Z.fromArray(d))),this._batchTable={json:i,binary:o};const f={upAxis:this._upAxis,forwardAxis:this._forwardAxis,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline};if(0===s){let t=(0,h.Z)(e.gltf);t=t.replace(/[\s\0]+$/,"");const n=this._baseResource.getDerivedResource({url:t});f.gltfResource=n,f.baseResource=n}else f.gltfResource=this._i3dmResource,f.typedArray=e.gltf;const m=new T.Z(f);return this._gltfLoader=m,this._state=1,this._promise=m.load().then((()=>{if(!this.isDestroyed())return this._state=2,this})).catch((e=>{if(!this.isDestroyed())throw function(e,t){e.unload(),e._state=5;return e.getError("Failed to load i3dm",t)}(this,e)})),this._promise},M.prototype.process=function(e){if(s.Z.typeOf.object("frameState",e),4===this._state)return!0;const t=this._gltfLoader;let n=!1;if(2===this._state&&(n=t.process(e)),!n)return!1;const i=t.components;return i.transform=p.Z.multiplyTransformation(this._transform,i.transform,i.transform),function(e,t,n){let i;const s=e._featureTable,a=e._instancesLength;if(0===a)return;const l=s.getGlobalProperty("RTC_CENTER",c.Z.FLOAT,3),d=s.getGlobalProperty("EAST_NORTH_UP"),h=s.hasProperty("NORMAL_UP")||s.hasProperty("NORMAL_UP_OCT32P")||d,g=s.hasProperty("SCALE")||s.hasProperty("SCALE_NON_UNIFORM"),v=function(e,t){if(e.hasProperty("POSITION"))return e.getPropertyArray("POSITION",c.Z.FLOAT,3);if(e.hasProperty("POSITION_QUANTIZED")){const t=e.getPropertyArray("POSITION_QUANTIZED",c.Z.UNSIGNED_SHORT,3),n=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",c.Z.FLOAT,3);if(!(0,u.Z)(n))throw new _.Z("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const i=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",c.Z.FLOAT,3);if(!(0,u.Z)(i))throw new _.Z("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=new Float32Array(t.length);for(let e=0;e<t.length/3;e++)for(let r=0;r<3;r++){const s=3*e+r;o[s]=t[s]/65535*i[r]+n[r]}return o}throw new _.Z("Either POSITION or POSITION_QUANTIZED must be defined for each instance.")}(s);let A,T;h&&(A=new Float32Array(4*a)),g&&(T=new Float32Array(3*a));const E=new Float32Array(a),S=r.Z.unpackArray(v);let C=new r.Z;const x=new r.Z,I=new r.Z,P=new r.Z,D=new f.Z,M=new m.Z,F=new Array(4),k=new r.Z,z=new Array(3),G=new p.Z;if(!(0,u.Z)(l)){const e=o.Z.fromPoints(S);for(i=0;i<S.length;i++)r.Z.subtract(S[i],e.center,R),v[3*i+0]=R.x,v[3*i+1]=R.y,v[3*i+2]=R.z;const n=p.Z.fromTranslation(e.center,B);t.transform=p.Z.multiplyTransformation(n,t.transform,t.transform)}for(i=0;i<a;i++){C=r.Z.clone(S[i]),(0,u.Z)(l)&&r.Z.add(C,r.Z.unpack(l),C),h&&(V(s,d,i,M,C,I,x,P,D,G),m.Z.pack(M,F,0),A[4*i+0]=F[0],A[4*i+1]=F[1],A[4*i+2]=F[2],A[4*i+3]=F[3]),g&&(H(s,i,k),r.Z.pack(k,z,0),T[3*i+0]=z[0],T[3*i+1]=z[1],T[3*i+2]=z[2]);let e=s.getProperty("BATCH_ID",c.Z.UNSIGNED_SHORT,1,i);(0,u.Z)(e)||(e=i),E[i]=e}const j=new N;j.transformInWorldSpace=!0;const W=e._buffers,q=new O;if(q.name="Instance Translation",q.semantic=w.Z.TRANSLATION,q.componentDatatype=c.Z.FLOAT,q.type=b.Z.VEC3,q.count=a,q.typedArray=v,!h){const e=Z.Z.createVertexBuffer({context:n.context,typedArray:v,usage:y.Z.STATIC_DRAW});e.vertexArrayDestroyable=!1,W.push(e),q.buffer=e}if(j.attributes.push(q),h){const e=new O;e.name="Instance Rotation",e.semantic=w.Z.ROTATION,e.componentDatatype=c.Z.FLOAT,e.type=b.Z.VEC4,e.count=a,e.typedArray=A,j.attributes.push(e)}if(g){const e=new O;if(e.name="Instance Scale",e.semantic=w.Z.SCALE,e.componentDatatype=c.Z.FLOAT,e.type=b.Z.VEC3,e.count=a,h)e.typedArray=T;else{const t=Z.Z.createVertexBuffer({context:n.context,typedArray:T,usage:y.Z.STATIC_DRAW});t.vertexArrayDestroyable=!1,W.push(t),e.buffer=t}j.attributes.push(e)}const Y=new O;Y.name="Instance Feature ID",Y.setIndex=0,Y.semantic=w.Z.FEATURE_ID,Y.componentDatatype=c.Z.FLOAT,Y.type=b.Z.SCALAR,Y.count=a;const X=Z.Z.createVertexBuffer({context:n.context,typedArray:E,usage:y.Z.STATIC_DRAW});X.vertexArrayDestroyable=!1,W.push(X),Y.buffer=X,j.attributes.push(Y);const J=new L;J.propertyTableId=0,J.setIndex=0,J.positionalLabel="instanceFeatureId_0",j.featureIds.push(J);const Q=t.nodes,$=Q.length;let K=!1;for(i=0;i<$;i++){const e=Q[i];e.primitives.length>0&&(e.instances=K?U(j):j,K=!0)}}(this,i,e),function(e,t){const n=e._batchTable,i=e._instancesLength;if(0===i)return;let o;if((0,u.Z)(n.json))o=(0,x.Z)({count:i,batchTable:n.json,binaryBody:n.binary});else{const e=new I.Z({name:S.Z.BATCH_TABLE_CLASS_NAME,count:i});o=new D.Z({schema:{},propertyTables:[e]})}t.structuralMetadata=o}(this,i),this._components=i,this._arrayBuffer=void 0,this._state=4,!0};const R=new r.Z,F=new Array(4),B=new p.Z;function U(e){const t=new N;t.transformInWorldSpace=e.transformInWorldSpace;const n=e.attributes,i=n.length;for(let e=0;e<i;e++){const i=(0,a.Z)(n[e],!1);t.attributes.push(i)}return t.featureIds=e.featureIds,t}const k=new Array(4);function V(e,t,n,o,s,a,l,h,Z,y){const b=e.getProperty("NORMAL_UP",c.Z.FLOAT,3,n,F),v=e.getProperty("NORMAL_RIGHT",c.Z.FLOAT,3,n,k);let A=!1;if((0,u.Z)(b)){if(!(0,u.Z)(v))throw new _.Z("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");r.Z.unpack(b,0,a),r.Z.unpack(v,0,l),A=!0}else{const o=e.getProperty("NORMAL_UP_OCT32P",c.Z.UNSIGNED_SHORT,2,n,F),r=e.getProperty("NORMAL_RIGHT_OCT32P",c.Z.UNSIGNED_SHORT,2,n,k);if((0,u.Z)(o)){if(!(0,u.Z)(r))throw new _.Z("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");i.Z.octDecodeInRange(o[0],o[1],65535,a),i.Z.octDecodeInRange(r[0],r[1],65535,l),A=!0}else t?(g.Z.eastNorthUpToFixedFrame(s,d.Z.WGS84,y),p.Z.getMatrix3(y,Z)):f.Z.clone(f.Z.IDENTITY,Z)}A&&(r.Z.cross(l,a,h),r.Z.normalize(h,h),f.Z.setColumn(Z,0,l,Z),f.Z.setColumn(Z,1,a,Z),f.Z.setColumn(Z,2,h,Z)),m.Z.fromRotationMatrix(Z,o)}function H(e,t,n){n=r.Z.fromElements(1,1,1,n);const i=e.getProperty("SCALE",c.Z.FLOAT,1,t);(0,u.Z)(i)&&r.Z.multiplyByScalar(n,i,n);const o=e.getProperty("SCALE_NON_UNIFORM",c.Z.FLOAT,3,t,F);(0,u.Z)(o)&&(n.x*=o[0],n.y*=o[1],n.z*=o[2])}M.prototype.isUnloaded=function(){return 6===this._state},M.prototype.unload=function(){(0,u.Z)(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),function(e){const t=e._buffers,n=t.length;for(let e=0;e<n;e++){const n=t[e];n.isDestroyed()||n.destroy()}t.length=0}(this),this._components=void 0,this._arrayBuffer=void 0,this._state=6};const z=M},651643:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(394579),o=n(11020),r=n(533708),s=n(245929),a=n(394472);const c={name:"ImageBasedLightingPipelineStage",process:function(e,t,n){const c=t.imageBasedLighting,l=e.shaderBuilder;l.addDefine("USE_IBL_LIGHTING",void 0,s.Z.FRAGMENT),l.addUniform("vec2","model_iblFactor",s.Z.FRAGMENT),a.Z.isSupported(n.context)&&((c.useSphericalHarmonics||c.useSpecularEnvironmentMaps||c.enabled)&&l.addUniform("mat3","model_iblReferenceFrameMatrix",s.Z.FRAGMENT),(0,o.Z)(c.sphericalHarmonicCoefficients)?(l.addDefine("DIFFUSE_IBL",void 0,s.Z.FRAGMENT),l.addDefine("CUSTOM_SPHERICAL_HARMONICS",void 0,s.Z.FRAGMENT),l.addUniform("vec3","model_sphericalHarmonicCoefficients[9]",s.Z.FRAGMENT)):c.useDefaultSphericalHarmonics&&l.addDefine("DIFFUSE_IBL",void 0,s.Z.FRAGMENT),(0,o.Z)(c.specularEnvironmentMapAtlas)&&c.specularEnvironmentMapAtlas.ready?(l.addDefine("SPECULAR_IBL",void 0,s.Z.FRAGMENT),l.addDefine("CUSTOM_SPECULAR_IBL",void 0,s.Z.FRAGMENT),l.addUniform("sampler2D","model_specularEnvironmentMaps",s.Z.FRAGMENT),l.addUniform("vec2","model_specularEnvironmentMapsSize",s.Z.FRAGMENT),l.addUniform("float","model_specularEnvironmentMapsMaximumLOD",s.Z.FRAGMENT)):t.useDefaultSpecularMaps&&l.addDefine("SPECULAR_IBL",void 0,s.Z.FRAGMENT)),(0,o.Z)(c.luminanceAtZenith)&&(l.addDefine("USE_SUN_LUMINANCE",void 0,s.Z.FRAGMENT),l.addUniform("float","model_luminanceAtZenith",s.Z.FRAGMENT)),l.addFragmentLines(r.Z);const u={model_iblFactor:function(){return c.imageBasedLightingFactor},model_iblReferenceFrameMatrix:function(){return t._iblReferenceFrameMatrix},model_luminanceAtZenith:function(){return c.luminanceAtZenith},model_sphericalHarmonicCoefficients:function(){return c.sphericalHarmonicCoefficients},model_specularEnvironmentMaps:function(){return c.specularEnvironmentMapAtlas.texture},model_specularEnvironmentMapsSize:function(){return c.specularEnvironmentMapAtlas.texture.dimensions},model_specularEnvironmentMapsMaximumLOD:function(){return c.specularEnvironmentMapAtlas.maximumMipmapLevel}};e.uniformMap=(0,i.Z)(u,e.uniformMap)}}},740228:(e,t,n)=>{"use strict";n.d(t,{Z:()=>q});var i=n(393766),o=n(660904),r=n(823438),s=n(394579),a=n(449809),c=n(11020),l=n(659635),u=n(360846),d=n(720794),h=n(379593),f=n(915323),p=n(245929),m=n(645957),_=n(952901),g=n(742910),Z=n(388402),y=n(272490),b=n(714233),v=n(638452),A=n(708956);const T=new l.Z,w=new l.Z,E=new l.Z,S={name:"InstancingPipelineStage",_getInstanceTransformsAsMatrices:z,_transformsToTypedArray:U,process:function(e,t,n){const i=t.instances,a=i.attributes[0].count,u=e.shaderBuilder;u.addDefine("HAS_INSTANCING"),u.addVertexLines(m.Z);const h=e.model,f=h.sceneGraph,v=e.runtimeNode,S=n.mode!==b.Z.SCENE3D&&!n.scene3DOnly&&h._projectTo2D,C=[];!function(e,t,n,i,s){const a=A.Z.getAttributeBySemantic(n,y.Z.ROTATION);(0,c.Z)(a)?function(e,t,n,i,s){const a=e.shaderBuilder,u=t.attributes[0].count,d=e.model,h=e.runtimeNode;a.addDefine("HAS_INSTANCE_MATRICES");let f,p=h.instancingTransformsBuffer;if((0,c.Z)(p)||(f=z(t,u,e),p=G(U(f),i),d._modelResources.push(p),h.instancingTransformsBuffer=p),j(e,p,n,"Transform"),!s)return;const m=(0,r.Z)(i);m.mode=b.Z.COLUMBUS_VIEW,B(e,m);let _=h.instancingTransformsBuffer2D;if(!(0,c.Z)(_)){const t=function(e,t,n,i){const r=O,s=L;D(t,r,s);const a=t.runtimeNode.instancingReferencePoint2D,c=e.length;for(let t=0;t<c;t++){const c=I(e[t],r,s,n,N),u=l.Z.getTranslation(c,M),d=o.Z.subtract(u,a,u);i[t]=l.Z.setTranslation(c,d,i[t])}return i}(f,e,m,f);_=G(U(t),i),d._modelResources.push(_),h.instancingTransformsBuffer2D=_}j(e,_,n,"Transform2D")}(e,n,i,t,s):function(e,t,n,i,s){const a=e.shaderBuilder,l=e.runtimeNode,u=A.Z.getAttributeBySemantic(t,y.Z.TRANSLATION),d=A.Z.getAttributeBySemantic(t,y.Z.SCALE);if((0,c.Z)(d)){a.addDefine("HAS_INSTANCE_SCALE");const t="Scale";W(e,d.buffer,d.byteOffset,d.byteStride,n,t)}if(!(0,c.Z)(u))return;let h;const f=u.typedArray;(0,c.Z)(f)?h=function(e,t,n){const i=new Array(t),r=e.typedArray,s=new o.Z(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new o.Z(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let e=0;e<t;e++){const t=new o.Z(r[3*e],r[3*e+1],r[3*e+2]);i[e]=t,o.Z.minimumByComponent(s,t,s),o.Z.maximumByComponent(a,t,a)}const c=n.runtimeNode;return c.instancingTranslationMin=s,c.instancingTranslationMax=a,e.typedArray=void 0,i}(u,u.count,e):(0,c.Z)(l.instancingTranslationMin)||(l.instancingTranslationMin=u.min,l.instancingTranslationMax=u.max),a.addDefine("HAS_INSTANCE_TRANSLATION");if(W(e,u.buffer,u.byteOffset,u.byteStride,n,"Translation"),!s)return;const p=(0,r.Z)(i);p.mode=b.Z.COLUMBUS_VIEW,B(e,p);let m=l.instancingTranslationBuffer2D;if(!(0,c.Z)(m)){const t=function(e,t,n,i){const r=O,s=L;D(t,r,s);const a=t.runtimeNode.instancingReferencePoint2D,c=e.length;for(let t=0;t<c;t++){const c=e[t],l=P(c,r,s,n,c);i[t]=o.Z.subtract(l,a,i[t])}return i}(h,e,p,h),n=function(e){const t=e.length,n=new Float32Array(3*t);for(let i=0;i<t;i++){const t=e[i],o=3*i;n[o+0]=t[0],n[o+1]=t[4],n[o+2]=t[8]}return n}(t);m=G(n,i),e.model._modelResources.push(m),l.instancingTranslationBuffer2D=m}W(e,m,0,void 0,n,"Translation2D")}(e,n,i,t,s)}(e,n,i,C,S),function(e,t,n,i){const o=n.attributes,r=e.shaderBuilder;for(let t=0;t<o.length;t++){const n=o[t];n.semantic===y.Z.FEATURE_ID&&(n.setIndex>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=n.setIndex+1),i.push({index:e.attributeIndex++,vertexBuffer:n.buffer,componentsPerAttribute:Z.Z.getNumberOfComponents(n.type),componentDatatype:n.componentDatatype,normalize:!1,offsetInBytes:n.byteOffset,strideInBytes:n.byteStride,instanceDivisor:1}),r.addAttribute("float",`a_instanceFeatureId_${n.setIndex}`))}}(e,0,i,C);const x={};if(i.transformInWorldSpace?(u.addDefine("USE_LEGACY_INSTANCING",void 0,p.Z.VERTEX),u.addUniform("mat4","u_instance_modifiedModelView",p.Z.VERTEX),u.addUniform("mat4","u_instance_nodeTransform",p.Z.VERTEX),x.u_instance_modifiedModelView=function(){let e=l.Z.multiplyTransformation(h.modelMatrix,f.components.transform,T);return S?l.Z.multiplyTransformation(n.context.uniformState.view3D,e,T):(n.mode!==b.Z.SCENE3D&&(e=d.Z.basisTo2D(n.mapProjection,e,T)),l.Z.multiplyTransformation(n.context.uniformState.view,e,T))},x.u_instance_nodeTransform=function(){return l.Z.multiplyTransformation(f.axisCorrectionMatrix,v.computedTransform,w)},u.addVertexLines(g.Z)):u.addVertexLines(_.Z),S){u.addDefine("USE_2D_INSTANCING",void 0,p.Z.VERTEX),u.addUniform("mat4","u_modelView2D",p.Z.VERTEX);const e=n.context,t=l.Z.fromTranslation(v.instancingReferencePoint2D,new l.Z);x.u_modelView2D=function(){return l.Z.multiplyTransformation(e.uniformState.view,t,E)}}e.uniformMap=(0,s.Z)(x,e.uniformMap),e.instanceCount=a,e.attributes.push.apply(e.attributes,C)}},C=new l.Z,x=new o.Z;function I(e,t,n,i,o){let r=l.Z.multiplyTransformation(t,e,C);return r=l.Z.multiplyTransformation(r,n,C),d.Z.basisTo2D(i.mapProjection,r,o)}function P(e,t,n,i,o){const r=l.Z.fromTranslation(e,C);let s=l.Z.multiplyTransformation(t,r,C);s=l.Z.multiplyTransformation(s,n,C);const a=l.Z.getTranslation(s,x);return v.Z.computeActualWgs84Position(i,a,o)}function D(e,t,n){const i=e.model,o=i.sceneGraph;e.runtimeNode.node.instances.transformInWorldSpace?(t=l.Z.multiplyTransformation(i.modelMatrix,o.components.transform,t),n=l.Z.multiplyTransformation(o.axisCorrectionMatrix,e.runtimeNode.computedTransform,n)):(t=l.Z.clone(o.computedModelMatrix,t),t=l.Z.multiplyTransformation(t,e.runtimeNode.computedTransform,t),n=l.Z.clone(l.Z.IDENTITY,n))}const O=new l.Z,L=new l.Z,N=new l.Z,M=new o.Z,R=new o.Z,F=new o.Z;function B(e,t){const n=e.runtimeNode,i=e.model.sceneGraph.computedModelMatrix,r=l.Z.multiplyByPoint(i,n.instancingTranslationMin,R),s=v.Z.computeActualWgs84Position(t,r,r),a=l.Z.multiplyByPoint(i,n.instancingTranslationMax,F),c=v.Z.computeActualWgs84Position(t,a,a);n.instancingReferencePoint2D=o.Z.lerp(s,c,.5,new o.Z)}function U(e){const t=e.length,n=new Float32Array(12*t);for(let i=0;i<t;i++){const t=e[i],o=12*i;n[o+0]=t[0],n[o+1]=t[4],n[o+2]=t[8],n[o+3]=t[12],n[o+4]=t[1],n[o+5]=t[5],n[o+6]=t[9],n[o+7]=t[13],n[o+8]=t[2],n[o+9]=t[6],n[o+10]=t[10],n[o+11]=t[14]}return n}const k=new o.Z,V=new u.Z,H=new o.Z;function z(e,t,n){const r=new Array(t),s=A.Z.getAttributeBySemantic(e,y.Z.TRANSLATION),a=A.Z.getAttributeBySemantic(e,y.Z.ROTATION),d=A.Z.getAttributeBySemantic(e,y.Z.SCALE),h=new o.Z(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),f=new o.Z(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),p=(0,c.Z)(s),m=(0,c.Z)(a),_=(0,c.Z)(d),g=p?s.typedArray:new Float32Array(3*t);let Z,b=m?a.typedArray:new Float32Array(4*t);m&&a.normalized&&(b=i.Z.dequantize(b,a.componentDatatype,a.type,t)),_?Z=d.typedArray:(Z=new Float32Array(3*t),Z.fill(1));for(let e=0;e<t;e++){const t=new o.Z(g[3*e],g[3*e+1],g[3*e+2],k);o.Z.maximumByComponent(h,t,h),o.Z.minimumByComponent(f,t,f);const n=new u.Z(b[4*e],b[4*e+1],b[4*e+2],m?b[4*e+3]:1,V),i=new o.Z(Z[3*e],Z[3*e+1],Z[3*e+2],H),s=l.Z.fromTranslationQuaternionRotationScale(t,n,i,new l.Z);r[e]=s}const v=n.runtimeNode;return v.instancingTranslationMin=f,v.instancingTranslationMax=h,p&&(s.typedArray=void 0),m&&(a.typedArray=void 0),_&&(d.typedArray=void 0),r}function G(e,t){const n=h.Z.createVertexBuffer({context:t.context,typedArray:e,usage:f.Z.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}function j(e,t,n,i){const o=a.Z.getSizeInBytes(a.Z.FLOAT),r=12*o,s=[{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:a.Z.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:r,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:a.Z.FLOAT,normalize:!1,offsetInBytes:4*o,strideInBytes:r,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:a.Z.FLOAT,normalize:!1,offsetInBytes:8*o,strideInBytes:r,instanceDivisor:1}],c=e.shaderBuilder;c.addAttribute("vec4",`a_instancing${i}Row0`),c.addAttribute("vec4",`a_instancing${i}Row1`),c.addAttribute("vec4",`a_instancing${i}Row2`),n.push.apply(n,s)}function W(e,t,n,i,o,r){o.push({index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:3,componentDatatype:a.Z.FLOAT,normalize:!1,offsetInBytes:n,strideInBytes:i,instanceDivisor:1}),e.shaderBuilder.addAttribute("vec3",`a_instance${r}`)}const q=S},240524:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({UNLIT:0,PBR:1})},825571:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11020),o=n(245929),r=n(104029),s=n(240524);const a={name:"LightingPipelineStage",process:function(e,t){const n=e.model,a=e.lightingOptions,c=e.shaderBuilder;(0,i.Z)(n.lightColor)&&(c.addDefine("USE_CUSTOM_LIGHT_COLOR",void 0,o.Z.FRAGMENT),c.addUniform("vec3","model_lightColorHdr",o.Z.FRAGMENT),e.uniformMap.model_lightColorHdr=function(){return n.lightColor}),a.lightingModel===s.Z.PBR?c.addDefine("LIGHTING_PBR",void 0,o.Z.FRAGMENT):c.addDefine("LIGHTING_UNLIT",void 0,o.Z.FRAGMENT),c.addFragmentLines(r.Z)}}},84618:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(11020),o=n(234146),r=n(660904),s=n(798336),a=n(664288),c=n(245929),l=n(431056),u=n(93876),d=n(475285),h=n(583982),f=n(677684),p=n(240524),m=n(708956);const _=h.Z.Material,g=h.Z.MetallicRoughness,Z=h.Z.SpecularGlossiness,y={name:"MaterialPipelineStage",_processTexture:v,_processTextureTransform:b};function b(e,t,n,i,o){const r=`HAS_${o}_TEXTURE_TRANSFORM`;e.addDefine(r,void 0,c.Z.FRAGMENT);const s=`${i}Transform`;e.addUniform("mat3",s,c.Z.FRAGMENT),t[s]=function(){return n.transform}}function v(e,t,n,r,s,l){e.addUniform("sampler2D",r,c.Z.FRAGMENT),t[r]=function(){return(0,o.Z)(n.texture,l)};const u=`HAS_${s}_TEXTURE`;e.addDefine(u,void 0,c.Z.FRAGMENT);const d=`v_texCoord_${n.texCoord}`,h=`TEXCOORD_${s}`;e.addDefine(h,d,c.Z.FRAGMENT);const f=n.transform;(0,i.Z)(f)&&!a.Z.equals(f,a.Z.IDENTITY)&&b(e,t,n,r,s)}y.process=function(e,t,n){const o=t.material,a=e.model,h=(0,i.Z)(a.classificationType),y=h,b=e.uniformMap,A=e.shaderBuilder,T=n.context.defaultTexture;!function(e,t,n,o,s,a,l){const u=e.emissiveFactor;if((0,i.Z)(u)&&!r.Z.equals(u,_.DEFAULT_EMISSIVE_FACTOR)){n.addUniform("vec3","u_emissiveFactor",c.Z.FRAGMENT),t.u_emissiveFactor=function(){return e.emissiveFactor},n.addDefine("HAS_EMISSIVE_FACTOR",void 0,c.Z.FRAGMENT);const o=e.emissiveTexture;(0,i.Z)(o)&&!l&&v(n,t,o,"u_emissiveTexture","EMISSIVE",a)}const d=e.normalTexture;(0,i.Z)(d)&&!l&&v(n,t,d,"u_normalTexture","NORMAL",s);const h=e.occlusionTexture;(0,i.Z)(h)&&!l&&v(n,t,h,"u_occlusionTexture","OCCLUSION",o)}(o,b,A,T,n.context.defaultNormalTexture,n.context.defaultEmissiveTexture,y),(0,i.Z)(o.specularGlossiness)?function(e,t,n,o,a){const l=e.specularGlossiness;n.addDefine("USE_SPECULAR_GLOSSINESS",void 0,c.Z.FRAGMENT);const u=l.diffuseTexture;(0,i.Z)(u)&&!a&&v(n,t,u,"u_diffuseTexture","DIFFUSE",o);const d=l.diffuseFactor;(0,i.Z)(d)&&!s.Z.equals(d,Z.DEFAULT_DIFFUSE_FACTOR)&&(n.addUniform("vec4","u_diffuseFactor",c.Z.FRAGMENT),t.u_diffuseFactor=function(){return l.diffuseFactor},n.addDefine("HAS_DIFFUSE_FACTOR",void 0,c.Z.FRAGMENT));const h=l.specularGlossinessTexture;(0,i.Z)(h)&&!a&&v(n,t,h,"u_specularGlossinessTexture","SPECULAR_GLOSSINESS",o);const f=l.specularFactor;(0,i.Z)(f)&&!r.Z.equals(f,Z.DEFAULT_SPECULAR_FACTOR)&&(n.addUniform("vec3","u_specularFactor",c.Z.FRAGMENT),t.u_specularFactor=function(){return l.specularFactor},n.addDefine("HAS_SPECULAR_FACTOR",void 0,c.Z.FRAGMENT));const p=l.glossinessFactor;(0,i.Z)(p)&&p!==Z.DEFAULT_GLOSSINESS_FACTOR&&(n.addUniform("float","u_glossinessFactor",c.Z.FRAGMENT),t.u_glossinessFactor=function(){return l.glossinessFactor},n.addDefine("HAS_GLOSSINESS_FACTOR",void 0,c.Z.FRAGMENT))}(o,b,A,T,y):function(e,t,n,o,r){const a=e.metallicRoughness;n.addDefine("USE_METALLIC_ROUGHNESS",void 0,c.Z.FRAGMENT);const l=a.baseColorTexture;(0,i.Z)(l)&&!r&&v(n,t,l,"u_baseColorTexture","BASE_COLOR",o);const u=a.baseColorFactor;(0,i.Z)(u)&&!s.Z.equals(u,g.DEFAULT_BASE_COLOR_FACTOR)&&(n.addUniform("vec4","u_baseColorFactor",c.Z.FRAGMENT),t.u_baseColorFactor=function(){return a.baseColorFactor},n.addDefine("HAS_BASE_COLOR_FACTOR",void 0,c.Z.FRAGMENT));const d=a.metallicRoughnessTexture;(0,i.Z)(d)&&!r&&v(n,t,d,"u_metallicRoughnessTexture","METALLIC_ROUGHNESS",o);const h=a.metallicFactor;(0,i.Z)(h)&&h!==g.DEFAULT_METALLIC_FACTOR&&(n.addUniform("float","u_metallicFactor",c.Z.FRAGMENT),t.u_metallicFactor=function(){return a.metallicFactor},n.addDefine("HAS_METALLIC_FACTOR",void 0,c.Z.FRAGMENT));const f=a.roughnessFactor;(0,i.Z)(f)&&f!==g.DEFAULT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_roughnessFactor",c.Z.FRAGMENT),t.u_roughnessFactor=function(){return a.roughnessFactor},n.addDefine("HAS_ROUGHNESS_FACTOR",void 0,c.Z.FRAGMENT))}(o,b,A,T,y);const w=m.Z.getAttributeBySemantic(t,f.Z.NORMAL),E=e.lightingOptions;o.unlit||!w||h?E.lightingModel=p.Z.UNLIT:E.lightingModel=p.Z.PBR;const S=a.backFaceCulling&&!o.doubleSided;e.renderStateOptions.cull.enabled=S;const C=e.alphaOptions;o.alphaMode===d.Z.BLEND?C.pass=l.Z.TRANSLUCENT:o.alphaMode===d.Z.MASK&&(C.alphaCutoff=o.alphaCutoff),A.addFragmentLines(u.Z),o.doubleSided&&A.addDefine("HAS_DOUBLE_SIDED_MATERIAL",void 0,c.Z.BOTH)};const A=y},436106:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(11020),o=n(245929),r=n(776499),s=n(242172),a=n(784246),c=n(708956);const l={name:"MetadataPipelineStage",STRUCT_ID_METADATA_VS:"MetadataVS",STRUCT_ID_METADATA_FS:"MetadataFS",STRUCT_NAME_METADATA:"Metadata",STRUCT_ID_METADATA_CLASS_VS:"MetadataClassVS",STRUCT_ID_METADATA_CLASS_FS:"MetadataClassFS",STRUCT_NAME_METADATA_CLASS:"MetadataClass",STRUCT_ID_METADATA_STATISTICS_VS:"MetadataStatisticsVS",STRUCT_ID_METADATA_STATISTICS_FS:"MetadataStatisticsFS",STRUCT_NAME_METADATA_STATISTICS:"MetadataStatistics",FUNCTION_ID_INITIALIZE_METADATA_VS:"initializeMetadataVS",FUNCTION_ID_INITIALIZE_METADATA_FS:"initializeMetadataFS",FUNCTION_SIGNATURE_INITIALIZE_METADATA:"void initializeMetadata(out Metadata metadata, out MetadataClass metadataClass, out MetadataStatistics metadataStatistics, ProcessedAttributes attributes)",FUNCTION_ID_SET_METADATA_VARYINGS:"setMetadataVaryings",FUNCTION_SIGNATURE_SET_METADATA_VARYINGS:"void setMetadataVaryings()",METADATA_CLASS_FIELDS:[{specName:"noData",shaderName:"noData"},{specName:"default",shaderName:"defaultValue"},{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"}],METADATA_STATISTICS_FIELDS:[{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"},{specName:"mean",shaderName:"mean",type:"float"},{specName:"median",shaderName:"median"},{specName:"standardDeviation",shaderName:"standardDeviation",type:"float"},{specName:"variance",shaderName:"variance",type:"float"},{specName:"sum",shaderName:"sum"}],process:function(e,t,n){const{shaderBuilder:u,model:p}=e,{structuralMetadata:m={},content:_}=p,g=_?.tileset.metadataExtension?.statistics,Z=function(e,t,n){return(0,i.Z)(e)?e.flatMap((e=>function(e,t,n){const{getAttributeByName:i,getAttributeInfo:r,sanitizeGlslIdentifier:s}=c.Z,a=e.class.id,l=n?.classes[a],u=Object.entries(e.properties),d=new Array(u.length);for(let e=0;e<u.length;e++){const[n,a]=u[e],c=i(t,a.attribute),{glslType:h,variableName:f}=r(c);d[e]={metadataVariable:s(n),property:a,type:a.classProperty.type,glslType:h,variableName:f,propertyStatistics:l?.properties[n],shaderDestination:o.Z.BOTH}}return d}(e,t,n))):[]}(m.propertyAttributes,t,g),y=function(e,t){return(0,i.Z)(e)?e.flatMap((e=>function(e,t){const{sanitizeGlslIdentifier:n}=c.Z,i=e.class.id,r=t?.classes[i],s=Object.entries(e.properties).filter((([e,t])=>t.isGpuCompatible())),a=new Array(s.length);for(let e=0;e<s.length;e++){const[t,i]=s[e];a[e]={metadataVariable:n(t),property:i,type:i.classProperty.type,glslType:i.getGlslType(),propertyStatistics:r?.properties[t],shaderDestination:o.Z.FRAGMENT}}return a}(e,t))):[]}(m.propertyTextures,g);!function(e,t){const n=new Set,r=new Set;for(let e=0;e<t.length;e++){const{type:o,glslType:s,propertyStatistics:c}=t[e];n.add(s),(0,i.Z)(c)&&o!==a.Z.ENUM&&r.add(s)}const s=l.METADATA_CLASS_FIELDS;for(const e of n)u(`${e}MetadataClass`,e,s);const c=l.METADATA_STATISTICS_FIELDS;for(const e of r)u(`${e}MetadataStatistics`,e,c);function u(t,n,i){e.addStruct(t,t,o.Z.BOTH);for(let o=0;o<i.length;o++){const{shaderName:r}=i[o],s="float"===i[o].type?d(n):n;e.addStructField(t,s,r)}}}(u,Z.concat(y)),function(e){e.addStruct(l.STRUCT_ID_METADATA_VS,l.STRUCT_NAME_METADATA,o.Z.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_FS,l.STRUCT_NAME_METADATA,o.Z.FRAGMENT),e.addStruct(l.STRUCT_ID_METADATA_CLASS_VS,l.STRUCT_NAME_METADATA_CLASS,o.Z.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_CLASS_FS,l.STRUCT_NAME_METADATA_CLASS,o.Z.FRAGMENT),e.addStruct(l.STRUCT_ID_METADATA_STATISTICS_VS,l.STRUCT_NAME_METADATA_STATISTICS,o.Z.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_STATISTICS_FS,l.STRUCT_NAME_METADATA_STATISTICS,o.Z.FRAGMENT),e.addFunction(l.FUNCTION_ID_INITIALIZE_METADATA_VS,l.FUNCTION_SIGNATURE_INITIALIZE_METADATA,o.Z.VERTEX),e.addFunction(l.FUNCTION_ID_INITIALIZE_METADATA_FS,l.FUNCTION_SIGNATURE_INITIALIZE_METADATA,o.Z.FRAGMENT),e.addFunction(l.FUNCTION_ID_SET_METADATA_VARYINGS,l.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS,o.Z.VERTEX)}(u),u.addVertexLines(s.Z),u.addFragmentLines(r.Z);for(let t=0;t<Z.length;t++)h(e,Z[t]);for(let t=0;t<y.length;t++)f(e,y[t])}},u={int:"float",ivec2:"vec2",ivec3:"vec3",ivec4:"vec4"};function d(e){const t=u[e];return(0,i.Z)(t)?t:e}function h(e,t){!function(e,t){const{shaderBuilder:n}=e,{metadataVariable:i,property:r,glslType:s}=t,a=g({valueExpression:`attributes.${t.variableName}`,renderResources:e,glslType:s,metadataVariable:i,shaderDestination:o.Z.BOTH,property:r});n.addStructField(l.STRUCT_ID_METADATA_VS,s,i),n.addStructField(l.STRUCT_ID_METADATA_FS,s,i);const c=`metadata.${i} = ${a};`;n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,[c]),n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,[c])}(e,t),p(e.shaderBuilder,t),m(e.shaderBuilder,t)}function f(e,t){!function(e,t){const{shaderBuilder:n,uniformMap:i}=e,{metadataVariable:r,glslType:s,property:a}=t,{texCoord:c,channels:u,index:d,texture:h}=a.textureReader,f=`u_propertyTexture_${d}`;i.hasOwnProperty(f)||(n.addUniform("sampler2D",f,o.Z.FRAGMENT),i[f]=()=>h),n.addStructField(l.STRUCT_ID_METADATA_FS,s,r);const p=`texture(${f}, attributes.texCoord_${c}).${u}`,m=`metadata.${r} = ${g({valueExpression:a.unpackInShader(p),renderResources:e,glslType:s,metadataVariable:r,shaderDestination:o.Z.FRAGMENT,property:a})};`;n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,[m])}(e,t),p(e.shaderBuilder,t),m(e.shaderBuilder,t)}function p(e,t){const{classProperty:n}=t.property,{metadataVariable:i,glslType:r,shaderDestination:s}=t,a=_(l.METADATA_CLASS_FIELDS,n,`metadataClass.${i}`,r),c=`${r}MetadataClass`;e.addStructField(l.STRUCT_ID_METADATA_CLASS_FS,c,i),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,a),o.Z.includesVertexShader(s)&&(e.addStructField(l.STRUCT_ID_METADATA_CLASS_VS,c,i),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,a))}function m(e,t){const{propertyStatistics:n}=t;if(!(0,i.Z)(n))return;const{metadataVariable:r,type:s,glslType:c}=t;if(s===a.Z.ENUM)return;const u=_(l.METADATA_STATISTICS_FIELDS,n,`metadataStatistics.${r}`,c),d=`${c}MetadataStatistics`;e.addStructField(l.STRUCT_ID_METADATA_STATISTICS_FS,d,r),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,u),o.Z.includesVertexShader(t.shaderDestination)&&(e.addStructField(l.STRUCT_ID_METADATA_STATISTICS_VS,d,r),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,u))}function _(e,t,n,o){return(0,i.Z)(t)?e.map((function(e){const r=t[e.specName];if((0,i.Z)(r))return`${n}.${e.shaderName} = ${o}(${r});`})).filter(i.Z):[]}function g(e){const{valueExpression:t,property:n}=e;if(!n.hasValueTransform)return t;const i=e.metadataVariable,o=`u_${i}_offset`,r=`u_${i}_scale`,{shaderBuilder:s,uniformMap:a}=e.renderResources,{glslType:c,shaderDestination:l}=e;s.addUniform(c,o,l),s.addUniform(c,r,l);const{offset:u,scale:d}=n;return a[o]=()=>u,a[r]=()=>d,`czm_valueTransform(${o}, ${r}, ${t})`}const Z=l},849507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>oe});var i=n(762031),o=n(660904),r=n(532056),s=n(790087),a=n(865029),c=n(35961),l=n(11020),u=n(234146),d=n(906439),h=n(765153),f=n(722313),p=n(6821),m=n(282910),_=n(664288),g=n(659635),Z=n(205522),y=n(217066),b=n(431056),v=n(753577),A=n(66990),T=n(272424),w=n(990778),E=n(135595),S=n(993910),C=n(714233),x=n(638452),I=n(534890),P=n(347962),D=n(381009),O=n(148746),L=n(435154),N=n(585623),M=n(584934),R=n(474508),F=n(872862),B=n(420136),U=n(708956),k=n(590292),V=n(854519),H=n(629011);function z(e){e=(0,u.Z)(e,u.Z.EMPTY_OBJECT),s.Z.typeOf.object("options.loader",e.loader),s.Z.typeOf.object("options.resource",e.resource),this._loader=e.loader,this._resource=e.resource,this.type=(0,u.Z)(e.type,B.Z.GLTF),this.modelMatrix=g.Z.clone((0,u.Z)(e.modelMatrix,g.Z.IDENTITY)),this._modelMatrix=g.Z.clone(this.modelMatrix),this._scale=(0,u.Z)(e.scale,1),this._minimumPixelSize=(0,u.Z)(e.minimumPixelSize,0),this._maximumScale=e.maximumScale,this._clampedScale=(0,l.Z)(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=_.Z.clone(_.Z.IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._customShader=e.customShader,this._content=e.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new N.Z(this),this._clampAnimations=(0,u.Z)(e.clampAnimations,!0),this._userAnimationDirty=!1,this._id=e.id,this._idDirty=!1,this._color=c.Z.clone(e.color),this._colorBlendMode=(0,u.Z)(e.colorBlendMode,A.Z.HIGHLIGHT),this._colorBlendAmount=(0,u.Z)(e.colorBlendAmount,.5);const t=(0,u.Z)(e.silhouetteColor,c.Z.RED);this._silhouetteColor=c.Z.clone(t),this._silhouetteSize=(0,u.Z)(e.silhouetteSize,0),this._silhouetteDirty=!1,this._silhouetteId=void 0,this._cull=(0,u.Z)(e.cull,!0),this._opaquePass=(0,u.Z)(e.opaquePass,b.Z.OPAQUE),this._allowPicking=(0,u.Z)(e.allowPicking,!0),this._show=(0,u.Z)(e.show,!0),this._style=void 0,this._styleDirty=!1,this._styleCommandsNeeded=void 0;let n=(0,u.Z)(e.featureIdLabel,"featureId_0");"number"==typeof n&&(n=`featureId_${n}`),this._featureIdLabel=n;let r=(0,u.Z)(e.instanceFeatureIdLabel,"instanceFeatureId_0");"number"==typeof r&&(r=`instanceFeatureId_${r}`),this._instanceFeatureIdLabel=r,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._pipelineResources=[],this._modelResources=[],this._pickIds=[],this._boundingSphere=new i.Z,this._initialRadius=void 0,this._heightReference=(0,u.Z)(e.heightReference,w.Z.NONE),this._heightDirty=this._heightReference!==w.Z.NONE,this._removeUpdateHeightCallback=void 0,this._clampedModelMatrix=void 0;const d=e.scene;(0,l.Z)(d)&&(0,l.Z)(d.terrainProviderChanged)&&(this._terrainProviderChangedCallback=d.terrainProviderChanged.addEventListener((function(){this._heightDirty=!0}),this)),this._scene=d,this._distanceDisplayCondition=e.distanceDisplayCondition;const h=new S.Z(e.pointCloudShading);this._pointCloudShading=h,this._attenuation=h.attenuation,this._pointCloudBackFaceCulling=h.backFaceCulling;const f=e.clippingPlanes;(0,l.Z)(f)&&void 0===f.owner?v.Z.setOwner(f,this,"_clippingPlanes"):this._clippingPlanes=f,this._clippingPlanesState=0,this._clippingPlanesMatrix=g.Z.clone(g.Z.IDENTITY),this._lightColor=o.Z.clone(e.lightColor),this._imageBasedLighting=(0,l.Z)(e.imageBasedLighting)?e.imageBasedLighting:new E.Z,this._shouldDestroyImageBasedLighting=!(0,l.Z)(e.imageBasedLighting),this._backFaceCulling=(0,u.Z)(e.backFaceCulling,!0),this._backFaceCullingDirty=!1,this._shadows=(0,u.Z)(e.shadows,I.Z.ENABLED),this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=(0,u.Z)(e.debugShowBoundingVolume,!1),this._enableDebugWireframe=(0,u.Z)(e.enableDebugWireframe,!1),this._enableShowOutline=(0,u.Z)(e.enableShowOutline,!0),this._debugWireframe=(0,u.Z)(e.debugWireframe,!1),!0===this._debugWireframe&&!1===this._enableDebugWireframe&&this.type===B.Z.GLTF&&(0,k.Z)("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltf, otherwise debugWireframe will be ignored.");let p=e.credit;"string"==typeof p&&(p=new a.Z(p)),this._credit=p,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=(0,u.Z)(e.showCreditsOnScreen,!1),this._showCreditsOnScreenDirty=!0,this._splitDirection=(0,u.Z)(e.splitDirection,P.Z.NONE),this._enableShowOutline=(0,u.Z)(e.enableShowOutline,!0),this.showOutline=(0,u.Z)(e.showOutline,!0),this.outlineColor=(0,u.Z)(e.outlineColor,c.Z.BLACK),this._classificationType=e.classificationType,this._statistics=new F.Z,this._sceneMode=void 0,this._projectTo2D=(0,u.Z)(e.projectTo2D,!1),this._skipLevelOfDetail=!1,this._ignoreCommands=(0,u.Z)(e.ignoreCommands,!1),this._texturesLoadedPromise=void 0,this._completeLoad=void 0,this._rejectLoad=void 0,this._completeTexturesLoad=void 0,this._rejectTexturesLoad=void 0,(0,l.Z)(this._loader._promise)?(this._readyPromise=Promise.resolve(this),this._texturesLoadedPromise=Promise.resolve(this)):(this._readyPromise=new Promise(((e,t)=>{this._completeLoad=()=>(e(this),!1),this._rejectLoad=e=>(t(e),!1)})),this._loader instanceof V.Z?this._texturesLoadedPromise=Promise.resolve(this):this._texturesLoadedPromise=new Promise(((e,t)=>{this._completeTexturesLoad=()=>(e(this),!1),this._rejectTexturesLoad=e=>(t(e),!1)})),this._loader.load().catch((e=>{this.isDestroyed()||!(0,l.Z)(this._loader)||this._loader.isDestroyed()||(this._rejectLoad=this._rejectLoad(U.Z.getError("model",this._resource,e)))}))),this._errorEvent=new m.Z,this._readyEvent=new m.Z,this._texturesReadyEvent=new m.Z,this._sceneGraph=void 0,this._nodesByName={},this.pickObject=e.pickObject}function G(e,t){e._errorEvent.numberOfListeners>0?e._errorEvent.raiseEvent(t):console.log(t)}function j(e,t){if(!(0,l.Z)(e)&&!(0,l.Z)(t))return!1;if((0,l.Z)(e)!==(0,l.Z)(t))return!0;const n=e.alpha,i=t.alpha;return Math.floor(n)!==Math.floor(i)||Math.ceil(n)!==Math.ceil(i)}Object.defineProperties(z.prototype,{ready:{get:function(){return this._ready}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},incrementallyLoadTextures:{get:function(){return(0,u.Z)(this._loader.incrementallyLoadTextures,!1)}},texturesReadyEvent:{get:function(){return this._texturesReadyEvent}},readyPromise:{get:function(){return(0,d.Z)("Model.readyPromise","Model.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in 1.107. Use Model.fromGltfAsync and Model.readyEvent instead."),this._readyPromise}},texturesLoadedPromise:{get:function(){return(0,d.Z)("Model.texturesLoadedPromise","Model.texturesLoadedPromise was deprecated in CesiumJS 1.104.  It will be removed in 1.107. Use Model.fromGltfAsync and Model.texturesReadyEvent instead."),this._texturesLoadedPromise}},loader:{get:function(){return this._loader}},statistics:{get:function(){return this._statistics}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(e){this._clampAnimations=e}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){s.Z.defined("pointCloudShading",e),e!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=e}},customShader:{get:function(){return this._customShader},set:function(e){e!==this._customShader&&this.resetDrawCommands(),this._customShader=e}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},heightReference:{get:function(){return this._heightReference},set:function(e){e!==this._heightReference&&(this._heightDirty=!0),this._heightReference=e}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if((0,l.Z)(e)&&e.far<=e.near)throw new h.Z("far must be greater than near");this._distanceDisplayCondition=p.Z.clone(e,this._distanceDisplayCondition)}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(e){this._featureTableId=e}},featureTables:{get:function(){return this._featureTables},set:function(e){this._featureTables=e}},id:{get:function(){return this._id},set:function(e){e!==this._id&&(this._idDirty=!0),this._id=e}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(e){this._style=e,this._styleDirty=!0}},color:{get:function(){return this._color},set:function(e){j(e,this._color)&&this.resetDrawCommands(),this._color=c.Z.clone(e,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(e){this._colorBlendMode=e}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(e){this._colorBlendAmount=e}},silhouetteColor:{get:function(){return this._silhouetteColor},set:function(e){if(!c.Z.equals(e,this._silhouetteColor)){const t=j(e,this._silhouetteColor);this._silhouetteDirty=this._silhouetteDirty||t}this._silhouetteColor=c.Z.clone(e,this._silhouetteColor)}},silhouetteSize:{get:function(){return this._silhouetteSize},set:function(e){if(e!==this._silhouetteSize){const t=this._silhouetteSize,n=e>0&&0===t||0===e&&t>0;this._silhouetteDirty=this._silhouetteDirty||n,this._backFaceCullingDirty=this._backFaceCullingDirty||n}this._silhouetteSize=e}},boundingSphere:{get:function(){if(!this._ready)throw new h.Z("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");return $(this,(0,l.Z)(this._clampedModelMatrix)?this._clampedModelMatrix:this.modelMatrix),this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=e}},debugWireframe:{get:function(){return this._debugWireframe},set:function(e){this._debugWireframe!==e&&this.resetDrawCommands(),this._debugWireframe=e,!0===this._debugWireframe&&!1===this._enableDebugWireframe&&this.type===B.Z.GLTF&&(0,k.Z)("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltfAsync, otherwise debugWireframe will be ignored.")}},show:{get:function(){return this._show},set:function(e){this._show=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"==typeof e&&(e=`featureId_${e}`),s.Z.typeOf.string("value",e),e!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"==typeof e&&(e=`instanceFeatureId_${e}`),s.Z.typeOf.string("value",e),e!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=e}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&(v.Z.setOwner(e,this,"_clippingPlanes"),this.resetDrawCommands())}},lightColor:{get:function(){return this._lightColor},set:function(e){(0,l.Z)(e)!==(0,l.Z)(this._lightColor)&&this.resetDrawCommands(),this._lightColor=o.Z.clone(e,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){s.Z.typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){e!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=e}},scale:{get:function(){return this._scale},set:function(e){e!==this._scale&&(this._updateModelMatrix=!0),this._scale=e}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(e){e!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=e}},maximumScale:{get:function(){return this._maximumScale},set:function(e){e!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=e}},shadows:{get:function(){return this._shadows},set:function(e){e!==this._shadows&&(this._shadowsDirty=!0),this._shadows=e}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen!==e&&(this._showCreditsOnScreenDirty=!0),this._showCreditsOnScreen=e}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&this.resetDrawCommands(),this._splitDirection=e}},classificationType:{get:function(){return this._classificationType}},pickIds:{get:function(){return this._pickIds}},styleCommandsNeeded:{get:function(){return this._styleCommandsNeeded}}}),z.prototype.getNode=function(e){if(!this._ready)throw new h.Z("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");return s.Z.typeOf.string("name",e),this._nodesByName[e]},z.prototype.setArticulationStage=function(e,t){if(s.Z.typeOf.number("value",t),!this._ready)throw new h.Z("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");this._sceneGraph.setArticulationStage(e,t)},z.prototype.applyArticulations=function(){if(!this._ready)throw new h.Z("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");this._sceneGraph.applyArticulations()},z.prototype.makeStyleDirty=function(){this._styleDirty=!0},z.prototype.resetDrawCommands=function(){this._drawCommandsBuilt=!1};const W=new g.Z,q=new _.Z,Y=new g.Z;function X(e){const t=e.featureTables[e.featureTableId];e._styleCommandsNeeded=H.Z.getStyleCommandsNeeded(t.featuresLength,t.batchTexture.translucentFeaturesLength)}z.prototype.update=function(e){let t=!1;try{t=function(e,t){return!(!e._resourcesLoaded||!e._texturesLoaded)||(t.afterRender.push((()=>!0)),e._loader.process(t))}(this,e)}catch(e){if(this._loader.incrementallyLoadTextures)if("TextureError"===e.name)G(this,e),this._rejectTexturesLoad=this._rejectTexturesLoad&&this._rejectTexturesLoad(e);else{const t=U.Z.getError("model",this._resource,e);G(this,t),this._rejectLoad=this._rejectLoad&&this._rejectLoad(t)}else{const t=U.Z.getError("model",this._resource,e);G(this,t),this._rejectLoad=this._rejectLoad&&this._rejectLoad(t),this._rejectTexturesLoad=this._rejectTexturesLoad&&this._rejectTexturesLoad(t)}}if(function(e,t){(0,l.Z)(e._customShader)&&e._customShader.update(t)}(this,e),function(e,t){e._imageBasedLighting.update(t),e._imageBasedLighting.shouldRegenerateShaders&&e.resetDrawCommands()}(this,e),!this._resourcesLoaded&&t){this._resourcesLoaded=!0;const e=this._loader.components;if(!(0,l.Z)(e)){if(this._loader.isUnloaded())return;const e=U.Z.getError("model",this._resource,new y.Z("Failed to load model."));G(e),this._rejectLoad=this._rejectLoad&&this._rejectLoad(e)}const t=e.structuralMetadata;(0,l.Z)(t)&&t.propertyTableCount>0&&function(e,t){const n=e._featureTables,i=t.propertyTables,o=i.length;for(let t=0;t<o;t++){const o=i[t],r=new M.Z({model:e,propertyTable:o});n.push(r)}}(this,t);const n=new R.Z({model:this,modelComponents:e});this._sceneGraph=n,this._gltfCredits=n.components.asset.credits}var n;this._resourcesLoaded&&e.mode!==C.Z.MORPHING&&(function(e){if(!e._featureTableIdDirty)return;e._featureTableIdDirty=!1;const t=e._sceneGraph.components,n=t.structuralMetadata;(0,l.Z)(n)&&n.propertyTableCount>0&&(e.featureTableId=function(e,t){const n=t._featureIdLabel,i=t._instanceFeatureIdLabel;let o,r,s,a;for(o=0;o<e.nodes.length;o++)if(a=e.nodes[o],(0,l.Z)(a.instances)&&(s=U.Z.getFeatureIdsByLabel(a.instances.featureIds,i),(0,l.Z)(s)&&(0,l.Z)(s.propertyTableId)))return s.propertyTableId;for(o=0;o<e.nodes.length;o++)for(a=e.nodes[o],r=0;r<a.primitives.length;r++){const e=a.primitives[r],t=U.Z.getFeatureIdsByLabel(e.featureIds,n);if((0,l.Z)(t))return t.propertyTableId}if(1===t._featureTables.length)return 0}(t,e),e._styleDirty=!0,e.resetDrawCommands())}(this),(n=this)._styleDirty&&(n.applyStyle(n._style),n._styleDirty=!1),function(e,t){const n=e._featureTables,i=n.length;let o=!1;for(let e=0;e<i;e++)n[e].update(t),n[e].styleCommandsNeededDirty&&(o=!0);o&&X(e)}(this,e),function(e){const t=e.pointCloudShading;t.attenuation!==e._attenuation&&(e.resetDrawCommands(),e._attenuation=t.attenuation),t.backFaceCulling!==e._pointCloudBackFaceCulling&&(e.resetDrawCommands(),e._pointCloudBackFaceCulling=t.backFaceCulling)}(this),function(e,t){e._silhouetteDirty&&(ne(t)&&e.resetDrawCommands(),e._silhouetteDirty=!1)}(this,e),function(e,t){const n=e.hasSkipLevelOfDetail(t);n!==e._skipLevelOfDetail&&(e.resetDrawCommands(),e._skipLevelOfDetail=n)}(this,e),function(e,t){let n=0;e.isClippingEnabled()&&(e._clippingPlanes.owner===e&&e._clippingPlanes.update(t),n=e._clippingPlanes.clippingPlanesState),n!==e._clippingPlanesState&&(e.resetDrawCommands(),e._clippingPlanesState=n)}(this,e),function(e,t){t.mode!==e._sceneMode&&(e._projectTo2D?e.resetDrawCommands():e._updateModelMatrix=!0,e._sceneMode=t.mode)}(this,e),this._defaultTexture=e.context.defaultTexture,function(e,t){e._drawCommandsBuilt||(e.destroyPipelineResources(),e._sceneGraph.buildDrawCommands(t),e._drawCommandsBuilt=!0)}(this,e),function(e,t){if(!g.Z.equals(e.modelMatrix,e._modelMatrix)){if(t.mode!==C.Z.SCENE3D&&e._projectTo2D)throw new h.Z("Model.modelMatrix cannot be changed in 2D or Columbus View if projectTo2D is true.");e._updateModelMatrix=!0,e._modelMatrix=g.Z.clone(e.modelMatrix,e._modelMatrix)}}(this,e),function(e){if(!e._updateModelMatrix&&!e._heightDirty&&0===e._minimumPixelSize)return;(0,l.Z)(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);const t=e._scene;if(!(0,l.Z)(t)||!(0,l.Z)(t.globe)||e.heightReference===w.Z.NONE){if(e.heightReference!==w.Z.NONE)throw new h.Z("Height reference is not supported without a scene and globe.");return void(e._clampedModelMatrix=void 0)}const n=t.globe,i=n.ellipsoid,o=e.modelMatrix;J.x=o[12],J.y=o[13],J.z=o[14];const s=i.cartesianToCartographic(J);(0,l.Z)(e._clampedModelMatrix)||(e._clampedModelMatrix=g.Z.clone(o,new g.Z));const a=n._surface;e._removeUpdateHeightCallback=a.updateHeight(s,ee(e,i,s));const c=n.getHeight(s);if((0,l.Z)(c)){const t=ee(e,i,s);r.Z.clone(s,Q),Q.height=c,i.cartographicToCartesian(Q,J),t(J)}e._heightDirty=!1,e._updateModelMatrix=!0}(this),function(e,t){if(!e._updateModelMatrix&&0===e._minimumPixelSize)return;const n=(0,l.Z)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;$(e,n),function(e,t,n){let i=e.scale;if(0!==e.minimumPixelSize&&!e._projectTo2D){const o=n.context,r=Math.max(o.drawingBufferWidth,o.drawingBufferHeight);g.Z.getTranslation(t,J),e._sceneMode!==C.Z.SCENE3D&&x.Z.computeActualWgs84Position(n,J,J);const s=e._boundingSphere.radius,a=function(e,t,n){return K.center=e,K.radius=t,n.camera.getPixelSize(K,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}(J,s,n),c=1/a;Math.min(c*(2*s),r)<e.minimumPixelSize&&(i=e.minimumPixelSize*a/(2*e._initialRadius))}e._computedScale=(0,l.Z)(e.maximumScale)?Math.min(e.maximumScale,i):i}(e,n,t)}(this,e),function(e,t){const n=(0,l.Z)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix,i=(0,u.Z)(e.referenceMatrix,n),o=t.context,r=e._imageBasedLighting;if(r.useSphericalHarmonicCoefficients||r.useSpecularEnvironmentMaps){let t=q,n=W;n=g.Z.multiply(o.uniformState.view3D,i,n),t=g.Z.getMatrix3(n,t),t=_.Z.getRotation(t,t),e._iblReferenceFrameMatrix=_.Z.transpose(t,e._iblReferenceFrameMatrix)}if(e.isClippingEnabled()){let t=Y;t=g.Z.multiply(o.uniformState.view3D,i,t),t=g.Z.multiply(t,e._clippingPlanes.modelMatrix,t),e._clippingPlanesMatrix=g.Z.inverseTranspose(t,e._clippingPlanesMatrix)}}(this,e),this._ready?(this._loader.incrementallyLoadTextures&&!this._texturesLoaded&&this._loader.texturesLoaded&&(this.resetDrawCommands(),this._texturesLoaded=!0,this._texturesReadyEvent.raiseEvent(this),this._completeTexturesLoad=this._completeTexturesLoad&&this._completeTexturesLoad()),function(e){if(!e._idDirty)return;e._idDirty=!1;const t=e._id,n=e._pickIds,i=n.length;for(let e=0;e<i;++e)n[e].object.id=t}(this),function(e,t){const n=e._sceneGraph;if(e._updateModelMatrix||0!==e._minimumPixelSize){const i=(0,l.Z)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;n.updateModelMatrix(i,t),e._updateModelMatrix=!1}e._backFaceCullingDirty&&(n.updateBackFaceCulling(e._backFaceCulling),e._backFaceCullingDirty=!1),e._shadowsDirty&&(n.updateShadows(e._shadows),e._shadowsDirty=!1),e._debugShowBoundingVolumeDirty&&(n.updateShowBoundingVolume(e._debugShowBoundingVolume),e._debugShowBoundingVolumeDirty=!1);let i=!1;(0,l.Z)(e.classificationType)||(i=e._userAnimationDirty||e._activeAnimations.update(t)),n.update(t,i),e._userAnimationDirty=!1}(this,e),function(e){if(!e._showCreditsOnScreenDirty)return;e._showCreditsOnScreenDirty=!1;const t=e._showCreditsOnScreen;(0,l.Z)(e._credit)&&(e._credit.showOnScreen=t||e._credit._isDefaultToken);const n=e._resourceCredits,i=n.length;for(let e=0;e<i;e++)n[e].showOnScreen=t||n[e]._isDefaultToken;const o=e._gltfCredits,r=o.length;for(let e=0;e<r;e++)o[e].showOnScreen=t||o[e]._isDefaultToken}(this),function(e,t){const n=function(e,t){const n=e.distanceDisplayCondition;if(!(0,l.Z)(n))return!0;const i=n.near*n.near,r=n.far*n.far;let s;if(t.mode===C.Z.SCENE2D){const e=.5*(t.camera.frustum.right-t.camera.frustum.left);s=e*e}else{const n=g.Z.getTranslation(e.modelMatrix,te);x.Z.computeActualWgs84Position(t,n,n),s=o.Z.distanceSquared(n,t.camera.positionWC)}return s>=i&&s<=r}(e,t),i=e.isInvisible(),r=e.hasSilhouette(t),s=e._show&&0!==e._computedScale&&n&&(!i||r),a=t.passes,c=a.render||a.pick&&e.allowPicking;s&&!e._ignoreCommands&&c&&(function(e,t){const n=t.creditDisplay,i=e._credit;(0,l.Z)(i)&&n.addCreditToNextFrame(i);const o=e._resourceCredits,r=o.length;for(let e=0;e<r;e++)n.addCreditToNextFrame(o[e]);const s=e._gltfCredits,a=s.length;for(let e=0;e<a;e++)n.addCreditToNextFrame(s[e])}(e,t),e._sceneGraph.pushDrawCommands(t))}(this,e)):e.afterRender.push((()=>{this._ready=!0,this._readyEvent.raiseEvent(this),this._completeLoad=this._completeLoad&&this._completeLoad(),this._loader.incrementallyLoadTextures||(this._texturesLoaded=!0,this._texturesReadyEvent.raiseEvent(this),this._completeTexturesLoad=this._completeTexturesLoad&&this._completeTexturesLoad())})))};const J=new o.Z,Q=new r.Z;function $(e,t){e._clampedScale=(0,l.Z)(e._maximumScale)?Math.min(e._scale,e._maximumScale):e._scale,e._boundingSphere.center=o.Z.multiplyByScalar(e._sceneGraph.boundingSphere.center,e._clampedScale,e._boundingSphere.center),e._boundingSphere.radius=e._initialRadius*e._clampedScale,e._boundingSphere=i.Z.transform(e._boundingSphere,t,e._boundingSphere)}const K=new i.Z;function ee(e,t,n){return function(i){if(e.heightReference===w.Z.RELATIVE_TO_GROUND){const e=t.cartesianToCartographic(i,Q);e.height+=n.height,t.cartographicToCartesian(e,i)}const o=e._clampedModelMatrix;g.Z.clone(e.modelMatrix,o),o[12]=i.x,o[13]=i.y,o[14]=i.z,e._heightDirty=!0}}const te=new o.Z;function ne(e){return e.context.stencilBuffer}function ie(e,t,n){return{loader:e,type:t,resource:n.resource,show:n.show,modelMatrix:n.modelMatrix,scale:n.scale,minimumPixelSize:n.minimumPixelSize,maximumScale:n.maximumScale,id:n.id,allowPicking:n.allowPicking,clampAnimations:n.clampAnimations,shadows:n.shadows,debugShowBoundingVolume:n.debugShowBoundingVolume,enableDebugWireframe:n.enableDebugWireframe,debugWireframe:n.debugWireframe,cull:n.cull,opaquePass:n.opaquePass,customShader:n.customShader,content:n.content,heightReference:n.heightReference,scene:n.scene,distanceDisplayCondition:n.distanceDisplayCondition,color:n.color,colorBlendAmount:n.colorBlendAmount,colorBlendMode:n.colorBlendMode,silhouetteColor:n.silhouetteColor,silhouetteSize:n.silhouetteSize,enableShowOutline:n.enableShowOutline,showOutline:n.showOutline,outlineColor:n.outlineColor,clippingPlanes:n.clippingPlanes,lightColor:n.lightColor,imageBasedLighting:n.imageBasedLighting,backFaceCulling:n.backFaceCulling,credit:n.credit,showCreditsOnScreen:n.showCreditsOnScreen,splitDirection:n.splitDirection,projectTo2D:n.projectTo2D,featureIdLabel:n.featureIdLabel,instanceFeatureIdLabel:n.instanceFeatureIdLabel,pointCloudShading:n.pointCloudShading,classificationType:n.classificationType,pickObject:n.pickObject}}z.prototype.isTranslucent=function(){const e=this.color;return(0,l.Z)(e)&&e.alpha>0&&e.alpha<1},z.prototype.isInvisible=function(){const e=this.color;return(0,l.Z)(e)&&0===e.alpha},z.prototype.hasSilhouette=function(e){return ne(e)&&this._silhouetteSize>0&&this._silhouetteColor.alpha>0&&!(0,l.Z)(this._classificationType)},z.prototype.hasSkipLevelOfDetail=function(e){if(!B.Z.is3DTiles(this.type))return!1;const t=e.context.stencilBuffer,n=this._content.tileset;return t&&n.isSkippingLevelOfDetail},z.prototype.isClippingEnabled=function(){const e=this._clippingPlanes;return(0,l.Z)(e)&&e.enabled&&0!==e.length},z.prototype.isDestroyed=function(){return!1},z.prototype.destroy=function(){const e=this._loader;(0,l.Z)(e)&&e.destroy();const t=this._featureTables;if((0,l.Z)(t)){const e=t.length;for(let n=0;n<e;n++)t[n].destroy()}this.destroyPipelineResources(),this.destroyModelResources(),(0,l.Z)(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),(0,l.Z)(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0);const n=this._clippingPlanes;(0,l.Z)(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,(0,f.Z)(this)},z.prototype.destroyPipelineResources=function(){const e=this._pipelineResources;for(let t=0;t<e.length;t++)e[t].destroy();this._pipelineResources.length=0,this._pickIds.length=0},z.prototype.destroyModelResources=function(){const e=this._modelResources;for(let t=0;t<e.length;t++)e[t].destroy();this._modelResources.length=0},z.fromGltf=function(e){if((0,d.Z)("Model.fromGltf","Model.fromGltf was deprecated in CesiumJS 1.104.  It will be removed in 1.107. Use Model.fromGltfAsync instead."),e=(0,u.Z)(e,u.Z.EMPTY_OBJECT),!(0,l.Z)(e.url)&&!(0,l.Z)(e.gltf))throw new h.Z("options.url is required.");const t=(0,u.Z)(e.url,e.gltf),n={releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:(0,l.Z)(e.classificationType)},i=(0,u.Z)(e.basePath,""),o=Z.Z.createIfNeeded(i);(0,l.Z)(t.asset)?(n.gltfJson=t,n.baseResource=o,n.gltfResource=o):t instanceof Uint8Array?(n.typedArray=t,n.baseResource=o,n.gltfResource=o):n.gltfResource=Z.Z.createIfNeeded(t);const r=ie(new T.Z(n),(0,l.Z)(e.content)?B.Z.TILE_GLTF:B.Z.GLTF,e);return r.resource=n.gltfResource,new z(r)},z.fromGltfAsync=async function(e){if(e=(0,u.Z)(e,u.Z.EMPTY_OBJECT),!(0,l.Z)(e.url)&&!(0,l.Z)(e.gltf))throw new h.Z("options.url is required.");const t=(0,u.Z)(e.url,e.gltf),n={releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:(0,l.Z)(e.classificationType)},i=(0,u.Z)(e.basePath,""),o=Z.Z.createIfNeeded(i);(0,l.Z)(t.asset)?(n.gltfJson=t,n.baseResource=o,n.gltfResource=o):t instanceof Uint8Array?(n.typedArray=t,n.baseResource=o,n.gltfResource=o):n.gltfResource=Z.Z.createIfNeeded(t);const r=new T.Z(n),a=(0,l.Z)(e.content)?B.Z.TILE_GLTF:B.Z.GLTF,c=n.gltfResource,d=ie(r,a,e);d.resource=c;try{await r.load()}catch(e){throw r.destroy(),U.Z.getError("model",c,e)}const f=e.gltfCallback;(0,l.Z)(f)&&(s.Z.typeOf.func("options.gltfCallback",f),f(r.gltfJson));const p=new z(d),m=p._resource.credits;if((0,l.Z)(m)){const e=m.length;for(let t=0;t<e;t++)p._resourceCredits.push(m[t])}return p},z.fromB3dm=async function(e){const t={b3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:(0,l.Z)(e.classificationType)},n=new D.Z(t);try{await n.load();return new z(ie(n,B.Z.TILE_B3DM,e))}catch(e){throw n.destroy(),e}},z.fromPnts=async function(e){const t={arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,loadAttributesFor2D:e.projectTo2D},n=new V.Z(t);try{await n.load();return new z(ie(n,B.Z.TILE_PNTS,e))}catch(e){throw n.destroy(),e}},z.fromI3dm=async function(e){const t={i3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline},n=new L.Z(t);try{await n.load();return new z(ie(n,B.Z.TILE_I3DM,e))}catch(e){throw n.destroy(),e}},z.fromGeoJson=async function(e){const t={geoJson:e.geoJson};return new z(ie(new O.Z(t),B.Z.TILE_GEOJSON,e))},z.prototype.applyColorAndShow=function(e){const t=this._color,n=(0,l.Z)(e)&&(0,l.Z)(e.color),i=(0,l.Z)(e)&&(0,l.Z)(e.show);this._color=n?e.color.evaluateColor(void 0,this._color):c.Z.clone(c.Z.WHITE,this._color),this._show=!i||e.show.evaluate(void 0),j(t,this._color)&&this.resetDrawCommands()},z.prototype.applyStyle=function(e){const t=this.type===B.Z.TILE_PNTS,n=(0,l.Z)(this.featureTableId)&&this.featureTables[this.featureTableId].featuresLength>0,i=(0,l.Z)(this.structuralMetadata)?this.structuralMetadata.propertyAttributes:void 0,o=(0,l.Z)(i)&&(0,l.Z)(i[0]);!t||n&&!o?n?(this.featureTables[this.featureTableId].applyStyle(e),X(this)):(this.applyColorAndShow(e),this._styleCommandsNeeded=void 0):this.resetDrawCommands()};const oe=z},630194:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(35961),o=n(394579),r=n(11020),s=n(722313),a=n(906439),c=n(765153),l=n(431056),u=n(285605),d=n(849507);function h(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this._model=void 0,this._metadata=void 0,this._group=void 0,this._ready=!1,this._resolveContent=void 0,this._readyPromise=void 0}function f(e,t,n,i){const r={cull:!1,releaseGltfJson:!0,opaquePass:l.Z.CESIUM_3D_TILE,modelMatrix:t.computedTransform,upAxis:e._modelUpAxis,forwardAxis:e._modelForwardAxis,incrementallyLoadTextures:!1,customShader:e.customShader,content:n,colorBlendMode:e.colorBlendMode,colorBlendAmount:e.colorBlendAmount,lightColor:e.lightColor,imageBasedLighting:e.imageBasedLighting,featureIdLabel:e.featureIdLabel,instanceFeatureIdLabel:e.instanceFeatureIdLabel,pointCloudShading:e.pointCloudShading,clippingPlanes:e.clippingPlanes,backFaceCulling:e.backFaceCulling,shadows:e.shadows,showCreditsOnScreen:e.showCreditsOnScreen,splitDirection:e.splitDirection,enableDebugWireframe:e._enableDebugWireframe,debugWireframe:e.debugWireframe,projectTo2D:e._projectTo2D,enableShowOutline:e._enableShowOutline,showOutline:e.showOutline,outlineColor:e.outlineColor};return(0,o.Z)(i,r)}Object.defineProperties(h.prototype,{featuresLength:{get:function(){const e=this._model,t=e.featureTables,n=e.featureTableId;return(0,r.Z)(t)&&(0,r.Z)(t[n])?t[n].featuresLength:0}},pointsLength:{get:function(){return this._model.statistics.pointsLength}},trianglesLength:{get:function(){return this._model.statistics.trianglesLength}},geometryByteLength:{get:function(){return this._model.statistics.geometryByteLength}},texturesByteLength:{get:function(){return this._model.statistics.texturesByteLength}},batchTableByteLength:{get:function(){const e=this._model.statistics;return e.propertyTablesByteLength+e.batchTexturesByteLength}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,a.Z)("Model3DTileContent.readyPromise","Model3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Model3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){const e=this._model,t=e.featureTables,n=e.featureTableId;if((0,r.Z)(t)&&(0,r.Z)(t[n]))return t[n]}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),h.prototype.getFeature=function(e){const t=this._model,n=t.featureTableId;if(!(0,r.Z)(n))throw new c.Z("No feature ID set is selected. Make sure Cesium3DTileset.featureIdLabel or Cesium3DTileset.instanceFeatureIdLabel is defined");const i=t.featureTables[n];if(!(0,r.Z)(i))throw new c.Z("No feature table found for the selected feature ID set");const o=i.featuresLength;if(!(0,r.Z)(e)||e<0||e>=o)throw new c.Z(`featureId is required and must be between 0 and featuresLength - 1 (${o-1}).`);return i.getFeature(e)},h.prototype.hasProperty=function(e,t){const n=this._model,i=n.featureTableId;return!!(0,r.Z)(i)&&n.featureTables[i].hasProperty(e,t)},h.prototype.applyDebugSettings=function(e,t){t=e?t:i.Z.WHITE,0===this.featuresLength?this._model.color=t:(0,r.Z)(this.batchTable)&&this.batchTable.setAllColor(t)},h.prototype.applyStyle=function(e){this._model.style=e},h.prototype.update=function(e,t){const n=this._model,i=this._tile;n.colorBlendAmount=e.colorBlendAmount,n.colorBlendMode=e.colorBlendMode,n.modelMatrix=i.computedTransform,n.customShader=e.customShader,n.featureIdLabel=e.featureIdLabel,n.instanceFeatureIdLabel=e.instanceFeatureIdLabel,n.lightColor=e.lightColor,n.imageBasedLighting=e.imageBasedLighting,n.backFaceCulling=e.backFaceCulling,n.shadows=e.shadows,n.showCreditsOnScreen=e.showCreditsOnScreen,n.splitDirection=e.splitDirection,n.debugWireframe=e.debugWireframe,n.showOutline=e.showOutline,n.outlineColor=e.outlineColor,n.pointCloudShading=e.pointCloudShading;const o=e.clippingPlanes;n.referenceMatrix=e.clippingPlanesOriginMatrix,(0,r.Z)(o)&&i.clippingPlanesDirty&&(n._clippingPlanes=o.enabled&&i._isClipped?o:void 0),(0,r.Z)(o)&&(0,r.Z)(n._clippingPlanes)&&n._clippingPlanes!==o&&(n._clippingPlanes=o,n._clippingPlanesState=0),n.update(t),!this._ready&&n.ready&&(n.activeAnimations.addAll({loop:u.Z.REPEAT}),this._ready=!0,this._resolveContent=this._resolveContent&&this._resolveContent(this))},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),(0,s.Z)(this)},h.fromGltf=async function(e,t,n,i){const o=new h(e,t,n),r=f(e,t,o,{gltf:i,basePath:n}),s=e.vectorClassificationOnly?void 0:e.classificationType;r.classificationType=s;const a=await d.Z.fromGltfAsync(r);return o._model=a,o._readyPromise=new Promise((e=>{o._resolveContent=e})),o},h.fromB3dm=async function(e,t,n,i,o){const r=new h(e,t,n),s=f(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),a=e.vectorClassificationOnly?void 0:e.classificationType;s.classificationType=a;const c=await d.Z.fromB3dm(s);return r._model=c,r._readyPromise=new Promise((e=>{r._resolveContent=e})),r},h.fromI3dm=async function(e,t,n,i,o){const r=new h(e,t,n),s=f(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),a=await d.Z.fromI3dm(s);return r._model=a,r._readyPromise=new Promise((e=>{r._resolveContent=e})),r},h.fromPnts=async function(e,t,n,i,o){const r=new h(e,t,n),s=f(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),a=await d.Z.fromPnts(s);return r._model=a,r._readyPromise=new Promise((e=>{r._resolveContent=e})),r},h.fromGeoJson=async function(e,t,n,i){const o=new h(e,t,n),r=f(e,t,o,{geoJson:i,resource:n}),s=await d.Z.fromGeoJson(r);return o._model=s,o._readyPromise=new Promise((e=>{o._resolveContent=e})),o};const p=h},248525:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=function(){this.pass=void 0,this.alphaCutoff=void 0}},952941:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(234146),o=n(11020),r=n(282910),s=n(791364),a=n(285605),c=n(607441),l=n(107117);function u(e,t,n){this._animation=t,this._name=t.name,this._runtimeChannels=void 0,this._startTime=s.Z.clone(n.startTime),this._delay=(0,i.Z)(n.delay,0),this._stopTime=s.Z.clone(n.stopTime),this.removeOnStop=(0,i.Z)(n.removeOnStop,!1),this._multiplier=(0,i.Z)(n.multiplier,1),this._reverse=(0,i.Z)(n.reverse,!1),this._loop=(0,i.Z)(n.loop,a.Z.NONE),this._animationTime=n.animationTime,this._prevAnimationDelta=void 0,this.start=new r.Z,this.update=new r.Z,this.stop=new r.Z,this._state=c.Z.STOPPED,this._computedStartTime=void 0,this._duration=void 0;const u=this;this._raiseStartEvent=function(){u.start.raiseEvent(e,u)},this._updateEventTime=0,this._raiseUpdateEvent=function(){u.update.raiseEvent(e,u,u._updateEventTime)},this._raiseStopEvent=function(){u.stop.raiseEvent(e,u)},this._model=e,this._localStartTime=void 0,this._localStopTime=void 0,function(e){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;const i=e._model.sceneGraph,r=e._animation.channels,s=r.length,a=[];for(let c=0;c<s;c++){const s=r[c],u=s.target;if(!(0,o.Z)(u))continue;const d=u.node.index,h=i._runtimeNodes[d],f=new l.Z({channel:s,runtimeAnimation:e,runtimeNode:h}),p=s.sampler.input;t=Math.min(t,p[0]),n=Math.max(n,p[p.length-1]),a.push(f)}e._runtimeChannels=a,e._localStartTime=t,e._localStopTime=n}(this)}Object.defineProperties(u.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}},animationTime:{get:function(){return this._animationTime}}}),u.prototype.animate=function(e){const t=this._runtimeChannels,n=t.length;for(let i=0;i<n;i++)t[i].animate(e)};const d=u},107117:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(660904),o=n(790087),r=n(809120),s=n(234146),a=n(11020),c=n(501121),l=n(515604),u=n(27410),d=n(583982),h=n(835511),f=n(360846),p=n(598220);const m=d.Z.AnimatedPropertyType;function _(e){const t=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).channel,n=e.runtimeAnimation,r=e.runtimeNode;o.Z.typeOf.object("options.channel",t),o.Z.typeOf.object("options.runtimeAnimation",n),o.Z.typeOf.object("options.runtimeNode",r),this._channel=t,this._runtimeAnimation=n,this._runtimeNode=r,this._splines=[],this._path=void 0,function(e){const t=e._channel,n=t.sampler,o=n.input,r=n.output,s=n.interpolation,c=t.target.path,u=e._runtimeNode,d=function(e,t,n,i,o){const r=[];if(i===m.WEIGHTS){const s=t.length/o;let a,c;for(a=0;a<o;a++){const u=new Array(s);let d=a;if(n===l.Z.CUBICSPLINE)for(c=0;c<s;c+=3)u[c]=t[d],u[c+1]=t[d+o],u[c+2]=t[d+2*o],d+=3*o;else for(c=0;c<s;c++)u[c]=t[d],d+=o;r.push(g(e,u,n,i))}}else r.push(g(e,t,n,i));return r}(o,r,s,c,(0,a.Z)(u.morphWeights)?u.morphWeights.length:1);switch(e._splines=d,e._path=c,c){case m.TRANSLATION:case m.SCALE:Z=new i.Z;break;case m.ROTATION:Z=new f.Z;case m.WEIGHTS:}}(this)}function g(e,t,n,i){if(1===e.length&&1===t.length)return new r.Z(t[0]);switch(n){case l.Z.STEP:return new h.Z({times:e,points:t});case l.Z.CUBICSPLINE:return function(e,t){const n=[],i=[],o=[],r=t.length;for(let e=0;e<r;e+=3)i.push(t[e]),n.push(t[e+1]),o.push(t[e+2]);return i.splice(0,1),o.length=o.length-1,new c.Z({times:e,points:n,inTangents:i,outTangents:o})}(e,t);case l.Z.LINEAR:return i===m.ROTATION?new p.Z({times:e,points:t}):new u.Z({times:e,points:t})}}let Z;Object.defineProperties(_.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}}),_.prototype.animate=function(e){const t=this._splines,n=this._path,i=this._runtimeAnimation.model,o=this._runtimeNode;if(n===m.WEIGHTS){const n=o.morphWeights,r=n.length;for(let o=0;o<r;o++){const r=t[o],s=i.clampAnimations?r.clampTime(e):r.wrapTime(e);n[o]=r.evaluate(s)}}else{if(o.userAnimated)return;{const r=t[0],s=i.clampAnimations?r.clampTime(e):r.wrapTime(e);o[n]=r.evaluate(s,Z)}}};const y=_},585623:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(234146),o=n(11020),r=n(765153),s=n(282910),a=n(791364),c=n(344485),l=n(952941),u=n(285605),d=n(607441);function h(e){this.animationAdded=new s.Z,this.animationRemoved=new s.Z,this.animateWhilePaused=!1,this._model=e,this._runtimeAnimations=[],this._previousTime=void 0}function f(e,t,n){const i=e._model,o=new l.Z(i,t,n);return e._runtimeAnimations.push(o),e.animationAdded.raiseEvent(i,o),o}Object.defineProperties(h.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}}),h.prototype.add=function(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT);const t=this._model;if(!t.ready)throw new r.Z("Animations are not loaded.  Wait for Model.ready to be true.");const n=t.sceneGraph.components.animations;if(!(0,o.Z)(e.name)&&!(0,o.Z)(e.index))throw new r.Z("Either options.name or options.index must be defined.");if((0,o.Z)(e.multiplier)&&e.multiplier<=0)throw new r.Z("options.multiplier must be greater than zero.");if((0,o.Z)(e.index)&&(e.index>=n.length||e.index<0))throw new r.Z("options.index must be a valid animation index.");let s=e.index;if((0,o.Z)(s))return f(this,n[s],e);const a=n.length;for(let t=0;t<a;++t)if(n[t].name===e.name){s=t;break}if(!(0,o.Z)(s))throw new r.Z("options.name must be a valid animation name.");return f(this,n[s],e)},h.prototype.addAll=function(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT);const t=this._model;if(!t.ready)throw new r.Z("Animations are not loaded.  Wait for Model.ready to be true.");if((0,o.Z)(e.multiplier)&&e.multiplier<=0)throw new r.Z("options.multiplier must be greater than zero.");const n=t.sceneGraph.components.animations,s=[],a=n.length;for(let t=0;t<a;++t){const i=f(this,n[t],e);s.push(i)}return s},h.prototype.remove=function(e){if(!(0,o.Z)(e))return!1;const t=this._runtimeAnimations,n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.animationRemoved.raiseEvent(this._model,e),!0)},h.prototype.removeAll=function(){const e=this._model,t=this._runtimeAnimations,n=t.length;this._runtimeAnimations.length=0;for(let i=0;i<n;++i)this.animationRemoved.raiseEvent(e,t[i])},h.prototype.contains=function(e){return!!(0,o.Z)(e)&&-1!==this._runtimeAnimations.indexOf(e)},h.prototype.get=function(e){if(!(0,o.Z)(e))throw new r.Z("index is required.");if(e>=this._runtimeAnimations.length||e<0)throw new r.Z("index must be valid within the range of the collection");return this._runtimeAnimations[e]};const p=[];function m(e,t,n){return function(){e.animationRemoved.raiseEvent(t,n)}}h.prototype.update=function(e){const t=this._runtimeAnimations;let n=t.length;if(0===n)return this._previousTime=void 0,!1;if(!this.animateWhilePaused&&a.Z.equals(e.time,this._previousTime))return!1;this._previousTime=a.Z.clone(e.time,this._previousTime);let r=!1;const s=e.time,l=this._model;for(let l=0;l<n;++l){const n=t[l];(0,o.Z)(n._computedStartTime)||(n._computedStartTime=a.Z.addSeconds((0,i.Z)(n.startTime,s),n.delay,new a.Z)),(0,o.Z)(n._duration)||(n._duration=n.localStopTime*(1/n.multiplier));const h=n._computedStartTime,f=n._duration,m=n.stopTime,_=a.Z.lessThanOrEquals(h,s),g=(0,o.Z)(m)&&a.Z.greaterThan(s,m);let Z=0;if(0!==f){const e=a.Z.secondsDifference(g?m:s,h);Z=(0,o.Z)(n._animationTime)?n._animationTime(f,e):e/f}const y=n.loop===u.Z.REPEAT||n.loop===u.Z.MIRRORED_REPEAT,b=(_||y&&!(0,o.Z)(n.startTime))&&(Z<=1||y)&&!g;if((Z!==n._prevAnimationDelta||b===(n._state===d.Z.STOPPED))&&(n._prevAnimationDelta=Z,b||n._state===d.Z.ANIMATING)){if(b&&n._state===d.Z.STOPPED&&(n._state=d.Z.ANIMATING,n.start.numberOfListeners>0&&e.afterRender.push(n._raiseStartEvent)),n.loop===u.Z.REPEAT)Z-=Math.floor(Z);else if(n.loop===u.Z.MIRRORED_REPEAT){const e=Math.floor(Z),t=Z-e;Z=e%2==1?1-t:t}n.reverse&&(Z=1-Z);let t=Z*f*n.multiplier;t=c.Z.clamp(t,n.localStartTime,n.localStopTime),n.animate(t),n.update.numberOfListeners>0&&(n._updateEventTime=t,e.afterRender.push(n._raiseUpdateEvent)),r=!0,b||(n._state=d.Z.STOPPED,n.stop.numberOfListeners>0&&e.afterRender.push(n._raiseStopEvent),n.removeOnStop&&p.push(n))}}n=p.length;for(let i=0;i<n;++i){const n=p[i];t.splice(t.indexOf(n),1),e.afterRender.push(m(this,l,n))}return p.length=0,r};const _=h},90111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(234146),r=n(11020),s=n(659635),a=n(153918);function c(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).articulation,n=e.sceneGraph;i.Z.typeOf.object("options.articulation",t),i.Z.typeOf.object("options.sceneGraph",n),this._articulation=t,this._sceneGraph=n,this._name=t.name,this._runtimeStages=[],this._runtimeStagesByName={},this._runtimeNodes=[],this._dirty=!0,function(e){const t=e.articulation.stages,n=t.length,i=e._runtimeStages,o=e._runtimeStagesByName;for(let r=0;r<n;r++){const n=t[r],s=new a.Z({stage:n,runtimeArticulation:e});i.push(s),o[n.name]=s}}(this)}Object.defineProperties(c.prototype,{articulation:{get:function(){return this._articulation}},sceneGraph:{get:function(){return this._sceneGraph}},name:{get:function(){return this._name}},runtimeStages:{get:function(){return this._runtimeStages}},runtimeNodes:{get:function(){return this._runtimeNodes}}}),c.prototype.setArticulationStage=function(e,t){const n=this._runtimeStagesByName[e];(0,r.Z)(n)&&(n.currentValue=t)};const l=new s.Z,u=new s.Z;c.prototype.apply=function(){if(!this._dirty)return;this._dirty=!1;let e,t=s.Z.clone(s.Z.IDENTITY,l);const n=this._runtimeStages,i=n.length;for(e=0;e<i;e++)t=n[e].applyStageToMatrix(t);const o=this._runtimeNodes,r=o.length;for(e=0;e<r;e++){const n=o[e],i=s.Z.multiplyTransformation(n.originalTransform,t,u);n.transform=i}};const d=c},153918:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(979811),o=n(660904),r=n(344485),s=n(790087),a=n(234146),c=n(664288),l=n(659635);const u=r.Z.EPSILON16;function d(e){const t=(e=(0,a.Z)(e,a.Z.EMPTY_OBJECT)).stage,n=e.runtimeArticulation;s.Z.typeOf.object("options.stage",t),s.Z.typeOf.object("options.runtimeArticulation",n),this._stage=t,this._runtimeArticulation=n,this._name=t.name,this._type=t.type,this._minimumValue=t.minimumValue,this._maximumValue=t.maximumValue,this._currentValue=t.initialValue}Object.defineProperties(d.prototype,{stage:{get:function(){return this._stage}},runtimeArticulation:{get:function(){return this._runtimeArticulation}},name:{get:function(){return this._name}},type:{get:function(){return this._type}},minimumValue:{get:function(){return this._minimumValue}},maximumValue:{get:function(){return this._maximumValue}},currentValue:{get:function(){return this._currentValue},set:function(e){s.Z.typeOf.number("value",e),e=r.Z.clamp(e,this.minimumValue,this.maximumValue),r.Z.equalsEpsilon(this._currentValue,e,u)||(this._currentValue=e,this.runtimeArticulation._dirty=!0)}}});const h=new o.Z,f=new c.Z;d.prototype.applyStageToMatrix=function(e){s.Z.typeOf.object("result",e);const t=this.type,n=this.currentValue,o=h;let a;switch(t){case i.Z.XROTATE:a=c.Z.fromRotationX(r.Z.toRadians(n),f),e=l.Z.multiplyByMatrix3(e,a,e);break;case i.Z.YROTATE:a=c.Z.fromRotationY(r.Z.toRadians(n),f),e=l.Z.multiplyByMatrix3(e,a,e);break;case i.Z.ZROTATE:a=c.Z.fromRotationZ(r.Z.toRadians(n),f),e=l.Z.multiplyByMatrix3(e,a,e);break;case i.Z.XTRANSLATE:o.x=n,o.y=0,o.z=0,e=l.Z.multiplyByTranslation(e,o,e);break;case i.Z.YTRANSLATE:o.x=0,o.y=n,o.z=0,e=l.Z.multiplyByTranslation(e,o,e);break;case i.Z.ZTRANSLATE:o.x=0,o.y=0,o.z=n,e=l.Z.multiplyByTranslation(e,o,e);break;case i.Z.XSCALE:o.x=n,o.y=1,o.z=1,e=l.Z.multiplyByScale(e,o,e);break;case i.Z.YSCALE:o.x=1,o.y=n,o.z=1,e=l.Z.multiplyByScale(e,o,e);break;case i.Z.ZSCALE:o.x=1,o.y=1,o.z=n,e=l.Z.multiplyByScale(e,o,e);break;case i.Z.UNIFORMSCALE:e=l.Z.multiplyByUniformScale(e,n,e)}return e};const p=d},612588:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(405254),o=n(753577),r=n(394579),s=n(35961),a=n(931980),c=n(245929);const l={name:"ModelClippingPlanesPipelineStage"},u=new i.Z;l.process=function(e,t,n){const i=t.clippingPlanes,l=n.context,d=e.shaderBuilder;d.addDefine("HAS_CLIPPING_PLANES",void 0,c.Z.FRAGMENT),d.addDefine("CLIPPING_PLANES_LENGTH",i.length,c.Z.FRAGMENT),i.unionClippingRegions&&d.addDefine("UNION_CLIPPING_REGIONS",void 0,c.Z.FRAGMENT),o.Z.useFloatTexture(l)&&d.addDefine("USE_CLIPPING_PLANES_FLOAT_TEXTURE",void 0,c.Z.FRAGMENT);const h=o.Z.getTextureResolution(i,l,u);d.addDefine("CLIPPING_PLANES_TEXTURE_WIDTH",h.x,c.Z.FRAGMENT),d.addDefine("CLIPPING_PLANES_TEXTURE_HEIGHT",h.y,c.Z.FRAGMENT),d.addUniform("sampler2D","model_clippingPlanes",c.Z.FRAGMENT),d.addUniform("vec4","model_clippingPlanesEdgeStyle",c.Z.FRAGMENT),d.addUniform("mat4","model_clippingPlanesMatrix",c.Z.FRAGMENT),d.addFragmentLines(a.Z);const f={model_clippingPlanes:function(){return i.texture},model_clippingPlanesEdgeStyle:function(){const e=s.Z.clone(i.edgeColor);return e.alpha=i.edgeWidth,e},model_clippingPlanesMatrix:function(){return t._clippingPlanesMatrix}};e.uniformMap=(0,r.Z)(f,e.uniformMap)};const d=l},147714:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(66990),o=n(394579),r=n(831402),s=n(431056),a=n(245929);const c={name:"ModelColorPipelineStage",COLOR_UNIFORM_NAME:"model_color",COLOR_BLEND_UNIFORM_NAME:"model_colorBlend",process:function(e,t,n){const l=e.shaderBuilder;l.addDefine("HAS_MODEL_COLOR",void 0,a.Z.FRAGMENT),l.addFragmentLines(r.Z);const u={},d=t.color;0!==d.alpha||t.hasSilhouette(n)||(e.renderStateOptions.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),d.alpha<1&&(e.alphaOptions.pass=s.Z.TRANSLUCENT),l.addUniform("vec4",c.COLOR_UNIFORM_NAME,a.Z.FRAGMENT),u[c.COLOR_UNIFORM_NAME]=function(){return t.color},l.addUniform("float",c.COLOR_BLEND_UNIFORM_NAME,a.Z.FRAGMENT),u[c.COLOR_BLEND_UNIFORM_NAME]=function(){return i.Z.getColorBlend(t.colorBlendMode,t.colorBlendAmount)},e.uniformMap=(0,o.Z)(u,e.uniformMap)}},l=c},127828:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(762031),o=n(405254),r=n(344485),s=n(790087),a=n(823438),c=n(234146),l=n(11020),u=n(659635),d=n(248894),h=n(661679),f=n(431056),p=n(417148),m=n(973591),_=n(53839),g=n(714233),Z=n(534890),y=n(822948),b=n(489709),v=n(721902),A=n(629011);function T(e){const t=(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT)).command,n=e.primitiveRenderResources;s.Z.typeOf.object("options.command",t),s.Z.typeOf.object("options.primitiveRenderResources",n);const o=n.model;this._model=o;const r=n.runtimePrimitive;this._runtimePrimitive=r;const a=t.pass===f.Z.TRANSLUCENT,l=!r.primitive.material.doubleSided&&!a,d=n.hasSilhouette,h=!a&&!d,p=n.hasSkipLevelOfDetail&&!a,m=d;this._command=t,this._modelMatrix=u.Z.clone(t.modelMatrix),this._boundingVolume=i.Z.clone(t.boundingVolume),this._modelMatrix2D=new u.Z,this._boundingVolume2D=new i.Z,this._modelMatrix2DDirty=!1,this._backFaceCulling=t.renderState.cull.enabled,this._cullFace=t.renderState.cull.face,this._shadows=o.shadows,this._debugShowBoundingVolume=t.debugShowBoundingVolume,this._usesBackFaceCulling=l,this._needsTranslucentCommand=h,this._needsSkipLevelOfDetailCommands=p,this._needsSilhouetteCommands=m,this._originalCommand=void 0,this._translucentCommand=void 0,this._skipLodBackfaceCommand=void 0,this._skipLodStencilCommand=void 0,this._silhouetteModelCommand=void 0,this._silhouetteColorCommand=void 0,this._derivedCommands=[],this._has2DCommands=!1,function(e){const t=e._command;t.modelMatrix=e._modelMatrix,t.boundingVolume=e._boundingVolume;const n=e._model,i=e._usesBackFaceCulling,o=e._derivedCommands;e._originalCommand=new w({command:t,updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0,is2D:!1}),o.push(e._originalCommand),e._needsTranslucentCommand&&(e._translucentCommand=new w({command:x(t),updateShadows:!0,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!0}),o.push(e._translucentCommand)),e._needsSkipLevelOfDetailCommands&&(e._skipLodBackfaceCommand=new w({command:D(t),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:i,updateDebugShowBoundingVolume:!1}),e._skipLodStencilCommand=new w({command:O(t),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),o.push(e._skipLodBackfaceCommand),o.push(e._skipLodStencilCommand)),e._needsSilhouetteCommands&&(e._silhouetteModelCommand=new w({command:I(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),e._silhouetteColorCommand=new w({command:P(t,n),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!1}),o.push(e._silhouetteModelCommand),o.push(e._silhouetteColorCommand))}(this)}function w(e){this.command=e.command,this.updateShadows=e.updateShadows,this.updateBackFaceCulling=e.updateBackFaceCulling,this.updateCullFace=e.updateCullFace,this.updateDebugShowBoundingVolume=e.updateDebugShowBoundingVolume,this.is2D=(0,c.Z)(e.is2D,!1),this.derivedCommand2D=void 0}function E(e,t,n){e.push(t.command),n&&e.push(t.derivedCommand2D.command)}function S(e,t){if(t.mode!==g.Z.SCENE2D||e.model._projectTo2D)return!1;const n=e.model.sceneGraph._boundingSphere2D,i=n.center.y-n.radius,o=n.center.y+n.radius,s=t.mapProjection.ellipsoid.maximumRadius*r.Z.PI;return i<s&&o>s||i<-s&&o>-s}function C(e,t){if(!(0,l.Z)(t))return;const n=w.clone(t),i=h.Z.shallowClone(t.command);return i.modelMatrix=e._modelMatrix2D,i.boundingVolume=e._boundingVolume2D,n.command=i,n.updateShadows=!1,n.is2D=!0,t.derivedCommand2D=n,e._derivedCommands.push(n),n}function x(e){const t=h.Z.shallowClone(e);t.pass=f.Z.TRANSLUCENT;const n=(0,a.Z)(e.renderState,!0);return n.cull.enabled=!1,n.depthMask=!1,n.blending=m.Z.ALPHA_BLEND,t.renderState=p.Z.fromCache(n),t}function I(e,t){const n=t._silhouetteId%255,i=h.Z.shallowClone(e),o=(0,a.Z)(e.renderState,!0);return o.stencilTest={enabled:!0,frontFunction:d.Z.ALWAYS,backFunction:d.Z.ALWAYS,reference:n,mask:-1,frontOperation:{fail:d.Z.KEEP,zFail:d.Z.KEEP,zPass:d.Z.REPLACE},backOperation:{fail:d.Z.KEEP,zFail:d.Z.KEEP,zPass:d.Z.REPLACE}},t.isInvisible()&&(o.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),i.renderState=p.Z.fromCache(o),i}function P(e,t){const n=t._silhouetteId%255,i=h.Z.shallowClone(e),o=(0,a.Z)(e.renderState,!0);o.cull.enabled=!1,(e.pass===f.Z.TRANSLUCENT||t.silhouetteColor.alpha<1)&&(i.pass=f.Z.TRANSLUCENT,o.depthMask=!1,o.blending=m.Z.ALPHA_BLEND),o.stencilTest={enabled:!0,frontFunction:d.Z.NOTEQUAL,backFunction:d.Z.NOTEQUAL,reference:n,mask:-1,frontOperation:{fail:d.Z.KEEP,zFail:d.Z.KEEP,zPass:d.Z.KEEP},backOperation:{fail:d.Z.KEEP,zFail:d.Z.KEEP,zPass:d.Z.KEEP}};const r=(0,a.Z)(e.uniformMap);return r.model_silhouettePass=function(){return!0},i.renderState=p.Z.fromCache(o),i.uniformMap=r,i.castShadows=!1,i.receiveShadows=!1,i}function D(e){const t=h.Z.shallowClone(e),n=(0,a.Z)(e.renderState,!0);n.cull.enabled=!0,n.cull.face=_.Z.FRONT,n.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n.polygonOffset={enabled:!0,factor:5,units:5};const i=(0,a.Z)(t.uniformMap),r=new o.Z(5,5);return i.u_polygonOffset=function(){return r},t.renderState=p.Z.fromCache(n),t.uniformMap=i,t.castShadows=!1,t.receiveShadows=!1,t}function O(e){const t=h.Z.shallowClone(e),n=(0,a.Z)(e.renderState,!0),{stencilTest:i}=n;return i.enabled=!0,i.mask=y.Z.SKIP_LOD_MASK,i.reference=y.Z.CESIUM_3D_TILE_MASK,i.frontFunction=b.Z.GREATER_OR_EQUAL,i.frontOperation.zPass=v.Z.REPLACE,i.backFunction=b.Z.GREATER_OR_EQUAL,i.backOperation.zPass=v.Z.REPLACE,n.stencilMask=y.Z.CESIUM_3D_TILE_MASK|y.Z.SKIP_LOD_MASK,t.renderState=p.Z.fromCache(n),t}w.clone=function(e){return new w({command:e.command,updateShadows:e.updateShadows,updateBackFaceCulling:e.updateBackFaceCulling,updateCullFace:e.updateCullFace,updateDebugShowBoundingVolume:e.updateDebugShowBoundingVolume,is2D:e.is2D,derivedCommand2D:e.derivedCommand2D})},Object.defineProperties(T.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},model:{get:function(){return this._model}},primitiveType:{get:function(){return this._command.primitiveType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=u.Z.clone(e,this._modelMatrix),this._modelMatrix2DDirty=!0,this._boundingVolume=i.Z.transform(this.runtimePrimitive.boundingSphere,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},shadows:{get:function(){return this._shadows},set:function(e){this._shadows=e,function(e){const t=e.shadows,n=Z.Z.castShadows(t),i=Z.Z.receiveShadows(t),o=e._derivedCommands;for(let e=0;e<o.length;++e){const t=o[e];if(t.updateShadows){const e=t.command;e.castShadows=n,e.receiveShadows=i}}}(this)}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){this._backFaceCulling!==e&&(this._backFaceCulling=e,function(e){const t=e.backFaceCulling,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];if(i.updateBackFaceCulling){const e=i.command,n=(0,a.Z)(e.renderState,!0);n.cull.enabled=t,e.renderState=p.Z.fromCache(n)}}}(this))}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,function(e){const t=e.cullFace,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];if(i.updateCullFace){const e=i.command,n=(0,a.Z)(e.renderState,!0);n.cull.face=t,e.renderState=p.Z.fromCache(n)}}}(this))}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolume=e,function(e){const t=e.debugShowBoundingVolume,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];i.updateDebugShowBoundingVolume&&(i.command.debugShowBoundingVolume=t)}}(this))}}}),T.prototype.pushCommands=function(e,t){const n=S(this,e);var o;n&&!this._has2DCommands&&(C(o=this,o._originalCommand),C(o,o._translucentCommand),C(o,o._skipLodBackfaceCommand),C(o,o._skipLodStencilCommand),C(o,o._silhouetteModelCommand),C(o,o._silhouetteColorCommand),this._has2DCommands=!0,this._modelMatrix2DDirty=!0),this._modelMatrix2DDirty&&(function(e,t){const n=e._modelMatrix;e._modelMatrix2D=u.Z.clone(n,e._modelMatrix2D),e._modelMatrix2D[13]-=2*r.Z.sign(n[13])*r.Z.PI*t.mapProjection.ellipsoid.maximumRadius,e._boundingVolume2D=i.Z.transform(e.runtimePrimitive.boundingSphere,e._modelMatrix2D,e._boundingVolume2D)}(this,e),this._modelMatrix2DDirty=!1);const s=this.model.styleCommandsNeeded;if(!this._needsTranslucentCommand||!(0,l.Z)(s)||(s!==A.Z.ALL_OPAQUE&&E(t,this._translucentCommand,n),s!==A.Z.ALL_TRANSLUCENT)){if(this._needsSkipLevelOfDetailCommands){const{tileset:e,tile:i}=this._model.content;if(e.hasMixedContent)return i._finalResolution||E(e._backfaceCommands,this._skipLodBackfaceCommand,n),function(e,t,n){const i=e._skipLodStencilCommand,o=i.command,r=t._selectionDepth,s=function(e){return(e.renderState.stencilTest.reference&y.Z.SKIP_LOD_MASK)>>>y.Z.SKIP_LOD_BIT_SHIFT}(o);if(r!==s){const e=function(e){return y.Z.CESIUM_3D_TILE_MASK|e<<y.Z.SKIP_LOD_BIT_SHIFT}(r),t=(0,a.Z)(o.renderState,!0);t.stencilTest.reference=e,o.renderState=p.Z.fromCache(t),n&&(i.derivedCommand2D.renderState=t)}}(this,i,n),void E(t,this._skipLodStencilCommand,n)}if(!this._needsSilhouetteCommands)return E(t,this._originalCommand,n),t;E(t,this._silhouetteModelCommand,n)}},T.prototype.pushSilhouetteCommands=function(e,t){const n=S(this,e);return E(t,this._silhouetteColorCommand,n),t};const L=T},493863:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(35961),o=n(11020);function r(e){this._model=e.model,this._featureTable=e.featureTable,this._featureId=e.featureId,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._featureTable.getShow(this._featureId)},set:function(e){this._featureTable.setShow(this._featureId,e)}},color:{get:function(){return(0,o.Z)(this._color)||(this._color=new i.Z),this._featureTable.getColor(this._featureId,this._color)},set:function(e){this._featureTable.setColor(this._featureId,e)}},primitive:{get:function(){return this._model}},featureTable:{get:function(){return this._featureTable}},featureId:{get:function(){return this._featureId}}}),r.prototype.hasProperty=function(e){return this._featureTable.hasProperty(this._featureId,e)},r.prototype.getProperty=function(e){return this._featureTable.getProperty(this._featureId,e)},r.prototype.getPropertyInherited=function(e){return this._featureTable.hasPropertyBySemantic(this._featureId,e)?this._featureTable.getPropertyBySemantic(this._featureId,e):this._featureTable.getProperty(this._featureId,e)},r.prototype.getPropertyIds=function(e){return this._featureTable.getPropertyIds(e)},r.prototype.setProperty=function(e,t){return this._featureTable.setProperty(this._featureId,e,t)};const s=r},584934:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(974914),o=n(812693),r=n(790087),s=n(35961),a=n(11020),c=n(722313),l=n(493863),u=n(234146),d=n(629011),h=n(420136);function f(e){const t=e.model,n=e.propertyTable;r.Z.typeOf.object("propertyTable",n),r.Z.typeOf.object("model",t),this._propertyTable=n,this._model=t,this._features=void 0,this._featuresLength=0,this._batchTexture=void 0,this._styleCommandsNeededDirty=!1,this._styleCommandsNeeded=d.Z.ALL_OPAQUE,function(e){const t=e._model,n=h.Z.is3DTiles(t.type),r=e._propertyTable.count;if(0===r)return;let s;const a=new Array(r);if(n){const e=t.content;for(s=0;s<r;s++)a[s]=new o.Z(e,s)}else for(s=0;s<r;s++)a[s]=new l.Z({model:t,featureId:s,featureTable:e});e._features=a,e._featuresLength=r,e._batchTexture=new i.Z({featuresLength:r,owner:e,statistics:n?t.content.tileset.statistics:void 0})}(this)}Object.defineProperties(f.prototype,{batchTexture:{get:function(){return this._batchTexture}},featuresLength:{get:function(){return this._featuresLength}},batchTextureByteLength:{get:function(){return(0,a.Z)(this._batchTexture)?this._batchTexture.byteLength:0}},styleCommandsNeededDirty:{get:function(){return this._styleCommandsNeededDirty}}}),f.prototype.update=function(e){this._styleCommandsNeededDirty=!1,this._batchTexture.update(void 0,e);const t=d.Z.getStyleCommandsNeeded(this._featuresLength,this._batchTexture.translucentFeaturesLength);this._styleCommandsNeeded!==t&&(this._styleCommandsNeededDirty=!0,this._styleCommandsNeeded=t)},f.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)},f.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)},f.prototype.getShow=function(e){return this._batchTexture.getShow(e)},f.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)},f.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)},f.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)},f.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)},f.prototype.getFeature=function(e){return this._features[e]},f.prototype.hasProperty=function(e,t){return this._propertyTable.hasProperty(e,t)},f.prototype.hasPropertyBySemantic=function(e,t){return this._propertyTable.hasPropertyBySemantic(e,t)},f.prototype.getProperty=function(e,t){return this._propertyTable.getProperty(e,t)},f.prototype.getPropertyBySemantic=function(e,t){return this._propertyTable.getPropertyBySemantic(e,t)},f.prototype.getPropertyIds=function(e){return this._propertyTable.getPropertyIds(e)},f.prototype.setProperty=function(e,t,n){return this._propertyTable.setProperty(e,t,n)},f.prototype.isClass=function(e,t){return this._propertyTable.isClass(e,t)},f.prototype.isExactClass=function(e,t){return this._propertyTable.isExactClass(e,t)},f.prototype.getExactClassName=function(e){return this._propertyTable.getExactClassName(e)};const p=new s.Z;f.prototype.applyStyle=function(e){if(!(0,a.Z)(e))return this.setAllColor(i.Z.DEFAULT_COLOR_VALUE),void this.setAllShow(i.Z.DEFAULT_SHOW_VALUE);for(let t=0;t<this._featuresLength;t++){const n=this.getFeature(t),o=(0,a.Z)(e.color)?(0,u.Z)(e.color.evaluateColor(n,p),i.Z.DEFAULT_COLOR_VALUE):i.Z.DEFAULT_COLOR_VALUE,r=(0,a.Z)(e.show)?(0,u.Z)(e.show.evaluate(n),i.Z.DEFAULT_SHOW_VALUE):i.Z.DEFAULT_SHOW_VALUE;this.setColor(t,o),this.setShow(t,r)}},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(e){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),(0,c.Z)(this)};const m=f},506721:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(234146),o=n(240524);const r=function(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),this.lightingModel=(0,i.Z)(e.lightingModel,o.Z.UNLIT)}},648665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(659635),o=n(708956),r=n(714233);const s={};function a(e,t,n,r){let s;r=i.Z.multiplyTransformation(r,e.transform,new i.Z),e.updateComputedTransform();const c=e.runtimePrimitives.length;for(s=0;s<c;s++){const t=e.runtimePrimitives[s].drawCommand;t.modelMatrix=i.Z.multiplyTransformation(n,r,t.modelMatrix),t.cullFace=o.Z.getCullFace(t.modelMatrix,t.primitiveType)}const l=e.children.length;for(s=0;s<l;s++){const o=t._runtimeNodes[e.children[s]];o._transformToRoot=i.Z.clone(r,o._transformToRoot),a(o,t,n,r),o._transformDirty=!1}}s.name="ModelMatrixUpdateStage",s.update=function(e,t,n){const i=n.mode!==r.Z.SCENE3D;i&&t._model._projectTo2D||!e._transformDirty||(a(e,t,i?t._computedModelMatrix2D:t._computedModelMatrix,e.transformToRoot),e._transformDirty=!1)};const c=s},601691:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(790087),o=n(11020);function r(e,t){i.Z.typeOf.object("model",e),i.Z.typeOf.object("runtimeNode",t),this._model=e,this._runtimeNode=t}Object.defineProperties(r.prototype,{name:{get:function(){return this._runtimeNode._name}},id:{get:function(){return this._runtimeNode._id}},show:{get:function(){return this._runtimeNode.show},set:function(e){this._runtimeNode.show=e}},matrix:{get:function(){return this._runtimeNode.transform},set:function(e){(0,o.Z)(e)?(this._runtimeNode.transform=e,this._runtimeNode.userAnimated=!0,this._model._userAnimationDirty=!0):(this._runtimeNode.transform=this.originalMatrix,this._runtimeNode.userAnimated=!1)}},originalMatrix:{get:function(){return this._runtimeNode.originalTransform}}});const s=r},512502:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(248525),r=n(417148),s=n(669133),a=n(800640);const c=function(e){i.Z.typeOf.object("model",e),this.shaderBuilder=new s.Z,this.model=e,this.uniformMap={},this.alphaOptions=new o.Z,this.renderStateOptions=r.Z.getState(r.Z.fromCache({depthTest:{enabled:!0,func:a.Z.LESS_OR_EQUAL}})),this.hasSilhouette=!1,this.hasSkipLevelOfDetail=!1}},255801:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(660904),o=n(790087),r=n(234146),s=n(11020),a=n(765153),c=n(659635),l=n(731880),u=n(360846),d=n(740228),h=n(648665),f=n(705669);function p(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).node,n=e.transform,i=e.transformToRoot,a=e.sceneGraph,u=e.children;o.Z.typeOf.object("options.node",t),o.Z.typeOf.object("options.transform",n),o.Z.typeOf.object("options.transformToRoot",i),o.Z.typeOf.object("options.sceneGraph",a),o.Z.typeOf.object("options.children",u),this._node=t,this._name=t.name,this._id=t.index,this._sceneGraph=a,this._children=u,this._originalTransform=c.Z.clone(n,this._originalTransform),this._transform=c.Z.clone(n,this._transform),this._transformToRoot=c.Z.clone(i,this._transformToRoot),this._computedTransform=new c.Z,this._transformDirty=!1,this._transformParameters=void 0,this._morphWeights=[],this._runtimeSkin=void 0,this._computedJointMatrices=[],this.show=!0,this.userAnimated=!1,this.pipelineStages=[],this.runtimePrimitives=[],this.updateStages=[],this.instancingTranslationMin=void 0,this.instancingTranslationMax=void 0,this.instancingTransformsBuffer=void 0,this.instancingTransformsBuffer2D=void 0,this.instancingTranslationBuffer2D=void 0,this.instancingReferencePoint2D=void 0,function(e){const t=e.transform,n=e.transformToRoot,i=e._computedTransform;e._computedTransform=c.Z.multiply(n,t,i);const o=e.node;(0,s.Z)(o.matrix)||(e._transformParameters=new l.Z(o.translation,o.rotation,o.scale)),(0,s.Z)(o.morphWeights)&&(e._morphWeights=o.morphWeights.slice());const r=o.articulationName;if((0,s.Z)(r)){const t=e.sceneGraph._runtimeArticulations[r];(0,s.Z)(t)&&t.runtimeNodes.push(e)}}(this)}function m(e,t){e._transformDirty=!0,e._transform=c.Z.fromTranslationRotationScale(t,e._transform)}Object.defineProperties(p.prototype,{node:{get:function(){return this._node}},sceneGraph:{get:function(){return this._sceneGraph}},children:{get:function(){return this._children}},transform:{get:function(){return this._transform},set:function(e){this._transformDirty=!0,this._transform=c.Z.clone(e,this._transform)}},transformToRoot:{get:function(){return this._transformToRoot}},computedTransform:{get:function(){return this._computedTransform}},originalTransform:{get:function(){return this._originalTransform}},translation:{get:function(){return(0,s.Z)(this._transformParameters)?this._transformParameters.translation:void 0},set:function(e){const t=this._transformParameters;if(!(0,s.Z)(t))throw new a.Z("The translation of a node cannot be set if it was defined using a matrix in the model.");const n=t.translation;i.Z.equals(n,e)||(t.translation=i.Z.clone(e,t.translation),m(this,t))}},rotation:{get:function(){return(0,s.Z)(this._transformParameters)?this._transformParameters.rotation:void 0},set:function(e){const t=this._transformParameters;if(!(0,s.Z)(t))throw new a.Z("The rotation of a node cannot be set if it was defined using a matrix in the model.");const n=t.rotation;u.Z.equals(n,e)||(t.rotation=u.Z.clone(e,t.rotation),m(this,t))}},scale:{get:function(){return(0,s.Z)(this._transformParameters)?this._transformParameters.scale:void 0},set:function(e){const t=this._transformParameters;if(!(0,s.Z)(t))throw new a.Z("The scale of a node cannot be set if it was defined using a matrix in the model.");const n=t.scale;i.Z.equals(n,e)||(t.scale=i.Z.clone(e,t.scale),m(this,t))}},morphWeights:{get:function(){return this._morphWeights},set:function(e){const t=e.length;if(this._morphWeights.length!==t)throw new a.Z("value must have the same length as the original weights array.");for(let n=0;n<t;n++)this._morphWeights[n]=e[n]}},runtimeSkin:{get:function(){return this._runtimeSkin}},computedJointMatrices:{get:function(){return this._computedJointMatrices}}}),p.prototype.getChild=function(e){if(o.Z.typeOf.number("index",e),e<0||e>=this.children.length)throw new a.Z("index must be greater than or equal to 0 and less than the number of children.");return this.sceneGraph._runtimeNodes[this.children[e]]},p.prototype.configurePipeline=function(){const e=this.node,t=this.pipelineStages;t.length=0;const n=this.updateStages;n.length=0,(0,s.Z)(e.instances)&&t.push(d.Z),t.push(f.Z),n.push(h.Z)},p.prototype.updateComputedTransform=function(){this._computedTransform=c.Z.multiply(this._transformToRoot,this._transform,this._computedTransform)},p.prototype.updateJointMatrices=function(){const e=this._runtimeSkin;if(!(0,s.Z)(e))return;e.updateJointMatrices();const t=this._computedJointMatrices,n=e.jointMatrices,i=n.length;for(let e=0;e<i;e++){(0,s.Z)(t[e])||(t[e]=new c.Z);const i=c.Z.multiplyTransformation(this.transformToRoot,this.transform,t[e]),o=c.Z.inverseTransformation(i,t[e]);t[e]=c.Z.multiplyTransformation(o,n[e],t[e])}};const _=p},954154:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var i=n(790087),o=n(234146),r=n(11020),s=n(804868),a=n(714233),c=n(443674),l=n(653384),u=n(705917),d=n(922778),h=n(806055),f=n(414885),p=n(257867),m=n(98869),_=n(362167),g=n(825571),Z=n(84618),y=n(436106),b=n(708956),v=n(470780),A=n(86036),T=n(451510),w=n(662691),E=n(423194),S=n(406501),C=n(427709),x=n(276194),I=n(7901);function P(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).primitive,n=e.node,r=e.model;i.Z.typeOf.object("options.primitive",t),i.Z.typeOf.object("options.node",n),i.Z.typeOf.object("options.model",r),this.primitive=t,this.node=n,this.model=r,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.batchLengths=void 0,this.batchOffsets=void 0,this.updateStages=[]}P.prototype.configurePipeline=function(e){const t=this.pipelineStages;t.length=0;const n=this.primitive,i=this.node,o=this.model,P=o.customShader,D=o.style,O=e.context.webgl2,L=e.mode!==a.Z.SCENE3D&&!e.scene3DOnly&&o._projectTo2D,N=(0,r.Z)(n.morphTargets)&&n.morphTargets.length>0,M=(0,r.Z)(i.skin),R=(0,r.Z)(P),F=!(R&&(0,r.Z)(P.fragmentShaderText))||P.mode!==h.Z.REPLACE_MATERIAL,B=b.Z.hasQuantizedAttributes(n.attributes),U=o.debugWireframe&&s.Z.isTriangles(n.primitiveType)&&(o._enableDebugWireframe||O),k=o.pointCloudShading,V=(0,r.Z)(k)&&k.attenuation,H=(0,r.Z)(k)&&k.backFaceCulling,z=n.primitiveType===s.Z.POINTS&&((0,r.Z)(D)||V||H),G=o._enableShowOutline&&(0,r.Z)(n.outlineCoordinates),j=function(e,t,n){let i;return(0,r.Z)(t.instances)&&(i=b.Z.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),(0,r.Z)(i))?{hasFeatureIds:!0,hasPropertyTable:(0,r.Z)(i.propertyTableId)}:(i=b.Z.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),(0,r.Z)(i)?{hasFeatureIds:!0,hasPropertyTable:(0,r.Z)(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}(o,i,n),W=(0,r.Z)(o.classificationType);L&&t.push(S.Z),t.push(_.Z),U&&t.push(I.Z),W&&t.push(u.Z),N&&t.push(v.Z),M&&t.push(x.Z),z&&t.push(T.Z),B&&t.push(p.Z),F&&t.push(Z.Z),t.push(m.Z),t.push(y.Z),j.hasPropertyTable&&(t.push(C.Z),t.push(l.Z),t.push(d.Z)),R&&t.push(f.Z),t.push(g.Z),o.allowPicking&&t.push(A.Z),G&&t.push(w.Z),t.push(c.Z),t.push(E.Z)};const D=P},474508:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Y});var i=n(762031),o=n(660904),r=n(790087),s=n(234146),a=n(11020),c=n(659635),l=n(720794),u=n(714233),d=n(347962),h=n(789576),f=n(505117),p=n(651643),m=n(90111),_=n(147714),g=n(612588),Z=n(601691),y=n(255801),b=n(954154),v=n(574750),A=n(708956),T=n(512502),w=n(664752),E=n(963940),S=n(420136),C=n(492067),x=n(240302);function I(e){const t=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).modelComponents;r.Z.typeOf.object("options.model",e.model),r.Z.typeOf.object("options.modelComponents",t),this._model=e.model,this._components=t,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=c.Z.clone(c.Z.IDENTITY),this._computedModelMatrix2D=c.Z.clone(c.Z.IDENTITY),this._axisCorrectionMatrix=A.Z.getAxisCorrectionMatrix(t.upAxis,t.forwardAxis,new c.Z),this._runtimeArticulations={},function(e){const t=e._components,n=t.scene;P(e,e._model.modelMatrix);const i=t.articulations,o=i.length,r=e._runtimeArticulations;for(let t=0;t<o;t++){const n=i[t],o=new m.Z({articulation:n,sceneGraph:e});r[o.name]=o}const s=t.nodes,a=s.length;e._runtimeNodes=new Array(a);const l=n.nodes.length,u=c.Z.IDENTITY;for(let t=0;t<l;t++){const i=O(e,n.nodes[t],u);e._rootNodes.push(i)}const d=t.skins,h=e._runtimeSkins,f=d.length;for(let t=0;t<f;t++){const n=d[t];h.push(new v.Z({skin:n,sceneGraph:e}))}const p=e._skinnedNodes,_=p.length;for(let t=0;t<_;t++){const n=p[t],i=e._runtimeNodes[n],o=s[n].skin.index;i._runtimeSkin=h[o],i.updateJointMatrices()}e.applyArticulations()}(this)}function P(e,t){const n=e._components,i=e._model;e._computedModelMatrix=c.Z.multiplyTransformation(t,n.transform,e._computedModelMatrix),e._computedModelMatrix=c.Z.multiplyTransformation(e._computedModelMatrix,e._axisCorrectionMatrix,e._computedModelMatrix),e._computedModelMatrix=c.Z.multiplyByUniformScale(e._computedModelMatrix,i.computedScale,e._computedModelMatrix)}Object.defineProperties(I.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});const D=new o.Z;function O(e,t,n){const i=[],o=A.Z.getNodeTransform(t),r=t.children.length;for(let s=0;s<r;s++){const r=O(e,t.children[s],c.Z.multiplyTransformation(n,o,new c.Z));i.push(r)}const s=new y.Z({node:t,transform:o,transformToRoot:n,children:i,sceneGraph:e}),l=t.primitives.length;for(let n=0;n<l;n++)s.runtimePrimitives.push(new b.Z({primitive:t.primitives[n],node:t,model:e._model}));const u=t.index;e._runtimeNodes[u]=s,(0,a.Z)(t.skin)&&e._skinnedNodes.push(u);const d=t.name;if((0,a.Z)(d)){const t=e._model,n=new Z.Z(t,s);t._nodesByName[d]=n}return u}const L=new o.Z,N=new o.Z,M=new o.Z,R=new o.Z;function F(e,t,n,i,o){if(n&&!t.show)return;const r=t.children.length;for(let s=0;s<r;s++)F(e,t.getChild(s),n,i,o);const s=t.runtimePrimitives,a=s.length;for(let e=0;e<a;e++)i(s[e],o)}function B(e,t,n,i){const o=e._rootNodes,r=o.length;for(let s=0;s<r;s++){const r=o[s];F(e,e._runtimeNodes[r],t,n,i)}}I.prototype.buildDrawCommands=function(e){const t=this._model,n=new T.Z(t);t.statistics.clear(),this.configurePipeline(e);const r=this.modelPipelineStages;let s,l,u;for(s=0;s<r.length;s++)r[s].process(n,t,e);const d=o.Z.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,L),f=o.Z.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,N);for(s=0;s<this._runtimeNodes.length;s++){const t=this._runtimeNodes[s];if(!(0,a.Z)(t))continue;t.configurePipeline();const r=t.pipelineStages,p=new C.Z(n,t);for(l=0;l<r.length;l++)r[l].process(p,t.node,e);const m=t.computedTransform;for(l=0;l<t.runtimePrimitives.length;l++){const n=t.runtimePrimitives[l];n.configurePipeline(e);const r=n.pipelineStages,s=new x.Z(p,n);for(u=0;u<r.length;u++)r[u].process(s,n.primitive,e);n.boundingSphere=i.Z.clone(s.boundingSphere,new i.Z);const a=c.Z.multiplyByPoint(m,s.positionMin,M),_=c.Z.multiplyByPoint(m,s.positionMax,R);o.Z.minimumByComponent(d,a,d),o.Z.maximumByComponent(f,_,f);const g=(0,h.Z)(s,e);n.drawCommand=g}}this._boundingSphere=i.Z.fromCornerPoints(d,f,new i.Z),this._boundingSphere=i.Z.transformWithoutScale(this._boundingSphere,this._axisCorrectionMatrix,this._boundingSphere),this._boundingSphere=i.Z.transform(this._boundingSphere,this._components.transform,this._boundingSphere),t._boundingSphere=i.Z.transform(this._boundingSphere,t.modelMatrix,t._boundingSphere),t._initialRadius=t._boundingSphere.radius,t._boundingSphere.radius*=t._clampedScale},I.prototype.configurePipeline=function(e){const t=this.modelPipelineStages;t.length=0;const n=this._model;(0,a.Z)(n.color)&&t.push(_.Z),(0,a.Z)(n.classificationType)||(n.imageBasedLighting.enabled&&t.push(p.Z),n.isClippingEnabled()&&t.push(g.Z),n.hasSilhouette(e)&&t.push(w.Z),(0,a.Z)(n.splitDirection)&&n.splitDirection!==d.Z.NONE&&t.push(E.Z),S.Z.is3DTiles(n.type)&&t.push(f.Z))},I.prototype.update=function(e,t){let n,i,o;for(n=0;n<this._runtimeNodes.length;n++){const r=this._runtimeNodes[n];if(!(0,a.Z)(r))continue;for(i=0;i<r.updateStages.length;i++)r.updateStages[i].update(r,this,e);const s=e.mode!==u.Z.SCENE3D&&this._model._projectTo2D;for(t&&!s&&this.updateJointMatrices(),i=0;i<r.runtimePrimitives.length;i++){const e=r.runtimePrimitives[i];for(o=0;o<e.updateStages.length;o++)e.updateStages[o].update(e,this)}}},I.prototype.updateModelMatrix=function(e,t){P(this,e),t.mode!==u.Z.SCENE3D&&function(e,t){const n=e._computedModelMatrix,r=c.Z.getTranslation(n,D);if(o.Z.equals(r,o.Z.ZERO)){const i=e.boundingSphere.center,o=l.Z.wgs84To2DModelMatrix(t.mapProjection,i,e._computedModelMatrix2D);e._computedModelMatrix2D=c.Z.multiply(o,n,e._computedModelMatrix2D)}else e._computedModelMatrix2D=l.Z.basisTo2D(t.mapProjection,n,e._computedModelMatrix2D);e._boundingSphere2D=i.Z.transform(e._boundingSphere,e._computedModelMatrix2D,e._boundingSphere2D)}(this,t);const n=this._rootNodes;for(let e=0;e<n.length;e++)this._runtimeNodes[n[e]]._transformDirty=!0},I.prototype.updateJointMatrices=function(){const e=this._skinnedNodes,t=e.length;for(let n=0;n<t;n++){const t=e[n];this._runtimeNodes[t].updateJointMatrices()}};const U={backFaceCulling:void 0};function k(e,t){e.drawCommand.backFaceCulling=t.backFaceCulling}I.prototype.updateBackFaceCulling=function(e){const t=U;t.backFaceCulling=e,B(this,!1,k,t)};const V={shadowMode:void 0};function H(e,t){e.drawCommand.shadows=t.shadowMode}I.prototype.updateShadows=function(e){const t=V;t.shadowMode=e,B(this,!1,H,t)};const z={debugShowBoundingVolume:void 0};function G(e,t){e.drawCommand.debugShowBoundingVolume=t.debugShowBoundingVolume}I.prototype.updateShowBoundingVolume=function(e){const t=z;t.debugShowBoundingVolume=e,B(this,!1,G,t)};const j=[],W={frameState:void 0,hasSilhouette:void 0};function q(e,t){const n=t.frameState,i=t.hasSilhouette,o=n.passes,r=j,s=e.drawCommand;s.pushCommands(n,n.commandList),i&&!o.pick&&s.pushSilhouetteCommands(n,r)}I.prototype.pushDrawCommands=function(e){const t=j;t.length=0;const n=W;n.hasSilhouette=this._model.hasSilhouette(e),n.frameState=e,B(this,!0,q,n),e.commandList.push.apply(e.commandList,t)},I.prototype.setArticulationStage=function(e,t){const n=e.split(" ");if(2!==n.length)return;const i=n[0],o=n[1],r=this._runtimeArticulations[i];(0,a.Z)(r)&&r.setArticulationStage(o,t)},I.prototype.applyArticulations=function(){const e=this._runtimeArticulations;for(const t in e)e.hasOwnProperty(t)&&e[t].apply()};const Y=I},664752:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(394579),o=n(11020),r=n(245929),s=n(912182),a=n(567389);const c={name:"ModelSilhouettePipelineStage",silhouettesLength:0,process:function(e,t,n){(0,o.Z)(t._silhouetteId)||(t._silhouetteId=++c.silhouettesLength);const l=e.shaderBuilder;l.addDefine("HAS_SILHOUETTE",void 0,r.Z.BOTH),l.addVertexLines(a.Z),l.addFragmentLines(s.Z),l.addUniform("vec4","model_silhouetteColor",r.Z.FRAGMENT),l.addUniform("float","model_silhouetteSize",r.Z.VERTEX),l.addUniform("bool","model_silhouettePass",r.Z.BOTH);const u={model_silhouetteColor:function(){return t.silhouetteColor},model_silhouetteSize:function(){return t.silhouetteSize},model_silhouettePass:function(){return!1}};e.uniformMap=(0,i.Z)(u,e.uniformMap),e.hasSilhouette=!0}},l=c},574750:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(659635),o=n(790087),r=n(234146);function s(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),o.Z.typeOf.object("options.skin",e.skin),o.Z.typeOf.object("options.sceneGraph",e.sceneGraph),this._sceneGraph=e.sceneGraph;const t=e.skin;this._skin=t,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],function(e){const t=e.skin,n=t.inverseBindMatrices;e._inverseBindMatrices=n;const o=t.joints,r=o.length,s=e.sceneGraph._runtimeNodes,c=e.joints,l=e._jointMatrices;for(let e=0;e<r;e++){const t=s[o[e].index];c.push(t);const r=a(t,n[e],new i.Z);l.push(r)}}(this)}function a(e,t,n){const o=i.Z.multiplyTransformation(e.transformToRoot,e.transform,n);return i.Z.multiplyTransformation(o,t,n)}Object.defineProperties(s.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}}),s.prototype.updateJointMatrices=function(){const e=this._jointMatrices,t=e.length;for(let n=0;n<t;n++){const t=this.joints[n],i=this.inverseBindMatrices[n];e[n]=a(t,i,e[n])}};const c=s},963940:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(394579),o=n(560665),r=n(245929);const s={name:"ModelSplitterPipelineStage",SPLIT_DIRECTION_UNIFORM_NAME:"model_splitDirection",process:function(e,t,n){const a=e.shaderBuilder;a.addDefine("HAS_MODEL_SPLITTER",void 0,r.Z.FRAGMENT),a.addFragmentLines(o.Z);const c={};a.addUniform("float",s.SPLIT_DIRECTION_UNIFORM_NAME,r.Z.FRAGMENT),c[s.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return t.splitDirection},e.uniformMap=(0,i.Z)(c,e.uniformMap)}},a=s},872862:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(781382),o=n(790087);function r(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap=new i.Z}Object.defineProperties(r.prototype,{batchTexturesByteLength:{get:function(){const e=this._batchTextureIdMap.length,t=this._batchTextureIdMap.values;let n=0;for(let i=0;i<e;i++)n+=t[i].byteLength;return n}}}),r.prototype.clear=function(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap.removeAll()},r.prototype.addBuffer=function(e,t){if(o.Z.typeOf.object("buffer",e),o.Z.typeOf.bool("hasCpuCopy",t),!this._bufferIdSet.hasOwnProperty(e._id)){const n=t?2:1;this.geometryByteLength+=e.sizeInBytes*n}this._bufferIdSet[e._id]=!0},r.prototype.addTexture=function(e){o.Z.typeOf.object("texture",e),this._textureIdSet.hasOwnProperty(e._id)||(this.texturesByteLength+=e.sizeInBytes),this._textureIdSet[e._id]=!0},r.prototype.addBatchTexture=function(e){o.Z.typeOf.object("batchTexture",e),this._batchTextureIdMap.contains(e._id)||this._batchTextureIdMap.set(e._id,e)};const s=r},420136:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(790087),o=n(765153);const r={GLTF:"GLTF",TILE_GLTF:"TILE_GLTF",TILE_B3DM:"B3DM",TILE_I3DM:"I3DM",TILE_PNTS:"PNTS",TILE_GEOJSON:"TILE_GEOJSON",is3DTiles:function(e){switch(i.Z.typeOf.string("modelType",e),e){case r.TILE_GLTF:case r.TILE_B3DM:case r.TILE_I3DM:case r.TILE_PNTS:case r.TILE_GEOJSON:return!0;case r.GLTF:return!1;default:throw new o.Z("modelType is not a valid value.")}}},s=Object.freeze(r)},708956:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(660904),o=n(11020),r=n(659635),s=n(360846),a=n(217066),c=n(418371),l=n(388402),u=n(677684),d=n(53839),h=n(804868),f=n(664288);function p(){}p.getError=function(e,t,n){let i=`Failed to load ${e}: ${t}`;(0,o.Z)(n)&&(0,o.Z)(n.message)&&(i+=`\n${n.message}`);const r=new a.Z(i);return(0,o.Z)(n)&&(r.stack=`Original stack:\n${n.stack}\nHandler stack:\n${r.stack}`),r},p.getNodeTransform=function(e){return(0,o.Z)(e.matrix)?e.matrix:r.Z.fromTranslationQuaternionRotationScale((0,o.Z)(e.translation)?e.translation:i.Z.ZERO,(0,o.Z)(e.rotation)?e.rotation:s.Z.IDENTITY,(0,o.Z)(e.scale)?e.scale:i.Z.ONE)},p.getAttributeBySemantic=function(e,t,n){const i=e.attributes,r=i.length;for(let e=0;e<r;++e){const r=i[e],s=!(0,o.Z)(n)||r.setIndex===n;if(r.semantic===t&&s)return r}},p.getAttributeByName=function(e,t){const n=e.attributes,i=n.length;for(let e=0;e<i;++e){const i=n[e];if(i.name===t)return i}},p.getFeatureIdsByLabel=function(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.positionalLabel===t||i.label===t)return i}},p.hasQuantizedAttributes=function(e){if(!(0,o.Z)(e))return!1;for(let t=0;t<e.length;t++){const n=e[t];if((0,o.Z)(n.quantization))return!0}return!1},p.getAttributeInfo=function(e){const t=e.semantic,n=e.setIndex;let i,r=!1;(0,o.Z)(t)?(i=u.Z.getVariableName(t,n),r=!0):(i=e.name,i=i.replace(/^_/,""),i=i.toLowerCase());const s=/^color_\d+$/.test(i),a=e.type;let c=l.Z.getGlslType(a);s&&(c="vec4");const d=(0,o.Z)(e.quantization);let h;return d&&(h=s?"vec4":l.Z.getGlslType(e.quantization.type)),{attribute:e,isQuantized:d,variableName:i,hasSemantic:r,glslType:c,quantizedGlslType:h}};const m=new i.Z,_=new i.Z;p.getPositionMinMax=function(e,t,n){const r=p.getAttributeBySemantic(e,"POSITION");let s=r.max,a=r.min;return(0,o.Z)(n)&&(0,o.Z)(t)&&(a=i.Z.add(a,t,_),s=i.Z.add(s,n,m)),{min:a,max:s}},p.getAxisCorrectionMatrix=function(e,t,n){return n=r.Z.clone(r.Z.IDENTITY,n),e===c.Z.Y?n=r.Z.clone(c.Z.Y_UP_TO_Z_UP,n):e===c.Z.X&&(n=r.Z.clone(c.Z.X_UP_TO_Z_UP,n)),t===c.Z.Z&&(n=r.Z.multiplyTransformation(n,c.Z.Z_UP_TO_X_UP,n)),n};const g=new f.Z;p.getCullFace=function(e,t){if(!h.Z.isTriangles(t))return d.Z.BACK;const n=r.Z.getMatrix3(e,g);return f.Z.determinant(n)<0?d.Z.FRONT:d.Z.BACK},p.sanitizeGlslIdentifier=function(e){let t=e.replaceAll(/[^A-Za-z0-9]+/g,"_");return t=t.replace(/^gl_/,""),/^\d/.test(t)&&(t=`_${t}`),t},p.supportedExtensions={AGI_articulations:!0,CESIUM_primitive_outline:!0,CESIUM_RTC:!0,EXT_feature_metadata:!0,EXT_instance_features:!0,EXT_mesh_features:!0,EXT_mesh_gpu_instancing:!0,EXT_meshopt_compression:!0,EXT_structural_metadata:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_draco_mesh_compression:!0,KHR_techniques_webgl:!0,KHR_materials_common:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_materials_unlit:!0,KHR_mesh_quantization:!0,KHR_texture_basisu:!0,KHR_texture_transform:!0,WEB3D_quantized_attributes:!0},p.checkSupportedExtensions=function(e){const t=e.length;for(let n=0;n<t;n++){const t=e[n];if(!p.supportedExtensions[t])throw new a.Z(`Unsupported glTF Extension: ${t}`)}};const Z=p},470780:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(388402),o=n(394579),r=n(11020),s=n(245929),a=n(222167),c=n(677684);const l={name:"MorphTargetsPipelineStage",FUNCTION_ID_GET_MORPHED_POSITION:"getMorphedPosition",FUNCTION_SIGNATURE_GET_MORPHED_POSITION:"vec3 getMorphedPosition(in vec3 position)",FUNCTION_ID_GET_MORPHED_NORMAL:"getMorphedNormal",FUNCTION_SIGNATURE_GET_MORPHED_NORMAL:"vec3 getMorphedNormal(in vec3 normal)",FUNCTION_ID_GET_MORPHED_TANGENT:"getMorphedTangent",FUNCTION_SIGNATURE_GET_MORPHED_TANGENT:"vec3 getMorphedTangent(in vec3 tangent)",process:function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_MORPH_TARGETS",void 0,s.Z.VERTEX),function(e){e.addFunction(l.FUNCTION_ID_GET_MORPHED_POSITION,l.FUNCTION_SIGNATURE_GET_MORPHED_POSITION,s.Z.VERTEX);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_POSITION,["vec3 morphedPosition = position;"]),e.addFunction(l.FUNCTION_ID_GET_MORPHED_NORMAL,l.FUNCTION_SIGNATURE_GET_MORPHED_NORMAL,s.Z.VERTEX);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_NORMAL,["vec3 morphedNormal = normal;"]),e.addFunction(l.FUNCTION_ID_GET_MORPHED_TANGENT,l.FUNCTION_SIGNATURE_GET_MORPHED_TANGENT,s.Z.VERTEX);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_TANGENT,["vec3 morphedTangent = tangent;"])}(n);const i=t.morphTargets.length;for(let n=0;n<i;n++){const i=t.morphTargets[n].attributes,o=i.length;for(let t=0;t<o;t++){const o=i[t],r=o.semantic;r!==c.Z.POSITION&&r!==c.Z.NORMAL&&r!==c.Z.TANGENT||(d(e,o,e.attributeIndex,n),e.attributeIndex++)}}!function(e){e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_POSITION,["return morphedPosition;"]);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_NORMAL,["return morphedNormal;"]);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_TANGENT,["return morphedTangent;"])}(n);const r=e.runtimeNode.morphWeights.length;n.addUniform("float",`u_morphWeights[${r}]`,s.Z.VERTEX),n.addVertexLines(a.Z);const u={u_morphWeights:function(){return e.runtimeNode.morphWeights}};e.uniformMap=(0,o.Z)(u,e.uniformMap)}},u={attributeString:void 0,functionId:void 0};function d(e,t,n,o){const s=e.shaderBuilder;!function(e,t,n){const o={index:n,value:(0,r.Z)(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,componentsPerAttribute:i.Z.getNumberOfComponents(t.type),componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};e.attributes.push(o)}(e,t,n);const a=function(e,t){switch(e.semantic){case c.Z.POSITION:t.attributeString="Position",t.functionId=l.FUNCTION_ID_GET_MORPHED_POSITION;break;case c.Z.NORMAL:t.attributeString="Normal",t.functionId=l.FUNCTION_ID_GET_MORPHED_NORMAL;break;case c.Z.TANGENT:t.attributeString="Tangent",t.functionId=l.FUNCTION_ID_GET_MORPHED_TANGENT}return t}(t,u);!function(e,t,n){const i=t.attributeString,o=`a_target${i}_${n}`,r=`morphed${i} += u_morphWeights[${n}] * a_target${i}_${n};`;e.addAttribute("vec3",o),e.addFunctionLines(t.functionId,[r])}(s,a,o)}const h=l},492067:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(790087),o=n(823438);const r=function(e,t){i.Z.typeOf.object("modelRenderResources",e),i.Z.typeOf.object("runtimeNode",t),this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.uniformMap=(0,o.Z)(e.uniformMap),this.alphaOptions=(0,o.Z)(e.alphaOptions),this.renderStateOptions=(0,o.Z)(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.runtimeNode=t,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0}},705669:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(11020);const o={name:"NodeStatisticsPipelineStage",_countInstancingAttributes:r,_countGeneratedBuffers:s};function r(e,t){if(!(0,i.Z)(t))return;const n=t.attributes,o=n.length;for(let t=0;t<o;t++){const o=n[t];if((0,i.Z)(o.buffer)){const t=!1;e.addBuffer(o.buffer,t)}}}function s(e,t){if((0,i.Z)(t.instancingTransformsBuffer)){const n=!1;e.addBuffer(t.instancingTransformsBuffer,n)}if((0,i.Z)(t.instancingTransformsBuffer2D)){const n=!1;e.addBuffer(t.instancingTransformsBuffer2D,n)}if((0,i.Z)(t.instancingTranslationBuffer2D)){const n=!1;e.addBuffer(t.instancingTranslationBuffer2D,n)}}o.process=function(e,t,n){const i=e.model.statistics,o=t.instances,a=e.runtimeNode;r(i,o),s(i,a)};const a=o},86036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(379593),o=n(915323),r=n(35961),s=n(449809),a=n(234146),c=n(11020),l=n(245929),u=n(420136),d=n(708956);const h={name:"PickingPipelineStage"};function f(e,t){const n=e.model;if((0,c.Z)(n.pickObject))return n.pickObject;const i={model:n,node:e.runtimeNode,primitive:e.runtimePrimitive};let o;if(u.Z.is3DTiles(n.type)){const e=n.content;o={content:e,primitive:e.tileset,detail:i}}else o={primitive:n,detail:i};return o.id=n.id,(0,c.Z)(t)&&(o.instanceId=t),o}h.process=function(e,t,n){const u=n.context,h=e.runtimeNode,p=e.shaderBuilder,m=e.model,_=h.node.instances;if(e.hasPropertyTable)!function(e,t,n){const i=e.model;let o,r;const s=i.featureIdLabel,u=i.instanceFeatureIdLabel;(0,c.Z)(i.featureTableId)?o=i.featureTableId:(0,c.Z)(n)?(r=d.Z.getFeatureIdsByLabel(n.featureIds,u),o=r.propertyTableId):(r=d.Z.getFeatureIdsByLabel(t.featureIds,s),o=r.propertyTableId);const h=i.featureTables[o];e.shaderBuilder.addUniform("sampler2D","model_pickTexture",l.Z.FRAGMENT);const f=h.batchTexture;e.uniformMap.model_pickTexture=function(){return(0,a.Z)(f.pickTexture,f.defaultTexture)},e.pickId="((selectedFeature.id < int(model_featuresLength)) ? texture(model_pickTexture, selectedFeature.st) : vec4(0.0))"}(e,t,_);else if((0,c.Z)(_))!function(e,t){const n=e.instanceCount,a=new Array(n),c=new Uint8Array(4*n),u=e.model,d=u._pipelineResources;for(let i=0;i<n;i++){const n=f(e,i),o=t.createPickId(n);d.push(o),a[i]=o;const s=o.color;c[4*i+0]=r.Z.floatToByte(s.red),c[4*i+1]=r.Z.floatToByte(s.green),c[4*i+2]=r.Z.floatToByte(s.blue),c[4*i+3]=r.Z.floatToByte(s.alpha)}u._pickIds=a;const h=i.Z.createVertexBuffer({context:t,typedArray:c,usage:o.Z.STATIC_DRAW});h.vertexArrayDestroyable=!1;u.statistics.addBuffer(h,!1),d.push(h);const p={index:e.attributeIndex++,vertexBuffer:h,componentsPerAttribute:4,componentDatatype:s.Z.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1};e.attributes.push(p);const m=e.shaderBuilder;m.addDefine("USE_PICKING",void 0,l.Z.BOTH),m.addAttribute("vec4","a_pickColor"),m.addVarying("vec4","v_pickColor"),e.pickId="v_pickColor"}(e,u);else{const t=f(e),n=u.createPickId(t);m._pipelineResources.push(n),m._pickIds.push(n),p.addUniform("vec4","czm_pickColor",l.Z.FRAGMENT),e.uniformMap.czm_pickColor=function(){return n.color},e.pickId="czm_pickColor"}};const p=h},854519:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Y});var i=n(393766),o=n(660904),r=n(35961),s=n(790087),a=n(449809),c=n(234146),l=n(11020),u=n(765153),d=n(659635),h=n(804868),f=n(248894),p=n(7996),m=n(379593),_=n(915323),g=n(475285),Z=n(388402),y=n(418371),b=n(943618),v=n(982960),A=n(764172),T=n(757587),w=n(583982),E=n(773517),S=n(897955),C=n(677684);const x=w.Z.Components,I=w.Z.Scene,P=w.Z.Node,D=w.Z.Primitive,O=w.Z.Attribute,L=w.Z.Quantization,N=w.Z.FeatureIdAttribute,M=w.Z.Material,R=w.Z.MetallicRoughness;function F(e){const t=(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT)).arrayBuffer,n=(0,c.Z)(e.byteOffset,0);s.Z.typeOf.object("options.arrayBuffer",t),this._arrayBuffer=t,this._byteOffset=n,this._loadAttributesFor2D=(0,c.Z)(e.loadAttributesFor2D,!1),this._parsedContent=void 0,this._decodePromise=void 0,this._decodedAttributes=void 0,this._promise=void 0,this._error=void 0,this._state=S.Z.UNLOADED,this._buffers=[],this._components=void 0,this._transform=d.Z.IDENTITY}function B(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4";default:throw new u.Z("componentsPerAttribute must be a number from 1-4")}}function U(e){switch(e){case f.Z.BYTE:return"BYTE";case f.Z.UNSIGNED_BYTE:return"UNSIGNED_BYTE";case f.Z.SHORT:return"SHORT";case f.Z.UNSIGNED_SHORT:return"UNSIGNED_SHORT";case f.Z.INT:return"INT";case f.Z.UNSIGNED_INT:return"UNSIGNED_INT";case f.Z.DOUBLE:return"DOUBLE";case f.Z.FLOAT:return"FLOAT";default:throw new u.Z("value is not a valid WebGL constant")}}function k(e,t,n){let s,a=t.typedArray;if(t.octEncoded&&(s=new L,s.octEncoded=t.octEncoded,s.octEncodedZXY=t.octEncodedZXY,s.normalizationRange=t.quantizedRange,s.type=t.quantizedType,s.componentDatatype=t.quantizedComponentDatatype),t.isQuantized){s=new L;const e=t.quantizedRange;s.normalizationRange=e,s.quantizedVolumeOffset=o.Z.ZERO;const n=t.quantizedVolumeScale;s.quantizedVolumeDimensions=n,s.quantizedVolumeStepSize=o.Z.divideByScalar(n,e,new o.Z),s.componentDatatype=t.quantizedComponentDatatype,s.type=t.quantizedType}const u=new O;if(u.name=t.name,u.semantic=t.semantic,u.setIndex=t.setIndex,u.componentDatatype=t.componentDatatype,u.type=t.type,u.normalized=(0,c.Z)(t.normalized,!1),u.min=t.min,u.max=t.max,u.quantization=s,t.isRGB565&&(a=i.Z.decodeRGB565(a)),(0,l.Z)(t.constantColor)){const e=new Array(4);u.constant=r.Z.pack(t.constantColor,e)}else{const t=m.Z.createVertexBuffer({typedArray:a,context:n,usage:_.Z.STATIC_DRAW});t.vertexArrayDestroyable=!1,e._buffers.push(t),u.buffer=t}const d=e._loadAttributesFor2D;return u.semantic===C.Z.POSITION&&d&&(u.typedArray=a),u}let V,H;function z(e){if(!(0,l.Z)(H)){V=new p(0),H=new Array(e);for(let t=0;t<e;++t)H[t]=V.random()}return H}(0,l.Z)(Object.create)&&(F.prototype=Object.create(T.Z.prototype),F.prototype.constructor=F),Object.defineProperties(F.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},transform:{get:function(){return this._transform}}}),F.prototype.load=function(){if((0,l.Z)(this._promise))return this._promise;this._parsedContent=E.Z.parse(this._arrayBuffer,this._byteOffset),this._state=S.Z.PROCESSING,this._promise=Promise.resolve(this)},F.prototype.process=function(e){if((0,l.Z)(this._error)){const e=this._error;throw this._error=void 0,e}if(this._state===S.Z.READY)return!0;if(this._state===S.Z.PROCESSING){if((0,l.Z)(this._decodePromise))return!1;this._decodePromise=function(e,t){const n=e._parsedContent.draco;let i;if(i=(0,l.Z)(n)?v.Z.decodePointCloud(n,t):Promise.resolve(),(0,l.Z)(i))return e._decodePromise=i,i.then((function(i){if(!e.isDestroyed())return(0,l.Z)(i)&&function(e,t,n){e._state=S.Z.READY;const i=e._parsedContent;let r;if((0,l.Z)(n.POSITION)){if(r={name:"POSITION",semantic:C.Z.POSITION,typedArray:n.POSITION.array,componentDatatype:a.Z.FLOAT,type:Z.Z.VEC3,isQuantized:!1},(0,l.Z)(n.POSITION.data.quantization)){const e=n.POSITION.data.quantization,t=e.range,i=o.Z.fromElements(t,t,t),s=o.Z.unpack(e.minValues),c=(1<<e.quantizationBits)-1;r.isQuantized=!0,r.quantizedRange=c,r.quantizedVolumeOffset=s,r.quantizedVolumeScale=i,r.quantizedComponentDatatype=c<=255?a.Z.UNSIGNED_BYTE:a.Z.UNSIGNED_SHORT,r.quantizedType=Z.Z.VEC3}i.positions=r}if((0,l.Z)(n.NORMAL)){if(r={name:"NORMAL",semantic:C.Z.NORMAL,typedArray:n.NORMAL.array,componentDatatype:a.Z.FLOAT,type:Z.Z.VEC3,isQuantized:!1,octEncoded:!1,octEncodedZXY:!1},(0,l.Z)(n.NORMAL.data.quantization)){const e=(1<<n.NORMAL.data.quantization.quantizationBits)-1;r.quantizedRange=e,r.octEncoded=!0,r.octEncodedZXY=!0,r.quantizedComponentDatatype=a.Z.UNSIGNED_BYTE,r.quantizedType=Z.Z.VEC2}i.normals=r}if((0,l.Z)(n.RGBA)?i.colors={name:"COLOR",semantic:C.Z.COLOR,setIndex:0,typedArray:n.RGBA.array,componentDatatype:a.Z.UNSIGNED_BYTE,type:Z.Z.VEC4,normalized:!0,isTranslucent:!0}:(0,l.Z)(n.RGB)&&(i.colors={name:"COLOR",semantic:C.Z.COLOR,setIndex:0,typedArray:n.RGB.array,componentDatatype:a.Z.UNSIGNED_BYTE,type:Z.Z.VEC3,normalized:!0,isTranslucent:!1}),(0,l.Z)(n.BATCH_ID)){const e=n.BATCH_ID.array;i.batchIds={name:"_FEATURE_ID",semantic:C.Z.FEATURE_ID,setIndex:0,typedArray:e,componentDatatype:a.Z.fromTypedArray(e),type:Z.Z.SCALAR}}let s=i.batchTableJson;const c=t.batchTableProperties;for(const e in c)if(c.hasOwnProperty(e)){const t=n[e];(0,l.Z)(s)||(s={}),i.hasDracoBatchTable=!0;const o=t.data;s[e]={byteOffset:o.byteOffset,type:B(o.componentsPerAttribute),componentType:U(o.componentDatatype),typedArray:t.array}}i.batchTableJson=s}(e,n,i),function(e,t){const n=e._parsedContent,i=new R;i.metallicFactor=0,i.roughnessFactor=.9;const r=new M;r.metallicRoughness=i;const s=n.colors;(0,l.Z)(s)&&s.isTranslucent&&(r.alphaMode=g.Z.BLEND);const a=!(0,l.Z)(n.normals);r.unlit=a;const u=new D;if(u.attributes=function(e,t,n){const i=[];let r;const s=t.positions;return(0,l.Z)(s)&&(function(e){const t=e.typedArray,n=t.length/3,i=Math.min(n,20),r=z(20),s=Number.MAX_VALUE,a=-Number.MAX_VALUE;let c,l,u,d=o.Z.fromElements(s,s,s,G),h=o.Z.fromElements(a,a,a,j);if(e.isQuantized)d=o.Z.ZERO,h=e.quantizedVolumeScale;else for(c=0;c<i;++c)l=Math.floor(r[c]*n),u=o.Z.unpack(t,3*l,W),o.Z.minimumByComponent(d,u,d),o.Z.maximumByComponent(h,u,h);e.min=o.Z.clone(d),e.max=o.Z.clone(h)}(s),r=k(e,s,n),r.count=t.pointsLength,i.push(r)),(0,l.Z)(t.normals)&&(r=k(e,t.normals,n),i.push(r)),(0,l.Z)(t.colors)?(r=k(e,t.colors,n),i.push(r)):(r=k(e,q,n),i.push(r)),(0,l.Z)(t.batchIds)&&(r=k(e,t.batchIds,n),i.push(r)),i}(e,n,t),u.primitiveType=h.Z.POINTS,u.material=r,(0,l.Z)(n.batchIds)){const e=new N;e.propertyTableId=0,e.setIndex=0,e.positionalLabel="featureId_0",u.featureIds.push(e)}const f=new P;f.index=0,f.primitives=[u];const p=new I;p.nodes=[f],p.upAxis=y.Z.Z,p.forwardAxis=y.Z.X;const Z=new x;Z.scene=p,Z.nodes=[f];const v=[];Z.structuralMetadata=function(e,t){const n=e.batchLength,i=e.pointsLength,o=e.batchTableBinary,r=!(0,l.Z)(e.batchIds);if((0,l.Z)(o)||e.hasDracoBatchTable){const s=(0,c.Z)(n,i);return(0,b.Z)({count:s,batchTable:e.batchTableJson,binaryBody:o,parseAsPropertyAttributes:r,customAttributeOutput:t})}return new A.Z({schema:{},propertyTables:[]})}(n,v),v.length>0&&function(e,t,n,i){const o=t.attributes,r=n.length;for(let t=0;t<r;t++){const r=n[t],s=m.Z.createVertexBuffer({typedArray:r.typedArray,context:i,usage:_.Z.STATIC_DRAW});s.vertexArrayDestroyable=!1,e._buffers.push(s),r.buffer=s,r.typedArray=void 0,o.push(r)}t.propertyAttributeIds=[0]}(e,u,v,t),(0,l.Z)(n.rtcCenter)&&(Z.transform=d.Z.multiplyByTranslation(Z.transform,n.rtcCenter,Z.transform));const T=n.positions;(0,l.Z)(T)&&T.isQuantized&&(Z.transform=d.Z.multiplyByTranslation(Z.transform,T.quantizedVolumeOffset,Z.transform)),e._components=Z,e._parsedContent=void 0,e._arrayBuffer=void 0}(e,t),e._state=S.Z.READY,e})).catch((function(t){e.unload(),e._state=S.Z.FAILED;e._error=e.getError("Failed to load Draco pnts",t)}))}(this,e.context)}return!1};const G=new o.Z,j=new o.Z,W=new o.Z,q={name:C.Z.COLOR,semantic:C.Z.COLOR,setIndex:0,constantColor:r.Z.DARKGRAY,componentDatatype:a.Z.FLOAT,type:Z.Z.VEC4,isQuantized:!1,isTranslucent:!1};F.prototype.unload=function(){const e=this._buffers;for(let t=0;t<e.length;t++)e[t].destroy();e.length=0,this._components=void 0,this._parsedContent=void 0,this._arrayBuffer=void 0};const Y=F},451510:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var i=n(660904),o=n(798336),r=n(344485),s=n(48066),a=n(823438),c=n(234146),l=n(11020),u=n(659635),d=n(420136),h=n(708956),f=n(223689),p=n(431056),m=n(404233),_=n(217066),g=n(714233),Z=n(245929),y=n(677684);const b=new o.Z,v={name:"PointCloudStylingPipelineStage",process:function(e,t,n){const o=e.shaderBuilder,v=e.model,C=v.style,x=v.structuralMetadata,I=(0,l.Z)(x)?x.propertyAttributes:void 0,P=(0,l.Z)(v.featureTableId)&&v.featureTables[v.featureTableId].featuresLength>0,D=!(0,l.Z)(I)&&P;if((0,l.Z)(C)&&!D){const n=function(e){const t=(0,a.Z)(w);if(!(0,l.Z)(e))return t;for(let n=0;n<e.length;n++){const i=e[n].properties;for(const e in i)i.hasOwnProperty(e)&&(t[e]=`metadata.${e}`)}return t}(I),i=function(e,t){const n=T,i={translucent:!1};return n.colorStyleFunction=e.getColorShaderFunction(`getColorFromStyle(${E})`,t,i),n.showStyleFunction=e.getShowShaderFunction(`getShowFromStyle(${E})`,t,i),n.pointSizeStyleFunction=e.getPointSizeShaderFunction(`getPointSizeFromStyle(${E})`,t,i),n.styleTranslucent=(0,l.Z)(n.colorStyleFunction)&&i.translucent,n}(C,n);!function(e,t){const n=t.colorStyleFunction;(0,l.Z)(n)&&(e.addDefine("HAS_POINT_CLOUD_COLOR_STYLE",void 0,Z.Z.BOTH),e.addVertexLines(n),e.addVarying("vec4","v_pointCloudColor"));const i=t.showStyleFunction;(0,l.Z)(i)&&(e.addDefine("HAS_POINT_CLOUD_SHOW_STYLE",void 0,Z.Z.VERTEX),e.addVertexLines(i));const o=t.pointSizeStyleFunction;(0,l.Z)(o)&&(e.addDefine("HAS_POINT_CLOUD_POINT_SIZE_STYLE",void 0,Z.Z.VERTEX),e.addVertexLines(o))}(o,i);const r=function(e){const t=e.colorStyleFunction,n=e.showStyleFunction,i=e.pointSizeStyleFunction,o=[];return(0,l.Z)(t)&&S(t,o),(0,l.Z)(n)&&S(n,o),(0,l.Z)(i)&&S(i,o),o}(i),s=r.indexOf("normalMC")>=0,c=h.Z.getAttributeBySemantic(t,y.Z.NORMAL);if(s&&!c)throw new _.Z("Style references the NORMAL semantic but the point cloud does not have normals");o.addDefine("COMPUTE_POSITION_WC_STYLE",void 0,Z.Z.VERTEX),i.styleTranslucent&&(e.alphaOptions.pass=p.Z.TRANSLUCENT)}const O=v.pointCloudShading;let L,N,M;O.attenuation&&o.addDefine("HAS_POINT_CLOUD_ATTENUATION",void 0,Z.Z.VERTEX),O.backFaceCulling&&o.addDefine("HAS_POINT_CLOUD_BACK_FACE_CULLING",void 0,Z.Z.VERTEX),d.Z.is3DTiles(v.type)&&(N=!0,L=v.content,M=L.tile.refine===s.Z.ADD),o.addUniform("vec4","model_pointCloudParameters",Z.Z.VERTEX),o.addVertexLines(m.Z),e.uniformMap.model_pointCloudParameters=function(){const o=b;let s=1;N&&(s=M?5:L.tileset.maximumScreenSpaceError),o.x=(0,c.Z)(O.maximumAttenuation,s),o.x*=n.pixelRatio;const a=function(e,t,n,o){if((0,l.Z)(o)){const e=o.tile.geometricError;if(e>0)return e}if((0,l.Z)(n.baseResolution))return n.baseResolution;const s=h.Z.getAttributeBySemantic(t,y.Z.POSITION),a=s.count,c=e.runtimeNode.transform;let d=i.Z.subtract(s.max,s.min,A);d=u.Z.multiplyByPointAsVector(c,d,A);const f=d.x*d.y*d.z;return r.Z.cbrt(f/a)}(e,t,O,L);o.y=a*O.geometricErrorScale;const d=n.context,p=n.camera.frustum;let m;return m=n.mode===g.Z.SCENE2D||p instanceof f.Z?Number.POSITIVE_INFINITY:d.drawingBufferHeight/n.camera.frustum.sseDenominator,o.z=m,N&&(o.w=L.tileset.timeSinceLoad),o}}},A=new i.Z,T={colorStyleFunction:void 0,showStyleFunction:void 0,pointSizeStyleFunction:void 0,styleTranslucent:!1},w={POSITION:"attributes.positionMC",POSITION_ABSOLUTE:"v_positionWC",COLOR:"attributes.color_0",NORMAL:"attributes.normalMC"},E="ProcessedAttributes attributes, Metadata metadata, float tiles3d_tileset_time";function S(e,t){const n=/attributes\.(\w+)/g;let i=n.exec(e);for(;null!==i;){const o=i[1];-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}const C=v},669873:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(790087),o=n(11020),r=n(234146),s=n(430886),a=n(591477),c=n(497730),l=n(609882),u=n(442429),d=n(55248),h=n(49940);function f(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).triangleIndices,n=e.outlineIndices,s=e.originalVertexCount;i.Z.typeOf.object("options.triangleIndices",t),i.Z.typeOf.object("options.outlineIndices",n),i.Z.typeOf.number("options.originalVertexCount",s),this._triangleIndices=t,this._originalVertexCount=s,this._edges=new Z(n,s),this._outlineCoordinatesTypedArray=void 0,this._extraVertices=[],function(e){let t=e._triangleIndices;const n=e._edges,i=[],r=e._extraVertices,s=e._originalVertexCount,a={};for(let e=0;e<t.length;e+=3){let c=t[e],l=t[e+1],u=t[e+2];const d=!1,h=d||n.hasEdge(c,l),f=d||n.hasEdge(l,u),m=d||n.hasEdge(u,c);let _=p(i,c,l,u,h,f,m);for(;(0,o.Z)(_);){let n=a[_];if(!(0,o.Z)(n)){n=s+r.length;let e=_;for(;e>=s;)e=r[e-s];r.push(e),a[_]=n}n>65534&&(t instanceof Uint16Array||t instanceof Uint8Array)?t=new Uint32Array(t):n>255&&t instanceof Uint8Array&&(t=new Uint16Array(t)),_===c?(c=n,t[e]=n):_===l?(l=n,t[e+1]=n):(u=n,t[e+2]=n),_=p(i,c,l,u,h,f,m)}}e._triangleIndices=t,e._outlineCoordinatesTypedArray=new Float32Array(i)}(this)}function p(e,t,n,i,o,r,s){const a=s?1:0,c=o?1:0,l=m(e,t,a,c,0);if(0===l)return t;const u=o?1:0,d=r?1:0,h=m(e,n,0,u,d);if(0===h)return n;const f=s?1:0,p=r?1:0,g=m(e,i,f,0,p);if(0===g)return i;const Z=l&h&g;let y,b,v;if(1&Z)y=0,b=1,v=2;else if(2&Z)y=0,v=1,b=2;else if(4&Z)b=0,y=1,v=2;else if(8&Z)b=0,v=1,y=2;else if(16&Z)v=0,y=1,b=2;else{if(!(32&Z)){const e=_(l),o=_(h),r=_(g);return e<o&&e<r?t:o<r?n:i}v=0,b=1,y=2}const A=3*t;e[A+y]=a,e[A+b]=c,e[A+v]=0;const T=3*n;e[T+y]=0,e[T+b]=u,e[T+v]=d;const w=3*i;e[w+y]=f,e[w+b]=0,e[w+v]=p}function m(e,t,n,i,r){const s=3*t,a=e[s],c=e[s+1],l=e[s+2];return(0,o.Z)(a)?(a===n&&c===i&&l===r)|(a===n&&c===r&&l===i)<<1|(a===i&&c===n&&l===r)<<2|(a===i&&c===r&&l===n)<<3|(a===r&&c===n&&l===i)<<4|(a===r&&c===i&&l===n)<<5:63}function _(e){return(1&e)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}function g(e){const t=new Uint8Array(e);return t[e-1]=192,8===e?t[e-1]=96:4===e?t[e-1]=48:2===e?t[e-1]=24:1===e&&(t[e-1]=12),t}function Z(e,t){this._originalVertexCount=t,this._edges=new Set;for(let t=0;t<e.length;t+=2){const n=e[t],i=e[t+1],o=Math.min(n,i),r=Math.max(n,i),s=o*this._originalVertexCount+r;this._edges.add(s)}}Object.defineProperties(f.prototype,{updatedTriangleIndices:{get:function(){return this._triangleIndices}},outlineCoordinates:{get:function(){return this._outlineCoordinatesTypedArray}}}),f.prototype.updateAttribute=function(e){const t=this._extraVertices,n=e.length,i=n/this._originalVertexCount,o=t.length,r=new(0,e.constructor)(e.length+o*i);r.set(e);for(let e=0;e<o;e++){const o=t[e]*i,s=n+e*i;for(let e=0;e<i;e++)r[s+e]=r[o+e]}return r},f.createTexture=function(e){let t=e.cache.modelOutliningCache;if((0,o.Z)(t)||(t=e.cache.modelOutliningCache={}),(0,o.Z)(t.outlineTexture))return t.outlineTexture;const n=Math.min(4096,a.Z.maximumTextureSize);let i=n;const r=g(i),f=[];for(;i>1;)i>>=1,f.push(g(i));const p=new l.Z({context:e,source:{arrayBufferView:r,mipLevels:f},width:n,height:1,pixelFormat:s.Z.LUMINANCE,sampler:new c.Z({wrapS:h.Z.CLAMP_TO_EDGE,wrapT:h.Z.CLAMP_TO_EDGE,minificationFilter:d.Z.LINEAR_MIPMAP_LINEAR,magnificationFilter:u.Z.LINEAR})});return t.outlineTexture=p,p},Z.prototype.hasEdge=function(e,t){const n=Math.min(e,t),i=Math.max(e,t),o=n*this._originalVertexCount+i;return this._edges.has(o)};const y=f},662691:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(388402),o=n(245929),r=n(669873),s=n(874327),a=n(409583);const c={name:"PrimitiveOutlinePipelineStage",process:function(e,t,n){const c=e.shaderBuilder,l=e.uniformMap;c.addDefine("HAS_PRIMITIVE_OUTLINE",void 0,o.Z.BOTH),c.addAttribute("vec3","a_outlineCoordinates"),c.addVarying("vec3","v_outlineCoordinates");const u=t.outlineCoordinates,d={index:e.attributeIndex++,vertexBuffer:u.buffer,componentsPerAttribute:i.Z.getNumberOfComponents(u.type),componentDatatype:u.componentDatatype,offsetInBytes:u.byteOffset,strideInBytes:u.byteStride,normalize:u.normalized};e.attributes.push(d),c.addUniform("sampler2D","model_outlineTexture",o.Z.FRAGMENT);const h=r.Z.createTexture(n.context);l.model_outlineTexture=function(){return h};const f=e.model;c.addUniform("vec4","model_outlineColor",o.Z.FRAGMENT),l.model_outlineColor=function(){return f.outlineColor},c.addUniform("bool","model_showOutline",o.Z.FRAGMENT),l.model_showOutline=function(){return f.showOutline},c.addVertexLines(s.Z),c.addFragmentLines(a.Z)}}},240302:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(762031),o=n(660904),r=n(790087),s=n(823438),a=n(11020),c=n(708956),l=n(506721);const u=function(e,t){r.Z.typeOf.object("nodeRenderResources",e),r.Z.typeOf.object("runtimePrimitive",t),this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.uniformMap=(0,s.Z)(e.uniformMap),this.alphaOptions=(0,s.Z)(e.alphaOptions),this.renderStateOptions=(0,s.Z)(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;const n=t.primitive;this.count=(0,a.Z)(n.indices)?n.indices.count:c.Z.getAttributeBySemantic(n,"POSITION").count,this.hasPropertyTable=!1,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;const u=c.Z.getPositionMinMax(n,this.runtimeNode.instancingTranslationMin,this.runtimeNode.instancingTranslationMax);this.positionMin=o.Z.clone(u.min,new o.Z),this.positionMax=o.Z.clone(u.max,new o.Z),this.boundingSphere=i.Z.fromCornerPoints(this.positionMin,this.positionMax,new i.Z),this.lightingOptions=new l.Z,this.pickId=void 0}},423194:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(11020),o=n(804868),r=n(583982),s=n(708956);const a={name:"PrimitiveStatisticsPipelineStage",_countGeometry:c,_count2DPositions:l,_countMorphTargetAttributes:u,_countMaterialTextures:d,_countFeatureIdTextures:h,_countBinaryMetadata:f};function c(e,t){const n=(0,i.Z)(t.indices)?t.indices.count:s.Z.getAttributeBySemantic(t,"POSITION").count,r=t.primitiveType;r===o.Z.POINTS?e.pointsLength+=n:o.Z.isTriangles(r)&&(e.trianglesLength+=function(e,t){switch(e){case o.Z.TRIANGLES:return t/3;case o.Z.TRIANGLE_STRIP:case o.Z.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}(r,n));const a=t.attributes,c=a.length;for(let t=0;t<c;t++){const n=a[t];if((0,i.Z)(n.buffer)){const t=(0,i.Z)(n.typedArray);e.addBuffer(n.buffer,t)}}const l=t.outlineCoordinates;if((0,i.Z)(l)&&(0,i.Z)(l.buffer)){const t=!1;e.addBuffer(l.buffer,t)}const u=t.indices;if((0,i.Z)(u)&&(0,i.Z)(u.buffer)){const t=(0,i.Z)(u.typedArray);e.addBuffer(u.buffer,t)}}function l(e,t){const n=t.positionBuffer2D;if((0,i.Z)(n)){const t=!0;e.addBuffer(n,t)}}function u(e,t){const n=t.morphTargets;if(!(0,i.Z)(n))return;const o=n.length;for(let t=0;t<o;t++){const o=n[t].attributes,r=o.length;for(let t=0;t<r;t++){const n=o[t];(0,i.Z)(n.buffer)&&e.addBuffer(n.buffer,!1)}}}function d(e,t){const n=function(e){const t=e.metallicRoughness,n=[e.emissiveTexture,e.normalTexture,e.occlusionTexture,t.baseColorTexture,t.metallicRoughnessTexture],o=e.specularGlossiness;return(0,i.Z)(o)&&(n.push(o.diffuseTexture),n.push(o.specularGlossinessTexture)),n}(t),o=n.length;for(let t=0;t<o;t++){const o=n[t];(0,i.Z)(o)&&(0,i.Z)(o.texture)&&e.addTexture(o.texture)}}function h(e,t){const n=t.length;for(let o=0;o<n;o++){const n=t[o];if(n instanceof r.Z.FeatureIdTexture){const t=n.textureReader;(0,i.Z)(t.texture)&&e.addTexture(t.texture)}}}function f(e,t){const n=t.structuralMetadata;(0,i.Z)(n)&&(function(e,t){const n=t.propertyTextures;if(!(0,i.Z)(n))return;const o=n.length;for(let t=0;t<o;t++){const o=n[t].properties;for(const t in o)if(o.hasOwnProperty(t)){const n=o[t].textureReader;(0,i.Z)(n.texture)&&e.addTexture(n.texture)}}}(e,n),e.propertyTablesByteLength+=n.propertyTablesByteLength);const o=t.featureTables;if(!(0,i.Z)(o))return;const r=o.length;for(let t=0;t<r;t++){const n=o[t];e.addBatchTexture(n.batchTexture)}}a.process=function(e,t,n){const i=e.model,o=i.statistics;c(o,t),l(o,e.runtimePrimitive),u(o,t),d(o,t.material),h(o,t.featureIds),f(o,i)};const p=a},406501:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(762031),o=n(379593),r=n(915323),s=n(660904),a=n(823438),c=n(394579),l=n(11020),u=n(659635),d=n(708956),h=n(714233),f=n(245929),p=n(677684),m=n(638452);const _=new u.Z,g=new u.Z,Z={name:"SceneMode2DPipelineStage",process:function(e,t,n){const Z=d.Z.getAttributeBySemantic(t,p.Z.POSITION),A=e.shaderBuilder,T=e.model,w=T.sceneGraph.computedModelMatrix,E=e.runtimeNode.computedTransform,S=u.Z.multiplyTransformation(w,E,_),C=function(e,t,n){const o=u.Z.multiplyByPoint(t,e.positionMin,y),r=m.Z.computeActualWgs84Position(n,o,o),s=u.Z.multiplyByPoint(t,e.positionMax,b),a=m.Z.computeActualWgs84Position(n,s,s);return i.Z.fromCornerPoints(r,a,new i.Z)}(e,S,n),x=e.runtimePrimitive;x.boundingSphere2D=C;const I=e.runtimeNode.node.instances;if((0,l.Z)(I))return;if((0,l.Z)(Z.typedArray)){const e=function(e,t,n,i){const c=(0,a.Z)(i);c.mode=h.Z.COLUMBUS_VIEW;const d=function(e,t,n,i){let o;o=(0,l.Z)(e.quantization)?function(e,t){const n=e.length,i=new Float32Array(n),o=t.quantizedVolumeOffset,r=t.quantizedVolumeStepSize;for(let t=0;t<n;t+=3){const n=s.Z.fromArray(e,t,v),a=s.Z.multiplyComponents(n,r,n),c=s.Z.add(a,o,a);i[t]=c.x,i[t+1]=c.y,i[t+2]=c.z}return i}(e.typedArray,e.quantization):e.typedArray.slice();const r=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,a=o.length,c=(0,l.Z)(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let e=r;e<a;e+=c){const r=s.Z.fromArray(o,e,v);if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))continue;const a=u.Z.multiplyByPoint(t,r,r),c=m.Z.computeActualWgs84Position(i,a,a),l=s.Z.subtract(c,n,c);o[e]=l.x,o[e+1]=l.y,o[e+2]=l.z}return o}(e,t,n.center,c),f=o.Z.createVertexBuffer({context:i.context,typedArray:d,usage:r.Z.STATIC_DRAW});return f.vertexArrayDestroyable=!1,f}(Z,S,C,n);x.positionBuffer2D=e,T._modelResources.push(e),Z.typedArray=void 0}A.addDefine("USE_2D_POSITIONS",void 0,f.Z.VERTEX),A.addUniform("mat4","u_modelView2D",f.Z.VERTEX);const P=u.Z.fromTranslation(C.center,new u.Z),D=n.context,O={u_modelView2D:function(){return u.Z.multiplyTransformation(D.uniformState.view,P,g)}};e.uniformMap=(0,c.Z)(O,e.uniformMap)}},y=new s.Z,b=new s.Z,v=new s.Z,A=Z},427709:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(234146),o=n(11020),r=n(245929),s=n(777860),a=n(583982),c=n(708956);const l={name:"SelectedFeatureIdPipelineStage",STRUCT_ID_SELECTED_FEATURE:"SelectedFeature",STRUCT_NAME_SELECTED_FEATURE:"SelectedFeature",FUNCTION_ID_FEATURE_VARYINGS_VS:"updateFeatureStructVS",FUNCTION_ID_FEATURE_VARYINGS_FS:"updateFeatureStructFS",FUNCTION_SIGNATURE_UPDATE_FEATURE:"void updateFeatureStruct(inout SelectedFeature feature)"};function u(e){return e instanceof a.Z.FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function d(e){return e instanceof a.Z.FeatureIdTexture?r.Z.FRAGMENT:r.Z.BOTH}l.process=function(e,t,n){const a=e.shaderBuilder;e.hasPropertyTable=!0;const h=function(e,t,n){let r,s;return(0,o.Z)(t.instances)&&(s=c.Z.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),(0,o.Z)(s))?(r=(0,i.Z)(s.label,s.positionalLabel),{featureIds:s,variableName:r,shaderDestination:d(s),featureIdDefine:u(s)}):(s=c.Z.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),r=(0,i.Z)(s.label,s.positionalLabel),{featureIds:s,variableName:r,shaderDestination:d(s),featureIdDefine:u(s)})}(e.model,e.runtimeNode.node,t),f=h.shaderDestination;a.addDefine("HAS_SELECTED_FEATURE_ID",void 0,f),a.addDefine("SELECTED_FEATURE_ID",h.variableName,f),a.addDefine(h.featureIdDefine,void 0,f),function(e){e.addStructField(l.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField(l.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField(l.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}(a);const p=h.featureIds.nullFeatureId,m=e.uniformMap;(0,o.Z)(p)&&(a.addDefine("HAS_NULL_FEATURE_ID",void 0,f),a.addUniform("int","model_nullFeatureId",f),m.model_nullFeatureId=function(){return p}),h.shaderDestination===r.Z.BOTH&&a.addVertexLines(s.Z),a.addFragmentLines(s.Z)};const h=l},276194:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(394579),o=n(245929),r=n(764367),s=n(677684);const a={name:"SkinningPipelineStage",FUNCTION_ID_GET_SKINNING_MATRIX:"getSkinningMatrix",FUNCTION_SIGNATURE_GET_SKINNING_MATRIX:"mat4 getSkinningMatrix()",process:function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_SKINNING",void 0,o.Z.VERTEX),function(e,t){e.addFunction(a.FUNCTION_ID_GET_SKINNING_MATRIX,a.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,o.Z.VERTEX);let n,i;e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,["mat4 skinnedMatrix = mat4(0);"]);const r=["x","y","z","w"],c=function(e){let t=-1;const n=e.attributes,i=n.length;for(let e=0;e<i;e++){const i=n[e];(i.semantic===s.Z.JOINTS||i.semantic===s.Z.WEIGHTS)&&(t=Math.max(t,i.setIndex))}return t}(t);for(n=0;n<=c;n++)for(i=0;i<=3;i++){const t=r[i],o=`skinnedMatrix += a_weights_${n}.${t} * u_jointMatrices[int(a_joints_${n}.${t})];`;e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,[o])}e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,["return skinnedMatrix;"])}(n,t);const c=e.runtimeNode,l=c.computedJointMatrices;n.addUniform("mat4",`u_jointMatrices[${l.length}]`,o.Z.VERTEX),n.addVertexLines(r.Z);const u={u_jointMatrices:function(){return c.computedJointMatrices}};e.uniformMap=(0,i.Z)(u,e.uniformMap)}},c=a},629011:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const i={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2,getStyleCommandsNeeded:function(e,t){return 0===t?i.ALL_OPAQUE:t===e?i.ALL_TRANSLUCENT:i.OPAQUE_AND_TRANSLUCENT}},o=Object.freeze(i)},32492:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(11020),o=n(722313),r=n(111441),s=n(344485),a=n(804376),c=n(545870),l=n(609882),u=n(55248),d=n(49940);function h(){this._defaultTexture=void 0,this._textures={},this._loadedImages=[],this._lastUpdatedFrame=-1}function f(e,t,n){const{id:o,textureUniform:l,image:u}=t,h=n.webgl2?p(l,u,n):function(e,t,n){const{typedArray:o,sampler:l}=e,u=m(l),h=l.wrapS===d.Z.REPEAT||l.wrapS===d.Z.MIRRORED_REPEAT||l.wrapT===d.Z.REPEAT||l.wrapT===d.Z.MIRRORED_REPEAT,{width:f,height:g}=(0,i.Z)(o)?e:t,Z=[f,g].every(s.Z.isPowerOfTwo);if(!u&&!h||Z)return p(e,t,n);if(!(0,i.Z)(o))return p(e,(0,a.Z)(t),n);if(e.pixelDatatype===c.Z.UNSIGNED_BYTE){const e=(0,r.Z)(o,f,g);return p({sampler:l},(0,a.Z)(e),n)}return u?console.warn("Texture requires resizing for mipmaps but pixelDataType cannot be resized. The texture may be rendered incorrectly."):h&&console.warn("Texture requires resizing for wrapping but pixelDataType cannot be resized. The texture may be rendered incorrectly."),_(e,n)}(l,u,n),f=e._textures[o];(0,i.Z)(f)&&f!==n.defaultTexture&&f.destroy(),e._textures[o]=h}function p(e,t,n){const{typedArray:o,sampler:r}=e,s=(0,i.Z)(o)?_(e,n):new l.Z({context:n,source:t,sampler:r});return m(r)&&s.generateMipmap(),s}function m(e){return[u.Z.NEAREST_MIPMAP_NEAREST,u.Z.NEAREST_MIPMAP_LINEAR,u.Z.LINEAR_MIPMAP_NEAREST,u.Z.LINEAR_MIPMAP_LINEAR].includes(e.minificationFilter)}function _(e,t){const{pixelFormat:n,pixelDatatype:i,width:o,height:r,typedArray:s,sampler:a}=e;return new l.Z({context:t,pixelFormat:n,pixelDatatype:i,source:{arrayBufferView:s,width:o,height:r},sampler:a,flipY:!1})}h.prototype.getTexture=function(e){return this._textures[e]},h.prototype.loadTexture2D=function(e,t){(0,i.Z)(t.typedArray)?this._loadedImages.push({id:e,textureUniform:t}):function(e,t,n){n.resource.fetchImage().then((function(i){e._loadedImages.push({id:t,image:i,textureUniform:n})})).catch((function(){const n=e._textures[t];(0,i.Z)(n)&&n!==e._defaultTexture&&n.destroy(),e._textures[t]=e._defaultTexture}))}(this,e,t)},h.prototype.update=function(e){if(e.frameNumber===this._lastUpdatedFrame)return;this._lastUpdatedFrame=e.frameNumber;const t=e.context;this._defaultTexture=t.defaultTexture;const n=this._loadedImages;for(let e=0;e<n.length;e++)f(this,n[e],t);n.length=0},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){const e=this._textures;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n!==this._defaultTexture&&n.destroy()}return(0,o.Z)(this)};const g=h},505117:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(394579),o=n(245929),r=n(405254),s=n(822948);const a={name:"TilesetPipelineStage",process:function(e,t,n){if(t.hasSkipLevelOfDetail(n)){e.shaderBuilder.addDefine("POLYGON_OFFSET",void 0,o.Z.FRAGMENT);const t={u_polygonOffset:function(){return r.Z.ZERO}};e.uniformMap=(0,i.Z)(t,e.uniformMap),e.hasSkipLevelOfDetail=!0}const a=e.renderStateOptions;a.stencilTest=s.Z.setCesium3DTileBit(),a.stencilMask=s.Z.CESIUM_3D_TILE_MASK}}},564438:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",MAT2:"mat2",MAT3:"mat3",MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"})},7901:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(379593),o=n(915323),r=n(11020),s=n(342209),a=n(708956),c=n(804868),l=n(245929),u=n(677684),d=n(103287);const h={name:"WireframePipelineStage",process:function(e,t,n){e.shaderBuilder.addDefine("HAS_WIREFRAME",void 0,l.Z.FRAGMENT);const h=e.model,f=function(e,t,n){const c=a.Z.getAttributeBySemantic(e,u.Z.POSITION).count,l=n.context.webgl2;let h;if((0,r.Z)(t)){const e=t.buffer,n=t.count;(0,r.Z)(e)&&l?(h=e.sizeInBytes===n?new Uint8Array(n):s.Z.createTypedArray(c,n),e.getBufferData(h)):h=t.typedArray}const f=e.primitiveType,p=d.Z.createWireframeIndices(f,c,h),m=s.Z.fromSizeInBytes(p.BYTES_PER_ELEMENT);return i.Z.createIndexBuffer({context:n.context,typedArray:p,usage:o.Z.STATIC_DRAW,indexDatatype:m})}(t,e.indices,n);h._pipelineResources.push(f),e.wireframeIndexBuffer=f,h.statistics.addBuffer(f,!1);const p=e.primitiveType,m=e.count;e.primitiveType=c.Z.LINES,e.count=d.Z.getWireframeIndicesCount(p,m)}},f=h},789576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(762031),o=n(823438),r=n(11020),s=n(765153),a=n(659635),c=n(661679),l=n(417148),u=n(858371),d=n(147679),h=n(402426),f=n(714233),p=n(534890),m=n(391639),_=n(708956),g=n(127828);const Z=function(e,t){const n=e.shaderBuilder;n.addVertexLines(h.Z),n.addFragmentLines(d.Z);const Z=function(e){const t=e.wireframeIndexBuffer;if((0,r.Z)(t))return t;const n=e.indices;if((0,r.Z)(n)){if(!(0,r.Z)(n.buffer))throw new s.Z("Indices must be provided as a Buffer");return n.buffer}}(e),y=new u.Z({context:t.context,indexBuffer:Z,attributes:e.attributes}),b=e.model;b._pipelineResources.push(y);const v=n.buildShaderProgram(t.context);b._pipelineResources.push(v);const A=e.alphaOptions.pass,T=b.sceneGraph,w=t.mode===f.Z.SCENE3D;let E,S;if(w||t.scene3DOnly||!b._projectTo2D){const t=w?T._computedModelMatrix:T._computedModelMatrix2D;E=a.Z.multiplyTransformation(t,e.runtimeNode.computedTransform,new a.Z),S=i.Z.transform(e.boundingSphere,E,e.boundingSphere)}else E=a.Z.multiplyTransformation(T._computedModelMatrix,e.runtimeNode.computedTransform,new a.Z),S=e.runtimePrimitive.boundingSphere2D;let C=(0,o.Z)(l.Z.fromCache(e.renderStateOptions),!0);C.cull.face=_.Z.getCullFace(E,e.primitiveType),C=l.Z.fromCache(C);const x=(0,r.Z)(b.classificationType),I=!x&&p.Z.castShadows(b.shadows),P=!x&&p.Z.receiveShadows(b.shadows),D=x?void 0:e.pickId,O=new c.Z({boundingVolume:S,modelMatrix:E,uniformMap:e.uniformMap,renderState:C,vertexArray:y,shaderProgram:v,cull:b.cull,pass:A,count:e.count,owner:b,pickId:D,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:b.debugShowBoundingVolume,castShadows:I,receiveShadows:P});return x?new m.Z({primitiveRenderResources:e,command:O}):new g.Z({primitiveRenderResources:e,command:O})}},285605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({NONE:0,REPEAT:1,MIRRORED_REPEAT:2})},607441:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({STOPPED:0,ANIMATING:1})},583982:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(475285),o=n(660904),r=n(798336),s=n(664288),a=n(659635);const c={};function l(){this.credits=[]}function u(){this.baseColorTexture=void 0,this.metallicRoughnessTexture=void 0,this.baseColorFactor=r.Z.clone(u.DEFAULT_BASE_COLOR_FACTOR),this.metallicFactor=u.DEFAULT_METALLIC_FACTOR,this.roughnessFactor=u.DEFAULT_ROUGHNESS_FACTOR}function d(){this.diffuseTexture=void 0,this.specularGlossinessTexture=void 0,this.diffuseFactor=r.Z.clone(d.DEFAULT_DIFFUSE_FACTOR),this.specularFactor=o.Z.clone(d.DEFAULT_SPECULAR_FACTOR),this.glossinessFactor=d.DEFAULT_GLOSSINESS_FACTOR}function h(){this.metallicRoughness=new u,this.specularGlossiness=void 0,this.emissiveTexture=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveFactor=o.Z.clone(h.DEFAULT_EMISSIVE_FACTOR),this.alphaMode=i.Z.OPAQUE,this.alphaCutoff=.5,this.doubleSided=!1,this.unlit=!1}u.DEFAULT_BASE_COLOR_FACTOR=r.Z.ONE,u.DEFAULT_METALLIC_FACTOR=1,u.DEFAULT_ROUGHNESS_FACTOR=1,d.DEFAULT_DIFFUSE_FACTOR=r.Z.ONE,d.DEFAULT_SPECULAR_FACTOR=o.Z.ONE,d.DEFAULT_GLOSSINESS_FACTOR=1,h.DEFAULT_EMISSIVE_FACTOR=o.Z.ZERO,c.Quantization=function(){this.octEncoded=!1,this.octEncodedZXY=!1,this.normalizationRange=void 0,this.quantizedVolumeOffset=void 0,this.quantizedVolumeDimensions=void 0,this.quantizedVolumeStepSize=void 0,this.componentDatatype=void 0,this.type=void 0},c.Attribute=function(){this.name=void 0,this.semantic=void 0,this.setIndex=void 0,this.componentDatatype=void 0,this.type=void 0,this.normalized=!1,this.count=void 0,this.min=void 0,this.max=void 0,this.constant=void 0,this.quantization=void 0,this.typedArray=void 0,this.buffer=void 0,this.byteOffset=0,this.byteStride=void 0},c.Indices=function(){this.indexDatatype=void 0,this.count=void 0,this.buffer=void 0,this.typedArray=void 0},c.FeatureIdAttribute=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.setIndex=void 0,this.label=void 0,this.positionalLabel=void 0},c.FeatureIdTexture=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.textureReader=void 0,this.label=void 0,this.positionalLabel=void 0},c.FeatureIdImplicitRange=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.offset=0,this.repeat=void 0,this.label=void 0,this.positionalLabel=void 0},c.MorphTarget=function(){this.attributes=[]},c.Primitive=function(){this.attributes=[],this.morphTargets=[],this.indices=void 0,this.material=void 0,this.primitiveType=void 0,this.featureIds=[],this.propertyTextureIds=[],this.propertyAttributeIds=[],this.outlineCoordinates=void 0},c.Instances=function(){this.attributes=[],this.featureIds=[],this.transformInWorldSpace=!1},c.Skin=function(){this.index=void 0,this.joints=[],this.inverseBindMatrices=[]},c.Node=function(){this.name=void 0,this.index=void 0,this.children=[],this.primitives=[],this.instances=void 0,this.skin=void 0,this.matrix=void 0,this.translation=void 0,this.rotation=void 0,this.scale=void 0,this.morphWeights=[],this.articulationName=void 0},c.Scene=function(){this.nodes=[]},c.AnimatedPropertyType=Object.freeze({TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"}),c.AnimationSampler=function(){this.input=[],this.interpolation=void 0,this.output=[]},c.AnimationTarget=function(){this.node=void 0,this.path=void 0},c.AnimationChannel=function(){this.sampler=void 0,this.target=void 0},c.Animation=function(){this.name=void 0,this.samplers=[],this.channels=[]},c.ArticulationStage=function(){this.name=void 0,this.type=void 0,this.minimumValue=void 0,this.maximumValue=void 0,this.initialValue=void 0},c.Articulation=function(){this.name=void 0,this.stages=[]},c.Asset=l,c.Components=function(){this.asset=new l,this.scene=void 0,this.nodes=[],this.skins=[],this.animations=[],this.articulations=[],this.structuralMetadata=void 0,this.upAxis=void 0,this.forwardAxis=void 0,this.transform=a.Z.clone(a.Z.IDENTITY)},c.TextureReader=function(){this.texture=void 0,this.index=void 0,this.texCoord=0,this.transform=s.Z.clone(s.Z.IDENTITY),this.channels=void 0},c.MetallicRoughness=u,c.SpecularGlossiness=d,c.Material=h;const f=c},511877:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(949225),o=n(660904),r=n(234146),s=n(11020),a=n(722313),c=n(63354),l=n(337389),u=n(664288),d=n(659635),h=n(617703),f=n(720794),p=n(905278),m=n(420171);function _(e){let t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).textureUrl;(0,s.Z)(t)||(t=(0,i.Z)("Assets/Textures/moonSmall.jpg")),this.show=(0,r.Z)(e.show,!0),this.textureUrl=t,this._ellipsoid=(0,r.Z)(e.ellipsoid,c.Z.MOON),this.onlySunLighting=(0,r.Z)(e.onlySunLighting,!0),this._ellipsoidPrimitive=new p.Z({radii:this.ellipsoid.radii,material:m.Z.fromType(m.Z.ImageType),depthTestEnabled:!1,_owner:this}),this._ellipsoidPrimitive.material.translucent=!1,this._axes=new l.Z}Object.defineProperties(_.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});const g=new u.Z,Z=new u.Z,y=new o.Z,b=[];_.prototype.update=function(e){if(!this.show)return;const t=this._ellipsoidPrimitive;t.material.uniforms.image=this.textureUrl,t.onlySunLighting=this.onlySunLighting;const n=e.time;(0,s.Z)(f.Z.computeIcrfToFixedMatrix(n,g))||f.Z.computeTemeToPseudoFixedMatrix(n,g);const i=this._axes.evaluate(n,Z);u.Z.transpose(i,i),u.Z.multiply(g,i,i);const o=h.Z.computeMoonPositionInEarthInertialFrame(n,y);u.Z.multiplyByVector(g,o,o),d.Z.fromRotationTranslation(i,o,t.modelMatrix);const r=e.commandList;return e.commandList=b,b.length=0,t.update(e),e.commandList=r,1===b.length?b[0]:void 0},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return this._ellipsoidPrimitive=this._ellipsoidPrimitive&&this._ellipsoidPrimitive.destroy(),(0,a.Z)(this)};const v=_},284134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(11020),o=n(906439),r=n(722313),s=n(765153),a=n(161648),c=n(596898),l=n(338212),u=n(293685),d=n(217066),h=n(612634),f=n(864238),p=n(577094),m=n(849515),_=n(106215),g=n(926040);function Z(e,t,n,o){this._tileset=e,this._tile=t,this._tilesetResource=n,this._contents=[],this._contentsCreated=!1;const r=(0,i.Z)(o.contents)?o.contents:o.content;this._innerContentHeaders=r,this._requestsInFlight=0,this._cancelCount=0;const s=this._innerContentHeaders.length;this._arrayFetchPromises=new Array(s),this._requests=new Array(s),this._ready=!1,this._resolveContent=void 0,this._readyPromise=new Promise((e=>{this._resolveContent=e})),this._innerContentResources=new Array(s),this._serverKeys=new Array(s);for(let e=0;e<s;e++){const t=n.getDerivedResource({url:r[e].uri}),i=c.Z.getServerKey(t.getUrlComponent());this._innerContentResources[e]=t,this._serverKeys[e]=i}}function y(e,t){e._requestsInFlight+=t,e.tileset.statistics.numberOfPendingRequests+=t}function b(e,t){e._cancelCount++,e._tile._contentState=t;const n=e.tileset.statistics;n.numberOfPendingRequests-=e._requestsInFlight,n.numberOfAttemptedRequests+=e._requestsInFlight,e._requestsInFlight=0;const i=e._innerContentHeaders.length;e._arrayFetchPromises=new Array(i)}function v(e,t,n,o){const r=e._innerContentResources[t].clone(),s=e.tile,c=e._serverKeys[t],d=new a.Z({throttle:!0,throttleByServer:!0,type:u.Z.TILES3D,priorityFunction:function(){return s._priority},serverKey:c});r.request=d,e._requests[t]=d;const h=r.fetchArrayBuffer();if((0,i.Z)(h))return h.then((function(t){if(!(n<e._cancelCount)){if(!r.request.cancelled&&r.request.state!==l.Z.CANCELLED)return y(e,-1),t;b(e,o)}})).catch((function(i){n<e._cancelCount||(r.request.cancelled||r.request.state===l.Z.CANCELLED?b(e,o):(y(e,-1),A(e,t,i)))}))}function A(e,t,n){const o=e._tileset,r=e._innerContentResources[t].url,s=(0,i.Z)(n.message)?n.message:n.toString();o.tileFailed.numberOfListeners>0?o.tileFailed.raiseEvent({url:r,message:s}):(console.log(`A content failed to load: ${r}`),console.log(`Error: ${s}`))}Object.defineProperties(Z.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return!!this._contentsCreated&&this._ready}},readyPromise:{get:function(){return(0,o.Z)("Multiple3DTileContent.readyPromise","Multiple3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Multiple3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(){throw new s.Z("Multiple3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(){throw new s.Z("Multiple3DTileContent cannot have group metadata")}},innerContentUrls:{get:function(){return this._innerContentHeaders.map((function(e){return e.uri}))}}}),Z.prototype.requestInnerContents=function(){if(!function(e){const t={};for(let n=0;n<e.length;n++){const o=e[n];(0,i.Z)(t[o])?t[o]++:t[o]=1}for(const e in t)if(t.hasOwnProperty(e)&&!c.Z.serverHasOpenSlots(e,t[e]))return!1;return c.Z.heapHasOpenSlots(e.length)}(this._serverKeys))return void(this.tileset.statistics.numberOfAttemptedRequests+=this._serverKeys.length);const e=this._innerContentHeaders;y(this,e.length);const t=this._cancelCount;for(let n=0;n<e.length;n++)this._arrayFetchPromises[n]=v(this,n,t,this._tile._contentState);return async function(e){const t=e._cancelCount,n=await Promise.all(e._arrayFetchPromises);if(t<e._cancelCount)return;const o=n.map(((t,n)=>async function(e,t,n){if((0,i.Z)(t))try{const o=(0,g.Z)(t);if(o.contentType===f.Z.EXTERNAL_TILESET)throw new d.Z("External tilesets are disallowed inside multiple contents");e._disableSkipLevelOfDetail=e._disableSkipLevelOfDetail||o.contentType===f.Z.GEOMETRY||o.contentType===f.Z.VECTOR;const r=e._tileset,s=e._innerContentResources[n],a=e._tile;let c;const l=p.Z[o.contentType];c=(0,i.Z)(o.binaryPayload)?await Promise.resolve(l(r,a,s,o.binaryPayload.buffer,0)):await Promise.resolve(l(r,a,s,o.jsonPayload));const u=e._innerContentHeaders[n];if(a.hasImplicitContentMetadata){const e=a.implicitSubtree,t=a.implicitCoordinates;c.metadata=e.getContentMetadataView(t,n)}else a.hasImplicitContent||(c.metadata=(0,m.Z)(r,u));const Z=(0,_.Z)(r,u);return(0,i.Z)(Z)&&(c.group=new h.Z({metadata:Z})),c}catch(t){A(e,n,t)}}(e,t,n))),r=await Promise.all(o);return e._contentsCreated=!0,e._contents=r.filter(i.Z),r}(this)},Z.prototype.cancelRequests=function(){for(let e=0;e<this._requests.length;e++){const t=this._requests[e];(0,i.Z)(t)&&t.cancel()}},Z.prototype.hasProperty=function(e,t){return!1},Z.prototype.getFeature=function(e){},Z.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)},Z.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},Z.prototype.update=function(e,t){const n=this._contents,i=n.length;let o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0,this._resolveContent(this))},Z.prototype.isDestroyed=function(){return!1},Z.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,r.Z)(this)};const T=Z},578990:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(890828),o=n(35961),r=n(11020),s=n(722313),a=n(430886),c=n(248894),l=n(598020),u=n(661679),d=n(12503),h=n(545870),f=n(417148),p=n(437530),m=n(609882),_=n(64941),g=n(766359),Z=n(25563),y=n(667046);function b(e){this._numSamples=1,this._translucentMultipassSupport=!1,this._translucentMRTSupport=!1;const t=e.colorBufferFloat&&e.depthTexture&&e.floatBlend;this._translucentMRTSupport=e.drawBuffers&&t,this._translucentMultipassSupport=!this._translucentMRTSupport&&t,this._opaqueFBO=void 0,this._opaqueTexture=void 0,this._depthStencilTexture=void 0,this._accumulationTexture=void 0,this._translucentFBO=new d.Z({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._alphaFBO=new d.Z({createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._adjustTranslucentFBO=new d.Z({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1}),this._adjustAlphaFBO=new d.Z({createColorAttachments:!1}),this._opaqueClearCommand=new l.Z({color:new o.Z(0,0,0,0),owner:this}),this._translucentMRTClearCommand=new l.Z({color:new o.Z(0,0,0,1),owner:this}),this._translucentMultipassClearCommand=new l.Z({color:new o.Z(0,0,0,0),owner:this}),this._alphaClearCommand=new l.Z({color:new o.Z(1,1,1,1),owner:this}),this._translucentRenderStateCache={},this._alphaRenderStateCache={},this._compositeCommand=void 0,this._adjustTranslucentCommand=void 0,this._adjustAlphaCommand=void 0,this._viewport=new i.Z,this._rs=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHDR=!1}function v(e){e._accumulationTexture=e._accumulationTexture&&!e._accumulationTexture.isDestroyed()&&e._accumulationTexture.destroy(),e._revealageTexture=e._revealageTexture&&!e._revealageTexture.isDestroyed()&&e._revealageTexture.destroy()}function A(e){e._translucentFBO.destroy(),e._alphaFBO.destroy(),e._adjustTranslucentFBO.destroy(),e._adjustAlphaFBO.destroy()}function T(e){v(e),A(e)}b.prototype.update=function(e,t,n,o,s){if(!this.isSupported())return;this._opaqueFBO=n,this._opaqueTexture=n.getColorTexture(0),this._depthStencilTexture=n.getDepthStencilTexture();const{width:l,height:u}=this._opaqueTexture,d=this._accumulationTexture,Z=!(0,r.Z)(d)||d.width!==l||d.height!==u||o!==this._useHDR,y=this._numSamples!==s;if((Z||y)&&(this._numSamples=s,function(e,t,n,i){v(e),e._accumulationTexture=new m.Z({context:t,width:n,height:i,pixelFormat:a.Z.RGBA,pixelDatatype:h.Z.FLOAT});const o=new Float32Array(n*i*4);e._revealageTexture=new m.Z({context:t,pixelFormat:a.Z.RGBA,pixelDatatype:h.Z.FLOAT,source:{arrayBufferView:o,width:n,height:i},flipY:!1})}(this,e,l,u)),(!(0,r.Z)(this._translucentFBO.framebuffer)||Z||y)&&!function(e,t){A(e);const n=c.Z.FRAMEBUFFER_COMPLETE;let i=!0;const{width:o,height:r}=e._accumulationTexture;if(e._translucentMRTSupport&&(e._translucentFBO.setColorTexture(e._accumulationTexture,0),e._translucentFBO.setColorTexture(e._revealageTexture,1),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,o,r),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture,0),e._adjustTranslucentFBO.setColorTexture(e._revealageTexture,1),e._adjustTranslucentFBO.update(t,o,r),e._translucentFBO.status===n&&e._adjustTranslucentFBO.status===n||(A(e),e._translucentMRTSupport=!1)),!e._translucentMRTSupport){e._translucentFBO.setColorTexture(e._accumulationTexture),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,o,r),e._alphaFBO.setColorTexture(e._revealageTexture),e._alphaFBO.setDepthStencilTexture(e._depthStencilTexture),e._alphaFBO.update(t,o,r),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture),e._adjustTranslucentFBO.update(t,o,r),e._adjustAlphaFBO.setColorTexture(e._revealageTexture),e._adjustAlphaFBO.update(t,o,r);const s=e._translucentFBO.status===n,a=e._alphaFBO.status===n,c=e._adjustTranslucentFBO.status===n,l=e._adjustAlphaFBO.status===n;s&&a&&c&&l||(T(e),e._translucentMultipassSupport=!1,i=!1)}return i}(this,e))return;this._useHDR=o;const b=this;let w,E;(0,r.Z)(this._compositeCommand)||(w=new p.Z({sources:[g.Z]}),this._translucentMRTSupport&&w.defines.push("MRT"),E={u_opaque:function(){return b._opaqueTexture},u_accumulation:function(){return b._accumulationTexture},u_revealage:function(){return b._revealageTexture}},this._compositeCommand=e.createViewportQuadCommand(w,{uniformMap:E,owner:this})),(0,r.Z)(this._adjustTranslucentCommand)||(this._translucentMRTSupport?(w=new p.Z({defines:["MRT"],sources:[_.Z]}),E={u_bgColor:function(){return b._translucentMRTClearCommand.color},u_depthTexture:function(){return b._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(w,{uniformMap:E,owner:this})):this._translucentMultipassSupport&&(w=new p.Z({sources:[_.Z]}),E={u_bgColor:function(){return b._translucentMultipassClearCommand.color},u_depthTexture:function(){return b._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(w,{uniformMap:E,owner:this}),E={u_bgColor:function(){return b._alphaClearCommand.color},u_depthTexture:function(){return b._depthStencilTexture}},this._adjustAlphaCommand=e.createViewportQuadCommand(w,{uniformMap:E,owner:this}))),this._viewport.width=l,this._viewport.height=u;const S=!i.Z.equals(this._viewport,t.viewport);let C=S!==this._useScissorTest;this._useScissorTest=S,i.Z.equals(this._scissorRectangle,t.viewport)||(this._scissorRectangle=i.Z.clone(t.viewport,this._scissorRectangle),C=!0),(0,r.Z)(this._rs)&&i.Z.equals(this._viewport,this._rs.viewport)&&!C||(this._rs=f.Z.fromCache({viewport:this._viewport,scissorTest:{enabled:this._useScissorTest,rectangle:this._scissorRectangle}})),(0,r.Z)(this._compositeCommand)&&(this._compositeCommand.renderState=this._rs),this._adjustTranslucentCommand&&(this._adjustTranslucentCommand.renderState=this._rs),(0,r.Z)(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.renderState=this._rs)};const w={enabled:!0,color:new o.Z(0,0,0,0),equationRgb:Z.Z.ADD,equationAlpha:Z.Z.ADD,functionSourceRgb:y.Z.ONE,functionDestinationRgb:y.Z.ONE,functionSourceAlpha:y.Z.ZERO,functionDestinationAlpha:y.Z.ONE_MINUS_SOURCE_ALPHA},E={enabled:!0,color:new o.Z(0,0,0,0),equationRgb:Z.Z.ADD,equationAlpha:Z.Z.ADD,functionSourceRgb:y.Z.ONE,functionDestinationRgb:y.Z.ONE,functionSourceAlpha:y.Z.ONE,functionDestinationAlpha:y.Z.ONE},S={enabled:!0,color:new o.Z(0,0,0,0),equationRgb:Z.Z.ADD,equationAlpha:Z.Z.ADD,functionSourceRgb:y.Z.ZERO,functionDestinationRgb:y.Z.ONE_MINUS_SOURCE_ALPHA,functionSourceAlpha:y.Z.ZERO,functionDestinationAlpha:y.Z.ONE_MINUS_SOURCE_ALPHA};function C(e,t,n,i){let o=n[i.id];if(!(0,r.Z)(o)){const e=f.Z.getState(i);e.depthMask=!1,e.blending=t,o=f.Z.fromCache(e),n[i.id]=o}return o}function x(e,t,n,i){const{shaderCache:o}=e,s=o.getDerivedShaderProgram(t,n);if((0,r.Z)(s))return s;const a=t._attributeLocations,c=t.fragmentShaderSource.clone();c.sources=c.sources.map((function(e){return p.Z.replaceMain(e,"czm_translucent_main").replace(/out_FragColor/g,"czm_out_FragColor").replace(/layout\s*\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g,"").replace(/\bdiscard\b/g,"czm_discard = true").replace(/czm_phong/g,"czm_translucentPhong")})),c.sources.splice(0,0,"vec4 czm_out_FragColor;\nbool czm_discard = false;\n");const l=[...i.matchAll(/out_FragData_(\d+)/g)];let u="";for(let e=0;e<l.length;e++){const t=l[e];u=`layout (location = ${t[1]}) out vec4 ${t[0]};\n${u}`}return c.sources.push(u),c.sources.push(`void main()\n{\n    czm_translucent_main();\n    if (czm_discard)\n    {\n        discard;\n    }\n${i}}\n`),o.createDerivedShaderProgram(t,n,{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:c,attributeLocations:a})}b.prototype.createDerivedCommands=function(e,t,n){if((0,r.Z)(n)||(n={}),this._translucentMRTSupport){let o,s;return(0,r.Z)(n.translucentCommand)&&(o=n.translucentCommand.shaderProgram,s=n.translucentCommand.renderState),n.translucentCommand=u.Z.shallowClone(e,n.translucentCommand),(0,r.Z)(o)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=o,n.translucentCommand.renderState=s):(n.translucentCommand.shaderProgram=function(e,t){return x(e,t,"translucentMRT","    vec3 Ci = czm_out_FragColor.rgb * czm_out_FragColor.a;\n    float ai = czm_out_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    out_FragData_0 = vec4(Ci * wzi, ai);\n    out_FragData_1 = vec4(ai * wzi);\n")}(t,e.shaderProgram),n.translucentCommand.renderState=(i=e.renderState,C(0,w,this._translucentRenderStateCache,i)),n.shaderProgramId=e.shaderProgram.id),n}var i;let o,s,a,c;return(0,r.Z)(n.translucentCommand)&&(o=n.translucentCommand.shaderProgram,s=n.translucentCommand.renderState,a=n.alphaCommand.shaderProgram,c=n.alphaCommand.renderState),n.translucentCommand=u.Z.shallowClone(e,n.translucentCommand),n.alphaCommand=u.Z.shallowClone(e,n.alphaCommand),(0,r.Z)(o)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=o,n.translucentCommand.renderState=s,n.alphaCommand.shaderProgram=a,n.alphaCommand.renderState=c):(n.translucentCommand.shaderProgram=function(e,t){return x(e,t,"translucentMultipass","    vec3 Ci = czm_out_FragColor.rgb * czm_out_FragColor.a;\n    float ai = czm_out_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    out_FragColor = vec4(Ci, ai) * wzi;\n")}(t,e.shaderProgram),n.translucentCommand.renderState=function(e,t,n){return C(0,E,e._translucentRenderStateCache,n)}(this,0,e.renderState),n.alphaCommand.shaderProgram=function(e,t){return x(e,t,"alphaMultipass","    float ai = czm_out_FragColor.a;\n    out_FragColor = vec4(ai);\n")}(t,e.shaderProgram),n.alphaCommand.renderState=function(e,t,n){return C(0,S,e._alphaRenderStateCache,n)}(this,0,e.renderState),n.shaderProgramId=e.shaderProgram.id),n},b.prototype.executeCommands=function(e,t,n,i,o){this._translucentMRTSupport?function(e,t,n,i,o,s){const{context:a,frameState:c}=t,{useLogDepth:l,shadowState:u}=c,d=t._hdr,h=i.framebuffer,f=u.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(a,i);const p=e._opaqueFBO.framebuffer;let m,_;i.framebuffer=e._translucentFBO.framebuffer;for(let e=0;e<o.length;++e)m=o[e],m=l?m.derivedCommands.logDepth.command:m,m=d?m.derivedCommands.hdr.command:m,_=f&&m.receiveShadows?m.derivedCommands.oit.shadows.translucentCommand:m.derivedCommands.oit.translucentCommand,n(_,t,a,i,p);(0,r.Z)(s)&&(m=s.unclassifiedCommand,_=f&&m.receiveShadows?m.derivedCommands.oit.shadows.translucentCommand:m.derivedCommands.oit.translucentCommand,n(_,t,a,i,p)),i.framebuffer=h}(this,e,t,n,i,o):function(e,t,n,i,o,s){let a,c,l;const{context:u,frameState:d}=t,{useLogDepth:h,shadowState:f}=d,p=t._hdr,m=i.framebuffer,_=f.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(u,i),i.framebuffer=e._adjustAlphaFBO.framebuffer,e._adjustAlphaCommand.execute(u,i);const g=e._opaqueFBO.framebuffer;for(i.framebuffer=e._translucentFBO.framebuffer,l=0;l<o.length;++l)a=o[l],a=h?a.derivedCommands.logDepth.command:a,a=p?a.derivedCommands.hdr.command:a,c=_&&a.receiveShadows?a.derivedCommands.oit.shadows.translucentCommand:a.derivedCommands.oit.translucentCommand,n(c,t,u,i,g);for((0,r.Z)(s)&&(a=s.unclassifiedCommand,c=_&&a.receiveShadows?a.derivedCommands.oit.shadows.translucentCommand:a.derivedCommands.oit.translucentCommand,n(c,t,u,i,g)),i.framebuffer=e._alphaFBO.framebuffer,l=0;l<o.length;++l)a=o[l],a=h?a.derivedCommands.logDepth.command:a,a=p?a.derivedCommands.hdr.command:a,c=_&&a.receiveShadows?a.derivedCommands.oit.shadows.alphaCommand:a.derivedCommands.oit.alphaCommand,n(c,t,u,i,g);(0,r.Z)(s)&&(a=s.unclassifiedCommand,c=_&&a.receiveShadows?a.derivedCommands.oit.shadows.alphaCommand:a.derivedCommands.oit.alphaCommand,n(c,t,u,i,g)),i.framebuffer=m}(this,e,t,n,i,o)},b.prototype.execute=function(e,t){this._compositeCommand.execute(e,t)},b.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this._opaqueFBO.framebuffer,o.Z.clone(n,this._opaqueClearCommand.color),this._opaqueClearCommand.execute(e,t),t.framebuffer=this._translucentFBO.framebuffer,(this._translucentMRTSupport?this._translucentMRTClearCommand:this._translucentMultipassClearCommand).execute(e,t),this._translucentMultipassSupport&&(t.framebuffer=this._alphaFBO.framebuffer,this._alphaClearCommand.execute(e,t)),t.framebuffer=i},b.prototype.isSupported=function(){return this._translucentMRTSupport||this._translucentMultipassSupport},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return T(this),(0,r.Z)(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),(0,r.Z)(this._adjustTranslucentCommand)&&(this._adjustTranslucentCommand.shaderProgram=this._adjustTranslucentCommand.shaderProgram&&this._adjustTranslucentCommand.shaderProgram.destroy()),(0,r.Z)(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.shaderProgram=this._adjustAlphaCommand.shaderProgram&&this._adjustAlphaCommand.shaderProgram.destroy()),(0,s.Z)(this)};const I=b},394472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>F});var i=n(660904),o=n(449809),r=n(11020),s=n(722313),a=n(282910),c=n(342209),l=n(684910),u=n(430886),d=n(379593),h=n(915323),f=n(673314),p=n(136525),m=n(545870),_=n(161632),g=n(437530),Z=n(609882),y=n(858371),b=n(194926),v=n(884260),A=n(314903);function T(e){this._url=e,this._cubeMapBuffers=void 0,this._cubeMaps=void 0,this._texture=void 0,this._mipTextures=void 0,this._va=void 0,this._sp=void 0,this._maximumMipmapLevel=void 0,this._loading=!1,this._ready=!1,this._errorEvent=new a.Z}Object.defineProperties(T.prototype,{url:{get:function(){return this._url}},errorEvent:{get:function(){return this._errorEvent}},texture:{get:function(){return this._texture}},maximumMipmapLevel:{get:function(){return this._maximumMipmapLevel}},ready:{get:function(){return this._ready}}}),T.isSupported=function(e){return e.colorBufferHalfFloat&&e.halfFloatingPointTexture||e.floatingPointTexture&&e.colorBufferFloat};const w=new i.Z(1,0,0),E=new i.Z(0,0,1),S=new i.Z(-1,0,0),C=new i.Z(0,0,-1),x=new i.Z(0,1,0),I=[x,S,E,new i.Z(0,-1,0),w,x,C,x,x],P=I.length,D=new Float32Array(3*P);let O=0;for(let e=0;e<P;++e,O+=3)i.Z.pack(I[e],D,O);const L=new Float32Array([-1,1,-1,0,0,1,0,0,1,0,1,1,0,-1,-1,-1,1,-1]),N=new Uint16Array([0,1,2,2,3,1,7,6,1,3,6,1,2,5,4,3,4,2,4,8,6,3,4,6]);function M(e){return function(){return e}}function R(e){let t,n;e._va=e._va&&e._va.destroy(),e._sp=e._sp&&e._sp.destroy();const i=e._cubeMaps;if((0,r.Z)(i))for(n=i.length,t=0;t<n;++t)i[t].destroy();const o=e._mipTextures;if((0,r.Z)(o))for(n=o.length,t=0;t<n;++t)o[t].destroy();e._va=void 0,e._sp=void 0,e._cubeMaps=void 0,e._cubeMapBuffers=void 0,e._mipTextures=void 0}T.prototype.update=function(e){const t=e.context;if(!T.isSupported(t))return;if((0,r.Z)(this._texture)&&(0,r.Z)(this._va)&&R(this),(0,r.Z)(this._texture))return;if(!(0,r.Z)(this._texture)&&!this._loading){const t=e.context.textureCache.getTexture(this._url);(0,r.Z)(t)&&(R(this),this._texture=t,this._maximumMipmapLevel=this._texture.maximumMipmapLevel,this._ready=!0)}const n=this._cubeMapBuffers;if(!(0,r.Z)(n)&&!this._loading){const e=this;(0,l.Z)(this._url).then((function(t){e._cubeMapBuffers=t,e._loading=!1})).catch((function(t){e.isDestroyed()||e._errorEvent.raiseEvent(t)})),this._loading=!0}if(!(0,r.Z)(this._cubeMapBuffers))return;const i=[];let s=n[0].positiveX.pixelDatatype;(0,r.Z)(s)?i.push("RGBA_NORMALIZED"):s=t.halfFloatingPointTexture?m.Z.HALF_FLOAT:m.Z.FLOAT;const a=u.Z.RGBA,w=new g.Z({defines:i,sources:[v.Z]});this._va=function(e){const t=d.Z.createVertexBuffer({context:e,typedArray:L,usage:h.Z.STATIC_DRAW}),n=d.Z.createVertexBuffer({context:e,typedArray:D,usage:h.Z.STATIC_DRAW}),i=d.Z.createIndexBuffer({context:e,typedArray:N,usage:h.Z.STATIC_DRAW,indexDatatype:c.Z.UNSIGNED_SHORT}),r=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:o.Z.FLOAT},{index:1,vertexBuffer:n,componentsPerAttribute:3,componentDatatype:o.Z.FLOAT}];return new y.Z({context:e,attributes:r,indexBuffer:i})}(t),this._sp=_.Z.fromCache({context:t,vertexShaderSource:A.Z,fragmentShaderSource:w,attributeLocations:{position:0,cubeMapCoordinates:1}});const E=Math.min(n.length,6);this._maximumMipmapLevel=E-1;const S=this._cubeMaps=new Array(E),C=this._mipTextures=new Array(E),x=2*n[0].positiveX.width,I={originalSize:function(){return x}};for(let i=0;i<E;++i){const o=n[i].positiveY;n[i].positiveY=n[i].negativeY,n[i].negativeY=o;const r=S[i]=new p.Z({context:t,source:n[i],pixelDatatype:s}),c=2*S[i].width,l=C[i]=new Z.Z({context:t,width:c,height:c,pixelDatatype:s,pixelFormat:a}),u=new f.Z({vertexArray:this._va,shaderProgram:this._sp,uniformMap:{cubeMap:M(r)},outputTexture:l,persists:!0,owner:this});e.commandList.push(u),I[`texture${i}`]=M(l)}this._texture=new Z.Z({context:t,width:1.5*x+2,height:x,pixelDatatype:s,pixelFormat:a}),this._texture.maximumMipmapLevel=this._maximumMipmapLevel,t.textureCache.addTexture(this._url,this._texture);const P=new f.Z({fragmentShaderSource:b.Z,uniformMap:I,outputTexture:this._texture,persists:!1,owner:this});e.commandList.push(P),this._ready=!0},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return R(this),this._texture=this._texture&&this._texture.destroy(),(0,s.Z)(this)};const F=T},586360:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(865029),o=n(234146),r=n(11020),s=n(765153),a=n(143450),c=n(205522),l=n(931359),u=n(267428);const d=new i.Z("MapQuest, Open Street Map and contributors, CC-BY-SA");function h(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT);const t=c.Z.createIfNeeded((0,o.Z)(e.url,"https://a.tile.openstreetmap.org/"));t.appendForwardSlash(),t.url+=`{z}/{x}/{y}.${(0,o.Z)(e.fileExtension,"png")}`;const n=new l.Z({ellipsoid:e.ellipsoid}),r=(0,o.Z)(e.minimumLevel,0),h=e.maximumLevel,f=(0,o.Z)(e.rectangle,n.rectangle),p=n.positionToTileXY(a.Z.southwest(f),r),m=n.positionToTileXY(a.Z.northeast(f),r),_=(Math.abs(m.x-p.x)+1)*(Math.abs(m.y-p.y)+1);if(_>4)throw new s.Z(`The rectangle and minimumLevel indicate that there are ${_} tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.`);let g=(0,o.Z)(e.credit,d);"string"==typeof g&&(g=new i.Z(g)),u.Z.call(this,{url:t,credit:g,tilingScheme:n,tileWidth:256,tileHeight:256,minimumLevel:r,maximumLevel:h,rectangle:f})}(0,r.Z)(Object.create)&&(h.prototype=Object.create(u.Z.prototype),h.prototype.constructor=h);const f=h},762041:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(790087),o=n(234146),r=n(11020),s=n(722313),a=n(883900);function c(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}Object.defineProperties(c.prototype,{length:{get:function(){return this._length}}}),c.prototype.add=function(e,t){i.Z.defined("primitive",e),(0,r.Z)(t)&&i.Z.typeOf.number("zIndex",t),t=(0,o.Z)(t,0);let n=this._collections[t];if(!(0,r.Z)(n)){n=new a.Z({destroyPrimitives:!1}),n._zIndex=t,this._collections[t]=n;const e=this._collectionsArray;let i=0;for(;i<e.length&&e[i]._zIndex<t;)i++;e.splice(i,0,n)}return n.add(e),this._length++,e._zIndex=t,e},c.prototype.set=function(e,t){return i.Z.defined("primitive",e),i.Z.typeOf.number("zIndex",t),t===e._zIndex||(this.remove(e,!0),this.add(e,t)),e},c.prototype.remove=function(e,t){if(this.contains(e)){const n=e._zIndex,i=this._collections[n];let o;return o=t?i.remove(e):i.removeAndDestroy(e),o&&this._length--,0===i.length&&(this._collectionsArray.splice(this._collectionsArray.indexOf(i),1),this._collections[n]=void 0,i.destroy()),o}return!1},c.prototype.removeAll=function(){const e=this._collectionsArray;for(let t=0;t<e.length;t++){const n=e[t];n.destroyPrimitives=!0,n.destroy()}this._collections={},this._collectionsArray=[],this._length=0},c.prototype.contains=function(e){if(!(0,r.Z)(e))return!1;const t=this._collections[e._zIndex];return(0,r.Z)(t)&&t.contains(e)},c.prototype.update=function(e){if(!this.show)return;const t=this._collectionsArray;for(let n=0;n<t.length;n++)t[n].update(e)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(),(0,s.Z)(this)};const l=c},95166:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(234146),o=n(11020),r=n(722313),s=n(765153),a=n(732292),c=n(902299);function l(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT);const t=(0,c.Z)(e.container);if(!(0,o.Z)(t))throw new s.Z("container is required");this._container=t;const n=document.createElement("div");n.className="cesium-performanceDisplay";const r=document.createElement("div");r.className="cesium-performanceDisplay-fps",this._fpsText=document.createTextNode(""),r.appendChild(this._fpsText);const l=document.createElement("div");l.className="cesium-performanceDisplay-ms",this._msText=document.createTextNode(""),l.appendChild(this._msText),n.appendChild(l),n.appendChild(r),this._container.appendChild(n),this._lastFpsSampleTime=(0,a.Z)(),this._lastMsSampleTime=(0,a.Z)(),this._fpsFrameCount=0,this._msFrameCount=0,this._throttled=!1;const u=document.createElement("div");u.className="cesium-performanceDisplay-throttled",this._throttledText=document.createTextNode(""),u.appendChild(this._throttledText),n.appendChild(u)}Object.defineProperties(l.prototype,{throttled:{get:function(){return this._throttled},set:function(e){this._throttled!==e&&(this._throttledText.nodeValue=e?"(throttled)":"",this._throttled=e)}}}),l.prototype.update=function(e){const t=(0,a.Z)(),n=(0,i.Z)(e,!0);this._fpsFrameCount++;const o=t-this._lastFpsSampleTime;if(o>1e3){let e="N/A";n&&(e=1e3*this._fpsFrameCount/o|0),this._fpsText.nodeValue=`${e} FPS`,this._lastFpsSampleTime=t,this._fpsFrameCount=0}this._msFrameCount++;const r=t-this._lastMsSampleTime;if(r>200){let e="N/A";n&&(e=(r/this._msFrameCount).toFixed(2)),this._msText.nodeValue=`${e} MS`,this._lastMsSampleTime=t,this._msFrameCount=0}},l.prototype.destroy=function(){return(0,r.Z)(this)};const u=l},982886:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(798336),o=n(11020),r=n(722313),s=n(12503),a=n(417148);function c(){this._framebuffer=new s.Z,this._textureToCopy=void 0,this._copyDepthCommand=void 0}Object.defineProperties(c.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),c.prototype.update=function(e,t){!function(e,t,n){const i=n.width,o=n.height;e._framebuffer.update(t,i,o)}(this,e,t),function(e,t,n){if(!(0,o.Z)(e._copyDepthCommand)){const n="uniform highp sampler2D u_texture;\nin vec2 v_textureCoordinates;\nvoid main()\n{\n    out_FragColor = czm_packDepth(texture(u_texture, v_textureCoordinates).r);\n}\n";e._copyDepthCommand=t.createViewportQuadCommand(n,{renderState:a.Z.fromCache(),uniformMap:{u_texture:function(){return e._textureToCopy}},owner:e})}e._textureToCopy=n,e._copyDepthCommand.framebuffer=e.framebuffer}(this,e,t)};const l=new i.Z,u=new i.Z(1,1/255,1/65025,1/16581375);c.prototype.getDepth=function(e,t,n){if(!(0,o.Z)(this.framebuffer))return;const r=e.readPixels({x:t,y:n,width:1,height:1,framebuffer:this.framebuffer}),s=i.Z.unpack(r,0,l);return i.Z.divideByScalar(s,255,s),i.Z.dot(s,u)},c.prototype.executeCopyDepth=function(e,t){this._copyDepthCommand.execute(e,t)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._framebuffer.destroy(),(0,o.Z)(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=(0,o.Z)(this._copyDepthCommand.shaderProgram)&&this._copyDepthCommand.shaderProgram.destroy()),(0,r.Z)(this)};const d=c},536464:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(890828),o=n(722313),r=n(12503),s=n(708800);function a(){this._framebuffer=new r.Z({color:!1,depthStencil:!0,supportsDepthTexture:!0}),this._passState=void 0}Object.defineProperties(a.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),a.prototype.update=function(e,t,n){const o=n.width,r=n.height;this._framebuffer.isDirty(o,r)&&function(e,t){const n=t.drawingBufferWidth,o=t.drawingBufferHeight;e._framebuffer.update(t,n,o);const r=new s.Z(t);r.blendingEnabled=!1,r.scissorTest={enabled:!0,rectangle:new i.Z},r.viewport=new i.Z,e._passState=r}(this,e);const a=this.framebuffer,c=this._passState;return c.framebuffer=a,c.viewport.width=o,c.viewport.height=r,c.scissorTest.rectangle.x=t.x,c.scissorTest.rectangle.y=r-t.y,c.scissorTest.rectangle.width=1,c.scissorTest.rectangle.height=1,c},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){return this._framebuffer.destroy(),(0,o.Z)(this)};const c=a},656506:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(890828),o=n(35961),r=n(234146),s=n(11020),a=n(722313),c=n(12503),l=n(708800);function u(e){const t=new l.Z(e);t.blendingEnabled=!1,t.scissorTest={enabled:!0,rectangle:new i.Z},t.viewport=new i.Z,this._context=e,this._fb=new c.Z({depthStencil:!0}),this._passState=t,this._width=0,this._height=0}u.prototype.begin=function(e,t){const n=this._context,o=t.width,r=t.height;return i.Z.clone(e,this._passState.scissorTest.rectangle),this._width=o,this._height=r,this._fb.update(n,o,r),this._passState.framebuffer=this._fb.framebuffer,this._passState.viewport.width=o,this._passState.viewport.height=r,this._passState};const d=new o.Z;u.prototype.end=function(e){const t=(0,r.Z)(e.width,1),n=(0,r.Z)(e.height,1),i=this._context,a=i.readPixels({x:e.x,y:e.y,width:t,height:n,framebuffer:this._fb.framebuffer}),c=Math.max(t,n),l=c*c,u=Math.floor(.5*t),h=Math.floor(.5*n);let f=0,p=0,m=0,_=-1;for(let e=0;e<l;++e){if(-u<=f&&f<=u&&-h<=p&&p<=h){const e=4*((h-p)*t+f+u);d.red=o.Z.byteToFloat(a[e]),d.green=o.Z.byteToFloat(a[e+1]),d.blue=o.Z.byteToFloat(a[e+2]),d.alpha=o.Z.byteToFloat(a[e+3]);const n=i.getObjectByPickColor(d);if((0,s.Z)(n))return n}if(f===p||f<0&&-f===p||f>0&&f===1-p){const e=m;m=-_,_=e}f+=m,p+=_}},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._fb.destroy(),(0,a.Z)(this)};const h=u},229029:(e,t,n)=>{"use strict";n.d(t,{Z:()=>be});var i=n(642336),o=n(890828),r=n(405254),s=n(660904),a=n(532056),c=n(790087),l=n(35961),u=n(234146),d=n(11020),h=n(765153),f=n(659635),p=n(223689),m=n(299594),_=n(134282),g=n(296184),Z=n(638601),y=n(489381),b=n(518931),v=n(812693),A=n(684236),T=n(423842),w=n(982886),E=n(883900),S=n(714233),C=n(638452),x=n(720813);const I=.1,P=new T.Z({pass:A.Z.MOST_DETAILED_PRELOAD}),D=new T.Z({pass:A.Z.MOST_DETAILED_PICK}),O=new T.Z({pass:A.Z.PICK});function L(e){this._mostDetailedRayPicks=[],this.pickRenderStateCache={},this._pickPositionCache={},this._pickPositionCacheDirty=!1;const t=new o.Z(0,0,1,1),n=new b.Z(e);n.frustum=new p.Z({width:I,aspectRatio:1,near:.1}),this._pickOffscreenView=new x.Z(e,n,t)}L.prototype.update=function(){this._pickPositionCacheDirty=!0},L.prototype.getPickDepth=function(e,t){const n=e.view.pickDepths;let i=n[t];return(0,d.Z)(i)||(i=new w.Z,n[t]=i),i};const N=new m.Z,M=new s.Z,R=new s.Z,F=new r.Z,B=new f.Z,U=new g.Z,k=new r.Z;function V(e,t,n,i,o){const r=e.camera.frustum;return r instanceof p.Z||r instanceof m.Z?function(e,t,n,i,o){const r=e.camera;let a=r.frustum;const c=a.offCenterFrustum;(0,d.Z)(c)&&(a=c);let l=2*(t.x-o.x)/o.width-1;l*=.5*(a.right-a.left);let u=2*(o.height-t.y-o.y)/o.height-1;u*=.5*(a.top-a.bottom);const h=f.Z.clone(r.transform,B);r._setTransform(f.Z.IDENTITY);const p=s.Z.clone(r.position,M);s.Z.multiplyByScalar(r.right,l,R),s.Z.add(R,p,p),s.Z.multiplyByScalar(r.up,u,R),s.Z.add(R,p,p),r._setTransform(h),e.mode===S.Z.SCENE2D&&s.Z.fromElements(p.z,p.x,p.y,p);const m=a.getPixelDimensions(o.width,o.height,1,1,F),_=N;return _.right=.5*m.x,_.left=-_.right,_.top=.5*m.y,_.bottom=-_.top,_.near=a.near,_.far=a.far,_.computeCullingVolume(p,r.directionWC,r.upWC)}(e,t,0,0,o):function(e,t,n,i,o){const r=e.camera,s=r.frustum,a=s.near,c=Math.tan(.5*s.fovy),l=s.aspectRatio*c,u=(2*(t.x-o.x)/o.width-1)*a*l,d=(2*(o.height-t.y-o.y)/o.height-1)*a*c,h=s.getPixelDimensions(o.width,o.height,1,1,k),f=h.x*n*.5,p=h.y*i*.5,m=U;return m.top=d+p,m.bottom=d-p,m.right=u+f,m.left=u-f,m.near=a,m.far=s.far,m.computeCullingVolume(r.positionWC,r.directionWC,r.upWC)}(e,t,n,i,o)}let H=3,z=3,G=new o.Z(0,0,H,z);const j=new r.Z,W=new l.Z(0,0,0,0);L.prototype.pick=function(e,t,n,i){if(!(0,d.Z)(t))throw new h.Z("windowPosition is undefined.");H=(0,u.Z)(n,3),z=(0,u.Z)(i,H);const r=e.context,s=r.uniformState,a=e.frameState,c=e.defaultView;e.view=c;const l=c.viewport;l.x=0,l.y=0,l.width=r.drawingBufferWidth,l.height=r.drawingBufferHeight;let f=c.passState;f.viewport=o.Z.clone(l,f.viewport);const p=C.Z.transformWindowToDrawingBuffer(e,t,j);e.jobScheduler.disableThisFrame(),e.updateFrameState(),a.cullingVolume=V(e,p,H,z,l),a.invertClassification=!1,a.passes.pick=!0,a.tilesetPassState=O,s.update(a),e.updateEnvironment(),G.x=p.x-.5*(H-1),G.y=e.drawingBufferHeight-p.y-.5*(z-1),G.width=H,G.height=z,f=c.pickFramebuffer.begin(G,c.viewport),e.updateAndExecuteCommands(f,W),e.resolveFramebuffers(f);const m=c.pickFramebuffer.end(G);return r.endFrame(),m};const q=new _.Z,Y=new g.Z,X=new p.Z,J=new m.Z;L.prototype.pickPositionWorldCoordinates=function(e,t,n){if(!e.useDepthPicking)return;if(!(0,d.Z)(t))throw new h.Z("windowPosition is undefined.");if(!e.context.depthTexture)throw new h.Z("Picking from the depth buffer is not supported. Check pickPositionSupported.");const i=t.toString();if(this._pickPositionCacheDirty)this._pickPositionCache={},this._pickPositionCacheDirty=!1;else if(this._pickPositionCache.hasOwnProperty(i))return s.Z.clone(this._pickPositionCache[i],n);const r=e.frameState,a=e.context,c=a.uniformState,l=e.defaultView;e.view=l;const u=C.Z.transformWindowToDrawingBuffer(e,t,j);e.pickTranslucentDepth?function(e,t){const n=e.context,i=e.frameState,r=e.environmentState,s=e.defaultView;e.view=s;const a=s.viewport;a.x=0,a.y=0,a.width=n.drawingBufferWidth,a.height=n.drawingBufferHeight;let c=s.passState;c.viewport=o.Z.clone(a,c.viewport),e.clearPasses(i.passes),i.passes.pick=!0,i.passes.depth=!0,i.cullingVolume=V(e,t,1,1,a),i.tilesetPassState=O,e.updateEnvironment(),r.renderTranslucentDepthForPick=!0,c=s.pickDepthFramebuffer.update(n,t,a),e.updateAndExecuteCommands(c,W),e.resolveFramebuffers(c),n.endFrame()}(e,u):(e.updateFrameState(),c.update(r),e.updateEnvironment()),u.y=e.drawingBufferHeight-u.y;const f=e.camera;let p;p=(0,d.Z)(f.frustum.fov)?f.frustum.clone(q):(0,d.Z)(f.frustum.infiniteProjectionMatrix)?f.frustum.clone(Y):(0,d.Z)(f.frustum.width)?f.frustum.clone(X):f.frustum.clone(J);const m=l.frustumCommandsList,_=m.length;for(let t=0;t<_;++t){const o=this.getPickDepth(e,t).getDepth(a,u.x,u.y);if((0,d.Z)(o)&&o>0&&o<1){const a=m[t];let l;return e.mode===S.Z.SCENE2D?(l=f.position.z,f.position.z=l-a.near+1,p.far=Math.max(1,a.far-a.near),p.near=1,c.update(r),c.updateFrustum(p)):(p.near=a.near*(0!==t?e.opaqueFrustumNearOffset:1),p.far=a.far,c.updateFrustum(p)),n=C.Z.drawingBufferToWgs84Coordinates(e,u,o,n),e.mode===S.Z.SCENE2D&&(f.position.z=l,c.update(r)),this._pickPositionCache[i]=s.Z.clone(n),n}}this._pickPositionCache[i]=void 0};const Q=new a.Z;function $(e,t){let n,i;const o=[],r=[],s=[],a=[];(0,d.Z)(e)||(e=Number.MAX_VALUE);let c=t();for(;(0,d.Z)(c);){const n=c.object,l=c.position,u=c.exclude;if((0,d.Z)(l)&&!(0,d.Z)(n)){o.push(c);break}if(!(0,d.Z)(n)||!(0,d.Z)(n.primitive))break;if(!u&&(o.push(c),0>=--e))break;const h=n.primitive;let f=!1;"function"==typeof h.getGeometryInstanceAttributes&&(0,d.Z)(n.id)&&(i=h.getGeometryInstanceAttributes(n.id),(0,d.Z)(i)&&(0,d.Z)(i.show)&&(f=!0,i.show=y.Z.toValue(!1,i.show),s.push(i))),n instanceof v.Z&&(f=!0,n.show=!1,a.push(n)),f||(h.show=!1,r.push(h)),c=t()}for(n=0;n<r.length;++n)r[n].show=!0;for(n=0;n<s.length;++n)i=s[n],i.show=y.Z.toValue(!0,i.show);for(n=0;n<a.length;++n)a[n].show=!0;return o}L.prototype.pickPosition=function(e,t,n){if(n=this.pickPositionWorldCoordinates(e,t,n),(0,d.Z)(n)&&e.mode!==S.Z.SCENE3D){s.Z.fromElements(n.y,n.z,n.x,n);const t=e.mapProjection,i=t.ellipsoid,o=t.unproject(n,Q);i.cartographicToCartesian(o,n)}return n},L.prototype.drillPick=function(e,t,n,i,o){const r=this;return $(n,(function(){const n=r.pick(e,t,i,o);if((0,d.Z)(n))return{object:n,position:void 0,exclude:!1}})).map((function(e){return e.object}))};const K=new s.Z,ee=new s.Z;function te(e,t,n){this.ray=e,this.width=t,this.tilesets=n,this.ready=!1;const i=this;this.promise=new Promise((e=>{i._completePick=()=>{e()}}))}function ne(e,t,n,i){const o=t.direction,r=s.Z.mostOrthogonalAxis(o,K),a=s.Z.cross(o,r,K),c=s.Z.cross(o,a,ee);return i.position=t.origin,i.direction=o,i.up=c,i.right=a,i.frustum.width=(0,u.Z)(n,I),i.frustum.computeCullingVolume(i.positionWC,i.directionWC,i.upWC)}function ie(e,t,n){const i=t.frameState,o=n.ray,r=n.width,s=n.tilesets,a=e._pickOffscreenView.camera,c=ne(0,o,r,a),l=P;l.camera=a,l.cullingVolume=c;let u=!0;const d=s.length;for(let e=0;e<d;++e){const n=s[e];n.show&&t.primitives.contains(n)&&(n.updateForPass(i,l),u=u&&l.ready)}return u&&n._completePick(),u}function oe(e,t,n){const i=e.length;for(let o=0;o<i;++o){const i=e.get(o);i.show&&((0,d.Z)(i.isCesium3DTileset)?(0,d.Z)(t)&&-1!==t.indexOf(i)||n.push(i):i instanceof E.Z&&oe(i,t,n))}}function re(e,t,n,i,o,r){const s=[];if(oe(t.primitives,i,s),0===s.length)return Promise.resolve(r());const a=new te(n,o,s);return e._mostDetailedRayPicks.push(a),a.promise.then((function(){return r()}))}function se(e,t){return!(!(0,d.Z)(e)||!(0,d.Z)(t)||0===t.length)&&(t.indexOf(e)>-1||t.indexOf(e.primitive)>-1||t.indexOf(e.id)>-1)}function ae(e,t,n,i,r,s,a,c){return $(i,(function(){return function(e,t,n,i,r,s,a){const c=t.context,l=c.uniformState,u=t.frameState,h=e._pickOffscreenView;t.view=h,ne(0,n,r,h.camera),G=o.Z.clone(h.viewport,G);const f=h.pickFramebuffer.begin(G,h.viewport);let p;t.jobScheduler.disableThisFrame(),t.updateFrameState(),u.invertClassification=!1,u.passes.pick=!0,u.passes.offscreen=!0,u.tilesetPassState=a?D:O,l.update(u),t.updateEnvironment(),t.updateAndExecuteCommands(f,W),t.resolveFramebuffers(f);const m=h.pickFramebuffer.end(G);if(t.context.depthTexture){const i=h.frustumCommandsList.length;for(let o=0;o<i;++o){const i=e.getPickDepth(t,o).getDepth(c,0,0);if((0,d.Z)(i)&&i>0&&i<1){const e=h.frustumCommandsList[o],r=e.near*(0!==o?t.opaqueFrustumNearOffset:1),s=r+i*(e.far-r);p=Z.Z.getPoint(n,s);break}}}if(t.view=t.defaultView,c.endFrame(),(0,d.Z)(m)||(0,d.Z)(p))return{object:m,position:p,exclude:!(0,d.Z)(p)&&s||se(m,i)}}(e,t,n,r,s,a,c)}))}function ce(e,t,n,i,o,r,s){const a=ae(e,t,n,1,i,o,r,s);if(a.length>0)return a[0]}function le(e,t,n,i,o,r,s,a){return ae(e,t,n,i,o,r,s,a)}function ue(e,t){return new Promise(((n,i)=>{t.then((function(t){const i=e.postRender.addEventListener((function(){i(),n(t)}));e.requestRender()})).catch((function(e){i(e)}))}))}L.prototype.updateMostDetailedRayPicks=function(e){const t=this._mostDetailedRayPicks;for(let n=0;n<t.length;++n)ie(this,e,t[n])&&t.splice(n--,1)},L.prototype.pickFromRay=function(e,t,n,i){if(c.Z.defined("ray",t),e.mode!==S.Z.SCENE3D)throw new h.Z("Ray intersections are only supported in 3D mode.");return ce(this,e,t,n,i,!1,!1)},L.prototype.drillPickFromRay=function(e,t,n,i,o){if(c.Z.defined("ray",t),e.mode!==S.Z.SCENE3D)throw new h.Z("Ray intersections are only supported in 3D mode.");return le(this,e,t,n,i,o,!1,!1)},L.prototype.pickFromRayMostDetailed=function(e,t,n,i){if(c.Z.defined("ray",t),e.mode!==S.Z.SCENE3D)throw new h.Z("Ray intersections are only supported in 3D mode.");const o=this;return t=Z.Z.clone(t),n=(0,d.Z)(n)?n.slice():n,ue(e,re(o,e,t,n,i,(function(){return ce(o,e,t,n,i,!1,!0)})))},L.prototype.drillPickFromRayMostDetailed=function(e,t,n,i,o){if(c.Z.defined("ray",t),e.mode!==S.Z.SCENE3D)throw new h.Z("Ray intersections are only supported in 3D mode.");const r=this;return t=Z.Z.clone(t),i=(0,d.Z)(i)?i.slice():i,ue(e,re(r,e,t,i,o,(function(){return le(r,e,t,n,i,o,!1,!0)})))};const de=new s.Z,he=new s.Z,fe=new Z.Z,pe=new a.Z;function me(e,t){const n=e.globe,o=(0,d.Z)(n)?n.ellipsoid:e.mapProjection.ellipsoid,r=i.Z._defaultMaxTerrainHeight,c=o.geodeticSurfaceNormalCartographic(t,he),l=a.Z.toCartesian(t,o,de),u=fe;u.origin=l,u.direction=c;const h=new Z.Z;return Z.Z.getPoint(u,r,h.origin),s.Z.negate(c,h.direction),h}function _e(e,t){const n=e.globe,i=(0,d.Z)(n)?n.ellipsoid:e.mapProjection.ellipsoid;return me(e,a.Z.fromCartesian(t,i,pe))}function ge(e,t){const n=e.globe,i=(0,d.Z)(n)?n.ellipsoid:e.mapProjection.ellipsoid;return a.Z.fromCartesian(t,i,pe).height}function Ze(e,t,n,i,o){const r=me(t,n);return re(e,t,r,i,o,(function(){const n=ce(e,t,r,i,o,!0,!0);if((0,d.Z)(n))return ge(t,n.position)}))}function ye(e,t,n,i,o,r){const a=_e(t,n);return re(e,t,a,i,o,(function(){const n=ce(e,t,a,i,o,!0,!0);if((0,d.Z)(n))return s.Z.clone(n.position,r)}))}L.prototype.sampleHeight=function(e,t,n,i){if(c.Z.defined("position",t),e.mode!==S.Z.SCENE3D)throw new h.Z("sampleHeight is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new h.Z("sampleHeight requires depth texture support. Check sampleHeightSupported.");const o=ce(this,e,me(e,t),n,i,!0,!1);if((0,d.Z)(o))return ge(e,o.position)},L.prototype.clampToHeight=function(e,t,n,i,o){if(c.Z.defined("cartesian",t),e.mode!==S.Z.SCENE3D)throw new h.Z("clampToHeight is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new h.Z("clampToHeight requires depth texture support. Check clampToHeightSupported.");const r=ce(this,e,_e(e,t),n,i,!0,!1);if((0,d.Z)(r))return s.Z.clone(r.position,o)},L.prototype.sampleHeightMostDetailed=function(e,t,n,i){if(c.Z.defined("positions",t),e.mode!==S.Z.SCENE3D)throw new h.Z("sampleHeightMostDetailed is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new h.Z("sampleHeightMostDetailed requires depth texture support. Check sampleHeightSupported.");n=(0,d.Z)(n)?n.slice():n;const o=t.length,r=new Array(o);for(let s=0;s<o;++s)r[s]=Ze(this,e,t[s],n,i);return ue(e,Promise.all(r).then((function(e){const n=e.length;for(let i=0;i<n;++i)t[i].height=e[i];return t})))},L.prototype.clampToHeightMostDetailed=function(e,t,n,i){if(c.Z.defined("cartesians",t),e.mode!==S.Z.SCENE3D)throw new h.Z("clampToHeightMostDetailed is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new h.Z("clampToHeightMostDetailed requires depth texture support. Check clampToHeightSupported.");n=(0,d.Z)(n)?n.slice():n;const o=t.length,r=new Array(o);for(let s=0;s<o;++s)r[s]=ye(this,e,t[s],n,i,t[s]);return ue(e,Promise.all(r).then((function(e){const n=e.length;for(let i=0;i<n;++i)t[i]=e[i];return t})))},L.prototype.destroy=function(){this._pickOffscreenView=this._pickOffscreenView&&this._pickOffscreenView.destroy()};const be=L},773517:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(660904),o=n(790087),r=n(35961),s=n(394579),a=n(449809),c=n(234146),l=n(11020),u=n(911698),d=n(217066),h=n(388402),f=n(179869),p=n(677684);const m={},_=Uint32Array.BYTES_PER_ELEMENT;m.parse=function(e,t){t=(0,c.Z)(t,0),o.Z.defined("arrayBuffer",e);const n=new Uint8Array(e),m=new DataView(e);t+=_;const g=m.getUint32(t,!0);if(1!==g)throw new d.Z(`Only Point Cloud tile version 1 is supported.  Version ${g} is not.`);t+=_,t+=_;const Z=m.getUint32(t,!0);if(0===Z)throw new d.Z("Feature table must have a byte length greater than zero");t+=_;const y=m.getUint32(t,!0);t+=_;const b=m.getUint32(t,!0);t+=_;const v=m.getUint32(t,!0);t+=_;const A=(0,u.Z)(n,t,Z);t+=Z;const T=new Uint8Array(e,t,y);let w,E;t+=y,b>0&&(w=(0,u.Z)(n,t,b),t+=b,v>0&&(E=new Uint8Array(e,t,v),t+=v));const S=new f.Z(A,T),C=S.getGlobalProperty("POINTS_LENGTH");if(S.featuresLength=C,!(0,l.Z)(C))throw new d.Z("Feature table global property: POINTS_LENGTH must be defined");let x=S.getGlobalProperty("RTC_CENTER",a.Z.FLOAT,3);(0,l.Z)(x)&&(x=i.Z.unpack(x));const I=function(e,t){const n=e.json;let i,o,r;const a=(0,l.Z)(n.extensions)?n.extensions["3DTILES_draco_point_compression"]:void 0,c=(0,l.Z)(t)&&(0,l.Z)(t.extensions)?t.extensions["3DTILES_draco_point_compression"]:void 0;let u,h,f,p,m,_;if((0,l.Z)(c)&&(r=c.properties),(0,l.Z)(a)){o=a.properties;const t=a.byteOffset,n=a.byteLength;if(!(0,l.Z)(o)||!(0,l.Z)(t)||!(0,l.Z)(n))throw new d.Z("Draco properties, byteOffset, and byteLength must be defined");i=e.buffer.slice(t,t+n),u=(0,l.Z)(o.POSITION),h=(0,l.Z)(o.RGB)||(0,l.Z)(o.RGBA),f=(0,l.Z)(o.NORMAL),p=(0,l.Z)(o.BATCH_ID),m=(0,l.Z)(o.RGBA)}return(0,l.Z)(i)&&(_={buffer:i,featureTableProperties:o,batchTableProperties:r,properties:(0,s.Z)(o,r),dequantizeInShader:!0}),{draco:_,hasPositions:u,hasColors:h,isTranslucent:m,hasNormals:f,hasBatchIds:p}}(S,w);if(I.rtcCenter=x,I.pointsLength=C,!I.hasPositions){const e=function(e){const t=e.json;let n;if((0,l.Z)(t.POSITION))return n=e.getPropertyArray("POSITION",a.Z.FLOAT,3),{name:p.Z.POSITION,semantic:p.Z.POSITION,typedArray:n,isQuantized:!1,componentDatatype:a.Z.FLOAT,type:h.Z.VEC3};if((0,l.Z)(t.POSITION_QUANTIZED)){n=e.getPropertyArray("POSITION_QUANTIZED",a.Z.UNSIGNED_SHORT,3);const t=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",a.Z.FLOAT,3);if(!(0,l.Z)(t))throw new d.Z("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=65535,r=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",a.Z.FLOAT,3);if(!(0,l.Z)(r))throw new d.Z("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");return{name:p.Z.POSITION,semantic:p.Z.POSITION,typedArray:n,isQuantized:!0,componentDatatype:a.Z.FLOAT,type:h.Z.VEC3,quantizedRange:o,quantizedVolumeOffset:i.Z.unpack(r),quantizedVolumeScale:i.Z.unpack(t),quantizedComponentDatatype:a.Z.UNSIGNED_SHORT,quantizedType:h.Z.VEC3}}}(S);I.positions=e,I.hasPositions=I.hasPositions||(0,l.Z)(e)}if(!I.hasPositions)throw new d.Z("Either POSITION or POSITION_QUANTIZED must be defined.");if(!I.hasNormals){const e=function(e){const t=e.json;let n;if((0,l.Z)(t.NORMAL))return n=e.getPropertyArray("NORMAL",a.Z.FLOAT,3),{name:p.Z.NORMAL,semantic:p.Z.NORMAL,typedArray:n,octEncoded:!1,octEncodedZXY:!1,componentDatatype:a.Z.FLOAT,type:h.Z.VEC3};if((0,l.Z)(t.NORMAL_OCT16P)){n=e.getPropertyArray("NORMAL_OCT16P",a.Z.UNSIGNED_BYTE,2);const t=8;return{name:p.Z.NORMAL,semantic:p.Z.NORMAL,typedArray:n,octEncoded:!0,octEncodedZXY:!1,quantizedRange:(1<<t)-1,quantizedType:h.Z.VEC2,quantizedComponentDatatype:a.Z.UNSIGNED_BYTE,componentDatatype:a.Z.FLOAT,type:h.Z.VEC3}}}(S);I.normals=e,I.hasNormals=I.hasNormals||(0,l.Z)(e)}if(!I.hasColors){const e=function(e){const t=e.json;let n;if((0,l.Z)(t.RGBA))return n=e.getPropertyArray("RGBA",a.Z.UNSIGNED_BYTE,4),{name:p.Z.COLOR,semantic:p.Z.COLOR,setIndex:0,typedArray:n,componentDatatype:a.Z.UNSIGNED_BYTE,type:h.Z.VEC4,normalized:!0,isRGB565:!1,isTranslucent:!0};if((0,l.Z)(t.RGB))return n=e.getPropertyArray("RGB",a.Z.UNSIGNED_BYTE,3),{name:"COLOR",semantic:p.Z.COLOR,setIndex:0,typedArray:n,componentDatatype:a.Z.UNSIGNED_BYTE,type:h.Z.VEC3,normalized:!0,isRGB565:!1,isTranslucent:!1};if((0,l.Z)(t.RGB565))return n=e.getPropertyArray("RGB565",a.Z.UNSIGNED_SHORT,1),{name:"COLOR",semantic:p.Z.COLOR,setIndex:0,typedArray:n,componentDatatype:a.Z.FLOAT,type:h.Z.VEC3,normalized:!1,isRGB565:!0,isTranslucent:!1};if((0,l.Z)(t.CONSTANT_RGBA)){const t=e.getGlobalProperty("CONSTANT_RGBA",a.Z.UNSIGNED_BYTE,4),n=t[3],i=r.Z.fromBytes(t[0],t[1],t[2],n),o=n<255;return{name:p.Z.COLOR,semantic:p.Z.COLOR,setIndex:0,constantColor:i,componentDatatype:a.Z.FLOAT,type:h.Z.VEC4,isQuantized:!1,isTranslucent:o}}}(S);I.colors=e,I.hasColors=I.hasColors||(0,l.Z)(e),I.hasConstantColor=(0,l.Z)(I.constantColor),I.isTranslucent=(0,l.Z)(e)&&e.isTranslucent}if(!I.hasBatchIds){const e=function(e){const t=e.json;if((0,l.Z)(t.BATCH_ID)){const t=e.getPropertyArray("BATCH_ID",a.Z.UNSIGNED_SHORT,1);return{name:p.Z.FEATURE_ID,semantic:p.Z.FEATURE_ID,setIndex:0,typedArray:t,componentDatatype:a.Z.fromTypedArray(t),type:h.Z.SCALAR}}}(S);I.batchIds=e,I.hasBatchIds=I.hasBatchIds||(0,l.Z)(e)}if(I.hasBatchIds){const e=S.getGlobalProperty("BATCH_LENGTH");if(!(0,l.Z)(e))throw new d.Z("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");I.batchLength=e}return(0,l.Z)(E)&&(E=new Uint8Array(E),I.batchTableJson=w,I.batchTableBinary=E),I};const g=m},978701:(e,t,n)=>{"use strict";n.d(t,{Z:()=>le});var i=n(762031),o=n(660904),r=n(798336),s=n(790087),a=n(823438),c=n(35961),l=n(394579),u=n(449809),d=n(234146),h=n(11020),f=n(722313),p=n(344485),m=n(659635),_=n(590292),g=n(223689),Z=n(804868),y=n(217066),b=n(720794),v=n(379593),A=n(915323),T=n(661679),w=n(431056),E=n(417148),S=n(161632),C=n(858371),x=n(7996),I=n(973591),P=n(533424),D=n(982960),O=n(591055),L=n(807549),N=n(773517),M=n(714233),R=n(534890),F=n(347962),B=n(37002),U=n(822948);const k=0,V=1,H=2,z=3;function G(e){s.Z.typeOf.object("options",e),s.Z.typeOf.object("options.arrayBuffer",e.arrayBuffer),this._parsedContent=void 0,this._drawCommand=void 0,this._isTranslucent=!1,this._styleTranslucent=!1,this._constantColor=c.Z.clone(c.Z.DARKGRAY),this._highlightColor=c.Z.clone(c.Z.WHITE),this._pointSize=1,this._rtcCenter=void 0,this._quantizedVolumeScale=void 0,this._quantizedVolumeOffset=void 0,this._styleableShaderAttributes=void 0,this._isQuantized=!1,this._isOctEncoded16P=!1,this._isRGB565=!1,this._hasColors=!1,this._hasNormals=!1,this._hasBatchIds=!1,this._decodingState=H,this._dequantizeInShader=!0,this._isQuantizedDraco=!1,this._isOctEncodedDraco=!1,this._quantizedRange=0,this._octEncodedRange=0,this.backFaceCulling=!1,this._backFaceCulling=!1,this.normalShading=!0,this._normalShading=!0,this._opaqueRenderState=void 0,this._translucentRenderState=void 0,this._mode=void 0,this._ready=!1,this._pointsLength=0,this._geometryByteLength=0,this._vertexShaderLoaded=e.vertexShaderLoaded,this._fragmentShaderLoaded=e.fragmentShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._batchTableLoaded=e.batchTableLoaded,this._pickIdLoaded=e.pickIdLoaded,this._opaquePass=(0,d.Z)(e.opaquePass,w.Z.OPAQUE),this._cull=(0,d.Z)(e.cull,!0),this.style=void 0,this._style=void 0,this.styleDirty=!1,this.modelMatrix=m.Z.clone(m.Z.IDENTITY),this._modelMatrix=m.Z.clone(m.Z.IDENTITY),this.time=0,this.shadows=R.Z.ENABLED,this._boundingSphere=void 0,this.clippingPlanes=void 0,this.isClipped=!1,this.clippingPlanesDirty=!1,this.clippingPlanesOriginMatrix=void 0,this.attenuation=!1,this._attenuation=!1,this.geometricError=0,this.geometricErrorScale=1,this.maximumAttenuation=this._pointSize,this.splitDirection=(0,d.Z)(e.splitDirection,F.Z.NONE),this._splittingEnabled=!1,this._error=void 0,function(e,t){const n=N.Z.parse(t.arrayBuffer,t.byteOffset);if(e._parsedContent=n,e._rtcCenter=n.rtcCenter,e._hasNormals=n.hasNormals,e._hasColors=n.hasColors,e._hasBatchIds=n.hasBatchIds,e._isTranslucent=n.isTranslucent,!n.hasBatchIds&&(0,h.Z)(n.batchTableBinary)&&(n.styleableProperties=P.Z.getBinaryProperties(n.pointsLength,n.batchTableJson,n.batchTableBinary)),(0,h.Z)(n.draco)){const t=n.draco;e._decodingState=k,t.dequantizeInShader=e._dequantizeInShader}const i=n.positions;(0,h.Z)(i)&&(e._isQuantized=i.isQuantized,e._quantizedVolumeScale=i.quantizedVolumeScale,e._quantizedVolumeOffset=i.quantizedVolumeOffset,e._quantizedRange=i.quantizedRange);const o=n.normals;(0,h.Z)(o)&&(e._isOctEncoded16P=o.octEncoded);const r=n.colors;(0,h.Z)(r)&&((0,h.Z)(r.constantColor)&&(e._constantColor=c.Z.clone(r.constantColor,e._constantColor),e._hasColors=!1),e._isRGB565=r.isRGB565);const s=n.batchIds;(0,h.Z)(n.batchIds)&&(s.name="BATCH_ID",s.semantic="BATCH_ID",s.setIndex=void 0),n.hasBatchIds&&e._batchTableLoaded(n.batchLength,n.batchTableJson,n.batchTableBinary),e._pointsLength=n.pointsLength}(this,e)}Object.defineProperties(G.prototype,{pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}},color:{get:function(){return c.Z.clone(this._highlightColor)},set:function(e){this._highlightColor=c.Z.clone(e,this._highlightColor)}},boundingSphere:{get:function(){if((0,h.Z)(this._drawCommand))return this._drawCommand.boundingVolume},set:function(e){this._boundingSphere=i.Z.clone(e,this._boundingSphere)}}});const j=new o.Z,W=new o.Z,q=new o.Z;let Y,X;function J(e){if(!(0,h.Z)(X)){Y=new x(0),X=new Array(e);for(let t=0;t<e;++t)X[t]=Y.random()}return X}function Q(e,t){const n=u.Z.fromTypedArray(e);return n===u.Z.INT||n===u.Z.UNSIGNED_INT||n===u.Z.DOUBLE?((0,_.Z)("Cast pnts property to floats",`Point cloud property "${t}" will be cast to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),new Float32Array(e)):e}const $=new r.Z,K=new r.Z,ee=new c.Z,te=new m.Z,ne=new m.Z;function ie(e,t){const n=/czm_3dtiles_property_(\d+)/g;let i=n.exec(e);for(;null!==i;){const o=parseInt(i[1]);-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function oe(e,t){e=e.slice(e.indexOf("\n"));const n=/czm_3dtiles_builtin_property_(\w+)/g;let i=n.exec(e);for(;null!==i;){const o=i[1];-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function re(e,t){const n=e.numberOfAttributes;for(let i=0;i<n;++i){const n=e.getAttribute(i);if(n.index===t)return n}}const se={POSITION:"czm_3dtiles_builtin_property_POSITION",POSITION_ABSOLUTE:"czm_3dtiles_builtin_property_POSITION_ABSOLUTE",COLOR:"czm_3dtiles_builtin_property_COLOR",NORMAL:"czm_3dtiles_builtin_property_NORMAL"};const ae=new r.Z,ce=new o.Z;G.prototype.update=function(e){const t=e.context;if((0,h.Z)(this._error)){const e=this._error;throw this._error=void 0,e}const n=function(e,t){if(e._decodingState===H)return!1;if(e._decodingState===k){const n=e._parsedContent,i=n.draco,r=D.Z.decodePointCloud(i,t);(0,h.Z)(r)&&(e._decodingState=V,r.then((function(t){e._decodingState=H;const r=(0,h.Z)(t.POSITION)?t.POSITION.array:void 0,s=(0,h.Z)(t.RGB)?t.RGB.array:void 0,a=(0,h.Z)(t.RGBA)?t.RGBA.array:void 0,c=(0,h.Z)(t.NORMAL)?t.NORMAL.array:void 0,l=(0,h.Z)(t.BATCH_ID)?t.BATCH_ID.array:void 0,u=(0,h.Z)(r)&&(0,h.Z)(t.POSITION.data.quantization),f=(0,h.Z)(c)&&(0,h.Z)(t.NORMAL.data.quantization);if(u){const n=t.POSITION.data.quantization,i=n.range;e._quantizedVolumeScale=o.Z.fromElements(i,i,i),e._quantizedVolumeOffset=o.Z.unpack(n.minValues),e._quantizedRange=(1<<n.quantizationBits)-1,e._isQuantizedDraco=!0}f&&(e._octEncodedRange=(1<<t.NORMAL.data.quantization.quantizationBits)-1,e._isOctEncodedDraco=!0);let p=n.styleableProperties;const m=i.batchTableProperties;for(const e in m)if(m.hasOwnProperty(e)){const n=t[e];(0,h.Z)(p)||(p={}),p[e]={typedArray:n.array,componentCount:n.data.componentsPerAttribute}}(0,h.Z)(r)&&(n.positions={typedArray:r});const _=(0,d.Z)(a,s);(0,h.Z)(_)&&(n.colors={typedArray:_}),(0,h.Z)(c)&&(n.normals={typedArray:c}),(0,h.Z)(l)&&(n.batchIds={typedArray:l}),n.styleableProperties=p})).catch((function(t){e._decodingState=z,e._error=t})))}return!0}(this,t);if(n)return;let s=!1,f=!m.Z.equals(this._modelMatrix,this.modelMatrix);if(this._mode!==e.mode&&(this._mode=e.mode,f=!0),(0,h.Z)(this._drawCommand)||(function(e,t){const n=t.context,r=e._parsedContent,s=e._pointsLength,a=r.positions,c=r.colors,l=r.normals,d=r.batchIds,f=r.styleableProperties,_=(0,h.Z)(f),g=e._isQuantized,y=e._isQuantizedDraco,b=e._isOctEncoded16P,S=e._isOctEncodedDraco,x=e._quantizedRange,P=e._octEncodedRange,D=e._isRGB565,O=e._isTranslucent,L=e._hasColors,N=e._hasNormals,M=e._hasBatchIds;let R,F;const B=[],k={};if(e._styleableShaderAttributes=k,_){let t=4;for(const i in f)if(f.hasOwnProperty(i)){const o=f[i],r=Q(o.typedArray,i);R=o.componentCount,F=u.Z.fromTypedArray(r);const s=v.Z.createVertexBuffer({context:n,typedArray:r,usage:A.Z.STATIC_DRAW});e._geometryByteLength+=s.sizeInBytes;const a={index:t,vertexBuffer:s,componentsPerAttribute:R,componentDatatype:F,normalize:!1,offsetInBytes:0,strideInBytes:0};B.push(a),k[i]={location:t,componentCount:R},++t}}const V=v.Z.createVertexBuffer({context:n,typedArray:a.typedArray,usage:A.Z.STATIC_DRAW});let H,z,G;e._geometryByteLength+=V.sizeInBytes,L&&(H=v.Z.createVertexBuffer({context:n,typedArray:c.typedArray,usage:A.Z.STATIC_DRAW}),e._geometryByteLength+=H.sizeInBytes),N&&(z=v.Z.createVertexBuffer({context:n,typedArray:l.typedArray,usage:A.Z.STATIC_DRAW}),e._geometryByteLength+=z.sizeInBytes),M&&(d.typedArray=Q(d.typedArray,"batchIds"),G=v.Z.createVertexBuffer({context:n,typedArray:d.typedArray,usage:A.Z.STATIC_DRAW}),e._geometryByteLength+=G.sizeInBytes);let Y=[];if(F=g?u.Z.UNSIGNED_SHORT:y?x<=255?u.Z.UNSIGNED_BYTE:u.Z.UNSIGNED_SHORT:u.Z.FLOAT,Y.push({index:0,vertexBuffer:V,componentsPerAttribute:3,componentDatatype:F,normalize:!1,offsetInBytes:0,strideInBytes:0}),e._cull&&(e._boundingSphere=g||y?i.Z.fromCornerPoints(o.Z.ZERO,e._quantizedVolumeScale):function(e){const t=e.length/3,n=Math.min(t,20),r=J(20),s=Number.MAX_VALUE,a=-Number.MAX_VALUE,c=o.Z.fromElements(s,s,s,j),l=o.Z.fromElements(a,a,a,W);for(let i=0;i<n;++i){const n=Math.floor(r[i]*t),s=o.Z.unpack(e,3*n,q);o.Z.minimumByComponent(c,s,c),o.Z.maximumByComponent(l,s,l)}const u=i.Z.fromCornerPoints(c,l);return u.radius+=p.Z.EPSILON2,u}(a.typedArray)),L)if(D)Y.push({index:1,vertexBuffer:H,componentsPerAttribute:1,componentDatatype:u.Z.UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0});else{const e=O?4:3;Y.push({index:1,vertexBuffer:H,componentsPerAttribute:e,componentDatatype:u.Z.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0})}N&&(b?(R=2,F=u.Z.UNSIGNED_BYTE):S?(R=2,F=P<=255?u.Z.UNSIGNED_BYTE:u.Z.UNSIGNED_SHORT):(R=3,F=u.Z.FLOAT),Y.push({index:2,vertexBuffer:z,componentsPerAttribute:R,componentDatatype:F,normalize:!1,offsetInBytes:0,strideInBytes:0})),M&&Y.push({index:3,vertexBuffer:G,componentsPerAttribute:1,componentDatatype:u.Z.fromTypedArray(d.typedArray),normalize:!1,offsetInBytes:0,strideInBytes:0}),_&&(Y=Y.concat(B));const X=new C.Z({context:n,attributes:Y}),$={depthTest:{enabled:!0}},K={depthTest:{enabled:!0},depthMask:!1,blending:I.Z.ALPHA_BLEND};e._opaquePass===w.Z.CESIUM_3D_TILE&&($.stencilTest=U.Z.setCesium3DTileBit(),$.stencilMask=U.Z.CESIUM_3D_TILE_MASK,K.stencilTest=U.Z.setCesium3DTileBit(),K.stencilMask=U.Z.CESIUM_3D_TILE_MASK),e._opaqueRenderState=E.Z.fromCache($),e._translucentRenderState=E.Z.fromCache(K),e._drawCommand=new T.Z({boundingVolume:new i.Z,cull:e._cull,modelMatrix:new m.Z,primitiveType:Z.Z.POINTS,vertexArray:X,count:s,shaderProgram:void 0,uniformMap:void 0,renderState:O?e._translucentRenderState:e._opaqueRenderState,pass:O?w.Z.TRANSLUCENT:e._opaquePass,owner:e,castShadows:!1,receiveShadows:!1,pickId:e._pickIdLoaded()})}(this,e),f=!0,s=!0,this._ready=!0,this._parsedContent=void 0),f){m.Z.clone(this.modelMatrix,this._modelMatrix);const t=this._drawCommand.modelMatrix;if(m.Z.clone(this._modelMatrix,t),(0,h.Z)(this._rtcCenter)&&m.Z.multiplyByTranslation(t,this._rtcCenter,t),(0,h.Z)(this._quantizedVolumeOffset)&&m.Z.multiplyByTranslation(t,this._quantizedVolumeOffset,t),e.mode!==M.Z.SCENE3D){const n=e.mapProjection,i=m.Z.getColumn(t,3,ae);r.Z.equals(i,r.Z.UNIT_W)||b.Z.basisTo2D(n,t,t)}const n=this._drawCommand.boundingVolume;if(i.Z.clone(this._boundingSphere,n),this._cull){const e=n.center;m.Z.multiplyByPoint(t,e,e);const i=m.Z.getScale(t,ce);n.radius*=o.Z.maximumComponent(i)}}this.clippingPlanesDirty&&(this.clippingPlanesDirty=!1,s=!0),this._attenuation!==this.attenuation&&(this._attenuation=this.attenuation,s=!0),this.backFaceCulling!==this._backFaceCulling&&(this._backFaceCulling=this.backFaceCulling,s=!0),this.normalShading!==this._normalShading&&(this._normalShading=this.normalShading,s=!0),(this._style!==this.style||this.styleDirty)&&(this._style=this.style,this.styleDirty=!1,s=!0);const _=this.splitDirection!==F.Z.NONE;this._splittingEnabled!==_&&(this._splittingEnabled=_,s=!0),s&&function(e,t,n){let i,r,s;const u=t.context,f=(0,h.Z)(n),p=e._isQuantized,_=e._isQuantizedDraco,Z=e._isOctEncoded16P,b=e._isOctEncodedDraco,v=e._isRGB565,A=e._isTranslucent,T=e._hasColors,w=e._hasNormals,E=e._hasBatchIds,C=e._backFaceCulling,x=e._normalShading,I=e._drawCommand.vertexArray,P=e.clippingPlanes,D=e._attenuation;let N,R,U,k=A;const V=(0,a.Z)(se),H={},z=e._styleableShaderAttributes;for(r in z)z.hasOwnProperty(r)&&(s=z[r],V[r]=`czm_3dtiles_property_${s.location}`,H[s.location]=s);if(f){const e={translucent:!1},t="(vec3 czm_3dtiles_builtin_property_POSITION, vec3 czm_3dtiles_builtin_property_POSITION_ABSOLUTE, vec4 czm_3dtiles_builtin_property_COLOR, vec3 czm_3dtiles_builtin_property_NORMAL)";N=n.getColorShaderFunction(`getColorFromStyle${t}`,V,e),R=n.getShowShaderFunction(`getShowFromStyle${t}`,V,e),U=n.getPointSizeShaderFunction(`getPointSizeFromStyle${t}`,V,e),(0,h.Z)(N)&&e.translucent&&(k=!0)}e._styleTranslucent=k;const G=(0,h.Z)(N),j=(0,h.Z)(R),W=(0,h.Z)(U),q=e.isClipped,Y=[],X=[];G&&(ie(N,Y),oe(N,X)),j&&(ie(R,Y),oe(R,X)),W&&(ie(U,Y),oe(U,X));const J=X.indexOf("COLOR")>=0,Q=X.indexOf("NORMAL")>=0;if(Q&&!w)throw new y.Z("Style references the NORMAL semantic but the point cloud does not have normals");for(r in z)if(z.hasOwnProperty(r)){s=z[r];const e=Y.indexOf(s.location)>=0;re(I,s.location).enabled=e}const ae=T&&(!G||J);T&&(re(I,1).enabled=ae);const ce=w&&(x||C||Q);w&&(re(I,2).enabled=ce);const le={a_position:0};ae&&(le.a_color=1),ce&&(le.a_normal=2),E&&(le.a_batchId=3);let ue="";const de=Y.length;for(i=0;i<de;++i){const e=Y[i];s=H[e];const t=s.componentCount,n=`czm_3dtiles_property_${e}`;let o;o=1===t?"float":`vec${t}`,ue+=`in ${o} ${n}; \n`,le[n]=s.location}!function(e,t){const n=t.context,i=e._isQuantized,r=e._isQuantizedDraco,s=e._isOctEncodedDraco;let a={u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier:function(){const i=$;if(i.x=e._attenuation?e.maximumAttenuation:e._pointSize,i.x*=t.pixelRatio,i.y=e.time,e._attenuation){const o=t.camera.frustum;let r;r=t.mode===M.Z.SCENE2D||o instanceof g.Z?Number.POSITIVE_INFINITY:n.drawingBufferHeight/t.camera.frustum.sseDenominator,i.z=e.geometricError*e.geometricErrorScale,i.w=r}return i},u_highlightColor:function(){return e._highlightColor},u_constantColor:function(){return e._constantColor},u_clippingPlanes:function(){const t=e.clippingPlanes;return e.isClipped?t.texture:n.defaultTexture},u_clippingPlanesEdgeStyle:function(){const t=e.clippingPlanes;if(!(0,h.Z)(t))return c.Z.TRANSPARENT;const n=c.Z.clone(t.edgeColor,ee);return n.alpha=t.edgeWidth,n},u_clippingPlanesMatrix:function(){const t=e.clippingPlanes;if(!(0,h.Z)(t))return m.Z.IDENTITY;const i=(0,d.Z)(e.clippingPlanesOriginMatrix,e._modelMatrix);m.Z.multiply(n.uniformState.view3D,i,te);const o=m.Z.multiply(te,t.modelMatrix,te);return m.Z.inverseTranspose(o,ne)}};B.Z.addUniforms(e,a),(i||r||s)&&(a=(0,l.Z)(a,{u_quantizedVolumeScaleAndOctEncodedRange:function(){const t=K;if((0,h.Z)(e._quantizedVolumeScale)){const n=o.Z.clone(e._quantizedVolumeScale,t);o.Z.divideByScalar(n,e._quantizedRange,t)}return t.w=e._octEncodedRange,t}})),(0,h.Z)(e._uniformMapLoaded)&&(a=e._uniformMapLoaded(a)),e._drawCommand.uniformMap=a}(e,t);let he="in vec3 a_position; \nout vec4 v_color; \nuniform vec4 u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier; \nuniform vec4 u_constantColor; \nuniform vec4 u_highlightColor; \n";he+="float u_pointSize; \nfloat tiles3d_tileset_time; \n",D&&(he+="float u_geometricError; \nfloat u_depthMultiplier; \n"),he+=ue,ae&&(he+=A?"in vec4 a_color; \n":v?"in float a_color; \nconst float SHIFT_RIGHT_11 = 1.0 / 2048.0; \nconst float SHIFT_RIGHT_5 = 1.0 / 32.0; \nconst float SHIFT_LEFT_11 = 2048.0; \nconst float SHIFT_LEFT_5 = 32.0; \nconst float NORMALIZE_6 = 1.0 / 64.0; \nconst float NORMALIZE_5 = 1.0 / 32.0; \n":"in vec3 a_color; \n"),ce&&(he+=Z||b?"in vec2 a_normal; \n":"in vec3 a_normal; \n"),E&&(he+="in float a_batchId; \n"),(p||_||b)&&(he+="uniform vec4 u_quantizedVolumeScaleAndOctEncodedRange; \n"),G&&(he+=N),j&&(he+=R),W&&(he+=U),he+="void main() \n{ \n    u_pointSize = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.x; \n    tiles3d_tileset_time = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.y; \n",D&&(he+="    u_geometricError = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.z; \n    u_depthMultiplier = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.w; \n"),he+=ae?A?"    vec4 color = a_color; \n":v?"    float compressed = a_color; \n    float r = floor(compressed * SHIFT_RIGHT_11); \n    compressed -= r * SHIFT_LEFT_11; \n    float g = floor(compressed * SHIFT_RIGHT_5); \n    compressed -= g * SHIFT_LEFT_5; \n    float b = compressed; \n    vec3 rgb = vec3(r * NORMALIZE_5, g * NORMALIZE_6, b * NORMALIZE_5); \n    vec4 color = vec4(rgb, 1.0); \n":"    vec4 color = vec4(a_color, 1.0); \n":"    vec4 color = u_constantColor; \n",he+=p||_?"    vec3 position = a_position * u_quantizedVolumeScaleAndOctEncodedRange.xyz; \n":"    vec3 position = a_position; \n",he+="    vec3 position_absolute = vec3(czm_model * vec4(position, 1.0)); \n",ce?(he+=Z?"    vec3 normal = czm_octDecode(a_normal); \n":b?"    vec3 normal = czm_octDecode(a_normal, u_quantizedVolumeScaleAndOctEncodedRange.w).zxy; \n":"    vec3 normal = a_normal; \n",he+="    vec3 normalEC = czm_normal * normal; \n"):he+="    vec3 normal = vec3(1.0); \n",G&&(he+="    color = getColorFromStyle(position, position_absolute, color, normal); \n"),j&&(he+="    float show = float(getShowFromStyle(position, position_absolute, color, normal)); \n"),he+=W?"    gl_PointSize = getPointSizeFromStyle(position, position_absolute, color, normal) * czm_pixelRatio; \n":D?"    vec4 positionEC = czm_modelView * vec4(position, 1.0); \n    float depth = -positionEC.z; \n    gl_PointSize = min((u_geometricError / depth) * u_depthMultiplier, u_pointSize); \n":"    gl_PointSize = u_pointSize; \n",he+="    color = color * u_highlightColor; \n",ce&&x&&(he+="    float diffuseStrength = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC); \n    diffuseStrength = max(diffuseStrength, 0.4); \n    color.xyz *= diffuseStrength * czm_lightColor; \n"),he+="    v_color = color; \n    gl_Position = czm_modelViewProjection * vec4(position, 1.0); \n",ce&&C&&(he+="    float visible = step(-normalEC.z, 0.0); \n    gl_Position *= visible; \n    gl_PointSize *= visible; \n"),j&&(he+="    gl_Position.w *= float(show); \n    gl_PointSize *= float(show); \n"),he+="} \n";let fe="in vec4 v_color; \n";q&&(fe+="uniform highp sampler2D u_clippingPlanes; \nuniform mat4 u_clippingPlanesMatrix; \nuniform vec4 u_clippingPlanesEdgeStyle; \n",fe+="\n",fe+=(0,L.Z)(P,u),fe+="\n"),fe+="void main() \n{ \n    out_FragColor = czm_gammaCorrect(v_color); \n",q&&(fe+=(0,O.Z)("u_clippingPlanes","u_clippingPlanesMatrix","u_clippingPlanesEdgeStyle")),fe+="} \n",e.splitDirection!==F.Z.NONE&&(fe=B.Z.modifyFragmentShader(fe)),(0,h.Z)(e._vertexShaderLoaded)&&(he=e._vertexShaderLoaded(he)),(0,h.Z)(e._fragmentShaderLoaded)&&(fe=e._fragmentShaderLoaded(fe));const pe=e._drawCommand;(0,h.Z)(pe.shaderProgram)&&pe.shaderProgram.destroy(),pe.shaderProgram=S.Z.fromCache({context:u,vertexShaderSource:he,fragmentShaderSource:fe,attributeLocations:le});try{pe.shaderProgram._bind()}catch(e){throw new y.Z("Error generating style shader: this may be caused by a type mismatch, index out-of-bounds, or other syntax error.")}}(this,e,this._style),this._drawCommand.castShadows=R.Z.castShadows(this.shadows),this._drawCommand.receiveShadows=R.Z.receiveShadows(this.shadows);const x=this._highlightColor.alpha<1||this._constantColor.alpha<1||this._styleTranslucent;this._drawCommand.renderState=x?this._translucentRenderState:this._opaqueRenderState,this._drawCommand.pass=x?w.Z.TRANSLUCENT:this._opaquePass;const P=e.commandList,N=e.passes;(N.render||N.pick)&&P.push(this._drawCommand)},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){const e=this._drawCommand;return(0,h.Z)(e)&&(e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy()),(0,f.Z)(this)};const le=G},270550:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(405254),o=n(35961),r=n(11020),s=n(722313),a=n(804868),c=n(598020),l=n(661679),u=n(12503),d=n(431056),h=n(417148),f=n(437530),p=n(973591),m=n(822948),_=n(638442);function g(){this._framebuffer=new u.Z({colorAttachmentsLength:2,depth:!0,supportsDepthTexture:!0}),this._drawCommand=void 0,this._clearCommand=void 0,this._strength=1,this._radius=1}Object.defineProperties(g.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}},colorGBuffer:{get:function(){return this._framebuffer.getColorTexture(0)}},depthGBuffer:{get:function(){return this._framebuffer.getColorTexture(1)}}});const Z=new i.Z;function y(e){return e.drawBuffers&&e.fragmentDepth}function b(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"EC");if(!(0,r.Z)(n)){const i=t._attributeLocations,o=t.fragmentShaderSource.clone();o.sources.splice(0,0,"layout (location = 0) out vec4 out_FragData_0;\nlayout (location = 1) out vec4 out_FragData_1;"),o.sources=o.sources.map((function(e){return(e=f.Z.replaceMain(e,"czm_point_cloud_post_process_main")).replaceAll(/out_FragColor/g,"out_FragData_0")})),o.sources.push("void main() \n{ \n    czm_point_cloud_post_process_main(); \n#ifdef LOG_DEPTH\n    czm_writeLogDepth();\n    out_FragData_1 = czm_packDepth(gl_FragDepth); \n#else\n    out_FragData_1 = czm_packDepth(gl_FragCoord.z);\n#endif\n}"),n=e.shaderCache.createDerivedShaderProgram(t,"EC",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:i})}return n}g.isSupported=y,g.prototype.update=function(e,t,n,i){if(!y(e.context))return;let s;this._strength=n.eyeDomeLightingStrength,this._radius=n.eyeDomeLightingRadius*e.pixelRatio,function(e,t){const n=t.drawingBufferWidth,i=t.drawingBufferHeight;e._framebuffer.update(t,n,i),function(e,t){const n=new f.Z({defines:["LOG_DEPTH_WRITE"],sources:[_.Z]}),i={u_pointCloud_colorGBuffer:function(){return e.colorGBuffer},u_pointCloud_depthGBuffer:function(){return e.depthGBuffer},u_distanceAndEdlStrength:function(){return Z.x=e._radius,Z.y=e._strength,Z}},r=h.Z.fromCache({blending:p.Z.ALPHA_BLEND,depthMask:!0,depthTest:{enabled:!0},stencilTest:m.Z.setCesium3DTileBit(),stencilMask:m.Z.CESIUM_3D_TILE_MASK});e._drawCommand=t.createViewportQuadCommand(n,{uniformMap:i,renderState:r,pass:d.Z.CESIUM_3D_TILE,owner:e}),e._clearCommand=new c.Z({framebuffer:e.framebuffer,color:new o.Z(0,0,0,0),depth:1,renderState:h.Z.fromCache(),pass:d.Z.CESIUM_3D_TILE,owner:e})}(e,t)}(this,e.context);const u=e.commandList,g=u.length;for(s=t;s<g;++s){const t=u[s];if(t.primitiveType!==a.Z.POINTS||t.pass===d.Z.TRANSLUCENT)continue;let n,i,o=t.derivedCommands.pointCloudProcessor;(0,r.Z)(o)&&(n=o.command,i=o.originalShaderProgram),(0,r.Z)(n)&&!t.dirty&&i===t.shaderProgram&&n.framebuffer===this.framebuffer||(n=l.Z.shallowClone(t,n),n.framebuffer=this.framebuffer,n.shaderProgram=b(e.context,t.shaderProgram),n.castShadows=!1,n.receiveShadows=!1,(0,r.Z)(o)||(o={command:n,originalShaderProgram:t.shaderProgram},t.derivedCommands.pointCloudProcessor=o),o.originalShaderProgram=t.shaderProgram),u[s]=n}const v=this._clearCommand,A=this._drawCommand;A.boundingVolume=i,u.push(A),u.push(v)},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){var e;return(e=this)._framebuffer.destroy(),e._drawCommand=void 0,e._clearCommand=void 0,(0,s.Z)(this)};const v=g},993910:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(234146),o=n(270550);function r(e){const t=(0,i.Z)(e,{});this.attenuation=(0,i.Z)(t.attenuation,!1),this.geometricErrorScale=(0,i.Z)(t.geometricErrorScale,1),this.maximumAttenuation=t.maximumAttenuation,this.baseResolution=t.baseResolution,this.eyeDomeLighting=(0,i.Z)(t.eyeDomeLighting,!0),this.eyeDomeLightingStrength=(0,i.Z)(t.eyeDomeLightingStrength,1),this.eyeDomeLightingRadius=(0,i.Z)(t.eyeDomeLightingRadius,1),this.backFaceCulling=(0,i.Z)(t.backFaceCulling,!1),this.normalShading=(0,i.Z)(t.normalShading,!0)}r.isSupported=function(e){return o.Z.isSupported(e.context)};const s=r},763543:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(334389),o=n(762031),r=n(660904),s=n(35961),a=n(234146),c=n(11020),l=n(765153),u=n(6821),d=n(659635),h=n(151793),f=n(420171);function p(e,t){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),this._show=(0,a.Z)(e.show,!0),this._width=(0,a.Z)(e.width,1),this._loop=(0,a.Z)(e.loop,!1),this._distanceDisplayCondition=e.distanceDisplayCondition,this._material=e.material,(0,c.Z)(this._material)||(this._material=f.Z.fromType(f.Z.ColorType,{color:new s.Z(1,1,1,1)}));let n,l=e.positions;(0,c.Z)(l)||(l=[]),this._positions=l,this._actualPositions=(0,i.Z)(l,r.Z.equalsEpsilon),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=l.slice()),this._actualPositions.push(r.Z.clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=e.id,(0,c.Z)(t)&&(n=d.Z.clone(t.modelMatrix)),this._modelMatrix=n,this._segments=h.Z.wrapLongitude(this._actualPositions,n),this._actualLength=void 0,this._propertiesChanged=new Uint32Array(v),this._polylineCollection=t,this._dirty=!1,this._pickId=void 0,this._boundingVolume=o.Z.fromPoints(this._actualPositions),this._boundingVolumeWC=o.Z.transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new o.Z}const m=p.POSITION_INDEX=0,_=p.SHOW_INDEX=1,g=p.WIDTH_INDEX=2,Z=p.MATERIAL_INDEX=3,y=p.POSITION_SIZE_INDEX=4,b=p.DISTANCE_DISPLAY_CONDITION=5,v=p.NUMBER_OF_PROPERTIES=6;function A(e,t){++e._propertiesChanged[t];const n=e._polylineCollection;(0,c.Z)(n)&&(n._updatePolyline(e,t),e._dirty=!0)}Object.defineProperties(p.prototype,{show:{get:function(){return this._show},set:function(e){if(!(0,c.Z)(e))throw new l.Z("value is required.");e!==this._show&&(this._show=e,A(this,_))}},positions:{get:function(){return this._positions},set:function(e){if(!(0,c.Z)(e))throw new l.Z("value is required.");let t=(0,i.Z)(e,r.Z.equalsEpsilon);this._loop&&t.length>2&&(t===e&&(t=e.slice()),t.push(r.Z.clone(t[0]))),this._actualPositions.length===t.length&&this._actualPositions.length===this._length||A(this,y),this._positions=e,this._actualPositions=t,this._length=t.length,this._boundingVolume=o.Z.fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=o.Z.transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),A(this,m),this.update()}},material:{get:function(){return this._material},set:function(e){if(!(0,c.Z)(e))throw new l.Z("material is required.");this._material!==e&&(this._material=e,A(this,Z))}},width:{get:function(){return this._width},set:function(e){if(!(0,c.Z)(e))throw new l.Z("value is required.");e!==this._width&&(this._width=e,A(this,g))}},loop:{get:function(){return this._loop},set:function(e){if(!(0,c.Z)(e))throw new l.Z("value is required.");if(e!==this._loop){let t=this._actualPositions;e?t.length>2&&!r.Z.equals(t[0],t[t.length-1])&&(t.length===this._positions.length&&(this._actualPositions=t=this._positions.slice()),t.push(r.Z.clone(t[0]))):t.length>2&&r.Z.equals(t[0],t[t.length-1])&&(t.length-1===this._positions.length?this._actualPositions=this._positions:t.pop()),this._loop=e,A(this,y)}}},id:{get:function(){return this._id},set:function(e){this._id=e,(0,c.Z)(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},isDestroyed:{get:function(){return!(0,c.Z)(this._polylineCollection)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if((0,c.Z)(e)&&e.far<=e.near)throw new l.Z("far distance must be greater than near distance.");u.Z.equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=u.Z.clone(e,this._distanceDisplayCondition),A(this,b))}}}),p.prototype.update=function(){let e=d.Z.IDENTITY;(0,c.Z)(this._polylineCollection)&&(e=this._polylineCollection.modelMatrix);const t=this._segments.positions.length,n=this._segments.lengths,i=this._propertiesChanged[m]>0||this._propertiesChanged[y]>0;if(d.Z.equals(e,this._modelMatrix)&&!i||(this._segments=h.Z.wrapLongitude(this._actualPositions,e),this._boundingVolumeWC=o.Z.transform(this._boundingVolume,e,this._boundingVolumeWC)),this._modelMatrix=d.Z.clone(e,this._modelMatrix),this._segments.positions.length!==t)A(this,y);else{const e=n.length;for(let t=0;t<e;++t)if(n[t]!==this._segments.lengths[t]){A(this,y);break}}},p.prototype.getPickId=function(e){return(0,c.Z)(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId},p.prototype._clean=function(){this._dirty=!1;const e=this._propertiesChanged;for(let t=0;t<v-1;++t)e[t]=0},p.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0};const T=p},999604:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ie});var i=n(762031),o=n(405254),r=n(660904),s=n(798336),a=n(532056),c=n(35961),l=n(394579),u=n(449809),d=n(234146),h=n(11020),f=n(722313),p=n(765153),m=n(180390),_=n(95296),g=n(342209),Z=n(101496),y=n(344485),b=n(659635),v=n(341633),A=n(217066),T=n(379593),w=n(915323),E=n(591477),S=n(661679),C=n(431056),x=n(417148),I=n(161632),P=n(437530),D=n(609882),O=n(858371),L=n(614435),N=n(851295),M=n(389617),R=n(906981),F=n(973591),B=n(420171),U=n(763543),k=n(714233);const V=U.Z.SHOW_INDEX,H=U.Z.WIDTH_INDEX,z=U.Z.POSITION_INDEX,G=U.Z.MATERIAL_INDEX,j=U.Z.POSITION_SIZE_INDEX,W=U.Z.DISTANCE_DISPLAY_CONDITION,q=U.Z.NUMBER_OF_PROPERTIES,Y={texCoordExpandAndBatchIndex:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12};function X(e){e=(0,d.Z)(e,d.Z.EMPTY_OBJECT),this.show=(0,d.Z)(e.show,!0),this.modelMatrix=b.Z.clone((0,d.Z)(e.modelMatrix,b.Z.IDENTITY)),this._modelMatrix=b.Z.clone(b.Z.IDENTITY),this.debugShowBoundingVolume=(0,d.Z)(e.debugShowBoundingVolume,!1),this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(q),this._polylines=[],this._polylineBuckets={},this._positionBufferUsage={bufferUsage:w.Z.STATIC_DRAW,frameCount:0},this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._texCoordExpandAndBatchIndexBuffer=void 0,this._batchTable=void 0,this._createBatchTable=!1,this._useHighlightColor=!1,this._highlightColor=c.Z.clone(c.Z.WHITE);const t=this;this._uniformMap={u_highlightColor:function(){return t._highlightColor}}}Object.defineProperties(X.prototype,{length:{get:function(){return se(this),this._polylines.length}}}),X.prototype.add=function(e){const t=new U.Z(e,this);return t._index=this._polylines.length,this._polylines.push(t),this._createVertexArray=!0,this._createBatchTable=!0,t},X.prototype.remove=function(e){if(this.contains(e)){if(this._polylinesRemoved=!0,this._createVertexArray=!0,this._createBatchTable=!0,(0,h.Z)(e._bucket)){const t=e._bucket;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}return e._destroy(),!0}return!1},X.prototype.removeAll=function(){ae(this),le(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0},X.prototype.contains=function(e){return(0,h.Z)(e)&&e._polylineCollection===this},X.prototype.get=function(e){if(!(0,h.Z)(e))throw new p.Z("index is required.");return se(this),this._polylines[e]};const J=new m.Z,Q=new s.Z,$=new o.Z;X.prototype.update=function(e){if(se(this),0===this._polylines.length||!this.show)return;!function(e,t){const n=t.mode;e._mode===n&&b.Z.equals(e._modelMatrix,e.modelMatrix)||(e._mode=n,e._modelMatrix=b.Z.clone(e.modelMatrix),e._createVertexArray=!0)}(this,e);const t=e.context,n=e.mapProjection;let r,a=this._propertiesChanged;if(this._createBatchTable){if(0===E.Z.maximumVertexTextureImageUnits)throw new A.Z("Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero.");!function(e,t){(0,h.Z)(e._batchTable)&&e._batchTable.destroy();const n=[{functionName:"batchTable_getWidthAndShow",componentDatatype:u.Z.UNSIGNED_BYTE,componentsPerAttribute:2},{functionName:"batchTable_getPickColor",componentDatatype:u.Z.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"batchTable_getCenterHigh",componentDatatype:u.Z.FLOAT,componentsPerAttribute:3},{functionName:"batchTable_getCenterLowAndRadius",componentDatatype:u.Z.FLOAT,componentsPerAttribute:4},{functionName:"batchTable_getDistanceDisplayCondition",componentDatatype:u.Z.FLOAT,componentsPerAttribute:2}];e._batchTable=new R.Z(t,n,e._polylines.length)}(this,t),this._createBatchTable=!1}if(this._createVertexArray||function(e){let t=!1;const n=e._propertiesChanged,i=e._positionBufferUsage;return n[z]?i.bufferUsage!==w.Z.STREAM_DRAW?(t=!0,i.bufferUsage=w.Z.STREAM_DRAW,i.frameCount=100):i.frameCount=100:i.bufferUsage!==w.Z.STATIC_DRAW&&(0===i.frameCount?(t=!0,i.bufferUsage=w.Z.STATIC_DRAW):i.frameCount--),t}(this))ne(this,t,n);else if(this._polylinesUpdated){const i=this._polylinesToUpdate;if(this._mode!==k.Z.SCENE3D){const e=i.length;for(let t=0;t<e;++t)r=i[t],r.update()}if(a[j]||a[G])ne(this,t,n);else{const t=i.length,c=this._polylineBuckets;for(let l=0;l<t;++l){r=i[l],a=r._propertiesChanged;const t=r._bucket;let u=0;for(const e in c)if(c.hasOwnProperty(e)){if(c[e]===t){a[z]&&t.writeUpdate(u,r,this._positionBuffer,n);break}u+=c[e].lengthOfPositions}if((a[V]||a[H])&&this._batchTable.setBatchedAttribute(r._index,0,new o.Z(r._width,r._show)),this._batchTable.attributes.length>2){if(a[z]||a[j]){const t=e.mode===k.Z.SCENE2D?r._boundingVolume2D:r._boundingVolumeWC,n=m.Z.fromCartesian(t.center,J),i=s.Z.fromElements(n.low.x,n.low.y,n.low.z,t.radius,Q);this._batchTable.setBatchedAttribute(r._index,2,n.high),this._batchTable.setBatchedAttribute(r._index,3,i)}if(a[W]){const e=$;e.x=0,e.y=Number.MAX_VALUE;const t=r.distanceDisplayCondition;(0,h.Z)(t)&&(e.x=t.near,e.y=t.far),this._batchTable.setBatchedAttribute(r._index,4,e)}}r._clean()}}i.length=0,this._polylinesUpdated=!1}a=this._propertiesChanged;for(let e=0;e<q;++e)a[e]=0;let c=b.Z.IDENTITY;e.mode===k.Z.SCENE3D&&(c=this.modelMatrix);const d=e.passes,f=0!==e.morphTime;(0,h.Z)(this._opaqueRS)&&this._opaqueRS.depthTest.enabled===f||(this._opaqueRS=x.Z.fromCache({depthMask:f,depthTest:{enabled:f}})),(0,h.Z)(this._translucentRS)&&this._translucentRS.depthTest.enabled===f||(this._translucentRS=x.Z.fromCache({blending:F.Z.ALPHA_BLEND,depthMask:!f,depthTest:{enabled:f}})),this._batchTable.update(e),(d.render||d.pick)&&function(e,t,n,o){const r=t.context,s=t.commandList,a=n.length;let c=0,u=!0;const d=e._vertexArrays,f=e.debugShowBoundingVolume,p=e._batchTable.getUniformMapCallback(),m=d.length;for(let _=0;_<m;++_){const m=d[_],g=m.buckets,Z=g.length;for(let d=0;d<Z;++d){const _=g[d];let Z=_.offset;const y=_.bucket.shaderProgram,b=_.bucket.polylines,v=b.length;let A,T,w,E,x=0;for(let d=0;d<v;++d){const g=b[d],v=re(g._material);if(v!==A){if((0,h.Z)(A)&&x>0){const t=T.isTranslucent();c>=a?(w=new S.Z({owner:e}),n.push(w)):w=n[c],++c,E=(0,l.Z)(p(T._uniforms),e._uniformMap),w.boundingVolume=i.Z.clone(K,w.boundingVolume),w.modelMatrix=o,w.shaderProgram=y,w.vertexArray=m.va,w.renderState=t?e._translucentRS:e._opaqueRS,w.pass=t?C.Z.TRANSLUCENT:C.Z.OPAQUE,w.debugShowBoundingVolume=f,w.pickId="v_pickColor",w.uniformMap=E,w.count=x,w.offset=Z,Z+=x,x=0,u=!0,s.push(w)}T=g._material,T.update(r),A=v}const I=g._locatorBuckets,P=I.length;for(let e=0;e<P;++e){const t=I[e];t.locator===_&&(x+=t.count)}let D;t.mode===k.Z.SCENE3D?D=g._boundingVolumeWC:t.mode===k.Z.COLUMBUS_VIEW?D=g._boundingVolume2D:t.mode===k.Z.SCENE2D?(0,h.Z)(g._boundingVolume2D)&&(D=i.Z.clone(g._boundingVolume2D,ee),D.center.x=0):(0,h.Z)(g._boundingVolumeWC)&&(0,h.Z)(g._boundingVolume2D)&&(D=i.Z.union(g._boundingVolumeWC,g._boundingVolume2D,ee)),u?(u=!1,i.Z.clone(D,K)):i.Z.union(D,K,K)}(0,h.Z)(A)&&x>0&&(c>=a?(w=new S.Z({owner:e}),n.push(w)):w=n[c],++c,E=(0,l.Z)(p(T._uniforms),e._uniformMap),w.boundingVolume=i.Z.clone(K,w.boundingVolume),w.modelMatrix=o,w.shaderProgram=y,w.vertexArray=m.va,w.renderState=T.isTranslucent()?e._translucentRS:e._opaqueRS,w.pass=T.isTranslucent()?C.Z.TRANSLUCENT:C.Z.OPAQUE,w.debugShowBoundingVolume=f,w.pickId="v_pickColor",w.uniformMap=E,w.count=x,w.offset=Z,u=!0,s.push(w)),A=void 0}}n.length=c}(this,e,this._colorCommands,c)};const K=new i.Z,ee=new i.Z;X.prototype.isDestroyed=function(){return!1},X.prototype.destroy=function(){return ce(this),ae(this),le(this),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,f.Z)(this)};const te=[0,0,0];function ne(e,t,n){e._createVertexArray=!1,ae(e),ce(e),function(e){const t=e._mode,n=e._modelMatrix,i=e._polylineBuckets={},o=e._polylines,r=o.length;for(let e=0;e<r;++e){const r=o[e];if(r._actualPositions.length>1){r.update();const e=r.material;let o=i[e.type];(0,h.Z)(o)||(o=i[e.type]=new de(e,t,n)),o.addPolyline(r)}}}(e);const i=[[]];let o=i[0];const r=e._batchTable,s=e._useHighlightColor,a=[0];let c=0;const l=[[]];let d=0;const f=e._polylineBuckets;let p,m;for(p in f)f.hasOwnProperty(p)&&(m=f[p],m.updateShader(t,r,s),d+=m.lengthOfPositions);if(d>0){const s=e._mode,_=new Float32Array(6*d*3),Z=new Float32Array(4*d);let b,v=0,A=0,E=0;for(p in f)if(f.hasOwnProperty(p)){m=f[p],m.write(_,Z,v,A,E,r,t,n),s===k.Z.MORPHING&&((0,h.Z)(b)||(b=new Float32Array(6*d*3)),m.writeForMorph(b,v));const e=m.lengthOfPositions;v+=6*e*3,A+=4*e,E+=4*e,c=m.updateIndices(i,a,l,c)}const S=e._positionBufferUsage.bufferUsage,C=w.Z.STATIC_DRAW;let x;e._positionBuffer=T.Z.createVertexBuffer({context:t,typedArray:_,usage:S}),(0,h.Z)(b)&&(x=T.Z.createVertexBuffer({context:t,typedArray:b,usage:S})),e._texCoordExpandAndBatchIndexBuffer=T.Z.createVertexBuffer({context:t,typedArray:Z,usage:C});const I=3*Float32Array.BYTES_PER_ELEMENT,P=4*Float32Array.BYTES_PER_ELEMENT;let D=0;const L=i.length;for(let n=0;n<L;++n)if(o=i[n],o.length>0){const i=new Uint16Array(o),r=T.Z.createIndexBuffer({context:t,typedArray:i,usage:w.Z.STATIC_DRAW,indexDatatype:g.Z.UNSIGNED_SHORT});D+=a[n];const c=6*(n*(I*y.Z.SIXTY_FOUR_KILOBYTES)-D*I),d=I+c,h=I+d,f=I+h,p=I+f,m=I+p,_=n*(P*y.Z.SIXTY_FOUR_KILOBYTES)-D*P,Z=[{index:Y.position3DHigh,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:c,strideInBytes:6*I},{index:Y.position3DLow,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:d,strideInBytes:6*I},{index:Y.position2DHigh,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:c,strideInBytes:6*I},{index:Y.position2DLow,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:d,strideInBytes:6*I},{index:Y.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:h,strideInBytes:6*I},{index:Y.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:f,strideInBytes:6*I},{index:Y.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:h,strideInBytes:6*I},{index:Y.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:f,strideInBytes:6*I},{index:Y.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:p,strideInBytes:6*I},{index:Y.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:m,strideInBytes:6*I},{index:Y.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:p,strideInBytes:6*I},{index:Y.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:u.Z.FLOAT,offsetInBytes:m,strideInBytes:6*I},{index:Y.texCoordExpandAndBatchIndex,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,vertexBuffer:e._texCoordExpandAndBatchIndexBuffer,offsetInBytes:_}];let b,v,A,E;s===k.Z.SCENE3D?(v=e._positionBuffer,b="vertexBuffer",A=te,E="value"):s===k.Z.SCENE2D||s===k.Z.COLUMBUS_VIEW?(v=te,b="value",A=e._positionBuffer,E="vertexBuffer"):(v=x,b="vertexBuffer",A=e._positionBuffer,E="vertexBuffer"),Z[0][b]=v,Z[1][b]=v,Z[2][E]=A,Z[3][E]=A,Z[4][b]=v,Z[5][b]=v,Z[6][E]=A,Z[7][E]=A,Z[8][b]=v,Z[9][b]=v,Z[10][E]=A,Z[11][E]=A;const S=new O.Z({context:t,attributes:Z,indexBuffer:r});e._vertexArrays.push({va:S,buckets:l[n]})}}}function ie(e,t){return t instanceof D.Z?t.id:t}const oe=[];function re(e){const t=B.Z._uniformList[e.type],n=t.length;oe.length=2*n;let i=0;for(let o=0;o<n;++o){const n=t[o];oe[i]=n,oe[i+1]=e._uniforms[n](),i+=2}return`${e.type}:${JSON.stringify(oe,ie)}`}function se(e){if(e._polylinesRemoved){e._polylinesRemoved=!1;const t=[],n=[];let i,o=0;const r=e._polylines.length;for(let s=0;s<r;++s)i=e._polylines[s],i.isDestroyed||(i._index=o++,n.push(i),t.push(i));e._polylines=t,e._polylinesToUpdate=n}}function ae(e){const t=e._polylines,n=t.length;for(let e=0;e<n;++e)if(!t[e].isDestroyed){const n=t[e]._bucket;(0,h.Z)(n)&&(n.shaderProgram=n.shaderProgram&&n.shaderProgram.destroy())}}function ce(e){const t=e._vertexArrays.length;for(let n=0;n<t;++n)e._vertexArrays[n].va.destroy();e._vertexArrays.length=0}function le(e){const t=e._polylines,n=t.length;for(let e=0;e<n;++e)t[e].isDestroyed||t[e]._destroy()}function ue(e,t,n){this.count=e,this.offset=t,this.bucket=n}function de(e,t,n){this.polylines=[],this.lengthOfPositions=0,this.material=e,this.shaderProgram=void 0,this.mode=t,this.modelMatrix=n}function he(e){return r.Z.dot(r.Z.UNIT_X,e._boundingVolume.center)<0||e._boundingVolume.intersectPlane(v.Z.ORIGIN_ZX_PLANE)===Z.Z.INTERSECTING}X.prototype._updatePolyline=function(e,t){this._polylinesUpdated=!0,e._dirty||this._polylinesToUpdate.push(e),++this._propertiesChanged[t]},de.prototype.addPolyline=function(e){this.polylines.push(e),e._actualLength=this.getPolylinePositionsLength(e),this.lengthOfPositions+=e._actualLength,e._bucket=this},de.prototype.updateShader=function(e,t,n){if((0,h.Z)(this.shaderProgram))return;const i=["DISTANCE_DISPLAY_CONDITION"];n&&i.push("VECTOR_TILE"),-1!==this.material.shaderSource.search(/in\s+float\s+v_polylineAngle;/g)&&i.push("POLYLINE_DASH"),_.Z.isInternetExplorer()||i.push("CLIP_POLYLINE");const o=new P.Z({defines:i,sources:["in vec4 v_pickColor;\n",this.material.shaderSource,N.Z]}),r=t.getVertexShaderCallback()(M.Z),s=new P.Z({defines:i,sources:[L.Z,r]});this.shaderProgram=I.Z.fromCache({context:e,vertexShaderSource:s,fragmentShaderSource:o,attributeLocations:Y})},de.prototype.getPolylinePositionsLength=function(e){let t;if(this.mode===k.Z.SCENE3D||!he(e))return t=e._actualPositions.length,4*t-4;let n=0;const i=e._segments.lengths;t=i.length;for(let e=0;e<t;++e)n+=4*i[e]-4;return n};const fe=new r.Z,pe=new r.Z,me=new r.Z,_e=new r.Z,ge=new s.Z,Ze=new o.Z;de.prototype.write=function(e,t,n,i,o,a,l,u){const d=this.mode,f=u.ellipsoid.maximumRadius*y.Z.PI,p=this.polylines,_=p.length;for(let i=0;i<_;++i){const _=p[i],g=_.width,Z=_.show&&g>0,y=_._index,b=this.getSegments(_,u),v=b.positions,A=b.lengths,T=v.length,w=_.getPickId(l).color;let E,S=0,C=0;for(let i=0;i<T;++i){0===i?_._loop?E=v[T-2]:(E=_e,r.Z.subtract(v[0],v[1],E),r.Z.add(v[0],E,E)):E=v[i-1],r.Z.clone(E,pe),r.Z.clone(v[i],fe),i===T-1?_._loop?E=v[1]:(E=_e,r.Z.subtract(v[T-1],v[T-2],E),r.Z.add(v[T-1],E,E)):E=v[i+1],r.Z.clone(E,me);const s=A[S];i===C+s&&(C+=s,++S);const a=i-C==0,c=i===C+A[S]-1;d===k.Z.SCENE2D&&(pe.z=0,fe.z=0,me.z=0),d!==k.Z.SCENE2D&&d!==k.Z.MORPHING||(a||c)&&f-Math.abs(fe.x)<1&&((fe.x<0&&pe.x>0||fe.x>0&&pe.x<0)&&r.Z.clone(fe,pe),(fe.x<0&&me.x>0||fe.x>0&&me.x<0)&&r.Z.clone(fe,me));const l=c?2:4;for(let r=a?2:0;r<l;++r){m.Z.writeElements(fe,e,n),m.Z.writeElements(pe,e,n+6),m.Z.writeElements(me,e,n+12);const s=r-2<0?-1:1;t[o]=i/(T-1),t[o+1]=r%2*2-1,t[o+2]=s,t[o+3]=y,n+=18,o+=4}}const x=ge;x.x=c.Z.floatToByte(w.red),x.y=c.Z.floatToByte(w.green),x.z=c.Z.floatToByte(w.blue),x.w=c.Z.floatToByte(w.alpha);const I=Ze;I.x=g,I.y=Z?1:0;const P=d===k.Z.SCENE2D?_._boundingVolume2D:_._boundingVolumeWC,D=m.Z.fromCartesian(P.center,J),O=D.high,L=s.Z.fromElements(D.low.x,D.low.y,D.low.z,P.radius,Q),N=$;N.x=0,N.y=Number.MAX_VALUE;const M=_.distanceDisplayCondition;(0,h.Z)(M)&&(N.x=M.near,N.y=M.far),a.setBatchedAttribute(y,0,I),a.setBatchedAttribute(y,1,x),a.attributes.length>2&&(a.setBatchedAttribute(y,2,O),a.setBatchedAttribute(y,3,L),a.setBatchedAttribute(y,4,N))}};const ye=new r.Z,be=new r.Z,ve=new r.Z,Ae=new r.Z;de.prototype.writeForMorph=function(e,t){const n=this.modelMatrix,i=this.polylines,o=i.length;for(let s=0;s<o;++s){const o=i[s],a=o._segments.positions,c=o._segments.lengths,l=a.length;let u=0,d=0;for(let i=0;i<l;++i){let s;0===i?o._loop?s=a[l-2]:(s=Ae,r.Z.subtract(a[0],a[1],s),r.Z.add(a[0],s,s)):s=a[i-1],s=b.Z.multiplyByPoint(n,s,be);const h=b.Z.multiplyByPoint(n,a[i],ye);let f;i===l-1?o._loop?f=a[1]:(f=Ae,r.Z.subtract(a[l-1],a[l-2],f),r.Z.add(a[l-1],f,f)):f=a[i+1],f=b.Z.multiplyByPoint(n,f,ve);const p=c[u];i===d+p&&(d+=p,++u);const _=i-d==0,g=i===d+c[u]-1?2:4;for(let n=_?2:0;n<g;++n)m.Z.writeElements(h,e,t),m.Z.writeElements(s,e,t+6),m.Z.writeElements(f,e,t+12),t+=18}}};const Te=new Array(1);de.prototype.updateIndices=function(e,t,n,i){let o=n.length-1,r=new ue(0,i,this);n[o].push(r);let s=0,a=e[e.length-1],c=0;a.length>0&&(c=a[a.length-1]+1);const l=this.polylines,u=l.length;for(let d=0;d<u;++d){const u=l[d];let h;if(u._locatorBuckets=[],this.mode===k.Z.SCENE3D){h=Te;const e=u._actualPositions.length;if(!(e>0))continue;h[0]=e}else h=u._segments.lengths;const f=h.length;if(f>0){let l=0;for(let d=0;d<f;++d){const f=h[d]-1;for(let d=0;d<f;++d)c+4>y.Z.SIXTY_FOUR_KILOBYTES&&(u._locatorBuckets.push({locator:r,count:l}),l=0,t.push(4),a=[],e.push(a),c=0,r.count=s,s=0,i=0,r=new ue(0,0,this),n[++o]=[r]),a.push(c,c+2,c+1),a.push(c+1,c+2,c+3),l+=6,s+=6,i+=6,c+=4}u._locatorBuckets.push({locator:r,count:l}),c+4>y.Z.SIXTY_FOUR_KILOBYTES&&(t.push(0),a=[],e.push(a),c=0,r.count=s,i=0,s=0,r=new ue(0,0,this),n[++o]=[r])}u._clean()}return r.count=s,i},de.prototype.getPolylineStartIndex=function(e){const t=this.polylines;let n=0;const i=t.length;for(let o=0;o<i;++o){const i=t[o];if(i===e)break;n+=i._actualLength}return n};const we={positions:void 0,lengths:void 0},Ee=new Array(1),Se=new r.Z,Ce=new a.Z;let xe;de.prototype.getSegments=function(e,t){let n=e._actualPositions;if(this.mode===k.Z.SCENE3D)return Ee[0]=n.length,we.positions=n,we.lengths=Ee,we;he(e)&&(n=e._segments.positions);const o=t.ellipsoid,s=[],a=this.modelMatrix,c=n.length;let l,u=Se;for(let e=0;e<c;++e)l=n[e],u=b.Z.multiplyByPoint(a,l,u),s.push(t.project(o.cartesianToCartographic(u,Ce)));if(s.length>0){e._boundingVolume2D=i.Z.fromPoints(s,e._boundingVolume2D);const t=e._boundingVolume2D.center;e._boundingVolume2D.center=new r.Z(t.z,t.x,t.y)}return we.positions=s,we.lengths=e._segments.lengths,we},de.prototype.writeUpdate=function(e,t,n,i){const o=this.mode,s=i.ellipsoid.maximumRadius*y.Z.PI;let a=t._actualLength;if(a){e+=this.getPolylineStartIndex(t);let c=xe;const l=6*a*3;!(0,h.Z)(c)||c.length<l?c=xe=new Float32Array(l):c.length>l&&(c=new Float32Array(c.buffer,0,l));const u=this.getSegments(t,i),d=u.positions,f=u.lengths;let p,_=0,g=0,Z=0;a=d.length;for(let e=0;e<a;++e){0===e?t._loop?p=d[a-2]:(p=_e,r.Z.subtract(d[0],d[1],p),r.Z.add(d[0],p,p)):p=d[e-1],r.Z.clone(p,pe),r.Z.clone(d[e],fe),e===a-1?t._loop?p=d[1]:(p=_e,r.Z.subtract(d[a-1],d[a-2],p),r.Z.add(d[a-1],p,p)):p=d[e+1],r.Z.clone(p,me);const n=f[g];e===Z+n&&(Z+=n,++g);const i=e-Z==0,l=e===Z+f[g]-1;o===k.Z.SCENE2D&&(pe.z=0,fe.z=0,me.z=0),o!==k.Z.SCENE2D&&o!==k.Z.MORPHING||(i||l)&&s-Math.abs(fe.x)<1&&((fe.x<0&&pe.x>0||fe.x>0&&pe.x<0)&&r.Z.clone(fe,pe),(fe.x<0&&me.x>0||fe.x>0&&me.x<0)&&r.Z.clone(fe,me));const u=l?2:4;for(let e=i?2:0;e<u;++e)m.Z.writeElements(fe,c,_),m.Z.writeElements(pe,c,_+6),m.Z.writeElements(me,c,_+12),_+=18}n.copyFromArrayView(c,18*Float32Array.BYTES_PER_ELEMENT*e)}};const Ie=X},152127:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(890828),o=n(790087),r=n(35961),s=n(394579),a=n(973384),c=n(234146),l=n(11020),u=n(722313),d=n(765153),h=n(430886),f=n(205522),p=n(708800),m=n(545870),_=n(417148),g=n(497730),Z=n(437530),y=n(609882),b=n(442429),v=n(55248),A=n(49940),T=n(343761);function w(e){const t=(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT)).fragmentShader,n=(0,c.Z)(e.textureScale,1),s=(0,c.Z)(e.pixelFormat,h.Z.RGBA);if(o.Z.typeOf.string("options.fragmentShader",t),o.Z.typeOf.number.greaterThan("options.textureScale",n,0),o.Z.typeOf.number.lessThanOrEquals("options.textureScale",n,1),!h.Z.isColorFormat(s))throw new d.Z("options.pixelFormat must be a color format.");this._fragmentShader=t,this._uniforms=e.uniforms,this._textureScale=n,this._forcePowerOfTwo=(0,c.Z)(e.forcePowerOfTwo,!1),this._sampleMode=(0,c.Z)(e.sampleMode,T.Z.NEAREST),this._pixelFormat=s,this._pixelDatatype=(0,c.Z)(e.pixelDatatype,m.Z.UNSIGNED_BYTE),this._clearColor=(0,c.Z)(e.clearColor,r.Z.BLACK),this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._idTexture=void 0,this._actualUniforms={},this._dirtyUniforms=[],this._texturesToRelease=[],this._texturesToCreate=[],this._texturePromise=void 0;const u=new p.Z;u.scissorTest={enabled:!0,rectangle:(0,l.Z)(e.scissorRectangle)?i.Z.clone(e.scissorRectangle):new i.Z},this._passState=u,this._ready=!1;let f=e.name;(0,l.Z)(f)||(f=(0,a.Z)()),this._name=f,this._logDepthChanged=void 0,this._useLogDepth=void 0,this._selectedIdTexture=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0,this._textureCache=void 0,this._index=void 0,this.enabled=!0,this._enabled=!0}Object.defineProperties(w.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},fragmentShader:{get:function(){return this._fragmentShader}},uniforms:{get:function(){return this._uniforms}},textureScale:{get:function(){return this._textureScale}},forcePowerOfTwo:{get:function(){return this._forcePowerOfTwo}},sampleMode:{get:function(){return this._sampleMode}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},clearColor:{get:function(){return this._clearColor}},scissorRectangle:{get:function(){return this._passState.scissorTest.rectangle}},outputTexture:{get:function(){if((0,l.Z)(this._textureCache)){const e=this._textureCache.getFramebuffer(this._name);if((0,l.Z)(e))return e.getColorTexture(0)}}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}});const E=/uniform\s+sampler2D\s+depthTexture/g;function S(e,t,n){const i=t[n];return("string"==typeof i||i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof ImageData)&&e._dirtyUniforms.push(n),{get:function(){return t[n]},set:function(i){const o=t[n];t[n]=i;const r=e._actualUniforms,s=r[n];(0,l.Z)(s)&&s!==o&&s instanceof y.Z&&!(0,l.Z)(e._textureCache.getStageByName(n))&&(e._texturesToRelease.push(s),delete r[n],delete r[`${n}Dimensions`]),o instanceof y.Z&&e._texturesToRelease.push(o),"string"==typeof i||i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof ImageData?e._dirtyUniforms.push(n):r[n]=i}}}function C(e,t){return function(){const n=e._actualUniforms[t];return"function"==typeof n?n():n}}function x(e,t){return function(){const n=e[t]();if((0,l.Z)(n))return n.dimensions}}function I(e,t){return function(n){e._texturesToCreate.push({name:t,source:n})}}function P(e,t){return function(){return e._textureCache.getOutputTexture(t)}}function D(e){(0,l.Z)(e._command)&&(e._command.shaderProgram=e._command.shaderProgram&&e._command.shaderProgram.destroy(),e._command=void 0),e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy();const t=e._textureCache;if(!(0,l.Z)(t))return;const n=e._uniforms,i=e._actualUniforms;for(const o in i)i.hasOwnProperty(o)&&i[o]instanceof y.Z&&((0,l.Z)(t.getStageByName(n[o]))||i[o].destroy(),e._dirtyUniforms.push(o))}w.prototype._isSupported=function(e){return!E.test(this._fragmentShader)||e.depthTexture},w.prototype.update=function(e,t){if(this.enabled===this._enabled||this.enabled||D(this),this._enabled=this.enabled,!this._enabled)return;if(this._logDepthChanged=t!==this._useLogDepth,this._useLogDepth=t,this._selectedDirty=function(e){let t=(0,l.Z)(e._selected)?e._selected.length:0;const n=(0,l.Z)(e._parentSelected)?e._parentSelected:0;let i=e._selected!==e._selectedShadow||t!==e._selectedLength;if(i=i||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,(0,l.Z)(e._selected)&&(0,l.Z)(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):(0,l.Z)(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!i&&(0,l.Z)(e._combinedSelected)){if(!(0,l.Z)(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(let n=0;n<t;++n)if(e._combinedSelected[n]!==e._combinedSelectedShadow[n])return!0}return i}(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=(0,l.Z)(this._selected)?this._selected.length:0,this._parentSelectedLength=(0,l.Z)(this._parentSelected)?this._parentSelected.length:0,function(e,t){if(!e._selectedDirty)return;e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy(),e._selectedIdTexture=void 0;const n=e._combinedSelected;if(!(0,l.Z)(n))return;let i,o,s=0;const a=n.length;for(i=0;i<a;++i)o=n[i],(0,l.Z)(o.pickIds)?s+=o.pickIds.length:(0,l.Z)(o.pickId)&&++s;if(0===a||0===s){const n=new Uint8Array(4);return n[0]=255,n[1]=255,n[2]=255,n[3]=255,void(e._selectedIdTexture=new y.Z({context:t,pixelFormat:h.Z.RGBA,pixelDatatype:m.Z.UNSIGNED_BYTE,source:{arrayBufferView:n,width:1,height:1},sampler:g.Z.NEAREST}))}let c,u=0;const d=new Uint8Array(4*s);for(i=0;i<a;++i)if(o=n[i],(0,l.Z)(o.pickIds)){const e=o.pickIds,t=e.length;for(let n=0;n<t;++n)c=e[n].color,d[u]=r.Z.floatToByte(c.red),d[u+1]=r.Z.floatToByte(c.green),d[u+2]=r.Z.floatToByte(c.blue),d[u+3]=r.Z.floatToByte(c.alpha),u+=4}else(0,l.Z)(o.pickId)&&(c=o.pickId.color,d[u]=r.Z.floatToByte(c.red),d[u+1]=r.Z.floatToByte(c.green),d[u+2]=r.Z.floatToByte(c.blue),d[u+3]=r.Z.floatToByte(c.alpha),u+=4);e._selectedIdTexture=new y.Z({context:t,pixelFormat:h.Z.RGBA,pixelDatatype:m.Z.UNSIGNED_BYTE,source:{arrayBufferView:d,width:s,height:1},sampler:g.Z.NEAREST})}(this,e),function(e){if((0,l.Z)(e._uniformMap))return;const t={},n={},i=e._uniforms,o=e._actualUniforms;for(const r in i)if(i.hasOwnProperty(r)){"function"!=typeof i[r]?(t[r]=C(e,r),n[r]=S(e,i,r)):(t[r]=i[r],n[r]=i[r]),o[r]=i[r];const s=t[r]();("string"==typeof s||s instanceof y.Z||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement)&&(t[`${r}Dimensions`]=x(t,r))}e._uniforms={},Object.defineProperties(e._uniforms,n),e._uniformMap=(0,s.Z)(t,{colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions},depthTexture:function(){return e._depthTexture},depthTextureDimensions:function(){return e._depthTexture.dimensions},czm_idTexture:function(){return e._idTexture},czm_selectedIdTexture:function(){return e._selectedIdTexture},czm_selectedIdTextureStep:function(){return 1/e._selectedIdTexture.width}})}(this),function(e,t){let n,i,o;const r=e._texturesToRelease;let s=r.length;for(n=0;n<s;++n)i=r[n],i=i&&i.destroy();r.length=0;const a=e._texturesToCreate;for(s=a.length,n=0;n<s;++n){const i=a[n];o=i.name;const r=i.source;e._actualUniforms[o]=new y.Z({context:t,source:r})}a.length=0;const c=e._dirtyUniforms;if(0===c.length&&!(0,l.Z)(e._texturePromise))return void(e._ready=!0);if(0===c.length||(0,l.Z)(e._texturePromise))return;s=c.length;const u=e._uniforms,d=[];for(n=0;n<s;++n){o=c[n];const t=u[o],i=e._textureCache.getStageByName(t);if((0,l.Z)(i))e._actualUniforms[o]=P(e,t);else if("string"==typeof t){const n=new f.Z({url:t});d.push(n.fetchImage().then(I(e,o)))}else e._texturesToCreate.push({name:o,source:t})}c.length=0,d.length>0?(e._ready=!1,e._texturePromise=Promise.all(d).then((function(){e._ready=!0,e._texturePromise=void 0}))):e._ready=!0}(this,e),function(e,t){if((0,l.Z)(e._command)&&!e._logDepthChanged&&!e._selectedDirty)return;let n=e._fragmentShader;if((0,l.Z)(e._selectedIdTexture)){const t=e._selectedIdTexture.width;n=n.replace(/in\s+vec2\s+v_textureCoordinates;/g,""),n=`#define CZM_SELECTED_FEATURE \nuniform sampler2D czm_idTexture; \nuniform sampler2D czm_selectedIdTexture; \nuniform float czm_selectedIdTextureStep; \nin vec2 v_textureCoordinates; \nbool czm_selected(vec2 offset) \n{ \n    bool selected = false;\n    vec4 id = texture(czm_idTexture, v_textureCoordinates + offset); \n    for (int i = 0; i < ${t}; ++i) \n    { \n        vec4 selectedId = texture(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5)); \n        if (all(equal(id, selectedId))) \n        { \n            return true; \n        } \n    } \n    return false; \n} \n\nbool czm_selected() \n{ \n    return czm_selected(vec2(0.0)); \n} \n\n${n}`}const i=new Z.Z({defines:[e._useLogDepth?"LOG_DEPTH":""],sources:[n]});e._command=t.createViewportQuadCommand(i,{uniformMap:e._uniformMap,owner:e})}(this,e),function(e){let t,n;e._sampleMode===T.Z.LINEAR?(t=v.Z.LINEAR,n=b.Z.LINEAR):(t=v.Z.NEAREST,n=b.Z.NEAREST);const i=e._sampler;(0,l.Z)(i)&&i.minificationFilter===t&&i.magnificationFilter===n||(e._sampler=new g.Z({wrapS:A.Z.CLAMP_TO_EDGE,wrapT:A.Z.CLAMP_TO_EDGE,minificationFilter:t,magnificationFilter:n}))}(this),this._selectedDirty=!1,!this._ready)return;const n=this._textureCache.getFramebuffer(this._name);if(this._command.framebuffer=n,!(0,l.Z)(n))return;const o=n.getColorTexture(0);let a;o.width===e.drawingBufferWidth&&o.height===e.drawingBufferHeight||(a=this._renderState,(0,l.Z)(a)&&o.width===a.viewport.width&&o.height===a.viewport.height||(this._renderState=_.Z.fromCache({viewport:new i.Z(0,0,o.width,o.height)}))),this._command.renderState=a},w.prototype.execute=function(e,t,n,i){if(!((0,l.Z)(this._command)&&(0,l.Z)(this._command.framebuffer)&&this._ready&&this._enabled))return;this._colorTexture=t,this._depthTexture=n,this._idTexture=i,g.Z.equals(this._colorTexture.sampler,this._sampler)||(this._colorTexture.sampler=this._sampler);const o=this.scissorRectangle.width>0&&this.scissorRectangle.height>0?this._passState:void 0;(0,l.Z)(o)&&(o.context=e),this._command.execute(e,o)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return D(this),(0,u.Z)(this)};const O=w},998964:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(790087),o=n(11020),r=n(722313),s=n(765153),a=n(430886),c=n(545870),l=n(497730),u=n(609882),d=n(442429),h=n(55248),f=n(49940),p=n(58038),m=n(502144),_=n(108839),g=n(951552);const Z=[];function y(){const e=m.Z.createFXAAStage(),t=m.Z.createAmbientOcclusionStage(),n=m.Z.createBloomStage();this._autoExposureEnabled=!1,this._autoExposure=m.Z.createAutoExposureStage(),this._tonemapping=void 0,this._tonemapper=void 0,this.tonemapper=g.Z.ACES;const i=this._tonemapping;e.enabled=!1,t.enabled=!1,n.enabled=!1,i.enabled=!1;const r=new _.Z(this),s={},a=Z;for(a.push(e,t,n,i);a.length>0;){const e=a.pop();s[e.name]=e,e._textureCache=r;const t=e.length;if((0,o.Z)(t))for(let n=0;n<t;++n)a.push(e.get(n))}this._stages=[],this._activeStages=[],this._previousActiveStages=[],this._randomTexture=void 0;const c=this;t.uniforms.randomTexture=function(){return c._randomTexture},this._ao=t,this._bloom=n,this._fxaa=e,this._aoEnabled=void 0,this._bloomEnabled=void 0,this._tonemappingEnabled=void 0,this._fxaaEnabled=void 0,this._activeStagesChanged=!1,this._stagesRemoved=!1,this._textureCacheDirty=!1,this._stageNames=s,this._textureCache=r}function b(e){if(!e._stagesRemoved)return;e._stagesRemoved=!1;const t=[],n=e._stages,i=n.length;for(let e=0,o=0;e<i;++e){const i=n[e];i&&(i._index=o++,t.push(i))}e._stages=t}function v(e){for(;(0,o.Z)(e.length);)e=e.get(e.length-1);return e.outputTexture}function A(e,t,n,i,r){if((0,o.Z)(e.execute))return void e.execute(t,n,i,r);const s=e.length;let a;if(e.inputPreviousStageTexture)for(A(e.get(0),t,n,i,r),a=1;a<s;++a)A(e.get(a),t,v(e.get(a-1)),i,r);else for(a=0;a<s;++a)A(e.get(a),t,n,i,r)}Object.defineProperties(y.prototype,{ready:{get:function(){let e=!1;const t=this._stages;for(let n=t.length-1;n>=0;--n){const i=t[n];e=e||i.ready&&i.enabled}const n=this._fxaa,i=this._ao,o=this._bloom,r=this._tonemapping;return e=e||n.ready&&n.enabled,e=e||i.ready&&i.enabled,e=e||o.ready&&o.enabled,e=e||r.ready&&r.enabled,e}},fxaa:{get:function(){return this._fxaa}},ambientOcclusion:{get:function(){return this._ao}},bloom:{get:function(){return this._bloom}},length:{get:function(){return b(this),this._stages.length}},outputTexture:{get:function(){const e=this._fxaa;if(e.enabled&&e.ready)return this.getOutputTexture(e.name);const t=this._stages;for(let e=t.length-1;e>=0;--e){const n=t[e];if((0,o.Z)(n)&&n.ready&&n.enabled)return this.getOutputTexture(n.name)}const n=this._tonemapping;if(n.enabled&&n.ready)return this.getOutputTexture(n.name);const i=this._bloom;if(i.enabled&&i.ready)return this.getOutputTexture(i.name);const r=this._ao;return r.enabled&&r.ready?this.getOutputTexture(r.name):void 0}},hasSelected:{get:function(){const e=this._stages.slice();for(;e.length>0;){const t=e.pop();if(!(0,o.Z)(t))continue;if((0,o.Z)(t.selected))return!0;const n=t.length;if((0,o.Z)(n))for(let i=0;i<n;++i)e.push(t.get(i))}return!1}},tonemapper:{get:function(){return this._tonemapper},set:function(e){if(this._tonemapper===e)return;if(!g.Z.validate(e))throw new s.Z("tonemapper was set to an invalid value.");(0,o.Z)(this._tonemapping)&&(delete this._stageNames[this._tonemapping.name],this._tonemapping.destroy());const t=this._autoExposureEnabled;let n;switch(e){case g.Z.REINHARD:n=m.Z.createReinhardTonemappingStage(t);break;case g.Z.MODIFIED_REINHARD:n=m.Z.createModifiedReinhardTonemappingStage(t);break;case g.Z.FILMIC:n=m.Z.createFilmicTonemappingStage(t);break;default:n=m.Z.createAcesTonemappingStage(t)}if(t){const e=this._autoExposure;n.uniforms.autoExposure=function(){return e.outputTexture}}this._tonemapper=e,this._tonemapping=n,(0,o.Z)(this._stageNames)&&(this._stageNames[n.name]=n,n._textureCache=this._textureCache),this._textureCacheDirty=!0}}}),y.prototype.add=function(e){i.Z.typeOf.object("stage",e);const t=this._stageNames,n=Z;for(n.push(e);n.length>0;){const e=n.pop();if((0,o.Z)(t[e.name]))throw new s.Z(`${e.name} has already been added to the collection or does not have a unique name.`);t[e.name]=e,e._textureCache=this._textureCache;const i=e.length;if((0,o.Z)(i))for(let t=0;t<i;++t)n.push(e.get(t))}const r=this._stages;return e._index=r.length,r.push(e),this._textureCacheDirty=!0,e},y.prototype.remove=function(e){if(!this.contains(e))return!1;const t=this._stageNames,n=Z;for(n.push(e);n.length>0;){const e=n.pop();delete t[e.name];const i=e.length;if((0,o.Z)(i))for(let t=0;t<i;++t)n.push(e.get(t))}return this._stages[e._index]=void 0,this._stagesRemoved=!0,this._textureCacheDirty=!0,e._index=void 0,e._textureCache=void 0,e.destroy(),!0},y.prototype.contains=function(e){return(0,o.Z)(e)&&(0,o.Z)(e._index)&&e._textureCache===this._textureCache},y.prototype.get=function(e){b(this);const t=this._stages,n=t.length;return i.Z.typeOf.number.greaterThanOrEquals("stages length",n,0),i.Z.typeOf.number.greaterThanOrEquals("index",e,0),i.Z.typeOf.number.lessThan("index",e,n),t[e]},y.prototype.removeAll=function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)this.remove(e[n]);e.length=0},y.prototype.getStageByName=function(e){return this._stageNames[e]},y.prototype.update=function(e,t,n){b(this);const i=this._activeStages,r=this._activeStages=this._previousActiveStages;this._previousActiveStages=i;const s=this._stages;let p,m,_=r.length=s.length,g=0;for(p=0;p<_;++p)m=s[p],m.ready&&m.enabled&&m._isSupported(e)&&(r[g++]=m);r.length=g;let Z=g!==i.length;if(!Z)for(p=0;p<g;++p)if(r[p]!==i[p]){Z=!0;break}const y=this._ao,v=this._bloom,A=this._autoExposure,T=this._tonemapping,w=this._fxaa;T.enabled=n;const E=y.enabled&&y._isSupported(e),S=v.enabled&&v._isSupported(e),C=T.enabled&&T._isSupported(e),x=w.enabled&&w._isSupported(e);if((Z||this._textureCacheDirty||E!==this._aoEnabled||S!==this._bloomEnabled||C!==this._tonemappingEnabled||x!==this._fxaaEnabled)&&(this._textureCache.updateDependencies(),this._aoEnabled=E,this._bloomEnabled=S,this._tonemappingEnabled=C,this._fxaaEnabled=x,this._textureCacheDirty=!1),(0,o.Z)(this._randomTexture)&&!E&&(this._randomTexture.destroy(),this._randomTexture=void 0),!(0,o.Z)(this._randomTexture)&&E){_=196608;const t=new Uint8Array(_);for(p=0;p<_;p+=3)t[p]=Math.floor(255*Math.random());this._randomTexture=new u.Z({context:e,pixelFormat:a.Z.RGB,pixelDatatype:c.Z.UNSIGNED_BYTE,source:{arrayBufferView:t,width:256,height:256},sampler:new l.Z({wrapS:f.Z.REPEAT,wrapT:f.Z.REPEAT,minificationFilter:h.Z.NEAREST,magnificationFilter:d.Z.NEAREST})})}for(this._textureCache.update(e),w.update(e,t),y.update(e,t),v.update(e,t),T.update(e,t),this._autoExposureEnabled&&A.update(e,t),_=s.length,p=0;p<_;++p)s[p].update(e,t);for(g=0,p=0;p<_;++p)m=s[p],m.ready&&m.enabled&&m._isSupported(e)&&g++;Z=g!==r.length,Z&&this.update(e,t,n)},y.prototype.clear=function(e){this._textureCache.clear(e),this._autoExposureEnabled&&this._autoExposure.clear(e)},y.prototype.getOutputTexture=function(e){const t=this.getStageByName(e);if((0,o.Z)(t))return v(t)},y.prototype.execute=function(e,t,n,i){const o=this._activeStages,r=o.length,s=this._fxaa,a=this._ao,c=this._bloom,l=this._autoExposure,u=this._tonemapping,d=a.enabled&&a._isSupported(e),h=c.enabled&&c._isSupported(e),f=this._autoExposureEnabled,p=u.enabled&&u._isSupported(e),m=s.enabled&&s._isSupported(e);if(!(m||d||h||p||0!==r))return;let _=t;d&&a.ready&&(A(a,e,_,n,i),_=v(a)),h&&c.ready&&(A(c,e,_,n,i),_=v(c)),f&&l.ready&&A(l,e,_,n,i),p&&u.ready&&(A(u,e,_,n,i),_=v(u));let g=_;if(r>0){A(o[0],e,_,n,i);for(let t=1;t<r;++t)A(o[t],e,v(o[t-1]),n,i);g=v(o[r-1])}m&&s.ready&&A(s,e,g,n,i)},y.prototype.copy=function(e,t){if(!(0,o.Z)(this._copyColorCommand)){const t=this;this._copyColorCommand=e.createViewportQuadCommand(p.Z,{uniformMap:{colorTexture:function(){return t.outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){return this._fxaa.destroy(),this._ao.destroy(),this._bloom.destroy(),this._autoExposure.destroy(),this._tonemapping.destroy(),this.removeAll(),this._textureCache=this._textureCache&&this._textureCache.destroy(),(0,r.Z)(this)};const T=y},121853:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(790087),o=n(973384),r=n(234146),s=n(11020),a=n(722313);function c(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),i.Z.defined("options.stages",e.stages),i.Z.typeOf.number.greaterThan("options.stages.length",e.stages.length,0),this._stages=e.stages,this._inputPreviousStageTexture=(0,r.Z)(e.inputPreviousStageTexture,!0);let t=e.name;(0,s.Z)(t)||(t=(0,o.Z)()),this._name=t,this._uniforms=e.uniforms,this._textureCache=void 0,this._index=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0}Object.defineProperties(c.prototype,{ready:{get:function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)if(!e[n].ready)return!1;return!0}},name:{get:function(){return this._name}},enabled:{get:function(){return this._stages[0].enabled},set:function(e){const t=this._stages,n=t.length;for(let i=0;i<n;++i)t[i].enabled=e}},uniforms:{get:function(){return this._uniforms}},inputPreviousStageTexture:{get:function(){return this._inputPreviousStageTexture}},length:{get:function(){return this._stages.length}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}}),c.prototype._isSupported=function(e){const t=this._stages,n=t.length;for(let i=0;i<n;++i)if(!t[i]._isSupported(e))return!1;return!0},c.prototype.get=function(e){return i.Z.typeOf.number.greaterThanOrEquals("index",e,0),i.Z.typeOf.number.lessThan("index",e,this.length),this._stages[e]},c.prototype.update=function(e,t){this._selectedDirty=function(e){let t=(0,s.Z)(e._selected)?e._selected.length:0;const n=(0,s.Z)(e._parentSelected)?e._parentSelected:0;let i=e._selected!==e._selectedShadow||t!==e._selectedLength;if(i=i||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,(0,s.Z)(e._selected)&&(0,s.Z)(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):(0,s.Z)(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!i&&(0,s.Z)(e._combinedSelected)){if(!(0,s.Z)(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(let n=0;n<t;++n)if(e._combinedSelected[n]!==e._combinedSelectedShadow[n])return!0}return i}(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=(0,s.Z)(this._selected)?this._selected.length:0,this._parentSelectedLength=(0,s.Z)(this._parentSelected)?this._parentSelected.length:0;const n=this._stages,i=n.length;for(let o=0;o<i;++o){const i=n[o];this._selectedDirty&&(i.parentSelected=this._combinedSelected),i.update(e,t)}},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,a.Z)(this)};const l=c},502144:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var i=n(949225),o=n(35961),r=n(973384),s=n(11020),a=n(63354),c=n(877640),l=n(520193),u=n(228434),d=n(251186),h=n(709932),f=n(380337),p=n(102625),m=n(838744),_=n(280900),g=n(958154),Z=n(874096),y=n(462864),b=n(471159),v=n(770297),A=n(730264),T=n(639164),w=n(783775),E=n(938178),S=n(705665),C=n(79816),x=n(152127),I=n(121853),P=n(343761);const D={};function O(e){const t=`#define USE_STEP_SIZE\n${b.Z}`,n=new x.Z({name:`${e}_x_direction`,fragmentShader:t,uniforms:{delta:1,sigma:2,stepSize:1,direction:0},sampleMode:P.Z.LINEAR}),i=new x.Z({name:`${e}_y_direction`,fragmentShader:t,uniforms:{delta:1,sigma:2,stepSize:1,direction:1},sampleMode:P.Z.LINEAR}),o={};return Object.defineProperties(o,{delta:{get:function(){return n.uniforms.delta},set:function(e){const t=n.uniforms,o=i.uniforms;t.delta=o.delta=e}},sigma:{get:function(){return n.uniforms.sigma},set:function(e){const t=n.uniforms,o=i.uniforms;t.sigma=o.sigma=e}},stepSize:{get:function(){return n.uniforms.stepSize},set:function(e){const t=n.uniforms,o=i.uniforms;t.stepSize=o.stepSize=e}}}),new I.Z({name:e,stages:[n,i],uniforms:o})}D.createBlurStage=function(){return O("czm_blur")},D.createDepthOfFieldStage=function(){const e=O("czm_depth_of_field_blur"),t=new x.Z({name:"czm_depth_of_field_composite",fragmentShader:m.Z,uniforms:{focalDistance:5,blurTexture:e.name}}),n={};return Object.defineProperties(n,{focalDistance:{get:function(){return t.uniforms.focalDistance},set:function(e){t.uniforms.focalDistance=e}},delta:{get:function(){return e.uniforms.delta},set:function(t){e.uniforms.delta=t}},sigma:{get:function(){return e.uniforms.sigma},set:function(t){e.uniforms.sigma=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}}}),new I.Z({name:"czm_depth_of_field",stages:[e,t],inputPreviousStageTexture:!1,uniforms:n})},D.isDepthOfFieldSupported=function(e){return e.context.depthTexture},D.createEdgeDetectionStage=function(){const e=(0,r.Z)();return new x.Z({name:`czm_edge_detection_${e}`,fragmentShader:g.Z,uniforms:{length:.25,color:o.Z.clone(o.Z.BLACK)}})},D.isEdgeDetectionSupported=function(e){return e.context.depthTexture},D.createSilhouetteStage=function(e){const t=function(e){if(!(0,s.Z)(e))return D.createEdgeDetectionStage();const t=new I.Z({name:"czm_edge_detection_multiple",stages:e,inputPreviousStageTexture:!1}),n={};let i="",o="";for(let t=0;t<e.length;++t)i+=`uniform sampler2D edgeTexture${t}; \n`,o+=`        vec4 edge${t} = texture(edgeTexture${t}, v_textureCoordinates); \n        if (edge${t}.a > 0.0) \n        { \n            color = edge${t}; \n            break; \n        } \n`,n[`edgeTexture${t}`]=e[t].name;const r=`${i}in vec2 v_textureCoordinates; \nvoid main() { \n    vec4 color = vec4(0.0); \n    for (int i = 0; i < ${e.length}; i++) \n    { \n${o}    } \n    out_FragColor = color; \n} \n`,a=new x.Z({name:"czm_edge_detection_combine",fragmentShader:r,uniforms:n});return new I.Z({name:"czm_edge_detection_composite",stages:[t,a]})}(e),n=new x.Z({name:"czm_silhouette_color_edges",fragmentShader:E.Z,uniforms:{silhouetteTexture:t.name}});return new I.Z({name:"czm_silhouette",stages:[t,n],inputPreviousStageTexture:!1,uniforms:t.uniforms})},D.isSilhouetteSupported=function(e){return e.context.depthTexture},D.createBloomStage=function(){const e=new x.Z({name:"czm_bloom_contrast_bias",fragmentShader:p.Z,uniforms:{contrast:128,brightness:-.3}}),t=O("czm_bloom_blur"),n=new I.Z({name:"czm_bloom_contrast_bias_blur",stages:[e,t]}),i=new x.Z({name:"czm_bloom_generate_composite",fragmentShader:h.Z,uniforms:{glowOnly:!1,bloomTexture:n.name}}),o={};return Object.defineProperties(o,{glowOnly:{get:function(){return i.uniforms.glowOnly},set:function(e){i.uniforms.glowOnly=e}},contrast:{get:function(){return e.uniforms.contrast},set:function(t){e.uniforms.contrast=t}},brightness:{get:function(){return e.uniforms.brightness},set:function(t){e.uniforms.brightness=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},stepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}}}),new I.Z({name:"czm_bloom",stages:[n,i],inputPreviousStageTexture:!1,uniforms:o})},D.createAmbientOcclusionStage=function(){const e=new x.Z({name:"czm_ambient_occlusion_generate",fragmentShader:l.Z,uniforms:{intensity:3,bias:.1,lengthCap:.26,stepSize:1.95,frustumLength:1e3,randomTexture:void 0}}),t=O("czm_ambient_occlusion_blur");t.uniforms.stepSize=.86;const n=new I.Z({name:"czm_ambient_occlusion_generate_blur",stages:[e,t]}),i=new x.Z({name:"czm_ambient_occlusion_composite",fragmentShader:u.Z,uniforms:{ambientOcclusionOnly:!1,ambientOcclusionTexture:n.name}}),o={};return Object.defineProperties(o,{intensity:{get:function(){return e.uniforms.intensity},set:function(t){e.uniforms.intensity=t}},bias:{get:function(){return e.uniforms.bias},set:function(t){e.uniforms.bias=t}},lengthCap:{get:function(){return e.uniforms.lengthCap},set:function(t){e.uniforms.lengthCap=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}},frustumLength:{get:function(){return e.uniforms.frustumLength},set:function(t){e.uniforms.frustumLength=t}},randomTexture:{get:function(){return e.uniforms.randomTexture},set:function(t){e.uniforms.randomTexture=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},blurStepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}},ambientOcclusionOnly:{get:function(){return i.uniforms.ambientOcclusionOnly},set:function(e){i.uniforms.ambientOcclusionOnly=e}}}),new I.Z({name:"czm_ambient_occlusion",stages:[n,i],inputPreviousStageTexture:!1,uniforms:o})},D.isAmbientOcclusionSupported=function(e){return e.context.depthTexture};const L=`#define FXAA_QUALITY_PRESET 39 \n${S.Z}\n${y.Z}`;D.createFXAAStage=function(){return new x.Z({name:"czm_FXAA",fragmentShader:L,sampleMode:P.Z.LINEAR})},D.createAcesTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=c.Z,new x.Z({name:"czm_aces",fragmentShader:t,uniforms:{autoExposure:void 0}})},D.createFilmicTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=Z.Z,new x.Z({name:"czm_filmic",fragmentShader:t,uniforms:{autoExposure:void 0}})},D.createReinhardTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=w.Z,new x.Z({name:"czm_reinhard",fragmentShader:t,uniforms:{autoExposure:void 0}})},D.createModifiedReinhardTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=A.Z,new x.Z({name:"czm_modified_reinhard",fragmentShader:t,uniforms:{white:o.Z.WHITE,autoExposure:void 0}})},D.createAutoExposureStage=function(){return new C.Z},D.createBlackAndWhiteStage=function(){return new x.Z({name:"czm_black_and_white",fragmentShader:d.Z,uniforms:{gradations:5}})},D.createBrightnessStage=function(){return new x.Z({name:"czm_brightness",fragmentShader:f.Z,uniforms:{brightness:.5}})},D.createNightVisionStage=function(){return new x.Z({name:"czm_night_vision",fragmentShader:T.Z})},D.createDepthViewStage=function(){return new x.Z({name:"czm_depth_view",fragmentShader:_.Z})},D.createLensFlareStage=function(){return new x.Z({name:"czm_lens_flare",fragmentShader:v.Z,uniforms:{dirtTexture:(0,i.Z)("Assets/Textures/LensFlare/DirtMask.jpg"),starTexture:(0,i.Z)("Assets/Textures/LensFlare/StarBurst.jpg"),intensity:2,distortion:10,ghostDispersal:.4,haloWidth:.4,dirtAmount:.4,earthRadius:a.Z.WGS84.maximumRadius}})};const N=D},343761:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={NEAREST:0,LINEAR:1}},108839:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(35961),o=n(11020),r=n(722313),s=n(344485),a=n(598020),c=n(12503);function l(e){this._collection=e,this._framebuffers=[],this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0,this._updateDependencies=!1}function u(e){for(;(0,o.Z)(e.length);)e=e.get(e.length-1);return e.name}function d(e,t,n,i,r){if(!i.enabled||!i._isSupported(t))return r;const s=n[i.name]={};(0,o.Z)(r)&&(s[u(e.getStageByName(r))]=!0);const a=i.uniforms;if((0,o.Z)(a)){const t=Object.getOwnPropertyNames(a),n=t.length;for(let i=0;i<n;++i){const n=a[t[i]];if("string"==typeof n){const t=e.getStageByName(n);(0,o.Z)(t)&&(s[u(t)]=!0)}}}return i.name}function h(e,t,n,i,r){if((0,o.Z)(i.enabled)&&!i.enabled||(0,o.Z)(i._isSupported)&&!i._isSupported(t))return r;const s=r,a=!(0,o.Z)(i.inputPreviousStageTexture)||i.inputPreviousStageTexture;let c=r;const l=i.length;for(let s=0;s<l;++s){const l=i.get(s);c=(0,o.Z)(l.length)?h(e,t,n,l,r):d(e,t,n,l,r),a&&(r=c)}let f,p;if(a)for(f=1;f<l;++f)p=u(i.get(f)),(0,o.Z)(n[p])||(n[p]={}),n[p][s]=!0;else for(f=1;f<l;++f){p=u(i.get(f));const e=n[p];for(let t=0;t<f;++t)e[u(i.get(t))]=!0}return c}function f(e,t,n){const r=e._collection.getStageByName(t),s=r._textureScale,a=r._forcePowerOfTwo,l=r._pixelFormat,u=r._pixelDatatype,d=r._clearColor;let h,f;const p=e._framebuffers,m=p.length;for(h=0;h<m;++h){if(f=p[h],s!==f.textureScale||a!==f.forcePowerOfTwo||l!==f.pixelFormat||u!==f.pixelDatatype||!i.Z.equals(d,f.clearColor))continue;const e=f.stages,t=e.length;let o=!1;for(let i=0;i<t;++i)if(n[e[i]]){o=!0;break}if(!o)break}return(0,o.Z)(f)&&h<m?(f.stages.push(t),f):(f={textureScale:s,forcePowerOfTwo:a,pixelFormat:l,pixelDatatype:u,clearColor:d,stages:[t],buffer:new c.Z({pixelFormat:l,pixelDatatype:u}),clear:void 0},p.push(f),f)}function p(e){const t=e._framebuffers,n=t.length;for(let e=0;e<n;++e)t[e].buffer.destroy()}l.prototype.updateDependencies=function(){this._updateDependencies=!0},l.prototype.update=function(e){const t=this._collection,n=this._updateDependencies,i=(0,o.Z)(t.ambientOcclusion)&&t.ambientOcclusion.enabled&&t.ambientOcclusion._isSupported(e),r=(0,o.Z)(t.bloom)&&t.bloom.enabled&&t.bloom._isSupported(e),c=(0,o.Z)(t._tonemapping)&&t._tonemapping.enabled&&t._tonemapping._isSupported(e),l=(0,o.Z)(t.fxaa)&&t.fxaa.enabled&&t.fxaa._isSupported(e),u=!(0,o.Z)(t._activeStages)||t._activeStages.length>0||i||r||c||l;if((n||!u&&this._framebuffers.length>0)&&(p(this),this._framebuffers.length=0,this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0),!n&&!u)return;0===this._framebuffers.length&&function(e,t){const n=function(e,t){const n={};if((0,o.Z)(e.ambientOcclusion)){const i=e.ambientOcclusion,o=e.bloom,r=e._tonemapping,s=e.fxaa;let a=h(e,t,n,i,void 0);a=h(e,t,n,o,a),a=d(e,t,n,r,a),a=h(e,t,n,e,a),d(e,t,n,s,a)}else h(e,t,n,e,void 0);return n}(e._collection,t);for(const t in n)n.hasOwnProperty(t)&&(e._stageNameToFramebuffer[t]=f(e,t,n[t]))}(this,e);const m=e.drawingBufferWidth,_=e.drawingBufferHeight,g=this._width!==m||this._height!==_;(n||g)&&(this._width=m,this._height=_,this._updateDependencies=!1,p(this),function(e,t){const n=e._width,i=e._height,o=e._framebuffers,r=o.length;for(let e=0;e<r;++e){const r=o[e],c=r.textureScale;let l=Math.ceil(n*c),u=Math.ceil(i*c),d=Math.min(l,u);r.forcePowerOfTwo&&(s.Z.isPowerOfTwo(d)||(d=s.Z.nextPowerOfTwo(d)),l=d,u=d),r.buffer.update(t,l,u),r.clear=new a.Z({color:r.clearColor,framebuffer:r.buffer.framebuffer})}}(this,e))},l.prototype.clear=function(e){const t=this._framebuffers;for(let n=0;n<t.length;++n)t[n].clear.execute(e)},l.prototype.getStageByName=function(e){return this._collection.getStageByName(e)},l.prototype.getOutputTexture=function(e){return this._collection.getOutputTexture(e)},l.prototype.getFramebuffer=function(e){const t=this._stageNameToFramebuffer[e];if((0,o.Z)(t))return t.buffer.framebuffer},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return p(this),(0,r.Z)(this)};const m=l},883900:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(973384),o=n(234146),r=n(11020),s=n(722313),a=n(765153);function c(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this._primitives=[],this._guid=(0,i.Z)(),this._zIndex=void 0,this.show=(0,o.Z)(e.show,!0),this.destroyPrimitives=(0,o.Z)(e.destroyPrimitives,!0)}function l(e,t){if(!e.contains(t))throw new a.Z("primitive is not in this collection.");return e._primitives.indexOf(t)}Object.defineProperties(c.prototype,{length:{get:function(){return this._primitives.length}}}),c.prototype.add=function(e,t){const n=(0,r.Z)(t);if(!(0,r.Z)(e))throw new a.Z("primitive is required.");if(n){if(t<0)throw new a.Z("index must be greater than or equal to zero.");if(t>this._primitives.length)throw new a.Z("index must be less than or equal to the number of primitives.")}const i=e._external=e._external||{};return(i._composites=i._composites||{})[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),e},c.prototype.remove=function(e){if(this.contains(e)){const t=this._primitives.indexOf(e);if(-1!==t)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),!0}return!1},c.prototype.removeAndDestroy=function(e){const t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},c.prototype.removeAll=function(){const e=this._primitives,t=e.length;for(let n=0;n<t;++n)delete e[n]._external._composites[this._guid],this.destroyPrimitives&&e[n].destroy();this._primitives=[]},c.prototype.contains=function(e){return!!((0,r.Z)(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},c.prototype.raise=function(e){if((0,r.Z)(e)){const t=l(this,e),n=this._primitives;if(t!==n.length-1){const e=n[t];n[t]=n[t+1],n[t+1]=e}}},c.prototype.raiseToTop=function(e){if((0,r.Z)(e)){const t=l(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}},c.prototype.lower=function(e){if((0,r.Z)(e)){const t=l(this,e),n=this._primitives;if(0!==t){const e=n[t];n[t]=n[t-1],n[t-1]=e}}},c.prototype.lowerToBottom=function(e){if((0,r.Z)(e)){const t=l(this,e),n=this._primitives;0!==t&&(n.splice(t,1),n.unshift(e))}},c.prototype.get=function(e){if(!(0,r.Z)(e))throw new a.Z("index is required.");return this._primitives[e]},c.prototype.update=function(e){if(!this.show)return;const t=this._primitives;for(let n=0;n<t.length;++n)t[n].update(e)},c.prototype.prePassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];(0,r.Z)(i.prePassesUpdate)&&i.prePassesUpdate(e)}},c.prototype.updateForPass=function(e,t){const n=this._primitives;for(let i=0;i<n.length;++i){const o=n[i];(0,r.Z)(o.updateForPass)&&o.updateForPass(e,t)}},c.prototype.postPassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];(0,r.Z)(i.postPassesUpdate)&&i.postPassesUpdate(e)}},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(),(0,s.Z)(this)};const u=c},831970:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(790087),o=n(449809),r=n(11020),s=n(342209),a=n(379593),c=n(915323),l=n(388402),u=n(583982),d=n(669873);function h(e){i.Z.typeOf.object("attribute",e),this.attribute=e,this.loadBuffer=!1,this.loadTypedArray=!1}function f(e){i.Z.typeOf.object("primitive",e),this.primitive=e,this.attributePlans=[],this.indicesPlan=void 0,this.needsOutlines=!1,this.outlineIndices=void 0}f.prototype.postProcess=function(e){this.needsOutlines&&(function(e){const t=e.primitive,n=t.indices,i=t.attributes[0].count,r=new d.Z({triangleIndices:n.typedArray,outlineIndices:e.outlineIndices,originalVertexCount:i});n.typedArray=r.updatedTriangleIndices,n.indexDatatype=s.Z.fromTypedArray(n.typedArray);const a=new h(function(e){const t=new u.Z.Attribute;return t.name="_OUTLINE_COORDINATES",t.typedArray=e,t.componentDatatype=o.Z.FLOAT,t.type=l.Z.VEC3,t.normalized=!1,t.count=e.length/3,t}(r.outlineCoordinates));a.loadBuffer=!0,a.loadTypedArray=!1,e.attributePlans.push(a),t.outlineCoordinates=a.attribute;const c=e.attributePlans,f=e.attributePlans.length;for(let e=0;e<f;e++){const t=c[e].attribute;t.typedArray=r.updateAttribute(t.typedArray)}}(this),function(e,t){(function(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i],o=n.attribute,r=o.typedArray;if(n.loadBuffer){const e=a.Z.createVertexBuffer({typedArray:r,context:t,usage:c.Z.STATIC_DRAW});e.vertexArrayDestroyable=!1,o.buffer=e}n.loadTypedArray||(o.typedArray=void 0)}})(e.attributePlans,t),(0,r.Z)(e.indicesPlan)&&function(e,t){const n=e.indices;if(e.loadBuffer){const e=a.Z.createIndexBuffer({typedArray:n.typedArray,context:t,usage:c.Z.STATIC_DRAW,indexDatatype:n.indexDatatype});n.buffer=e,e.vertexArrayDestroyable=!1}e.loadTypedArray||(n.typedArray=void 0)}(e.indicesPlan,t)}(this,e))},f.AttributeLoadPlan=h,f.IndicesLoadPlan=function(e){i.Z.typeOf.object("indices",e),this.indices=e,this.loadBuffer=!1,this.loadTypedArray=!1};const p=f},557073:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(234146),r=n(11020),s=n(845449);function a(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).propertyAttribute,n=e.class;i.Z.typeOf.object("options.propertyAttribute",t),i.Z.typeOf.object("options.class",n);const a={};if((0,r.Z)(t.properties))for(const e in t.properties)t.properties.hasOwnProperty(e)&&(a[e]=new s.Z({property:t.properties[e],classProperty:n.properties[e]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=a,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(a.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.getProperty=function(e){return i.Z.typeOf.string("propertyId",e),this._properties[e]};const c=a},845449:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(234146),r=n(11020);function s(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).property,n=e.classProperty;i.Z.typeOf.object("options.property",t),i.Z.typeOf.object("options.classProperty",n),this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let s=t.offset,a=t.scale;const c=n.hasValueTransform||(0,r.Z)(s)||(0,r.Z)(a);s=(0,o.Z)(s,n.offset),a=(0,o.Z)(a,n.scale),s=n.unpackVectorAndMatrixTypes(s),a=n.unpackVectorAndMatrixTypes(a),this._offset=s,this._scale=a,this._hasValueTransform=c,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(s.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const a=s},600959:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(234146),r=n(765153),s=n(11020),a=n(788844);function c(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),i.Z.typeOf.number("options.count",e.count),this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(c.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if((0,s.Z)(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return(0,s.Z)(this._metadataTable)&&(e+=this._metadataTable.byteLength),(0,s.Z)(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}}),c.prototype.hasProperty=function(e,t){return i.Z.typeOf.number("index",e),i.Z.typeOf.string("propertyId",t),!(!(0,s.Z)(this._metadataTable)||!this._metadataTable.hasProperty(t))||!(!(0,s.Z)(this._batchTableHierarchy)||!this._batchTableHierarchy.hasProperty(e,t))||!(!(0,s.Z)(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(t))},c.prototype.hasPropertyBySemantic=function(e,t){return i.Z.typeOf.number("index",e),i.Z.typeOf.string("semantic",t),!!(0,s.Z)(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(t)},c.prototype.propertyExists=function(e){return i.Z.typeOf.string("propertyId",e),!(!(0,s.Z)(this._metadataTable)||!this._metadataTable.hasProperty(e))||!(!(0,s.Z)(this._batchTableHierarchy)||!this._batchTableHierarchy.propertyExists(e))||!(!(0,s.Z)(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(e))},c.prototype.propertyExistsBySemantic=function(e){return i.Z.typeOf.string("semantic",e),!!(0,s.Z)(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(e)};const l=[];function u(e,t){if(!(0,s.Z)(e)||e<0||e>=t)throw new r.Z(`featureId is required and must be between zero and featuresLength - 1 (${t}`-NaN)}c.prototype.getPropertyIds=function(e,t){return(t=(0,s.Z)(t)?t:[]).length=0,(0,s.Z)(this._metadataTable)&&t.push.apply(t,this._metadataTable.getPropertyIds(l)),(0,s.Z)(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,l)),(0,s.Z)(this._jsonMetadataTable)&&t.push.apply(t,this._jsonMetadataTable.getPropertyIds(l)),t},c.prototype.getProperty=function(e,t){let n;return(0,s.Z)(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),(0,s.Z)(n))||(0,s.Z)(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),(0,s.Z)(n))||(0,s.Z)(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),(0,s.Z)(n))?n:void 0},c.prototype.setProperty=function(e,t,n){(0,s.Z)(this._metadataTable)&&this._metadataTable.setProperty(e,t,n)||(0,s.Z)(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n)||((0,s.Z)(this._jsonMetadataTable)||(this._jsonMetadataTable=new a.Z({count:this._count,properties:{}})),this._jsonMetadataTable.setProperty(e,t,n))},c.prototype.getPropertyBySemantic=function(e,t){if((0,s.Z)(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)},c.prototype.setPropertyBySemantic=function(e,t,n){return!!(0,s.Z)(this._metadataTable)&&this._metadataTable.setPropertyBySemantic(e,t,n)},c.prototype.getPropertyTypedArray=function(e){if(i.Z.typeOf.string("propertyId",e),(0,s.Z)(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)},c.prototype.getPropertyTypedArrayBySemantic=function(e){if(i.Z.typeOf.string("semantic",e),(0,s.Z)(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)},c.prototype.isClass=function(e,t){u(e,this.count),i.Z.typeOf.string("className",t);const n=this._batchTableHierarchy;return!!(0,s.Z)(n)&&n.isClass(e,t)},c.prototype.isExactClass=function(e,t){return u(e,this.count),i.Z.typeOf.string("className",t),this.getExactClassName(e)===t},c.prototype.getExactClassName=function(e){u(e,this.count);const t=this._batchTableHierarchy;if((0,s.Z)(t))return t.getClassName(e)};const d=c},870320:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(234146),r=n(11020),s=n(642898);function a(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).propertyTexture,n=e.class,a=e.textures;i.Z.typeOf.object("options.propertyTexture",t),i.Z.typeOf.object("options.class",n),i.Z.typeOf.object("options.textures",a);const c=t.extensions,l=t.extras,u={};if((0,r.Z)(t.properties))for(const e in t.properties)t.properties.hasOwnProperty(e)&&(u[e]=new s.Z({property:t.properties[e],classProperty:n.properties[e],textures:a}));this._name=e.name,this._id=e.id,this._class=n,this._properties=u,this._extras=l,this._extensions=c}Object.defineProperties(a.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.getProperty=function(e){return i.Z.typeOf.string("propertyId",e),this._properties[e]};const c=a},642898:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(790087),o=n(234146),r=n(11020),s=n(822518),a=n(784246),c=n(832670);function l(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).property,n=e.classProperty,a=e.textures;i.Z.typeOf.object("options.property",t),i.Z.typeOf.object("options.classProperty",n),i.Z.typeOf.object("options.textures",a);const c=(0,r.Z)(t.channels)?t.channels:[0],l=t,u=s.Z.createModelTextureReader({textureInfo:l,channels:h(c),texture:a[l.index]});this._min=t.min,this._max=t.max;let d=t.offset,f=t.scale;const p=n.hasValueTransform||(0,r.Z)(d)||(0,r.Z)(f);d=(0,o.Z)(d,n.offset),f=(0,o.Z)(f,n.scale),d=n.unpackVectorAndMatrixTypes(d),f=n.unpackVectorAndMatrixTypes(f),this._offset=d,this._scale=f,this._hasValueTransform=p,this._textureReader=u,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(l.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),l.prototype.isGpuCompatible=function(){const e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?!e.isVariableLengthArray&&e.arrayLength<=4&&t===a.Z.SCALAR&&n===c.Z.UINT8:!(!a.Z.isVectorType(t)&&t!==a.Z.SCALAR)&&n===c.Z.UINT8};const u=[void 0,"float","vec2","vec3","vec4"],d=[void 0,"int","ivec2","ivec3","ivec4"];function h(e){return e.map((function(e){return"rgba".charAt(e)})).join("")}l.prototype.getGlslType=function(){const e=this._classProperty;let t=a.Z.getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?u[t]:d[t]},l.prototype.unpackInShader=function(e){return this._classProperty.normalized?e:`${this.getGlslType()}(255.0 * ${e})`};const f=l},990735:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(660904),o=n(615651);function r(e){this._ellipsoid=new o.Z(e.ellipsoid,i.Z.ZERO)}Object.defineProperties(r.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});const s=r},640365:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var i=n(660904),o=n(532056),r=n(234146),s=n(11020),a=n(765153),c=n(282910),l=n(732292),u=n(344485),d=n(659635),h=n(223689),f=n(299594),p=n(638601),m=n(143450),_=n(140874),g=n(990735),Z=n(145615),y=n(715372),b=n(714233),v=n(403391),A=n(565760);function T(e){if(!(0,s.Z)(e)||!(0,s.Z)(e.tileProvider))throw new a.Z("options.tileProvider is required.");if((0,s.Z)(e.tileProvider.quadtree))throw new a.Z("A QuadtreeTileProvider can only be used with a single QuadtreePrimitive");this._tileProvider=e.tileProvider,this._tileProvider.quadtree=this,this._debug={enableDebugOutput:!1,maxDepth:0,maxDepthVisited:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastMaxDepthVisited:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:!1};const t=this._tileProvider.tilingScheme.ellipsoid;this._tilesToRender=[],this._tileLoadQueueHigh=[],this._tileLoadQueueMedium=[],this._tileLoadQueueLow=[],this._tileReplacementQueue=new v.Z,this._levelZeroTiles=void 0,this._loadQueueTimeSlice=5,this._tilesInvalidated=!1,this._addHeightCallbacks=[],this._removeHeightCallbacks=[],this._tileToUpdateHeights=[],this._lastTileIndex=0,this._updateHeightsTimeSlice=2,this._cameraPositionCartographic=void 0,this._cameraReferenceFrameOriginCartographic=void 0,this.maximumScreenSpaceError=(0,r.Z)(e.maximumScreenSpaceError,2),this.tileCacheSize=(0,r.Z)(e.tileCacheSize,100),this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this._occluders=new g.Z({ellipsoid:t}),this._tileLoadProgressEvent=new c.Z,this._lastTileLoadQueueLength=0,this._lastSelectionFrameNumber=void 0}function w(e){const t=e._debug;t.maxDepth=0,t.maxDepthVisited=0,t.tilesVisited=0,t.tilesCulled=0,t.tilesRendered=0,t.tilesWaitingForChildren=0,e._tileLoadQueueHigh.length=0,e._tileLoadQueueMedium.length=0,e._tileLoadQueueLow.length=0}let E;Object.defineProperties(T.prototype,{tileProvider:{get:function(){return this._tileProvider}},tileLoadProgressEvent:{get:function(){return this._tileLoadProgressEvent}},occluders:{get:function(){return this._occluders}}}),T.prototype.invalidateAllTiles=function(){this._tilesInvalidated=!0},T.prototype.forEachLoadedTile=function(e){let t=this._tileReplacementQueue.head;for(;(0,s.Z)(t);)t.state!==y.Z.START&&e(t),t=t.replacementNext},T.prototype.forEachRenderedTile=function(e){const t=this._tilesToRender;for(let n=0,i=t.length;n<i;++n)e(t[n])},T.prototype.updateHeight=function(e,t){const n=this,i={positionOnEllipsoidSurface:void 0,positionCartographic:e,level:-1,callback:t,removeFunc:function(){const e=n._addHeightCallbacks,t=e.length;for(let n=0;n<t;++n)if(e[n]===i){e.splice(n,1);break}n._removeHeightCallbacks.push(i),i.callback&&(i.callback=void 0)}};return n._addHeightCallbacks.push(i),i.removeFunc},T.prototype.update=function(e){(0,s.Z)(this._tileProvider.update)&&this._tileProvider.update(e)},T.prototype.beginFrame=function(e){e.passes.render&&(this._tilesInvalidated&&(function(e){const t=e._tileReplacementQueue;t.head=void 0,t.tail=void 0,t.count=0,w(e);const n=e._levelZeroTiles;if((0,s.Z)(n))for(let t=0;t<n.length;++t){const i=n[t].customData,o=i.length;for(let t=0;t<o;++t){const n=i[t];n.level=0,e._addHeightCallbacks.push(n)}n[t].freeResources()}e._levelZeroTiles=void 0,e._tileProvider.cancelReprojections()}(this),this._tilesInvalidated=!1),this._tileProvider.initialize(e),w(this),this._debug.suspendLodUpdate||this._tileReplacementQueue.markStartOfRenderFrame())},T.prototype.render=function(e){const t=e.passes,n=this._tileProvider;t.render&&(n.beginUpdate(e),function(e,t){const n=e._debug;if(n.suspendLodUpdate)return;let i;e._tilesToRender.length=0;const o=e._tileProvider;if(!(0,s.Z)(e._levelZeroTiles)){if(!o.ready)return;{const t=o.tilingScheme;e._levelZeroTiles=Z.Z.createLevelZeroTiles(t);const n=e._levelZeroTiles.length;if(I.length<n)for(I=new Array(n),i=0;i<n;++i)void 0===I[i]&&(I[i]=new D)}}let r;e._occluders.ellipsoid.cameraPosition=t.camera.positionWC;const a=e._levelZeroTiles,c=a.length>1?e._occluders:void 0;E=t.camera.positionCartographic,a.sort(C);const l=e._addHeightCallbacks,u=e._removeHeightCallbacks,h=t.frameNumber;let f;if(l.length>0||u.length>0){for(i=0,f=a.length;i<f;++i)r=a[i],r._updateCustomData(h,l,u);l.length=0,u.length=0}const p=t.camera;e._cameraPositionCartographic=p.positionCartographic;const m=d.Z.getTranslation(p.transform,x);for(e._cameraReferenceFrameOriginCartographic=e.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(m,e._cameraReferenceFrameOriginCartographic),i=0,f=a.length;i<f;++i)r=a[i],e._tileReplacementQueue.markTileRendered(r),r.renderable?N(e,r,o,t,c,!1,I[i]):(P(e,e._tileLoadQueueHigh,r,t),++n.tilesWaitingForChildren);e._lastSelectionFrameNumber=h}(this,e),function(e,t){const n=e._tileProvider,i=e._tilesToRender;for(let e=0,o=i.length;e<o;++e){const o=i[e];n.showTileThisFrame(o,t)}}(this,e),n.endUpdate(e)),t.pick&&this._tilesToRender.length>0&&n.updateForPick(e)},T.prototype.endFrame=function(e){e.passes.render&&e.mode!==b.Z.MORPHING&&(function(e,t){const n=e._tileLoadQueueHigh,i=e._tileLoadQueueMedium,o=e._tileLoadQueueLow;if(0===n.length&&0===i.length&&0===o.length)return;e._tileReplacementQueue.trimTiles(e.tileCacheSize);const r=(0,l.Z)()+e._loadQueueTimeSlice,s=e._tileProvider;let a=F(e,t,s,r,n,!1);a=F(e,t,s,r,i,a),F(e,t,s,r,o,a)}(this,e),function(e,t){if(!e.tileProvider.ready)return;const n=V;n.length=0;const r=e._tileToUpdateHeights,a=(0,l.Z)()+e._updateHeightsTimeSlice,c=t.mode,u=t.mapProjection,d=e.tileProvider.tilingScheme.ellipsoid;let h;for(;r.length>0;){const t=r[0];if(!(0,s.Z)(t.data)||!(0,s.Z)(t.data.mesh)){const i=t._lastSelectionResultFrame===e._lastSelectionFrameNumber?t._lastSelectionResult:A.Z.NONE;i!==A.Z.RENDERED&&i!==A.Z.CULLED_BUT_NEEDED||n.push(t),r.shift(),e._lastTileIndex=0;continue}const f=t.customData,p=f.length;let m=!1;for(h=e._lastTileIndex;h<p;++h){const e=f[h],n=t.data.terrainData,r=(0,s.Z)(n)&&n.wasCreatedByUpsampling();if(t.level>e.level&&!r){if((0,s.Z)(e.positionOnEllipsoidSurface)||(e.positionOnEllipsoidSurface=i.Z.fromRadians(e.positionCartographic.longitude,e.positionCartographic.latitude,0,d)),c===b.Z.SCENE3D){const n=d.geodeticSurfaceNormal(e.positionOnEllipsoidSurface,B.direction),o=d.getSurfaceNormalIntersectionWithZAxis(e.positionOnEllipsoidSurface,11500,B.origin);if(!(0,s.Z)(o)){let o=0;(0,s.Z)(t.data.tileBoundingRegion)&&(o=t.data.tileBoundingRegion.minimumHeight);const r=Math.min(o,-11500),a=i.Z.multiplyByScalar(n,Math.abs(r)+1,k);i.Z.subtract(e.positionOnEllipsoidSurface,a,B.origin)}}else o.Z.clone(e.positionCartographic,U),U.height=-11500,u.project(U,k),i.Z.fromElements(k.z,k.x,k.y,k),i.Z.clone(k,B.origin),i.Z.clone(i.Z.UNIT_X,B.direction);const n=t.data.pick(B,c,u,!1,k);(0,s.Z)(n)&&((0,s.Z)(e.callback)&&e.callback(n),e.level=t.level)}if((0,l.Z)()>=a){m=!0;break}}if(m){e._lastTileIndex=h;break}e._lastTileIndex=0,r.shift()}for(h=0;h<n.length;h++)r.push(n[h])}(this,e),function(e,t){const n=e._tileLoadQueueHigh.length+e._tileLoadQueueMedium.length+e._tileLoadQueueLow.length;if(n!==e._lastTileLoadQueueLength||e._tilesInvalidated){const i=c.Z.prototype.raiseEvent.bind(e._tileLoadProgressEvent,n);t.afterRender.push((()=>(i(),!0))),e._lastTileLoadQueueLength=n}const i=e._debug;i.enableDebugOutput&&!i.suspendLodUpdate&&(i.maxDepth=e._tilesToRender.reduce((function(e,t){return Math.max(e,t.level)}),-1),i.tilesRendered=e._tilesToRender.length,i.tilesVisited===i.lastTilesVisited&&i.tilesRendered===i.lastTilesRendered&&i.tilesCulled===i.lastTilesCulled&&i.maxDepth===i.lastMaxDepth&&i.tilesWaitingForChildren===i.lastTilesWaitingForChildren&&i.maxDepthVisited===i.lastMaxDepthVisited||(console.log(`Visited ${i.tilesVisited}, Rendered: ${i.tilesRendered}, Culled: ${i.tilesCulled}, Max Depth Rendered: ${i.maxDepth}, Max Depth Visited: ${i.maxDepthVisited}, Waiting for children: ${i.tilesWaitingForChildren}`),i.lastTilesVisited=i.tilesVisited,i.lastTilesRendered=i.tilesRendered,i.lastTilesCulled=i.tilesCulled,i.lastMaxDepth=i.maxDepth,i.lastTilesWaitingForChildren=i.tilesWaitingForChildren,i.lastMaxDepthVisited=i.maxDepthVisited))}(this,e))},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){this._tileProvider=this._tileProvider&&this._tileProvider.destroy()};const S=new o.Z;function C(e,t){let n=m.Z.center(e.rectangle,S);const i=n.longitude-E.longitude,o=n.latitude-E.latitude;n=m.Z.center(t.rectangle,S);const r=n.longitude-E.longitude,s=n.latitude-E.latitude;return i*i+o*o-(r*r+s*s)}const x=new i.Z;let I=[];function P(e,t,n,i){n.needsLoading&&(void 0!==e.tileProvider.computeTileLoadPriority&&(n._loadPriority=e.tileProvider.computeTileLoadPriority(n,i)),t.push(n))}function D(){this.allAreRenderable=!0,this.anyWereRenderedLastFrame=!1,this.notYetRenderableCount=0}function O(){this.southwest=new D,this.southeast=new D,this.northwest=new D,this.northeast=new D}O.prototype.combine=function(e){const t=this.southwest,n=this.southeast,i=this.northwest,o=this.northeast;e.allAreRenderable=t.allAreRenderable&&n.allAreRenderable&&i.allAreRenderable&&o.allAreRenderable,e.anyWereRenderedLastFrame=t.anyWereRenderedLastFrame||n.anyWereRenderedLastFrame||i.anyWereRenderedLastFrame||o.anyWereRenderedLastFrame,e.notYetRenderableCount=t.notYetRenderableCount+n.notYetRenderableCount+i.notYetRenderableCount+o.notYetRenderableCount};const L=new Array(31);for(let e=0;e<L.length;++e)L[e]=new O;function N(e,t,n,i,o,r,a){if(n.computeTileVisibility(t,i,o)!==_.Z.NONE)return function(e,t,n,i,o){const r=e._debug;++r.tilesVisited,e._tileReplacementQueue.markTileRendered(n),n._updateCustomData(t.frameNumber),n.level>r.maxDepthVisited&&(r.maxDepthVisited=n.level);const a=function(e,t,n){if(t.mode===b.Z.SCENE2D||t.camera.frustum instanceof h.Z||t.camera.frustum instanceof f.Z)return function(e,t,n){let i=t.camera.frustum;const o=i.offCenterFrustum;(0,s.Z)(o)&&(i=o);const r=t.context,a=r.drawingBufferWidth,c=r.drawingBufferHeight;let l=e._tileProvider.getLevelMaximumGeometricError(n.level)/(Math.max(i.top-i.bottom,i.right-i.left)/Math.max(a,c));return t.fog.enabled&&t.mode!==b.Z.SCENE2D&&(l-=u.Z.fog(n._distance,t.fog.density)*t.fog.sse),l/=t.pixelRatio,l}(e,t,n);const i=e._tileProvider.getLevelMaximumGeometricError(n.level),o=n._distance;let r=i*t.context.drawingBufferHeight/(o*t.camera.frustum.sseDenominator);return t.fog.enabled&&(r-=u.Z.fog(o,t.fog.density)*t.fog.sse),r/=t.pixelRatio,r}(e,t,n)<e.maximumScreenSpaceError,c=n.southwestChild,l=n.southeastChild,d=n.northwestChild,p=n.northeastChild,m=e._lastSelectionFrameNumber,_=n._lastSelectionResultFrame===m?n._lastSelectionResult:A.Z.NONE,g=e.tileProvider;if(a||i){const r=A.Z.originalResult(_)===A.Z.RENDERED,c=A.Z.originalResult(_)===A.Z.CULLED||_===A.Z.NONE,l=n.state===y.Z.DONE;let u=r||c||l;if(u||(0,s.Z)(g.canRenderWithoutLosingDetail)&&(u=g.canRenderWithoutLosingDetail(n)),u)return a&&P(e,e._tileLoadQueueMedium,n,t),M(e,n),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=_===A.Z.RENDERED,o.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=A.Z.RENDERED,void(o.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));i=!0,a&&P(e,e._tileLoadQueueHigh,n,t)}if(g.canRefine(n)){if(c.upsampledFromParent&&l.upsampledFromParent&&d.upsampledFromParent&&p.upsampledFromParent)return M(e,n),P(e,e._tileLoadQueueMedium,n,t),e._tileReplacementQueue.markTileRendered(c),e._tileReplacementQueue.markTileRendered(l),e._tileReplacementQueue.markTileRendered(d),e._tileReplacementQueue.markTileRendered(p),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=_===A.Z.RENDERED,o.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=A.Z.RENDERED,void(o.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=A.Z.REFINED;const s=e._tilesToRender.length,a=e._tileLoadQueueLow.length,u=e._tileLoadQueueMedium.length,h=e._tileLoadQueueHigh.length,f=e._tileToUpdateHeights.length;if(function(e,t,n,i,o,r,s,a){const c=r.camera.positionCartographic,l=e._tileProvider,u=e._occluders,d=L[t.level],h=d.southwest,f=d.southeast,p=d.northwest,m=d.northeast;c.longitude<t.rectangle.east?c.latitude<t.rectangle.north?(N(e,t,l,r,u,s,h),N(e,n,l,r,u,s,f),N(e,i,l,r,u,s,p),N(e,o,l,r,u,s,m)):(N(e,i,l,r,u,s,p),N(e,t,l,r,u,s,h),N(e,o,l,r,u,s,m),N(e,n,l,r,u,s,f)):c.latitude<t.rectangle.north?(N(e,n,l,r,u,s,f),N(e,t,l,r,u,s,h),N(e,o,l,r,u,s,m),N(e,i,l,r,u,s,p)):(N(e,o,l,r,u,s,m),N(e,i,l,r,u,s,p),N(e,n,l,r,u,s,f),N(e,t,l,r,u,s,h)),d.combine(a)}(e,c,l,d,p,t,i,o),s!==e._tilesToRender.length){const i=o.allAreRenderable,c=o.anyWereRenderedLastFrame,l=o.notYetRenderableCount;let d=!1;if(!i&&!c){const i=e._tilesToRender;for(let e=s;e<i.length;++e){let t=i[e];for(;void 0!==t&&t._lastSelectionResult!==A.Z.KICKED&&t!==n;)t._lastSelectionResult=A.Z.kick(t._lastSelectionResult),t=t.parent}e._tilesToRender.length=s,e._tileToUpdateHeights.length=f,M(e,n),n._lastSelectionResult=A.Z.RENDERED;const c=_===A.Z.RENDERED;!c&&l>e.loadingDescendantLimit&&(e._tileLoadQueueLow.length=a,e._tileLoadQueueMedium.length=u,e._tileLoadQueueHigh.length=h,P(e,e._tileLoadQueueMedium,n,t),o.notYetRenderableCount=n.renderable?0:1,d=!0),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=c,c||e._tileToUpdateHeights.push(n),++r.tilesWaitingForChildren}e.preloadAncestors&&!d&&P(e,e._tileLoadQueueLow,n,t)}}else n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=A.Z.RENDERED,M(e,n),P(e,e._tileLoadQueueHigh,n,t),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=_===A.Z.RENDERED,o.notYetRenderableCount=n.renderable?0:1}(e,i,t,r,a);if(++e._debug.tilesCulled,e._tileReplacementQueue.markTileRendered(t),a.allAreRenderable=!0,a.anyWereRenderedLastFrame=!1,a.notYetRenderableCount=0,function(e,t){const n=t.rectangle;return(0,s.Z)(e._cameraPositionCartographic)&&m.Z.contains(n,e._cameraPositionCartographic)||(0,s.Z)(e._cameraReferenceFrameOriginCartographic)&&m.Z.contains(n,e._cameraReferenceFrameOriginCartographic)}(e,t)){(0,s.Z)(t.data)&&(0,s.Z)(t.data.vertexArray)||P(e,e._tileLoadQueueMedium,t,i);const n=e._lastSelectionFrameNumber,o=t._lastSelectionResultFrame===n?t._lastSelectionResult:A.Z.NONE;o!==A.Z.CULLED_BUT_NEEDED&&o!==A.Z.RENDERED&&e._tileToUpdateHeights.push(t),t._lastSelectionResult=A.Z.CULLED_BUT_NEEDED}else e.preloadSiblings||0===t.level?(P(e,e._tileLoadQueueLow,t,i),t._lastSelectionResult=A.Z.CULLED):t._lastSelectionResult=A.Z.CULLED;t._lastSelectionResultFrame=i.frameNumber}function M(e,t){e._tilesToRender.push(t)}function R(e,t){return e._loadPriority-t._loadPriority}function F(e,t,n,i,o,r){void 0!==n.computeTileLoadPriority&&o.sort(R);for(let s=0,a=o.length;s<a&&((0,l.Z)()<i||!r);++s){const i=o[s];e._tileReplacementQueue.markTileRendered(i),n.loadTile(t,i),r=!0}return r}const B=new p.Z,U=new o.Z,k=new i.Z,V=[],H=T},145615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(765153),r=n(143450),s=n(715372),a=n(565760);function c(e){if(!(0,i.Z)(e))throw new o.Z("options is required.");if(!(0,i.Z)(e.x))throw new o.Z("options.x is required.");if(!(0,i.Z)(e.y))throw new o.Z("options.y is required.");if(e.x<0||e.y<0)throw new o.Z("options.x and options.y must be greater than or equal to zero.");if(!(0,i.Z)(e.level))throw new o.Z("options.level is required and must be greater than or equal to zero.");if(!(0,i.Z)(e.tilingScheme))throw new o.Z("options.tilingScheme is required.");this._tilingScheme=e.tilingScheme,this._x=e.x,this._y=e.y,this._level=e.level,this._parent=e.parent,this._rectangle=this._tilingScheme.tileXYToRectangle(this._x,this._y,this._level),this._southwestChild=void 0,this._southeastChild=void 0,this._northwestChild=void 0,this._northeastChild=void 0,this.replacementPrevious=void 0,this.replacementNext=void 0,this._distance=0,this._loadPriority=0,this._customData=[],this._frameUpdated=void 0,this._lastSelectionResult=a.Z.NONE,this._lastSelectionResultFrame=void 0,this._loadedCallbacks={},this.state=s.Z.START,this.renderable=!1,this.upsampledFromParent=!1,this.data=void 0}function l(e){(0,i.Z)(e)&&e.freeResources()}c.createLevelZeroTiles=function(e){if(!(0,i.Z)(e))throw new o.Z("tilingScheme is required.");const t=e.getNumberOfXTilesAtLevel(0),n=e.getNumberOfYTilesAtLevel(0),r=new Array(t*n);let s=0;for(let i=0;i<n;++i)for(let n=0;n<t;++n)r[s++]=new c({tilingScheme:e,x:n,y:i,level:0});return r},c.prototype._updateCustomData=function(e,t,n){let o,s,a,c=this.customData;if((0,i.Z)(t)&&(0,i.Z)(n)){for(c=c.filter((function(e){return-1===n.indexOf(e)})),this._customData=c,a=this._rectangle,o=0;o<t.length;++o)s=t[o],r.Z.contains(a,s.positionCartographic)&&c.push(s);this._frameUpdated=e}else{const e=this._parent;if((0,i.Z)(e)&&this._frameUpdated!==e._frameUpdated){c.length=0,a=this._rectangle;const t=e.customData;for(o=0;o<t.length;++o)s=t[o],r.Z.contains(a,s.positionCartographic)&&c.push(s);this._frameUpdated=e._frameUpdated}}},Object.defineProperties(c.prototype,{tilingScheme:{get:function(){return this._tilingScheme}},x:{get:function(){return this._x}},y:{get:function(){return this._y}},level:{get:function(){return this._level}},parent:{get:function(){return this._parent}},rectangle:{get:function(){return this._rectangle}},children:{get:function(){return[this.northwestChild,this.northeastChild,this.southwestChild,this.southeastChild]}},southwestChild:{get:function(){return(0,i.Z)(this._southwestChild)||(this._southwestChild=new c({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y+1,level:this.level+1,parent:this})),this._southwestChild}},southeastChild:{get:function(){return(0,i.Z)(this._southeastChild)||(this._southeastChild=new c({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y+1,level:this.level+1,parent:this})),this._southeastChild}},northwestChild:{get:function(){return(0,i.Z)(this._northwestChild)||(this._northwestChild=new c({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y,level:this.level+1,parent:this})),this._northwestChild}},northeastChild:{get:function(){return(0,i.Z)(this._northeastChild)||(this._northeastChild=new c({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y,level:this.level+1,parent:this})),this._northeastChild}},customData:{get:function(){return this._customData}},needsLoading:{get:function(){return this.state<s.Z.DONE}},eligibleForUnloading:{get:function(){let e=!0;return(0,i.Z)(this.data)&&(e=this.data.eligibleForUnloading,(0,i.Z)(e)||(e=!0)),e}}}),c.prototype.findLevelZeroTile=function(e,t,n){const i=this.tilingScheme.getNumberOfXTilesAtLevel(0);if(t<0?t+=i:t>=i&&(t-=i),!(n<0||n>=this.tilingScheme.getNumberOfYTilesAtLevel(0)))return e.filter((function(e){return e.x===t&&e.y===n}))[0]},c.prototype.findTileToWest=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x-1,this.y);if(t.southeastChild===this)return t.southwestChild;if(t.northeastChild===this)return t.northwestChild;const n=t.findTileToWest(e);return void 0!==n?t.southwestChild===this?n.southeastChild:n.northeastChild:void 0},c.prototype.findTileToEast=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x+1,this.y);if(t.southwestChild===this)return t.southeastChild;if(t.northwestChild===this)return t.northeastChild;const n=t.findTileToEast(e);return void 0!==n?t.southeastChild===this?n.southwestChild:n.northwestChild:void 0},c.prototype.findTileToSouth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y+1);if(t.northwestChild===this)return t.southwestChild;if(t.northeastChild===this)return t.southeastChild;const n=t.findTileToSouth(e);return void 0!==n?t.southwestChild===this?n.northwestChild:n.northeastChild:void 0},c.prototype.findTileToNorth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y-1);if(t.southwestChild===this)return t.northwestChild;if(t.southeastChild===this)return t.northeastChild;const n=t.findTileToNorth(e);return void 0!==n?t.northwestChild===this?n.southwestChild:n.southeastChild:void 0},c.prototype.freeResources=function(){this.state=s.Z.START,this.renderable=!1,this.upsampledFromParent=!1,(0,i.Z)(this.data)&&(0,i.Z)(this.data.freeResources)&&this.data.freeResources(),l(this._southwestChild),this._southwestChild=void 0,l(this._southeastChild),this._southeastChild=void 0,l(this._northwestChild),this._northwestChild=void 0,l(this._northeastChild),this._northeastChild=void 0};const u=c},715372:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({START:0,LOADING:1,DONE:2,FAILED:3})},518065:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(790087),o=n(234146),r=n(11020),s=n(765153),a=n(275062),c=n(106899),l=n(513581),u=n(676674),d=n(912017),h=n(533763),f=n(941826),p=n(32018),m=n(756366),_=n(236879),g=n(919490);function Z(){}function y(e){this.referenceCount=1,this.resourceLoader=e,this._statisticsPromise=void 0}Z.cacheEntries={},Z.statistics=new g.Z,Z.get=function(e){i.Z.typeOf.string("cacheKey",e);const t=Z.cacheEntries[e];if((0,r.Z)(t))return++t.referenceCount,t.resourceLoader},Z.add=function(e){i.Z.typeOf.object("resourceLoader",e);const t=e.cacheKey;if(i.Z.typeOf.string("options.resourceLoader.cacheKey",t),(0,r.Z)(Z.cacheEntries[t]))throw new s.Z(`Resource with this cacheKey is already in the cache: ${t}`);return Z.cacheEntries[t]=new y(e),e},Z.unload=function(e){i.Z.typeOf.object("resourceLoader",e);const t=e.cacheKey,n=Z.cacheEntries[t];if(!(0,r.Z)(n))throw new s.Z(`Resource is not in the cache: ${t}`);--n.referenceCount,0===n.referenceCount&&(Z.statistics.removeLoader(e),e.destroy(),delete Z.cacheEntries[t])},Z.getSchemaLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).schema,n=e.resource;if((0,r.Z)(t)===(0,r.Z)(n))throw new s.Z("One of options.schema and options.resource must be defined.");const i=_.Z.getSchemaCacheKey({schema:t,resource:n});let a=Z.get(i);return(0,r.Z)(a)?a:(a=new m.Z({schema:t,resource:n,cacheKey:i}),Z.add(a))},Z.getEmbeddedBufferLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).parentResource,n=e.bufferId,s=e.typedArray;i.Z.typeOf.object("options.parentResource",t),i.Z.typeOf.number("options.bufferId",n);const c=_.Z.getEmbeddedBufferCacheKey({parentResource:t,bufferId:n});let l=Z.get(c);return(0,r.Z)(l)?l:(i.Z.typeOf.object("options.typedArray",s),l=new a.Z({typedArray:s,cacheKey:c}),Z.add(l))},Z.getExternalBufferLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resource;i.Z.typeOf.object("options.resource",t);const n=_.Z.getExternalBufferCacheKey({resource:t});let s=Z.get(n);return(0,r.Z)(s)?s:(s=new a.Z({resource:t,cacheKey:n}),Z.add(s))},Z.getGltfJsonLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltfResource,n=e.baseResource,s=e.typedArray,a=e.gltfJson;i.Z.typeOf.object("options.gltfResource",t),i.Z.typeOf.object("options.baseResource",n);const c=_.Z.getGltfCacheKey({gltfResource:t});let l=Z.get(c);return(0,r.Z)(l)?l:(l=new h.Z({resourceCache:Z,gltfResource:t,baseResource:n,typedArray:s,gltfJson:a,cacheKey:c}),Z.add(l))},Z.getBufferViewLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.bufferViewId,s=e.gltfResource,a=e.baseResource;i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.number("options.bufferViewId",n),i.Z.typeOf.object("options.gltfResource",s),i.Z.typeOf.object("options.baseResource",a);const l=_.Z.getBufferViewCacheKey({gltf:t,bufferViewId:n,gltfResource:s,baseResource:a});let u=Z.get(l);return(0,r.Z)(u)?u:(u=new c.Z({resourceCache:Z,gltf:t,bufferViewId:n,gltfResource:s,baseResource:a,cacheKey:l}),Z.add(u))},Z.getDracoLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.draco,s=e.gltfResource,a=e.baseResource;i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.object("options.draco",n),i.Z.typeOf.object("options.gltfResource",s),i.Z.typeOf.object("options.baseResource",a);const c=_.Z.getDracoCacheKey({gltf:t,draco:n,gltfResource:s,baseResource:a});let u=Z.get(c);return(0,r.Z)(u)?u:(u=new l.Z({resourceCache:Z,gltf:t,draco:n,gltfResource:s,baseResource:a,cacheKey:c}),Z.add(u))},Z.getVertexBufferLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.gltfResource,a=e.baseResource,c=e.frameState,l=e.bufferViewId,u=e.draco,d=e.attributeSemantic,h=e.accessorId,f=(0,o.Z)(e.asynchronous,!0),m=(0,o.Z)(e.dequantize,!1),g=(0,o.Z)(e.loadBuffer,!1),y=(0,o.Z)(e.loadTypedArray,!1);if(i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.object("options.gltfResource",n),i.Z.typeOf.object("options.baseResource",a),i.Z.typeOf.object("options.frameState",c),!g&&!y)throw new s.Z("At least one of loadBuffer and loadTypedArray must be true.");const b=(0,r.Z)(l),v=function(e,t){return(0,r.Z)(e)&&(0,r.Z)(e.attributes)&&(0,r.Z)(e.attributes[t])}(u,d),A=(0,r.Z)(d),T=(0,r.Z)(h);if(b===v)throw new s.Z("One of options.bufferViewId and options.draco must be defined.");if(v&&!A)throw new s.Z("When options.draco is defined options.attributeSemantic must also be defined.");if(v&&!T)throw new s.Z("When options.draco is defined options.haAccessorId must also be defined.");v&&(i.Z.typeOf.object("options.draco",u),i.Z.typeOf.string("options.attributeSemantic",d),i.Z.typeOf.number("options.accessorId",h));const w=_.Z.getVertexBufferCacheKey({gltf:t,gltfResource:n,baseResource:a,frameState:c,bufferViewId:l,draco:u,attributeSemantic:d,dequantize:m,loadBuffer:g,loadTypedArray:y});let E=Z.get(w);return(0,r.Z)(E)?E:(E=new p.Z({resourceCache:Z,gltf:t,gltfResource:n,baseResource:a,bufferViewId:l,draco:u,attributeSemantic:d,accessorId:h,cacheKey:w,asynchronous:f,dequantize:m,loadBuffer:g,loadTypedArray:y}),Z.add(E))},Z.getIndexBufferLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.accessorId,a=e.gltfResource,c=e.baseResource,l=e.frameState,u=e.draco,h=(0,o.Z)(e.asynchronous,!0),f=(0,o.Z)(e.loadBuffer,!1),p=(0,o.Z)(e.loadTypedArray,!1);if(i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.number("options.accessorId",n),i.Z.typeOf.object("options.gltfResource",a),i.Z.typeOf.object("options.baseResource",c),i.Z.typeOf.object("options.frameState",l),!f&&!p)throw new s.Z("At least one of loadBuffer and loadTypedArray must be true.");const m=_.Z.getIndexBufferCacheKey({gltf:t,accessorId:n,gltfResource:a,baseResource:c,frameState:l,draco:u,loadBuffer:f,loadTypedArray:p});let g=Z.get(m);return(0,r.Z)(g)?g:(g=new d.Z({resourceCache:Z,gltf:t,accessorId:n,gltfResource:a,baseResource:c,draco:u,cacheKey:m,asynchronous:h,loadBuffer:f,loadTypedArray:p}),Z.add(g))},Z.getImageLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.imageId,s=e.gltfResource,a=e.baseResource;i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.number("options.imageId",n),i.Z.typeOf.object("options.gltfResource",s),i.Z.typeOf.object("options.baseResource",a);const c=_.Z.getImageCacheKey({gltf:t,imageId:n,gltfResource:s,baseResource:a});let l=Z.get(c);return(0,r.Z)(l)?l:(l=new u.Z({resourceCache:Z,gltf:t,imageId:n,gltfResource:s,baseResource:a,cacheKey:c}),Z.add(l))},Z.getTextureLoader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.textureInfo,s=e.gltfResource,a=e.baseResource,c=e.supportedImageFormats,l=e.frameState,u=(0,o.Z)(e.asynchronous,!0);i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.object("options.textureInfo",n),i.Z.typeOf.object("options.gltfResource",s),i.Z.typeOf.object("options.baseResource",a),i.Z.typeOf.object("options.supportedImageFormats",c),i.Z.typeOf.object("options.frameState",l);const d=_.Z.getTextureCacheKey({gltf:t,textureInfo:n,gltfResource:s,baseResource:a,supportedImageFormats:c,frameState:l});let h=Z.get(d);return(0,r.Z)(h)?h:(h=new f.Z({resourceCache:Z,gltf:t,textureInfo:n,gltfResource:s,baseResource:a,supportedImageFormats:c,cacheKey:d,asynchronous:u}),Z.add(h))},Z.clearForSpecs=function(){const e=[p.Z,d.Z,l.Z,f.Z,u.Z,c.Z,a.Z,m.Z,h.Z];let t;const n=Z.cacheEntries,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);i.sort((function(t,n){return e.indexOf(t.resourceLoader.constructor)-e.indexOf(n.resourceLoader.constructor)}));const o=i.length;for(let e=0;e<o;++e){const o=i[e];t=o.resourceLoader.cacheKey,(0,r.Z)(n[t])&&(o.resourceLoader.destroy(),delete n[t])}Z.statistics.clear()};const b=Z},236879:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(790087),o=n(234146),r=n(11020),s=n(765153),a=n(115272),c=n(822518),l=n(717341);const u={};function d(e){return(0,a.Z)(e.url)}function h(e){let t=e.byteOffset,n=e.byteLength;if((0,l.Z)(e,"EXT_meshopt_compression")){const i=e.extensions.EXT_meshopt_compression;t=(0,o.Z)(i.byteOffset,0),n=i.byteLength}return`${t}-${t+n}`}function f(e){return d(e)}function p(e,t){return`${d(e)}-buffer-id-${t}`}function m(e,t,n,i){return(0,r.Z)(e.uri)?f(i.getDerivedResource({url:e.uri})):p(n,t)}function _(e,t,n,i){const o=t.bufferView,r=e.bufferViews[o],s=r.buffer;return`${m(e.buffers[s],s,n,i)}-range-${h(r)}`}function g(e,t,n,i){const o=e.images[t],s=o.bufferView,a=o.uri;if((0,r.Z)(a))return d(i.getDerivedResource({url:a}));const c=e.bufferViews[s],l=c.buffer;return`${m(e.buffers[l],l,n,i)}-range-${h(c)}`}u.getSchemaCacheKey=function(e){const t=e.schema,n=e.resource;if((0,r.Z)(t)===(0,r.Z)(n))throw new s.Z("One of options.schema and options.resource must be defined.");return(0,r.Z)(t)?`embedded-schema:${JSON.stringify(t)}`:`external-schema:${d(n)}`},u.getExternalBufferCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resource;return i.Z.typeOf.object("options.resource",t),`external-buffer:${f(t)}`},u.getEmbeddedBufferCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).parentResource,n=e.bufferId;return i.Z.typeOf.object("options.parentResource",t),i.Z.typeOf.number("options.bufferId",n),`embedded-buffer:${p(t,n)}`},u.getGltfCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltfResource;return i.Z.typeOf.object("options.gltfResource",t),`gltf:${d(t)}`},u.getBufferViewCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.bufferViewId,r=e.gltfResource,s=e.baseResource;i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.number("options.bufferViewId",n),i.Z.typeOf.object("options.gltfResource",r),i.Z.typeOf.object("options.baseResource",s);const a=t.bufferViews[n];let c=a.buffer;const u=t.buffers[c];return(0,l.Z)(a,"EXT_meshopt_compression")&&(c=a.extensions.EXT_meshopt_compression.buffer),`buffer-view:${m(u,c,r,s)}-range-${h(a)}`},u.getDracoCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.draco,r=e.gltfResource,s=e.baseResource;return i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.object("options.draco",n),i.Z.typeOf.object("options.gltfResource",r),i.Z.typeOf.object("options.baseResource",s),`draco:${_(t,n,r,s)}`},u.getVertexBufferCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.gltfResource,a=e.baseResource,c=e.frameState,l=e.bufferViewId,u=e.draco,d=e.attributeSemantic,f=(0,o.Z)(e.dequantize,!1),p=(0,o.Z)(e.loadBuffer,!1),g=(0,o.Z)(e.loadTypedArray,!1);i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.object("options.gltfResource",n),i.Z.typeOf.object("options.baseResource",a),i.Z.typeOf.object("options.frameState",c);const Z=(0,r.Z)(l),y=function(e,t){return(0,r.Z)(e)&&(0,r.Z)(e.attributes)&&(0,r.Z)(e.attributes[t])}(u,d),b=(0,r.Z)(d);if(Z===y)throw new s.Z("One of options.bufferViewId and options.draco must be defined.");if(y&&!b)throw new s.Z("When options.draco is defined options.attributeSemantic must also be defined.");if(y&&(i.Z.typeOf.object("options.draco",u),i.Z.typeOf.string("options.attributeSemantic",d)),!p&&!g)throw new s.Z("At least one of loadBuffer and loadTypedArray must be true.");let v="";if(f&&(v+="-dequantize"),p&&(v+="-buffer",v+=`-context-${c.context.id}`),g&&(v+="-typed-array"),(0,r.Z)(u))return`vertex-buffer:${_(t,u,n,a)}-draco-${d}${v}`;const A=t.bufferViews[l],T=A.buffer;return`vertex-buffer:${m(t.buffers[T],T,n,a)}-range-${h(A)}${v}`},u.getIndexBufferCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.accessorId,a=e.gltfResource,c=e.baseResource,l=e.frameState,u=e.draco,d=(0,o.Z)(e.loadBuffer,!1),h=(0,o.Z)(e.loadTypedArray,!1);if(i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.number("options.accessorId",n),i.Z.typeOf.object("options.gltfResource",a),i.Z.typeOf.object("options.baseResource",c),i.Z.typeOf.object("options.frameState",l),!d&&!h)throw new s.Z("At least one of loadBuffer and loadTypedArray must be true.");let f="";if(d&&(f+="-buffer",f+=`-context-${l.context.id}`),h&&(f+="-typed-array"),(0,r.Z)(u))return`index-buffer:${_(t,u,a,c)}-draco${f}`;const p=t.accessors[n],g=p.bufferView,Z=t.bufferViews[g],y=Z.buffer,b=m(t.buffers[y],y,a,c),v=function(e,t){return`${t.byteOffset+e.byteOffset}-${e.componentType}-${e.type}-${e.count}`}(p,Z);return`index-buffer:${b}-accessor-${v}${f}`},u.getImageCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.imageId,r=e.gltfResource,s=e.baseResource;return i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.number("options.imageId",n),i.Z.typeOf.object("options.gltfResource",r),i.Z.typeOf.object("options.baseResource",s),`image:${g(t,n,r,s)}`},u.getTextureCacheKey=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,n=e.textureInfo,r=e.gltfResource,s=e.baseResource,a=e.supportedImageFormats,l=e.frameState;i.Z.typeOf.object("options.gltf",t),i.Z.typeOf.object("options.textureInfo",n),i.Z.typeOf.object("options.gltfResource",r),i.Z.typeOf.object("options.baseResource",s),i.Z.typeOf.object("options.supportedImageFormats",a),i.Z.typeOf.object("options.frameState",l);const u=n.index,d=g(t,c.Z.getImageIdFromTexture({gltf:t,textureId:u,supportedImageFormats:a}),r,s),h=function(e,t){const n=c.Z.createSampler({gltf:e,textureInfo:t});return`${n.wrapS}-${n.wrapT}-${n.minificationFilter}-${n.magnificationFilter}`}(t,n);return`texture:${d}-sampler-${h}-context-${l.context.id}`};const Z=u},919490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(790087),o=n(11020);function r(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}}r.prototype.clear=function(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}},r.prototype.addGeometryLoader=function(e){i.Z.typeOf.object("loader",e);const t=e.cacheKey;if(this._geometrySizes.hasOwnProperty(t))return;this._geometrySizes[t]=0;const n=e.buffer,r=e.typedArray;let s=0;(0,o.Z)(n)&&(s+=n.sizeInBytes),(0,o.Z)(r)&&(s+=r.byteLength),this.geometryByteLength+=s,this._geometrySizes[t]=s},r.prototype.addTextureLoader=function(e){i.Z.typeOf.object("loader",e);const t=e.cacheKey;if(this._textureSizes.hasOwnProperty(t))return;this._textureSizes[t]=0;const n=e.texture.sizeInBytes;this.texturesByteLength+=e.texture.sizeInBytes,this._textureSizes[t]=n},r.prototype.removeLoader=function(e){i.Z.typeOf.object("loader",e);const t=e.cacheKey,n=this._geometrySizes[t];delete this._geometrySizes[t],(0,o.Z)(n)&&(this.geometryByteLength-=n);const r=this._textureSizes[t];delete this._textureSizes[t],(0,o.Z)(r)&&(this.texturesByteLength-=r)};const s=r},757587:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(790087),o=n(11020),r=n(722313),s=n(765153),a=n(217066);function c(){}Object.defineProperties(c.prototype,{cacheKey:{get:function(){s.Z.throwInstantiationError()}}}),c.prototype.load=function(){s.Z.throwInstantiationError()},c.prototype.unload=function(){},c.prototype.process=function(e){return!1},c.prototype.getError=function(e,t){i.Z.typeOf.string("errorMessage",e),(0,o.Z)(t)&&(0,o.Z)(t.message)&&(e+=`\n${t.message}`);const n=new a.Z(e);return(0,o.Z)(t)&&(n.stack=`Original stack:\n${t.stack}\nHandler stack:\n${n.stack}`),n},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.unload(),(0,r.Z)(this)};const l=c},897955:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({UNLOADED:0,LOADING:1,LOADED:2,PROCESSING:3,READY:4,FAILED:5})},817271:(e,t,n)=>{"use strict";n.d(t,{Z:()=>mt});var i=n(890828),o=n(762031),r=n(418547),s=n(660904),a=n(532056),c=n(790087),l=n(823438),u=n(35961),d=n(376213),h=n(973384),f=n(737400),p=n(234146),m=n(11020),_=n(722313),g=n(765153),Z=n(658912),y=n(282910),b=n(351047),v=n(156905),A=n(5450),T=n(101496),w=n(791364),E=n(344485),S=n(659635),C=n(849391),x=n(734726),I=n(223689),P=n(299594),D=n(134282),O=n(296184),L=n(596898),N=n(511267),M=n(720794),R=n(598020),F=n(759304),B=n(678216),U=n(591477),k=n(431056),V=n(417148),H=n(186120),z=n(518931),G=n(684236),j=n(423842),W=n(628031),q=n(868817),Y=n(460135),X=n(40368),J=n(92962),Q=n(699765),$=n(987315),K=n(722866),ee=n(183839),te=n(11951),ne=n(305515),ie=n(394472),oe=n(95166),re=n(104763),se=n(229029),ae=n(998964),ce=n(759398),le=n(883900),ue=n(714233),de=n(638452),he=n(645875),fe=n(741469),pe=n(878354),me=n(822948),_e=n(582304),ge=n(963478),Ze=n(268295),ye=n(720813),be=n(211547);const ve=function(e){return function(){e.frameState.afterRender.push((function(){e.requestRender()}))}};function Ae(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).canvas;let n=e.creditContainer,o=e.creditViewport;const r=(0,l.Z)(e.contextOptions);if(!(0,m.Z)(t))throw new g.Z("options and options.canvas are required.");const s=(0,m.Z)(n),a=new B.Z(t,r);s||(n=document.createElement("div"),n.style.position="absolute",n.style.bottom="0",n.style["text-shadow"]="0 0 2px #000000",n.style.color="#ffffff",n.style["font-size"]="10px",n.style["padding-right"]="5px",t.parentNode.appendChild(n)),(0,m.Z)(o)||(o=t.parentNode),this._id=(0,h.Z)(),this._jobScheduler=new te.Z,this._frameState=new $.Z(a,new W.Z(n,"  ",o),this._jobScheduler),this._frameState.scene3DOnly=(0,p.Z)(e.scene3DOnly,!1),this._removeCreditContainer=!s,this._creditContainer=n,this._canvas=t,this._context=a,this._computeEngine=new F.Z(a),this._globe=void 0,this._globeTranslucencyState=new K.Z,this._primitives=new le.Z,this._groundPrimitives=new le.Z,this._globeHeight=void 0,this._cameraUnderground=!1,this._logDepthBuffer=a.fragmentDepth,this._logDepthBufferDirty=!0,this._tweens=new Ze.Z,this._shaderFrameCount=0,this._sunPostProcess=void 0,this._computeCommandList=[],this._overlayCommandList=[],this._useOIT=(0,p.Z)(e.orderIndependentTranslucency,!0),this._executeOITFunction=void 0,this._depthPlane=new Y.Z(e.depthPlaneEllipsoidOffset),this._clearColorCommand=new R.Z({color:new u.Z,stencil:0,owner:this}),this._depthClearCommand=new R.Z({depth:1,owner:this}),this._stencilClearCommand=new R.Z({stencil:0}),this._classificationStencilClearCommand=new R.Z({stencil:0,renderState:V.Z.fromCache({stencilMask:me.Z.CLASSIFICATION_MASK})}),this._depthOnlyRenderStateCache={},this._transitioner=new he.Z(this),this._preUpdate=new y.Z,this._postUpdate=new y.Z,this._renderError=new y.Z,this._preRender=new y.Z,this._postRender=new y.Z,this._minimumDisableDepthTestDistance=0,this._debugInspector=new be.Z,this._msaaSamples=(0,p.Z)(e.msaaSamples,1),this.rethrowRenderErrors=!1,this.completeMorphOnUserInput=!0,this.morphStart=new y.Z,this.morphComplete=new y.Z,this.skyBox=void 0,this.skyAtmosphere=void 0,this.sun=void 0,this.sunBloom=!0,this._sunBloom=void 0,this.moon=void 0,this.backgroundColor=u.Z.clone(u.Z.BLACK),this._mode=ue.Z.SCENE3D,this._mapProjection=(0,m.Z)(e.mapProjection)?e.mapProjection:new b.Z,this.morphTime=1,this.farToNearRatio=1e3,this.logarithmicDepthFarToNearRatio=1e9,this.nearToFarDistance2D=175e4,this.debugCommandFilter=void 0,this.debugShowCommands=!1,this.debugShowFrustums=!1,this.debugShowFramesPerSecond=!1,this.debugShowDepthFrustum=1,this.debugShowFrustumPlanes=!1,this._debugShowFrustumPlanes=!1,this._debugFrustumPlanes=void 0,this.useDepthPicking=!0,this.pickTranslucentDepth=!1,this.cameraEventWaitTime=500,this.fog=new Q.Z,this._shadowMapCamera=new z.Z(this),this.shadowMap=new pe.Z({context:a,lightCamera:this._shadowMapCamera,enabled:(0,p.Z)(e.shadows,!1)}),this.invertClassification=!1,this.invertClassificationColor=u.Z.clone(u.Z.WHITE),this._actualInvertClassificationColor=u.Z.clone(this._invertClassificationColor),this._invertClassification=new ee.Z,this.focalLength=void 0,this.eyeSeparation=void 0,this.postProcessStages=new ae.Z,this._brdfLutGenerator=new H.Z,this._performanceDisplay=void 0,this._debugVolume=void 0,this._screenSpaceCameraController=new fe.Z(this),this._cameraUnderground=!1,this._mapMode2D=(0,p.Z)(e.mapMode2D,ne.Z.INFINITE_SCROLL),this._environmentState={skyBoxCommand:void 0,skyAtmosphereCommand:void 0,sunDrawCommand:void 0,sunComputeCommand:void 0,moonCommand:void 0,isSunVisible:!1,isMoonVisible:!1,isReadyForAtmosphere:!1,isSkyAtmosphereVisible:!1,clearGlobeDepth:!1,useDepthPlane:!1,renderTranslucentDepthForPick:!1,originalFramebuffer:void 0,useGlobeDepthFramebuffer:!1,useOIT:!1,useInvertClassification:!1,usePostProcess:!1,usePostProcessSelected:!1,useWebVR:!1},this._useWebVR=!1,this._cameraVR=void 0,this._aspectRatioVR=void 0,this.requestRenderMode=(0,p.Z)(e.requestRenderMode,!1),this._renderRequested=!0,this.maximumRenderTimeChange=(0,p.Z)(e.maximumRenderTimeChange,0),this._lastRenderTime=void 0,this._frameRateMonitor=void 0,this._removeRequestListenerCallback=L.Z.requestCompletedEvent.addEventListener(ve(this)),this._removeTaskProcessorListenerCallback=N.Z.taskCompletedEvent.addEventListener(ve(this)),this._removeGlobeCallbacks=[],this._removeTerrainProviderReadyListener=void 0;const c=new i.Z(0,0,a.drawingBufferWidth,a.drawingBufferHeight),d=new z.Z(this);this._logDepthBuffer&&(d.frustum.near=.1,d.frustum.far=1e10),this.preloadFlightCamera=new z.Z(this),this.preloadFlightCullingVolume=void 0,this._picking=new se.Z(this),this._defaultView=new ye.Z(this,d,c),this._view=this._defaultView,this._hdr=void 0,this._hdrDirty=void 0,this.highDynamicRange=!1,this.gamma=2.2,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this._specularEnvironmentMapAtlas=void 0,this.light=new _e.Z,Pe(this,0,w.Z.now()),this.updateFrameState(),this.initializeFrame()}function Te(e,t,n){const i=e._frameState,o=e._context,r=e._view.oit,s=i.shadowState.lightShadowMaps,a=i.shadowState.lightShadowsEnabled;let c=t.derivedCommands;(0,m.Z)(t.pickId)&&(c.picking=X.Z.createPickDerivedCommand(e,t,o,c.picking)),t.pickOnly||(c.depth=X.Z.createDepthOnlyDerivedCommand(e,t,o,c.depth)),c.originalCommand=t,e._hdr&&(c.hdr=X.Z.createHdrCommand(t,o,c.hdr),c=(t=c.hdr.command).derivedCommands),a&&t.receiveShadows&&(c.shadows=pe.Z.createReceiveDerivedCommand(s,t,n,o,c.shadows)),t.pass===k.Z.TRANSLUCENT&&(0,m.Z)(r)&&r.isSupported()&&(a&&t.receiveShadows?(c.oit=(0,m.Z)(c.oit)?c.oit:{},c.oit.shadows=r.createDerivedCommands(c.shadows.receiveCommand,o,c.oit.shadows)):c.oit=r.createDerivedCommands(t,o,c.oit))}Object.defineProperties(Ae.prototype,{canvas:{get:function(){return this._canvas}},drawingBufferHeight:{get:function(){return this._context.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._context.drawingBufferWidth}},maximumAliasedLineWidth:{get:function(){return U.Z.maximumAliasedLineWidth}},maximumCubeMapSize:{get:function(){return U.Z.maximumCubeMapSize}},pickPositionSupported:{get:function(){return this._context.depthTexture}},sampleHeightSupported:{get:function(){return this._context.depthTexture}},clampToHeightSupported:{get:function(){return this._context.depthTexture}},invertClassificationSupported:{get:function(){return this._context.depthTexture}},specularEnvironmentMapsSupported:{get:function(){return ie.Z.isSupported(this._context)}},globe:{get:function(){return this._globe},set:function(e){this._globe=this._globe&&this._globe.destroy(),this._globe=e,function(e,t){for(let t=0;t<e._removeGlobeCallbacks.length;++t)e._removeGlobeCallbacks[t]();e._removeGlobeCallbacks.length=0;const n=[];(0,m.Z)(t)&&(n.push(t.imageryLayersUpdatedEvent.addEventListener(ve(e))),n.push(t.terrainProviderChanged.addEventListener(ve(e)))),e._removeGlobeCallbacks=n}(this,e)}},primitives:{get:function(){return this._primitives}},groundPrimitives:{get:function(){return this._groundPrimitives}},camera:{get:function(){return this._view.camera},set:function(e){this._view.camera=e}},view:{get:function(){return this._view},set:function(e){this._view=e}},defaultView:{get:function(){return this._defaultView}},picking:{get:function(){return this._picking}},screenSpaceCameraController:{get:function(){return this._screenSpaceCameraController}},mapProjection:{get:function(){return this._mapProjection}},jobScheduler:{get:function(){return this._jobScheduler}},frameState:{get:function(){return this._frameState}},environmentState:{get:function(){return this._environmentState}},tweens:{get:function(){return this._tweens}},imageryLayers:{get:function(){if((0,m.Z)(this.globe))return this.globe.imageryLayers}},terrainProvider:{get:function(){if((0,m.Z)(this.globe))return this.globe.terrainProvider},set:function(e){this._removeTerrainProviderReadyListener=this._removeTerrainProviderReadyListener&&this._removeTerrainProviderReadyListener(),(0,m.Z)(this.globe)&&(this.globe.terrainProvider=e)}},terrainProviderChanged:{get:function(){if((0,m.Z)(this.globe))return this.globe.terrainProviderChanged}},preUpdate:{get:function(){return this._preUpdate}},postUpdate:{get:function(){return this._postUpdate}},renderError:{get:function(){return this._renderError}},preRender:{get:function(){return this._preRender}},postRender:{get:function(){return this._postRender}},lastRenderTime:{get:function(){return this._lastRenderTime}},context:{get:function(){return this._context}},debugFrustumStatistics:{get:function(){return this._view.debugFrustumStatistics}},scene3DOnly:{get:function(){return this._frameState.scene3DOnly}},orderIndependentTranslucency:{get:function(){return this._useOIT}},id:{get:function(){return this._id}},mode:{get:function(){return this._mode},set:function(e){if(this.scene3DOnly&&e!==ue.Z.SCENE3D)throw new g.Z("Only SceneMode.SCENE3D is valid when scene3DOnly is true.");if(e===ue.Z.SCENE2D)this.morphTo2D(0);else if(e===ue.Z.SCENE3D)this.morphTo3D(0);else{if(e!==ue.Z.COLUMBUS_VIEW)throw new g.Z("value must be a valid SceneMode enumeration.");this.morphToColumbusView(0)}this._mode=e}},frustumCommandsList:{get:function(){return this._view.frustumCommandsList}},numberOfFrustums:{get:function(){return this._view.frustumCommandsList.length}},useWebVR:{get:function(){return this._useWebVR},set:function(e){if(this.camera.frustum instanceof I.Z)throw new g.Z("VR is unsupported with an orthographic projection.");this._useWebVR=e,this._useWebVR?(this._frameState.creditDisplay.container.style.visibility="hidden",this._cameraVR=new z.Z(this),(0,m.Z)(this._deviceOrientationCameraController)||(this._deviceOrientationCameraController=new J.Z(this)),this._aspectRatioVR=this.camera.frustum.aspectRatio):(this._frameState.creditDisplay.container.style.visibility="visible",this._cameraVR=void 0,this._deviceOrientationCameraController=this._deviceOrientationCameraController&&!this._deviceOrientationCameraController.isDestroyed()&&this._deviceOrientationCameraController.destroy(),this.camera.frustum.aspectRatio=this._aspectRatioVR,this.camera.frustum.xOffset=0)}},mapMode2D:{get:function(){return this._mapMode2D}},splitPosition:{get:function(){return this._frameState.splitPosition},set:function(e){this._frameState.splitPosition=e}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance},set:function(e){if(!(0,m.Z)(e)||e<0)throw new g.Z("minimumDisableDepthTestDistance must be greater than or equal to 0.0.");this._minimumDisableDepthTestDistance=e}},logarithmicDepthBuffer:{get:function(){return this._logDepthBuffer},set:function(e){e=this._context.fragmentDepth&&e,this._logDepthBuffer!==e&&(this._logDepthBuffer=e,this._logDepthBufferDirty=!0)}},gamma:{get:function(){return this._context.uniformState.gamma},set:function(e){this._context.uniformState.gamma=e}},highDynamicRange:{get:function(){return this._hdr},set:function(e){const t=this._context,n=e&&t.depthTexture&&(t.colorBufferFloat||t.colorBufferHalfFloat);this._hdrDirty=n!==this._hdr,this._hdr=n}},highDynamicRangeSupported:{get:function(){const e=this._context;return e.depthTexture&&(e.colorBufferFloat||e.colorBufferHalfFloat)}},cameraUnderground:{get:function(){return this._cameraUnderground}},msaaSamples:{get:function(){return this._msaaSamples},set:function(e){e=Math.min(e,U.Z.maximumSamples),this._msaaSamples=e}},msaaSupported:{get:function(){return this._context.msaa}},pixelRatio:{get:function(){return this._frameState.pixelRatio},set:function(e){this._frameState.pixelRatio=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},globeHeight:{get:function(){return this._globeHeight}}}),Ae.prototype.getCompressedTextureFormatSupported=function(e){const t=this.context;return("WEBGL_compressed_texture_s3tc"===e||"s3tc"===e)&&t.s3tc||("WEBGL_compressed_texture_pvrtc"===e||"pvrtc"===e)&&t.pvrtc||("WEBGL_compressed_texture_etc"===e||"etc"===e)&&t.etc||("WEBGL_compressed_texture_etc1"===e||"etc1"===e)&&t.etc1||("WEBGL_compressed_texture_astc"===e||"astc"===e)&&t.astc||("EXT_texture_compression_bptc"===e||"bc7"===e)&&t.bc7},Ae.prototype.updateDerivedCommands=function(e){if(!(0,m.Z)(e.derivedCommands))return;const t=this._frameState,n=this._context;let i=!1;const o=t.shadowState.lastDirtyTime;e.lastDirtyTime!==o&&(e.lastDirtyTime=o,e.dirty=!0,i=!0);const r=t.useLogDepth,s=this._hdr,a=e.derivedCommands,c=(0,m.Z)(a.logDepth),l=(0,m.Z)(a.hdr),u=(0,m.Z)(a.originalCommand),d=r&&!c,h=s&&!l,f=!(r&&s||u);if(e.dirty=e.dirty||d||h||f,e.dirty){e.dirty=!1;const o=t.shadowState.shadowMaps;t.shadowState.shadowsEnabled&&e.castShadows&&(a.shadows=pe.Z.createCastDerivedCommand(o,e,i,n,a.shadows)),(c||d)&&(a.logDepth=X.Z.createLogDepthCommand(e,n,a.logDepth),Te(this,a.logDepth.command,i)),(u||f)&&Te(this,e,i)}};const we=new j.Z({pass:G.Z.RENDER}),Ee=new j.Z({pass:G.Z.PRELOAD}),Se=new j.Z({pass:G.Z.PRELOAD_FLIGHT}),Ce=new j.Z({pass:G.Z.REQUEST_RENDER_MODE_DEFER_CHECK}),xe=new o.Z;let Ie;function Pe(e,t,n){const i=e._frameState;i.frameNumber=t,i.time=w.Z.clone(n,i.time)}Ae.prototype.clearPasses=function(e){e.render=!1,e.pick=!1,e.depth=!1,e.postProcess=!1,e.offscreen=!1},Ae.prototype.updateFrameState=function(){const e=this.camera,t=this._frameState;t.commandList.length=0,t.shadowMaps.length=0,t.brdfLutGenerator=this._brdfLutGenerator,t.environmentMap=this.skyBox&&this.skyBox._cubeMap,t.mode=this._mode,t.morphTime=this.morphTime,t.mapProjection=this.mapProjection,t.camera=e,t.cullingVolume=e.frustum.computeCullingVolume(e.positionWC,e.directionWC,e.upWC),t.occluder=function(e){const t=e.globe;if(e._mode===ue.Z.SCENE3D&&(0,m.Z)(t)&&t.show&&!e._cameraUnderground&&!e._globeTranslucencyState.translucent){const n=t.ellipsoid,i=e.frameState.minimumTerrainHeight;return xe.radius=n.minimumRadius+i,Ie=x.Z.fromBoundingSphere(xe,e.camera.positionWC,Ie),Ie}}(this),t.minimumTerrainHeight=0,t.minimumDisableDepthTestDistance=this._minimumDisableDepthTestDistance,t.invertClassification=this.invertClassification,t.useLogDepth=this._logDepthBuffer&&!(this.camera.frustum instanceof I.Z||this.camera.frustum instanceof P.Z),t.light=this.light,t.cameraUnderground=this._cameraUnderground,t.globeTranslucencyState=this._globeTranslucencyState,(0,m.Z)(this.globe)&&(t.terrainExaggeration=this.globe.terrainExaggeration,t.terrainExaggerationRelativeHeight=this.globe.terrainExaggerationRelativeHeight),(0,m.Z)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready?(t.specularEnvironmentMaps=this._specularEnvironmentMapAtlas.texture,t.specularEnvironmentMapsMaximumLOD=this._specularEnvironmentMapAtlas.maximumMipmapLevel):(t.specularEnvironmentMaps=void 0,t.specularEnvironmentMapsMaximumLOD=void 0),t.sphericalHarmonicCoefficients=this.sphericalHarmonicCoefficients,this._actualInvertClassificationColor=u.Z.clone(this.invertClassificationColor,this._actualInvertClassificationColor),ee.Z.isTranslucencySupported(this._context)||(this._actualInvertClassificationColor.alpha=1),t.invertClassificationColor=this._actualInvertClassificationColor,(0,m.Z)(this.globe)?t.maximumScreenSpaceError=this.globe.maximumScreenSpaceError:t.maximumScreenSpaceError=2,this.clearPasses(t.passes),t.tilesetPassState=void 0},Ae.prototype.isVisible=function(e,t,n){return(0,m.Z)(e)&&(!(0,m.Z)(e.boundingVolume)||!e.cull||t.computeVisibility(e.boundingVolume)!==T.Z.OUTSIDE&&(!(0,m.Z)(n)||!e.occlude||!e.boundingVolume.isOccluded(n)))};let De=new S.Z(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1);function Oe(e,t,n,i,o){const a=t._frameState;if((0,m.Z)(t.debugCommandFilter)&&!t.debugCommandFilter(e))return;if(e instanceof R.Z)return void e.execute(n,i);e.debugShowBoundingVolume&&(0,m.Z)(e.boundingVolume)&&function(e,t,n,i){const o=t._frameState,a=o.context,c=e.boundingVolume;let l;(0,m.Z)(t._debugVolume)&&t._debugVolume.destroy();let u=s.Z.clone(c.center);if(o.mode!==ue.Z.SCENE3D){u=S.Z.multiplyByPoint(De,u,u);const e=o.mapProjection,t=e.unproject(u);u=e.ellipsoid.cartographicToCartesian(t)}if((0,m.Z)(c.radius)){const e=c.radius;l=A.Z.toWireframe(Z.Z.createGeometry(new Z.Z({radii:new s.Z(e,e,e),vertexFormat:re.Z.FLAT_VERTEX_FORMAT}))),t._debugVolume=new ce.Z({geometryInstances:new v.Z({geometry:l,modelMatrix:S.Z.fromTranslation(u),attributes:{color:new d.Z(1,0,0,1)}}),appearance:new re.Z({flat:!0,translucent:!1}),asynchronous:!1})}else{const e=c.halfAxes;l=A.Z.toWireframe(r.Z.createGeometry(r.Z.fromDimensions({dimensions:new s.Z(2,2,2),vertexFormat:re.Z.FLAT_VERTEX_FORMAT}))),t._debugVolume=new ce.Z({geometryInstances:new v.Z({geometry:l,modelMatrix:S.Z.fromRotationTranslation(e,u,new S.Z),attributes:{color:new d.Z(1,0,0,1)}}),appearance:new re.Z({flat:!0,translucent:!1}),asynchronous:!1})}const h=o.commandList,f=o.commandList=[];let p;t._debugVolume.update(o),e=f[0],o.useLogDepth&&(e=X.Z.createLogDepthCommand(e,a).command),(0,m.Z)(i)&&(p=n.framebuffer,n.framebuffer=i),e.execute(a,n),(0,m.Z)(p)&&(n.framebuffer=p),o.commandList=h}(e,t,i,o),a.useLogDepth&&(0,m.Z)(e.derivedCommands.logDepth)&&(e=e.derivedCommands.logDepth.command);const c=a.passes;if(!c.pick&&!c.depth&&t._hdr&&(0,m.Z)(e.derivedCommands)&&(0,m.Z)(e.derivedCommands.hdr)&&(e=e.derivedCommands.hdr.command),c.pick||c.depth){if(c.pick&&!c.depth&&(0,m.Z)(e.derivedCommands.picking))return void(e=e.derivedCommands.picking.pickCommand).execute(n,i);if((0,m.Z)(e.derivedCommands.depth))return void(e=e.derivedCommands.depth.depthOnlyCommand).execute(n,i)}t.debugShowCommands||t.debugShowFrustums?t._debugInspector.executeDebugShowFrustumsCommand(t,e,i):a.shadowState.lightShadowsEnabled&&e.receiveShadows&&(0,m.Z)(e.derivedCommands.shadows)?e.derivedCommands.shadows.receiveCommand.execute(n,i):e.execute(n,i)}function Le(e,t,n,i){const o=t._frameState;let r=e.derivedCommands;(0,m.Z)(r)&&(o.useLogDepth&&(0,m.Z)(r.logDepth)&&(e=r.logDepth.command),r=e.derivedCommands,(0,m.Z)(r.picking)?(e=r.picking.pickCommand).execute(n,i):(0,m.Z)(r.depth)&&(e=r.depth.depthOnlyCommand).execute(n,i))}function Ne(e,t,n){return t.boundingVolume.distanceSquaredTo(n)-e.boundingVolume.distanceSquaredTo(n)}function Me(e,t,n){return e.boundingVolume.distanceSquaredTo(n)-t.boundingVolume.distanceSquaredTo(n)+E.Z.EPSILON12}function Re(e,t,n,i,o){const r=e.context;(0,C.Z)(i,Ne,e.camera.positionWC),(0,m.Z)(o)&&t(o.unclassifiedCommand,e,r,n);const s=i.length;for(let o=0;o<s;++o)t(i[o],e,r,n)}function Fe(e,t,n,i,o){const r=e.context;(0,C.Z)(i,Me,e.camera.positionWC),(0,m.Z)(o)&&t(o.unclassifiedCommand,e,r,n);const s=i.length;for(let o=0;o<s;++o)t(i[o],e,r,n)}function Be(e,t,n,i){const o=e.context;(0,C.Z)(i,Ne,e.camera.positionWC);const r=i.length;for(let s=0;s<r;++s)t(i[s],e,o,n)}De=S.Z.inverseTransformation(De,De);const Ue=new D.Z,ke=new O.Z,Ve=new I.Z,He=new P.Z;function ze(e,t){const n=e.camera,i=e.context,o=e.frameState,r=i.uniformState;let s;r.updateCamera(n),s=(0,m.Z)(n.frustum.fov)?n.frustum.clone(Ue):(0,m.Z)(n.frustum.infiniteProjectionMatrix)?n.frustum.clone(ke):(0,m.Z)(n.frustum.width)?n.frustum.clone(Ve):n.frustum.clone(He),s.near=n.frustum.near,s.far=n.frustum.far,r.updateFrustum(s),r.updatePass(k.Z.ENVIRONMENT);const a=o.passes,c=a.pick,l=e._environmentState,u=e._view,d=l.renderTranslucentDepthForPick,h=l.useWebVR;if(!c){const n=l.skyBoxCommand;if((0,m.Z)(n)&&Oe(n,e,i,t),l.isSkyAtmosphereVisible&&Oe(l.skyAtmosphereCommand,e,i,t),l.isSunVisible&&(l.sunDrawCommand.execute(i,t),e.sunBloom&&!h)){let n;n=l.useGlobeDepthFramebuffer?u.globeDepth.framebuffer:l.usePostProcess?u.sceneFramebuffer.framebuffer:l.originalFramebuffer,e._sunPostProcess.execute(i),e._sunPostProcess.copy(i,n),t.framebuffer=n}l.isMoonVisible&&l.moonCommand.execute(i,t)}let f;l.useOIT?((0,m.Z)(e._executeOITFunction)||(e._executeOITFunction=function(e,t,n,o,r){u.globeDepth.prepareColorTextures(i),u.oit.executeCommands(e,t,n,o,r)}),f=e._executeOITFunction):f=a.render?Re:Fe;const p=u.frustumCommandsList,_=p.length,g=l.clearGlobeDepth,Z=l.useDepthPlane,y=e._globeTranslucencyState,b=y.translucent,v=e._view.globeTranslucencyFramebuffer,A=e._depthClearCommand,T=e._stencilClearCommand,w=e._classificationStencilClearCommand,E=e._depthPlane,S=l.usePostProcessSelected,C=n.position.z;let x;for(let a=0;a<_;++a){const h=_-a-1,I=p[h];e.mode===ue.Z.SCENE2D?(n.position.z=C-I.near+1,s.far=Math.max(1,I.far-I.near),s.near=1,r.update(o),r.updateFrustum(s)):(s.near=0!==h?I.near*e.opaqueFrustumNearOffset:I.near,s.far=I.far,r.updateFrustum(s)),A.execute(i,t),i.stencilBuffer&&T.execute(i,t),r.updatePass(k.Z.GLOBE);let P=I.commands[k.Z.GLOBE],D=I.indices[k.Z.GLOBE];if(b)y.executeGlobeCommands(I,Oe,v,e,t);else for(x=0;x<D;++x)Oe(P[x],e,i,t);const O=u.globeDepth;if((0,m.Z)(O)&&l.useGlobeDepthFramebuffer&&O.executeCopyDepth(i,t),!l.renderTranslucentDepthForPick)if(r.updatePass(k.Z.TERRAIN_CLASSIFICATION),P=I.commands[k.Z.TERRAIN_CLASSIFICATION],D=I.indices[k.Z.TERRAIN_CLASSIFICATION],b)y.executeGlobeClassificationCommands(I,Oe,v,e,t);else for(x=0;x<D;++x)Oe(P[x],e,i,t);if(g&&(A.execute(i,t),Z&&E.execute(i,t)),!l.useInvertClassification||c||l.renderTranslucentDepthForPick){for(r.updatePass(k.Z.CESIUM_3D_TILE),P=I.commands[k.Z.CESIUM_3D_TILE],D=I.indices[k.Z.CESIUM_3D_TILE],x=0;x<D;++x)Oe(P[x],e,i,t);if(D>0&&((0,m.Z)(O)&&l.useGlobeDepthFramebuffer&&(O.prepareColorTextures(i,g),O.executeUpdateDepth(i,t,g,O.depthStencilTexture)),!l.renderTranslucentDepthForPick))for(r.updatePass(k.Z.CESIUM_3D_TILE_CLASSIFICATION),P=I.commands[k.Z.CESIUM_3D_TILE_CLASSIFICATION],D=I.indices[k.Z.CESIUM_3D_TILE_CLASSIFICATION],x=0;x<D;++x)Oe(P[x],e,i,t)}else{e._invertClassification.clear(i,t);const n=t.framebuffer;for(t.framebuffer=e._invertClassification._fbo.framebuffer,r.updatePass(k.Z.CESIUM_3D_TILE),P=I.commands[k.Z.CESIUM_3D_TILE],D=I.indices[k.Z.CESIUM_3D_TILE],x=0;x<D;++x)Oe(P[x],e,i,t);for((0,m.Z)(O)&&l.useGlobeDepthFramebuffer&&(e._invertClassification.prepareTextures(i),O.executeUpdateDepth(i,t,g,e._invertClassification._fbo.getDepthStencilTexture())),r.updatePass(k.Z.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW),P=I.commands[k.Z.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW],D=I.indices[k.Z.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW],x=0;x<D;++x)Oe(P[x],e,i,t);for(t.framebuffer=n,e._invertClassification.executeClassified(i,t),1===o.invertClassificationColor.alpha&&e._invertClassification.executeUnclassified(i,t),D>0&&i.stencilBuffer&&w.execute(i,t),r.updatePass(k.Z.CESIUM_3D_TILE_CLASSIFICATION),P=I.commands[k.Z.CESIUM_3D_TILE_CLASSIFICATION],D=I.indices[k.Z.CESIUM_3D_TILE_CLASSIFICATION],x=0;x<D;++x)Oe(P[x],e,i,t)}for(D>0&&i.stencilBuffer&&T.execute(i,t),r.updatePass(k.Z.VOXELS),P=I.commands[k.Z.VOXELS],D=I.indices[k.Z.VOXELS],P.length=D,Be(e,Oe,t,P),r.updatePass(k.Z.OPAQUE),P=I.commands[k.Z.OPAQUE],D=I.indices[k.Z.OPAQUE],x=0;x<D;++x)Oe(P[x],e,i,t);let L;if(0!==h&&e.mode!==ue.Z.SCENE2D&&(s.near=I.near,r.updateFrustum(s)),!c&&l.useInvertClassification&&o.invertClassificationColor.alpha<1&&(L=e._invertClassification),r.updatePass(k.Z.TRANSLUCENT),P=I.commands[k.Z.TRANSLUCENT],P.length=I.indices[k.Z.TRANSLUCENT],f(e,Oe,t,P,L),I.indices[k.Z.CESIUM_3D_TILE_CLASSIFICATION]>0&&u.translucentTileClassification.isSupported()&&(u.translucentTileClassification.executeTranslucentCommands(e,Oe,t,P,O.depthStencilTexture),u.translucentTileClassification.executeClassificationCommands(e,Oe,t,I)),i.depthTexture&&e.useDepthPicking&&(l.useGlobeDepthFramebuffer||d)){const n=O.depthStencilTexture,o=e._picking.getPickDepth(e,h);o.update(i,n),o.executeCopyDepth(i,t)}if(c||!S)continue;const N=t.framebuffer;if(t.framebuffer=u.sceneFramebuffer.getIdFramebuffer(),s.near=0!==h?I.near*e.opaqueFrustumNearOffset:I.near,s.far=I.far,r.updateFrustum(s),r.updatePass(k.Z.GLOBE),P=I.commands[k.Z.GLOBE],D=I.indices[k.Z.GLOBE],b)y.executeGlobeCommands(I,Le,v,e,t);else for(x=0;x<D;++x)Le(P[x],e,i,t);for(g&&(A.framebuffer=t.framebuffer,A.execute(i,t),A.framebuffer=void 0),g&&Z&&E.execute(i,t),r.updatePass(k.Z.CESIUM_3D_TILE),P=I.commands[k.Z.CESIUM_3D_TILE],D=I.indices[k.Z.CESIUM_3D_TILE],x=0;x<D;++x)Le(P[x],e,i,t);for(r.updatePass(k.Z.OPAQUE),P=I.commands[k.Z.OPAQUE],D=I.indices[k.Z.OPAQUE],x=0;x<D;++x)Le(P[x],e,i,t);for(r.updatePass(k.Z.TRANSLUCENT),P=I.commands[k.Z.TRANSLUCENT],D=I.indices[k.Z.TRANSLUCENT],x=0;x<D;++x)Le(P[x],e,i,t);t.framebuffer=N}}function Ge(e){e.context.uniformState.updatePass(k.Z.COMPUTE);const t=e._environmentState.sunComputeCommand;(0,m.Z)(t)&&t.execute(e._computeEngine);const n=e._computeCommandList,i=n.length;for(let t=0;t<i;++t)n[t].execute(e._computeEngine)}function je(e,t,n){const i=n.shadowMapCullingVolume,o=n.isPointLight,r=n.passes,s=r.length,a=t.length;for(let n=0;n<a;++n){const a=t[n];if(e.updateDerivedCommands(a),a.castShadows&&(a.pass===k.Z.GLOBE||a.pass===k.Z.CESIUM_3D_TILE||a.pass===k.Z.OPAQUE||a.pass===k.Z.TRANSLUCENT)&&e.isVisible(a,i))if(o)for(let e=0;e<s;++e)r[e].commandList.push(a);else if(1===s)r[0].commandList.push(a);else{let t=!1;for(let n=s-1;n>=0;--n){const i=r[n].cullingVolume;if(e.isVisible(a,i))r[n].commandList.push(a),t=!0;else if(t)break}}}}function We(e){const t=e.frameState,n=t.shadowState.shadowMaps,i=n.length;if(!t.shadowState.shadowsEnabled)return;const o=e.context,r=o.uniformState;for(let t=0;t<i;++t){const i=n[t];if(i.outOfView)continue;const s=i.passes,a=s.length;for(let e=0;e<a;++e)s[e].commandList.length=0;je(e,e.frameState.commandList,i);for(let n=0;n<a;++n){const s=i.passes[n];r.updateCamera(s.camera),i.updatePass(o,n);const a=s.commandList.length;for(let n=0;n<a;++n){const i=s.commandList[n];r.updatePass(i.pass),Oe(i.derivedCommands.shadows.castCommands[t],e,o,s.passState)}}}}const qe=new s.Z;Ae.prototype.updateAndExecuteCommands=function(e,t){const n=this._frameState.mode;this._environmentState.useWebVR?function(e,t,n){const i=e._view,o=i.camera,r=e._environmentState.renderTranslucentDepthForPick;rt(e,t,n),ot(e),i.createPotentiallyVisibleSet(e),Ge(e),r||We(e);const a=t.viewport;a.x=0,a.y=0,a.width=.5*a.width;const c=z.Z.clone(o,e._cameraVR);c.frustum=o.frustum;const l=o.frustum.near,u=l*(0,p.Z)(e.focalLength,5),d=(0,p.Z)(e.eyeSeparation,u/30),h=s.Z.multiplyByScalar(c.right,.5*d,qe);o.frustum.aspectRatio=a.width/a.height;const f=.5*d*l/u;s.Z.add(c.position,h,o.position),o.frustum.xOffset=f,ze(e,t),a.x=a.width,s.Z.subtract(c.position,h,o.position),o.frustum.xOffset=-f,ze(e,t),z.Z.clone(c,o)}(this,e,t):n!==ue.Z.SCENE2D||this._mapMode2D===ne.Z.ROTATE?nt(!0,this,e,t):(rt(this,e,t),function(e,t){const n=e.context,o=e.frameState,r=e.camera,a=t.viewport,c=i.Z.clone(a,tt);t.viewport=c;const l=Ye,u=Xe;e.mapProjection.project(l,u);const d=s.Z.clone(r.position,Je),h=S.Z.clone(r.transform,$e),f=r.frustum.clone();r._setTransform(S.Z.IDENTITY);const p=S.Z.computeViewportTransformation(c,0,1,Qe),m=r.frustum.projectionMatrix,_=r.positionWC.y,g=s.Z.fromElements(E.Z.sign(_)*u.x-_,0,-r.positionWC.x,Ke),Z=M.Z.pointToGLWindowCoordinates(m,p,g,et);Z.x=Math.floor(Z.x);const y=c.x,b=c.width;if(0===_||Z.x<=y||Z.x>=y+b)nt(!0,e,t);else if(Math.abs(y+.5*b-Z.x)<1)c.width=Z.x-c.x,r.position.x*=E.Z.sign(r.position.x),r.frustum.right=0,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!0,e,t),c.x=Z.x,r.position.x=-r.position.x,r.frustum.right=-r.frustum.left,r.frustum.left=0,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!1,e,t);else if(Z.x>y+.5*b){c.width=Z.x-y;const i=r.frustum.right;r.frustum.right=u.x-_,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!0,e,t),c.x=Z.x,c.width=y+b-Z.x,r.position.x=-r.position.x,r.frustum.left=-r.frustum.right,r.frustum.right=i-2*r.frustum.right,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!1,e,t)}else{c.x=Z.x,c.width=y+b-Z.x;const i=r.frustum.left;r.frustum.left=-u.x-_,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!0,e,t),c.x=y,c.width=Z.x-y,r.position.x=-r.position.x,r.frustum.right=-r.frustum.left,r.frustum.left=i-2*r.frustum.left,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!1,e,t)}r._setTransform(h),s.Z.clone(d,r.position),r.frustum=f.clone(),t.viewport=a}(this,e))};const Ye=new a.Z(Math.PI,E.Z.PI_OVER_TWO),Xe=new s.Z,Je=new s.Z,Qe=new S.Z,$e=new S.Z,Ke=new s.Z,et=new s.Z,tt=new i.Z;function nt(e,t,n,i){const o=t._environmentState,r=t._view,s=o.renderTranslucentDepthForPick;e||(t.frameState.commandList.length=0),ot(t),r.createPotentiallyVisibleSet(t),e&&((0,m.Z)(i)&&rt(t,n,i),Ge(t),s||We(t)),ze(t,n)}const it=new f.Z;function ot(e){const t=e._frameState;e._groundPrimitives.update(t),e._primitives.update(t),function(e){const t=e._frameState;e.debugShowFrustumPlanes!==e._debugShowFrustumPlanes&&(e.debugShowFrustumPlanes?e._debugFrustumPlanes=new q.Z({camera:e.camera,updateOnChange:!1,frustumSplits:t.frustumSplits}):e._debugFrustumPlanes=e._debugFrustumPlanes&&e._debugFrustumPlanes.destroy(),e._debugShowFrustumPlanes=e.debugShowFrustumPlanes),(0,m.Z)(e._debugFrustumPlanes)&&e._debugFrustumPlanes.update(t)}(e),function(e){const t=e._frameState,n=t.shadowMaps,i=n.length,o=i>0&&!t.passes.pick&&e.mode===ue.Z.SCENE3D;if(o!==t.shadowState.shadowsEnabled&&(++t.shadowState.lastDirtyTime,t.shadowState.shadowsEnabled=o),t.shadowState.lightShadowsEnabled=!1,o){for(let e=0;e<i;++e)if(n[e]!==t.shadowState.shadowMaps[e]){++t.shadowState.lastDirtyTime;break}t.shadowState.shadowMaps.length=0,t.shadowState.lightShadowMaps.length=0;for(let e=0;e<i;++e){const i=n[e];i.update(t),t.shadowState.shadowMaps.push(i),i.fromLightSource&&(t.shadowState.lightShadowMaps.push(i),t.shadowState.lightShadowsEnabled=!0),i.dirty&&(++t.shadowState.lastDirtyTime,i.dirty=!1)}}}(e),e._globe&&e._globe.render(t)}function rt(e,t,n){const i=e._context,o=e._frameState,r=e._environmentState,s=e._view,a=e._frameState.passes.pick;(0,m.Z)(s.globeDepth)&&(s.globeDepth.picking=a);const c=r.useWebVR;r.originalFramebuffer=t.framebuffer,(0,m.Z)(e.sun)&&e.sunBloom!==e._sunBloom?(e.sunBloom&&!c?e._sunPostProcess=new ge.Z:(0,m.Z)(e._sunPostProcess)&&(e._sunPostProcess=e._sunPostProcess.destroy()),e._sunBloom=e.sunBloom):!(0,m.Z)(e.sun)&&(0,m.Z)(e._sunPostProcess)&&(e._sunPostProcess=e._sunPostProcess.destroy(),e._sunBloom=!1);const l=e._clearColorCommand;u.Z.clone(n,l.color),l.execute(i,t);const d=r.useGlobeDepthFramebuffer=(0,m.Z)(s.globeDepth);d&&(s.globeDepth.update(i,t,s.viewport,e.msaaSamples,e._hdr,r.clearGlobeDepth),s.globeDepth.clear(i,t,n));const h=s.oit,f=r.useOIT=!a&&(0,m.Z)(h)&&h.isSupported();f&&(h.update(i,t,s.globeDepth.colorFramebufferManager,e._hdr,e.msaaSamples),h.clear(i,t,n),r.useOIT=h.isSupported());const p=e.postProcessStages;let _=r.usePostProcess=!a&&(e._hdr||p.length>0||p.ambientOcclusion.enabled||p.fxaa.enabled||p.bloom.enabled);if(r.usePostProcessSelected=!1,_&&(s.sceneFramebuffer.update(i,s.viewport,e._hdr,e.msaaSamples),s.sceneFramebuffer.clear(i,t,n),p.update(i,o.useLogDepth,e._hdr),p.clear(i),_=r.usePostProcess=p.ready,r.usePostProcessSelected=_&&p.hasSelected),r.isSunVisible&&e.sunBloom&&!c?(t.framebuffer=e._sunPostProcess.update(t),e._sunPostProcess.clear(i,t,n)):d?t.framebuffer=s.globeDepth.framebuffer:_&&(t.framebuffer=s.sceneFramebuffer.framebuffer),(0,m.Z)(t.framebuffer)&&l.execute(i,t),r.useInvertClassification=!a&&(0,m.Z)(t.framebuffer)&&e.invertClassification){let n;if(1===e.frameState.invertClassificationColor.alpha&&r.useGlobeDepthFramebuffer&&(n=s.globeDepth.framebuffer),(0,m.Z)(n)||i.depthTexture){if(e._invertClassification.previousFramebuffer=n,e._invertClassification.update(i,e.msaaSamples,s.globeDepth.colorFramebufferManager),e._invertClassification.clear(i,t),e.frameState.invertClassificationColor.alpha<1&&f){const t=e._invertClassification.unclassifiedCommand,n=t.derivedCommands;n.oit=h.createDerivedCommands(t,i,n.oit)}}else r.useInvertClassification=!1}e._globeTranslucencyState.translucent&&s.globeTranslucencyFramebuffer.updateAndClear(e._hdr,s.viewport,i,t)}function st(e){e._jobScheduler.resetBudgets();const t=e._frameState;e.primitives.prePassesUpdate(t),(0,m.Z)(e.globe)&&e.globe.update(t),e._picking.update(),t.creditDisplay.update()}function at(e){const t=e._frameState;e.primitives.postPassesUpdate(t),L.Z.update()}Ae.prototype.updateEnvironment=function(){const e=this._frameState,t=this._view,n=this._environmentState,i=e.passes.render,o=e.passes.offscreen,r=this.skyAtmosphere,s=this.globe,a=this._globeTranslucencyState;if(!i||this._mode!==ue.Z.SCENE2D&&t.camera.frustum instanceof I.Z||!a.environmentVisible)n.skyAtmosphereCommand=void 0,n.skyBoxCommand=void 0,n.sunDrawCommand=void 0,n.sunComputeCommand=void 0,n.moonCommand=void 0;else{(0,m.Z)(r)?((0,m.Z)(s)&&(r.setDynamicAtmosphereColor(s.enableLighting&&s.dynamicAtmosphereLighting,s.dynamicAtmosphereLightingFromSun),n.isReadyForAtmosphere=n.isReadyForAtmosphere||s._surface._tilesToRender.length>0),n.skyAtmosphereCommand=r.update(e,s),(0,m.Z)(n.skyAtmosphereCommand)&&this.updateDerivedCommands(n.skyAtmosphereCommand)):n.skyAtmosphereCommand=void 0,n.skyBoxCommand=(0,m.Z)(this.skyBox)?this.skyBox.update(e,this._hdr):void 0;const i=(0,m.Z)(this.sun)?this.sun.update(e,t.passState,this._hdr):void 0;n.sunDrawCommand=(0,m.Z)(i)?i.drawCommand:void 0,n.sunComputeCommand=(0,m.Z)(i)?i.computeCommand:void 0,n.moonCommand=(0,m.Z)(this.moon)?this.moon.update(e):void 0}const c=n.clearGlobeDepth=(0,m.Z)(s)&&s.show&&(!s.depthTestAgainstTerrain||this.mode===ue.Z.SCENE2D);(n.useDepthPlane=c&&this.mode===ue.Z.SCENE3D&&a.useDepthPlane)&&this._depthPlane.update(e),n.renderTranslucentDepthForPick=!1,n.useWebVR=this._useWebVR&&this.mode!==ue.Z.SCENE2D&&!o;const l=e.mode!==ue.Z.SCENE3D||a.sunVisibleThroughGlobe?void 0:e.occluder;let u=e.cullingVolume;const d=it.planes;for(let e=0;e<5;++e)d[e]=u.planes[e];u=it,n.isSkyAtmosphereVisible=(0,m.Z)(n.skyAtmosphereCommand)&&n.isReadyForAtmosphere,n.isSunVisible=this.isVisible(n.sunDrawCommand,u,l),n.isMoonVisible=this.isVisible(n.moonCommand,u,l);const h=this.specularEnvironmentMaps;let f=this._specularEnvironmentMapAtlas;!(0,m.Z)(h)||(0,m.Z)(f)&&f.url===h?!(0,m.Z)(h)&&(0,m.Z)(f)&&(f.destroy(),this._specularEnvironmentMapAtlas=void 0):(f=f&&f.destroy(),this._specularEnvironmentMapAtlas=new ie.Z(h)),(0,m.Z)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.update(e)},Ae.prototype.resolveFramebuffers=function(e){const t=this._context,n=this._environmentState,i=this._view,o=i.globeDepth;(0,m.Z)(o)&&o.prepareColorTextures(t);const r=n.useOIT,s=n.useGlobeDepthFramebuffer,a=n.usePostProcess,c=n.originalFramebuffer,l=s?o.colorFramebufferManager:void 0,u=i.sceneFramebuffer._colorFramebuffer,d=i.sceneFramebuffer.idFramebuffer;r&&(e.framebuffer=a?u.framebuffer:c,i.oit.execute(t,e));const h=i.translucentTileClassification;if(h.hasTranslucentDepth&&h.isSupported()&&h.execute(this,e),a){i.sceneFramebuffer.prepareColorTextures(t);let e=u;s&&!r&&(e=l);const n=this.postProcessStages,o=e.getColorTexture(0),a=d.getColorTexture(0),h=(0,p.Z)(l,u).getDepthStencilTexture();n.execute(t,o,h,a),n.copy(t,c)}r||a||!s||(e.framebuffer=c,o.executeCopyColor(t,e))},Ae.prototype.initializeFrame=function(){120==this._shaderFrameCount++&&(this._shaderFrameCount=0,this._context.shaderCache.destroyReleasedShaderPrograms(),this._context.textureCache.destroyReleasedTextures()),this._tweens.update(),this._globeHeight=function(e){const t=e._globe,n=e.camera.positionCartographic;if((0,m.Z)(t)&&t.show&&(0,m.Z)(n))return t.getHeight(n)}(this),this._cameraUnderground=function(e){const t=e.camera,n=e._mode,i=e.globe,o=e._screenSpaceCameraController,r=t.positionCartographic;if(!(0,m.Z)(r))return!1;if(!o.onMap()&&r.height<0)return!0;if(!(0,m.Z)(i)||!i.show||n===ue.Z.SCENE2D||n===ue.Z.MORPHING)return!1;const s=e._globeHeight;return(0,m.Z)(s)&&r.height<s}(this),this._globeTranslucencyState.update(this),this._screenSpaceCameraController.update(),(0,m.Z)(this._deviceOrientationCameraController)&&this._deviceOrientationCameraController.update(),this.camera.update(this._mode),this.camera._updateCameraChanged()};const ct=new u.Z;function lt(e){const t=e._frameState,n=e.context,o=n.uniformState,r=e._defaultView;e._view=r,e.updateFrameState(),t.passes.render=!0,t.passes.postProcess=e.postProcessStages.hasSelected,t.tilesetPassState=we;let a=(0,p.Z)(e.backgroundColor,u.Z.BLACK);e._hdr&&(a=u.Z.clone(a,ct),a.red=Math.pow(a.red,e.gamma),a.green=Math.pow(a.green,e.gamma),a.blue=Math.pow(a.blue,e.gamma)),t.backgroundColor=a,e.fog.update(t),o.update(t);const c=e.shadowMap;(0,m.Z)(c)&&c.enabled&&(!(0,m.Z)(e.light)||e.light instanceof _e.Z?s.Z.negate(o.sunDirectionWC,e._shadowMapCamera.direction):s.Z.clone(e.light.direction,e._shadowMapCamera.direction),t.shadowMaps.push(c)),e._computeCommandList.length=0,e._overlayCommandList.length=0;const l=r.viewport;l.x=0,l.y=0,l.width=n.drawingBufferWidth,l.height=n.drawingBufferHeight;const d=r.passState;d.framebuffer=void 0,d.blendingEnabled=void 0,d.scissorTest=void 0,d.viewport=i.Z.clone(l,d.viewport),(0,m.Z)(e.globe)&&e.globe.beginFrame(t),e.updateEnvironment(),e.updateAndExecuteCommands(d,a),e.resolveFramebuffers(d),d.framebuffer=void 0,function(e,t){e.context.uniformState.updatePass(k.Z.OVERLAY);const n=e.context,i=e._overlayCommandList,o=i.length;for(let e=0;e<o;++e)i[e].execute(n,t)}(e,d),(0,m.Z)(e.globe)&&(e.globe.endFrame(t),e.globe.tilesLoaded||(e._renderRequested=!0)),n.endFrame()}function ut(e,t){try{t(e)}catch(t){if(e._renderError.raiseEvent(e,t),e.rethrowRenderErrors)throw t}}function dt(e){return e._picking.updateMostDetailedRayPicks(e)}function ht(e){const t=e._frameState;Ee.camera=t.camera,Ee.cullingVolume=t.cullingVolume,e.primitives.updateForPass(t,Ee)}function ft(e){const t=e._frameState;t.camera.canPreloadFlight()&&(Se.camera=e.preloadFlightCamera,Se.cullingVolume=e.preloadFlightCullingVolume,e.primitives.updateForPass(t,Se))}function pt(e){e.primitives.updateForPass(e._frameState,Ce)}Ae.prototype.render=function(e){this._preUpdate.raiseEvent(this,e);const t=this._frameState;t.newFrame=!1,(0,m.Z)(e)||(e=w.Z.now());const n=this._view.checkForCameraUpdates(this);let i=!this.requestRenderMode||this._renderRequested||n||this._logDepthBufferDirty||this._hdrDirty||this.mode===ue.Z.MORPHING;if(!i&&(0,m.Z)(this.maximumRenderTimeChange)&&(0,m.Z)(this._lastRenderTime)){const t=Math.abs(w.Z.secondsDifference(this._lastRenderTime,e));i=i||t>this.maximumRenderTimeChange}i&&(this._lastRenderTime=w.Z.clone(e,this._lastRenderTime),this._renderRequested=!1,this._logDepthBufferDirty=!1,this._hdrDirty=!1,Pe(this,E.Z.incrementWrap(t.frameNumber,15e6,1),e),t.newFrame=!0),ut(this,st),this.primitives.show&&(ut(this,dt),ut(this,ht),ut(this,ft),i||ut(this,pt)),this._postUpdate.raiseEvent(this,e),i&&(this._preRender.raiseEvent(this,e),t.creditDisplay.beginFrame(),ut(this,lt)),function(e,t){if(e.debugShowFramesPerSecond){if(!(0,m.Z)(e._performanceDisplay)){const t=document.createElement("div");t.className="cesium-performanceDisplay-defaultContainer",e._canvas.parentNode.appendChild(t);const n=new oe.Z({container:t});e._performanceDisplay=n,e._performanceContainer=t}e._performanceDisplay.throttled=e.requestRenderMode,e._performanceDisplay.update(t)}else(0,m.Z)(e._performanceDisplay)&&(e._performanceDisplay=e._performanceDisplay&&e._performanceDisplay.destroy(),e._performanceContainer.parentNode.removeChild(e._performanceContainer))}(this,i),ut(this,at),function(e){const t=e._frameState.afterRender;for(let n=0,i=t.length;n<i;++n)t[n]()&&e.requestRender();t.length=0}(this),i&&(this._postRender.raiseEvent(this,e),t.creditDisplay.endFrame())},Ae.prototype.forceRender=function(e){this._renderRequested=!0,this.render(e)},Ae.prototype.requestRender=function(){this._renderRequested=!0},Ae.prototype.clampLineWidth=function(e){return Math.max(U.Z.minimumAliasedLineWidth,Math.min(e,U.Z.maximumAliasedLineWidth))},Ae.prototype.pick=function(e,t,n){return this._picking.pick(this,e,t,n)},Ae.prototype.pickPositionWorldCoordinates=function(e,t){return this._picking.pickPositionWorldCoordinates(this,e,t)},Ae.prototype.pickPosition=function(e,t){return this._picking.pickPosition(this,e,t)},Ae.prototype.drillPick=function(e,t,n,i){return this._picking.drillPick(this,e,t,n,i)},Ae.prototype.pickFromRay=function(e,t,n){return this._picking.pickFromRay(this,e,t,n)},Ae.prototype.drillPickFromRay=function(e,t,n,i){return this._picking.drillPickFromRay(this,e,t,n,i)},Ae.prototype.pickFromRayMostDetailed=function(e,t,n){return this._picking.pickFromRayMostDetailed(this,e,t,n)},Ae.prototype.drillPickFromRayMostDetailed=function(e,t,n,i){return this._picking.drillPickFromRayMostDetailed(this,e,t,n,i)},Ae.prototype.sampleHeight=function(e,t,n){return this._picking.sampleHeight(this,e,t,n)},Ae.prototype.clampToHeight=function(e,t,n,i){return this._picking.clampToHeight(this,e,t,n,i)},Ae.prototype.sampleHeightMostDetailed=function(e,t,n){return this._picking.sampleHeightMostDetailed(this,e,t,n)},Ae.prototype.clampToHeightMostDetailed=function(e,t,n){return this._picking.clampToHeightMostDetailed(this,e,t,n)},Ae.prototype.cartesianToCanvasCoordinates=function(e,t){return de.Z.wgs84ToWindowCoordinates(this,e,t)},Ae.prototype.completeMorph=function(){this._transitioner.completeMorph()},Ae.prototype.morphTo2D=function(e){let t;const n=this.globe;t=(0,m.Z)(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=(0,p.Z)(e,2),this._transitioner.morphTo2D(e,t)},Ae.prototype.morphToColumbusView=function(e){let t;const n=this.globe;t=(0,m.Z)(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=(0,p.Z)(e,2),this._transitioner.morphToColumbusView(e,t)},Ae.prototype.morphTo3D=function(e){let t;const n=this.globe;t=(0,m.Z)(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=(0,p.Z)(e,2),this._transitioner.morphTo3D(e,t)},Ae.prototype.setTerrain=function(e){return c.Z.typeOf.object("terrain",e),function(e,t){e._removeTerrainProviderReadyListener=e._removeTerrainProviderReadyListener&&e._removeTerrainProviderReadyListener(),t.ready?(0,m.Z)(e.globe)&&(e.globe.terrainProvider=t.provider):(e.globe.terrainProvider=void 0,e._removeTerrainProviderReadyListener=t.readyEvent.addEventListener((t=>{(0,m.Z)(e)&&(0,m.Z)(e.globe)&&(e.globe.terrainProvider=t),e._removeTerrainProviderReadyListener()})))}(this,e),e},Ae.prototype.isDestroyed=function(){return!1},Ae.prototype.destroy=function(){this._tweens.removeAll(),this._computeEngine=this._computeEngine&&this._computeEngine.destroy(),this._screenSpaceCameraController=this._screenSpaceCameraController&&this._screenSpaceCameraController.destroy(),this._deviceOrientationCameraController=this._deviceOrientationCameraController&&!this._deviceOrientationCameraController.isDestroyed()&&this._deviceOrientationCameraController.destroy(),this._primitives=this._primitives&&this._primitives.destroy(),this._groundPrimitives=this._groundPrimitives&&this._groundPrimitives.destroy(),this._globe=this._globe&&this._globe.destroy(),this._removeTerrainProviderReadyListener=this._removeTerrainProviderReadyListener&&this._removeTerrainProviderReadyListener(),this.skyBox=this.skyBox&&this.skyBox.destroy(),this.skyAtmosphere=this.skyAtmosphere&&this.skyAtmosphere.destroy(),this._debugSphere=this._debugSphere&&this._debugSphere.destroy(),this.sun=this.sun&&this.sun.destroy(),this._sunPostProcess=this._sunPostProcess&&this._sunPostProcess.destroy(),this._depthPlane=this._depthPlane&&this._depthPlane.destroy(),this._transitioner=this._transitioner&&this._transitioner.destroy(),this._debugFrustumPlanes=this._debugFrustumPlanes&&this._debugFrustumPlanes.destroy(),this._brdfLutGenerator=this._brdfLutGenerator&&this._brdfLutGenerator.destroy(),this._picking=this._picking&&this._picking.destroy(),this._defaultView=this._defaultView&&this._defaultView.destroy(),this._view=void 0,this._removeCreditContainer&&this._canvas.parentNode.removeChild(this._creditContainer),this.postProcessStages=this.postProcessStages&&this.postProcessStages.destroy(),this._context=this._context&&this._context.destroy(),this._frameState.creditDisplay=this._frameState.creditDisplay&&this._frameState.creditDisplay.destroy(),(0,m.Z)(this._performanceDisplay)&&(this._performanceDisplay=this._performanceDisplay&&this._performanceDisplay.destroy(),this._performanceContainer.parentNode.removeChild(this._performanceContainer)),this._removeRequestListenerCallback(),this._removeTaskProcessorListenerCallback();for(let e=0;e<this._removeGlobeCallbacks.length;++e)this._removeGlobeCallbacks[e]();return this._removeGlobeCallbacks.length=0,(0,_.Z)(this)};const mt=Ae},17993:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(35961),o=n(722313),r=n(598020),s=n(12503),a=n(545870);function c(){this._numSamples=1,this._colorFramebuffer=new s.Z({depthStencil:!0,supportsDepthTexture:!0}),this._idFramebuffer=new s.Z({depthStencil:!0,supportsDepthTexture:!0}),this._idClearColor=new i.Z(0,0,0,0),this._clearCommand=new r.Z({color:new i.Z(0,0,0,0),depth:1,owner:this})}Object.defineProperties(c.prototype,{framebuffer:{get:function(){return this._colorFramebuffer.framebuffer}},idFramebuffer:{get:function(){return this._idFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._colorFramebuffer.getDepthStencilTexture()}}}),c.prototype.update=function(e,t,n,i){const o=t.width,r=t.height,s=n?e.halfFloatingPointTexture?a.Z.HALF_FLOAT:a.Z.FLOAT:a.Z.UNSIGNED_BYTE;this._numSamples=i,this._colorFramebuffer.update(e,o,r,i,s),this._idFramebuffer.update(e,o,r)},c.prototype.clear=function(e,t,n){i.Z.clone(n,this._clearCommand.color),i.Z.clone(this._idClearColor,this._clearCommand.color),this._colorFramebuffer.clear(e,this._clearCommand,t),this._idFramebuffer.clear(e,this._clearCommand,t)},c.prototype.getFramebuffer=function(){return this._colorFramebuffer.framebuffer},c.prototype.getIdFramebuffer=function(){return this._idFramebuffer.framebuffer},c.prototype.prepareColorTextures=function(e){this._numSamples>1&&this._colorFramebuffer.prepareTextures(e)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){var e;return(e=this)._colorFramebuffer.destroy(),e._idFramebuffer.destroy(),(0,o.Z)(this)};const l=c},645875:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ee});var i=n(660904),o=n(532056),r=n(790087),s=n(11020),a=n(722313),c=n(942841),l=n(344485),u=n(659635),d=n(223689),h=n(299594),f=n(134282),p=n(638601),m=n(809069),_=n(271533),g=n(720794),Z=n(518931),y=n(714233);function b(e){r.Z.typeOf.object("scene",e),this._scene=e,this._currentTweens=[],this._morphHandler=void 0,this._morphCancelled=!1,this._completeMorph=void 0,this._morphToOrthographic=!1}b.prototype.completeMorph=function(){(0,s.Z)(this._completeMorph)&&this._completeMorph()},b.prototype.morphTo2D=function(e,t){(0,s.Z)(this._completeMorph)&&this._completeMorph();const n=this._scene;this._previousMode=n.mode,this._morphToOrthographic=n.camera.frustum instanceof d.Z,this._previousMode!==y.Z.SCENE2D&&this._previousMode!==y.Z.MORPHING&&(this._scene.morphStart.raiseEvent(this,this._previousMode,y.Z.SCENE2D,!0),n._mode=y.Z.MORPHING,n.camera._setTransform(u.Z.IDENTITY),this._previousMode===y.Z.COLUMBUS_VIEW?function(e,t){t*=.5;const n=e._scene,o=n.camera,r=i.Z.clone(o.position,ie),a=i.Z.clone(o.direction,oe),l=i.Z.clone(o.up,re),d=i.Z.negate(i.Z.UNIT_Z,ae),h=i.Z.clone(i.Z.UNIT_Y,ce),f=se;if(t>0)i.Z.clone(i.Z.ZERO,se),f.z=5*n.mapProjection.ellipsoid.maximumRadius;else{i.Z.clone(r,se);const e=ue;u.Z.multiplyByPoint(Z.Z.TRANSFORM_2D,r,e.origin),u.Z.multiplyByPointAsVector(Z.Z.TRANSFORM_2D,a,e.direction);const t=n.globe;if((0,s.Z)(t)){const o=t.pickWorldCoordinates(e,n,!0,de);(0,s.Z)(o)&&(u.Z.multiplyByPoint(Z.Z.TRANSFORM_2D_INVERSE,o,f),f.z+=i.Z.distance(r,f))}}const p=le;p.right=.5*f.z,p.left=-p.right,p.top=p.right*(n.drawingBufferHeight/n.drawingBufferWidth),p.bottom=-p.top;const m=he;m.position=f,m.direction=d,m.up=h,m.frustum=p;const _=we(m);function g(e,t){e.position.z=t}M(e,_);const y=n.tweens.add({duration:t,easingFunction:c.Z.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(r,f,e.time,o.position),te(a,d,e.time,o.direction),te(l,h,e.time,o.up),i.Z.cross(o.direction,o.up,o.right),i.Z.normalize(o.right,o.right),o._adjustOrthographicFrustum(!0)},complete:function(){ne(e,t,m,g,_)}});e._currentTweens.push(y)}(this,e):function(e,t,n){t*=.5;const o=e._scene,r=o.camera,a=pe;if(t>0)i.Z.clone(i.Z.ZERO,a.position),a.position.z=5*n.maximumRadius,i.Z.negate(i.Z.UNIT_Z,a.direction),i.Z.clone(i.Z.UNIT_Y,a.up);else{n.cartesianToCartographic(r.positionWC,fe),o.mapProjection.project(fe,a.position),i.Z.negate(i.Z.UNIT_Z,a.direction),i.Z.clone(i.Z.UNIT_Y,a.up);const e=ge;i.Z.clone(a.position2D,e.origin);const t=i.Z.clone(r.directionWC,e.direction),c=n.scaleToGeodeticSurface(r.positionWC,ye),l=g.Z.eastNorthUpToFixedFrame(c,n,Ze);u.Z.inverseTransformation(l,l),u.Z.multiplyByPointAsVector(l,t,t),u.Z.multiplyByPointAsVector(Z.Z.TRANSFORM_2D,t,t);const d=o.globe;if((0,s.Z)(d)){const t=d.pickWorldCoordinates(e,o,!0,_e);if((0,s.Z)(t)){const e=i.Z.distance(a.position2D,t);t.x+=e,i.Z.clone(t,a.position2D)}}}function c(e,t){e.position.x=t}u.Z.multiplyByPoint(Z.Z.TRANSFORM_2D,a.position,a.position2D),u.Z.multiplyByPointAsVector(Z.Z.TRANSFORM_2D,a.direction,a.direction2D),u.Z.multiplyByPointAsVector(Z.Z.TRANSFORM_2D,a.up,a.up2D);const l=a.frustum;l.right=.5*a.position.z,l.left=-l.right,l.top=l.right*(o.drawingBufferHeight/o.drawingBufferWidth),l.bottom=-l.top;const d=me;u.Z.multiplyByPoint(Z.Z.TRANSFORM_2D_INVERSE,a.position2D,d.position),i.Z.clone(a.direction,d.direction),i.Z.clone(a.up,d.up),d.frustum=l;const h=we(d);M(e,h),ve(e,t,a,(function(){ne(e,t,a,c,h)}))}(this,e,t),0===e&&(0,s.Z)(this._completeMorph)&&this._completeMorph())};const v=new i.Z,A=new i.Z,T=new i.Z,w=new i.Z,E=new i.Z,S=new i.Z,C=new i.Z,x=new o.Z,I=new u.Z,P=new f.Z,D=new d.Z,O={position:void 0,direction:void 0,up:void 0,position2D:void 0,direction2D:void 0,up2D:void 0,frustum:void 0};b.prototype.morphToColumbusView=function(e,t){(0,s.Z)(this._completeMorph)&&this._completeMorph();const n=this._scene;if(this._previousMode=n.mode,this._previousMode===y.Z.COLUMBUS_VIEW||this._previousMode===y.Z.MORPHING)return;this._scene.morphStart.raiseEvent(this,this._previousMode,y.Z.COLUMBUS_VIEW,!0),n.camera._setTransform(u.Z.IDENTITY);let o=v;const r=A,a=T;if(e>0)o.x=0,o.y=-1,o.z=1,o=i.Z.multiplyByScalar(i.Z.normalize(o,o),5*t.maximumRadius,o),i.Z.negate(i.Z.normalize(o,r),r),i.Z.cross(i.Z.UNIT_X,r,a);else{const e=n.camera;if(this._previousMode===y.Z.SCENE2D)i.Z.clone(e.position,o),o.z=e.frustum.right-e.frustum.left,i.Z.negate(i.Z.UNIT_Z,r),i.Z.clone(i.Z.UNIT_Y,a);else{i.Z.clone(e.positionWC,o),i.Z.clone(e.directionWC,r),i.Z.clone(e.upWC,a);const s=t.scaleToGeodeticSurface(o,C),c=g.Z.eastNorthUpToFixedFrame(s,t,I);u.Z.inverseTransformation(c,c),n.mapProjection.project(t.cartesianToCartographic(o,x),o),u.Z.multiplyByPointAsVector(c,r,r),u.Z.multiplyByPointAsVector(c,a,a)}}let d;this._morphToOrthographic?(d=D,d.width=n.camera.frustum.right-n.camera.frustum.left,d.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight):(d=P,d.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight,d.fov=l.Z.toRadians(60));const h=O;h.position=o,h.direction=r,h.up=a,h.frustum=d;const f=function(e){return function(t){const n=t._scene;n._mode=y.Z.COLUMBUS_VIEW,n.morphTime=y.Z.getMorphTime(y.Z.COLUMBUS_VIEW),R(t);const o=n.camera;(t._previousModeMode!==y.Z.MORPHING||t._morphCancelled)&&(t._morphCancelled=!1,i.Z.clone(e.position,o.position),i.Z.clone(e.direction,o.direction),i.Z.clone(e.up,o.up),i.Z.cross(o.direction,o.up,o.right),i.Z.normalize(o.right,o.right));const r=o.frustum;n.frameState.useLogDepth&&(r.near=.1,r.far=1e10);const a=(0,s.Z)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,y.Z.COLUMBUS_VIEW,a)}}(h);M(this,f),this._previousMode===y.Z.SCENE2D?function(e,t,n,o){t*=.5;const r=e._scene,s=r.camera,a=i.Z.clone(n.position,$),l=i.Z.clone(n.direction,K),u=i.Z.clone(n.up,ee);function d(){s.frustum=n.frustum.clone();const d=i.Z.clone(s.position,X),h=i.Z.clone(s.direction,J),f=i.Z.clone(s.up,Q);d.z=a.z;const p=r.tweens.add({duration:t,easingFunction:c.Z.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(d,a,e.time,s.position),te(h,l,e.time,s.direction),te(f,u,e.time,s.up),i.Z.cross(s.direction,s.up,s.right),i.Z.normalize(s.right,s.right)},complete:function(){o(e)}});e._currentTweens.push(p)}r._mode=y.Z.MORPHING,e._morphToOrthographic?d():be(e,0,n,d)}(this,e,h,f):(h.position2D=u.Z.multiplyByPoint(Z.Z.TRANSFORM_2D,o,w),h.direction2D=u.Z.multiplyByPointAsVector(Z.Z.TRANSFORM_2D,r,E),h.up2D=u.Z.multiplyByPointAsVector(Z.Z.TRANSFORM_2D,a,S),n._mode=y.Z.MORPHING,ve(this,e,h,f)),0===e&&(0,s.Z)(this._completeMorph)&&this._completeMorph()};const L={position:new i.Z,direction:new i.Z,up:new i.Z,frustum:void 0},N=new f.Z;function M(e,t){if(e._scene.completeMorphOnUserInput){e._morphHandler=new m.Z(e._scene.canvas);const n=function(){e._morphCancelled=!0,e._scene.camera.cancelFlight(),t(e)};e._completeMorph=n,e._morphHandler.setInputAction(n,_.Z.LEFT_DOWN),e._morphHandler.setInputAction(n,_.Z.MIDDLE_DOWN),e._morphHandler.setInputAction(n,_.Z.RIGHT_DOWN),e._morphHandler.setInputAction(n,_.Z.WHEEL)}}function R(e){const t=e._currentTweens;for(let e=0;e<t.length;++e)t[e].cancelTween();e._currentTweens.length=0,e._morphHandler=e._morphHandler&&e._morphHandler.destroy()}b.prototype.morphTo3D=function(e,t){(0,s.Z)(this._completeMorph)&&this._completeMorph();const n=this._scene;if(this._previousMode=n.mode,this._previousMode!==y.Z.SCENE3D&&this._previousMode!==y.Z.MORPHING){if(this._scene.morphStart.raiseEvent(this,this._previousMode,y.Z.SCENE3D,!0),n._mode=y.Z.MORPHING,n.camera._setTransform(u.Z.IDENTITY),this._previousMode===y.Z.SCENE2D)!function(e,t,n){t/=3;const o=e._scene,r=o.camera;let s,a;t>0?(s=L,i.Z.fromDegrees(0,0,5*n.maximumRadius,n,s.position),i.Z.negate(s.position,s.direction),i.Z.normalize(s.direction,s.direction),i.Z.clone(i.Z.UNIT_Z,s.up)):(r.position.z=r.frustum.right-r.frustum.left,s=k(e,n)),e._morphToOrthographic?(a=Y,a.aspectRatio=o.drawingBufferWidth/o.drawingBufferHeight,a.width=r.frustum.right-r.frustum.left):(a=N,a.aspectRatio=o.drawingBufferWidth/o.drawingBufferHeight,a.fov=l.Z.toRadians(60)),s.frustum=a;const c=Te(s);let u;M(e,c),u=e._morphToOrthographic?function(){q(e,t,s,c)}:function(){be(e,t,s,(function(){q(e,t,s,c)}))},t>0?(o._mode=y.Z.SCENE2D,r.flyTo({duration:t,destination:i.Z.fromDegrees(0,0,5*n.maximumRadius,n,$),complete:function(){o._mode=y.Z.MORPHING,u()}})):u()}(this,e,t);else{let o,r;e>0?(o=L,i.Z.fromDegrees(0,0,5*t.maximumRadius,t,o.position),i.Z.negate(o.position,o.direction),i.Z.normalize(o.direction,o.direction),i.Z.clone(i.Z.UNIT_Z,o.up)):o=k(this,t);const s=n.camera;s.frustum instanceof d.Z?r=s.frustum.clone():(r=N,r.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight,r.fov=l.Z.toRadians(60)),o.frustum=r;const a=Te(o);M(this,a),q(this,e,o,a)}0===e&&(0,s.Z)(this._completeMorph)&&this._completeMorph()}},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return R(this),(0,a.Z)(this)};const F=new o.Z,B=new i.Z,U=new u.Z;function k(e,t){const n=e._scene,i=n.camera,o=L,r=o.position,s=o.direction,a=o.up,c=n.mapProjection.unproject(i.position,F);t.cartographicToCartesian(c,r);const l=t.scaleToGeodeticSurface(r,B),d=g.Z.eastNorthUpToFixedFrame(l,t,U);return u.Z.multiplyByPointAsVector(d,i.direction,s),u.Z.multiplyByPointAsVector(d,i.up,a),o}const V=new i.Z,H=new i.Z,z=new i.Z,G=new i.Z,j=new i.Z,W=new i.Z;function q(e,t,n,o){t*=.5;const r=e._scene,s=r.camera,a=i.Z.clone(s.position,V),l=i.Z.clone(s.direction,H),d=i.Z.clone(s.up,z),h=u.Z.multiplyByPoint(Z.Z.TRANSFORM_2D_INVERSE,n.position,G),f=u.Z.multiplyByPointAsVector(Z.Z.TRANSFORM_2D_INVERSE,n.direction,j),p=u.Z.multiplyByPointAsVector(Z.Z.TRANSFORM_2D_INVERSE,n.up,W),m=r.tweens.add({duration:t,easingFunction:c.Z.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(a,h,e.time,s.position),te(l,f,e.time,s.direction),te(d,p,e.time,s.up),i.Z.cross(s.direction,s.up,s.right),i.Z.normalize(s.right,s.right)},complete:function(){Ae(e,r,0,1,t,o)}});e._currentTweens.push(m)}const Y=new d.Z,X=new i.Z,J=new i.Z,Q=new i.Z,$=new i.Z,K=new i.Z,ee=new i.Z;function te(e,t,n,o){return i.Z.lerp(e,t,n,o)}function ne(e,t,n,i,o){const r=e._scene,s=r.camera;if(s.frustum instanceof d.Z)return;const a=s.frustum.fov,u=.5*l.Z.RADIANS_PER_DEGREE,h=n.position.z*Math.tan(.5*a);s.frustum.far=h/Math.tan(.5*u)+1e7;const f=r.tweens.add({duration:t,easingFunction:c.Z.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){s.frustum.fov=l.Z.lerp(a,u,e.time);const t=h/Math.tan(.5*s.frustum.fov);i(s,t)},complete:function(){s.frustum=n.frustum.clone(),o(e)}});e._currentTweens.push(f)}const ie=new i.Z,oe=new i.Z,re=new i.Z,se=new i.Z,ae=new i.Z,ce=new i.Z,le=new h.Z,ue=new p.Z,de=new i.Z,he={position:void 0,direction:void 0,up:void 0,frustum:void 0},fe=new o.Z,pe={position:new i.Z,direction:new i.Z,up:new i.Z,position2D:new i.Z,direction2D:new i.Z,up2D:new i.Z,frustum:new h.Z},me={position:new i.Z,direction:new i.Z,up:new i.Z,frustum:void 0},_e=new i.Z,ge=new p.Z,Ze=new u.Z,ye=new i.Z;function be(e,t,n,i){const o=e._scene,r=o.camera,s=r.frustum.right-r.frustum.left;r.frustum=n.frustum.clone();const a=r.frustum.fov,u=.5*l.Z.RADIANS_PER_DEGREE,d=s*Math.tan(.5*a);r.frustum.far=d/Math.tan(.5*u)+1e7,r.frustum.fov=u;const h=o.tweens.add({duration:t,easingFunction:c.Z.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){r.frustum.fov=l.Z.lerp(u,a,e.time),r.position.z=d/Math.tan(.5*r.frustum.fov)},complete:function(){i(e)}});e._currentTweens.push(h)}function ve(e,t,n,o){const r=e._scene,s=r.camera,a=i.Z.clone(s.position,X),l=i.Z.clone(s.direction,J),u=i.Z.clone(s.up,Q),d=i.Z.clone(n.position2D,$),h=i.Z.clone(n.direction2D,K),f=i.Z.clone(n.up2D,ee),p=r.tweens.add({duration:t,easingFunction:c.Z.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(a,d,e.time,s.position),te(l,h,e.time,s.direction),te(u,f,e.time,s.up),i.Z.cross(s.direction,s.up,s.right),i.Z.normalize(s.right,s.right),s._adjustOrthographicFrustum(!0)},complete:function(){Ae(e,r,1,0,t,o)}});e._currentTweens.push(p)}function Ae(e,t,n,i,o,r){const a={object:t,property:"morphTime",startValue:n,stopValue:i,duration:o,easingFunction:c.Z.QUARTIC_OUT};(0,s.Z)(r)&&(a.complete=function(){r(e)});const l=t.tweens.addProperty(a);e._currentTweens.push(l)}function Te(e){return function(t){const n=t._scene;n._mode=y.Z.SCENE3D,n.morphTime=y.Z.getMorphTime(y.Z.SCENE3D),R(t);const o=n.camera;(t._previousMode!==y.Z.MORPHING||t._morphCancelled)&&(t._morphCancelled=!1,i.Z.clone(e.position,o.position),i.Z.clone(e.direction,o.direction),i.Z.clone(e.up,o.up),i.Z.cross(o.direction,o.up,o.right),i.Z.normalize(o.right,o.right),o.frustum=e.frustum.clone());const r=o.frustum;n.frameState.useLogDepth&&(r.near=.1,r.far=1e10);const a=(0,s.Z)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,y.Z.SCENE3D,a)}}function we(e){return function(t){const n=t._scene;n._mode=y.Z.SCENE2D,n.morphTime=y.Z.getMorphTime(y.Z.SCENE2D),R(t);const o=n.camera;i.Z.clone(e.position,o.position),o.position.z=2*n.mapProjection.ellipsoid.maximumRadius,i.Z.clone(e.direction,o.direction),i.Z.clone(e.up,o.up),i.Z.cross(o.direction,o.up,o.right),i.Z.normalize(o.right,o.right),o.frustum=e.frustum.clone();const r=(0,s.Z)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,y.Z.SCENE2D,r)}}const Ee=b},741469:(e,t,n)=>{"use strict";n.d(t,{Z:()=>on});var i=n(405254),o=n(660904),r=n(798336),s=n(532056),a=n(234146),c=n(11020),l=n(722313),u=n(765153),d=n(63354),h=n(296541),f=n(998537),p=n(568023),m=n(344485),_=n(664288),g=n(659635),Z=n(223689),y=n(341633),b=n(360846),v=n(638601),A=n(497286),T=n(720794),w=n(899546),E=n(335517),S=n(305515),C=n(714233),x=n(638452),I=n(268295);function P(e){if(!(0,c.Z)(e))throw new u.Z("scene is required.");this.enableInputs=!0,this.enableTranslate=!0,this.enableZoom=!0,this.enableRotate=!0,this.enableTilt=!0,this.enableLook=!0,this.inertiaSpin=.9,this.inertiaTranslate=.9,this.inertiaZoom=.8,this.maximumMovementRatio=.1,this.bounceAnimationTime=3,this.minimumZoomDistance=1,this.maximumZoomDistance=Number.POSITIVE_INFINITY,this.translateEventTypes=E.Z.LEFT_DRAG,this.zoomEventTypes=[E.Z.RIGHT_DRAG,E.Z.WHEEL,E.Z.PINCH],this.rotateEventTypes=E.Z.LEFT_DRAG,this.tiltEventTypes=[E.Z.MIDDLE_DRAG,E.Z.PINCH,{eventType:E.Z.LEFT_DRAG,modifier:p.Z.CTRL},{eventType:E.Z.RIGHT_DRAG,modifier:p.Z.CTRL}],this.lookEventTypes={eventType:E.Z.LEFT_DRAG,modifier:p.Z.SHIFT},this.minimumPickingTerrainHeight=15e4,this._minimumPickingTerrainHeight=this.minimumPickingTerrainHeight,this.minimumPickingTerrainDistanceWithInertia=4e3,this.minimumCollisionTerrainHeight=15e3,this._minimumCollisionTerrainHeight=this.minimumCollisionTerrainHeight,this.minimumTrackBallHeight=75e5,this._minimumTrackBallHeight=this.minimumTrackBallHeight,this.enableCollisionDetection=!0,this._scene=e,this._globe=void 0,this._ellipsoid=void 0,this._aggregator=new w.Z(e.canvas),this._lastInertiaSpinMovement=void 0,this._lastInertiaZoomMovement=void 0,this._lastInertiaTranslateMovement=void 0,this._lastInertiaTiltMovement=void 0,this._inertiaDisablers={_lastInertiaZoomMovement:["_lastInertiaSpinMovement","_lastInertiaTranslateMovement","_lastInertiaTiltMovement"],_lastInertiaTiltMovement:["_lastInertiaSpinMovement","_lastInertiaTranslateMovement"]},this._tweens=new I.Z,this._tween=void 0,this._horizontalRotationAxis=void 0,this._tiltCenterMousePosition=new i.Z(-1,-1),this._tiltCenter=new o.Z,this._rotateMousePosition=new i.Z(-1,-1),this._rotateStartPosition=new o.Z,this._strafeStartPosition=new o.Z,this._strafeMousePosition=new i.Z,this._strafeEndMousePosition=new i.Z,this._zoomMouseStart=new i.Z(-1,-1),this._zoomWorldPosition=new o.Z,this._useZoomWorldPosition=!1,this._panLastMousePosition=new i.Z,this._panLastWorldPosition=new o.Z,this._tiltCVOffMap=!1,this._looking=!1,this._rotating=!1,this._strafing=!1,this._zoomingOnVector=!1,this._zoomingUnderground=!1,this._rotatingZoom=!1,this._adjustedHeightForTerrain=!1,this._cameraUnderground=!1;const t=e.mapProjection;this._maxCoord=t.project(new s.Z(Math.PI,m.Z.PI_OVER_TWO)),this._zoomFactor=5,this._rotateFactor=void 0,this._rotateRateRangeAdjustment=void 0,this._maximumRotateRate=1.77,this._minimumRotateRate=2e-4,this._minimumZoomRate=20,this._maximumZoomRate=5906376272e3,this._minimumUndergroundPickDistance=2e3,this._maximumUndergroundPickDistance=1e4}const D=.4;function O(e,t,n,o,r,s,a){let l=s[a];(0,c.Z)(l)||(l=s[a]={startPosition:new i.Z,endPosition:new i.Z,motion:new i.Z,inertiaEnabled:!0});const u=e.getButtonPressTime(t,n),d=e.getButtonReleaseTime(t,n),h=u&&d&&(d.getTime()-u.getTime())/1e3,f=new Date,p=d&&(f.getTime()-d.getTime())/1e3;if(u&&d&&h<D){const a=function(e,t){if(e<0)return 0;const n=25*(1-t);return Math.exp(-n*e)}(p,o),u=e.getLastMovement(t,n);if(!(0,c.Z)(u)||(_=u,i.Z.equalsEpsilon(_.startPosition,_.endPosition,m.Z.EPSILON14))||!l.inertiaEnabled)return;if(l.motion.x=.5*(u.endPosition.x-u.startPosition.x),l.motion.y=.5*(u.endPosition.y-u.startPosition.y),l.startPosition=i.Z.clone(u.startPosition,l.startPosition),l.endPosition=i.Z.multiplyByScalar(l.motion,a,l.endPosition),l.endPosition=i.Z.add(l.startPosition,l.endPosition,l.endPosition),isNaN(l.endPosition.x)||isNaN(l.endPosition.y)||i.Z.distance(l.startPosition,l.endPosition)<.5)return;e.isButtonDown(t,n)||r(s,e.getStartMousePosition(t,n),l)}var _}function L(e,t){if((0,c.Z)(t)){let n=e[t];(0,c.Z)(n)&&(n.inertiaEnabled=!0);const i=e._inertiaDisablers[t];if((0,c.Z)(i)){const t=i.length;for(let o=0;o<t;++o)n=e[i[o]],(0,c.Z)(n)&&(n.inertiaEnabled=!1)}}}const N=[];function M(e,t,n,i,o,r){if(!(0,c.Z)(n))return;const s=e._aggregator;Array.isArray(n)||(N[0]=n,n=N);const a=n.length;for(let l=0;l<a;++l){const a=n[l],u=(0,c.Z)(a.eventType)?a.eventType:a,d=a.modifier,h=s.isMoving(u,d)&&s.getMovement(u,d),f=s.getStartMousePosition(u,d);e.enableInputs&&t&&(h?(i(e,f,h),L(e,r)):o<1&&O(s,u,d,o,i,e,r))}}const R=new v.Z,F=new o.Z,B=new i.Z,U=new o.Z,k=new i.Z,V=new o.Z,H=new o.Z,z=new o.Z,G=new o.Z,j=new o.Z,W=new o.Z,q=new o.Z,Y=new o.Z,X=new o.Z,J=new o.Z,Q=new o.Z,$=new o.Z,K=new o.Z,ee=new o.Z,te=new o.Z,ne=new o.Z,ie=new o.Z,oe=new o.Z,re={orientation:new h.Z};function se(e,t,n,r,s,l){let u=1;(0,c.Z)(l)&&(u=m.Z.clamp(Math.abs(l),.25,1));const d=n.endPosition.y-n.startPosition.y,h=d>0?e.minimumZoomDistance*u:0,f=e.maximumZoomDistance;let p=r*(s-h);p=m.Z.clamp(p,e._minimumZoomRate,e._maximumZoomRate);let _=d/e._scene.canvas.clientHeight;_=Math.min(_,e.maximumMovementRatio);let g=p*_;if(e.enableCollisionDetection||0===e.minimumZoomDistance||!(0,c.Z)(e._globe)){if(g>0&&Math.abs(s-h)<1)return;if(g<0&&Math.abs(s-f)<1)return;s-g<h?g=s-h-1:s-g>f&&(g=s-f)}const y=e._scene,b=y.camera,v=y.mode,A=re.orientation;if(A.heading=b.heading,A.pitch=b.pitch,A.roll=b.roll,b.frustum instanceof Z.Z)return void(Math.abs(g)>0&&(b.zoomIn(g),b._adjustOrthographicFrustum(!0)));const T=(0,a.Z)(n.inertiaEnabled,i.Z.equals(t,e._zoomMouseStart));let w,E=e._zoomingOnVector,S=e._rotatingZoom;if(T||(e._zoomMouseStart=i.Z.clone(t,e._zoomMouseStart),(0,c.Z)(e._globe)&&v===C.Z.SCENE2D?(w=b.getPickRay(t,R).origin,w=o.Z.fromElements(w.y,w.z,w.x)):(0,c.Z)(e._globe)&&(w=Ze(e,t,F)),(0,c.Z)(w)?(e._useZoomWorldPosition=!0,e._zoomWorldPosition=o.Z.clone(w,e._zoomWorldPosition)):e._useZoomWorldPosition=!1,E=e._zoomingOnVector=!1,S=e._rotatingZoom=!1,e._zoomingUnderground=e._cameraUnderground),!e._useZoomWorldPosition)return void b.zoomIn(g);let I=v===C.Z.COLUMBUS_VIEW;if(b.positionCartographic.height<2e6&&(S=!0),!T||S){if(v===C.Z.SCENE2D){const n=e._zoomWorldPosition,i=b.position;if(!o.Z.equals(n,i)&&b.positionCartographic.height<2*e._maxCoord.x){const r=b.position.x,s=o.Z.subtract(n,i,U);o.Z.normalize(s,s);const a=o.Z.distance(n,i)*g/(.5*b.getMagnitude());b.move(s,.5*a),(b.position.x<0&&r>0||b.position.x>0&&r<0)&&(w=b.getPickRay(t,R).origin,w=o.Z.fromElements(w.y,w.z,w.x),e._zoomWorldPosition=o.Z.clone(w,e._zoomWorldPosition))}}else if(v===C.Z.SCENE3D){const t=o.Z.normalize(b.position,j);if(e._cameraUnderground||e._zoomingUnderground||b.positionCartographic.height<3e3&&Math.abs(o.Z.dot(b.direction,t))<.6)I=!0;else{const n=y.canvas,i=k;i.x=n.clientWidth/2,i.y=n.clientHeight/2;const r=Ze(e,i,V);if((0,c.Z)(r))if(b.positionCartographic.height<1e6){if(!(o.Z.dot(b.direction,t)>=-.5)){const n=q;o.Z.clone(b.position,n);const i=e._zoomWorldPosition;let r=W;if(r=o.Z.normalize(i,r),o.Z.dot(r,t)<0)return;const s=te,a=J;o.Z.clone(b.direction,a),o.Z.add(n,o.Z.multiplyByScalar(a,1e3,ne),s);const c=Q,l=$;o.Z.subtract(i,n,c),o.Z.normalize(c,l);const u=o.Z.dot(t,l);if(u>=0)return void(e._zoomMouseStart.x=-1);const d=Math.acos(-u),h=o.Z.magnitude(n),f=o.Z.magnitude(i),p=h-g,_=o.Z.magnitude(c),Z=Math.asin(m.Z.clamp(_/f*Math.sin(d),-1,1))-Math.asin(m.Z.clamp(p/f*Math.sin(d),-1,1))+d,y=Y;o.Z.normalize(n,y);let v=X;v=o.Z.cross(l,y,v),v=o.Z.normalize(v,v),o.Z.normalize(o.Z.cross(y,v,ne),a),o.Z.multiplyByScalar(o.Z.normalize(s,ne),o.Z.magnitude(s)-g,s),o.Z.normalize(n,n),o.Z.multiplyByScalar(n,p,n);const A=K;o.Z.multiplyByScalar(o.Z.add(o.Z.multiplyByScalar(y,Math.cos(Z)-1,ie),o.Z.multiplyByScalar(a,Math.sin(Z),oe),ne),p,A),o.Z.add(n,A,n),o.Z.normalize(s,y),o.Z.normalize(o.Z.cross(y,v,ne),a);const T=ee;return o.Z.multiplyByScalar(o.Z.add(o.Z.multiplyByScalar(y,Math.cos(Z)-1,ie),o.Z.multiplyByScalar(a,Math.sin(Z),oe),ne),o.Z.magnitude(s),T),o.Z.add(s,T,s),o.Z.clone(n,b.position),o.Z.normalize(o.Z.subtract(s,n,ne),b.direction),o.Z.clone(b.direction,b.direction),o.Z.cross(b.direction,b.up,b.right),o.Z.cross(b.right,b.direction,b.up),void b.setView(re)}I=!0}else{const t=o.Z.normalize(r,H),n=o.Z.normalize(e._zoomWorldPosition,z),i=o.Z.dot(n,t);if(i>0&&i<1){const e=m.Z.acosClamped(i),r=o.Z.cross(n,t,G),s=g/(Math.abs(e)>m.Z.toRadians(20)?.75*b.positionCartographic.height:b.positionCartographic.height-g);b.rotate(r,e*s)}}else I=!0}}e._rotatingZoom=!I}if(!T&&I||E){let n;const r=x.Z.wgs84ToWindowCoordinates(y,e._zoomWorldPosition,B);n=v!==C.Z.COLUMBUS_VIEW&&i.Z.equals(t,e._zoomMouseStart)&&(0,c.Z)(r)?b.getPickRay(r,R):b.getPickRay(t,R);const s=n.direction;v!==C.Z.COLUMBUS_VIEW&&v!==C.Z.SCENE2D||o.Z.fromElements(s.y,s.z,s.x,s),b.move(s,g),e._zoomingOnVector=!0}else b.zoomIn(g);e._cameraUnderground||b.setView(re)}const ae=new v.Z,ce=new v.Z,le=new o.Z;function ue(e,t,n){const i=e._scene.camera;let r=i.getPickRay(n.startPosition,ae).origin,s=i.getPickRay(n.endPosition,ce).origin;r=o.Z.fromElements(r.y,r.z,r.x,r),s=o.Z.fromElements(s.y,s.z,s.x,s);const a=o.Z.subtract(r,s,le),c=o.Z.magnitude(a);c>0&&(o.Z.normalize(a,a),i.move(a,c))}function de(e,t,n){(0,c.Z)(n.distance)&&(n=n.distance);const i=e._scene.camera;se(e,t,n,e._zoomFactor,i.getMagnitude())}const he=new i.Z,fe=new i.Z;function pe(e,t,n){if((0,c.Z)(n.angleAndHeight))return void function(e,t,n){let i=e._rotateFactor*e._rotateRateRangeAdjustment;i>e._maximumRotateRate&&(i=e._maximumRotateRate),i<e._minimumRotateRate&&(i=e._minimumRotateRate);const o=e._scene,r=o.camera,s=o.canvas;let a=(n.endPosition.x-n.startPosition.x)/s.clientWidth;a=Math.min(a,e.maximumMovementRatio);const c=i*a*Math.PI*4;r.twistRight(c)}(e,0,n.angleAndHeight);const o=e._scene,r=o.camera,s=o.canvas,a=s.clientWidth,l=s.clientHeight;let u=he;u.x=2/a*n.startPosition.x-1,u.y=2/l*(l-n.startPosition.y)-1,u=i.Z.normalize(u,u);let d=fe;d.x=2/a*n.endPosition.x-1,d.y=2/l*(l-n.endPosition.y)-1,d=i.Z.normalize(d,d);let h=m.Z.acosClamped(u.x);u.y<0&&(h=m.Z.TWO_PI-h);let f=m.Z.acosClamped(d.x);d.y<0&&(f=m.Z.TWO_PI-f);const p=f-h;r.twistRight(p)}const me=new v.Z,_e=new o.Z,ge=new o.Z;function Ze(e,t,n){const i=e._scene,r=e._globe,s=i.camera;let a;if(i.pickPositionSupported&&(a=i.pickPositionWorldCoordinates(t,_e)),!(0,c.Z)(r))return o.Z.clone(a,n);const l=!e._cameraUnderground,u=s.getPickRay(t,me),d=r.pickWorldCoordinates(u,i,l,ge);return((0,c.Z)(a)?o.Z.distance(a,s.positionWC):Number.POSITIVE_INFINITY)<((0,c.Z)(d)?o.Z.distance(d,s.positionWC):Number.POSITIVE_INFINITY)?o.Z.clone(a,n):o.Z.clone(d,n)}const ye=new s.Z;function be(e){const t=e._ellipsoid,n=e._scene,i=n.camera;let o=0;if(n.mode===C.Z.SCENE3D){const e=t.cartesianToCartographic(i.position,ye);(0,c.Z)(e)&&(o=e.height)}else o=i.position.z;const r=(0,a.Z)(e._scene.globeHeight,0);return Math.abs(r-o)}const ve=new o.Z;function Ae(e,t){const n=t.origin,i=t.direction,r=be(e),s=o.Z.normalize(n,ve);let a=Math.abs(o.Z.dot(s,i));return a=2*Math.max(a,.5),r*a}function Te(e,t,n,i){let r=o.Z.distance(t.origin,n);const s=be(e);return r>m.Z.clamp(5*s,e._minimumUndergroundPickDistance,e._maximumUndergroundPickDistance)&&(r=Math.min(r,s/5),r=Math.max(r,100)),v.Z.getPoint(t,r,i)}function we(e,t,n,i){let r;return(0,c.Z)(n)?(r=o.Z.distance(t.origin,n),r>e._maximumUndergroundPickDistance&&(r=be(e))):r=be(e),v.Z.getPoint(t,r,i)}const Ee=new i.Z;function Se(e,t){const n=t.endPosition,o=i.Z.subtract(t.endPosition,t.startPosition,Ee),r=e._strafeEndMousePosition;i.Z.add(r,o,r),t.endPosition=r,st(e,t,e._strafeStartPosition),t.endPosition=n}const Ce=new v.Z,xe=new v.Z,Ie=new o.Z,Pe=new o.Z,De=new o.Z,Oe=new o.Z,Le=new y.Z(o.Z.UNIT_X,0),Ne=new i.Z,Me=new i.Z;function Re(e,t,n){if(o.Z.equals(t,e._translateMousePosition)||(e._looking=!1),o.Z.equals(t,e._strafeMousePosition)||(e._strafing=!1),e._looking)return void Qt(e,0,n);if(e._strafing)return void Se(e,n);const r=e._scene.camera,s=e._cameraUnderground,a=i.Z.clone(n.startPosition,Ne),l=i.Z.clone(n.endPosition,Me);let u=r.getPickRay(a,Ce);const d=o.Z.clone(o.Z.ZERO,Oe),h=o.Z.UNIT_X;let p;if(r.position.z<e._minimumPickingTerrainHeight&&(p=Ze(e,a,Ie),(0,c.Z)(p)&&(d.x=p.x)),s||d.x>r.position.z&&(0,c.Z)(p)){let r=p;return s&&(r=we(e,u,p,Ie)),i.Z.clone(t,e._strafeMousePosition),i.Z.clone(t,e._strafeEndMousePosition),o.Z.clone(r,e._strafeStartPosition),e._strafing=!0,void st(e,n,e._strafeStartPosition)}const _=y.Z.fromPointNormal(d,h,Le);u=r.getPickRay(a,Ce);const g=f.Z.rayPlane(u,_,Ie),Z=r.getPickRay(l,xe),b=f.Z.rayPlane(Z,_,Pe);if(!(0,c.Z)(g)||!(0,c.Z)(b))return e._looking=!0,Qt(e,0,n),void i.Z.clone(t,e._translateMousePosition);const v=o.Z.subtract(g,b,De),A=v.x;v.x=v.y,v.y=v.z,v.z=A;const T=o.Z.magnitude(v);T>m.Z.EPSILON6&&(o.Z.normalize(v,v),r.move(v,T))}const Fe=new i.Z,Be=new v.Z,Ue=new o.Z,ke=new o.Z,Ve=new g.Z,He=new g.Z,ze=new o.Z,Ge=new y.Z(o.Z.UNIT_X,0),je=new o.Z,We=new s.Z,qe=new g.Z,Ye=new b.Z,Xe=new _.Z,Je=new o.Z;function Qe(e,t,n){if((0,c.Z)(n.angleAndHeight)&&(n=n.angleAndHeight),i.Z.equals(t,e._tiltCenterMousePosition)||(e._tiltCVOffMap=!1,e._looking=!1),e._looking)return void Qt(e,0,n);const r=e._scene.camera;e._tiltCVOffMap||!e.onMap()||Math.abs(r.position.z)>e._minimumPickingTerrainHeight?(e._tiltCVOffMap=!0,function(e,t,n){const r=e._scene,s=r.camera,a=r.canvas,l=Fe;l.x=a.clientWidth/2,l.y=a.clientHeight/2;const u=s.getPickRay(l,Be),h=o.Z.UNIT_X,f=u.origin,p=u.direction;let _;const Z=o.Z.dot(h,p);if(Math.abs(Z)>m.Z.EPSILON6&&(_=-o.Z.dot(h,f)/Z),!(0,c.Z)(_)||_<=0)return e._looking=!0,Qt(e,0,n),void i.Z.clone(t,e._tiltCenterMousePosition);const y=o.Z.multiplyByScalar(p,_,Ue);o.Z.add(f,y,y);const b=r.mapProjection,v=b.ellipsoid;o.Z.fromElements(y.y,y.z,y.x,y);const A=b.unproject(y,We);v.cartographicToCartesian(A,y);const w=T.Z.eastNorthUpToFixedFrame(y,v,Ve),E=e._globe,S=e._ellipsoid;e._globe=void 0,e._ellipsoid=d.Z.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;const C=g.Z.clone(s.transform,qe);s._setTransform(w),mt(e,0,n,o.Z.UNIT_Z),s._setTransform(C),e._globe=E,e._ellipsoid=S;const x=S.maximumRadius;e._rotateFactor=1/x,e._rotateRateRangeAdjustment=x}(e,t,n)):function(e,t,n){const r=e._scene,s=r.camera,a=e._cameraUnderground;let l,u;const h=o.Z.UNIT_X;if(i.Z.equals(t,e._tiltCenterMousePosition))l=o.Z.clone(e._tiltCenter,Ue);else{if(s.position.z<e._minimumPickingTerrainHeight&&(l=Ze(e,t,Ue)),!(0,c.Z)(l)){u=s.getPickRay(t,Be);const r=u.origin,a=u.direction;let d;const f=o.Z.dot(h,a);if(Math.abs(f)>m.Z.EPSILON6&&(d=-o.Z.dot(h,r)/f),!(0,c.Z)(d)||d<=0)return e._looking=!0,Qt(e,0,n),void i.Z.clone(t,e._tiltCenterMousePosition);l=o.Z.multiplyByScalar(a,d,Ue),o.Z.add(r,l,l)}a&&((0,c.Z)(u)||(u=s.getPickRay(t,Be)),Te(e,u,l,l)),i.Z.clone(t,e._tiltCenterMousePosition),o.Z.clone(l,e._tiltCenter)}const p=r.canvas,Z=Fe;Z.x=p.clientWidth/2,Z.y=e._tiltCenterMousePosition.y,u=s.getPickRay(Z,Be);const v=o.Z.clone(o.Z.ZERO,ze);v.x=l.x;const A=y.Z.fromPointNormal(v,h,Ge),w=f.Z.rayPlane(u,A,ke),E=s._projection,S=E.ellipsoid;o.Z.fromElements(l.y,l.z,l.x,l);let C=E.unproject(l,We);S.cartographicToCartesian(C,l);const x=T.Z.eastNorthUpToFixedFrame(l,S,Ve);let I;(0,c.Z)(w)?(o.Z.fromElements(w.y,w.z,w.x,w),C=E.unproject(w,We),S.cartographicToCartesian(C,w),I=T.Z.eastNorthUpToFixedFrame(w,S,He)):I=x;const P=e._globe,D=e._ellipsoid;e._globe=void 0,e._ellipsoid=d.Z.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;let O=o.Z.UNIT_Z;const L=g.Z.clone(s.transform,qe);s._setTransform(x);const N=o.Z.cross(o.Z.UNIT_Z,o.Z.normalize(s.position,je),je),M=o.Z.dot(s.right,N);if(mt(e,0,n,O,!1,!0),s._setTransform(I),M<0){const t=n.startPosition.y-n.endPosition.y;(a&&t<0||!a&&t>0)&&(O=void 0);const i=s.constrainedAxis;s.constrainedAxis=void 0,mt(e,0,n,O,!0,!1),s.constrainedAxis=i}else mt(e,0,n,O,!0,!1);if((0,c.Z)(s.constrainedAxis)){const e=o.Z.cross(s.direction,s.constrainedAxis,Je);o.Z.equalsEpsilon(e,o.Z.ZERO,m.Z.EPSILON6)||(o.Z.dot(e,s.right)<0&&o.Z.negate(e,e),o.Z.cross(e,s.direction,s.up),o.Z.cross(s.direction,s.up,s.right),o.Z.normalize(s.up,s.up),o.Z.normalize(s.right,s.right))}s._setTransform(L),e._globe=P,e._ellipsoid=D;const R=D.maximumRadius;e._rotateFactor=1/R,e._rotateRateRangeAdjustment=R;const F=o.Z.clone(s.positionWC,je);if(e.enableCollisionDetection&&en(e),!o.Z.equals(s.positionWC,F)){s._setTransform(I),s.worldToCameraCoordinatesPoint(F,F);const e=o.Z.magnitudeSquared(F);o.Z.magnitudeSquared(s.position)>e&&(o.Z.normalize(s.position,s.position),o.Z.multiplyByScalar(s.position,Math.sqrt(e),s.position));const t=o.Z.angleBetween(F,s.position),n=o.Z.cross(F,s.position,F);o.Z.normalize(n,n);const i=b.Z.fromAxisAngle(n,t,Ye),r=_.Z.fromQuaternion(i,Xe);_.Z.multiplyByVector(r,s.direction,s.direction),_.Z.multiplyByVector(r,s.up,s.up),o.Z.cross(s.direction,s.up,s.right),o.Z.cross(s.right,s.direction,s.up),s._setTransform(L)}}(e,t,n)}const $e=new i.Z,Ke=new v.Z,et=new o.Z;function tt(e,t,n){(0,c.Z)(n.distance)&&(n=n.distance);const i=e._scene,r=i.camera,s=i.canvas,a=e._cameraUnderground;let l;a?l=t:(l=$e,l.x=s.clientWidth/2,l.y=s.clientHeight/2);const u=r.getPickRay(l,Ke),d=u.origin,h=u.direction;let f,p;if(r.position.z<e._minimumPickingTerrainHeight&&(f=Ze(e,l,et)),(0,c.Z)(f)&&(p=o.Z.distance(d,f)),a){const t=Ae(e,u);p=(0,c.Z)(p)?Math.min(p,t):t}if(!(0,c.Z)(p)){const e=o.Z.UNIT_X;p=-o.Z.dot(e,d)/o.Z.dot(e,h)}se(e,t,n,e._zoomFactor,p)}const nt=new v.Z,it=new y.Z(o.Z.UNIT_X,0),ot=new o.Z,rt=new o.Z;function st(e,t,n){const i=e._scene,r=i.camera,s=r.getPickRay(t.endPosition,nt);let a=o.Z.clone(r.direction,rt);i.mode===C.Z.COLUMBUS_VIEW&&o.Z.fromElements(a.z,a.x,a.y,a);const l=y.Z.fromPointNormal(n,a,it),u=f.Z.rayPlane(s,l,ot);(0,c.Z)(u)&&(a=o.Z.subtract(n,u,a),i.mode===C.Z.COLUMBUS_VIEW&&o.Z.fromElements(a.y,a.z,a.x,a),o.Z.add(r.position,a,r.position))}const at=new o.Z,ct=new s.Z,lt=new o.Z,ut=new d.Z,dt=new o.Z,ht=new o.Z,ft=new o.Z;function pt(e,t,n){const r=e._scene.camera,s=e._cameraUnderground;let a,l,u=e._ellipsoid;if(!g.Z.equals(r.transform,g.Z.IDENTITY))return void mt(e,0,n);const h=u.geodeticSurfaceNormal(r.position,dt);if(i.Z.equals(t,e._rotateMousePosition)){if(e._looking)Qt(e,0,n,h);else if(e._rotating)mt(e,0,n);else if(e._strafing)Se(e,n);else{if(o.Z.magnitude(r.position)<o.Z.magnitude(e._rotateStartPosition))return;a=o.Z.magnitude(e._rotateStartPosition),l=lt,l.x=l.y=l.z=a,u=d.Z.fromCartesian3(l,ut),Ct(e,0,n,u)}return}e._looking=!1,e._rotating=!1,e._strafing=!1;const f=u.cartesianToCartographic(r.positionWC,ct).height,p=e._globe;if((0,c.Z)(p)&&f<e._minimumPickingTerrainHeight){const f=Ze(e,n.startPosition,ft);if((0,c.Z)(f)){let c=!1;const h=r.getPickRay(n.startPosition,me);if(s)c=!0,we(e,h,f,f);else{const e=u.geodeticSurfaceNormal(f,ht);c=!!(Math.abs(o.Z.dot(h.direction,e))<.05)||o.Z.magnitude(r.position)<o.Z.magnitude(f)}c?(i.Z.clone(t,e._strafeEndMousePosition),o.Z.clone(f,e._strafeStartPosition),e._strafing=!0,st(e,n,e._strafeStartPosition)):(a=o.Z.magnitude(f),l=lt,l.x=l.y=l.z=a,u=d.Z.fromCartesian3(l,ut),Ct(e,0,n,u),o.Z.clone(f,e._rotateStartPosition))}else e._looking=!0,Qt(e,0,n,h)}else(0,c.Z)(r.pickEllipsoid(n.startPosition,e._ellipsoid,at))?(Ct(e,0,n,e._ellipsoid),o.Z.clone(at,e._rotateStartPosition)):f>e._minimumTrackBallHeight?(e._rotating=!0,mt(e,0,n)):(e._looking=!0,Qt(e,0,n,h));i.Z.clone(t,e._rotateMousePosition)}function mt(e,t,n,i,r,s){r=(0,a.Z)(r,!1),s=(0,a.Z)(s,!1);const l=e._scene,u=l.camera,d=l.canvas,h=u.constrainedAxis;(0,c.Z)(i)&&(u.constrainedAxis=i);const f=o.Z.magnitude(u.position);let p=e._rotateFactor*(f-e._rotateRateRangeAdjustment);p>e._maximumRotateRate&&(p=e._maximumRotateRate),p<e._minimumRotateRate&&(p=e._minimumRotateRate);let m=(n.startPosition.x-n.endPosition.x)/d.clientWidth,_=(n.startPosition.y-n.endPosition.y)/d.clientHeight;m=Math.min(m,e.maximumMovementRatio),_=Math.min(_,e.maximumMovementRatio);const g=p*m*Math.PI*2,Z=p*_*Math.PI;r||u.rotateRight(g),s||u.rotateUp(Z),u.constrainedAxis=h}const _t=r.Z.clone(r.Z.UNIT_W),gt=r.Z.clone(r.Z.UNIT_W),Zt=new o.Z,yt=new o.Z,bt=new o.Z,vt=new o.Z,At=new i.Z,Tt=new i.Z,wt=new i.Z,Et=new i.Z,St=new v.Z;function Ct(e,t,n,r){const s=e._scene,a=s.camera,l=i.Z.clone(n.startPosition,At),u=i.Z.clone(n.endPosition,Tt),d=r.cartesianToCartographic(a.positionWC,ct).height;let h,f;if(!n.inertiaEnabled&&d<e._minimumPickingTerrainHeight&&(h=o.Z.clone(e._panLastWorldPosition,_t),(0,c.Z)(e._globe)||i.Z.equalsEpsilon(l,e._panLastMousePosition)||(h=Ze(e,l,_t)),!(0,c.Z)(e._globe)&&(0,c.Z)(h))){const t=o.Z.subtract(h,a.positionWC,yt),n=o.Z.multiplyByScalar(a.directionWC,o.Z.dot(a.directionWC,t),yt),r=o.Z.magnitude(n),d=a.frustum.getPixelDimensions(s.drawingBufferWidth,s.drawingBufferHeight,r,s.pixelRatio,Et),p=i.Z.subtract(u,l,wt),m=o.Z.multiplyByScalar(a.rightWC,p.x*d.x,yt),_=o.Z.normalize(a.positionWC,j),g=a.getPickRay(u,St).direction,Z=o.Z.subtract(g,o.Z.projectVector(g,a.rightWC,bt),bt),y=o.Z.angleBetween(Z,a.directionWC);let b=1;(0,c.Z)(a.frustum.fov)&&(b=Math.max(Math.tan(y),.1));let v=Math.abs(o.Z.dot(a.directionWC,_));const A=-p.y*d.y*2/Math.sqrt(b)*(1-v),T=o.Z.multiplyByScalar(g,A,bt);v=Math.abs(o.Z.dot(a.upWC,_));const w=o.Z.multiplyByScalar(a.upWC,-p.y*(1-v)*d.y,vt);f=o.Z.add(h,m,gt),f=o.Z.add(f,T,f),f=o.Z.add(f,w,f),o.Z.clone(f,e._panLastWorldPosition),i.Z.clone(u,e._panLastMousePosition)}if((0,c.Z)(h)&&(0,c.Z)(f)||(h=a.pickEllipsoid(l,r,_t),f=a.pickEllipsoid(u,r,gt)),!(0,c.Z)(h)||!(0,c.Z)(f))return e._rotating=!0,void mt(e,0,n);if(h=a.worldToCameraCoordinates(h,h),f=a.worldToCameraCoordinates(f,f),(0,c.Z)(a.constrainedAxis)){const e=a.constrainedAxis,t=o.Z.mostOrthogonalAxis(e,Zt);o.Z.cross(t,e,t),o.Z.normalize(t,t);const n=o.Z.cross(e,t,yt),i=o.Z.magnitude(h),r=o.Z.dot(e,h),s=Math.acos(r/i),c=o.Z.multiplyByScalar(e,r,bt);o.Z.subtract(h,c,c),o.Z.normalize(c,c);const l=o.Z.magnitude(f),u=o.Z.dot(e,f),d=Math.acos(u/l),p=o.Z.multiplyByScalar(e,u,vt);o.Z.subtract(f,p,p),o.Z.normalize(p,p);let _=Math.acos(o.Z.dot(c,t));o.Z.dot(c,n)<0&&(_=m.Z.TWO_PI-_);let g=Math.acos(o.Z.dot(p,t));o.Z.dot(p,n)<0&&(g=m.Z.TWO_PI-g);const Z=_-g;let y;y=o.Z.equalsEpsilon(e,a.position,m.Z.EPSILON2)?a.right:o.Z.cross(e,a.position,Zt);const b=o.Z.cross(e,y,Zt),v=o.Z.dot(b,o.Z.subtract(h,e,yt)),A=o.Z.dot(b,o.Z.subtract(f,e,yt));let T;T=v>0&&A>0?d-s:v>0&&A<=0?o.Z.dot(a.position,e)>0?-s-d:s+d:s-d,a.rotateRight(Z),a.rotateUp(T)}else{o.Z.normalize(h,h),o.Z.normalize(f,f);const e=o.Z.dot(h,f),t=o.Z.cross(h,f,Zt);if(e<1&&!o.Z.equalsEpsilon(t,o.Z.ZERO,m.Z.EPSILON14)){const n=Math.acos(e);a.rotate(t,n)}}}const xt=new o.Z,It=new s.Z;let Pt=0;function Dt(e,t,n){(0,c.Z)(n.distance)&&(n=n.distance);const i=n.inertiaEnabled,r=e._ellipsoid,s=e._scene,a=s.camera,l=s.canvas,u=e._cameraUnderground;let d;u?d=t:(d=$e,d.x=l.clientWidth/2,d.y=l.clientHeight/2);const h=a.getPickRay(d,Ke);let f;const p=r.cartesianToCartographic(a.position,It).height,m=Math.abs(Pt)<e.minimumPickingTerrainDistanceWithInertia;let _;if((i?m:p<e._minimumPickingTerrainHeight)&&(f=Ze(e,d,et)),(0,c.Z)(f)&&(_=o.Z.distance(h.origin,f),Pt=_),u){const t=Ae(e,h);_=(0,c.Z)(_)?Math.min(_,t):t}(0,c.Z)(_)||(_=p);const g=o.Z.normalize(a.position,xt);se(e,t,n,e._zoomFactor,_,o.Z.dot(g,a.direction))}const Ot=new i.Z,Lt=new v.Z,Nt=new o.Z,Mt=new o.Z,Rt=new g.Z,Ft=new g.Z,Bt=new g.Z,Ut=new b.Z,kt=new _.Z,Vt=new s.Z,Ht=new o.Z;function zt(e,t,n){const r=e._scene.camera;if(!g.Z.equals(r.transform,g.Z.IDENTITY))return;if((0,c.Z)(n.angleAndHeight)&&(n=n.angleAndHeight),i.Z.equals(t,e._tiltCenterMousePosition)||(e._tiltOnEllipsoid=!1,e._looking=!1),e._looking){const t=e._ellipsoid.geodeticSurfaceNormal(r.position,Ht);return void Qt(e,0,n,t)}const s=e._ellipsoid.cartesianToCartographic(r.position,Vt);e._tiltOnEllipsoid||s.height>e._minimumCollisionTerrainHeight?(e._tiltOnEllipsoid=!0,function(e,t,n){const r=e._ellipsoid,s=e._scene,a=s.camera,l=.25*e.minimumZoomDistance,u=r.cartesianToCartographic(a.positionWC,Gt).height;if(u-l-1<m.Z.EPSILON3&&n.endPosition.y-n.startPosition.y<0)return;const h=s.canvas,p=Ot;p.x=h.clientWidth/2,p.y=h.clientHeight/2;const _=a.getPickRay(p,Lt);let Z;const y=f.Z.rayEllipsoid(_,r);if((0,c.Z)(y))Z=v.Z.getPoint(_,y.start,Nt);else{if(!(u>e._minimumTrackBallHeight)){e._looking=!0;const o=e._ellipsoid.geodeticSurfaceNormal(a.position,Ht);return Qt(e,0,n,o),void i.Z.clone(t,e._tiltCenterMousePosition)}{const e=f.Z.grazingAltitudeLocation(_,r);if(!(0,c.Z)(e))return;const t=r.cartesianToCartographic(e,Vt);t.height=0,Z=r.cartographicToCartesian(t,Nt)}}const b=T.Z.eastNorthUpToFixedFrame(Z,r,Rt),A=e._globe,w=e._ellipsoid;e._globe=void 0,e._ellipsoid=d.Z.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;const E=g.Z.clone(a.transform,Bt);a._setTransform(b),mt(e,0,n,o.Z.UNIT_Z),a._setTransform(E),e._globe=A,e._ellipsoid=w;const S=w.maximumRadius;e._rotateFactor=1/S,e._rotateRateRangeAdjustment=S}(e,t,n)):function(e,t,n){const r=e._ellipsoid,s=e._scene,a=s.camera,l=e._cameraUnderground;let u,h,p;if(i.Z.equals(t,e._tiltCenterMousePosition))u=o.Z.clone(e._tiltCenter,Nt);else{if(u=Ze(e,t,Nt),!(0,c.Z)(u)){if(h=a.getPickRay(t,Lt),p=f.Z.rayEllipsoid(h,r),!(0,c.Z)(p)){if(r.cartesianToCartographic(a.position,Vt).height<=e._minimumTrackBallHeight){e._looking=!0;const o=e._ellipsoid.geodeticSurfaceNormal(a.position,Ht);Qt(e,0,n,o),i.Z.clone(t,e._tiltCenterMousePosition)}return}u=v.Z.getPoint(h,p.start,Nt)}l&&((0,c.Z)(h)||(h=a.getPickRay(t,Lt)),Te(e,h,u,u)),i.Z.clone(t,e._tiltCenterMousePosition),o.Z.clone(u,e._tiltCenter)}const Z=s.canvas,y=Ot;y.x=Z.clientWidth/2,y.y=e._tiltCenterMousePosition.y,h=a.getPickRay(y,Lt);const A=o.Z.magnitude(u),w=o.Z.fromElements(A,A,A,lt),E=d.Z.fromCartesian3(w,ut);if(p=f.Z.rayEllipsoid(h,E),!(0,c.Z)(p))return;const S=o.Z.magnitude(h.origin)>A?p.start:p.stop,C=v.Z.getPoint(h,S,Mt),x=T.Z.eastNorthUpToFixedFrame(u,r,Rt),I=T.Z.eastNorthUpToFixedFrame(C,E,Ft),P=e._globe,D=e._ellipsoid;e._globe=void 0,e._ellipsoid=d.Z.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;let O=o.Z.UNIT_Z;const L=g.Z.clone(a.transform,Bt);a._setTransform(I);const N=o.Z.cross(C,a.positionWC,Je);if(o.Z.dot(a.rightWC,N)<0){const t=n.startPosition.y-n.endPosition.y;(l&&t<0||!l&&t>0)&&(O=void 0);const i=a.constrainedAxis;a.constrainedAxis=void 0,mt(e,0,n,O,!0,!1),a.constrainedAxis=i}else mt(e,0,n,O,!0,!1);if(a._setTransform(x),mt(e,0,n,O,!1,!0),(0,c.Z)(a.constrainedAxis)){const e=o.Z.cross(a.direction,a.constrainedAxis,Je);o.Z.equalsEpsilon(e,o.Z.ZERO,m.Z.EPSILON6)||(o.Z.dot(e,a.right)<0&&o.Z.negate(e,e),o.Z.cross(e,a.direction,a.up),o.Z.cross(a.direction,a.up,a.right),o.Z.normalize(a.up,a.up),o.Z.normalize(a.right,a.right))}a._setTransform(L),e._globe=P,e._ellipsoid=D;const M=D.maximumRadius;e._rotateFactor=1/M,e._rotateRateRangeAdjustment=M;const R=o.Z.clone(a.positionWC,Je);if(e.enableCollisionDetection&&en(e),!o.Z.equals(a.positionWC,R)){a._setTransform(I),a.worldToCameraCoordinatesPoint(R,R);const e=o.Z.magnitudeSquared(R);o.Z.magnitudeSquared(a.position)>e&&(o.Z.normalize(a.position,a.position),o.Z.multiplyByScalar(a.position,Math.sqrt(e),a.position));const t=o.Z.angleBetween(R,a.position),n=o.Z.cross(R,a.position,R);o.Z.normalize(n,n);const i=b.Z.fromAxisAngle(n,t,Ut),r=_.Z.fromQuaternion(i,kt);_.Z.multiplyByVector(r,a.direction,a.direction),_.Z.multiplyByVector(r,a.up,a.up),o.Z.cross(a.direction,a.up,a.right),o.Z.cross(a.right,a.direction,a.up),a._setTransform(L)}}(e,t,n)}const Gt=new s.Z,jt=new i.Z,Wt=new i.Z,qt=new v.Z,Yt=new v.Z,Xt=new o.Z,Jt=new o.Z;function Qt(e,t,n,i){const r=e._scene.camera,s=jt;s.x=n.startPosition.x,s.y=0;const l=Wt;l.x=n.endPosition.x,l.y=0;let u,d,h=r.getPickRay(s,qt),f=r.getPickRay(l,Yt),p=0;r.frustum instanceof Z.Z?(u=h.origin,d=f.origin,o.Z.add(r.direction,u,u),o.Z.add(r.direction,d,d),o.Z.subtract(u,r.position,u),o.Z.subtract(d,r.position,d),o.Z.normalize(u,u),o.Z.normalize(d,d)):(u=h.direction,d=f.direction);let _=o.Z.dot(u,d);_<1&&(p=Math.acos(_)),p=n.startPosition.x>n.endPosition.x?-p:p;const g=e._horizontalRotationAxis;if((0,c.Z)(i)?r.look(i,-p):(0,c.Z)(g)?r.look(g,-p):r.lookLeft(p),s.x=0,s.y=n.startPosition.y,l.x=0,l.y=n.endPosition.y,h=r.getPickRay(s,qt),f=r.getPickRay(l,Yt),p=0,r.frustum instanceof Z.Z?(u=h.origin,d=f.origin,o.Z.add(r.direction,u,u),o.Z.add(r.direction,d,d),o.Z.subtract(u,r.position,u),o.Z.subtract(d,r.position,d),o.Z.normalize(u,u),o.Z.normalize(d,d)):(u=h.direction,d=f.direction),_=o.Z.dot(u,d),_<1&&(p=Math.acos(_)),p=n.startPosition.y>n.endPosition.y?-p:p,i=(0,a.Z)(i,g),(0,c.Z)(i)){const e=r.direction,t=o.Z.negate(i,Xt),n=o.Z.equalsEpsilon(e,i,m.Z.EPSILON2),s=o.Z.equalsEpsilon(e,t,m.Z.EPSILON2);if(n||s)(n&&p<0||s&&p>0)&&r.look(r.right,-p);else{_=o.Z.dot(e,i);let n=m.Z.acosClamped(_);p>0&&p>n&&(p=n-m.Z.EPSILON4),_=o.Z.dot(e,t),n=m.Z.acosClamped(_),p<0&&-p>n&&(p=-n+m.Z.EPSILON4);const s=o.Z.cross(i,e,Jt);r.look(s,p)}}else r.lookUp(p)}const $t=new g.Z,Kt=new s.Z;function en(e){e._adjustedHeightForTerrain=!0;const t=e._scene,n=t.mode,i=t.globe;if(!(0,c.Z)(i)||n===C.Z.SCENE2D||n===C.Z.MORPHING)return;const r=t.camera,s=i.ellipsoid,a=t.mapProjection;let l,u;g.Z.equals(r.transform,g.Z.IDENTITY)||(l=g.Z.clone(r.transform,$t),u=o.Z.magnitude(r.position),r._setTransform(g.Z.IDENTITY));const d=Kt;n===C.Z.SCENE3D?s.cartesianToCartographic(r.position,d):a.unproject(r.position,d);let h=!1;if(d.height<e._minimumCollisionTerrainHeight){const t=e._scene.globeHeight;if((0,c.Z)(t)){const i=t+e.minimumZoomDistance;d.height<i&&(d.height=i,n===C.Z.SCENE3D?s.cartographicToCartesian(d,r.position):a.project(d,r.position),h=!0)}}(0,c.Z)(l)&&(r._setTransform(l),h&&(o.Z.normalize(r.position,r.position),o.Z.negate(r.position,r.direction),o.Z.multiplyByScalar(r.position,Math.max(u,e.minimumZoomDistance),r.position),o.Z.normalize(r.direction,r.direction),o.Z.cross(r.direction,r.up,r.right),o.Z.cross(r.right,r.direction,r.up)))}P.prototype.onMap=function(){const e=this._scene,t=e.mode,n=e.camera;return t!==C.Z.COLUMBUS_VIEW||Math.abs(n.position.x)-this._maxCoord.x<0&&Math.abs(n.position.y)-this._maxCoord.y<0};const tn=new o.Z,nn=new o.Z;P.prototype.update=function(){const e=this._scene,t=e.camera,n=e.globe,i=e.mode;g.Z.equals(t.transform,g.Z.IDENTITY)?(this._globe=n,this._ellipsoid=(0,c.Z)(this._globe)?this._globe.ellipsoid:e.mapProjection.ellipsoid):(this._globe=void 0,this._ellipsoid=d.Z.UNIT_SPHERE);const r=(0,c.Z)(this._globe)?this._globe.terrainExaggeration:1,s=(0,c.Z)(this._globe)?this._globe.terrainExaggerationRelativeHeight:0;this._minimumCollisionTerrainHeight=A.Z.getHeight(this.minimumCollisionTerrainHeight,r,s),this._minimumPickingTerrainHeight=A.Z.getHeight(this.minimumPickingTerrainHeight,r,s),this._minimumTrackBallHeight=A.Z.getHeight(this.minimumTrackBallHeight,r,s),this._cameraUnderground=e.cameraUnderground&&(0,c.Z)(this._globe);const a=this._ellipsoid.maximumRadius;this._rotateFactor=1/a,this._rotateRateRangeAdjustment=a,this._adjustedHeightForTerrain=!1;const l=o.Z.clone(t.positionWC,tn),u=o.Z.clone(t.directionWC,nn);var h;i===C.Z.SCENE2D?function(e){const t=e._scene.mapMode2D===S.Z.ROTATE;g.Z.equals(g.Z.IDENTITY,e._scene.camera.transform)?(M(e,e.enableTranslate,e.translateEventTypes,ue,e.inertiaTranslate,"_lastInertiaTranslateMovement"),M(e,e.enableZoom,e.zoomEventTypes,de,e.inertiaZoom,"_lastInertiaZoomMovement"),t&&M(e,e.enableRotate,e.tiltEventTypes,pe,e.inertiaSpin,"_lastInertiaTiltMovement")):(M(e,e.enableZoom,e.zoomEventTypes,de,e.inertiaZoom,"_lastInertiaZoomMovement"),t&&M(e,e.enableRotate,e.translateEventTypes,pe,e.inertiaSpin,"_lastInertiaSpinMovement"))}(this):i===C.Z.COLUMBUS_VIEW?(this._horizontalRotationAxis=o.Z.UNIT_Z,function(e){const t=e._scene.camera;if(g.Z.equals(g.Z.IDENTITY,t.transform)){const n=e._tweens;if(e._aggregator.anyButtonDown&&n.removeAll(),M(e,e.enableTilt,e.tiltEventTypes,Qe,e.inertiaSpin,"_lastInertiaTiltMovement"),M(e,e.enableTranslate,e.translateEventTypes,Re,e.inertiaTranslate,"_lastInertiaTranslateMovement"),M(e,e.enableZoom,e.zoomEventTypes,tt,e.inertiaZoom,"_lastInertiaZoomMovement"),M(e,e.enableLook,e.lookEventTypes,Qt),!e._aggregator.anyButtonDown&&!n.contains(e._tween)){const i=t.createCorrectPositionTween(e.bounceAnimationTime);(0,c.Z)(i)&&(e._tween=n.add(i))}n.update()}else M(e,e.enableRotate,e.rotateEventTypes,mt,e.inertiaSpin,"_lastInertiaSpinMovement"),M(e,e.enableZoom,e.zoomEventTypes,Dt,e.inertiaZoom,"_lastInertiaZoomMovement")}(this)):i===C.Z.SCENE3D&&(this._horizontalRotationAxis=void 0,M(h=this,h.enableRotate,h.rotateEventTypes,pt,h.inertiaSpin,"_lastInertiaSpinMovement"),M(h,h.enableZoom,h.zoomEventTypes,Dt,h.inertiaZoom,"_lastInertiaZoomMovement"),M(h,h.enableTilt,h.tiltEventTypes,zt,h.inertiaSpin,"_lastInertiaTiltMovement"),M(h,h.enableLook,h.lookEventTypes,Qt)),this.enableCollisionDetection&&!this._adjustedHeightForTerrain&&(!o.Z.equals(l,t.positionWC)||!o.Z.equals(u,t.directionWC))&&en(this),this._aggregator.reset()},P.prototype.isDestroyed=function(){return!1},P.prototype.destroy=function(){return this._tweens.removeAll(),this._aggregator=this._aggregator&&this._aggregator.destroy(),(0,l.Z)(this)};const on=P},878354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Pe});var i=n(890828),o=n(762031),r=n(77305),s=n(405254),a=n(660904),c=n(798336),l=n(532056),u=n(823438),d=n(35961),h=n(376213),f=n(394579),p=n(737400),m=n(234146),_=n(11020),g=n(722313),Z=n(765153),y=n(95296),b=n(156905),v=n(101496),A=n(344485),T=n(659635),w=n(299594),E=n(134282),S=n(430886),C=n(360846),x=n(252054),I=n(248894),P=n(598020),D=n(591477),O=n(136525),L=n(661679),N=n(707258),M=n(431056),R=n(708800),F=n(545870),B=n(941537),U=n(964695),k=n(417148),V=n(497730),H=n(609882),z=n(518931),G=n(53839),j=n(868817),W=n(104763),q=n(759398),Y=n(857373);function X(e){const t=(e=(0,m.Z)(e,m.Z.EMPTY_OBJECT)).context;if(!(0,_.Z)(t))throw new Z.Z("context is required.");if(!(0,_.Z)(e.lightCamera))throw new Z.Z("lightCamera is required.");if((0,_.Z)(e.numberOfCascades)&&1!==e.numberOfCascades&&4!==e.numberOfCascades)throw new Z.Z("Only one or four cascades are supported.");this._enabled=(0,m.Z)(e.enabled,!0),this._softShadows=(0,m.Z)(e.softShadows,!1),this._normalOffset=(0,m.Z)(e.normalOffset,!0),this.dirty=!0,this.fromLightSource=(0,m.Z)(e.fromLightSource,!0),this.darkness=(0,m.Z)(e.darkness,.3),this._darkness=this.darkness,this.fadingEnabled=(0,m.Z)(e.fadingEnabled,!0),this.maximumDistance=(0,m.Z)(e.maximumDistance,5e3),this._outOfView=!1,this._outOfViewPrevious=!1,this._needsUpdate=!0;let n,i=!0;(y.Z.isInternetExplorer()||y.Z.isEdge()||(y.Z.isChrome()||y.Z.isFirefox())&&y.Z.isWindows()&&!t.depthTexture)&&(i=!1),this._polygonOffsetSupported=i,this._terrainBias={polygonOffset:i,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:.5,normalShading:!0,normalShadingSmooth:.3,depthBias:1e-4},this._primitiveBias={polygonOffset:i,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:.1,normalShading:!0,normalShadingSmooth:.05,depthBias:2e-5},this._pointBias={polygonOffset:!1,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:0,normalShading:!0,normalShadingSmooth:.1,depthBias:5e-4},this._depthAttachment=void 0,this._colorAttachment=void 0,this._shadowMapMatrix=new T.Z,this._shadowMapTexture=void 0,this._lightDirectionEC=new a.Z,this._lightPositionEC=new c.Z,this._distance=0,this._lightCamera=e.lightCamera,this._shadowMapCamera=new le,this._shadowMapCullingVolume=void 0,this._sceneCamera=void 0,this._boundingSphere=new o.Z,this._isPointLight=(0,m.Z)(e.isPointLight,!1),this._pointLightRadius=(0,m.Z)(e.pointLightRadius,100),this._cascadesEnabled=!this._isPointLight&&(0,m.Z)(e.cascadesEnabled,!0),this._numberOfCascades=this._cascadesEnabled?(0,m.Z)(e.numberOfCascades,4):0,this._fitNearFar=!0,this._maximumCascadeDistances=[25,150,700,Number.MAX_VALUE],this._textureSize=new s.Z,this._isSpotLight=!1,this._cascadesEnabled?this._shadowMapCamera.frustum=new w.Z:(0,_.Z)(this._lightCamera.frustum.fov)&&(this._isSpotLight=!0),this._cascadeSplits=[new c.Z,new c.Z],this._cascadeMatrices=[new T.Z,new T.Z,new T.Z,new T.Z],this._cascadeDistances=new c.Z,n=this._isPointLight?6:this._cascadesEnabled?this._numberOfCascades:1,this._passes=new Array(n);for(let e=0;e<n;++e)this._passes[e]=new J(t);this.debugShow=!1,this.debugFreezeFrame=!1,this._debugFreezeFrame=!1,this._debugCascadeColors=!1,this._debugLightFrustum=void 0,this._debugCameraFrustum=void 0,this._debugCascadeFrustums=new Array(this._numberOfCascades),this._debugShadowViewCommand=void 0,this._usesDepthTexture=t.depthTexture,this._isPointLight&&(this._usesDepthTexture=!1),this._primitiveRenderState=void 0,this._terrainRenderState=void 0,this._pointRenderState=void 0,$(this),this._clearCommand=new P.Z({depth:1,color:new d.Z}),this._clearPassState=new R.Z(t),this._size=(0,m.Z)(e.size,2048),this.size=this._size}function J(e){this.camera=new le,this.passState=new R.Z(e),this.framebuffer=void 0,this.textureOffsets=void 0,this.commandList=[],this.cullingVolume=void 0}function Q(e,t){return k.Z.fromCache({cull:{enabled:!0,face:G.Z.BACK},depthTest:{enabled:!0},colorMask:{red:e,green:e,blue:e,alpha:e},depthMask:!0,polygonOffset:{enabled:t.polygonOffset,factor:t.polygonOffsetFactor,units:t.polygonOffsetUnits}})}function $(e){const t=!e._usesDepthTexture;e._primitiveRenderState=Q(t,e._primitiveBias),e._terrainRenderState=Q(t,e._terrainBias),e._pointRenderState=Q(t,e._pointBias)}function K(e){const t=e._passes.length;for(let n=0;n<t;++n){const t=e._passes[n],i=t.framebuffer;(0,_.Z)(i)&&!i.isDestroyed()&&i.destroy(),t.framebuffer=void 0}e._depthAttachment=e._depthAttachment&&e._depthAttachment.destroy(),e._colorAttachment=e._colorAttachment&&e._colorAttachment.destroy()}function ee(e,t){e._isPointLight?function(e,t){const n=new B.Z({context:t,width:e._textureSize.x,height:e._textureSize.y,format:U.Z.DEPTH_COMPONENT16}),i=new O.Z({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:S.Z.RGBA,pixelDatatype:F.Z.UNSIGNED_BYTE,sampler:V.Z.NEAREST}),o=[i.negativeX,i.negativeY,i.negativeZ,i.positiveX,i.positiveY,i.positiveZ];for(let i=0;i<6;++i){const r=new N.Z({context:t,depthRenderbuffer:n,colorTextures:[o[i]],destroyAttachments:!1}),s=e._passes[i];s.framebuffer=r,s.passState.framebuffer=r}e._shadowMapTexture=i,e._depthAttachment=n,e._colorAttachment=i}(e,t):e._usesDepthTexture?function(e,t){const n=new H.Z({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:S.Z.DEPTH_STENCIL,pixelDatatype:F.Z.UNSIGNED_INT_24_8,sampler:V.Z.NEAREST}),i=new N.Z({context:t,depthStencilTexture:n,destroyAttachments:!1}),o=e._passes.length;for(let t=0;t<o;++t){const n=e._passes[t];n.framebuffer=i,n.passState.framebuffer=i}e._shadowMapTexture=n,e._depthAttachment=n}(e,t):function(e,t){const n=new B.Z({context:t,width:e._textureSize.x,height:e._textureSize.y,format:U.Z.DEPTH_COMPONENT16}),i=new H.Z({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:S.Z.RGBA,pixelDatatype:F.Z.UNSIGNED_BYTE,sampler:V.Z.NEAREST}),o=new N.Z({context:t,depthRenderbuffer:n,colorTextures:[i],destroyAttachments:!1}),r=e._passes.length;for(let t=0;t<r;++t){const n=e._passes[t];n.framebuffer=o,n.passState.framebuffer=o}e._shadowMapTexture=i,e._depthAttachment=n,e._colorAttachment=i}(e,t)}function te(e,t,n){n=(0,m.Z)(n,0),(e._isPointLight||0===n)&&(e._clearCommand.framebuffer=e._passes[n].framebuffer,e._clearCommand.execute(t,e._clearPassState))}X.MAXIMUM_DISTANCE=2e4,X.prototype.debugCreateRenderStates=function(){$(this)},Object.defineProperties(X.prototype,{enabled:{get:function(){return this._enabled},set:function(e){this.dirty=this._enabled!==e,this._enabled=e}},normalOffset:{get:function(){return this._normalOffset},set:function(e){this.dirty=this._normalOffset!==e,this._normalOffset=e,this._terrainBias.normalOffset=e,this._primitiveBias.normalOffset=e,this._pointBias.normalOffset=e}},softShadows:{get:function(){return this._softShadows},set:function(e){this.dirty=this._softShadows!==e,this._softShadows=e}},size:{get:function(){return this._size},set:function(e){!function(e,t){e._size=t;const n=e._passes,o=n.length,r=e._textureSize;if(e._isPointLight){t=D.Z.maximumCubeMapSize>=t?t:D.Z.maximumCubeMapSize,r.x=t,r.y=t;const e=new i.Z(0,0,t,t);n[0].passState.viewport=e,n[1].passState.viewport=e,n[2].passState.viewport=e,n[3].passState.viewport=e,n[4].passState.viewport=e,n[5].passState.viewport=e}else 1===o?(t=D.Z.maximumTextureSize>=t?t:D.Z.maximumTextureSize,r.x=t,r.y=t,n[0].passState.viewport=new i.Z(0,0,t,t)):4===o&&(t=D.Z.maximumTextureSize>=2*t?t:D.Z.maximumTextureSize/2,r.x=2*t,r.y=2*t,n[0].passState.viewport=new i.Z(0,0,t,t),n[1].passState.viewport=new i.Z(t,0,t,t),n[2].passState.viewport=new i.Z(0,t,t,t),n[3].passState.viewport=new i.Z(t,t,t,t));e._clearPassState.viewport=new i.Z(0,0,r.x,r.y);for(let e=0;e<o;++e){const t=n[e],i=t.passState.viewport,o=i.x/r.x,s=i.y/r.y,a=i.width/r.x,c=i.height/r.y;t.textureOffsets=new T.Z(a,0,0,o,0,c,0,s,0,0,1,0,0,0,0,1)}}(this,e)}},outOfView:{get:function(){return this._outOfView}},shadowMapCullingVolume:{get:function(){return this._shadowMapCullingVolume}},passes:{get:function(){return this._passes}},isPointLight:{get:function(){return this._isPointLight}},debugCascadeColors:{get:function(){return this._debugCascadeColors},set:function(e){this.dirty=this._debugCascadeColors!==e,this._debugCascadeColors=e}}});const ne=new i.Z;const ie=new Array(8);ie[0]=new c.Z(-1,-1,-1,1),ie[1]=new c.Z(1,-1,-1,1),ie[2]=new c.Z(1,1,-1,1),ie[3]=new c.Z(-1,1,-1,1),ie[4]=new c.Z(-1,-1,1,1),ie[5]=new c.Z(1,-1,1,1),ie[6]=new c.Z(1,1,1,1),ie[7]=new c.Z(-1,1,1,1);const oe=new T.Z,re=new Array(8);for(let e=0;e<8;++e)re[e]=new c.Z;const se=[d.Z.RED,d.Z.GREEN,d.Z.BLUE,d.Z.MAGENTA],ae=new a.Z;function ce(e,t){!function(e,t){const n=t.context,o=t.context.drawingBufferWidth,r=t.context.drawingBufferHeight,s=.3*Math.min(o,r),a=ne;a.x=o-s,a.y=0,a.width=s,a.height=s;let c=e._debugShadowViewCommand;(0,_.Z)(c)||(c=function(e,t){let n;n=e._isPointLight?"uniform samplerCube shadowMap_textureCube; \nin vec2 v_textureCoordinates; \nvoid main() \n{ \n    vec2 uv = v_textureCoordinates; \n    vec3 dir; \n \n    if (uv.y < 0.5) \n    { \n        if (uv.x < 0.333) \n        { \n            dir.x = -1.0; \n            dir.y = uv.x * 6.0 - 1.0; \n            dir.z = uv.y * 4.0 - 1.0; \n        } \n        else if (uv.x < 0.666) \n        { \n            dir.y = -1.0; \n            dir.x = uv.x * 6.0 - 3.0; \n            dir.z = uv.y * 4.0 - 1.0; \n        } \n        else \n        { \n            dir.z = -1.0; \n            dir.x = uv.x * 6.0 - 5.0; \n            dir.y = uv.y * 4.0 - 1.0; \n        } \n    } \n    else \n    { \n        if (uv.x < 0.333) \n        { \n            dir.x = 1.0; \n            dir.y = uv.x * 6.0 - 1.0; \n            dir.z = uv.y * 4.0 - 3.0; \n        } \n        else if (uv.x < 0.666) \n        { \n            dir.y = 1.0; \n            dir.x = uv.x * 6.0 - 3.0; \n            dir.z = uv.y * 4.0 - 3.0; \n        } \n        else \n        { \n            dir.z = 1.0; \n            dir.x = uv.x * 6.0 - 5.0; \n            dir.y = uv.y * 4.0 - 3.0; \n        } \n    } \n \n    float shadow = czm_unpackDepth(czm_textureCube(shadowMap_textureCube, dir)); \n    out_FragColor = vec4(vec3(shadow), 1.0); \n} \n":`uniform sampler2D shadowMap_texture; \nin vec2 v_textureCoordinates; \nvoid main() \n{ \n${e._usesDepthTexture?"    float shadow = texture(shadowMap_texture, v_textureCoordinates).r; \n":"    float shadow = czm_unpackDepth(texture(shadowMap_texture, v_textureCoordinates)); \n"}    out_FragColor = vec4(vec3(shadow), 1.0); \n} \n`;const i=t.createViewportQuadCommand(n,{uniformMap:{shadowMap_texture:function(){return e._shadowMapTexture},shadowMap_textureCube:function(){return e._shadowMapTexture}}});return i.pass=M.Z.OVERLAY,i}(e,n),e._debugShadowViewCommand=c),(0,_.Z)(c.renderState)&&i.Z.equals(c.renderState.viewport,a)||(c.renderState=k.Z.fromCache({viewport:i.Z.clone(a)})),t.commandList.push(e._debugShadowViewCommand)}(e,t);const n=e.debugFreezeFrame&&!e._debugFreezeFrame;if(e._debugFreezeFrame=e.debugFreezeFrame,e.debugFreezeFrame&&(n&&(e._debugCameraFrustum=e._debugCameraFrustum&&e._debugCameraFrustum.destroy(),e._debugCameraFrustum=new j.Z({camera:e._sceneCamera,color:d.Z.CYAN,updateOnChange:!1})),e._debugCameraFrustum.update(t)),e._cascadesEnabled){if(e.debugFreezeFrame){n&&(e._debugLightFrustum=e._debugLightFrustum&&e._debugLightFrustum.destroy(),e._debugLightFrustum=new j.Z({camera:e._shadowMapCamera,color:d.Z.YELLOW,updateOnChange:!1})),e._debugLightFrustum.update(t);for(let i=0;i<e._numberOfCascades;++i)n&&(e._debugCascadeFrustums[i]=e._debugCascadeFrustums[i]&&e._debugCascadeFrustums[i].destroy(),e._debugCascadeFrustums[i]=new j.Z({camera:e._passes[i].camera,color:se[i],updateOnChange:!1})),e._debugCascadeFrustums[i].update(t)}}else if(e._isPointLight){if(!(0,_.Z)(e._debugLightFrustum)||e._needsUpdate){const t=e._shadowMapCamera.positionWC,n=C.Z.IDENTITY,i=2*e._pointLightRadius,o=a.Z.fromElements(i,i,i,ae),s=T.Z.fromTranslationQuaternionRotationScale(t,n,o,oe);e._debugLightFrustum=e._debugLightFrustum&&e._debugLightFrustum.destroy(),e._debugLightFrustum=function(e,t){const n=new b.Z({geometry:new r.Z({minimum:new a.Z(-.5,-.5,-.5),maximum:new a.Z(.5,.5,.5)}),attributes:{color:h.Z.fromColor(t)}}),i=new b.Z({geometry:new x.Z({radius:.5}),attributes:{color:h.Z.fromColor(t)}});return new q.Z({geometryInstances:[n,i],appearance:new W.Z({translucent:!1,flat:!0}),asynchronous:!1,modelMatrix:e})}(s,d.Z.YELLOW)}e._debugLightFrustum.update(t)}else(0,_.Z)(e._debugLightFrustum)&&!e._needsUpdate||(e._debugLightFrustum=new j.Z({camera:e._shadowMapCamera,color:d.Z.YELLOW,updateOnChange:!1})),e._debugLightFrustum.update(t)}function le(){this.viewMatrix=new T.Z,this.inverseViewMatrix=new T.Z,this.frustum=void 0,this.positionCartographic=new l.Z,this.positionWC=new a.Z,this.directionWC=a.Z.clone(a.Z.UNIT_Z),this.upWC=a.Z.clone(a.Z.UNIT_Y),this.rightWC=a.Z.clone(a.Z.UNIT_X),this.viewProjectionMatrix=new T.Z}le.prototype.clone=function(e){T.Z.clone(e.viewMatrix,this.viewMatrix),T.Z.clone(e.inverseViewMatrix,this.inverseViewMatrix),this.frustum=e.frustum.clone(this.frustum),l.Z.clone(e.positionCartographic,this.positionCartographic),a.Z.clone(e.positionWC,this.positionWC),a.Z.clone(e.directionWC,this.directionWC),a.Z.clone(e.upWC,this.upWC),a.Z.clone(e.rightWC,this.rightWC)};const ue=new T.Z(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);le.prototype.getViewProjection=function(){const e=this.viewMatrix,t=this.frustum.projectionMatrix;return T.Z.multiply(t,e,this.viewProjectionMatrix),T.Z.multiply(ue,this.viewProjectionMatrix,this.viewProjectionMatrix),this.viewProjectionMatrix};const de=new Array(5),he=new E.Z,fe=new Array(4),pe=new a.Z,me=new a.Z,_e=new T.Z,ge=new a.Z,Ze=new a.Z,ye=new a.Z,be=[new a.Z(-1,0,0),new a.Z(0,-1,0),new a.Z(0,0,-1),new a.Z(1,0,0),new a.Z(0,1,0),new a.Z(0,0,1)],ve=[new a.Z(0,-1,0),new a.Z(0,0,-1),new a.Z(0,-1,0),new a.Z(0,-1,0),new a.Z(0,0,1),new a.Z(0,-1,0)],Ae=[new a.Z(0,0,1),new a.Z(1,0,0),new a.Z(-1,0,0),new a.Z(0,0,-1),new a.Z(1,0,0),new a.Z(1,0,0)],Te=new a.Z,we=new a.Z,Ee=new o.Z,Se=Ee.center;X.prototype.update=function(e){if(function(e,t){const n=t.camera,i=e._lightCamera,r=e._sceneCamera,s=e._shadowMapCamera;e._cascadesEnabled?a.Z.clone(i.directionWC,s.directionWC):e._isPointLight?a.Z.clone(i.positionWC,s.positionWC):s.clone(i);const c=e._lightDirectionEC;let l,u;T.Z.multiplyByPointAsVector(n.viewMatrix,s.directionWC,c),a.Z.normalize(c,c),a.Z.negate(c,c),T.Z.multiplyByPoint(n.viewMatrix,s.positionWC,e._lightPositionEC),e._lightPositionEC.w=e._pointLightRadius,e._fitNearFar?(l=Math.min(t.shadowState.nearPlane,e.maximumDistance),u=Math.min(t.shadowState.farPlane,e.maximumDistance),u=Math.max(u,l+1)):(l=n.frustum.near,u=e.maximumDistance),e._sceneCamera=z.Z.clone(n,r),n.frustum.clone(e._sceneCamera.frustum),e._sceneCamera.frustum.near=l,e._sceneCamera.frustum.far=u,e._distance=u-l,function(e,t){const n=e._sceneCamera,i=e._shadowMapCamera,r=Ee;if(e._cascadesEnabled){if(n.frustum.near>=e.maximumDistance)return e._outOfView=!0,void(e._needsUpdate=!1);const o=t.mapProjection.ellipsoid.geodeticSurfaceNormal(n.positionWC,Te),r=a.Z.negate(i.directionWC,we),s=a.Z.dot(o,r);if(e.fadingEnabled){const t=A.Z.clamp(s/.1,0,1);e._darkness=A.Z.lerp(1,e.darkness,t)}else e._darkness=e.darkness;if(s<0)return e._outOfView=!0,void(e._needsUpdate=!1);e._needsUpdate=!0,e._outOfView=!1}else if(e._isPointLight)r.center=i.positionWC,r.radius=e._pointLightRadius,e._outOfView=t.cullingVolume.computeVisibility(r)===v.Z.OUTSIDE,e._needsUpdate=!e._outOfView&&!e._boundingSphere.equals(r),o.Z.clone(r,e._boundingSphere);else{const n=i.frustum.far/2,s=a.Z.add(i.positionWC,a.Z.multiplyByScalar(i.directionWC,n,Se),Se);r.center=s,r.radius=n,e._outOfView=t.cullingVolume.computeVisibility(r)===v.Z.OUTSIDE,e._needsUpdate=!e._outOfView&&!e._boundingSphere.equals(r),o.Z.clone(r,e._boundingSphere)}}(e,t),!e._outOfViewPrevious&&e._outOfView&&(e._needsUpdate=!0),e._outOfViewPrevious=e._outOfView}(this,e),this._needsUpdate)if(t=this,n=e.context,(0,_.Z)(t._passes[0].framebuffer)&&t._shadowMapTexture.width===t._textureSize.x||(K(t),ee(t,n),function(e,t){e._usesDepthTexture&&e._passes[0].framebuffer.status!==I.Z.FRAMEBUFFER_COMPLETE&&(e._usesDepthTexture=!1,$(e),K(e),ee(e,t))}(t,n),te(t,n)),this._isPointLight&&function(e,t){const n=new E.Z;n.fov=A.Z.PI_OVER_TWO,n.near=1,n.far=e._pointLightRadius,n.aspectRatio=1;for(let i=0;i<6;++i){const o=e._passes[i].camera;o.positionWC=e._shadowMapCamera.positionWC,o.positionCartographic=t.mapProjection.ellipsoid.cartesianToCartographic(o.positionWC,o.positionCartographic),o.directionWC=be[i],o.upWC=ve[i],o.rightWC=Ae[i],T.Z.computeView(o.positionWC,o.directionWC,o.upWC,o.rightWC,o.viewMatrix),T.Z.inverse(o.viewMatrix,o.inverseViewMatrix),o.frustum=n}}(this,e),this._cascadesEnabled&&(function(e,t){const n=e._shadowMapCamera,i=e._sceneCamera,o=T.Z.multiply(i.frustum.projectionMatrix,i.viewMatrix,oe),r=T.Z.inverse(o,oe),s=n.directionWC;let l=i.directionWC;a.Z.equalsEpsilon(s,l,A.Z.EPSILON10)&&(l=i.upWC);const u=a.Z.cross(s,l,ge);l=a.Z.cross(u,s,Ze),a.Z.normalize(l,l),a.Z.normalize(u,u);const d=a.Z.fromElements(0,0,0,ye);let h=T.Z.computeView(d,s,l,u,_e);const f=T.Z.multiply(h,r,oe),p=a.Z.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,pe),m=a.Z.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,me);for(let e=0;e<8;++e){const t=c.Z.clone(ie[e],re[e]);T.Z.multiplyByVector(f,t,t),a.Z.divideByScalar(t,t.w,t),a.Z.minimumByComponent(t,p,p),a.Z.maximumByComponent(t,m,m)}m.z+=1e3,p.z-=10;const _=ye;_.x=-.5*(p.x+m.x),_.y=-.5*(p.y+m.y),_.z=-m.z;const g=T.Z.fromTranslation(_,oe);h=T.Z.multiply(g,h,h);const Z=.5*(m.x-p.x),y=.5*(m.y-p.y),b=m.z-p.z,v=n.frustum;v.left=-Z,v.right=Z,v.bottom=-y,v.top=y,v.near=.01,v.far=b,T.Z.clone(h,n.viewMatrix),T.Z.inverse(h,n.inverseViewMatrix),T.Z.getTranslation(n.inverseViewMatrix,n.positionWC),t.mapProjection.ellipsoid.cartesianToCartographic(n.positionWC,n.positionCartographic),a.Z.clone(s,n.directionWC),a.Z.clone(l,n.upWC),a.Z.clone(u,n.rightWC)}(this,e),this._numberOfCascades>1&&function(e,t){const n=e._shadowMapCamera,i=e._sceneCamera,o=i.frustum.near,r=i.frustum.far,s=e._numberOfCascades;let l;const u=r-o,d=r/o;let h=.9,f=!1;t.shadowState.closestObjectSize<200&&(f=!0,h=.9);const p=fe,m=de;for(m[0]=o,m[s]=r,l=0;l<s;++l){const e=(l+1)/s,t=o*Math.pow(d,e),n=o+u*e,i=A.Z.lerp(n,t,h);m[l+1]=i,p[l]=i-m[l]}if(f){for(l=0;l<s;++l)p[l]=Math.min(p[l],e._maximumCascadeDistances[l]);let t=m[0];for(l=0;l<s-1;++l)t+=p[l],m[l+1]=t}c.Z.unpack(m,0,e._cascadeSplits[0]),c.Z.unpack(m,1,e._cascadeSplits[1]),c.Z.unpack(p,0,e._cascadeDistances);const _=n.frustum,g=_.left,Z=_.right,y=_.bottom,b=_.top,v=_.near,w=_.far,E=n.positionWC,S=n.directionWC,C=n.upWC,x=i.frustum.clone(he),I=n.getViewProjection();for(l=0;l<s;++l){x.near=m[l],x.far=m[l+1];const t=T.Z.multiply(x.projectionMatrix,i.viewMatrix,oe),o=T.Z.inverse(t,oe),r=T.Z.multiply(I,o,oe),s=a.Z.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,pe),u=a.Z.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,me);for(let e=0;e<8;++e){const t=c.Z.clone(ie[e],re[e]);T.Z.multiplyByVector(r,t,t),a.Z.divideByScalar(t,t.w,t),a.Z.minimumByComponent(t,s,s),a.Z.maximumByComponent(t,u,u)}s.x=Math.max(s.x,0),s.y=Math.max(s.y,0),s.z=0,u.x=Math.min(u.x,1),u.y=Math.min(u.y,1),u.z=Math.min(u.z,1);const d=e._passes[l],h=d.camera;h.clone(n);const f=h.frustum;f.left=g+s.x*(Z-g),f.right=g+u.x*(Z-g),f.bottom=y+s.y*(b-y),f.top=y+u.y*(b-y),f.near=v+s.z*(w-v),f.far=v+u.z*(w-v),d.cullingVolume=h.frustum.computeCullingVolume(E,S,C);const p=e._cascadeMatrices[l];T.Z.multiply(h.getViewProjection(),i.inverseViewMatrix,p),T.Z.multiply(d.textureOffsets,p,p)}}(this,e)),this._isPointLight)this._shadowMapCullingVolume=p.Z.fromBoundingSphere(this._boundingSphere);else{const e=this._shadowMapCamera,t=e.positionWC,n=e.directionWC,i=e.upWC;this._shadowMapCullingVolume=e.frustum.computeCullingVolume(t,n,i),1===this._passes.length&&this._passes[0].camera.clone(e)}var t,n;if(1===this._passes.length){const e=this._sceneCamera.inverseViewMatrix;T.Z.multiply(this._shadowMapCamera.getViewProjection(),e,this._shadowMapMatrix)}this.debugShow&&ce(this,e)},X.prototype.updatePass=function(e,t){te(this,e,t)};const Ce=new s.Z;function xe(e,t,n){const i=e._isPointLight?e._pointBias:n?e._terrainBias:e._primitiveBias,o={shadowMap_texture:function(){return e._shadowMapTexture},shadowMap_textureCube:function(){return e._shadowMapTexture},shadowMap_matrix:function(){return e._shadowMapMatrix},shadowMap_cascadeSplits:function(){return e._cascadeSplits},shadowMap_cascadeMatrices:function(){return e._cascadeMatrices},shadowMap_lightDirectionEC:function(){return e._lightDirectionEC},shadowMap_lightPositionEC:function(){return e._lightPositionEC},shadowMap_cascadeDistances:function(){return e._cascadeDistances},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const t=Ce;return t.x=1/e._textureSize.x,t.y=1/e._textureSize.y,c.Z.fromElements(t.x,t.y,i.depthBias,i.normalShadingSmooth,this.combinedUniforms1)},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){return c.Z.fromElements(i.normalOffsetScale,e._distance,e.maximumDistance,e._darkness,this.combinedUniforms2)},combinedUniforms1:new c.Z,combinedUniforms2:new c.Z};return(0,f.Z)(t,o,!1)}function Ie(e,t,n,i,o,r){let s,a,c;if((0,_.Z)(r)&&(s=r.shaderProgram,a=r.renderState,c=r.uniformMap),(r=L.Z.shallowClone(n,r)).castShadows=!0,r.receiveShadows=!1,!(0,_.Z)(s)||o!==n.shaderProgram.id||t){const t=n.shaderProgram,o=n.pass===M.Z.GLOBE,r=n.pass!==M.Z.TRANSLUCENT,l=e._isPointLight,d=e._usesDepthTexture,h=Y.Z.getShadowCastShaderKeyword(l,o,d,r);if(s=i.shaderCache.getDerivedShaderProgram(t,h),!(0,_.Z)(s)){const e=t.vertexShaderSource,n=t.fragmentShaderSource,a=Y.Z.createShadowCastVertexShader(e,l,o),c=Y.Z.createShadowCastFragmentShader(n,l,d,r);s=i.shaderCache.createDerivedShaderProgram(t,h,{vertexShaderSource:a,fragmentShaderSource:c,attributeLocations:t._attributeLocations})}a=e._primitiveRenderState,l?a=e._pointRenderState:o&&(a=e._terrainRenderState),n.renderState.cull.enabled||(a=(0,u.Z)(a,!1),a.cull=(0,u.Z)(a.cull,!1),a.cull.enabled=!1,a=k.Z.fromCache(a)),c=xe(e,n.uniformMap,o)}return r.shaderProgram=s,r.renderState=a,r.uniformMap=c,r}X.createReceiveDerivedCommand=function(e,t,n,i,o){(0,_.Z)(o)||(o={});const r=e.length>0,s=t.shaderProgram,a=s.vertexShaderSource,c=s.fragmentShaderSource,l=t.pass===M.Z.GLOBE;let u=!1;if(l&&(u=t.owner.data.renderedMesh.encoding.hasVertexNormals),t.receiveShadows&&r){let r,d;(0,_.Z)(o.receiveCommand)&&(r=o.receiveCommand.shaderProgram,d=o.receiveCommand.uniformMap),o.receiveCommand=L.Z.shallowClone(t,o.receiveCommand),o.castShadows=!1,o.receiveShadows=!0;const h=o.receiveShaderCastShadows!==t.castShadows,f=o.receiveShaderProgramId!==t.shaderProgram.id;if(!(0,_.Z)(r)||f||n||h){const n=Y.Z.getShadowReceiveShaderKeyword(e[0],t.castShadows,l,u);if(r=i.shaderCache.getDerivedShaderProgram(s,n),!(0,_.Z)(r)){const o=Y.Z.createShadowReceiveVertexShader(a,l,u),d=Y.Z.createShadowReceiveFragmentShader(c,e[0],t.castShadows,l,u);r=i.shaderCache.createDerivedShaderProgram(s,n,{vertexShaderSource:o,fragmentShaderSource:d,attributeLocations:s._attributeLocations})}d=xe(e[0],t.uniformMap,l)}o.receiveCommand.shaderProgram=r,o.receiveCommand.uniformMap=d,o.receiveShaderProgramId=t.shaderProgram.id,o.receiveShaderCastShadows=t.castShadows}return o},X.createCastDerivedCommand=function(e,t,n,i,o){if((0,_.Z)(o)||(o={}),t.castShadows){let r=o.castCommands;(0,_.Z)(r)||(r=o.castCommands=[]);const s=o.castShaderProgramId,a=e.length;r.length=a;for(let o=0;o<a;++o)r[o]=Ie(e[o],n,t,i,s,r[o]);o.castShaderProgramId=t.shaderProgram.id}return o},X.prototype.isDestroyed=function(){return!1},X.prototype.destroy=function(){K(this),this._debugLightFrustum=this._debugLightFrustum&&this._debugLightFrustum.destroy(),this._debugCameraFrustum=this._debugCameraFrustum&&this._debugCameraFrustum.destroy(),this._debugShadowViewCommand=this._debugShadowViewCommand&&this._debugShadowViewCommand.shaderProgram&&this._debugShadowViewCommand.shaderProgram.destroy();for(let e=0;e<this._numberOfCascades;++e)this._debugCascadeFrustums[e]=this._debugCascadeFrustums[e]&&this._debugCascadeFrustums[e].destroy();return(0,g.Z)(this)};const Pe=X},857373:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(11020),o=n(437530);function r(){}r.getShadowCastShaderKeyword=function(e,t,n,i){return`castShadow ${e} ${t} ${n} ${i}`},r.createShadowCastVertexShader=function(e,t,n){const r=e.defines.slice(0),s=e.sources.slice(0);r.push("SHADOW_MAP"),n&&r.push("GENERATE_POSITION");const a=o.Z.findPositionVarying(e),c=(0,i.Z)(a);if(t&&!c){const e=s.length;for(let t=0;t<e;++t)s[t]=o.Z.replaceMain(s[t],"czm_shadow_cast_main");const t="out vec3 v_positionEC; \nvoid main() \n{ \n    czm_shadow_cast_main(); \n    v_positionEC = (czm_inverseProjection * gl_Position).xyz; \n}";s.push(t)}return new o.Z({defines:r,sources:s})},r.createShadowCastFragmentShader=function(e,t,n,r){const s=e.defines.slice(0),a=e.sources.slice(0);s.push("SHADOW_MAP");let c=o.Z.findPositionVarying(e);const l=(0,i.Z)(c);l||(c="v_positionEC");const u=a.length;for(let e=0;e<u;++e)a[e]=o.Z.replaceMain(a[e],"czm_shadow_cast_main");let d="";return t&&(l||(d+="in vec3 v_positionEC; \n"),d+="uniform vec4 shadowMap_lightPositionEC; \n"),d+=r?"void main() \n{ \n":"void main() \n{ \n    czm_shadow_cast_main(); \n    if (out_FragColor.a == 0.0) \n    { \n       discard; \n    } \n",d+=t?`    float distance = length(${c}); \n    if (distance >= shadowMap_lightPositionEC.w) \n    { \n        discard; \n    } \n    distance /= shadowMap_lightPositionEC.w; // radius \n    out_FragColor = czm_packDepth(distance); \n`:n?"    out_FragColor = vec4(1.0); \n":"    out_FragColor = czm_packDepth(gl_FragCoord.z); \n",d+="} \n",a.push(d),new o.Z({defines:s,sources:a})},r.getShadowReceiveShaderKeyword=function(e,t,n,i){return`receiveShadow ${e._usesDepthTexture}${e._polygonOffsetSupported}${e._isPointLight}${e._isSpotLight}${e._numberOfCascades>1}${e.debugCascadeColors}${e.softShadows}${t}${n}${i}`},r.createShadowReceiveVertexShader=function(e,t,n){const i=e.defines.slice(0),r=e.sources.slice(0);return i.push("SHADOW_MAP"),t&&(n?i.push("GENERATE_POSITION_AND_NORMAL"):i.push("GENERATE_POSITION")),new o.Z({defines:i,sources:r})},r.createShadowReceiveFragmentShader=function(e,t,n,r,s){const a=o.Z.findNormalVarying(e),c=!r&&(0,i.Z)(a)||r&&s,l=o.Z.findPositionVarying(e),u=(0,i.Z)(l),d=t._usesDepthTexture,h=t._polygonOffsetSupported,f=t._isPointLight,p=t._isSpotLight,m=t._numberOfCascades>1,_=t.debugCascadeColors,g=t.softShadows,Z=f?t._pointBias:r?t._terrainBias:t._primitiveBias,y=e.defines.slice(0),b=e.sources.slice(0),v=b.length;for(let e=0;e<v;++e)b[e]=o.Z.replaceMain(b[e],"czm_shadow_receive_main");f?y.push("USE_CUBE_MAP_SHADOW"):d&&y.push("USE_SHADOW_DEPTH_TEXTURE"),g&&!f&&y.push("USE_SOFT_SHADOWS"),m&&n&&r&&(c?y.push("ENABLE_VERTEX_LIGHTING"):y.push("ENABLE_DAYNIGHT_SHADING")),n&&Z.normalShading&&c&&(y.push("USE_NORMAL_SHADING"),Z.normalShadingSmooth>0&&y.push("USE_NORMAL_SHADING_SMOOTH"));let A,T="";return T+=f?"uniform samplerCube shadowMap_textureCube; \n":"uniform sampler2D shadowMap_texture; \n",A=u?`    return vec4(${l}, 1.0); \n`:"#ifndef LOG_DEPTH \n    return czm_windowToEyeCoordinates(gl_FragCoord); \n#else \n    return vec4(v_logPositionEC, 1.0); \n#endif \n",T+=`uniform mat4 shadowMap_matrix; \nuniform vec3 shadowMap_lightDirectionEC; \nuniform vec4 shadowMap_lightPositionEC; \nuniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness; \nuniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth; \n#ifdef LOG_DEPTH \nin vec3 v_logPositionEC; \n#endif \nvec4 getPositionEC() \n{ \n${A}} \nvec3 getNormalEC() \n{ \n${c?`    return normalize(${a}); \n`:"    return vec3(1.0); \n"}} \nvoid applyNormalOffset(inout vec4 positionEC, vec3 normalEC, float nDotL) \n{ \n${Z.normalOffset&&c?"    float normalOffset = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.x; \n    float normalOffsetScale = 1.0 - nDotL; \n    vec3 offset = normalOffset * normalOffsetScale * normalEC; \n    positionEC.xyz += offset; \n":""}} \n`,T+="void main() \n{ \n    czm_shadow_receive_main(); \n    vec4 positionEC = getPositionEC(); \n    vec3 normalEC = getNormalEC(); \n    float depth = -positionEC.z; \n",T+="    czm_shadowParameters shadowParameters; \n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy; \n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z; \n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w; \n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w; \n",r?T+="    shadowParameters.depthBias *= max(depth * 0.01, 1.0); \n":h||(T+="    shadowParameters.depthBias *= mix(1.0, 100.0, depth * 0.0015); \n"),T+=f?"    vec3 directionEC = positionEC.xyz - shadowMap_lightPositionEC.xyz; \n    float distance = length(directionEC); \n    directionEC = normalize(directionEC); \n    float radius = shadowMap_lightPositionEC.w; \n    // Stop early if the fragment is beyond the point light radius \n    if (distance > radius) \n    { \n        return; \n    } \n    vec3 directionWC  = czm_inverseViewRotation * directionEC; \n    shadowParameters.depth = distance / radius; \n    shadowParameters.nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0); \n    shadowParameters.texCoords = directionWC; \n    float visibility = czm_shadowVisibility(shadowMap_textureCube, shadowParameters); \n":p?"    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz); \n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    vec4 shadowPosition = shadowMap_matrix * positionEC; \n    // Spot light uses a perspective projection, so perform the perspective divide \n    shadowPosition /= shadowPosition.w; \n    // Stop early if the fragment is not in the shadow bounds \n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) \n    { \n        return; \n    } \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n":m?"    float maxDepth = shadowMap_cascadeSplits[1].w; \n    // Stop early if the eye depth exceeds the last cascade \n    if (depth > maxDepth) \n    { \n        return; \n    } \n    // Get the cascade based on the eye-space depth \n    vec4 weights = czm_cascadeWeights(depth); \n    // Apply normal offset \n    float nDotL = clamp(dot(normalEC, shadowMap_lightDirectionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    // Transform position into the cascade \n    vec4 shadowPosition = czm_cascadeMatrix(weights) * positionEC; \n    // Get visibility \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n    // Fade out shadows that are far away \n    float shadowMapMaximumDistance = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.z; \n    float fade = max((depth - shadowMapMaximumDistance * 0.8) / (shadowMapMaximumDistance * 0.2), 0.0); \n    visibility = mix(visibility, 1.0, fade); \n"+(_?"    // Draw cascade colors for debugging \n    out_FragColor *= czm_cascadeColor(weights); \n":""):"    float nDotL = clamp(dot(normalEC, shadowMap_lightDirectionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    vec4 shadowPosition = shadowMap_matrix * positionEC; \n    // Stop early if the fragment is not in the shadow bounds \n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) \n    { \n        return; \n    } \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n",T+="    out_FragColor.rgb *= visibility; \n} \n",b.push(T),new o.Z({defines:y,sources:b})};const s=r},586085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(790087),o=n(865029),r=n(234146),s=n(11020),a=n(906439),c=n(282910),l=n(729476),u=n(143450),d=n(205522),h=n(217066),f=n(709366),p=n(769426);function m(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const t=(0,r.Z)(e.rectangle,u.Z.MAX_VALUE),n=new l.Z({rectangle:t,numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});this._tilingScheme=n,this._image=void 0,this._texture=void 0,this._hasError=!1,this._errorEvent=new c.Z,this._ready=!1;let h=e.credit;"string"==typeof h&&(h=new o.Z(h)),this._credit=h,i.Z.defined("options.url",e.url);const p=d.Z.createIfNeeded(e.url);if(this._resource=p,(0,s.Z)(e.tileWidth)||(0,s.Z)(e.tileHeight))return i.Z.typeOf.number("options.tileWidth",e.tileWidth),i.Z.typeOf.number("options.tileHeight",e.tileHeight),this._tileWidth=e.tileWidth,this._tileHeight=e.tileHeight,this._ready=!0,void(this._readyPromise=Promise.resolve(!0));(0,a.Z)("SingleTileImageryProvider options","options.tileHeight and options.tileWidth became required in CesiumJS 1.104. Omitting these properties will result in an error in 1.107. Provide options.tileHeight and options.tileWidth, or use SingleTileImageryProvider.fromUrl instead."),this._tileWidth=0,this._tileHeight=0,this._readyPromise=_(p,this).then((e=>(f.Z.reportSuccess(this._errorEvent),this._image=e,this._tileWidth=e.width,this._tileHeight=e.height,this._ready=!0,!0)))}async function _(e,t,n){try{return await p.Z.loadImage(null,e)}catch(i){return function(e,t,n,i){let o=`Failed to load image ${e.url}`;(0,s.Z)(t)&&(0,s.Z)(t.message)&&(o+=`: ${t.message}`);const r=f.Z.reportError(i,n,(0,s.Z)(n)?n._errorEvent:void 0,o,0,0,0,t);if(r.retry)return _(e,n,r);throw(0,s.Z)(n)&&(n._hasError=!0),new h.Z(o)}(e,i,t,n)}}Object.defineProperties(m.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 0}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,a.Z)("SingleTileImageryProvider.ready","SingleTileImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use SingleTileImageryProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,a.Z)("SingleTileImageryProvider.readyPromise","SingleTileImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use SingleTileImageryProvider.fromUrl instead."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},defaultAlpha:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultAlpha","SingleTileImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultAlpha","SingleTileImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultNightAlpha","SingleTileImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultNightAlpha","SingleTileImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultDayAlpha","SingleTileImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultDayAlpha","SingleTileImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultBrightness","SingleTileImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultBrightness","SingleTileImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultContrast","SingleTileImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultContrast","SingleTileImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultHue","SingleTileImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultHue","SingleTileImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultSaturation","SingleTileImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultSaturation","SingleTileImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultGamma","SingleTileImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultGamma","SingleTileImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultMinificationFilter","SingleTileImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultMinificationFilter","SingleTileImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,a.Z)("SingleTileImageryProvider.defaultMagnificationFilter","SingleTileImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,a.Z)("SingleTileImageryProvider.defaultMagnificationFilter","SingleTileImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),m.fromUrl=async function(e,t){i.Z.defined("url",e);const n=d.Z.createIfNeeded(e),o=await _(n);t=(0,r.Z)(t,r.Z.EMPTY_OBJECT);const s=new m({...t,url:e,tileWidth:o.width,tileHeight:o.height});return s._image=o,s},m.prototype.getTileCredits=function(e,t,n){},m.prototype.requestImage=async function(e,t,n,i){if(!this._hasError&&!(0,s.Z)(this._image)){const e=await _(this._resource,this);return this._image=e,f.Z.reportSuccess(this._errorEvent),e}return this._image},m.prototype.pickFeatures=function(e,t,n,i,o){};const g=m},987411:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(660904),o=n(234146),r=n(11020),s=n(722313),a=n(63354),c=n(658912),l=n(5450),u=n(344485),d=n(659635),h=n(427183),f=n(915323),p=n(661679),m=n(417148),_=n(161632),g=n(437530),Z=n(858371),y=n(644114),b=n(92078),v=n(917085),A=n(965087),T=n(418371),w=n(973591),E=n(53839),S=n(714233);function C(e){e=(0,o.Z)(e,a.Z.WGS84),this.show=!0,this.perFragmentAtmosphere=!1,this._ellipsoid=e;const t=i.Z.multiplyByScalar(e.radii,1.025,new i.Z);this._scaleMatrix=d.Z.fromScale(t),this._modelMatrix=new d.Z,this._command=new p.Z({owner:this,modelMatrix:this._modelMatrix}),this._spSkyFromSpace=void 0,this._spSkyFromAtmosphere=void 0,this._flags=void 0,this.atmosphereLightIntensity=50,this.atmosphereRayleighCoefficient=new i.Z(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new i.Z(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this._hueSaturationBrightness=new i.Z;const n=new i.Z;n.x=1.025*e.maximumRadius,n.y=e.maximumRadius,n.z=0,this._radiiAndDynamicAtmosphereColor=n;const r=this;this._command.uniformMap={u_radiiAndDynamicAtmosphereColor:function(){return r._radiiAndDynamicAtmosphereColor},u_hsbShift:function(){return r._hueSaturationBrightness.x=r.hueShift,r._hueSaturationBrightness.y=r.saturationShift,r._hueSaturationBrightness.z=r.brightnessShift,r._hueSaturationBrightness},u_atmosphereLightIntensity:function(){return r.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return r.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return r.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return r.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return r.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return r.atmosphereMieAnisotropy}}}Object.defineProperties(C.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),C.prototype.setDynamicAtmosphereColor=function(e,t){const n=e?t?2:1:0;this._radiiAndDynamicAtmosphereColor.z=n};const x=new d.Z;C.prototype.update=function(e,t){if(!this.show)return;const n=e.mode;if(n!==S.Z.SCENE3D&&n!==S.Z.MORPHING)return;if(!e.passes.render)return;const o=d.Z.fromRotationTranslation(e.context.uniformState.inverseViewRotation,i.Z.ZERO,x),s=d.Z.multiplyTransformation(o,T.Z.Y_UP_TO_Z_UP,x),a=d.Z.multiply(this._scaleMatrix,s,x);d.Z.clone(a,this._modelMatrix);const p=e.context,C=(I=this,!(u.Z.equalsEpsilon(I.hueShift,0,u.Z.EPSILON7)&&u.Z.equalsEpsilon(I.saturationShift,0,u.Z.EPSILON7)&&u.Z.equalsEpsilon(I.brightnessShift,0,u.Z.EPSILON7)));var I;const P=e.globeTranslucencyState.translucent,D=this.perFragmentAtmosphere||P||!(0,r.Z)(t)||!t.show,O=this._command;if(!(0,r.Z)(O.vertexArray)){const e=c.Z.createGeometry(new c.Z({radii:new i.Z(1,1,1),slicePartitions:256,stackPartitions:256,vertexFormat:h.Z.POSITION_ONLY}));O.vertexArray=Z.Z.fromGeometry({context:p,geometry:e,attributeLocations:l.Z.createAttributeLocations(e),bufferUsage:f.Z.STATIC_DRAW}),O.renderState=m.Z.fromCache({cull:{enabled:!0,face:E.Z.FRONT},blending:w.Z.ALPHA_BLEND,depthMask:!1})}const L=C|D<<2|P<<3;if(L!==this._flags){this._flags=L;const e=[];C&&e.push("COLOR_CORRECT"),D&&e.push("PER_FRAGMENT_ATMOSPHERE"),P&&e.push("GLOBE_TRANSLUCENT");const t=new g.Z({defines:e,sources:[y.Z,b.Z,A.Z]}),n=new g.Z({defines:e,sources:[y.Z,b.Z,v.Z]});this._spSkyAtmosphere=_.Z.fromCache({context:p,vertexShaderSource:t,fragmentShaderSource:n}),O.shaderProgram=this._spSkyAtmosphere}return O},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),this._spSkyAtmosphere=this._spSkyAtmosphere&&this._spSkyAtmosphere.destroy(),(0,s.Z)(this)};const I=C},106233:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(418547),o=n(660904),r=n(234146),s=n(11020),a=n(722313),c=n(765153),l=n(5450),u=n(659635),d=n(427183),h=n(915323),f=n(136525),p=n(661679),m=n(699012),_=n(417148),g=n(161632),Z=n(437530),y=n(858371),b=n(944067),v=n(148679),A=n(973591),T=n(714233);function w(e){this.sources=e.sources,this._sources=void 0,this.show=(0,r.Z)(e.show,!0),this._command=new p.Z({modelMatrix:u.Z.clone(u.Z.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0}w.prototype.update=function(e,t){const n=this;if(!this.show)return;if(e.mode!==T.Z.SCENE3D&&e.mode!==T.Z.MORPHING)return;if(!e.passes.render)return;const r=e.context;if(this._sources!==this.sources){this._sources=this.sources;const e=this.sources;if(!((0,s.Z)(e.positiveX)&&(0,s.Z)(e.negativeX)&&(0,s.Z)(e.positiveY)&&(0,s.Z)(e.negativeY)&&(0,s.Z)(e.positiveZ)&&(0,s.Z)(e.negativeZ)))throw new c.Z("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof e.positiveX!=typeof e.negativeX||typeof e.positiveX!=typeof e.positiveY||typeof e.positiveX!=typeof e.negativeY||typeof e.positiveX!=typeof e.positiveZ||typeof e.positiveX!=typeof e.negativeZ)throw new c.Z("this.sources properties must all be the same type.");"string"==typeof e.positiveX?(0,m.Z)(r,this._sources).then((function(e){n._cubeMap=n._cubeMap&&n._cubeMap.destroy(),n._cubeMap=e})):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new f.Z({context:r,source:e}))}const a=this._command;if(!(0,s.Z)(a.vertexArray)){a.uniformMap={u_cubeMap:function(){return n._cubeMap}};const e=i.Z.createGeometry(i.Z.fromDimensions({dimensions:new o.Z(2,2,2),vertexFormat:d.Z.POSITION_ONLY})),t=this._attributeLocations=l.Z.createAttributeLocations(e);a.vertexArray=y.Z.fromGeometry({context:r,geometry:e,attributeLocations:t,bufferUsage:h.Z.STATIC_DRAW}),a.renderState=_.Z.fromCache({blending:A.Z.ALPHA_BLEND})}if(!(0,s.Z)(a.shaderProgram)||this._useHdr!==t){const e=new Z.Z({defines:[t?"HDR":""],sources:[b.Z]});a.shaderProgram=g.Z.fromCache({context:r,vertexShaderSource:v.Z,fragmentShaderSource:e,attributeLocations:this._attributeLocations}),this._useHdr=t}return(0,s.Z)(this._cubeMap)?a:void 0},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),(0,a.Z)(this)};const E=w},548567:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(486598),o=n(660904),r=n(344485),s=n(11020),a=n(765153),c=n(548410),l=n(664288),u=n(237247);function d(e,t,n,i,o,r,s){this.children=void 0,this.parent=o,this.level=e,this.x=t,this.y=n,this.z=i,this.keyframeNodes=[],this.renderableKeyframeNodes=[],this.renderableKeyframeNodeLerp=0,this.renderableKeyframeNodePrevious=void 0,this.renderableKeyframeNodeNext=void 0,this.orientedBoundingBox=new u.Z,this.approximateVoxelSize=0,this.screenSpaceError=0,this.visitedFrameNumber=-1,this.computeBoundingVolumes(r,s)}const h=new o.Z;d.prototype.computeBoundingVolumes=function(e,t){this.orientedBoundingBox=e.computeOrientedBoundingBoxForTile(this.level,this.x,this.y,this.z,this.orientedBoundingBox);const n=l.Z.getScale(this.orientedBoundingBox.halfAxes,h),i=2*o.Z.maximumComponent(n);this.approximateVoxelSize=i/o.Z.minimumComponent(t)},d.prototype.constructChildNodes=function(e,t){const{level:n,x:i,y:o,z:r}=this,s=2*i,a=2*o,c=2*r,l=a+1,u=s+1,h=c+1,f=n+1,p=[[f,s,a,c],[f,u,a,c],[f,s,l,c],[f,u,l,c],[f,s,a,h],[f,u,a,h],[f,s,l,h],[f,u,l,h]];this.children=p.map((([n,i,o,r])=>new d(n,i,o,r,this,e,t)))},d.prototype.visibility=function(e,t){const n=this.orientedBoundingBox;return e.cullingVolume.computeVisibilityWithPlaneMask(n,t)},d.prototype.computeScreenSpaceError=function(e,t){const n=this.orientedBoundingBox;let i=Math.sqrt(n.distanceSquaredTo(e));i=Math.max(i,r.Z.EPSILON7);const o=t*(this.approximateVoxelSize/i);this.screenSpaceError=o};const f={keyframe:0};function p(e,t){return f.keyframe=e,(0,i.Z)(t,f,c.Z.searchComparator)}function m(e,t){const n=p(e,t);return n<0?r.Z.clamp(~n-1,0,t.length-1):n}function _(e,t){return e*Math.exp(4*e)+t*(t>=0?1:-200)}d.prototype.computeSurroundingRenderableKeyframeNodes=function(e){let t=this;const n=t.level,i=Math.floor(e),o=Math.ceil(e);let a,c,l=+Number.MAX_VALUE,u=+Number.MAX_VALUE;for(;(0,s.Z)(t);){const{renderableKeyframeNodes:e}=t;if(e.length>=1){const r=m(i,e),s=e[r],d=e[o===i||i<s.keyframe?r:Math.min(r+1,e.length-1)],h=i-s.keyframe,f=_(n-t.level,h);f<l&&(l=f,a=s);const p=d.keyframe-o,g=_(n-t.level,p);if(g<u&&(u=g,c=d),0===h&&0===p)break}t=t.parent}if(this.renderableKeyframeNodePrevious=a,this.renderableKeyframeNodeNext=c,!(0,s.Z)(a)||!(0,s.Z)(c))return;const d=a.keyframe,h=c.keyframe;this.renderableKeyframeNodeLerp=d===h?0:r.Z.clamp((e-d)/(h-d),0,1)},d.prototype.isVisited=function(e){return this.visitedFrameNumber===e},d.prototype.createKeyframeNode=function(e){let t=p(e,this.keyframeNodes);if(t<0){t=~t;const n=new c.Z(this,e);this.keyframeNodes.splice(t,0,n)}},d.prototype.destroyKeyframeNode=function(e,t){const n=e.keyframe,i=p(n,this.keyframeNodes);if(i<0)throw new a.Z("Keyframe node does not exist.");if(this.keyframeNodes.splice(i,1),-1!==e.megatextureIndex){for(let n=0;n<t.length;n++)t[n].remove(e.megatextureIndex);const i=p(n,this.renderableKeyframeNodes);if(i<0)throw new a.Z("Renderable keyframe node does not exist.");this.renderableKeyframeNodes.splice(i,1)}e.spatialNode=void 0,e.state=c.Z.LoadState.UNLOADED,e.metadatas={},e.megatextureIndex=-1,e.priority=-Number.MAX_VALUE,e.highPriorityFrameNumber=-1},d.prototype.addKeyframeNodeToMegatextures=function(e,t){if(e.state!==c.Z.LoadState.RECEIVED||-1!==e.megatextureIndex||e.metadatas.length!==t.length)throw new a.Z("Keyframe node cannot be added to megatexture");for(let n=0;n<t.length;n++){const i=t[n];e.megatextureIndex=i.add(e.metadatas[n]),e.metadatas[n]=void 0}e.state=c.Z.LoadState.LOADED;const n=this.renderableKeyframeNodes;let i=p(e.keyframe,n);if(i>=0)throw new a.Z("Keyframe already renderable");i=~i,n.splice(i,0,e)},d.prototype.isRenderable=function(e){const t=this.renderableKeyframeNodePrevious,n=this.renderableKeyframeNodeNext,i=this.level;return(0,s.Z)(t)&&(0,s.Z)(n)&&(t.spatialNode.level===i||n.spatialNode.level===i)&&this.visitedFrameNumber===e};const g=d},347962:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({LEFT:-1,NONE:0,RIGHT:1})},37002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(437530);const o={modifyFragmentShader:function(e){return(e=i.Z.replaceMain(e,"czm_splitter_main"))+"uniform float czm_splitDirection; \nvoid main() \n{ \n#ifndef SHADOW_MAP\n    if (czm_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard; \n    if (czm_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard; \n#endif\n    czm_splitter_main(); \n} \n"},addUniforms:function(e,t){t.czm_splitDirection=function(){return e.splitDirection}}}},764172:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(234146),r=n(11020);function s(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),i.Z.typeOf.object("options.schema",e.schema),this._schema=e.schema;const t=e.propertyTables;this._propertyTableCount=(0,r.Z)(t)?t.length:0,this._propertyTables=t,this._propertyTextures=e.propertyTextures,this._propertyAttributes=e.propertyAttributes,this._statistics=e.statistics,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(s.prototype,{schema:{get:function(){return this._schema}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},propertyTableCount:{get:function(){return this._propertyTableCount}},propertyTables:{get:function(){return this._propertyTables}},propertyTextures:{get:function(){return this._propertyTextures}},propertyAttributes:{get:function(){return this._propertyAttributes}},propertyTablesByteLength:{get:function(){if(!(0,r.Z)(this._propertyTables))return 0;let e=0;const t=this._propertyTables.length;for(let n=0;n<t;n++)e+=this._propertyTables[n].byteLength;return e}}}),s.prototype.getPropertyTable=function(e){return i.Z.typeOf.number("propertyTableId",e),this._propertyTables[e]},s.prototype.getPropertyTexture=function(e){return i.Z.typeOf.number("propertyTextureId",e),this._propertyTextures[e]},s.prototype.getPropertyAttribute=function(e){return i.Z.typeOf.number("propertyAttributeId",e),this._propertyAttributes[e]};const a=s},450634:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var i=n(762031),o=n(405254),r=n(660904),s=n(798336),a=n(449809),c=n(11020),l=n(722313),u=n(342209),d=n(344485),h=n(659635),f=n(430886),p=n(804868),m=n(379593),_=n(915323),g=n(673314),Z=n(661679),y=n(545870),b=n(417148),v=n(161632),A=n(609882),T=n(858371),w=n(902370),E=n(680721),S=n(409207),C=n(973591),x=n(714233),I=n(638452);function P(){this.show=!0,this._drawCommand=new Z.Z({primitiveType:p.Z.TRIANGLES,boundingVolume:new i.Z,owner:this}),this._commands={drawCommand:this._drawCommand,computeCommand:void 0},this._boundingVolume=new i.Z,this._boundingVolume2D=new i.Z,this._texture=void 0,this._drawingBufferWidth=void 0,this._drawingBufferHeight=void 0,this._radiusTS=void 0,this._size=void 0,this.glowFactor=1,this._glowFactorDirty=!1,this._useHdr=void 0;const e=this;this._uniformMap={u_texture:function(){return e._texture},u_size:function(){return e._size}}}Object.defineProperties(P.prototype,{glowFactor:{get:function(){return this._glowFactor},set:function(e){e=Math.max(e,0),this._glowFactor=e,this._glowFactorDirty=!0}}});const D=new o.Z,O=new o.Z,L=new s.Z,N=new s.Z;P.prototype.update=function(e,t,n){if(!this.show)return;const s=e.mode;if(s===x.Z.SCENE2D||s===x.Z.MORPHING)return;if(!e.passes.render)return;const l=e.context,p=t.viewport.width,Z=t.viewport.height;if(!(0,c.Z)(this._texture)||p!==this._drawingBufferWidth||Z!==this._drawingBufferHeight||this._glowFactorDirty||n!==this._useHdr){this._texture=this._texture&&this._texture.destroy(),this._drawingBufferWidth=p,this._drawingBufferHeight=Z,this._glowFactorDirty=!1,this._useHdr=n;let e=Math.max(p,Z);e=Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))-2),e=Math.max(1,e);const t=n?l.halfFloatingPointTexture?y.Z.HALF_FLOAT:y.Z.FLOAT:y.Z.UNSIGNED_BYTE;this._texture=new A.Z({context:l,width:e,height:e,pixelFormat:f.Z.RGBA,pixelDatatype:t}),this._glowLengthTS=5*this._glowFactor,this._radiusTS=1/(1+2*this._glowLengthTS)*.5;const i=this,o={u_radiusTS:function(){return i._radiusTS}};this._commands.computeCommand=new g.Z({fragmentShaderSource:E.Z,outputTexture:this._texture,uniformMap:o,persists:!1,owner:this,postExecute:function(){i._commands.computeCommand=void 0}})}const P=this._drawCommand;if(!(0,c.Z)(P.vertexArray)){const e={direction:0},t=new Uint8Array(8);t[0]=0,t[1]=0,t[2]=255,t[3]=0,t[4]=255,t[5]=255,t[6]=0,t[7]=255;const n=m.Z.createVertexBuffer({context:l,typedArray:t,usage:_.Z.STATIC_DRAW}),i=[{index:e.direction,vertexBuffer:n,componentsPerAttribute:2,normalize:!0,componentDatatype:a.Z.UNSIGNED_BYTE}],o=m.Z.createIndexBuffer({context:l,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:_.Z.STATIC_DRAW,indexDatatype:u.Z.UNSIGNED_SHORT});P.vertexArray=new T.Z({context:l,attributes:i,indexBuffer:o}),P.shaderProgram=v.Z.fromCache({context:l,vertexShaderSource:S.Z,fragmentShaderSource:w.Z,attributeLocations:e}),P.renderState=b.Z.fromCache({blending:C.Z.ALPHA_BLEND}),P.uniformMap=this._uniformMap}const M=l.uniformState.sunPositionWC,R=l.uniformState.sunPositionColumbusView,F=this._boundingVolume,B=this._boundingVolume2D;r.Z.clone(M,F.center),B.center.x=R.z,B.center.y=R.x,B.center.z=R.y,F.radius=d.Z.SOLAR_RADIUS+d.Z.SOLAR_RADIUS*this._glowLengthTS,B.radius=F.radius,s===x.Z.SCENE3D?i.Z.clone(F,P.boundingVolume):s===x.Z.COLUMBUS_VIEW&&i.Z.clone(B,P.boundingVolume);const U=I.Z.computeActualWgs84Position(e,M,N),k=r.Z.magnitude(r.Z.subtract(U,e.camera.position,N)),V=l.uniformState.projection,H=L;H.x=0,H.y=0,H.z=-k,H.w=1;const z=h.Z.multiplyByVector(V,H,N),G=I.Z.clipToGLWindowCoordinates(t.viewport,z,D);H.x=d.Z.SOLAR_RADIUS;const j=h.Z.multiplyByVector(V,H,N),W=I.Z.clipToGLWindowCoordinates(t.viewport,j,O);return this._size=o.Z.magnitude(o.Z.subtract(W,G,N)),this._size=2*this._size*(1+2*this._glowLengthTS),this._size=Math.ceil(this._size),this._commands},P.prototype.isDestroyed=function(){return!1},P.prototype.destroy=function(){const e=this._drawCommand;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._texture=this._texture&&this._texture.destroy(),(0,l.Z)(this)};const M=P},582304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(35961),o=n(234146);const r=function(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this.color=i.Z.clone((0,o.Z)(e.color,i.Z.WHITE)),this.intensity=(0,o.Z)(e.intensity,2)}},963478:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(890828),o=n(405254),r=n(798336),s=n(11020),a=n(722313),c=n(344485),l=n(659635),u=n(720794),d=n(842633),h=n(409292),f=n(471159),p=n(58038),m=n(152127),_=n(121853),g=n(343761),Z=n(108839),y=n(17993);function b(){this._sceneFramebuffer=new y.Z;const e=.125,t=new Array(6);t[0]=new m.Z({fragmentShader:p.Z,textureScale:e,forcePowerOfTwo:!0,sampleMode:g.Z.LINEAR});const n=t[1]=new m.Z({fragmentShader:h.Z,uniforms:{avgLuminance:.5,threshold:.25,offset:.1},textureScale:e,forcePowerOfTwo:!0}),i=this;this._delta=1,this._sigma=2,this._blurStep=new o.Z,t[2]=new m.Z({fragmentShader:f.Z,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/n.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:0},textureScale:e,forcePowerOfTwo:!0}),t[3]=new m.Z({fragmentShader:f.Z,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/n.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:1},textureScale:e,forcePowerOfTwo:!0}),t[4]=new m.Z({fragmentShader:p.Z,sampleMode:g.Z.LINEAR}),this._uCenter=new o.Z,this._uRadius=void 0,t[5]=new m.Z({fragmentShader:d.Z,uniforms:{center:function(){return i._uCenter},radius:function(){return i._uRadius},colorTexture2:function(){return i._sceneFramebuffer.framebuffer.getColorTexture(0)}}}),this._stages=new _.Z({stages:t});const r=new Z.Z(this),s=t.length;for(let e=0;e<s;++e)t[e]._textureCache=r;this._textureCache=r,this.length=t.length}b.prototype.get=function(e){return this._stages.get(e)},b.prototype.getStageByName=function(e){const t=this._stages.length;for(let n=0;n<t;++n){const t=this._stages.get(n);if(t.name===e)return t}};const v=new r.Z,A=new o.Z,T=new o.Z,w=new l.Z;b.prototype.clear=function(e,t,n){this._sceneFramebuffer.clear(e,t,n),this._textureCache.clear(e)},b.prototype.update=function(e){const t=e.context,n=e.viewport,r=this._sceneFramebuffer;r.update(t,n);const s=r.framebuffer;return this._textureCache.update(t),this._stages.update(t,!1),function(e,t,n){const r=t.uniformState,s=r.sunPositionWC,a=r.view,d=r.viewProjection,h=r.projection;let f=l.Z.computeViewportTransformation(n,0,1,w);const p=l.Z.multiplyByPoint(a,s,v);let m=u.Z.pointToGLWindowCoordinates(d,f,s,A);p.x+=c.Z.SOLAR_RADIUS;const _=u.Z.pointToGLWindowCoordinates(h,f,p,p),g=30*o.Z.magnitude(o.Z.subtract(_,m,_))*2,Z=T;Z.x=g,Z.y=g,e._uCenter=o.Z.clone(m,e._uCenter),e._uRadius=.15*Math.max(Z.x,Z.y);const y=t.drawingBufferWidth,b=t.drawingBufferHeight,E=e._stages,S=E.get(0),C=S.outputTexture.width,x=S.outputTexture.height,I=new i.Z;I.width=C,I.height=x,f=l.Z.computeViewportTransformation(I,0,1,w),m=u.Z.pointToGLWindowCoordinates(d,f,s,A),Z.x*=C/y,Z.y*=x/b;const P=S.scissorRectangle;P.x=Math.max(m.x-.5*Z.x,0),P.y=Math.max(m.y-.5*Z.y,0),P.width=Math.min(Z.x,y),P.height=Math.min(Z.y,b);for(let e=1;e<4;++e)i.Z.clone(P,E.get(e).scissorRectangle)}(this,t,n),s},b.prototype.execute=function(e){const t=this._sceneFramebuffer.framebuffer.getColorTexture(0),n=this._stages,i=n.length;n.get(0).execute(e,t);for(let t=1;t<i;++t)n.get(t).execute(e,n.get(t-1).outputTexture)},b.prototype.copy=function(e,t){if(!(0,s.Z)(this._copyColorCommand)){const t=this;this._copyColorCommand=e.createViewportQuadCommand(p.Z,{uniformMap:{colorTexture:function(){return t._stages.get(t._stages.length-1).outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._textureCache.destroy(),this._stages.destroy(),(0,a.Z)(this)};const E=b},748990:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(234146);const o=function(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),this.webp=(0,i.Z)(e.webp,!1),this.basis=(0,i.Z)(e.basis,!1)}},728779:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(282910),r=n(877290);function s(e){i.Z.typeOf.object("terrainProviderPromise",e),this._ready=!1,this._provider=void 0,this._errorEvent=new o.Z,this._readyEvent=new o.Z,async function(e,t){let n;try{n=await Promise.resolve(t),e._provider=n,e._ready=!0,e._readyEvent.raiseEvent(n)}catch(t){!function(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}(e._errorEvent,t)}}(this,e)}Object.defineProperties(s.prototype,{errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},ready:{get:function(){return this._ready}},provider:{get:function(){return this._provider}}}),s.fromWorldTerrain=function(e){return new s((0,r.Z)(e))};const a=s},228714:(e,t,n)=>{"use strict";n.d(t,{Z:()=>se});var i=n(393766),o=n(486598),r=n(762031),s=n(405254),a=n(660904),c=n(798336),l=n(532056),u=n(11020),d=n(765153),h=n(751655),f=n(344485),p=n(237247),m=n(125841),_=n(143450),g=n(502954),Z=n(178611),y=n(678308),b=n(709855),v=n(59707),A=n(565760);function T(e){this.tile=e,this.frameLastUpdated=void 0,this.westMeshes=[],this.westTiles=[],this.southMeshes=[],this.southTiles=[],this.eastMeshes=[],this.eastTiles=[],this.northMeshes=[],this.northTiles=[],this.southwestMesh=void 0,this.southwestTile=void 0,this.southeastMesh=void 0,this.southeastTile=void 0,this.northwestMesh=void 0,this.northwestTile=void 0,this.northeastMesh=void 0,this.northeastTile=void 0,this.changedThisFrame=!0,this.visitedFrame=void 0,this.enqueuedFrame=void 0,this.mesh=void 0,this.vertexArray=void 0,this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new c.Z}T.prototype.update=function(e,t,n){this.changedThisFrame&&(z(e,t,this.tile,n),this.changedThisFrame=!1)},T.prototype.destroy=function(e){this._destroyVertexArray(e),(0,u.Z)(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0)},T.prototype._destroyVertexArray=function(e){(0,u.Z)(this.vertexArray)&&((0,u.Z)(e)?e.push(this.vertexArray):v.Z._freeVertexArray(this.vertexArray),this.vertexArray=void 0)};const w=new m.Z;function E(e,t,n,i,o,r,s,a,c){if(void 0===i)return;let l=i;for(;l&&(l._lastSelectionResultFrame!==o||A.Z.wasKicked(l._lastSelectionResult)||A.Z.originalResult(l._lastSelectionResult)===A.Z.CULLED);){if(s)return;const e=l.parent;if(r>=y.Z.NORTHWEST&&void 0!==e)switch(r){case y.Z.NORTHWEST:l=l===e.northwestChild?e:void 0;break;case y.Z.NORTHEAST:l=l===e.northeastChild?e:void 0;break;case y.Z.SOUTHWEST:l=l===e.southwestChild?e:void 0;break;case y.Z.SOUTHEAST:l=l===e.southeastChild?e:void 0}else l=e}if(void 0!==l)if(l._lastSelectionResult!==A.Z.RENDERED){if(A.Z.originalResult(i._lastSelectionResult)!==A.Z.CULLED)switch(r){case y.Z.WEST:E(e,t,n,i.northwestChild,o,r,!0,a,c),E(e,t,n,i.southwestChild,o,r,!0,a,c);break;case y.Z.EAST:E(e,t,n,i.southeastChild,o,r,!0,a,c),E(e,t,n,i.northeastChild,o,r,!0,a,c);break;case y.Z.SOUTH:E(e,t,n,i.southwestChild,o,r,!0,a,c),E(e,t,n,i.southeastChild,o,r,!0,a,c);break;case y.Z.NORTH:E(e,t,n,i.northeastChild,o,r,!0,a,c),E(e,t,n,i.northwestChild,o,r,!0,a,c);break;case y.Z.NORTHWEST:E(e,t,n,i.northwestChild,o,r,!0,a,c);break;case y.Z.NORTHEAST:E(e,t,n,i.northeastChild,o,r,!0,a,c);break;case y.Z.SOUTHWEST:E(e,t,n,i.southwestChild,o,r,!0,a,c);break;case y.Z.SOUTHEAST:E(e,t,n,i.southeastChild,o,r,!0,a,c);break;default:throw new d.Z("Invalid edge")}}else{if((0,u.Z)(l.data.vertexArray))return;!function(e,t,n,i,o,r,s,a){const c=i.data;if(void 0===c.fill)c.fill=new T(i);else if(c.fill.visitedFrame===r)return;c.fill.enqueuedFrame!==r&&(c.fill.enqueuedFrame=r,c.fill.changedThisFrame=!1,s.enqueue(i)),function(e,t,n,i,o,r){const s=i.data.fill;let a;const c=n.data.fill;let l,d,h,p,m,_;switch((0,u.Z)(c)?(c.visitedFrame=t.frameNumber,c.changedThisFrame&&(z(e,t,n,r),c.changedThisFrame=!1),a=n.data.fill.mesh):a=n.data.mesh,o){case y.Z.WEST:l=s.westMeshes,d=s.westTiles;break;case y.Z.SOUTH:l=s.southMeshes,d=s.southTiles;break;case y.Z.EAST:l=s.eastMeshes,d=s.eastTiles;break;case y.Z.NORTH:l=s.northMeshes,d=s.northTiles;break;case y.Z.NORTHWEST:return s.changedThisFrame=s.changedThisFrame||s.northwestMesh!==a,s.northwestMesh=a,void(s.northwestTile=n);case y.Z.NORTHEAST:return s.changedThisFrame=s.changedThisFrame||s.northeastMesh!==a,s.northeastMesh=a,void(s.northeastTile=n);case y.Z.SOUTHWEST:return s.changedThisFrame=s.changedThisFrame||s.southwestMesh!==a,s.southwestMesh=a,void(s.southwestTile=n);case y.Z.SOUTHEAST:return s.changedThisFrame=s.changedThisFrame||s.southeastMesh!==a,s.southeastMesh=a,void(s.southeastTile=n)}if(n.level<=i.level)return s.changedThisFrame=s.changedThisFrame||l[0]!==a||1!==l.length,l[0]=a,d[0]=n,l.length=1,void(d.length=1);const g=n.rectangle;let Z;const b=i.rectangle;switch(o){case y.Z.WEST:for(Z=(b.north-b.south)*f.Z.EPSILON5,h=0;h<d.length&&(m=d[h],_=m.rectangle,!f.Z.greaterThan(g.north,_.south,Z));++h);for(p=h;p<d.length&&(m=d[p],_=m.rectangle,!f.Z.greaterThanOrEquals(g.south,_.north,Z));++p);break;case y.Z.SOUTH:for(Z=(b.east-b.west)*f.Z.EPSILON5,h=0;h<d.length&&(m=d[h],_=m.rectangle,!f.Z.lessThan(g.west,_.east,Z));++h);for(p=h;p<d.length&&(m=d[p],_=m.rectangle,!f.Z.lessThanOrEquals(g.east,_.west,Z));++p);break;case y.Z.EAST:for(Z=(b.north-b.south)*f.Z.EPSILON5,h=0;h<d.length&&(m=d[h],_=m.rectangle,!f.Z.lessThan(g.south,_.north,Z));++h);for(p=h;p<d.length&&(m=d[p],_=m.rectangle,!f.Z.lessThanOrEquals(g.north,_.south,Z));++p);break;case y.Z.NORTH:for(Z=(b.east-b.west)*f.Z.EPSILON5,h=0;h<d.length&&(m=d[h],_=m.rectangle,!f.Z.greaterThan(g.east,_.west,Z));++h);for(p=h;p<d.length&&(m=d[p],_=m.rectangle,!f.Z.greaterThanOrEquals(g.west,_.east,Z));++p);}p-h==1?(s.changedThisFrame=s.changedThisFrame||l[h]!==a,l[h]=a,d[h]=n):(s.changedThisFrame=!0,l.splice(h,p-h,a),d.splice(h,p-h,n))}(e,t,n,i,o,a)}(e,t,n,l,r,o,a,c)}}T.updateFillTiles=function(e,t,n,i){const o=e._quadtree,r=o._levelZeroTiles,s=o._lastSelectionFrameNumber,a=w;a.clear();for(let e=0;e<t.length;++e){const n=t[e];(0,u.Z)(n.data.vertexArray)&&a.enqueue(t[e])}let c=a.dequeue();for(;void 0!==c;){const t=c.findTileToWest(r),o=c.findTileToSouth(r),l=c.findTileToEast(r),u=c.findTileToNorth(r);E(e,n,c,t,s,y.Z.EAST,!1,a,i),E(e,n,c,o,s,y.Z.NORTH,!1,a,i),E(e,n,c,l,s,y.Z.WEST,!1,a,i),E(e,n,c,u,s,y.Z.SOUTH,!1,a,i);const d=t.findTileToNorth(r),h=t.findTileToSouth(r),f=l.findTileToNorth(r),p=l.findTileToSouth(r);E(e,n,c,d,s,y.Z.SOUTHEAST,!1,a,i),E(e,n,c,f,s,y.Z.SOUTHWEST,!1,a,i),E(e,n,c,h,s,y.Z.NORTHEAST,!1,a,i),E(e,n,c,p,s,y.Z.NORTHWEST,!1,a,i),c=a.dequeue()}};const S=new l.Z,C=new l.Z,x=new a.Z,I=new a.Z,P=new s.Z,D=new s.Z,O=new s.Z;function L(){this.height=0,this.encodedNormal=new s.Z}function N(e,t,n,i,o,r,s,a,c){if((0,u.Z)(o))return o;let l;if((0,u.Z)(r)&&(0,u.Z)(s))l=.5*(r.height+s.height);else if((0,u.Z)(r))l=r.height;else if((0,u.Z)(s))l=s.height;else if((0,u.Z)(a))l=a.height;else{const t=e.tile.data.tileBoundingRegion;let n=0,i=0;(0,u.Z)(t)&&(n=t.minimumHeight,i=t.maximumHeight),l=.5*(n+i)}return Q(0,t,0,0,l,c),c}const M={minimumHeight:0,maximumHeight:0},R=new a.Z,F=new L,B=new L,U=new L,k=new L,V="undefined"!=typeof Uint8Array?new Uint8Array(81):void 0,H={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0};function z(e,t,n,o){v.Z.initialize(n,e.terrainProvider,e._imageryLayers);const c=n.data,l=c.fill,d=n.rectangle,f=t.terrainExaggeration,m=t.terrainExaggerationRelativeHeight,A=1!==f,T=n.tilingScheme.ellipsoid;let w=$(l,T,0,1,l.northwestTile,l.northwestMesh,l.northTiles,l.northMeshes,l.westTiles,l.westMeshes,U),E=$(l,T,0,0,l.southwestTile,l.southwestMesh,l.westTiles,l.westMeshes,l.southTiles,l.southMeshes,F),x=$(l,T,1,0,l.southeastTile,l.southeastMesh,l.southTiles,l.southMeshes,l.eastTiles,l.eastMeshes,B),D=$(l,T,1,1,l.northeastTile,l.northeastMesh,l.eastTiles,l.eastMeshes,l.northTiles,l.northMeshes,k);w=N(l,T,0,0,w,E,D,x,U),E=N(l,T,0,0,E,w,x,D,F),x=N(l,T,0,0,x,E,D,w,B),D=N(l,T,0,0,D,x,w,E,k);const L=E.height,z=x.height,j=w.height,W=D.height;let q=Math.min(L,z,j,W),Y=Math.max(L,z,j,W);const X=.5*(q+Y);let J,Q;const K=e.getLevelMaximumGeometricError(n.level),te=T.maximumRadius-K;let ne=4*Math.acos(te/T.maximumRadius);if(ne*=1.5,d.width>ne&&Y-q<=K){const e=new h.Z({width:9,height:9,buffer:V,structure:{heightOffset:Y}}),t=H;t.tilingScheme=n.tilingScheme,t.x=n.x,t.y=n.y,t.level=n.level,t.exaggeration=f,t.exaggerationRelativeHeight=m,l.mesh=e._createMeshSync(t)}else{const t=A,o=_.Z.center(d,C);o.height=X;const c=T.cartographicToCartesian(o,R),u=new g.Z(c,void 0,void 0,void 0,void 0,!0,!0,t,f,m);let h,v=5;for(h=l.westMeshes,J=0,Q=h.length;J<Q;++J)v+=h[J].eastIndicesNorthToSouth.length;for(h=l.southMeshes,J=0,Q=h.length;J<Q;++J)v+=h[J].northIndicesWestToEast.length;for(h=l.eastMeshes,J=0,Q=h.length;J<Q;++J)v+=h[J].westIndicesSouthToNorth.length;for(h=l.northMeshes,J=0,Q=h.length;J<Q;++J)v+=h[J].southIndicesEastToWest.length;const L=M;L.minimumHeight=q,L.maximumHeight=Y;const N=u.stride;let F=new Float32Array(v*N),B=0;const U=B;B=G(T,d,u,F,B,0,1,w.height,w.encodedNormal,1,L),B=ee(l,T,u,F,B,l.westTiles,l.westMeshes,y.Z.EAST,L);const k=B;B=G(T,d,u,F,B,0,0,E.height,E.encodedNormal,0,L),B=ee(l,T,u,F,B,l.southTiles,l.southMeshes,y.Z.NORTH,L);const V=B;B=G(T,d,u,F,B,1,0,x.height,x.encodedNormal,0,L),B=ee(l,T,u,F,B,l.eastTiles,l.eastMeshes,y.Z.WEST,L);const H=B;B=G(T,d,u,F,B,1,1,D.height,D.encodedNormal,1,L),B=ee(l,T,u,F,B,l.northTiles,l.northMeshes,y.Z.SOUTH,L),q=L.minimumHeight,Y=L.maximumHeight;const z=p.Z.fromRectangle(d,q,Y,n.tilingScheme.ellipsoid),j=b.Z.geodeticLatitudeToMercatorAngle(d.south),W=1/(b.Z.geodeticLatitudeToMercatorAngle(d.north)-j),$=(b.Z.geodeticLatitudeToMercatorAngle(o.latitude)-j)*W,K=T.geodeticSurfaceNormalCartographic(S,I),te=i.Z.octEncode(K,P),ne=B;u.encode(F,B*N,z.center,s.Z.fromElements(.5,.5,O),X,te,$,K),++B;const ie=B,oe=3*(ie-1),se=oe*(ie<256?1:2);let ae;if((F.length-ie*N)*Float32Array.BYTES_PER_ELEMENT>=se){const e=ie*N*Float32Array.BYTES_PER_ELEMENT;ae=ie<256?new Uint8Array(F.buffer,e,oe):new Uint16Array(F.buffer,e,oe)}else ae=ie<256?new Uint8Array(oe):new Uint16Array(oe);F=new Float32Array(F.buffer,0,ie*N);let ce=0;for(J=0;J<ie-2;++J)ae[ce++]=ne,ae[ce++]=J,ae[ce++]=J+1;ae[ce++]=ne,ae[ce++]=J,ae[ce++]=0;const le=[];for(J=k;J>=U;--J)le.push(J);const ue=[];for(J=V;J>=k;--J)ue.push(J);const de=[];for(J=H;J>=V;--J)de.push(J);const he=[];for(he.push(0),J=ne-1;J>=H;--J)he.push(J);l.mesh=new Z.Z(u.center,F,ae,oe,ie,q,Y,r.Z.fromOrientedBoundingBox(z),function(e,t,n,i,o,r){const s=e.quadtree._occluders.ellipsoid,c=s.ellipsoid,l=re;return a.Z.fromRadians(n.west,n.south,o,c,l[0]),a.Z.fromRadians(n.east,n.south,o,c,l[1]),a.Z.fromRadians(n.west,n.north,o,c,l[2]),a.Z.fromRadians(n.east,n.north,o,c,l[3]),s.computeHorizonCullingPointPossiblyUnderEllipsoid(t,l,i,void 0)}(e,z.center,d,q,Y),u.stride,z,u,le,ue,de,he)}const ie=t.context;l._destroyVertexArray(o),l.vertexArray=v.Z._createVertexArrayForMesh(ie,l.mesh),c.processImagery(n,e.terrainProvider,t,!0);const oe=l.waterMaskTexture;if(l.waterMaskTexture=void 0,e.terrainProvider.hasWaterMask){const e=c._findAncestorTileWithTerrainData(n);(0,u.Z)(e)&&(0,u.Z)(e.data.waterMaskTexture)&&(l.waterMaskTexture=e.data.waterMaskTexture,++l.waterMaskTexture.referenceCount,c._computeWaterMaskTranslationAndScale(n,e,l.waterMaskTranslationAndScale))}(0,u.Z)(oe)&&(--oe.referenceCount,0===oe.referenceCount&&oe.destroy())}function G(e,t,n,i,o,r,s,a,c,l,u){const d=S;d.longitude=f.Z.lerp(t.west,t.east,r),d.latitude=f.Z.lerp(t.south,t.north,s),d.height=a;const h=e.cartographicToCartesian(d,x);let p;n.hasGeodeticSurfaceNormals&&(p=e.geodeticSurfaceNormal(h,I));const m=D;return m.x=r,m.y=s,n.encode(i,o*n.stride,h,m,a,c,l,p),u.minimumHeight=Math.min(u.minimumHeight,a),u.maximumHeight=Math.max(u.maximumHeight,a),o+1}const j=new _.Z;function W(e,t,n,i){let o=e.rectangle;const r=t.rectangle;0===t.x&&1===n.x&&e.x===e.tilingScheme.getNumberOfXTilesAtLevel(e.level)-1?(o=_.Z.clone(e.rectangle,j),o.west-=f.Z.TWO_PI,o.east-=f.Z.TWO_PI):0===e.x&&0===n.x&&t.x===t.tilingScheme.getNumberOfXTilesAtLevel(t.level)-1&&(o=_.Z.clone(e.rectangle,j),o.west+=f.Z.TWO_PI,o.east+=f.Z.TWO_PI);const s=o.east-o.west,a=(r.west-o.west)/s,c=(r.east-o.west)/s,l=o.north-o.south,u=(r.south-o.south)/l,d=(r.north-o.south)/l;let h=(n.x-a)/(c-a),p=(n.y-u)/(d-u);return Math.abs(h)<Math.EPSILON5?h=0:Math.abs(h-1)<Math.EPSILON5&&(h=1),Math.abs(p)<Math.EPSILON5?p=0:Math.abs(p-1)<Math.EPSILON5&&(p=1),i.x=h,i.y=p,i}const q=new s.Z;function Y(e,t,n,i,o){const r=e.encoding,s=e.vertices;if(o.height=r.decodeHeight(s,t),r.hasVertexNormals)r.getOctEncodedNormal(s,t,o.encodedNormal);else{const e=o.encodedNormal;e.x=0,e.y=0}}const X=new s.Z,J=new a.Z;function Q(e,t,n,o,r,s){s.height=r;const a=t.geodeticSurfaceNormalCartographic(S,x);i.Z.octEncode(a,s.encodedNormal)}function $(e,t,n,i,o,r,s,a,c,l,d){if(oe(e,t,a,s,!1,n,i,d)||oe(e,t,l,c,!0,n,i,d))return d;let h,f;return ie(o,r)?(h=0===n?0===i?r.eastIndicesNorthToSouth[0]:r.southIndicesEastToWest[0]:0===i?r.northIndicesWestToEast[0]:r.westIndicesSouthToNorth[0],Y(r,h,0,0,d),d):(f=0===n?0===i?K(e.westMeshes,e.westTiles,y.Z.EAST,e.southMeshes,e.southTiles,y.Z.NORTH,n,i):K(e.northMeshes,e.northTiles,y.Z.SOUTH,e.westMeshes,e.westTiles,y.Z.EAST,n,i):0===i?K(e.southMeshes,e.southTiles,y.Z.NORTH,e.eastMeshes,e.eastTiles,y.Z.WEST,n,i):K(e.eastMeshes,e.eastTiles,y.Z.WEST,e.northMeshes,e.northTiles,y.Z.SOUTH,n,i),(0,u.Z)(f)?(Q(0,t,0,0,f,d),d):void 0)}function K(e,t,n,i,o,r,s,a){const c=ne(e,t,!1,n),l=ne(i,o,!0,r);return(0,u.Z)(c)&&(0,u.Z)(l)?.5*(c+l):(0,u.Z)(c)?c:l}function ee(e,t,n,i,o,r,s,a,c){for(let l=0;l<r.length;++l)o=te(e,t,n,i,o,r[l],s[l],a,c);return o}function te(e,t,n,i,o,r,s,a,c){let l=r.rectangle;a===y.Z.EAST&&0===e.tile.x?(l=_.Z.clone(r.rectangle,j),l.west-=f.Z.TWO_PI,l.east-=f.Z.TWO_PI):a===y.Z.WEST&&0===r.x&&(l=_.Z.clone(r.rectangle,j),l.west+=f.Z.TWO_PI,l.east+=f.Z.TWO_PI);const u=e.tile.rectangle;let d,h,p,m;switch(o>0&&(n.decodeTextureCoordinates(i,o-1,O),d=O.x,h=O.y),a){case y.Z.WEST:p=s.westIndicesSouthToNorth,m=!1;break;case y.Z.NORTH:p=s.northIndicesWestToEast,m=!0;break;case y.Z.EAST:p=s.eastIndicesNorthToSouth,m=!1;break;case y.Z.SOUTH:p=s.southIndicesEastToWest,m=!0}const g=r,Z=e.tile,v=s.encoding,A=s.vertices,T=n.stride;let w,E;v.hasWebMercatorT&&(w=b.Z.geodeticLatitudeToMercatorAngle(u.south),E=1/(b.Z.geodeticLatitudeToMercatorAngle(u.north)-w));for(let e=0;e<p.length;++e){const r=p[e],s=v.decodeTextureCoordinates(A,r,O);W(g,Z,s,s);const a=s.x,l=s.y,_=m?a:l;if(_<0||_>1)continue;if(Math.abs(a-d)<f.Z.EPSILON5&&Math.abs(l-h)<f.Z.EPSILON5)continue;const y=Math.abs(a)<f.Z.EPSILON5||Math.abs(a-1)<f.Z.EPSILON5,S=Math.abs(l)<f.Z.EPSILON5||Math.abs(l-1)<f.Z.EPSILON5;if(y&&S)continue;const C=v.decodePosition(A,r,x),D=v.decodeHeight(A,r);let L;v.hasVertexNormals?L=v.getOctEncodedNormal(A,r,P):(L=P,L.x=0,L.y=0);let N,M=l;if(v.hasWebMercatorT){const e=f.Z.lerp(u.south,u.north,l);M=(b.Z.geodeticLatitudeToMercatorAngle(e)-w)*E}n.hasGeodeticSurfaceNormals&&(N=t.geodeticSurfaceNormal(C,I)),n.encode(i,o*T,C,s,D,L,M,N),c.minimumHeight=Math.min(c.minimumHeight,D),c.maximumHeight=Math.max(c.maximumHeight,D),++o}return o}function ne(e,t,n,i,o,r){let s,a,c;n?(s=0,a=e.length,c=1):(s=e.length-1,a=-1,c=-1);for(let o=s;o!==a;o+=c){const r=e[o];if(!ie(t[o],r))continue;let s;switch(i){case y.Z.WEST:s=r.westIndicesSouthToNorth;break;case y.Z.SOUTH:s=r.southIndicesEastToWest;break;case y.Z.EAST:s=r.eastIndicesNorthToSouth;break;case y.Z.NORTH:s=r.northIndicesWestToEast}const a=s[n?0:s.length-1];if((0,u.Z)(a))return r.encoding.decodeHeight(r.vertices,a)}}function ie(e,t){return(0,u.Z)(t)&&(!(0,u.Z)(e.data.fill)||!e.data.fill.changedThisFrame)}function oe(e,t,n,r,s,c,l,u){let d,h,p,m,_;const g=r[s?0:n.length-1],Z=n[s?0:n.length-1];if(ie(g,Z)&&(0===c?0===l?(d=s?Z.northIndicesWestToEast:Z.eastIndicesNorthToSouth,h=s,p=s):(d=s?Z.eastIndicesNorthToSouth:Z.southIndicesEastToWest,h=!s,p=!1):0===l?(d=s?Z.westIndicesSouthToNorth:Z.northIndicesWestToEast,h=!s,p=!0):(d=s?Z.southIndicesEastToWest:Z.westIndicesSouthToNorth,h=s,p=!s),d.length>0)){m=s?0:d.length-1,_=d[m],Z.encoding.decodeTextureCoordinates(Z.vertices,_,O);const n=W(g,e.tile,O,O);if(n.x===c&&n.y===l)return Y(Z,_,0,0,u),!0;if(m=(0,o.Z)(d,h?c:l,(function(t,n){Z.encoding.decodeTextureCoordinates(Z.vertices,t,O);const i=W(g,e.tile,O,O);return p?h?i.x-c:i.y-l:h?c-i.x:l-i.y})),!(m<0))return Y(Z,d[m],0,0,u),!0;if(m=~m,m>0&&m<d.length)return function(e,t,n,o,r,s,c,l,u,d){const h=o.encoding,p=o.vertices,m=W(t,n,h.decodeTextureCoordinates(p,r,O),O),_=W(t,n,h.decodeTextureCoordinates(p,s,D),D);let g;g=u?(c-m.x)/(_.x-m.x):(l-m.y)/(_.y-m.y);const Z=h.decodeHeight(p,r),y=h.decodeHeight(p,s),b=n.rectangle;let v;if(S.longitude=f.Z.lerp(b.west,b.east,c),S.latitude=f.Z.lerp(b.south,b.north,l),d.height=S.height=f.Z.lerp(Z,y,g),h.hasVertexNormals){const e=h.getOctEncodedNormal(p,r,q),t=h.getOctEncodedNormal(p,s,X),n=i.Z.octDecode(e.x,e.y,x),o=i.Z.octDecode(t.x,t.y,J);v=a.Z.lerp(n,o,g,x),a.Z.normalize(v,v),i.Z.octEncode(v,d.encodedNormal)}else v=e.geodeticSurfaceNormalCartographic(S,x),i.Z.octEncode(v,d.encodedNormal)}(t,g,e.tile,Z,d[m-1],d[m],c,l,h,u),!0}return!1}const re=[new a.Z,new a.Z,new a.Z,new a.Z],se=T},388973:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=Object.freeze({FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6})},473493:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var i=n(762031),o=n(660904),r=n(532056),s=n(790087),a=n(376213),c=n(234146),l=n(11020),u=n(63354),d=n(156905),h=n(998537),f=n(659635),p=n(237247),m=n(341633),_=n(638601),g=n(143450),Z=n(75918),y=n(104763),b=n(759398),v=n(714233);function A(e){s.Z.typeOf.object("options",e),s.Z.typeOf.object("options.rectangle",e.rectangle),this.rectangle=g.Z.clone(e.rectangle),this.minimumHeight=(0,c.Z)(e.minimumHeight,0),this.maximumHeight=(0,c.Z)(e.maximumHeight,0),this.southwestCornerCartesian=new o.Z,this.northeastCornerCartesian=new o.Z,this.westNormal=new o.Z,this.southNormal=new o.Z,this.eastNormal=new o.Z,this.northNormal=new o.Z;const t=(0,c.Z)(e.ellipsoid,u.Z.WGS84);!function(e,t,n){n.cartographicToCartesian(g.Z.southwest(t),e.southwestCornerCartesian),n.cartographicToCartesian(g.Z.northeast(t),e.northeastCornerCartesian),P.longitude=t.west,P.latitude=.5*(t.south+t.north),P.height=0;const i=n.cartographicToCartesian(P,x),r=o.Z.cross(i,o.Z.UNIT_Z,S);o.Z.normalize(r,e.westNormal),P.longitude=t.east;const s=n.cartographicToCartesian(P,I),a=o.Z.cross(o.Z.UNIT_Z,s,T);o.Z.normalize(a,e.eastNormal);let c=o.Z.subtract(i,s,T);0===o.Z.magnitude(c)&&(c=o.Z.clone(r,c));const l=o.Z.normalize(c,C),u=t.south;let d;if(u>0){P.longitude=.5*(t.west+t.east),P.latitude=u;const i=n.cartographicToCartesian(P,O.origin);o.Z.clone(l,O.direction);const r=m.Z.fromPointNormal(e.southwestCornerCartesian,e.westNormal,D);h.Z.rayPlane(O,r,e.southwestCornerCartesian),d=n.geodeticSurfaceNormal(i,w)}else d=n.geodeticSurfaceNormalCartographic(g.Z.southeast(t),w);const f=o.Z.cross(d,c,E);o.Z.normalize(f,e.southNormal);const p=t.north;let _;if(p<0){P.longitude=.5*(t.west+t.east),P.latitude=p;const i=n.cartographicToCartesian(P,O.origin);o.Z.negate(l,O.direction);const r=m.Z.fromPointNormal(e.northeastCornerCartesian,e.eastNormal,D);h.Z.rayPlane(O,r,e.northeastCornerCartesian),_=n.geodeticSurfaceNormal(i,w)}else _=n.geodeticSurfaceNormalCartographic(g.Z.northwest(t),w);const Z=o.Z.cross(c,_,E);o.Z.normalize(Z,e.northNormal)}(this,e.rectangle,t),this._orientedBoundingBox=void 0,this._boundingSphere=void 0,(0,c.Z)(e.computeBoundingVolumes,!0)&&this.computeBoundingVolumes(t)}Object.defineProperties(A.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),A.prototype.computeBoundingVolumes=function(e){this._orientedBoundingBox=p.Z.fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,e),this._boundingSphere=i.Z.fromOrientedBoundingBox(this._orientedBoundingBox)};const T=new o.Z,w=new o.Z,E=new o.Z,S=new o.Z,C=new o.Z,x=new o.Z,I=new o.Z,P=new r.Z,D=new m.Z(o.Z.UNIT_X,0),O=new _.Z,L=new o.Z,N=new o.Z,M=new o.Z(0,-1,0),R=new o.Z(0,0,-1),F=new o.Z;A.prototype.distanceToCamera=function(e){s.Z.defined("frameState",e);const t=function(e,t){const n=t.camera,i=n.positionWC,r=n.positionCartographic;let s,a,c,l=0;if(!g.Z.contains(e.rectangle,r)){let n=e.southwestCornerCartesian,r=e.northeastCornerCartesian,s=e.westNormal,a=e.southNormal,c=e.eastNormal,u=e.northNormal;t.mode!==v.Z.SCENE3D&&(n=t.mapProjection.project(g.Z.southwest(e.rectangle),L),n.z=n.y,n.y=n.x,n.x=0,r=t.mapProjection.project(g.Z.northeast(e.rectangle),N),r.z=r.y,r.y=r.x,r.x=0,s=M,c=o.Z.UNIT_Y,a=R,u=o.Z.UNIT_Z);const d=o.Z.subtract(i,n,F),h=o.Z.dot(d,s),f=o.Z.dot(d,a),p=o.Z.subtract(i,r,F),m=o.Z.dot(p,c),_=o.Z.dot(p,u);h>0?l+=h*h:m>0&&(l+=m*m),f>0?l+=f*f:_>0&&(l+=_*_)}if(t.mode===v.Z.SCENE3D?(s=r.height,a=e.minimumHeight,c=e.maximumHeight):(s=i.x,a=0,c=0),s>c){const e=s-c;l+=e*e}else if(s<a){const e=a-s;l+=e*e}return Math.sqrt(l)}(this,e);if(e.mode===v.Z.SCENE3D&&(0,l.Z)(this._orientedBoundingBox)){const n=Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC));return Math.max(t,n)}return t},A.prototype.intersectPlane=function(e){return s.Z.defined("plane",e),this._orientedBoundingBox.intersectPlane(e)},A.prototype.createDebugVolume=function(e){s.Z.defined("color",e);const t=new f.Z.clone(f.Z.IDENTITY),n=new Z.Z({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),i=new d.Z({geometry:n,id:"outline",modelMatrix:t,attributes:{color:a.Z.fromColor(e)}});return new b.Z({geometryInstances:i,appearance:new y.Z({translucent:!1,flat:!0}),asynchronous:!1})};const B=A},525387:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ee});var i=n(660904),o=n(11020),r=n(532056),s=n(63354),a=n(101496),c=n(664288),l=n(341633),u=n(252888),d=n(762031),h=n(790087),f=n(376213),p=n(234146),m=n(156905),_=n(659635),g=n(104763),Z=n(759398),y=n(686592);let b=new r.Z;function v(e){h.Z.typeOf.object("options",e),h.Z.typeOf.string("options.token",e.token);const t=y.Z.fromToken(e.token),n=(0,p.Z)(e.minimumHeight,0),o=(0,p.Z)(e.maximumHeight,0),r=(0,p.Z)(e.ellipsoid,s.Z.WGS84);this.s2Cell=t,this.minimumHeight=n,this.maximumHeight=o,this.ellipsoid=r;const a=function(e,t,n,o){const r=new Array(6),s=e.getCenter(),a=o.geodeticSurfaceNormal(s,A),c=o.cartesianToCartographic(s,T);c.height=n;const u=o.cartographicToCartesian(c,w),d=l.Z.fromPointNormal(u,a);r[0]=d;let h,f=0;const p=[];let m,_;for(h=0;h<4;h++){m=e.getVertex(h),p[h]=m,_=o.cartesianToCartographic(m,E),_.height=t;const n=l.Z.getPointDistance(d,o.cartographicToCartesian(_,S));n<f&&(f=n)}const g=l.Z.clone(d);for(g.normal=i.Z.negate(g.normal,g.normal),g.distance=-1*g.distance+f,r[1]=g,h=0;h<4;h++){m=p[h];const e=p[(h+1)%4],t=o.geodeticSurfaceNormal(m,C),n=i.Z.subtract(e,m,I);let s=i.Z.cross(n,t,x);s=i.Z.normalize(s,s),r[2+h]=l.Z.fromPointNormal(m,s)}return r}(t,n,o,r);this._boundingPlanes=a;const c=function(e){const t=new Array(8);for(let n=0;n<4;n++)t[n]=G(e[0],e[2+(n+3)%4],e[2+n%4]),t[n+4]=G(e[1],e[2+(n+3)%4],e[2+n%4]);return t}(a);let u;for(this._vertices=c,this._edgeNormals=new Array(6),this._edgeNormals[0]=q(a[0],c.slice(0,4)),u=0;u<4;u++)this._edgeNormals[0][u]=i.Z.negate(this._edgeNormals[0][u],this._edgeNormals[0][u]);for(this._edgeNormals[1]=q(a[1],c.slice(4,8)),u=0;u<4;u++)this._edgeNormals[2+u]=q(a[2+u],[c[u%4],c[(u+1)%4],c[4+(u+1)%4],c[4+u]]);for(this._planeVertices=[this._vertices.slice(0,4),this._vertices.slice(4,8)],u=0;u<4;u++)this._planeVertices.push([this._vertices[u%4],this._vertices[(u+1)%4],this._vertices[4+(u+1)%4],this._vertices[4+u]]);const f=t.getCenter();b=r.cartesianToCartographic(f,b),b.height=(o+n)/2,this.center=r.cartographicToCartesian(b,f),this._boundingSphere=d.Z.fromPoints(c)}const A=new i.Z,T=new r.Z,w=new i.Z,E=new r.Z,S=new i.Z,C=new i.Z,x=new i.Z,I=new i.Z;let P=new i.Z,D=new i.Z,O=new i.Z,L=new i.Z,N=new i.Z,M=new i.Z;const R=new i.Z,F=new i.Z,B=new i.Z;let U=new i.Z,k=new i.Z,V=new i.Z,H=new i.Z;const z=new c.Z;function G(e,t,n){P=e.normal,D=t.normal,O=n.normal,L=i.Z.multiplyByScalar(e.normal,-e.distance,L),N=i.Z.multiplyByScalar(t.normal,-t.distance,N),M=i.Z.multiplyByScalar(n.normal,-n.distance,M),U=i.Z.multiplyByScalar(i.Z.cross(D,O,R),i.Z.dot(L,P),U),k=i.Z.multiplyByScalar(i.Z.cross(O,P,F),i.Z.dot(N,D),k),V=i.Z.multiplyByScalar(i.Z.cross(P,D,B),i.Z.dot(M,O),V),z[0]=P.x,z[1]=D.x,z[2]=O.x,z[3]=P.y,z[4]=D.y,z[5]=O.y,z[6]=P.z,z[7]=D.z,z[8]=O.z;const o=c.Z.determinant(z);return H=i.Z.add(U,k,H),H=i.Z.add(H,V,H),new i.Z(H.x/o,H.y/o,H.z/o)}let j=new i.Z,W=new i.Z;function q(e,t){const n=[];for(let o=0;o<4;o++)j=i.Z.subtract(t[(o+1)%4],t[o],j),W=i.Z.cross(e.normal,j,W),W=i.Z.normalize(W,W),n[o]=i.Z.clone(W);return n}Object.defineProperties(v.prototype,{boundingVolume:{get:function(){return this}},boundingSphere:{get:function(){return this._boundingSphere}}});const Y=new i.Z;v.prototype.distanceToCamera=function(e){h.Z.defined("frameState",e);const t=e.camera.positionWC,n=[],o=[];let r,s,a,c,u;for(l.Z.getPointDistance(this._boundingPlanes[0],t)>0?(n.push(0),o.push(this._planeVertices[0]),r=this._edgeNormals[0]):l.Z.getPointDistance(this._boundingPlanes[1],t)>0&&(n.push(1),o.push(this._planeVertices[1]),r=this._edgeNormals[1]),s=0;s<4;s++)a=2+s,l.Z.getPointDistance(this._boundingPlanes[a],t)>0&&(n.push(a),o.push(this._planeVertices[a]),r=this._edgeNormals[a]);if(0===n.length)return 0;if(1===n.length)return u=this._boundingPlanes[n[0]],c=K(l.Z.projectPointOntoPlane(u,t,Y),o[0],0,r),i.Z.distance(c,t);if(2===n.length){if(0===n[0]){const e=[this._vertices[4*n[0]+(n[1]-2)],this._vertices[4*n[0]+(n[1]-2+1)%4]];return c=Q(t,e[0],e[1]),i.Z.distance(c,t)}let e,r=Number.MAX_VALUE;for(s=0;s<2;s++)u=this._boundingPlanes[n[s]],c=K(l.Z.projectPointOntoPlane(u,t,Y),o[s],0,this._edgeNormals[n[s]]),e=i.Z.distanceSquared(c,t),e<r&&(r=e);return Math.sqrt(r)}if(n.length>3)return c=K(l.Z.projectPointOntoPlane(this._boundingPlanes[1],t,Y),this._planeVertices[1],this._boundingPlanes[1],this._edgeNormals[1]),i.Z.distance(c,t);const d=2===n[1]&&5===n[2]?0:1;return 0===n[0]?i.Z.distance(t,this._vertices[(n[1]-2+d)%4]):i.Z.distance(t,this._vertices[4+(n[1]-2+d)%4])};const X=new i.Z,J=new i.Z;function Q(e,t,n){const o=i.Z.subtract(n,t,X),r=i.Z.subtract(e,t,J);let s=i.Z.dot(o,r);if(s<=0)return t;const a=i.Z.dot(o,o);return s>=a?n:(s/=a,new i.Z((1-s)*t.x+s*n.x,(1-s)*t.y+s*n.y,(1-s)*t.z+s*n.z))}const $=new l.Z(i.Z.UNIT_X,0);function K(e,t,n,r){let s,a,c,u=Number.MAX_VALUE;for(let n=0;n<t.length;n++){const o=l.Z.fromPointNormal(t[n],r[n],$);l.Z.getPointDistance(o,e)<0||(c=Q(e,t[n],t[(n+1)%4]),s=i.Z.distance(e,c),s<u&&(u=s,a=c))}return(0,o.Z)(a)?a:e}v.prototype.intersectPlane=function(e){h.Z.defined("plane",e);let t=0,n=0;for(let o=0;o<this._vertices.length;o++)i.Z.dot(e.normal,this._vertices[o])+e.distance<0?n++:t++;return t===this._vertices.length?a.Z.INSIDE:n===this._vertices.length?a.Z.OUTSIDE:a.Z.INTERSECTING},v.prototype.createDebugVolume=function(e){h.Z.defined("color",e);const t=new _.Z.clone(_.Z.IDENTITY),n=new u.Z({polygonHierarchy:{positions:this._planeVertices[0]}}),i=u.Z.createGeometry(n),o=new m.Z({geometry:i,id:"outline",modelMatrix:t,attributes:{color:f.Z.fromColor(e)}}),r=new u.Z({polygonHierarchy:{positions:this._planeVertices[1]}}),s=u.Z.createGeometry(r),a=new m.Z({geometry:s,id:"outline",modelMatrix:t,attributes:{color:f.Z.fromColor(e)}}),c=[];for(let n=0;n<4;n++){const i=new u.Z({polygonHierarchy:{positions:this._planeVertices[2+n]}}),o=u.Z.createGeometry(i);c[n]=new m.Z({geometry:o,id:"outline",modelMatrix:t,attributes:{color:f.Z.fromColor(e)}})}return new Z.Z({geometryInstances:[c[0],c[1],c[2],c[3],a,o],appearance:new g.Z({translucent:!1,flat:!0}),asynchronous:!1})};const ee=v},175084:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(762031),o=n(660904),r=n(790087),s=n(376213),a=n(156905),c=n(344485),l=n(659635),u=n(252054),d=n(104763),h=n(759398);function f(e,t){0===t&&(t=c.Z.EPSILON7),this._boundingSphere=new i.Z(e,t)}Object.defineProperties(f.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}}),f.prototype.distanceToCamera=function(e){r.Z.defined("frameState",e);const t=this._boundingSphere;return Math.max(0,o.Z.distance(t.center,e.camera.positionWC)-t.radius)},f.prototype.intersectPlane=function(e){return r.Z.defined("plane",e),i.Z.intersectPlane(this._boundingSphere,e)},f.prototype.update=function(e,t){o.Z.clone(e,this._boundingSphere.center),this._boundingSphere.radius=t},f.prototype.createDebugVolume=function(e){r.Z.defined("color",e);const t=new u.Z({radius:this.radius}),n=l.Z.fromTranslation(this.center,new l.Z.clone(l.Z.IDENTITY)),i=new a.Z({geometry:t,id:"outline",modelMatrix:n,attributes:{color:s.Z.fromColor(e)}});return new h.Z({geometryInstances:i,appearance:new d.Z({translucent:!1,flat:!0}),asynchronous:!1})};const p=f},701077:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(11020),o=n(544930);function r(e,t,n){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=n}r.prototype.freeResources=function(){(0,i.Z)(this.readyImagery)&&this.readyImagery.releaseReference(),(0,i.Z)(this.loadingImagery)&&this.loadingImagery.releaseReference()},r.prototype.processStateMachine=function(e,t,n){const r=this.loadingImagery,s=r.imageryLayer;if(r.processStateMachine(t,!this.useWebMercatorT,n),r.state===o.Z.READY)return(0,i.Z)(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=s._calculateTextureTranslationAndScale(e,this),!0;let a,c=r.parent;for(;(0,i.Z)(c)&&(c.state!==o.Z.READY||!this.useWebMercatorT&&!(0,i.Z)(c.texture));)c.state!==o.Z.FAILED&&c.state!==o.Z.INVALID&&(a=a||c),c=c.parent;return this.readyImagery!==c&&((0,i.Z)(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=c,(0,i.Z)(c)&&(c.addReference(),this.textureTranslationAndScale=s._calculateTextureTranslationAndScale(e,this))),!(r.state!==o.Z.FAILED&&r.state!==o.Z.INVALID||(0,i.Z)(a)&&(a.processStateMachine(t,!this.useWebMercatorT,n),1))};const s=r},619233:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(405254),o=n(532056),r=n(790087),s=n(234146),a=n(11020),c=n(906439),l=n(351047),u=n(729476),d=n(143450),h=n(709550),f=n(205522),p=n(217066),m=n(709366),_=n(931359),g=n(267428);function Z(e){if(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),(0,a.Z)(e.url)){let t;(0,c.Z)("TileMapServiceImageryProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use TileMapServiceImageryProvider.fromUrl instead."),this._metadataError=void 0,this._ready=!1;const n=this,i=Promise.resolve(e.url).then((function(i){return t=f.Z.createIfNeeded(i),t.appendForwardSlash(),n._tmsResource=t,n._xmlResource=t.getDerivedResource({url:"tilemapresource.xml"}),Z._requestMetadata(e,n._tmsResource,n._xmlResource,n)})).catch((e=>Promise.reject(e)));g.Z.call(this,i),this._promise=i}}function y(e,t){return e.west<t.rectangle.west&&(e.west=t.rectangle.west),e.east>t.rectangle.east&&(e.east=t.rectangle.east),e.south<t.rectangle.south&&(e.south=t.rectangle.south),e.north>t.rectangle.north&&(e.north=t.rectangle.north),e}function b(e,t,n){const i=e.positionToTileXY(d.Z.southwest(t),n),o=e.positionToTileXY(d.Z.northeast(t),n);return(Math.abs(o.x-i.x)+1)*(Math.abs(o.y-i.y)+1)>4?0:n}Z._requestMetadata=async function(e,t,n,i){try{const o=await n.fetchXML();return Z._metadataSuccess(o,e,t,n,i)}catch(n){if(n instanceof h.Z)return Z._metadataFailure(e,t);throw n}},Z.fromUrl=async function(e,t){r.Z.defined("url",e);const n=f.Z.createIfNeeded(e);n.appendForwardSlash();const i=n,o=n.getDerivedResource({url:"tilemapresource.xml"});t=(0,s.Z)(t,s.Z.EMPTY_OBJECT);const a=await Z._requestMetadata(t,i,o),c=new Z;return g.Z.call(c,a),c},(0,a.Z)(Object.create)&&(Z.prototype=Object.create(g.Z.prototype),Z.prototype.constructor=Z),Z._metadataSuccess=function(e,t,n,r,c){const h=/tileformat/i,f=/tileset/i,g=/tilesets/i,Z=/boundingbox/i;let v,A,T;const w=[],E=e.childNodes[0].childNodes;for(let e=0;e<E.length;e++)if(h.test(E.item(e).nodeName))v=E.item(e);else if(g.test(E.item(e).nodeName)){T=E.item(e);const t=E.item(e).childNodes;for(let e=0;e<t.length;e++)f.test(t.item(e).nodeName)&&w.push(t.item(e))}else Z.test(E.item(e).nodeName)&&(A=E.item(e));let S;if(!(0,a.Z)(T)||!(0,a.Z)(A))throw S=`Unable to find expected tilesets or bbox attributes in ${r.url}.`,(0,a.Z)(c)&&m.Z.reportError(void 0,c,c.errorEvent,S),new p.Z(S);const C=(0,s.Z)(t.fileExtension,v.getAttribute("extension")),x=(0,s.Z)(t.tileWidth,parseInt(v.getAttribute("width"),10)),I=(0,s.Z)(t.tileHeight,parseInt(v.getAttribute("height"),10));let P=(0,s.Z)(t.minimumLevel,parseInt(w[0].getAttribute("order"),10));const D=(0,s.Z)(t.maximumLevel,parseInt(w[w.length-1].getAttribute("order"),10)),O=T.getAttribute("profile");let L=t.tilingScheme;if(!(0,a.Z)(L))if("geodetic"===O||"global-geodetic"===O)L=new u.Z({ellipsoid:t.ellipsoid});else{if("mercator"!==O&&"global-mercator"!==O)throw S=`${r.url} specifies an unsupported profile attribute, ${O}.`,(0,a.Z)(c)&&m.Z.reportError(void 0,c,c.errorEvent,S),new p.Z(S);L=new _.Z({ellipsoid:t.ellipsoid})}let N=d.Z.clone(t.rectangle);if(!(0,a.Z)(N)){let e,n,r,a;(0,s.Z)(t.flipXY,!1)?(r=new i.Z(parseFloat(A.getAttribute("miny")),parseFloat(A.getAttribute("minx"))),a=new i.Z(parseFloat(A.getAttribute("maxy")),parseFloat(A.getAttribute("maxx")))):(r=new i.Z(parseFloat(A.getAttribute("minx")),parseFloat(A.getAttribute("miny"))),a=new i.Z(parseFloat(A.getAttribute("maxx")),parseFloat(A.getAttribute("maxy"))));const c="geodetic"===O||"mercator"===O;if(L.projection instanceof l.Z||c)e=o.Z.fromDegrees(r.x,r.y),n=o.Z.fromDegrees(a.x,a.y);else{const t=L.projection;e=t.unproject(r),n=t.unproject(a)}N=new d.Z(e.longitude,e.latitude,n.longitude,n.latitude)}return N=y(N,L),P=b(L,N,P),{url:n.getDerivedResource({url:`{z}/{x}/{reverseY}.${C}`}),tilingScheme:L,rectangle:N,tileWidth:x,tileHeight:I,minimumLevel:P,maximumLevel:D,tileDiscardPolicy:t.tileDiscardPolicy,credit:t.credit}},Z._metadataFailure=function(e,t){const n=(0,s.Z)(e.fileExtension,"png"),i=(0,s.Z)(e.tileWidth,256),o=(0,s.Z)(e.tileHeight,256),r=e.maximumLevel,c=(0,a.Z)(e.tilingScheme)?e.tilingScheme:new _.Z({ellipsoid:e.ellipsoid});let l=(0,s.Z)(e.rectangle,c.rectangle);l=y(l,c);const u=b(c,l,e.minimumLevel);return{url:t.getDerivedResource({url:`{z}/{x}/{reverseY}.${n}`}),tilingScheme:c,rectangle:l,tileWidth:i,tileHeight:o,minimumLevel:u,maximumLevel:r,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit}};const v=Z},740929:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(234146),r=n(529394);function s(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).tile,n=e.class;i.Z.typeOf.object("options.tile",t),i.Z.typeOf.object("options.class",n),this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(s.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.hasProperty=function(e){return r.Z.hasProperty(e,this._properties,this._class)},s.prototype.hasPropertyBySemantic=function(e){return r.Z.hasPropertyBySemantic(e,this._properties,this._class)},s.prototype.getPropertyIds=function(e){return r.Z.getPropertyIds(this._properties,this._class,e)},s.prototype.getProperty=function(e){return r.Z.getProperty(e,this._properties,this._class)},s.prototype.setProperty=function(e,t){return r.Z.setProperty(e,t,this._properties,this._class)},s.prototype.getPropertyBySemantic=function(e){return r.Z.getPropertyBySemantic(e,this._properties,this._class)},s.prototype.setPropertyBySemantic=function(e,t){return r.Z.setPropertyBySemantic(e,t,this._properties,this._class)};const a=s},256927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(762031),o=n(77305),r=n(660904),s=n(790087),a=n(376213),c=n(156905),l=n(664288),u=n(659635),d=n(344485),h=n(237247),f=n(104763),p=n(759398);const m=new r.Z,_=new r.Z,g=new r.Z,Z=new r.Z;function y(e,t,n){n=r.Z.cross(e,t,n);const i=r.Z.magnitude(n);return r.Z.multiplyByScalar(n,d.Z.EPSILON7/i,n)}function b(e,t){const n=r.Z.normalize(e,Z);return y(e,r.Z.equalsEpsilon(n,r.Z.UNIT_X,d.Z.EPSILON6)?r.Z.UNIT_Y:r.Z.UNIT_X,t)}function v(e){let t=l.Z.getColumn(e,0,m),n=l.Z.getColumn(e,1,_),i=l.Z.getColumn(e,2,g);const o=r.Z.equals(t,r.Z.ZERO),s=r.Z.equals(n,r.Z.ZERO),a=r.Z.equals(i,r.Z.ZERO);return o||s||a?o&&s&&a?(e[0]=d.Z.EPSILON7,e[4]=d.Z.EPSILON7,e[8]=d.Z.EPSILON7,e):(!o||s||a?o||!s||a?o||s||!a?o?s?a||(t=b(i,t),n=y(i,t,n)):(t=b(n,t),i=y(n,t,i)):(n=b(t,n),i=y(n,t,i)):i=y(n,t,i):n=y(t,i,n):t=y(n,i,t),l.Z.setColumn(e,0,t,e),l.Z.setColumn(e,1,n,e),l.Z.setColumn(e,2,i,e),e):e}function A(e,t){t=v(t),this._orientedBoundingBox=new h.Z(e,t),this._boundingSphere=i.Z.fromOrientedBoundingBox(this._orientedBoundingBox)}Object.defineProperties(A.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),A.prototype.distanceToCamera=function(e){return s.Z.defined("frameState",e),Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))},A.prototype.intersectPlane=function(e){return s.Z.defined("plane",e),this._orientedBoundingBox.intersectPlane(e)},A.prototype.update=function(e,t){r.Z.clone(e,this._orientedBoundingBox.center),t=v(t),l.Z.clone(t,this._orientedBoundingBox.halfAxes),i.Z.fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)},A.prototype.createDebugVolume=function(e){s.Z.defined("color",e);const t=new o.Z({minimum:new r.Z(-1,-1,-1),maximum:new r.Z(1,1,1)}),n=u.Z.fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),i=new c.Z({geometry:t,id:"outline",modelMatrix:n,attributes:{color:a.Z.fromColor(e)}});return new p.Z({geometryInstances:i,appearance:new f.Z({translucent:!1,flat:!0}),asynchronous:!1})};const T=A},403391:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(11020);function o(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0}function r(e,t){const n=t.replacementPrevious,i=t.replacementNext;t===e._lastBeforeStartOfFrame&&(e._lastBeforeStartOfFrame=i),t===e.head?e.head=i:n.replacementNext=i,t===e.tail?e.tail=n:i.replacementPrevious=n,t.replacementPrevious=void 0,t.replacementNext=void 0,--e.count}o.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},o.prototype.trimTiles=function(e){let t=this.tail,n=!0;for(;n&&(0,i.Z)(this._lastBeforeStartOfFrame)&&this.count>e&&(0,i.Z)(t);){n=t!==this._lastBeforeStartOfFrame;const e=t.replacementPrevious;t.eligibleForUnloading&&(t.freeResources(),r(this,t)),t=e}},o.prototype.markTileRendered=function(e){const t=this.head;if(t!==e){if(++this.count,!(0,i.Z)(t))return e.replacementPrevious=void 0,e.replacementNext=void 0,this.head=e,void(this.tail=e);((0,i.Z)(e.replacementPrevious)||(0,i.Z)(e.replacementNext))&&r(this,e),e.replacementPrevious=void 0,e.replacementNext=t,t.replacementPrevious=e,this.head=e}else e===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=e.replacementNext)};const s=o},565760:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const i={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=i.RENDERED_AND_KICKED},originalResult:function(e){return 3&e},kick:function(e){return 4|e}},o=i},914238:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(722313),o=n(906439);function r(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._ready=!1,this._readyPromise=Promise.resolve(this)}Object.defineProperties(r.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,o.Z)("Tileset3DTileContent.readyPromise","Tileset3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Tileset3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),r.fromJson=function(e,t,n,i){const o=new r(e,t,n);return o._tileset.loadTileset(o._resource,i,o._tile),o._ready=!0,o},r.prototype.hasProperty=function(e,t){return!1},r.prototype.getFeature=function(e){},r.prototype.applyDebugSettings=function(e,t){},r.prototype.applyStyle=function(e){},r.prototype.update=function(e,t){},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){return(0,i.Z)(this)};const s=r},971437:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(234146),r=n(11020),s=n(529394);function a(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).tileset,n=e.class;i.Z.typeOf.object("options.tileset",t),i.Z.typeOf.object("options.class",n);const s=(0,r.Z)(t.properties)?t.properties:{};this._class=n,this._properties=s,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return s.Z.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return s.Z.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return s.Z.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return s.Z.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return s.Z.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return s.Z.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return s.Z.setPropertyBySemantic(e,t,this._properties,this._class)};const c=a},587939:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(790087),o=n(234146),r=n(11020),s=n(765153),a=n(791364),c=n(161648),l=n(293685);function u(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),i.Z.typeOf.object("options.clock",e.clock),i.Z.typeOf.object("options.times",e.times),i.Z.typeOf.func("options.requestImageFunction",e.requestImageFunction),i.Z.typeOf.func("options.reloadFunction",e.reloadFunction),this._tileCache={},this._tilesRequestedForInterval=[];const t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}function d(e,t,n){return`${e}-${t}-${n}`}function h(e){const t=e._times;if(!(0,r.Z)(t))return;const n=e._clock,i=n.currentTime,o=n.canAnimate&&n.shouldAnimate,s=n.multiplier;if(!o&&0!==s)return;let c,l=t.indexOf(i);if(l<0)return;const u=t.get(l);return s>0?(c=a.Z.secondsDifference(u.stop,i),++l):(c=a.Z.secondsDifference(u.start,i),--l),c/=s,l>=0&&c<=5?t.get(l):void 0}function f(e,t,n){const i=e._times.indexOf(n.start),o=e._tileCache;let s=o[i];(0,r.Z)(s)||(s=o[i]={});const a=t.key;if((0,r.Z)(s[a]))return!0;const u=function(e){const t=e.split("-");if(3===t.length)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}(a),d=new c.Z({throttle:!1,throttleByServer:!0,type:l.Z.IMAGERY,priorityFunction:t.priorityFunction}),h=e._requestImageFunction(u.x,u.y,u.level,d,n);return!!(0,r.Z)(h)&&(s[a]={promise:h,request:d},!0)}Object.defineProperties(u.prototype,{clock:{get:function(){return this._clock},set:function(e){if(!(0,r.Z)(e))throw new s.Z("value is required.");this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){if(!(0,r.Z)(e))throw new s.Z("value is required.");this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}}),u.prototype.getFromCache=function(e,t,n,i){const o=d(e,t,n);let s;const a=this._tileCache[this._currentIntervalIndex];if((0,r.Z)(a)&&(0,r.Z)(a[o])){const e=a[o];s=e.promise.catch((function(t){throw i.state=e.request.state,t})),delete a[o]}return s},u.prototype.checkApproachingInterval=function(e,t,n,i){const o=d(e,t,n),s=this._tilesRequestedForInterval,a=h(this),c={key:o,priorityFunction:i.priorityFunction};(0,r.Z)(a)&&f(this,c,a)||s.push(c),s.length>=512&&s.splice(0,256)},u.prototype._clockOnTick=function(e){const t=e.currentTime,n=this._times.indexOf(t),i=this._currentIntervalIndex;if(n!==i){const e=this._tileCache[i];for(const t in e)e.hasOwnProperty(t)&&e[t].request.cancel();return delete this._tileCache[i],this._tilesRequestedForInterval=[],this._currentIntervalIndex=n,void this._reloadFunction()}const o=h(this);if((0,r.Z)(o)){const e=this._tilesRequestedForInterval;let t=!0;for(;t&&0!==e.length;){const n=e.pop();t=f(this,n,o),t||e.push(n)}}};const p=u},91575:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var i=n(790087),o=n(394579),r=n(234146),s=n(11020),a=n(722313),c=n(906439),l=n(282910),u=n(732292),d=n(791364),h=n(344485),f=n(659635),p=n(205522),m=n(753577),_=n(978701),g=n(270550),Z=n(993910),y=n(714233),b=n(534890);function v(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),i.Z.typeOf.object("options.clock",e.clock),i.Z.typeOf.object("options.intervals",e.intervals),this.show=(0,r.Z)(e.show,!0),this.modelMatrix=f.Z.clone((0,r.Z)(e.modelMatrix,f.Z.IDENTITY)),this.shadows=(0,r.Z)(e.shadows,b.Z.ENABLED),this.maximumMemoryUsage=(0,r.Z)(e.maximumMemoryUsage,256),this.shading=new Z.Z(e.shading),this.style=e.style,this.frameFailed=new l.Z,this.frameChanged=new l.Z,this._clock=e.clock,this._intervals=e.intervals,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._pointCloudEyeDomeLighting=new g.Z,this._loadTimestamp=void 0,this._clippingPlanesState=0,this._styleDirty=!1,this._pickId=void 0,this._totalMemoryUsageInBytes=0,this._frames=[],this._previousInterval=void 0,this._nextInterval=void 0,this._lastRenderedFrame=void 0,this._clockMultiplier=0,this._resolveReadyPromise=void 0;const t=this;this._readyPromise=new Promise((function(e){t._resolveReadyPromise=e})),this._runningSum=0,this._runningLength=0,this._runningIndex=0,this._runningSamples=new Array(5).fill(0),this._runningAverage=0}function A(e){return`uniform vec4 czm_pickColor;\n${e}`}function T(){return"czm_pickColor"}Object.defineProperties(v.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){m.Z.setOwner(e,this,"_clippingPlanes")}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes}},boundingSphere:{get:function(){if((0,s.Z)(this._lastRenderedFrame))return this._lastRenderedFrame.pointCloud.boundingSphere}},readyPromise:{get:function(){return(0,c.Z)("TimeDynamicPointCloud.readyPromise","TimeDynamicPointCloud.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use TimeDynamicPointCloud.frameFailed instead."),this._readyPromise}}}),v.prototype.makeStyleDirty=function(){this._styleDirty=!0},v.prototype._getAverageLoadTime=function(){return 0===this._runningLength?.05:this._runningAverage};const w=new d.Z;function E(e){const t=e._clock,n=t.canAnimate&&t.shouldAnimate,i=t.multiplier;return n?i:0}function S(e,t){return e._intervals.indexOf(t.start)}function C(e,t){return function(n){const i=(0,s.Z)(n.message)?n.message:n.toString();e.frameFailed.numberOfListeners>0?e.frameFailed.raiseEvent({uri:t,message:i}):(console.log(`A frame failed to load: ${t}`),console.log(`Error: ${i}`))}}const x=new f.Z,I=new Z.Z;function P(e,t,n,i){const o=(0,r.Z)(e.shading,I),a=t.pointCloud,c=(0,r.Z)(t.transform,f.Z.IDENTITY);a.modelMatrix=f.Z.multiplyTransformation(e.modelMatrix,c,x),a.style=e.style,a.time=n.timeSinceLoad,a.shadows=e.shadows,a.clippingPlanes=e._clippingPlanes,a.isClipped=n.isClipped,a.attenuation=o.attenuation,a.backFaceCulling=o.backFaceCulling,a.normalShading=o.normalShading,a.geometricError=function(e,t){const n=e.shading;return(0,s.Z)(n)&&(0,s.Z)(n.baseResolution)?n.baseResolution:(0,s.Z)(t.boundingSphere)?h.Z.cbrt(t.boundingSphere.volume()/t.pointsLength):0}(e,a),a.geometricErrorScale=o.geometricErrorScale,a.maximumAttenuation=function(e){const t=e.shading;return(0,s.Z)(t)&&(0,s.Z)(t.maximumAttenuation)?t.maximumAttenuation:10}(e);try{a.update(i)}catch(n){C(e,t.uri)(n)}t.touchedFrameNumber=i.frameNumber}function D(e,t,n,i){const r=function(e,t,n){const i=S(e,t),r=e._frames;let a=r[i];if(!(0,s.Z)(a)){const c=t.data.transform,l=(0,s.Z)(c)?f.Z.fromArray(c):void 0,d=t.data.uri;a={pointCloud:void 0,transform:l,timestamp:(0,u.Z)(),sequential:!0,ready:!1,touchedFrameNumber:n.frameNumber,uri:d},r[i]=a,p.Z.fetchArrayBuffer({url:d}).then((function(t){var n;a.pointCloud=new _.Z({arrayBuffer:t,cull:!0,fragmentShaderLoaded:A,uniformMapLoaded:(n=e,function(e){return(0,o.Z)(e,{czm_pickColor:function(){return n._pickId.color}})}),pickIdLoaded:T})})).catch(C(e,d))}return a}(e,t,i);!function(e,t,n,i){t.touchedFrameNumber<i.frameNumber-1&&(t.sequential=!1);const o=t.pointCloud;if((0,s.Z)(o)&&!t.ready){const r=i.commandList,s=r.length;P(e,t,n,i),o.ready&&(t.ready=!0,e._totalMemoryUsageInBytes+=o.geometryByteLength,r.length=s,t.sequential)&&function(e,t){e._runningSum+=t,e._runningSum-=e._runningSamples[e._runningIndex],e._runningSamples[e._runningIndex]=t,e._runningLength=Math.min(e._runningLength+1,e._runningSamples.length),e._runningIndex=(e._runningIndex+1)%e._runningSamples.length,e._runningAverage=e._runningSum/e._runningLength}(e,((0,u.Z)()-t.timestamp)/1e3)}t.touchedFrameNumber=i.frameNumber}(e,r,n,i)}function O(e,t){const n=e._frames,i=n.length;for(let o=0;o<i;++o){const i=n[o];if((0,s.Z)(i)&&(!(0,s.Z)(t)||t(i))){const t=i.pointCloud;i.ready&&(e._totalMemoryUsageInBytes-=t.geometryByteLength),(0,s.Z)(t)&&t.destroy(),i===e._lastRenderedFrame&&(e._lastRenderedFrame=void 0),n[o]=void 0}}}function L(e,t,n,i,o){return!!(0,s.Z)(n)&&(!!n.ready||(D(e,t,i,o),n.ready))}const N={timeSinceLoad:0,isClipped:!1,clippingPlanesDirty:!1};v.prototype.update=function(e){if(e.mode===y.Z.MORPHING)return;if(!this.show)return;(0,s.Z)(this._pickId)||(this._pickId=e.context.createPickId({primitive:this})),(0,s.Z)(this._loadTimestamp)||(this._loadTimestamp=d.Z.clone(e.time));const t=Math.max(1e3*d.Z.secondsDifference(e.time,this._loadTimestamp),0),n=this._clippingPlanes;let i=0,o=!1;const r=(0,s.Z)(n)&&n.enabled;r&&(n.update(e),i=n.clippingPlanesState),this._clippingPlanesState!==i&&(this._clippingPlanesState=i,o=!0);const a=this._styleDirty;this._styleDirty=!1,(o||a)&&function(e,t,n){const i=e._frames,o=i.length;for(let e=0;e<o;++e){const o=i[e];(0,s.Z)(o)&&(0,s.Z)(o.pointCloud)&&(o.pointCloud.clippingPlanesDirty=t,o.pointCloud.styleDirty=n)}}(this,o,a),N.timeSinceLoad=t,N.isClipped=r;const c=this.shading,l=this._pointCloudEyeDomeLighting,u=e.commandList,h=u.length;let f=this._previousInterval,p=this._nextInterval;const m=function(e){const t=e._intervals,n=e._clock.currentTime,i=t.indexOf(n);return t.get(i)}(this);if(!(0,s.Z)(m))return;let _=!1;const g=E(this),Z=0===g;g!==this._clockMultiplier&&(_=!0,this._clockMultiplier=g),(0,s.Z)(f)&&!Z||(f=m),(!(0,s.Z)(p)||_||function(e,t,n){const i=E(e),o=S(e,t),r=S(e,n);return i>=0?o>=r:o<=r}(this,m,p))&&(p=function(e,t){const n=e._intervals,i=e._clock,o=E(e);if(0===o)return;const r=e._getAverageLoadTime(),s=d.Z.addSeconds(i.currentTime,r*o,w);let a=n.indexOf(s);return a===S(e,t)&&(o>=0?++a:--a),n.get(a)}(this,m)),f=function(e,t,n,i,o){let r,s,a;const c=e._intervals,l=e._frames,u=S(e,n),d=S(e,t);if(u>=d){for(r=u;r>=d;--r)if(s=c.get(r),a=l[r],L(e,s,a,i,o))return s}else for(r=u;r<=d;++r)if(s=c.get(r),a=l[r],L(e,s,a,i,o))return s;return t}(this,f,m,N,e);let b=function(e,t){const n=S(e,t),i=e._frames[n];if((0,s.Z)(i)&&i.ready)return i}(this,f);(0,s.Z)(b)||(D(this,f,N,e),b=this._lastRenderedFrame),(0,s.Z)(b)&&P(this,b,N,e),(0,s.Z)(p)&&D(this,p,N,e);const v=this;(0,s.Z)(b)&&!(0,s.Z)(this._lastRenderedFrame)&&e.afterRender.push((function(){return v._resolveReadyPromise(v),!0})),(0,s.Z)(b)&&b!==this._lastRenderedFrame&&v.frameChanged.numberOfListeners>0&&e.afterRender.push((function(){return v.frameChanged.raiseEvent(v),!0})),this._previousInterval=f,this._nextInterval=p,this._lastRenderedFrame=b,this._totalMemoryUsageInBytes>1024*this.maximumMemoryUsage*1024&&O(this,function(e){return function(t){return t.touchedFrameNumber<e.frameNumber}}(e));const A=u.length-h;(0,s.Z)(c)&&c.attenuation&&c.eyeDomeLighting&&A>0&&l.update(e,h,c,this.boundingSphere)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return O(this),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),(0,a.Z)(this)};const M=v},951552:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const i={REINHARD:0,MODIFIED_REINHARD:1,FILMIC:2,ACES:3,validate:function(e){return e===i.REINHARD||e===i.MODIFIED_REINHARD||e===i.FILMIC||e===i.ACES}},o=Object.freeze(i)},886855:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(890828),o=n(35961),r=n(11020),s=n(722313),a=n(430886),c=n(598020),l=n(661679),u=n(12503),d=n(431056),h=n(545870),f=n(417148),p=n(497730),m=n(437530),_=n(609882),g=n(469585),Z=n(182029),y=n(973591),b=n(822948),v=n(489709);function A(e){this._drawClassificationFBO=new u.Z({createDepthAttachments:!1}),this._accumulationFBO=new u.Z({createDepthAttachments:!1}),this._packFBO=new u.Z,this._opaqueDepthStencilTexture=void 0,this._textureToComposite=void 0,this._translucentDepthStencilTexture=void 0,this._packDepthCommand=void 0,this._accumulateCommand=void 0,this._compositeCommand=void 0,this._copyCommand=void 0,this._clearColorCommand=new c.Z({color:new o.Z(0,0,0,0),owner:this}),this._clearDepthStencilCommand=new c.Z({depth:1,stencil:0,owner:this}),this._supported=e.depthTexture,this._viewport=new i.Z,this._rsDepth=void 0,this._rsAccumulate=void 0,this._rsComp=void 0,this._useScissorTest=void 0,this._scissorRectangle=void 0,this._hasTranslucentDepth=!1,this._frustumsDrawn=0}function T(e){e._textureToComposite=void 0,e._translucentDepthStencilTexture=e._translucentDepthStencilTexture&&!e._translucentDepthStencilTexture.isDestroyed()&&e._translucentDepthStencilTexture.destroy()}function w(e){e._drawClassificationFBO.destroy(),e._accumulationFBO.destroy(),e._packFBO.destroy()}Object.defineProperties(A.prototype,{hasTranslucentDepth:{get:function(){return this._hasTranslucentDepth}}}),A.prototype.executeTranslucentCommands=function(e,t,n,o,s){const c=o.length;let u,d;const A=e.frameState.useLogDepth,E=e.context,S=n.framebuffer;for(d=0;d<c;++d)if(u=o[d],u=A?u.derivedCommands.logDepth.command:u,u.depthForTranslucentClassification){this._hasTranslucentDepth=!0;break}if(this._hasTranslucentDepth){for(function(e,t,n,o){if(!e.isSupported())return;e._opaqueDepthStencilTexture=o;const s=e._opaqueDepthStencilTexture.width,c=e._opaqueDepthStencilTexture.height;let u,d;if(e._drawClassificationFBO.isDirty(s,c)&&(function(e,t,n,i){T(e),e._translucentDepthStencilTexture=new _.Z({context:t,width:n,height:i,pixelFormat:a.Z.DEPTH_STENCIL,pixelDatatype:h.Z.UNSIGNED_INT_24_8,sampler:p.Z.NEAREST})}(e,t,s,c),function(e,t,n,i){w(e),e._drawClassificationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._drawClassificationFBO.update(t,n,i),e._accumulationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._accumulationFBO.update(t,n,i),e._packFBO.update(t,n,i)}(e,t,s,c)),(0,r.Z)(e._packDepthCommand)||(u=new m.Z({sources:[g.Z]}),d={u_opaqueDepthTexture:function(){return e._opaqueDepthStencilTexture},u_translucentDepthTexture:function(){return e._translucentDepthStencilTexture}},e._packDepthCommand=t.createViewportQuadCommand(u,{uniformMap:d,owner:e})),!(0,r.Z)(e._compositeCommand)){u=new m.Z({sources:[Z.Z]}),d={colorTexture:function(){return e._textureToComposite}},e._compositeCommand=t.createViewportQuadCommand(u,{uniformMap:d,owner:e});const n=e._compositeCommand,i=n.shaderProgram,o=t.shaderCache.createDerivedShaderProgram(i,"pick",{vertexShaderSource:i.vertexShaderSource,fragmentShaderSource:new m.Z({sources:u.sources,defines:["PICK"]}),attributeLocations:i._attributeLocations}),r=l.Z.shallowClone(n);r.shaderProgram=o,n.derivedCommands.pick=r}(0,r.Z)(e._copyCommand)||(u=new m.Z({sources:[Z.Z]}),d={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._copyCommand=t.createViewportQuadCommand(u,{uniformMap:d,owner:e})),(0,r.Z)(e._accumulateCommand)||(u=new m.Z({sources:[Z.Z]}),d={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._accumulateCommand=t.createViewportQuadCommand(u,{uniformMap:d,owner:e})),e._viewport.width=s,e._viewport.height=c;const A=!i.Z.equals(e._viewport,n.viewport);let E=A!==e._useScissorTest;e._useScissorTest=A,i.Z.equals(e._scissorRectangle,n.viewport)||(e._scissorRectangle=i.Z.clone(n.viewport,e._scissorRectangle),E=!0),(0,r.Z)(e._rsDepth)&&i.Z.equals(e._viewport,e._rsDepth.viewport)&&!E||(e._rsDepth=f.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),(0,r.Z)(e._packDepthCommand)&&(e._packDepthCommand.renderState=e._rsDepth),(0,r.Z)(e._rsAccumulate)&&i.Z.equals(e._viewport,e._rsAccumulate.viewport)&&!E||(e._rsAccumulate=f.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:v.Z.EQUAL,reference:b.Z.CESIUM_3D_TILE_MASK}})),(0,r.Z)(e._accumulateCommand)&&(e._accumulateCommand.renderState=e._rsAccumulate),(0,r.Z)(e._rsComp)&&i.Z.equals(e._viewport,e._rsComp.viewport)&&!E||(e._rsComp=f.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:y.Z.ALPHA_BLEND})),(0,r.Z)(e._compositeCommand)&&(e._compositeCommand.renderState=e._rsComp,e._compositeCommand.derivedCommands.pick.renderState=e._rsComp)}(this,E,n,s),n.framebuffer=this._drawClassificationFBO.framebuffer,this._clearDepthStencilCommand.execute(E,n),d=0;d<c;++d)u=o[d],u=A?u.derivedCommands.logDepth.command:u,u.depthForTranslucentClassification&&t(u.derivedCommands.depth.depthOnlyCommand,e,E,n);this._frustumsDrawn+=this._hasTranslucentDepth?1:0,this._hasTranslucentDepth&&(n.framebuffer=this._packFBO.framebuffer,this._packDepthCommand.execute(E,n)),n.framebuffer=S}},A.prototype.executeClassificationCommands=function(e,t,n,i){if(!this._hasTranslucentDepth)return;const o=e.context,r=o.uniformState,s=n.framebuffer;2===this._frustumsDrawn&&(n.framebuffer=this._accumulationFBO.framebuffer,this._copyCommand.execute(o,n)),n.framebuffer=this._drawClassificationFBO.framebuffer,this._frustumsDrawn>1&&this._clearColorCommand.execute(o,n),r.updatePass(d.Z.CESIUM_3D_TILE_CLASSIFICATION);const a=r.globeDepthTexture;r.globeDepthTexture=this._packFBO.getColorTexture();const c=i.commands[d.Z.CESIUM_3D_TILE_CLASSIFICATION],l=i.indices[d.Z.CESIUM_3D_TILE_CLASSIFICATION];for(let i=0;i<l;++i)t(c[i],e,o,n);r.globeDepthTexture=a,n.framebuffer=s,1!==this._frustumsDrawn&&(n.framebuffer=this._accumulationFBO.framebuffer,this._accumulateCommand.execute(o,n),n.framebuffer=s)},A.prototype.execute=function(e,t){this._hasTranslucentDepth&&(1===this._frustumsDrawn?this._textureToComposite=this._drawClassificationFBO.getColorTexture():this._textureToComposite=this._accumulationFBO.getColorTexture(),(e.frameState.passes.pick?this._compositeCommand.derivedCommands.pick:this._compositeCommand).execute(e.context,t),function(e,t,n){if(!e._hasTranslucentDepth)return;const i=n.framebuffer;n.framebuffer=e._drawClassificationFBO.framebuffer,e._clearColorCommand.execute(t._context,n),n.framebuffer=i,e._frustumsDrawn>1&&(n.framebuffer=e._accumulationFBO.framebuffer,e._clearColorCommand.execute(t._context,n)),e._hasTranslucentDepth=!1,e._frustumsDrawn=0}(this,e,t))},A.prototype.isSupported=function(){return this._supported},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return T(this),w(this),(0,r.Z)(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),(0,r.Z)(this._packDepthCommand)&&(this._packDepthCommand.shaderProgram=this._packDepthCommand.shaderProgram&&this._packDepthCommand.shaderProgram.destroy()),(0,s.Z)(this)};const E=A},268295:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(823438),o=n(234146),r=n(11020),s=n(765153),a=n(942841),c=n(732292),l=n(104407),u=n(736194);function d(e,t,n,o,r,s,a,c,l,u){this._tweens=e,this._tweenjs=t,this._startObject=(0,i.Z)(n),this._stopObject=(0,i.Z)(o),this._duration=r,this._delay=s,this._easingFunction=a,this._update=c,this._complete=l,this.cancel=u,this.needsStart=!0}function h(){this._tweens=[]}Object.defineProperties(d.prototype,{startObject:{get:function(){return this._startObject}},stopObject:{get:function(){return this._stopObject}},duration:{get:function(){return this._duration}},delay:{get:function(){return this._delay}},easingFunction:{get:function(){return this._easingFunction}},update:{get:function(){return this._update}},complete:{get:function(){return this._complete}},tweenjs:{get:function(){return this._tweenjs}}}),d.prototype.cancelTween=function(){this._tweens.remove(this)},Object.defineProperties(h.prototype,{length:{get:function(){return this._tweens.length}}}),h.prototype.add=function(e){if(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),!(0,r.Z)(e.startObject)||!(0,r.Z)(e.stopObject))throw new s.Z("options.startObject and options.stopObject are required.");if(!(0,r.Z)(e.duration)||e.duration<0)throw new s.Z("options.duration is required and must be positive.");if(0===e.duration)return(0,r.Z)(e.complete)&&e.complete(),new d(this);const t=e.duration/l.Z.SECONDS_PER_MILLISECOND,n=(0,o.Z)(e.delay,0),c=n/l.Z.SECONDS_PER_MILLISECOND,h=(0,o.Z)(e.easingFunction,a.Z.LINEAR_NONE),f=e.startObject,p=new u.kX(f);p.to((0,i.Z)(e.stopObject),t),p.delay(c),p.easing(h),(0,r.Z)(e.update)&&p.onUpdate((function(){e.update(f)})),p.onComplete((0,o.Z)(e.complete,null)),p.repeat((0,o.Z)(e._repeat,0));const m=new d(this,p,e.startObject,e.stopObject,e.duration,n,h,e.update,e.complete,e.cancel);return this._tweens.push(m),m},h.prototype.addProperty=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).object,n=e.property,i=e.startValue,a=e.stopValue;if(!(0,r.Z)(t)||!(0,r.Z)(e.property))throw new s.Z("options.object and options.property are required.");if(!(0,r.Z)(t[n]))throw new s.Z("options.object must have the specified property.");if(!(0,r.Z)(i)||!(0,r.Z)(a))throw new s.Z("options.startValue and options.stopValue are required.");return this.add({startObject:{value:i},stopObject:{value:a},duration:(0,o.Z)(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:function(e){t[n]=e.value},complete:e.complete,cancel:e.cancel,_repeat:e._repeat})},h.prototype.addAlpha=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).material;if(!(0,r.Z)(t))throw new s.Z("options.material is required.");const n=[];for(const e in t.uniforms)t.uniforms.hasOwnProperty(e)&&(0,r.Z)(t.uniforms[e])&&(0,r.Z)(t.uniforms[e].alpha)&&n.push(e);if(0===n.length)throw new s.Z("material has no properties with alpha components.");return this.add({startObject:{alpha:(0,o.Z)(e.startValue,0)},stopObject:{alpha:(0,o.Z)(e.stopValue,1)},duration:(0,o.Z)(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:function(e){const i=n.length;for(let o=0;o<i;++o)t.uniforms[n[o]].alpha=e.alpha},complete:e.complete,cancel:e.cancel})},h.prototype.addOffsetIncrement=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).material;if(!(0,r.Z)(t))throw new s.Z("material is required.");if(!(0,r.Z)(t.uniforms.offset))throw new s.Z("material.uniforms must have an offset property.");const n=t.uniforms;return this.addProperty({object:n,property:"offset",startValue:n.offset,stopValue:n.offset+1,duration:e.duration,delay:e.delay,easingFunction:e.easingFunction,update:e.update,cancel:e.cancel,_repeat:1/0})},h.prototype.remove=function(e){if(!(0,r.Z)(e))return!1;const t=this._tweens.indexOf(e);return-1!==t&&(e.tweenjs.stop(),(0,r.Z)(e.cancel)&&e.cancel(),this._tweens.splice(t,1),!0)},h.prototype.removeAll=function(){const e=this._tweens;for(let t=0;t<e.length;++t){const n=e[t];n.tweenjs.stop(),(0,r.Z)(n.cancel)&&n.cancel()}e.length=0},h.prototype.contains=function(e){return(0,r.Z)(e)&&-1!==this._tweens.indexOf(e)},h.prototype.get=function(e){if(!(0,r.Z)(e))throw new s.Z("index is required.");return this._tweens[e]},h.prototype.update=function(e){const t=this._tweens;let n=0;for(e=(0,r.Z)(e)?e/l.Z.SECONDS_PER_MILLISECOND:(0,c.Z)();n<t.length;){const i=t[n],o=i.tweenjs;i.needsStart?(i.needsStart=!1,o.start(e)):o.update(e)?n++:(o.stop(),t.splice(n,1))}};const f=h},267428:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U});var i=n(405254),o=n(660904),r=n(532056),s=n(790087),a=n(394579),c=n(865029),l=n(234146),u=n(11020),d=n(906439),h=n(765153),f=n(282910),p=n(351047),m=n(344485),_=n(143450),g=n(205522),Z=n(931359),y=n(769426);const b=/{[^}]+}/g,v={x:function(e,t,n,i){return D(e,"{x}",t)},y:function(e,t,n,i){return D(e,"{y}",n)},z:function(e,t,n,i){return D(e,"{z}",i)},s:function(e,t,n,i){const o=(t+n+i)%e._subdomains.length;return e._subdomains[o]},reverseX:function(e,t,n,i){const o=e.tilingScheme.getNumberOfXTilesAtLevel(i)-t-1;return D(e,"{reverseX}",o)},reverseY:function(e,t,n,i){const o=e.tilingScheme.getNumberOfYTilesAtLevel(i)-n-1;return D(e,"{reverseY}",o)},reverseZ:function(e,t,n,i){const o=e.maximumLevel;return D(e,"{reverseZ}",(0,u.Z)(o)&&i<o?o-i-1:i)},westDegrees:function(e,t,n,i){return O(e,t,n,i),E.west},southDegrees:function(e,t,n,i){return O(e,t,n,i),E.south},eastDegrees:function(e,t,n,i){return O(e,t,n,i),E.east},northDegrees:function(e,t,n,i){return O(e,t,n,i),E.north},westProjected:function(e,t,n,i){return L(e,t,n,i),C.west},southProjected:function(e,t,n,i){return L(e,t,n,i),C.south},eastProjected:function(e,t,n,i){return L(e,t,n,i),C.east},northProjected:function(e,t,n,i){return L(e,t,n,i),C.north},width:function(e,t,n,i){return e.tileWidth},height:function(e,t,n,i){return e.tileHeight}},A=(0,a.Z)(v,{i:function(e,t,n,i,o,r,s){return R(e,t,n,i,o,r),I.x},j:function(e,t,n,i,o,r,s){return R(e,t,n,i,o,r),I.y},reverseI:function(e,t,n,i,o,r,s){return R(e,t,n,i,o,r),e.tileWidth-I.x-1},reverseJ:function(e,t,n,i,o,r,s){return R(e,t,n,i,o,r),e.tileHeight-I.y-1},longitudeDegrees:function(e,t,n,i,o,r,s){return m.Z.toDegrees(o)},latitudeDegrees:function(e,t,n,i,o,r,s){return m.Z.toDegrees(r)},longitudeProjected:function(e,t,n,i,o,r,s){return B(e,0,0,0,o,r),M.x},latitudeProjected:function(e,t,n,i,o,r,s){return B(e,0,0,0,o,r),M.y},format:function(e,t,n,i,o,r,s){return s}});function T(e){if(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT),this._errorEvent=new f.Z,(0,u.Z)(e.then))return void this._reinitialize(e);s.Z.defined("options.url",e.url);const t=g.Z.createIfNeeded(e.url),n=g.Z.createIfNeeded(e.pickFeaturesUrl);this._resource=t,this._urlSchemeZeroPadding=e.urlSchemeZeroPadding,this._getFeatureInfoFormats=e.getFeatureInfoFormats,this._pickFeaturesResource=n;let i=e.subdomains;i=Array.isArray(i)?i.slice():(0,u.Z)(i)&&i.length>0?i.split(""):["a","b","c"],this._subdomains=i,this._tileWidth=(0,l.Z)(e.tileWidth,256),this._tileHeight=(0,l.Z)(e.tileHeight,256),this._minimumLevel=(0,l.Z)(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._tilingScheme=(0,l.Z)(e.tilingScheme,new Z.Z({ellipsoid:e.ellipsoid})),this._rectangle=(0,l.Z)(e.rectangle,this._tilingScheme.rectangle),this._rectangle=_.Z.intersection(this._rectangle,this._tilingScheme.rectangle),this._tileDiscardPolicy=e.tileDiscardPolicy;let o=e.credit;"string"==typeof o&&(o=new c.Z(o)),this._credit=o,this._hasAlphaChannel=(0,l.Z)(e.hasAlphaChannel,!0);const r=e.customTags,d=(0,a.Z)(v,r),h=(0,a.Z)(A,r);this._tags=d,this._pickFeaturesTags=h,this._readyPromise=Promise.resolve(!0),this._ready=!0,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this.enablePickFeatures=(0,l.Z)(e.enablePickFeatures,!0)}Object.defineProperties(T.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.ready","UrlTemplateImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._ready&&(0,u.Z)(this._resource)}},readyPromise:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.readyPromise","UrlTemplateImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}},defaultAlpha:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultAlpha","UrlTemplateImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultAlpha","UrlTemplateImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultNightAlpha","UrlTemplateImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultNightAlpha","UrlTemplateImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultDayAlpha","UrlTemplateImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultDayAlpha","UrlTemplateImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultBrightness","UrlTemplateImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultBrightness","UrlTemplateImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultContrast","UrlTemplateImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultContrast","UrlTemplateImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultHue","UrlTemplateImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultHue","UrlTemplateImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultSaturation","UrlTemplateImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultSaturation","UrlTemplateImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultGamma","UrlTemplateImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultGamma","UrlTemplateImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultMinificationFilter","UrlTemplateImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultMinificationFilter","UrlTemplateImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,d.Z)("UrlTemplateImageryProvider.defaultMagnificationFilter","UrlTemplateImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,d.Z)("UrlTemplateImageryProvider.defaultMagnificationFilter","UrlTemplateImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),T.prototype.reinitialize=function(e){return(0,d.Z)("UrlTemplateImageryProvider.reinitialize","UrlTemplateImageryProvider.reinitialize was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._reinitialize(e)},T.prototype._reinitialize=function(e){const t=this;t._readyPromise=Promise.resolve(e).then((function(e){if(!(0,u.Z)(e))throw new h.Z("options is required.");if(!(0,u.Z)(e.url))throw new h.Z("options.url is required.");const n=e.customTags,i=(0,a.Z)(v,n),o=(0,a.Z)(A,n),r=g.Z.createIfNeeded(e.url),s=g.Z.createIfNeeded(e.pickFeaturesUrl);t.enablePickFeatures=(0,l.Z)(e.enablePickFeatures,t.enablePickFeatures),t._urlSchemeZeroPadding=(0,l.Z)(e.urlSchemeZeroPadding,t.urlSchemeZeroPadding),t._tileDiscardPolicy=e.tileDiscardPolicy,t._getFeatureInfoFormats=e.getFeatureInfoFormats,t._subdomains=e.subdomains,Array.isArray(t._subdomains)?t._subdomains=t._subdomains.slice():(0,u.Z)(t._subdomains)&&t._subdomains.length>0?t._subdomains=t._subdomains.split(""):t._subdomains=["a","b","c"],t._tileWidth=(0,l.Z)(e.tileWidth,256),t._tileHeight=(0,l.Z)(e.tileHeight,256),t._minimumLevel=(0,l.Z)(e.minimumLevel,0),t._maximumLevel=e.maximumLevel,t._tilingScheme=(0,l.Z)(e.tilingScheme,new Z.Z({ellipsoid:e.ellipsoid})),t._rectangle=(0,l.Z)(e.rectangle,t._tilingScheme.rectangle),t._rectangle=_.Z.intersection(t._rectangle,t._tilingScheme.rectangle),t._hasAlphaChannel=(0,l.Z)(e.hasAlphaChannel,!0);let d=e.credit;return"string"==typeof d&&(d=new c.Z(d)),t._credit=d,t._resource=r,t._tags=i,t._pickFeaturesResource=s,t._pickFeaturesTags=o,t._ready=!0,!0}))},T.prototype.getTileCredits=function(e,t,n){},T.prototype.requestImage=function(e,t,n,i){return y.Z.loadImage(this,function(e,t,n,i,o){w=!1,S=!1;const r=e._resource,s=r.getUrlComponent(!0),a=e._tags,c={},l=s.match(b);return(0,u.Z)(l)&&l.forEach((function(o){const r=o.substring(1,o.length-1);(0,u.Z)(a[r])&&(c[r]=a[r](e,t,n,i))})),r.getDerivedResource({request:o,templateValues:c})}(this,e,t,n,i))},T.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures||!(0,u.Z)(this._pickFeaturesResource)||0===this._getFeatureInfoFormats.length)return;let r=0;const s=this;function a(e,t){return e.callback(t)}return function c(){if(r>=s._getFeatureInfoFormats.length)return Promise.resolve([]);const l=s._getFeatureInfoFormats[r],d=function(e,t,n,i,o,r,s){w=!1,S=!1,x=!1,P=!1;const a=e._pickFeaturesResource,c=a.getUrlComponent(!0),l=e._pickFeaturesTags,d={},h=c.match(b);return(0,u.Z)(h)&&h.forEach((function(a){const c=a.substring(1,a.length-1);(0,u.Z)(l[c])&&(d[c]=l[c](e,t,n,i,o,r,s))})),a.getDerivedResource({templateValues:d})}(s,e,t,n,i,o,l.format);return++r,"json"===l.type?d.fetchJson().then(l.callback).catch(c):"xml"===l.type?d.fetchXML().then(l.callback).catch(c):"text"===l.type||"html"===l.type?d.fetchText().then(l.callback).catch(c):d.fetch({responseType:l.format}).then(a.bind(void 0,l)).catch(c)}()};let w=!1;const E=new _.Z;let S=!1;const C=new _.Z;let x=!1;const I=new i.Z;let P=!1;function D(e,t,n){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){const i=e.urlSchemeZeroPadding[t];if("string"==typeof i){const e=i.length;e>1&&(n=n.length>=e?n:new Array(e-n.toString().length+1).join("0")+n)}}return n}function O(e,t,n,i){w||(e.tilingScheme.tileXYToRectangle(t,n,i,E),E.west=m.Z.toDegrees(E.west),E.south=m.Z.toDegrees(E.south),E.east=m.Z.toDegrees(E.east),E.north=m.Z.toDegrees(E.north),w=!0)}function L(e,t,n,i){S||(e.tilingScheme.tileXYToNativeRectangle(t,n,i,C),S=!0)}const N=new _.Z,M=new o.Z;function R(e,t,n,i,o,r,s){if(x)return;B(e,0,0,0,o,r);const a=M,c=e.tilingScheme.tileXYToNativeRectangle(t,n,i,N);I.x=e.tileWidth*(a.x-c.west)/c.width|0,I.y=e.tileHeight*(c.north-a.y)/c.height|0,x=!0}const F=new r.Z;function B(e,t,n,i,o,r,s){if(!P){if(e.tilingScheme.projection instanceof p.Z)M.x=m.Z.toDegrees(o),M.y=m.Z.toDegrees(r);else{const t=F;t.longitude=o,t.latitude=r,e.tilingScheme.projection.project(t,M)}P=!0}}const U=T},579229:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=function(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}},529032:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var i=n(642336),o=n(405254),r=n(660904),s=n(35961),a=n(449809),c=n(234146),l=n(11020),u=n(722313),d=n(63354),h=n(95296),f=n(342209),p=n(237247),m=n(659635),_=n(143450),g=n(511267),Z=n(379593),y=n(915323),b=n(661679),v=n(431056),A=n(417148),T=n(161632),w=n(437530),E=n(858371),S=n(614435),C=n(509762),x=n(79768),I=n(973591),P=n(812693),D=n(203547),O=n(53839),L=n(822948),N=n(489709),M=n(721902),R=n(843955);function F(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=(0,c.Z)(e.ellipsoid,d.Z.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new o.Z(i.Z._defaultMinTerrainHeight,i.Z._defaultMaxTerrainHeight),this._boundingVolume=p.Z.fromRectangle(e.rectangle,i.Z._defaultMinTerrainHeight,i.Z._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=s.Z.clone(s.Z.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(F.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});const B=new g.Z("createVectorTileClampedPolylines"),U={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};const k=new m.Z,V=new r.Z;function H(e){return A.Z.fromCache({cull:{enabled:!0,face:O.Z.FRONT},blending:I.Z.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:N.Z.EQUAL,frontOperation:{fail:M.Z.KEEP,zFail:M.Z.KEEP,zPass:M.Z.KEEP},backFunction:N.Z.EQUAL,backOperation:{fail:M.Z.KEEP,zFail:M.Z.KEEP,zPass:M.Z.KEEP},reference:L.Z.CESIUM_3D_TILE_MASK,mask:L.Z.CESIUM_3D_TILE_MASK}})}F.prototype.getPositions=function(e){return R.Z.getPolylinePositions(this,e)},F.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new P.Z(e,i)}},F.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const z=new s.Z,G=s.Z.WHITE;F.prototype.applyStyle=function(e,t){if(!(0,l.Z)(e))return void function(e,t){const n=e._batchIds,i=n.length;for(let e=0;e<i;++e){const i=t[n[e]];i.show=!0,i.color=s.Z.WHITE}}(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=t[n[o]];i.color=(0,l.Z)(e.color)?e.color.evaluateColor(i,z):G,i.show=!(0,l.Z)(e.show)||e.show.evaluate(i)}},F.prototype.update=function(e){const t=e.context;if(!this._ready){if((0,l.Z)(this._promise)||(this._promise=(n=this,i.Z.initialize().then((function(){!function(e,t,n){const o=i.Z.getMinimumMaximumHeights(t,n),r=o.minimumTerrainHeight,s=o.maximumTerrainHeight,a=e._minimumMaximumVectorHeights;a.x=r,a.y=s;const c=e._boundingVolume,l=e._rectangle;p.Z.fromRectangle(l,r,s,n,c)}(n,n._rectangle,n._ellipsoid)})).catch((e=>{n.isDestroyed()||(n._error=e)}))).then(function(e,t){if((0,l.Z)(e._va))return;let n=e._positions,i=e._widths,o=e._counts,s=e._transferrableBatchIds,c=e._packedBuffer;(0,l.Z)(c)||(n=e._positions=n.slice(),i=e._widths=i.slice(),o=e._counts=o.slice(),s=e._transferrableBatchIds=e._batchIds.slice(),c=e._packedBuffer=function(e){const t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,s=e._center,a=2+_.Z.packedLength+d.Z.packedLength+r.Z.packedLength,c=new Float64Array(a);let l=0;return c[l++]=n,c[l++]=i,_.Z.pack(t,c,l),l+=_.Z.packedLength,d.Z.pack(o,c,l),l+=d.Z.packedLength,r.Z.pack(s,c,l),c}(e));const u=[n.buffer,i.buffer,o.buffer,s.buffer,c.buffer],h={positions:n.buffer,widths:i.buffer,counts:o.buffer,batchIds:s.buffer,packedBuffer:c.buffer,keepDecodedPositions:e._keepDecodedPositions},p=B.scheduleTask(h,u);return(0,l.Z)(p)?p.then((function(n){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(n.decodedPositions),e._decodedPositionOffsets=new Uint32Array(n.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(n.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(n.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(n.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(n.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(n.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(n.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(n.vertexBatchIds);const i=n.indexDatatype;e._indices=i===f.Z.UNSIGNED_SHORT?new Uint16Array(n.indices):new Uint32Array(n.indices),function(e,t){if(!(0,l.Z)(e._va)){const n=e._startEllipsoidNormals,i=e._endEllipsoidNormals,o=e._startPositionAndHeights,r=e._endPositionAndHeights,s=e._startFaceNormalAndVertexCornerIds,c=e._endFaceNormalAndHalfWidths,l=e._vertexBatchIds,u=e._indices;let d=n.byteLength+i.byteLength;d+=o.byteLength+r.byteLength,d+=s.byteLength+c.byteLength,d+=l.byteLength+u.byteLength,e._trianglesLength=u.length/3,e._geometryByteLength=d;const h=Z.Z.createVertexBuffer({context:t,typedArray:n,usage:y.Z.STATIC_DRAW}),p=Z.Z.createVertexBuffer({context:t,typedArray:i,usage:y.Z.STATIC_DRAW}),m=Z.Z.createVertexBuffer({context:t,typedArray:o,usage:y.Z.STATIC_DRAW}),_=Z.Z.createVertexBuffer({context:t,typedArray:r,usage:y.Z.STATIC_DRAW}),g=Z.Z.createVertexBuffer({context:t,typedArray:s,usage:y.Z.STATIC_DRAW}),b=Z.Z.createVertexBuffer({context:t,typedArray:c,usage:y.Z.STATIC_DRAW}),v=Z.Z.createVertexBuffer({context:t,typedArray:l,usage:y.Z.STATIC_DRAW}),A=Z.Z.createIndexBuffer({context:t,typedArray:u,usage:y.Z.STATIC_DRAW,indexDatatype:2===u.BYTES_PER_ELEMENT?f.Z.UNSIGNED_SHORT:f.Z.UNSIGNED_INT}),T=[{index:U.startEllipsoidNormal,vertexBuffer:h,componentDatatype:a.Z.FLOAT,componentsPerAttribute:3},{index:U.endEllipsoidNormal,vertexBuffer:p,componentDatatype:a.Z.FLOAT,componentsPerAttribute:3},{index:U.startPositionAndHeight,vertexBuffer:m,componentDatatype:a.Z.FLOAT,componentsPerAttribute:4},{index:U.endPositionAndHeight,vertexBuffer:_,componentDatatype:a.Z.FLOAT,componentsPerAttribute:4},{index:U.startFaceNormalAndVertexCorner,vertexBuffer:g,componentDatatype:a.Z.FLOAT,componentsPerAttribute:4},{index:U.endFaceNormalAndHalfWidth,vertexBuffer:b,componentDatatype:a.Z.FLOAT,componentsPerAttribute:4},{index:U.a_batchId,vertexBuffer:v,componentDatatype:a.Z.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new E.Z({context:t,attributes:T,indexBuffer:A}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}(e,t),e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)})):void 0}(this,t))),(0,l.Z)(this._error)){const e=this._error;throw this._error=void 0,e}return}var n,o;!function(e,t){(0,l.Z)(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const n=t.uniformState.view;return m.Z.clone(n,k),m.Z.multiplyByPoint(k,e._center,V),m.Z.setTranslation(k,V,k),k},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}(this,t),function(e,t){if((0,l.Z)(e._sp))return;const n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(C.Z),o=n.getFragmentShaderCallback(!1,void 0,!0)(x.Z),r=new w.Z({defines:["VECTOR_TILE",h.Z.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[S.Z,i]}),s=new w.Z({defines:["VECTOR_TILE"],sources:[o]});e._sp=T.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:U})}(this,t),o=this,(0,l.Z)(o._rs)||(o._rs=H(!1),o._rs3DTiles=H(!0));const s=e.passes;(s.render||s.pick)&&function(e,t){let n=e._command;if(!(0,l.Z)(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);n=e._command=new b.Z({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:v.Z.TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});const i=b.Z.shallowClone(n,n.derivedCommands.tileset);i.renderState=e._rs3DTiles,i.pass=v.Z.CESIUM_3D_TILE_CLASSIFICATION,n.derivedCommands.tileset=i}const i=e._classificationType;i!==D.Z.TERRAIN&&i!==D.Z.BOTH||t.commandList.push(n),i!==D.Z.CESIUM_3D_TILE&&i!==D.Z.BOTH||t.commandList.push(n.derivedCommands.tileset)}(this,e)},F.prototype.isDestroyed=function(){return!1},F.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),(0,u.Z)(this)};const j=F},142943:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(660904),o=n(234146),r=n(11020),s=n(906439),a=n(722313),c=n(765153),l=n(63354),u=n(911698),d=n(449809),h=n(344485),f=n(659635),p=n(143450),m=n(217066),_=n(533424),g=n(179869),Z=n(17202),y=n(659398),b=n(843955),v=n(529032),A=n(796712);function T(e,t,n,s,a){this._tileset=e,this._tile=t,this._resource=n,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,this._resolveContent=void 0,this._readyPromise=new Promise((e=>{this._resolveContent=e})),function(e,t,n){n=(0,o.Z)(n,0);const s=new Uint8Array(t),a=new DataView(t);n+=w;const c=a.getUint32(n,!0);if(1!==c)throw new m.Z(`Only Vector tile version 1 is supported.  Version ${c} is not.`);n+=w;const b=a.getUint32(n,!0);if(n+=w,0===b)return e._ready=!0,void e._resolveContent(e);const v=a.getUint32(n,!0);if(n+=w,0===v)throw new m.Z("Feature table must have a byte length greater than zero");const T=a.getUint32(n,!0);n+=w;const C=a.getUint32(n,!0);n+=w;const x=a.getUint32(n,!0);n+=w;const I=a.getUint32(n,!0);n+=w;const P=a.getUint32(n,!0);n+=w;const D=a.getUint32(n,!0);n+=w;const O=a.getUint32(n,!0);n+=w;const L=(0,u.Z)(s,n,v);n+=v;const N=new Uint8Array(t,n,T);let M,R;n+=T,C>0&&(M=(0,u.Z)(s,n,C),n+=C,x>0&&(R=new Uint8Array(t,n,x),R=new Uint8Array(R),n+=x));const F=(0,o.Z)(L.POLYGONS_LENGTH,0),B=(0,o.Z)(L.POLYLINES_LENGTH,0),U=(0,o.Z)(L.POINTS_LENGTH,0),k=F+B+U,V=new _.Z(e,k,M,R,function(e){return function(t,n){(0,r.Z)(e._polygons)&&e._polygons.updateCommands(t,n)}}(e));if(e._batchTable=V,0===k)return;const H=new g.Z(L,N),z=H.getGlobalProperty("REGION");if(!(0,r.Z)(z))throw new m.Z("Feature table global property: REGION must be defined");const G=p.Z.unpack(z),j=z[4],W=z[5],q=e._tile.computedTransform;let Y=H.getGlobalProperty("RTC_CENTER",d.Z.FLOAT,3);(0,r.Z)(Y)?(Y=i.Z.unpack(Y),f.Z.multiplyByPoint(q,Y,Y)):(Y=p.Z.center(G),Y.height=h.Z.lerp(j,W,.5),Y=l.Z.WGS84.cartographicToCartesian(Y));const X=function(e,t){let n,i,s,a;const c=(0,o.Z)(e.POLYGONS_LENGTH,0),l=(0,o.Z)(e.POLYLINES_LENGTH,0),u=(0,o.Z)(e.POINTS_LENGTH,0);if(c>0&&(0,r.Z)(e.POLYGON_BATCH_IDS)){const i=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,c)}if(l>0&&(0,r.Z)(e.POLYLINE_BATCH_IDS)){const n=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,l)}if(u>0&&(0,r.Z)(e.POINT_BATCH_IDS)){const n=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;s=new Uint16Array(t.buffer,n,u)}const d=(0,r.Z)(n)||(0,r.Z)(i)||(0,r.Z)(s),h=c>0&&!(0,r.Z)(n)||l>0&&!(0,r.Z)(i)||u>0&&!(0,r.Z)(s);if(d&&h)throw new m.Z("If one group of batch ids is defined, then all batch ids must be defined");if(!(0,r.Z)(n)&&!(0,r.Z)(i)&&!(0,r.Z)(s)){let e=0;if(!(0,r.Z)(n)&&c>0)for(n=new Uint16Array(c),a=0;a<c;++a)n[a]=e++;if(!(0,r.Z)(i)&&l>0)for(i=new Uint16Array(l),a=0;a<l;++a)i[a]=e++;if(!(0,r.Z)(s)&&u>0)for(s=new Uint16Array(u),a=0;a<u;++a)s[a]=e++}return{polygons:n,polylines:i,points:s}}(L,N);if(n+=(4-n%4)%4,F>0){H.featuresLength=F;const i=(0,o.Z)(H.getPropertyArray("POLYGON_COUNTS",d.Z.UNSIGNED_INT,1),H.getPropertyArray("POLYGON_COUNT",d.Z.UNSIGNED_INT,1));if(!(0,r.Z)(i))throw new m.Z("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const s=(0,o.Z)(H.getPropertyArray("POLYGON_INDEX_COUNTS",d.Z.UNSIGNED_INT,1),H.getPropertyArray("POLYGON_INDEX_COUNT",d.Z.UNSIGNED_INT,1));if(!(0,r.Z)(s))throw new m.Z("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const a=i.reduce((function(e,t){return e+2*t}),0),c=s.reduce((function(e,t){return e+t}),0),l=new Uint32Array(t,n,c);n+=I;const u=new Uint16Array(t,n,a);let h,f;n+=P,(0,r.Z)(L.POLYGON_MINIMUM_HEIGHTS)&&(0,r.Z)(L.POLYGON_MAXIMUM_HEIGHTS)&&(h=H.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",d.Z.FLOAT,1),f=H.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",d.Z.FLOAT,1)),e._polygons=new y.Z({positions:u,counts:i,indexCounts:s,indices:l,minimumHeight:j,maximumHeight:W,polygonMinimumHeights:h,polygonMaximumHeights:f,center:Y,rectangle:G,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:V,batchIds:X.polygons,modelMatrix:q})}if(B>0){H.featuresLength=B;const i=(0,o.Z)(H.getPropertyArray("POLYLINE_COUNTS",d.Z.UNSIGNED_INT,1),H.getPropertyArray("POLYLINE_COUNT",d.Z.UNSIGNED_INT,1));if(!(0,r.Z)(i))throw new m.Z("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");let s=H.getPropertyArray("POLYLINE_WIDTHS",d.Z.UNSIGNED_SHORT,1);if(!(0,r.Z)(s)){s=new Uint16Array(B);for(let e=0;e<B;++e)s[e]=2}const a=i.reduce((function(e,t){return e+3*t}),0),c=new Uint16Array(t,n,a);n+=D;const u=e._tileset,h=u.examineVectorLinesFunction;(0,r.Z)(h)&&function(e,t,n,i,o,r){const s=t.length;let a=0;for(let c=0;c<s;c++){const s=3*t[c],l=e.slice(a,a+s);a+=s,r(l,n[c],o,i)}}((0,A.Z)(new Uint16Array(c),G,j,W,l.Z.WGS84),i,X.polylines,V,e.url,h);let f=E;(0,r.Z)(u.classificationType)&&(f=S),e._polylines=f({positions:c,widths:s,counts:i,batchIds:X.polylines,minimumHeight:j,maximumHeight:W,center:Y,rectangle:G,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:V,classificationType:u.classificationType,keepDecodedPositions:u.vectorKeepDecodedPositions})}if(U>0){const i=new Uint16Array(t,n,3*U);n+=O,e._points=new Z.Z({positions:i,batchIds:X.points,minimumHeight:j,maximumHeight:W,rectangle:G,batchTable:V})}}(this,s,a)}Object.defineProperties(T.prototype,{featuresLength:{get:function(){return(0,r.Z)(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return(0,r.Z)(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){let e=0;return(0,r.Z)(this._polygons)&&(e+=this._polygons.trianglesLength),(0,r.Z)(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){let e=0;return(0,r.Z)(this._polygons)&&(e+=this._polygons.geometryByteLength),(0,r.Z)(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return(0,r.Z)(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return(0,r.Z)(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,s.Z)("Vector3DTileContent.readyPromise","Vector3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Vector3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const w=Uint32Array.BYTES_PER_ELEMENT;function E(e){return new b.Z(e)}function S(e){return new v.Z(e)}function C(e){const t=e.featuresLength;if(!(0,r.Z)(e._features)&&t>0){const n=new Array(t);(0,r.Z)(e._polygons)&&e._polygons.createFeatures(e,n),(0,r.Z)(e._polylines)&&e._polylines.createFeatures(e,n),(0,r.Z)(e._points)&&e._points.createFeatures(e,n),e._features=n}}T.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},T.prototype.getFeature=function(e){const t=this.featuresLength;if(!(0,r.Z)(e)||e<0||e>=t)throw new c.Z(`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return(0,r.Z)(this._features)||C(this),this._features[e]},T.prototype.applyDebugSettings=function(e,t){(0,r.Z)(this._polygons)&&this._polygons.applyDebugSettings(e,t),(0,r.Z)(this._polylines)&&this._polylines.applyDebugSettings(e,t),(0,r.Z)(this._points)&&this._points.applyDebugSettings(e,t)},T.prototype.applyStyle=function(e){(0,r.Z)(this._features)||C(this),(0,r.Z)(this._polygons)&&this._polygons.applyStyle(e,this._features),(0,r.Z)(this._polylines)&&this._polylines.applyStyle(e,this._features),(0,r.Z)(this._points)&&this._points.applyStyle(e,this._features)},T.prototype.update=function(e,t){let n=!0;(0,r.Z)(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),n=n&&this._polygons.ready),(0,r.Z)(this._polylines)&&(this._polylines.update(t),n=n&&this._polylines.ready),(0,r.Z)(this._points)&&(this._points.update(t),n=n&&this._points.ready),(0,r.Z)(this._batchTable)&&n&&((0,r.Z)(this._features)||C(this),this._batchTable.update(e,t),this._ready=!0,this._resolveContent(this))},T.prototype.getPolylinePositions=function(e){const t=this._polylines;if((0,r.Z)(t))return t.getPositions(e)},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,a.Z)(this)};const x=T},505368:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(762031),o=n(660904),r=n(35961),s=n(234146),a=n(11020),c=n(722313),l=n(659635),u=n(511267),d=n(203547),h=n(579229),f=n(193030);function p(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,(0,a.Z)(this._center)||((0,a.Z)(this._boundingVolume)?this._center=o.Z.clone(this._boundingVolume.center):this._center=o.Z.clone(o.Z.ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=d.Z.BOTH}Object.defineProperties(p.prototype,{trianglesLength:{get:function(){return(0,a.Z)(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return(0,a.Z)(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}}),p.packedBoxLength=l.Z.packedLength+o.Z.packedLength,p.packedCylinderLength=l.Z.packedLength+2,p.packedEllipsoidLength=l.Z.packedLength+o.Z.packedLength,p.packedSphereLength=o.Z.packedLength+1;const m=new u.Z("createVectorTileGeometries",5),_=new r.Z;p.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},p.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},p.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},p.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},p.prototype.update=function(e){if(this._ready)this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e);else if((0,a.Z)(this._promise)||(this._promise=function(e){if(!(0,a.Z)(e._primitive)&&!(0,a.Z)(e._verticesPromise)){let t=e._boxes,n=e._boxBatchIds,c=e._cylinders,u=e._cylinderBatchIds,d=e._ellipsoids,p=e._ellipsoidBatchIds,g=e._spheres,Z=e._sphereBatchIds,y=e._batchTableColors,b=e._packedBuffer;if(!(0,a.Z)(y)){let i=0;(0,a.Z)(e._boxes)&&(t=e._boxes=t.slice(),n=e._boxBatchIds=n.slice(),i+=n.length),(0,a.Z)(e._cylinders)&&(c=e._cylinders=c.slice(),u=e._cylinderBatchIds=u.slice(),i+=u.length),(0,a.Z)(e._ellipsoids)&&(d=e._ellipsoids=d.slice(),p=e._ellipsoidBatchIds=p.slice(),i+=p.length),(0,a.Z)(e._spheres)&&(g=e._sphere=g.slice(),Z=e._sphereBatchIds=Z.slice(),i+=Z.length),y=e._batchTableColors=new Uint32Array(i);const r=e._batchTable;for(let e=0;e<i;++e){const t=r.getColor(e,_);y[e]=t.toRgba()}b=e._packedBuffer=function(e){const t=new Float64Array(l.Z.packedLength+o.Z.packedLength);let n=0;return o.Z.pack(e._center,t,n),n+=o.Z.packedLength,l.Z.pack(e._modelMatrix,t,n),t}(e)}const v=[];(0,a.Z)(t)&&v.push(t.buffer,n.buffer),(0,a.Z)(c)&&v.push(c.buffer,u.buffer),(0,a.Z)(d)&&v.push(d.buffer,p.buffer),(0,a.Z)(g)&&v.push(g.buffer,Z.buffer),v.push(y.buffer,b.buffer);const A={boxes:(0,a.Z)(t)?t.buffer:void 0,boxBatchIds:(0,a.Z)(t)?n.buffer:void 0,cylinders:(0,a.Z)(c)?c.buffer:void 0,cylinderBatchIds:(0,a.Z)(c)?u.buffer:void 0,ellipsoids:(0,a.Z)(d)?d.buffer:void 0,ellipsoidBatchIds:(0,a.Z)(d)?p.buffer:void 0,spheres:(0,a.Z)(g)?g.buffer:void 0,sphereBatchIds:(0,a.Z)(g)?Z.buffer:void 0,batchTableColors:y.buffer,packedBuffer:b.buffer},T=e._verticesPromise=m.scheduleTask(A,v);if(!(0,a.Z)(T))return;return T.then((function(t){if(e.isDestroyed())return;const n=new Float64Array(t.packedBuffer),o=function(e,t){let n=0;const o=t[n++],s=t[n++],a=e._boundingVolumes=new Array(s);for(let e=0;e<s;++e)a[e]=i.Z.unpack(t,n),n+=i.Z.packedLength;const c=t[n++],l=e._batchedIndices=new Array(c);for(let e=0;e<c;++e){const i=r.Z.unpack(t,n);n+=r.Z.packedLength;const o=t[n++],s=t[n++],a=t[n++],c=new Array(a);for(let e=0;e<a;++e)c[e]=t[n++];l[e]=new h.Z({color:i,offset:o,count:s,batchIds:c})}return o}(e,n);e._indices=2===o?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._positions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds),e._batchIds=new Uint16Array(t.batchIds),function(e){(0,a.Z)(e._primitive)||(e._primitive=new f.Z({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:(0,s.Z)(e._pickObject,e)}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0)}(e),e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)}))}}(this)),(0,a.Z)(this._error)){const e=this._error;throw this._error=void 0,e}},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,c.Z)(this)};const g=p},17202:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(405254),o=n(660904),r=n(35961),s=n(11020),a=n(722313),c=n(6821),l=n(63354),u=n(485662),d=n(143450),h=n(511267),f=n(472568),p=n(867328),m=n(160629),_=n(185447),g=n(644001),Z=n(999604),y=n(218157);function b(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._billboardCollection=new f.Z({batchTable:e.batchTable}),this._labelCollection=new _.Z({batchTable:e.batchTable}),this._polylineCollection=new Z.Z,this._polylineCollection._useHighlightColor=!0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(b.prototype,{ready:{get:function(){return this._ready}},pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){return this._billboardCollection.textureAtlas.texture.sizeInBytes+this._labelCollection._textureAtlas.texture.sizeInBytes}}});const v=new h.Z("createVectorTilePoints",5),A=new o.Z;b.prototype.createFeatures=function(e,t){const n=this._billboardCollection,i=this._labelCollection,o=this._polylineCollection,r=this._batchIds,s=r.length;for(let a=0;a<s;++a){const s=r[a],c=n.get(a),l=i.get(a),u=o.get(a);t[s]=new p.Z(e,s,c,l,u)}},b.prototype.applyDebugSettings=function(e,t){e?(r.Z.clone(t,this._billboardCollection._highlightColor),r.Z.clone(t,this._labelCollection._highlightColor),r.Z.clone(t,this._polylineCollection._highlightColor)):(r.Z.clone(r.Z.WHITE,this._billboardCollection._highlightColor),r.Z.clone(r.Z.WHITE,this._labelCollection._highlightColor),r.Z.clone(r.Z.WHITE,this._polylineCollection._highlightColor))};const T=new r.Z,w=new r.Z,E=new r.Z,S=new r.Z,C=new r.Z,x=new r.Z,I=new u.Z,P=new u.Z,D=new c.Z;b.prototype.applyStyle=function(e,t){if(!(0,s.Z)(e))return void function(e,t){const n=e._batchIds,o=n.length;for(let e=0;e<o;++e){const o=t[n[e]];o.show=!0,o.pointSize=p.Z.defaultPointSize,o.color=p.Z.defaultColor,o.pointOutlineColor=p.Z.defaultPointOutlineColor,o.pointOutlineWidth=p.Z.defaultPointOutlineWidth,o.labelColor=r.Z.WHITE,o.labelOutlineColor=r.Z.WHITE,o.labelOutlineWidth=1,o.font="30px sans-serif",o.labelStyle=g.Z.FILL,o.labelText=void 0,o.backgroundColor=new r.Z(.165,.165,.165,.8),o.backgroundPadding=new i.Z(7,5),o.backgroundEnabled=!1,o.scaleByDistance=void 0,o.translucencyByDistance=void 0,o.distanceDisplayCondition=void 0,o.heightOffset=0,o.anchorLineEnabled=!1,o.anchorLineColor=r.Z.WHITE,o.image=void 0,o.disableDepthTestDistance=0,o.horizontalOrigin=m.Z.CENTER,o.verticalOrigin=y.Z.CENTER,o.labelHorizontalOrigin=m.Z.RIGHT,o.labelVerticalOrigin=y.Z.BASELINE}}(this,t);const n=this._batchIds,o=n.length;for(let i=0;i<o;++i){const o=t[n[i]];if((0,s.Z)(e.show)&&(o.show=e.show.evaluate(o)),(0,s.Z)(e.pointSize)&&(o.pointSize=e.pointSize.evaluate(o)),(0,s.Z)(e.color)&&(o.color=e.color.evaluateColor(o,T)),(0,s.Z)(e.pointOutlineColor)&&(o.pointOutlineColor=e.pointOutlineColor.evaluateColor(o,w)),(0,s.Z)(e.pointOutlineWidth)&&(o.pointOutlineWidth=e.pointOutlineWidth.evaluate(o)),(0,s.Z)(e.labelColor)&&(o.labelColor=e.labelColor.evaluateColor(o,E)),(0,s.Z)(e.labelOutlineColor)&&(o.labelOutlineColor=e.labelOutlineColor.evaluateColor(o,S)),(0,s.Z)(e.labelOutlineWidth)&&(o.labelOutlineWidth=e.labelOutlineWidth.evaluate(o)),(0,s.Z)(e.font)&&(o.font=e.font.evaluate(o)),(0,s.Z)(e.labelStyle)&&(o.labelStyle=e.labelStyle.evaluate(o)),(0,s.Z)(e.labelText)?o.labelText=e.labelText.evaluate(o):o.labelText=void 0,(0,s.Z)(e.backgroundColor)&&(o.backgroundColor=e.backgroundColor.evaluateColor(o,C)),(0,s.Z)(e.backgroundPadding)&&(o.backgroundPadding=e.backgroundPadding.evaluate(o)),(0,s.Z)(e.backgroundEnabled)&&(o.backgroundEnabled=e.backgroundEnabled.evaluate(o)),(0,s.Z)(e.scaleByDistance)){const t=e.scaleByDistance.evaluate(o);(0,s.Z)(t)?(I.near=t.x,I.nearValue=t.y,I.far=t.z,I.farValue=t.w,o.scaleByDistance=I):o.scaleByDistance=void 0}else o.scaleByDistance=void 0;if((0,s.Z)(e.translucencyByDistance)){const t=e.translucencyByDistance.evaluate(o);(0,s.Z)(t)?(P.near=t.x,P.nearValue=t.y,P.far=t.z,P.farValue=t.w,o.translucencyByDistance=P):o.translucencyByDistance=void 0}else o.translucencyByDistance=void 0;if((0,s.Z)(e.distanceDisplayCondition)){const t=e.distanceDisplayCondition.evaluate(o);(0,s.Z)(t)?(D.near=t.x,D.far=t.y,o.distanceDisplayCondition=D):o.distanceDisplayCondition=void 0}else o.distanceDisplayCondition=void 0;(0,s.Z)(e.heightOffset)&&(o.heightOffset=e.heightOffset.evaluate(o)),(0,s.Z)(e.anchorLineEnabled)&&(o.anchorLineEnabled=e.anchorLineEnabled.evaluate(o)),(0,s.Z)(e.anchorLineColor)&&(o.anchorLineColor=e.anchorLineColor.evaluateColor(o,x)),(0,s.Z)(e.image)?o.image=e.image.evaluate(o):o.image=void 0,(0,s.Z)(e.disableDepthTestDistance)&&(o.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(o)),(0,s.Z)(e.horizontalOrigin)&&(o.horizontalOrigin=e.horizontalOrigin.evaluate(o)),(0,s.Z)(e.verticalOrigin)&&(o.verticalOrigin=e.verticalOrigin.evaluate(o)),(0,s.Z)(e.labelHorizontalOrigin)&&(o.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(o)),(0,s.Z)(e.labelVerticalOrigin)&&(o.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(o))}},b.prototype.update=function(e){if(this._ready)this._polylineCollection.update(e),this._billboardCollection.update(e),this._labelCollection.update(e);else if((0,s.Z)(this._promise)||(this._promise=function(e,t){let n=e._positions,i=e._packedBuffer;(0,s.Z)(i)||(n=e._positions=n.slice(),e._batchIds=e._batchIds.slice(),i=e._packedBuffer=function(e,t){const n=e._rectangle,i=e._minHeight,o=e._maxHeight,r=2+d.Z.packedLength+l.Z.packedLength,s=new Float64Array(r);let a=0;return s[a++]=i,s[a++]=o,d.Z.pack(n,s,a),a+=d.Z.packedLength,l.Z.pack(t,s,a),s}(e,t));const r=[n.buffer,i.buffer],a={positions:n.buffer,packedBuffer:i.buffer},c=v.scheduleTask(a,r);if((0,s.Z)(c))return c.then((t=>{if(e.isDestroyed())return;e._positions=new Float64Array(t.positions);const i=e._billboardCollection,r=e._labelCollection,s=e._polylineCollection;n=e._positions;const a=e._batchIds,c=n.length/3;for(let e=0;e<c;++e){const t=a[e],c=o.Z.unpack(n,3*e,A),l=i.add();l.position=c,l._batchIndex=t;const u=r.add();u.text=" ",u.position=c,u._batchIndex=t,s.add().positions=[o.Z.clone(c),o.Z.clone(c)]}e._positions=void 0,e._packedBuffer=void 0,e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)}))}(this,e.mapProjection.ellipsoid)),(0,s.Z)(this._error)){const e=this._error;throw this._error=void 0,e}},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),(0,a.Z)(this)};const O=b},659398:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(660904),o=n(35961),r=n(234146),s=n(11020),a=n(722313),c=n(63354),l=n(342209),u=n(237247),d=n(143450),h=n(511267),f=n(203547),p=n(579229),m=n(193030);function _(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=(0,r.Z)(e.ellipsoid,c.Z.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=(0,r.Z)(e.center,i.Z.ZERO),this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=f.Z.BOTH}Object.defineProperties(_.prototype,{trianglesLength:{get:function(){return(0,s.Z)(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return(0,s.Z)(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}});const g=new h.Z("createVectorTilePolygons",5),Z=new o.Z;_.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},_.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},_.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},_.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},_.prototype.update=function(e){if(this._ready)this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e);else if((0,s.Z)(this._promise)||(this._promise=function(e){if((0,s.Z)(e._primitive))return;let t=e._positions,n=e._counts,r=e._indexCounts,a=e._indices,h=e._transferrableBatchIds,f=e._batchTableColors,_=e._packedBuffer;if(!(0,s.Z)(f)){t=e._positions=e._positions.slice(),n=e._counts=e._counts.slice(),r=e._indexCounts=e._indexCounts.slice(),a=e._indices=e._indices.slice(),e._center=e._ellipsoid.cartographicToCartesian(d.Z.center(e._rectangle)),h=e._transferrableBatchIds=new Uint32Array(e._batchIds),f=e._batchTableColors=new Uint32Array(h.length);const o=e._batchTable,s=f.length;for(let e=0;e<s;++e){const t=o.getColor(e,Z);f[e]=t.toRgba()}_=e._packedBuffer=function(e){const t=new Float64Array(3+i.Z.packedLength+c.Z.packedLength+d.Z.packedLength);let n=0;return t[n++]=e._indices.BYTES_PER_ELEMENT,t[n++]=e._minimumHeight,t[n++]=e._maximumHeight,i.Z.pack(e._center,t,n),n+=i.Z.packedLength,c.Z.pack(e._ellipsoid,t,n),n+=c.Z.packedLength,d.Z.pack(e._rectangle,t,n),t}(e)}const y=[t.buffer,n.buffer,r.buffer,a.buffer,h.buffer,f.buffer,_.buffer],b={packedBuffer:_.buffer,positions:t.buffer,counts:n.buffer,indexCounts:r.buffer,indices:a.buffer,batchIds:h.buffer,batchTableColors:f.buffer};let v=e._polygonMinimumHeights,A=e._polygonMaximumHeights;(0,s.Z)(v)&&(0,s.Z)(A)&&(v=v.slice(),A=A.slice(),y.push(v.buffer,A.buffer),b.minimumHeights=v,b.maximumHeights=A);const T=g.scheduleTask(b,y);return(0,s.Z)(T)?T.then((t=>{if(e.isDestroyed())return;e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;const n=new Float64Array(t.packedBuffer),i=n[0];!function(e,t){let n=1;const i=t[n++],r=e._boundingVolumes=new Array(i);for(let e=0;e<i;++e)r[e]=u.Z.unpack(t,n),n+=u.Z.packedLength;const s=t[n++],a=e._batchedIndices=new Array(s);for(let e=0;e<s;++e){const i=o.Z.unpack(t,n);n+=o.Z.packedLength;const r=t[n++],s=t[n++],c=t[n++],l=new Array(c);for(let e=0;e<c;++e)l[e]=t[n++];a[e]=new p.Z({color:i,offset:r,count:s,batchIds:l})}}(e,n),e._indices=2===l.Z.getSizeInBytes(i)?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._batchedPositions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.batchIds),function(e){(0,s.Z)(e._primitive)||(e._primitive=new m.Z({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0)}(e),e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)})):void 0}(this)),(0,s.Z)(this._error)){const e=this._error;throw this._error=void 0,e}},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,a.Z)(this)};const y=_},843955:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var i=n(660904),o=n(35961),r=n(449809),s=n(234146),a=n(11020),c=n(722313),l=n(63354),u=n(95296),d=n(342209),h=n(659635),f=n(143450),p=n(511267),m=n(379593),_=n(915323),g=n(661679),Z=n(431056),y=n(417148),b=n(161632),v=n(437530),A=n(858371),T=n(614435),w=n(132052),E=n(973591),S=n(812693);function C(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=(0,s.Z)(e.ellipsoid,l.Z.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=o.Z.clone(o.Z.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(C.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});const x=new p.Z("createVectorTilePolylines",5),I={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};const P=new h.Z,D=new i.Z;C.getPolylinePositions=function(e,t){const n=e._batchIds,i=e._decodedPositions,o=e._decodedPositionOffsets;if(!(0,a.Z)(n)||!(0,a.Z)(i))return;let r,s;const c=n.length;let l=0,u=0;for(r=0;r<c;++r)n[r]===t&&(l+=o[r+1]-o[r]);if(0===l)return;const d=new Float64Array(3*l);for(r=0;r<c;++r)if(n[r]===t){const e=o[r],t=o[r+1]-e;for(s=0;s<t;++s){const t=3*(e+s);d[u++]=i[t],d[u++]=i[t+1],d[u++]=i[t+2]}}return d},C.prototype.getPositions=function(e){return C.getPolylinePositions(this,e)},C.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new S.Z(e,i)}},C.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const O=new o.Z,L=o.Z.WHITE;C.prototype.applyStyle=function(e,t){if(!(0,a.Z)(e))return void function(e,t){const n=e._batchIds,i=n.length;for(let e=0;e<i;++e){const i=t[n[e]];i.show=!0,i.color=o.Z.WHITE}}(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=t[n[o]];i.color=(0,a.Z)(e.color)?e.color.evaluateColor(i,O):L,i.show=!(0,a.Z)(e.show)||e.show.evaluate(i)}},C.prototype.update=function(e){const t=e.context;if(!this._ready){if((0,a.Z)(this._promise)||(this._promise=function(e,t){if((0,a.Z)(e._va))return;let n=e._positions,o=e._widths,s=e._counts,c=e._transferrableBatchIds,u=e._packedBuffer;(0,a.Z)(u)||(n=e._positions=n.slice(),o=e._widths=o.slice(),s=e._counts=s.slice(),c=e._transferrableBatchIds=e._batchIds.slice(),u=e._packedBuffer=function(e){const t=e._rectangle,n=e._minimumHeight,o=e._maximumHeight,r=e._ellipsoid,s=e._center,a=2+f.Z.packedLength+l.Z.packedLength+i.Z.packedLength,c=new Float64Array(a);let u=0;return c[u++]=n,c[u++]=o,f.Z.pack(t,c,u),u+=f.Z.packedLength,l.Z.pack(r,c,u),u+=l.Z.packedLength,i.Z.pack(s,c,u),c}(e));const h=[n.buffer,o.buffer,s.buffer,c.buffer,u.buffer],p={positions:n.buffer,widths:o.buffer,counts:s.buffer,batchIds:c.buffer,packedBuffer:u.buffer,keepDecodedPositions:e._keepDecodedPositions},g=x.scheduleTask(p,h);return(0,a.Z)(g)?g.then((function(n){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(n.decodedPositions),e._decodedPositionOffsets=new Uint32Array(n.decodedPositionOffsets)),e._currentPositions=new Float32Array(n.currentPositions),e._previousPositions=new Float32Array(n.previousPositions),e._nextPositions=new Float32Array(n.nextPositions),e._expandAndWidth=new Float32Array(n.expandAndWidth),e._vertexBatchIds=new Uint16Array(n.batchIds);const i=n.indexDatatype;e._indices=i===d.Z.UNSIGNED_SHORT?new Uint16Array(n.indices):new Uint32Array(n.indices),function(e,t){if(!(0,a.Z)(e._va)){const n=e._currentPositions,i=e._previousPositions,o=e._nextPositions,s=e._expandAndWidth,a=e._vertexBatchIds,c=e._indices;let l=i.byteLength+n.byteLength+o.byteLength;l+=s.byteLength+a.byteLength+c.byteLength,e._trianglesLength=c.length/3,e._geometryByteLength=l;const u=m.Z.createVertexBuffer({context:t,typedArray:i,usage:_.Z.STATIC_DRAW}),h=m.Z.createVertexBuffer({context:t,typedArray:n,usage:_.Z.STATIC_DRAW}),f=m.Z.createVertexBuffer({context:t,typedArray:o,usage:_.Z.STATIC_DRAW}),p=m.Z.createVertexBuffer({context:t,typedArray:s,usage:_.Z.STATIC_DRAW}),g=m.Z.createVertexBuffer({context:t,typedArray:a,usage:_.Z.STATIC_DRAW}),Z=m.Z.createIndexBuffer({context:t,typedArray:c,usage:_.Z.STATIC_DRAW,indexDatatype:2===c.BYTES_PER_ELEMENT?d.Z.UNSIGNED_SHORT:d.Z.UNSIGNED_INT}),y=[{index:I.previousPosition,vertexBuffer:u,componentDatatype:r.Z.FLOAT,componentsPerAttribute:3},{index:I.currentPosition,vertexBuffer:h,componentDatatype:r.Z.FLOAT,componentsPerAttribute:3},{index:I.nextPosition,vertexBuffer:f,componentDatatype:r.Z.FLOAT,componentsPerAttribute:3},{index:I.expandAndWidth,vertexBuffer:p,componentDatatype:r.Z.FLOAT,componentsPerAttribute:2},{index:I.a_batchId,vertexBuffer:g,componentDatatype:r.Z.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new A.Z({context:t,attributes:y,indexBuffer:Z}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}(e,t),e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)})):void 0}(this,t)),(0,a.Z)(this._error)){const e=this._error;throw this._error=void 0,e}return}var n;!function(e,t){(0,a.Z)(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const n=t.uniformState.view;return h.Z.clone(n,P),h.Z.multiplyByPoint(P,e._center,D),h.Z.setTranslation(P,D,P),P},u_highlightColor:function(){return e._highlightColor}})}(this,t),function(e,t){if((0,a.Z)(e._sp))return;const n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(w.Z),o=n.getFragmentShaderCallback(!1,void 0,!1)("uniform vec4 u_highlightColor; \nvoid main()\n{\n    out_FragColor = u_highlightColor;\n}\n"),r=new v.Z({defines:["VECTOR_TILE",u.Z.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[T.Z,i]}),s=new v.Z({defines:["VECTOR_TILE"],sources:[o]});e._sp=b.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:I})}(this,t),n=this,(0,a.Z)(n._rs)||(n._rs=y.Z.fromCache({blending:E.Z.ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:{enabled:!0,factor:-5,units:-5}}));const o=e.passes;(o.render||o.pick)&&function(e,t){if(!(0,a.Z)(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new g.Z({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:Z.Z.TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}(this,e)},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),(0,c.Z)(this)};const N=C},193030:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var i=n(660904),o=n(35961),r=n(449809),s=n(234146),a=n(11020),c=n(722313),l=n(342209),u=n(659635),d=n(804868),h=n(379593),f=n(915323),p=n(661679),m=n(431056),_=n(417148),g=n(161632),Z=n(437530),y=n(858371),b=n(112042),v=n(456060),A=n(973591),T=n(812693),w=n(203547),E=n(800640),S=n(237646),C=n(822948),x=n(489709),I=n(721902),P=n(579229);function D(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=(0,s.Z)(e.center,i.Z.ZERO),this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=o.Z.clone(o.Z.WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=(0,s.Z)(e.classificationType,w.Z.BOTH),this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};const t=this._batchIds.length;for(let e=0;e<t;++e){const t=this._batchIds[e];this._batchIdLookUp[t]=e}}Object.defineProperties(D.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});const O={position:0,a_batchId:1};function L(e){const t=e?x.Z.EQUAL:x.Z.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:I.Z.KEEP,zFail:I.Z.DECREMENT_WRAP,zPass:I.Z.KEEP},backFunction:t,backOperation:{fail:I.Z.KEEP,zFail:I.Z.INCREMENT_WRAP,zPass:I.Z.KEEP},reference:C.Z.CESIUM_3D_TILE_MASK,mask:C.Z.CESIUM_3D_TILE_MASK},stencilMask:C.Z.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:E.Z.LESS_OR_EQUAL},depthMask:!1}}const N={stencilTest:{enabled:!0,frontFunction:x.Z.NOT_EQUAL,frontOperation:{fail:I.Z.ZERO,zFail:I.Z.ZERO,zPass:I.Z.ZERO},backFunction:x.Z.NOT_EQUAL,backOperation:{fail:I.Z.ZERO,zFail:I.Z.ZERO,zPass:I.Z.ZERO},reference:0,mask:C.Z.CLASSIFICATION_MASK},stencilMask:C.Z.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:A.Z.PRE_MULTIPLIED_ALPHA_BLEND},M={stencilTest:{enabled:!0,frontFunction:x.Z.NOT_EQUAL,frontOperation:{fail:I.Z.ZERO,zFail:I.Z.ZERO,zPass:I.Z.ZERO},backFunction:x.Z.NOT_EQUAL,backOperation:{fail:I.Z.ZERO,zFail:I.Z.ZERO,zPass:I.Z.ZERO},reference:0,mask:C.Z.CLASSIFICATION_MASK},stencilMask:C.Z.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},R=new u.Z,F=new i.Z;function B(e,t,n,i,o,r,s){const a=e.constructor.BYTES_PER_ELEMENT,c=r.length;for(let l=0;l<c;++l){const c=s[r[l]],u=i[c],d=o[c],h=new e.constructor(e.buffer,a*u,d);t.set(h,n),i[c]=n,n+=d}return n}function U(e,t,n,i,o,r,s){const a=e.bytesPerIndex,c=r.length;for(let l=0;l<c;++l){const c=s[r[l]],u=i[c],d=o[c];t.copyFromBuffer(e,u*a,n*a,d*a),i[c]=n,n+=d}return n}function k(e,t){return t.color.toRgba()-e.color.toRgba()}D.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new T.Z(e,i)}},D.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const V=new o.Z,H=o.Z.WHITE,z=/\$/;function G(e,t,n,i){const o=e.classificationType,r=o!==w.Z.CESIUM_3D_TILE,s=o!==w.Z.TERRAIN,c=t.commandList;let l,u,d=n.length;for(u=0;u<d;++u)r&&(l=n[u],l.pass=m.Z.TERRAIN_CLASSIFICATION,c.push(l)),s&&(l=n[u].derivedCommands.tileset,l.pass=m.Z.CESIUM_3D_TILE_CLASSIFICATION,c.push(l));if(t.invertClassification&&(0,a.Z)(i))for(d=i.length,u=0;u<d;++u)c.push(i[u])}D.prototype.applyStyle=function(e,t){if(!(0,a.Z)(e))return void function(e,t){e._updatingAllCommands=!0;const n=e._batchIds;let i,r=n.length;for(i=0;i<r;++i){const e=t[n[i]];e.show=!0,e.color=o.Z.WHITE}const s=e._batchedIndices;for(r=s.length,i=0;i<r;++i)s[i].color=o.Z.clone(o.Z.WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}(this,t);const n=e.color,i=n instanceof S.Z&&!z.test(n.expression);this._updatingAllCommands=i;const r=this._batchIds;let s,c=r.length;for(s=0;s<c;++s){const n=t[r[s]];n.color=(0,a.Z)(e.color)?e.color.evaluateColor(n,V):H,n.show=!(0,a.Z)(e.show)||e.show.evaluate(n)}if(i){const e=this._batchedIndices;for(c=e.length,s=0;s<c;++s)e[s].color=o.Z.clone(o.Z.WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}},D.prototype.updateCommands=function(e,t){if(this._updatingAllCommands)return;const n=this._batchIdLookUp,i=n[e];if(!(0,a.Z)(i))return;const r=this._indexOffsets,s=this._indexCounts,c=r[i],l=s[i],u=this._batchedIndices,d=u.length;let h;for(h=0;h<d;++h){const e=u[h].offset,t=u[h].count;if(c>=e&&c<e+t)break}u.push(new P.Z({color:o.Z.clone(t),offset:c,count:l,batchIds:[e]}));const f=[],p=[],m=u[h].batchIds,_=m.length;for(let t=0;t<_;++t){const i=m[t];i!==e&&(r[n[i]]<c?f.push(i):p.push(i))}0!==p.length&&u.push(new P.Z({color:o.Z.clone(u[h].color),offset:c+l,count:u[h].offset+u[h].count-(c+l),batchIds:p})),0!==f.length?(u[h].count=c-u[h].offset,u[h].batchIds=f):u.splice(h,1),this._batchDirty=!0},D.prototype.update=function(e){const t=e.context;var n;!function(e,t){if((0,a.Z)(e._va))return;const n=h.Z.createVertexBuffer({context:t,typedArray:e._positions,usage:f.Z.STATIC_DRAW}),i=h.Z.createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:f.Z.STATIC_DRAW}),o=h.Z.createIndexBuffer({context:t,typedArray:e._indices,usage:f.Z.DYNAMIC_DRAW,indexDatatype:2===e._indices.BYTES_PER_ELEMENT?l.Z.UNSIGNED_SHORT:l.Z.UNSIGNED_INT}),s=[{index:0,vertexBuffer:n,componentDatatype:r.Z.fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:i,componentDatatype:r.Z.fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new y.Z({context:t,attributes:s,indexBuffer:o}),t.webgl2&&(e._vaSwap=new y.Z({context:t,attributes:s,indexBuffer:h.Z.createIndexBuffer({context:t,sizeInBytes:o.sizeInBytes,usage:f.Z.DYNAMIC_DRAW,indexDatatype:o.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0}(this,t),function(e,t){if((0,a.Z)(e._sp))return;const n=e._batchTable,i=(0,s.Z)(e._attributeLocations,O);let o=e._pickId;const r=e._vertexShaderSource;let c=e._fragmentShaderSource;if((0,a.Z)(r))return e._sp=g.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:i}),e._spStencil=e._sp,c=Z.Z.replaceMain(c,"czm_non_pick_main"),c=`${c}void main() \n{ \n    czm_non_pick_main(); \n    out_FragColor = ${o}; \n} \n`,void(e._spPick=g.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:i}));const l=n.getVertexShaderCallback(!1,"a_batchId",void 0)(v.Z);let u=n.getFragmentShaderCallback(!1,void 0,!0)(b.Z);o=n.getPickId();let d=new Z.Z({sources:[l]}),h=new Z.Z({defines:["VECTOR_TILE"],sources:[u]});e._sp=g.Z.fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:i}),d=new Z.Z({sources:[v.Z]}),h=new Z.Z({defines:["VECTOR_TILE"],sources:[b.Z]}),e._spStencil=g.Z.fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:i}),u=Z.Z.replaceMain(u,"czm_non_pick_main"),u=`${u}\nvoid main() \n{ \n    czm_non_pick_main(); \n    out_FragColor = ${o}; \n} \n`;const f=new Z.Z({sources:[l]}),p=new Z.Z({defines:["VECTOR_TILE"],sources:[u]});e._spPick=g.Z.fromCache({context:t,vertexShaderSource:f,fragmentShaderSource:p,attributeLocations:i})}(this,t),n=this,(0,a.Z)(n._rsStencilDepthPass)||(n._rsStencilDepthPass=_.Z.fromCache(L(!1)),n._rsStencilDepthPass3DTiles=_.Z.fromCache(L(!0)),n._rsColorPass=_.Z.fromCache(N),n._rsPickPass=_.Z.fromCache(M)),function(e,t){if((0,a.Z)(e._uniformMap))return;const n={u_modifiedModelViewProjection:function(){const n=t.uniformState.view,i=t.uniformState.projection;return u.Z.clone(n,R),u.Z.multiplyByPoint(R,e._center,F),u.Z.setTranslation(R,F,R),u.Z.multiply(i,R,R),R},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(n)}(this,t);const i=e.passes;i.render&&(function(e,t){const n=function(e,t){if(!e._batchDirty)return!1;const n=e._batchedIndices,i=n.length;let r=!1;const s={};for(let e=0;e<i;++e){const t=n[e].color.toRgba();if((0,a.Z)(s[t])){r=!0;break}s[t]=!0}return r?r&&!e.forceRebatch&&e._framesSinceLastRebatch<120?void++e._framesSinceLastRebatch:(n.sort(k),t.webgl2?function(e,t){const n=e._indexOffsets,i=e._indexCounts,r=e._batchIdLookUp;let s=t.pop();const a=[s],c=e._va.indexBuffer,l=e._vaSwap.indexBuffer;let u=U(c,l,0,n,i,s.batchIds,r);for(s.offset=0,s.count=u;t.length>0;){const e=t.pop();if(o.Z.equals(e.color,s.color))u=U(c,l,u,n,i,e.batchIds,r),s.batchIds=s.batchIds.concat(e.batchIds),s.count=u-s.offset;else{const t=u;u=U(c,l,u,n,i,e.batchIds,r),e.offset=t,e.count=u-t,a.push(e),s=e}}const d=e._va;e._va=e._vaSwap,e._vaSwap=d,e._batchedIndices=a}(e,n):function(e,t){const n=e._indices,i=e._indexOffsets,r=e._indexCounts,s=e._batchIdLookUp,a=new n.constructor(n.length);let c=t.pop();const l=[c];let u=B(n,a,0,i,r,c.batchIds,s);for(c.offset=0,c.count=u;t.length>0;){const e=t.pop();if(o.Z.equals(e.color,c.color))u=B(n,a,u,i,r,e.batchIds,s),c.batchIds=c.batchIds.concat(e.batchIds),c.count=u-c.offset;else{const t=u;u=B(n,a,u,i,r,e.batchIds,s),e.offset=t,e.count=u-t,l.push(e),c=e}}e._va.indexBuffer.copyFromArrayView(a),e._indices=a,e._batchedIndices=l}(e,n),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0):(e._batchDirty=!1,!1)}(e,t),i=e._commands,r=e._batchedIndices,c=r.length,l=2*c;if((0,a.Z)(i)&&!n&&i.length===l)return;i.length=l;const d=e._va,h=e._sp,f=(0,s.Z)(e._modelMatrix,u.Z.IDENTITY),_=e._uniformMap,g=e._boundingVolume;for(let t=0;t<c;++t){const n=r[t].offset,o=r[t].count;let s=i[2*t];(0,a.Z)(s)||(s=i[2*t]=new p.Z({owner:e})),s.vertexArray=d,s.modelMatrix=f,s.offset=n,s.count=o,s.renderState=e._rsStencilDepthPass,s.shaderProgram=h,s.uniformMap=_,s.boundingVolume=g,s.cull=!1,s.pass=m.Z.TERRAIN_CLASSIFICATION;const c=p.Z.shallowClone(s,s.derivedCommands.tileset);c.renderState=e._rsStencilDepthPass3DTiles,c.pass=m.Z.CESIUM_3D_TILE_CLASSIFICATION,s.derivedCommands.tileset=c;let l=i[2*t+1];(0,a.Z)(l)||(l=i[2*t+1]=new p.Z({owner:e})),l.vertexArray=d,l.modelMatrix=f,l.offset=n,l.count=o,l.renderState=e._rsColorPass,l.shaderProgram=h,l.uniformMap=_,l.boundingVolume=g,l.cull=!1,l.pass=m.Z.TERRAIN_CLASSIFICATION;const u=p.Z.shallowClone(l,l.derivedCommands.tileset);u.pass=m.Z.CESIUM_3D_TILE_CLASSIFICATION,l.derivedCommands.tileset=u}e._commandsDirty=!0}(this,t),function(e,t){if(e.classificationType===w.Z.TERRAIN||!t.invertClassification||(0,a.Z)(e._commandsIgnoreShow)&&!e._commandsDirty)return;const n=e._commands,i=e._commandsIgnoreShow,o=e._spStencil,r=n.length,s=i.length=r/2;let c=0;for(let e=0;e<s;++e){const t=i[e]=p.Z.shallowClone(n[c],i[e]);t.shaderProgram=o,t.pass=m.Z.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,c+=2}e._commandsDirty=!1}(this,e),function(e){let t,n,i=e.debugWireframe===e._debugWireframe;if(i=i&&!(e.debugWireframe&&e._wireframeDirty),i)return;(0,a.Z)(e._rsWireframe)||(e._rsWireframe=_.Z.fromCache({})),e.debugWireframe?(t=e._rsWireframe,n=d.Z.LINES):(t=e._rsColorPass,n=d.Z.TRIANGLES);const o=e._commands,r=o.length;for(let e=0;e<r;e+=2){const i=o[e+1];i.renderState=t,i.primitiveType=n}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}(this),this._debugWireframe?function(e,t){const n=e.commandList,i=t.length;for(let e=0;e<i;e+=2){const i=t[e+1];i.pass=m.Z.OPAQUE,n.push(i)}}(e,this._commands):G(this,e,this._commands,this._commandsIgnoreShow)),i.pick&&(function(e){if(!e._pickCommandsDirty)return;const t=e._indexOffsets.length,n=e._pickCommands;n.length=2*t;const i=e._va,o=e._spStencil,r=e._spPick,c=(0,s.Z)(e._modelMatrix,u.Z.IDENTITY),l=e._uniformMap;for(let s=0;s<t;++s){const t=e._indexOffsets[s],u=e._indexCounts[s],d=(0,a.Z)(e._boundingVolumes)?e._boundingVolumes[s]:e.boundingVolume;let h=n[2*s];(0,a.Z)(h)||(h=n[2*s]=new p.Z({owner:e,pickOnly:!0})),h.vertexArray=i,h.modelMatrix=c,h.offset=t,h.count=u,h.renderState=e._rsStencilDepthPass,h.shaderProgram=o,h.uniformMap=l,h.boundingVolume=d,h.pass=m.Z.TERRAIN_CLASSIFICATION;const f=p.Z.shallowClone(h,h.derivedCommands.tileset);f.renderState=e._rsStencilDepthPass3DTiles,f.pass=m.Z.CESIUM_3D_TILE_CLASSIFICATION,h.derivedCommands.tileset=f;let _=n[2*s+1];(0,a.Z)(_)||(_=n[2*s+1]=new p.Z({owner:e,pickOnly:!0})),_.vertexArray=i,_.modelMatrix=c,_.offset=t,_.count=u,_.renderState=e._rsPickPass,_.shaderProgram=r,_.uniformMap=l,_.boundingVolume=d,_.pass=m.Z.TERRAIN_CLASSIFICATION;const g=p.Z.shallowClone(_,_.derivedCommands.tileset);g.pass=m.Z.CESIUM_3D_TILE_CLASSIFICATION,_.derivedCommands.tileset=g}e._pickCommandsDirty=!1}(this),G(this,e,this._pickCommands))},D.prototype.isDestroyed=function(){return!1},D.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),(0,c.Z)(this)};const j=D},677684:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(790087),o=n(11020),r=n(765153);const s={POSITION:"POSITION",NORMAL:"NORMAL",TANGENT:"TANGENT",TEXCOORD:"TEXCOORD",COLOR:"COLOR",JOINTS:"JOINTS",WEIGHTS:"WEIGHTS",FEATURE_ID:"_FEATURE_ID",hasSetIndex:function(e){switch(i.Z.typeOf.string("semantic",e),e){case s.POSITION:case s.NORMAL:case s.TANGENT:return!1;case s.TEXCOORD:case s.COLOR:case s.JOINTS:case s.WEIGHTS:case s.FEATURE_ID:return!0;default:throw new r.Z("semantic is not a valid value.")}},fromGltfSemantic:function(e){i.Z.typeOf.string("gltfSemantic",e);let t=e;const n=/^(\w+)_\d+$/.exec(e);switch(null!==n&&(t=n[1]),t){case"POSITION":return s.POSITION;case"NORMAL":return s.NORMAL;case"TANGENT":return s.TANGENT;case"TEXCOORD":return s.TEXCOORD;case"COLOR":return s.COLOR;case"JOINTS":return s.JOINTS;case"WEIGHTS":return s.WEIGHTS;case"_FEATURE_ID":return s.FEATURE_ID}},fromPntsSemantic:function(e){switch(i.Z.typeOf.string("pntsSemantic",e),e){case"POSITION":case"POSITION_QUANTIZED":return s.POSITION;case"RGBA":case"RGB":case"RGB565":return s.COLOR;case"NORMAL":case"NORMAL_OCT16P":return s.NORMAL;case"BATCH_ID":return s.FEATURE_ID;default:throw new r.Z("pntsSemantic is not a valid value.")}},getGlslType:function(e){switch(i.Z.typeOf.string("semantic",e),e){case s.POSITION:case s.NORMAL:case s.TANGENT:return"vec3";case s.TEXCOORD:return"vec2";case s.COLOR:return"vec4";case s.JOINTS:return"ivec4";case s.WEIGHTS:return"vec4";case s.FEATURE_ID:return"int";default:throw new r.Z("semantic is not a valid value.")}},getVariableName:function(e,t){i.Z.typeOf.string("semantic",e);let n=function(e){switch(e){case s.POSITION:return"positionMC";case s.NORMAL:return"normalMC";case s.TANGENT:return"tangentMC";case s.TEXCOORD:return"texCoord";case s.COLOR:return"color";case s.JOINTS:return"joints";case s.WEIGHTS:return"weights";case s.FEATURE_ID:return"featureId";default:throw new r.Z("semantic is not a valid value.")}}(e);return(0,o.Z)(t)&&(n+=`_${t}`),n}},a=Object.freeze(s)},720813:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(890828),o=n(660904),r=n(737400),s=n(11020),a=n(732292),c=n(774852),l=n(344485),u=n(659635),d=n(598020),h=n(431056),f=n(708800),p=n(518931),m=n(482787),_=n(166570),g=n(761288),Z=n(578990),y=n(536464),b=n(656506),v=n(17993),A=n(714233),T=n(878354),w=n(886855);function E(){this.command=void 0,this.near=void 0,this.far=void 0}function S(e,t,n){const o=e.context;let r,s;o.depthTexture&&(r=new _.Z),e._useOIT&&o.depthTexture&&(s=new Z.Z(o));const a=new f.Z(o);a.viewport=i.Z.clone(n),this.camera=t,this._cameraClone=p.Z.clone(t),this._cameraStartFired=!1,this._cameraMovedTime=void 0,this.viewport=n,this.passState=a,this.pickFramebuffer=new b.Z(o),this.pickDepthFramebuffer=new y.Z,this.sceneFramebuffer=new v.Z,this.globeDepth=r,this.globeTranslucencyFramebuffer=new g.Z,this.oit=s,this.translucentTileClassification=new w.Z(o),this.pickDepths=[],this.frustumCommandsList=[],this.debugFrustumStatistics=void 0,this._commandExtents=[]}const C=new o.Z,x=new o.Z;function I(e,t,n,i,o){t.debugShowFrustums&&(n.debugOverlappingFrustums=0);const r=e.frustumCommandsList,a=r.length;for(let e=0;e<a;++e){const s=r[e],a=s.near;if(i>s.far)continue;if(o<a)break;const c=n.pass,l=s.indices[c]++;if(s.commands[c][l]=n,t.debugShowFrustums&&(n.debugOverlappingFrustums|=1<<e),n.executeInClosestFrustum)break}if(t.debugShowFrustums){const t=e.debugFrustumStatistics.commandsInFrustums;t[n.debugOverlappingFrustums]=(0,s.Z)(t[n.debugOverlappingFrustums])?t[n.debugOverlappingFrustums]+1:1,++e.debugFrustumStatistics.totalCommands}t.updateDerivedCommands(n)}S.prototype.checkForCameraUpdates=function(e){const t=this.camera,n=this._cameraClone;return function(e,t,n){const i=1/Math.max(1,function(e,t){const n=Math.max(Math.abs(e.x),Math.abs(t.x)),i=Math.max(Math.abs(e.y),Math.abs(t.y)),o=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.max(Math.max(n,i),o)}(e.position,t.position));return o.Z.multiplyByScalar(e.position,i,C),o.Z.multiplyByScalar(t.position,i,x),o.Z.equalsEpsilon(C,x,n)&&o.Z.equalsEpsilon(e.direction,t.direction,n)&&o.Z.equalsEpsilon(e.up,t.up,n)&&o.Z.equalsEpsilon(e.right,t.right,n)&&u.Z.equalsEpsilon(e.transform,t.transform,n)&&e.frustum.equalsEpsilon(t.frustum,n)}(t,n,l.Z.EPSILON15)?(this._cameraStartFired&&(0,a.Z)()-this._cameraMovedTime>e.cameraEventWaitTime&&(t.moveEnd.raiseEvent(),this._cameraStartFired=!1),!1):(this._cameraStartFired||(t.moveStart.raiseEvent(),this._cameraStartFired=!0),this._cameraMovedTime=(0,a.Z)(),p.Z.clone(t,n),!0)};const P=new r.Z,D=new c.Z;S.prototype.createPotentiallyVisibleSet=function(e){const t=e.frameState,n=t.camera,i=n.directionWC,o=n.positionWC,r=e._computeCommandList,a=e._overlayCommandList,c=t.commandList;e.debugShowFrustums&&(this.debugFrustumStatistics={totalCommands:0,commandsInFrustums:{}});const u=this.frustumCommandsList,f=u.length,p=h.Z.NUMBER_OF_PASSES;for(let e=0;e<f;++e)for(let t=0;t<p;++t)u[e].indices[t]=0;r.length=0,a.length=0;const _=this._commandExtents,g=_.length;let Z=0,y=+Number.MAX_VALUE,b=-Number.MAX_VALUE;const v=t.shadowState.shadowsEnabled;let w=+Number.MAX_VALUE,S=-Number.MAX_VALUE,C=Number.MAX_VALUE;const x=t.mode===A.Z.SCENE3D?t.occluder:void 0;let O=t.cullingVolume;const L=P.planes;for(let e=0;e<5;++e)L[e]=O.planes[e];O=P;const N=c.length;for(let t=0;t<N;++t){const l=c[t],u=l.pass;if(u===h.Z.COMPUTE)r.push(l);else if(u===h.Z.OVERLAY)a.push(l);else{let t,r;const a=l.boundingVolume;if((0,s.Z)(a)){if(!e.isVisible(l,O,x))continue;const n=a.computePlaneDistances(o,i,D);if(t=n.start,r=n.stop,y=Math.min(y,t),b=Math.max(b,r),v&&l.receiveShadows&&t<T.Z.MAXIMUM_DISTANCE&&!(u===h.Z.GLOBE&&t<-100&&r>100)){const e=r-t;u!==h.Z.GLOBE&&t<100&&(C=Math.min(C,e)),w=Math.min(w,t),S=Math.max(S,r)}}else l instanceof d.Z?(t=n.frustum.near,r=n.frustum.far):(t=n.frustum.near,r=n.frustum.far,y=Math.min(y,t),b=Math.max(b,r));let c=_[Z];(0,s.Z)(c)||(c=_[Z]=new E),c.command=l,c.near=t,c.far=r,Z++}}let M,R;for(v&&(w=Math.min(Math.max(w,n.frustum.near),n.frustum.far),S=Math.max(Math.min(S,n.frustum.far),w)),v&&(t.shadowState.nearPlane=w,t.shadowState.farPlane=S,t.shadowState.closestObjectSize=C),function(e,t,n,i){const o=t.frameState,r=o.camera,a=o.useLogDepth?t.logarithmicDepthFarToNearRatio:t.farToNearRatio,c=t.mode===A.Z.SCENE2D,u=t.nearToFarDistance2D;let d;i*=1+l.Z.EPSILON2,n=Math.min(Math.max(n,r.frustum.near),r.frustum.far),i=Math.max(Math.min(i,r.frustum.far),n),c?(i=Math.min(i,r.position.z+t.nearToFarDistance2D),n=Math.min(n,i),d=Math.ceil(Math.max(1,i-n)/t.nearToFarDistance2D)):d=Math.ceil(Math.log(i/n)/Math.log(a));const h=e.frustumCommandsList;h.length=d;for(let e=0;e<d;++e){let t,o;c?(t=Math.min(i-u,n+e*u),o=Math.min(i,t+u)):(t=Math.max(n,Math.pow(a,e)*n),o=Math.min(i,a*t));let r=h[e];(0,s.Z)(r)?(r.near=t,r.far=o):r=h[e]=new m.Z(t,o)}}(this,e,y,b),M=0;M<Z;M++)R=_[M],I(this,e,R.command,R.near,R.far);if(Z<g)for(M=Z;M<g&&(R=_[M],(0,s.Z)(R.command));M++)R.command=void 0;const F=u.length,B=t.frustumSplits;B.length=F+1;for(let e=0;e<F;++e)B[e]=u[e].near,e===F-1&&(B[e+1]=u[e].far)},S.prototype.destroy=function(){let e;this.pickFramebuffer=this.pickFramebuffer&&this.pickFramebuffer.destroy(),this.pickDepthFramebuffer=this.pickDepthFramebuffer&&this.pickDepthFramebuffer.destroy(),this.sceneFramebuffer=this.sceneFramebuffer&&this.sceneFramebuffer.destroy(),this.globeDepth=this.globeDepth&&this.globeDepth.destroy(),this.oit=this.oit&&this.oit.destroy(),this.translucentTileClassification=this.translucentTileClassification&&this.translucentTileClassification.destroy(),this.globeTranslucencyFramebuffer=this.globeTranslucencyFramebuffer&&this.globeTranslucencyFramebuffer.destroy();const t=this.pickDepths,n=t.length;for(e=0;e<n;++e)t[e].destroy()};const O=S},711241:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(762031),o=n(660904),r=n(344485),s=n(790087),a=n(664288),c=n(659635),l=n(237247),u=n(234146);function d(){this.orientedBoundingBox=new l.Z,this.boundingSphere=new i.Z,this.boundTransform=new c.Z,this.shapeTransform=new c.Z,this._minBounds=o.Z.clone(d.DefaultMinBounds,new o.Z),this._maxBounds=o.Z.clone(d.DefaultMaxBounds,new o.Z),this.shaderUniforms={renderMinBounds:new o.Z,renderMaxBounds:new o.Z,boxUvToShapeUvScale:new o.Z,boxUvToShapeUvTranslate:new o.Z},this.shaderDefines={BOX_INTERSECTION_INDEX:void 0,BOX_HAS_SHAPE_BOUNDS:void 0},this.shaderMaximumIntersectionsLength=0}const h=new o.Z,f=new o.Z,p=new a.Z,m=new o.Z,_=new o.Z,g=new o.Z,Z=new o.Z,y=c.Z.fromRotationTranslation(a.Z.fromUniformScale(.5,new a.Z),new o.Z(.5,.5,.5),new c.Z);d.prototype.update=function(e,t,n,r,a){r=(0,u.Z)(r,d.DefaultMinBounds),a=(0,u.Z)(a,d.DefaultMaxBounds),s.Z.typeOf.object("modelMatrix",e),s.Z.typeOf.object("minBounds",t),s.Z.typeOf.object("maxBounds",n);const l=d.DefaultMinBounds,h=d.DefaultMaxBounds;t=this._minBounds=o.Z.clamp(t,l,h,this._minBounds),n=this._maxBounds=o.Z.clamp(n,l,h,this._maxBounds),r=o.Z.clamp(r,l,h,m),a=o.Z.clamp(a,l,h,_);const p=o.Z.clamp(t,r,a,g),b=o.Z.clamp(n,r,a,Z),v=c.Z.getScale(e,f);if(p.x>b.x||p.y>b.y||p.z>b.z||(p.x===b.x)+(p.y===b.y)+(p.z===b.z)>=2||r.x>a.x||r.y>a.y||r.z>a.z||0===v.x||0===v.y||0===v.z)return!1;this.shapeTransform=c.Z.clone(e,this.shapeTransform),this.orientedBoundingBox=A(p,b,this.shapeTransform,this.orientedBoundingBox),this.boundTransform=c.Z.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=i.Z.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const{shaderUniforms:T,shaderDefines:w}=this;for(const e in w)w.hasOwnProperty(e)&&(w[e]=void 0);const E=!o.Z.equals(t,l)||!o.Z.equals(n,h);let S=0;if(w.BOX_INTERSECTION_INDEX=S,S+=1,T.renderMinBounds=c.Z.multiplyByPoint(y,p,T.renderMinBounds),T.renderMaxBounds=c.Z.multiplyByPoint(y,b,T.renderMaxBounds),E){w.BOX_HAS_SHAPE_BOUNDS=!0;const e=t,i=n;T.boxUvToShapeUvScale=o.Z.fromElements(2/(e.x===i.x?1:i.x-e.x),2/(e.y===i.y?1:i.y-e.y),2/(e.z===i.z?1:i.z-e.z),T.boxUvToShapeUvScale),T.boxUvToShapeUvTranslate=o.Z.fromElements(-T.boxUvToShapeUvScale.x*(.5*e.x+.5),-T.boxUvToShapeUvScale.y*(.5*e.y+.5),-T.boxUvToShapeUvScale.z*(.5*e.z+.5),T.boxUvToShapeUvTranslate)}return this.shaderMaximumIntersectionsLength=S,!0};const b=new o.Z,v=new o.Z;function A(e,t,n,i){const r=d.DefaultMinBounds,s=d.DefaultMaxBounds;if(o.Z.equals(e,r)&&o.Z.equals(t,s))i.center=c.Z.getTranslation(n,i.center),i.halfAxes=c.Z.getMatrix3(n,i.halfAxes);else{let r=c.Z.getScale(n,f);const s=o.Z.midpoint(e,t,h);i.center=c.Z.multiplyByPoint(n,s,i.center),r=o.Z.fromElements(.5*r.x*(t.x-e.x),.5*r.y*(t.y-e.y),.5*r.z*(t.z-e.z),f);const l=c.Z.getRotation(n,p);i.halfAxes=a.Z.setScale(l,r,i.halfAxes)}return i}d.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,a){s.Z.typeOf.number("tileLevel",e),s.Z.typeOf.number("tileX",t),s.Z.typeOf.number("tileY",n),s.Z.typeOf.number("tileZ",i),s.Z.typeOf.object("result",a);const c=this._minBounds,l=this._maxBounds,u=1/Math.pow(2,e);return A(o.Z.fromElements(r.Z.lerp(c.x,l.x,u*t),r.Z.lerp(c.y,l.y,u*n),r.Z.lerp(c.z,l.z,u*i),b),o.Z.fromElements(r.Z.lerp(c.x,l.x,u*(t+1)),r.Z.lerp(c.y,l.y,u*(n+1)),r.Z.lerp(c.z,l.z,u*(i+1)),v),this.shapeTransform,a)},d.prototype.computeApproximateStepSize=function(e){return s.Z.typeOf.object("dimensions",e),1/o.Z.maximumComponent(e)},d.DefaultMinBounds=Object.freeze(new o.Z(-1,-1,-1)),d.DefaultMaxBounds=Object.freeze(new o.Z(1,1,1));const T=d},483077:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var i=n(234146),o=n(762031),r=n(405254),s=n(660904),a=n(790087),c=n(344485),l=n(664288),u=n(659635),d=n(237247),h=n(798336);function f(){this.orientedBoundingBox=new d.Z,this.boundingSphere=new o.Z,this.boundTransform=new u.Z,this.shapeTransform=new u.Z,this._minimumRadius=f.DefaultMinBounds.x,this._maximumRadius=f.DefaultMaxBounds.x,this._minimumHeight=f.DefaultMinBounds.y,this._maximumHeight=f.DefaultMaxBounds.y,this._minimumAngle=f.DefaultMinBounds.z,this._maximumAngle=f.DefaultMaxBounds.z,this.shaderUniforms={cylinderUvToRenderBoundsScale:new s.Z,cylinderUvToRenderBoundsTranslate:new s.Z,cylinderUvToRenderRadiusMin:0,cylinderRenderAngleMinMax:new r.Z,cylinderUvToShapeUvRadius:new r.Z,cylinderUvToShapeUvHeight:new r.Z,cylinderUvToShapeUvAngle:new r.Z,cylinderShapeUvAngleMinMax:new r.Z,cylinderShapeUvAngleRangeZeroMid:0},this.shaderDefines={CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN:void 0,CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX:void 0,CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT:void 0,CYLINDER_HAS_RENDER_BOUNDS_HEIGHT:void 0,CYLINDER_HAS_RENDER_BOUNDS_HEIGHT_FLAT:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_HALF:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF:void 0,CYLINDER_HAS_SHAPE_BOUNDS_RADIUS:void 0,CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT:void 0,CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT:void 0,CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED:void 0,CYLINDER_INTERSECTION_INDEX_RADIUS_MAX:void 0,CYLINDER_INTERSECTION_INDEX_RADIUS_MIN:void 0,CYLINDER_INTERSECTION_INDEX_ANGLE:void 0},this.shaderMaximumIntersectionsLength=0}const p=new s.Z,m=new s.Z,_=new s.Z,g=new l.Z,Z=new u.Z,y=new u.Z,b=u.Z.fromRotationTranslation(l.Z.fromUniformScale(2,new l.Z),new s.Z(-1,-1,-1),new u.Z);f.prototype.update=function(e,t,n,d,h){d=(0,i.Z)(d,f.DefaultMinBounds),h=(0,i.Z)(h,f.DefaultMaxBounds),a.Z.typeOf.object("modelMatrix",e),a.Z.typeOf.object("minBounds",t),a.Z.typeOf.object("maxBounds",n);const v=f.DefaultMinBounds.x,A=f.DefaultMaxBounds.x,T=f.DefaultMinBounds.y,w=f.DefaultMaxBounds.y,E=f.DefaultMinBounds.z,S=f.DefaultMaxBounds.z,C=S-E,x=.5*C,I=c.Z.EPSILON10,P=c.Z.EPSILON3,D=c.Z.EPSILON10,O=c.Z.clamp(t.x,v,A),L=c.Z.clamp(n.x,v,A),N=c.Z.clamp(d.x,v,A),M=c.Z.clamp(h.x,v,A),R=Math.max(O,N),B=Math.min(L,M),U=c.Z.clamp(t.y,T,w),k=c.Z.clamp(n.y,T,w),V=c.Z.clamp(d.y,T,w),H=c.Z.clamp(h.y,T,w),z=Math.max(U,V),G=Math.min(k,H),j=c.Z.negativePiToPi(t.z),W=c.Z.negativePiToPi(n.z),q=c.Z.negativePiToPi(d.z),Y=c.Z.negativePiToPi(h.z),X=Math.max(j,q),J=Math.min(W,Y),Q=u.Z.getScale(e,p);if(0===B||R>B||z>G||c.Z.equalsEpsilon(Q.x,0,void 0,I)||c.Z.equalsEpsilon(Q.y,0,void 0,I)||c.Z.equalsEpsilon(Q.z,0,void 0,I))return!1;this._minimumRadius=O,this._maximumRadius=L,this._minimumHeight=U,this._maximumHeight=k,this._minimumAngle=j,this._maximumAngle=W,this.shapeTransform=u.Z.clone(e,this.shapeTransform),this.orientedBoundingBox=F(R,B,z,G,X,J,this.shapeTransform,this.orientedBoundingBox),this.boundTransform=u.Z.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=o.Z.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const $=O===v&&L===A,K=U===T&&k===w,ee=W<j,te=W-j+ee*C,ne=te<=D,ie=te>x+D&&te<C-D||te>D&&te<x-D||te>=x-D&&te<=x+D||ne,oe=c.Z.equalsEpsilon(j,E,void 0,P),re=c.Z.equalsEpsilon(W,S,void 0,P),se=B===A,ae=R===v,ce=z===T&&G===w,le=J-X+(J<X)*C,ue=le>x+D&&le<C-D,de=le>D&&le<x-D,he=le>=x-D&&le<=x+D,fe=le<=D,pe=ue||de||he||fe,me=this.shaderUniforms,_e=this.shaderDefines;for(const e in _e)_e.hasOwnProperty(e)&&(_e[e]=void 0);let ge=0;if(_e.CYLINDER_INTERSECTION_INDEX_RADIUS_MAX=ge,ge+=1,ae||(_e.CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN=!0,_e.CYLINDER_INTERSECTION_INDEX_RADIUS_MIN=ge,ge+=1,me.cylinderUvToRenderRadiusMin=B/R),se||(_e.CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX=!0),R===B&&(_e.CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT=!0),ce||(_e.CYLINDER_HAS_RENDER_BOUNDS_HEIGHT=!0),z===G&&(_e.CYLINDER_HAS_RENDER_BOUNDS_HEIGHT_FLAT=!0),U===k&&(_e.CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT=!0),O===L&&(_e.CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT=!0),!$){_e.CYLINDER_HAS_SHAPE_BOUNDS_RADIUS=!0;const e=1/(L-O),t=O/(O-L);me.cylinderUvToShapeUvRadius=r.Z.fromElements(e,t,me.cylinderUvToShapeUvRadius)}if(!K){_e.CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT=!0;const e=2/(k-U),t=(U+1)/(U-k);me.cylinderUvToShapeUvHeight=r.Z.fromElements(e,t,me.cylinderUvToShapeUvHeight)}if(!se||!ce){const e=.5*(G-z),t=s.Z.fromElements(1/B,1/B,1/(0===e?1:e),_),n=s.Z.fromElements(0,0,.5*-t.z*(z+G),m),i=u.Z.fromRotationTranslation(l.Z.fromScale(t,g),n,Z),o=u.Z.multiplyTransformation(i,b,y);me.cylinderUvToRenderBoundsScale=u.Z.getScale(o,me.cylinderUvToRenderBoundsScale),me.cylinderUvToRenderBoundsTranslate=u.Z.getTranslation(o,me.cylinderUvToRenderBoundsTranslate)}if(ee&&(_e.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED=!0),pe&&(_e.CYLINDER_HAS_RENDER_BOUNDS_ANGLE=!0,_e.CYLINDER_INTERSECTION_INDEX_ANGLE=ge,ue?(_e.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF=!0,ge+=1):de?(_e.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF=!0,ge+=2):he?(_e.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_HALF=!0,ge+=1):fe&&(_e.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO=!0,ge+=2),me.cylinderRenderAngleMinMax=r.Z.fromElements(X,J,me.cylinderAngleMinMax)),ie){_e.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE=!0,ne&&(_e.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO=!0),oe&&(_e.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY=!0),re&&(_e.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY=!0);const e=(j-E)/C,t=(W-E)/C,n=1-te/C;me.cylinderShapeUvAngleMinMax=r.Z.fromElements(e,t,me.cylinderShapeUvAngleMinMax),me.cylinderShapeUvAngleRangeZeroMid=(t+.5*n)%1;const i=C/te,o=-(j-E)/te;me.cylinderUvToShapeUvAngle=r.Z.fromElements(i,o,me.cylinderUvToShapeUvAngle)}return this.shaderMaximumIntersectionsLength=ge,!0},f.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,o){a.Z.typeOf.number("tileLevel",e),a.Z.typeOf.number("tileX",t),a.Z.typeOf.number("tileY",n),a.Z.typeOf.number("tileZ",i),a.Z.typeOf.object("result",o);const r=this._minimumRadius,s=this._maximumRadius,l=this._minimumHeight,u=this._maximumHeight,d=this._minimumAngle,h=this._maximumAngle,f=1/Math.pow(2,e);return F(c.Z.lerp(r,s,t*f),c.Z.lerp(r,s,(t+1)*f),c.Z.lerp(l,u,n*f),c.Z.lerp(l,u,(n+1)*f),c.Z.lerp(d,h,i*f),c.Z.lerp(d,h,(i+1)*f),this.shapeTransform,o)};const v=new d.Z,A=new s.Z,T=new s.Z,w=new s.Z;f.prototype.computeApproximateStepSize=function(e){a.Z.typeOf.object("dimensions",e);const t=this.shapeTransform,n=this._minimumRadius,i=this._maximumRadius,o=this._minimumHeight,r=this._maximumHeight,d=this._minimumAngle,h=this._maximumAngle,f=1-1/e.x,p=1-1/e.y,m=1-1/e.z,_=F(c.Z.lerp(n,i,f),i,c.Z.lerp(o,r,p),r,c.Z.lerp(d,h,m),h,t,v),g=l.Z.getScale(_.halfAxes,A),Z=u.Z.getScale(t,T),y=s.Z.divideComponents(g,Z,w);return s.Z.minimumComponent(y)},f.DefaultMinBounds=Object.freeze(new s.Z(0,-1,-c.Z.PI)),f.DefaultMaxBounds=Object.freeze(new s.Z(1,1,+c.Z.PI));const E=new Array(5),S=new s.Z,C=new l.Z,x=new u.Z,I=new u.Z,P=new u.Z,D=new u.Z,O=new s.Z,L=new s.Z,N=new s.Z,M=new Array(8);for(let e=0;e<8;e++)M[e]=new s.Z;function R(e,t,n){return Math.abs(h.Z.dot(e,t))<n}function F(e,t,n,i,o,r,a,h){const m=f.DefaultMinBounds,_=f.DefaultMaxBounds,g=m.x,Z=_.x,y=m.y,b=_.y,v=m.z,A=_.z;if(e===g&&t===Z&&n===y&&i===b&&o===v&&r===A)return h.center=u.Z.getTranslation(a,h.center),h.halfAxes=u.Z.getMatrix3(a,h.halfAxes),h;r<o&&(r+=c.Z.TWO_PI);const T=r-o,w=o+.5*T,F=E;let B=0;F[B++]=o,F[B++]=r,F[B++]=w,T>c.Z.PI&&(F[B++]=w-c.Z.PI_OVER_TWO,F[B++]=w+c.Z.PI_OVER_TWO);let U=1,k=1,V=-1,H=-1;for(let n=0;n<B;++n){const i=F[n]-w,o=Math.cos(i),r=Math.sin(i),s=o*e,a=r*e,c=o*t,l=r*t;U=Math.min(U,s),k=Math.min(k,a),U=Math.min(U,c),k=Math.min(k,l),V=Math.max(V,s),H=Math.max(H,a),V=Math.max(V,c),H=Math.max(H,l)}const z=V-U,G=H-k,j=i-n,W=.5*(U+V),q=.5*(k+H),Y=.5*(n+i),X=s.Z.fromElements(W,q,Y,S),J=l.Z.fromRotationZ(w,C),Q=s.Z.fromElements(z,G,j,p),$=u.Z.fromScale(Q,P),K=u.Z.fromRotation(J,I),ee=u.Z.fromTranslation(X,x),te=u.Z.multiplyTransformation(K,u.Z.multiplyTransformation(ee,$,D),D),ne=u.Z.multiplyTransformation(a,te,D);return function(e){const t=u.Z.getColumn(e,0,O),n=u.Z.getColumn(e,1,L),i=u.Z.getColumn(e,2,N),o=c.Z.EPSILON4;return R(t,n,o)&&R(n,i,o)}(ne)?d.Z.fromTransformation(ne,h):function(e,t){const n=M;s.Z.fromElements(-.5,-.5,-.5,n[0]),s.Z.fromElements(-.5,-.5,.5,n[1]),s.Z.fromElements(-.5,.5,-.5,n[2]),s.Z.fromElements(-.5,.5,.5,n[3]),s.Z.fromElements(.5,-.5,-.5,n[4]),s.Z.fromElements(.5,-.5,.5,n[5]),s.Z.fromElements(.5,.5,-.5,n[6]),s.Z.fromElements(.5,.5,.5,n[7]);for(let t=0;t<8;++t)u.Z.multiplyByPoint(e,n[t],n[t]);return d.Z.fromPoints(n,t)}(ne,h)}const B=f},699192:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(762031),o=n(405254),r=n(660904),s=n(790087),a=n(63354),c=n(344485),l=n(664288),u=n(659635),d=n(237247),h=n(143450),f=n(234146);function p(){this.orientedBoundingBox=new d.Z,this.boundingSphere=new i.Z,this.boundTransform=new u.Z,this.shapeTransform=new u.Z,this._rectangle=new h.Z,this._minimumHeight=p.DefaultMinBounds.z,this._maximumHeight=p.DefaultMaxBounds.z,this._ellipsoid=new a.Z,this._translation=new r.Z,this._rotation=new l.Z,this.shaderUniforms={ellipsoidRadiiUv:new r.Z,ellipsoidInverseRadiiSquaredUv:new r.Z,ellipsoidRenderLongitudeMinMax:new o.Z,ellipsoidShapeUvLongitudeMinMaxMid:new r.Z,ellipsoidUvToShapeUvLongitude:new o.Z,ellipsoidUvToShapeUvLatitude:new o.Z,ellipsoidRenderLatitudeCosSqrHalfMinMax:new o.Z,ellipsoidInverseHeightDifferenceUv:0,ellipseInnerRadiiUv:new o.Z,ellipsoidInverseInnerScaleUv:0,ellipsoidInverseOuterScaleUv:0},this.shaderDefines={ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_FLAT:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT:void 0,ELLIPSOID_IS_SPHERE:void 0,ELLIPSOID_INTERSECTION_INDEX_LONGITUDE:void 0,ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX:void 0,ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN:void 0,ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX:void 0,ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN:void 0},this.shaderMaximumIntersectionsLength=0}const m=new r.Z,_=new l.Z,g=new r.Z,Z=new r.Z,y=new r.Z,b=new r.Z,v=new h.Z;p.prototype.update=function(e,t,n,d,A){d=(0,f.Z)(d,p.DefaultMinBounds),A=(0,f.Z)(A,p.DefaultMaxBounds),s.Z.typeOf.object("modelMatrix",e),s.Z.typeOf.object("minBounds",t),s.Z.typeOf.object("maxBounds",n);const w=p.DefaultMinBounds.x,E=p.DefaultMaxBounds.x,S=E-w,C=.5*S,x=p.DefaultMinBounds.y,I=p.DefaultMaxBounds.y,P=I-x,D=c.Z.EPSILON10,O=c.Z.EPSILON3,L=c.Z.EPSILON10,N=c.Z.EPSILON10,M=c.Z.EPSILON3,R=c.Z.clamp(t.x,w,E),F=c.Z.clamp(n.x,w,E),B=c.Z.clamp(d.x,w,E),U=c.Z.clamp(A.x,w,E),k=Math.max(R,B),V=Math.min(F,U),H=c.Z.clamp(t.y,x,I),z=c.Z.clamp(n.y,x,I),G=c.Z.clamp(d.y,x,I),j=c.Z.clamp(A.y,x,I),W=Math.max(H,G),q=Math.min(z,j),Y=u.Z.getScale(e,m),X=Y.x===Y.y&&Y.y===Y.z,J=r.Z.minimumComponent(Y),Q=Math.max(t.z,-J),$=Math.max(n.z,-J),K=Math.max(d.z,-J),ee=Math.max(A.z,-J),te=Math.max(Q,K),ne=Math.min($,ee),ie=r.Z.add(Y,r.Z.fromElements(Q,Q,Q,Z),Z),oe=r.Z.add(Y,r.Z.fromElements($,$,$,g),g),re=r.Z.maximumComponent(oe),se=r.Z.add(Y,r.Z.fromElements(te,te,te,b),b),ae=r.Z.add(Y,r.Z.fromElements(ne,ne,ne,y),y);if(W>q||W===I||q===x||te>ne||c.Z.equalsEpsilon(ae,r.Z.ZERO,void 0,D))return!1;this._rectangle=h.Z.fromRadians(R,H,F,z),this._translation=u.Z.getTranslation(e,this._translation),this._rotation=u.Z.getRotation(e,this._rotation),this._ellipsoid=a.Z.fromCartesian3(Y,this._ellipsoid),this._minimumHeight=Q,this._maximumHeight=$;const ce=h.Z.fromRadians(k,W,V,q,v);this.orientedBoundingBox=T(ce,te,ne,this._ellipsoid,this._translation,this._rotation,this.orientedBoundingBox),this.shapeTransform=u.Z.fromRotationTranslation(l.Z.setScale(this._rotation,oe,_),this._translation,this.shapeTransform),this.boundTransform=u.Z.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=i.Z.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const le=V-k+(V<k)*S,ue=le<=L,de=le>C+L&&le<S-L,he=le>=C-L&&le<=C+L,fe=le>L&&le<C-L,pe=ue||de||he||fe,me=F-R+(F<R)*S,_e=me<=L||me>C+L&&me<S-L||me>=C-L&&me<=C+L||me>L&&me<C-L,ge=q<-M,Ze=q>=-M&&q<=+M,ye=q>+M&&q<I-N,be=ge||Ze||ye,ve=W>x+N&&W<-M,Ae=W>=-M&&W<=+M,Te=W>+M,we=ve||Ae||Te,Ee=be||we,Se=z-H,Ce=z<-M||z>=-M&&z<=+M||z>+M&&z<I-N||H>x+N&&H<-M||H>=-M&&H<=+M||H>+M,xe=!r.Z.equals(se,r.Z.ZERO),Ie=!r.Z.equals(ae,r.Z.ZERO),Pe=xe||Ie,De=ne-te,Oe=!r.Z.equals(ie,r.Z.ZERO),Le=!r.Z.equals(oe,r.Z.ZERO),Ne=Oe||Le,Me=this.shaderUniforms,Re=this.shaderDefines;for(const e in Re)Re.hasOwnProperty(e)&&(Re[e]=void 0);Me.ellipsoidRadiiUv=r.Z.divideByScalar(oe,re,Me.ellipsoidRadiiUv),Me.ellipsoidInverseRadiiSquaredUv=r.Z.divideComponents(r.Z.ONE,r.Z.multiplyComponents(Me.ellipsoidRadiiUv,Me.ellipsoidRadiiUv,Me.ellipsoidInverseRadiiSquaredUv),Me.ellipsoidInverseRadiiSquaredUv);let Fe=0;if(Re.ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX=Fe,Fe+=1,Pe&&(0===De&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_FLAT=!0),xe&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN=!0,Re.ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN=Fe,Fe+=1,Me.ellipsoidInverseInnerScaleUv=re/(re-($-te))),Ie&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX=!0,Me.ellipsoidInverseOuterScaleUv=re/(re-($-ne)))),Ne){if(Oe){Re.ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN=!0;const e=($-Q)/re;Me.ellipsoidInverseHeightDifferenceUv=1/e,Me.ellipseInnerRadiiUv=o.Z.fromElements(Me.ellipsoidRadiiUv.x*(1-e),Me.ellipsoidRadiiUv.z*(1-e),Me.ellipseInnerRadiiUv)}Q===$&&(Re.ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT=!0)}if(pe&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE=!0,Re.ELLIPSOID_INTERSECTION_INDEX_LONGITUDE=Fe,de?(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF=!0,Fe+=1):fe?(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF=!0,Fe+=2):he?(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_HALF=!0,Fe+=1):ue&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO=!0,Fe+=2),Me.ellipsoidRenderLongitudeMinMax=o.Z.fromElements(k,V,Me.ellipsoidRenderLongitudeMinMax)),_e){Re.ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE=!0,F<R&&(Re.ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED=!0);const e=S/me,t=-(R-w)/me;Me.ellipsoidUvToShapeUvLongitude=o.Z.fromElements(e,t,Me.ellipsoidUvToShapeUvLongitude)}if(pe){const e=c.Z.equalsEpsilon(k,w,void 0,O),t=c.Z.equalsEpsilon(V,E,void 0,O);e&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY=!0),t&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY=!0);const n=(R-w)/S,i=(F-w)/S,o=((V-w)/S+.5*(1-le/S))%1;Me.ellipsoidShapeUvLongitudeMinMaxMid=r.Z.fromElements(n,i,o,Me.ellipsoidShapeUvLongitudeMinMaxMid)}if(Ee){Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE=!0,we&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN=!0,Re.ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN=Fe,ve?(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF=!0,Fe+=1):Ae?(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF=!0,Fe+=1):Te&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF=!0,Fe+=2)),be&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX=!0,Re.ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX=Fe,ge?(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF=!0,Fe+=2):Ze?(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF=!0,Fe+=1):ye&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF=!0,Fe+=1)),W===q&&(Re.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO=!0);const e=Math.pow(Math.cos(c.Z.PI_OVER_TWO-Math.abs(W)),2),t=Math.pow(Math.cos(c.Z.PI_OVER_TWO-Math.abs(q)),2);Me.ellipsoidRenderLatitudeCosSqrHalfMinMax=o.Z.fromElements(e,t,Me.ellipsoidRenderLatitudeCosSqrHalfMinMax)}if(Ce){Re.ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE=!0,H===z&&(Re.ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO=!0);const e=P/Se,t=(x-H)/Se;Me.ellipsoidUvToShapeUvLatitude=o.Z.fromElements(e,t,Me.ellipsoidUvToShapeUvLatitude)}return X&&(Re.ELLIPSOID_IS_SPHERE=!0),this.shaderMaximumIntersectionsLength=Fe,!0};const A=new h.Z;function T(e,t,n,i,o,s,a){return(a=d.Z.fromRectangle(e,t,n,i,a)).center=r.Z.add(a.center,o,a.center),a.halfAxes=l.Z.multiply(a.halfAxes,s,a.halfAxes),a}p.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,o){s.Z.typeOf.number("tileLevel",e),s.Z.typeOf.number("tileX",t),s.Z.typeOf.number("tileY",n),s.Z.typeOf.number("tileZ",i),s.Z.typeOf.object("result",o);const r=1/Math.pow(2,e),a=t*r,l=(t+1)*r,u=n*r,d=(n+1)*r,f=i*r,p=(i+1)*r;return T(h.Z.subsection(this._rectangle,a,u,l,d,A),c.Z.lerp(this._minimumHeight,this._maximumHeight,f),c.Z.lerp(this._minimumHeight,this._maximumHeight,p),this._ellipsoid,this._translation,this._rotation,o)},p.prototype.computeApproximateStepSize=function(e){s.Z.typeOf.object("dimensions",e);const t=this._ellipsoid.maximumRadius,n=this._minimumHeight,i=this._maximumHeight;return(i-n)/(t+i)*.5/e.z},p.DefaultMinBounds=Object.freeze(new r.Z(-c.Z.PI,-c.Z.PI_OVER_TWO,-Number.MAX_VALUE)),p.DefaultMaxBounds=Object.freeze(new r.Z(+c.Z.PI,+c.Z.PI_OVER_TWO,+Number.MAX_VALUE));const w=p},744715:(e,t,n)=>{"use strict";n.d(t,{Z:()=>$});var i=n(878),o=n(405254),r=n(660904),s=n(798336),a=n(344485),c=n(790087),l=n(823438),u=n(35961),d=n(234146),h=n(11020),f=n(906439),p=n(722313),m=n(282910),_=n(791364),g=n(664288),Z=n(659635),y=n(590292),b=n(753577),v=n(420171),A=n(832670),T=n(784246),w=n(999604),E=n(95478),S=n(669725),C=n(641746);function x(e){e=(0,d.Z)(e,d.Z.EMPTY_OBJECT),this._ready=!1,this._provider=(0,d.Z)(e.provider,x.DefaultProvider),this._traversal=void 0,this._shape=void 0,this._shapeVisible=!1,this._paddingBefore=new r.Z,this._paddingAfter=new r.Z,this._minBounds=new r.Z,this._minBoundsOld=new r.Z,this._maxBounds=new r.Z,this._maxBoundsOld=new r.Z,this._minClippingBounds=new r.Z,this._minClippingBoundsOld=new r.Z,this._maxClippingBounds=new r.Z,this._maxClippingBoundsOld=new r.Z,this._clippingPlanes=void 0,this._clippingPlanesState=0,this._clippingPlanesEnabled=!1,this._modelMatrix=Z.Z.clone((0,d.Z)(e.modelMatrix,Z.Z.IDENTITY)),this._compoundModelMatrix=new Z.Z,this._compoundModelMatrixOld=new Z.Z,this._customShader=(0,d.Z)(e.customShader,x.DefaultCustomShader),this._customShaderCompilationEvent=new m.Z,this._shaderDirty=!0,this._drawCommand=void 0,this._drawCommandPick=void 0,this._pickId=void 0,this._clock=e.clock,this._transformPositionWorldToUv=new Z.Z,this._transformPositionUvToWorld=new Z.Z,this._transformDirectionWorldToLocal=new g.Z,this._transformNormalLocalToWorld=new g.Z,this._stepSizeUv=1,this._jitter=!0,this._nearestSampling=!1,this._levelBlendFactor=0,this._stepSizeMultiplier=1,this._depthTest=!0,this._useLogDepth=void 0,this._screenSpaceError=4,this._debugPolylines=new w.Z,this._debugDraw=!1,this._disableRender=!1,this._disableUpdate=!1,this._uniforms={octreeInternalNodeTexture:void 0,octreeInternalNodeTilesPerRow:0,octreeInternalNodeTexelSizeUv:new o.Z,octreeLeafNodeTexture:void 0,octreeLeafNodeTilesPerRow:0,octreeLeafNodeTexelSizeUv:new o.Z,megatextureTextures:[],megatextureSliceDimensions:new o.Z,megatextureTileDimensions:new o.Z,megatextureVoxelSizeUv:new o.Z,megatextureSliceSizeUv:new o.Z,megatextureTileSizeUv:new o.Z,dimensions:new r.Z,paddingBefore:new r.Z,paddingAfter:new r.Z,transformPositionViewToUv:new Z.Z,transformPositionUvToView:new Z.Z,transformDirectionViewToLocal:new g.Z,transformNormalLocalToWorld:new g.Z,cameraPositionUv:new r.Z,ndcSpaceAxisAlignedBoundingBox:new s.Z,clippingPlanesTexture:void 0,clippingPlanesMatrix:new Z.Z,stepSize:0,pickColor:new u.Z},this._shapeDefinesOld={},this._uniformMap={};const t=this._uniforms,n=this._uniformMap;for(const e in t)t.hasOwnProperty(e)&&(n[`u_${e}`]=function(){return t[e]});const i=this._provider;this._completeLoad=function(e,t){},this._readyPromise=async function(e,t){const n=new Promise((function(t){e._completeLoad=function(e,n){n.afterRender.push((function(){return e._ready=!0,t(e),!0}))}}));(0,h.Z)(t._readyPromise)&&!t._ready&&await t._readyPromise;const{shape:i,minBounds:o=E.Z.getMinBounds(i),maxBounds:r=E.Z.getMaxBounds(i)}=t;e.minBounds=o,e.maxBounds=r,e.minClippingBounds=E.Z.getMinBounds(i),e.maxClippingBounds=E.Z.getMaxBounds(i),V(e,t);const s=E.Z.getShapeConstructor(i);return e._shape=new s,e._shapeVisible=z(e,e._shape,t),n}(this,i)}Object.defineProperties(x.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,f.Z)("VoxelPrimitive.readyPromise","VoxelPrimitive.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for VoxelPrimitive.ready to return true instead."),this._readyPromise}},provider:{get:function(){return this._provider}},boundingSphere:{get:function(){return this._shape.boundingSphere}},orientedBoundingBox:{get:function(){return this.shape.orientedBoundingBox}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){c.Z.typeOf.object("modelMatrix",e),this._modelMatrix=Z.Z.clone(e,this._modelMatrix)}},shape:{get:function(){return this._provider.shape}},dimensions:{get:function(){return this._provider.dimensions}},minimumValues:{get:function(){return this._provider.minimumValues}},maximumValues:{get:function(){return this._provider.maximumValues}},show:{get:function(){return!this._disableRender},set:function(e){c.Z.typeOf.bool("show",e),this._disableRender=!e}},disableUpdate:{get:function(){return this._disableUpdate},set:function(e){c.Z.typeOf.bool("disableUpdate",e),this._disableUpdate=e}},debugDraw:{get:function(){return this._debugDraw},set:function(e){c.Z.typeOf.bool("debugDraw",e),this._debugDraw=e}},depthTest:{get:function(){return this._depthTest},set:function(e){c.Z.typeOf.bool("depthTest",e),this._depthTest!==e&&(this._depthTest=e,this._shaderDirty=!0)}},jitter:{get:function(){return this._jitter},set:function(e){c.Z.typeOf.bool("jitter",e),this._jitter!==e&&(this._jitter=e,this._shaderDirty=!0)}},nearestSampling:{get:function(){return this._nearestSampling},set:function(e){c.Z.typeOf.bool("nearestSampling",e),this._nearestSampling!==e&&(this._nearestSampling=e,this._shaderDirty=!0)}},levelBlendFactor:{get:function(){return this._levelBlendFactor},set:function(e){c.Z.typeOf.number("levelBlendFactor",e),this._levelBlendFactor=a.Z.clamp(e,0,1)}},screenSpaceError:{get:function(){return this._screenSpaceError},set:function(e){c.Z.typeOf.number("screenSpaceError",e),this._screenSpaceError=e}},stepSize:{get:function(){return this._stepSizeMultiplier},set:function(e){c.Z.typeOf.number("stepSize",e),this._stepSizeMultiplier=e}},minBounds:{get:function(){return this._minBounds},set:function(e){c.Z.defined("minBounds",e),this._minBounds=r.Z.clone(e,this._minBounds)}},maxBounds:{get:function(){return this._maxBounds},set:function(e){c.Z.defined("maxBounds",e),this._maxBounds=r.Z.clone(e,this._maxBounds)}},minClippingBounds:{get:function(){return this._minClippingBounds},set:function(e){c.Z.defined("minClippingBounds",e),this._minClippingBounds=r.Z.clone(e,this._minClippingBounds)}},maxClippingBounds:{get:function(){return this._maxClippingBounds},set:function(e){c.Z.defined("maxClippingBounds",e),this._maxClippingBounds=r.Z.clone(e,this._maxClippingBounds)}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){b.Z.setOwner(e,this,"_clippingPlanes")}},customShader:{get:function(){return this._customShader},set:function(e){if(this._customShader!==e){const t=this._uniformMap,n=this._customShader.uniformMap;for(const e in n)n.hasOwnProperty(e)&&delete t[e];(0,h.Z)(e)?this._customShader=e:this._customShader=x.DefaultCustomShader,this._shaderDirty=!0}}},customShaderCompilationEvent:{get:function(){return this._customShaderCompilationEvent}}});const I=new r.Z,P=new s.Z,D=new s.Z,O=new r.Z,L=new r.Z,N=new g.Z,M=new g.Z,R=new Z.Z,F=new Z.Z,B=new Z.Z,U=Z.Z.fromRotationTranslation(g.Z.fromUniformScale(.5,new g.Z),new r.Z(.5,.5,.5),new Z.Z),k=Z.Z.fromRotationTranslation(g.Z.fromUniformScale(2,new g.Z),new r.Z(-1,-1,-1),new Z.Z);function V(e,t){const n=(0,d.Z)(t.shapeTransform,Z.Z.IDENTITY),i=(0,d.Z)(t.globalTransform,Z.Z.IDENTITY);return Z.Z.multiplyTransformation(i,e._modelMatrix,e._compoundModelMatrix),Z.Z.multiplyTransformation(e._compoundModelMatrix,n,e._compoundModelMatrix),H(e,"_compoundModelMatrix","_compoundModelMatrixOld")+H(e,"_minBounds","_minBoundsOld")+H(e,"_maxBounds","_maxBoundsOld")+H(e,"_minClippingBounds","_minClippingBoundsOld")+H(e,"_maxClippingBounds","_maxClippingBoundsOld")>0}function H(e,t,n){const i=e[t],o=e[n],r=!i.equals(o);return r&&i.clone(o),r?1:0}function z(e,t,n){if(!t.update(e._compoundModelMatrix,e.minBounds,e.maxBounds,e.minClippingBounds,e.maxClippingBounds))return!1;const i=t.shapeTransform,o=Z.Z.inverse(i,R),s=Z.Z.getRotation(i,N),a=Z.Z.getScale(i,O),c=r.Z.maximumComponent(a),l=r.Z.divideByScalar(a,c,L),u=g.Z.multiplyByScale(s,l,M),d=n.dimensions;return e._stepSizeUv=t.computeApproximateStepSize(d),e._transformPositionWorldToUv=Z.Z.multiplyTransformation(U,o,e._transformPositionWorldToUv),e._transformPositionUvToWorld=Z.Z.multiplyTransformation(i,k,e._transformPositionUvToWorld),e._transformDirectionWorldToLocal=Z.Z.getMatrix3(o,e._transformDirectionWorldToLocal),e._transformNormalLocalToWorld=g.Z.inverseTranspose(u,e._transformNormalLocalToWorld),!0}x.prototype.update=function(e){const t=this._provider;if(this._customShader.update(e),(0,h.Z)(t._ready)&&!t._ready||!(0,h.Z)(this._shape))return;const n=e.context;if(!this._ready)return function(e,t,n){const i=e._uniforms;e._pickId=n.createPickId({primitive:e}),i.pickColor=u.Z.clone(e._pickId.color,i.pickColor);const{shaderDefines:s,shaderUniforms:a}=e._shape;e._shapeDefinesOld=(0,l.Z)(s,!0);const c=e._uniformMap;for(const e in a)if(a.hasOwnProperty(e)){const t=`u_${e}`;(0,h.Z)(c[t])&&(0,y.Z)(`VoxelPrimitive: Uniform name "${t}" is already defined`),c[t]=function(){return a[e]}}i.dimensions=r.Z.clone(t.dimensions,i.dimensions),e._paddingBefore=r.Z.clone((0,d.Z)(t.paddingBefore,r.Z.ZERO),e._paddingBefore),i.paddingBefore=r.Z.clone(e._paddingBefore,i.paddingBefore),e._paddingAfter=r.Z.clone((0,d.Z)(t.paddingAfter,r.Z.ZERO),e._paddingBefore),i.paddingAfter=r.Z.clone(e._paddingAfter,i.paddingAfter),e._traversal=function(e,t,n){const i=r.Z.clone(t.dimensions,I);r.Z.add(i,e._paddingBefore,i),r.Z.add(i,e._paddingAfter,i);const o=t.maximumTileCount,s=(0,h.Z)(o)?S.Z.getApproximateTextureMemoryByteLength(o,i,t.types,t.componentTypes):void 0,a=(0,d.Z)(t.keyframeCount,1);return new S.Z(e,n,i,t.types,t.componentTypes,a,s)}(e,t,n),function(e,t){t.octreeInternalNodeTexture=e.internalNodeTexture,t.octreeInternalNodeTexelSizeUv=o.Z.clone(e.internalNodeTexelSizeUv,t.octreeInternalNodeTexelSizeUv),t.octreeInternalNodeTilesPerRow=e.internalNodeTilesPerRow;const n=e.megatextures,i=n[0],r=n.length;t.megatextureTextures=new Array(r);for(let e=0;e<r;e++)t.megatextureTextures[e]=n[e].texture;t.megatextureSliceDimensions=o.Z.clone(i.sliceCountPerRegion,t.megatextureSliceDimensions),t.megatextureTileDimensions=o.Z.clone(i.regionCountPerMegatexture,t.megatextureTileDimensions),t.megatextureVoxelSizeUv=o.Z.clone(i.voxelSizeUv,t.megatextureVoxelSizeUv),t.megatextureSliceSizeUv=o.Z.clone(i.sliceSizeUv,t.megatextureSliceSizeUv),t.megatextureTileSizeUv=o.Z.clone(i.regionSizeUv,t.megatextureTileSizeUv)}(e._traversal,i)}(this,t,n),void this._completeLoad(this,e);const c=V(this,t),f=this._shape;if(c&&(this._shapeVisible=z(this,f,t),function(e,t){const n=t.shaderDefines,i=Object.keys(n).some((t=>n[t]!==e._shapeDefinesOld[t]));return i&&(e._shapeDefinesOld=(0,l.Z)(n,!0)),i}(this,f)&&(this._shaderDirty=!0)),!this._shapeVisible)return;const p=function(e,t){if(!(0,h.Z)(e)||!(0,h.Z)(t))return 0;let n,i=t.currentTime,o=e.indexOf(i);o>=0?n=e.get(o):(o=~o,o===e.length?(o=e.length-1,n=e.get(o),i=n.stop):(n=e.get(o),i=n.start));const r=_.Z.secondsDifference(n.stop,n.start);return o+_.Z.secondsDifference(i,n.start)/r}(t.timeIntervalCollection,this._clock),m=this._traversal,b=m._sampleCount;if(m.update(e,p,c,this._disableUpdate),b!==m._sampleCount&&(this._shaderDirty=!0),!m.isRenderable(m.rootNode))return;if(this._debugDraw&&function(e,t){const n=e._traversal,i=e._debugPolylines;function o(e,t,n,o){i.add({positions:[e,t],width:o,material:v.Z.fromType("Color",{color:n})})}function s(e,t,n){const i=e.computeCorners();o(i[0],i[1],t,n),o(i[2],i[3],t,n),o(i[4],i[5],t,n),o(i[6],i[7],t,n),o(i[0],i[2],t,n),o(i[4],i[6],t,n),o(i[1],i[3],t,n),o(i[5],i[7],t,n),o(i[0],i[4],t,n),o(i[2],i[6],t,n),o(i[1],i[5],t,n),o(i[3],i[7],t,n)}i.removeAll(),s(e._shape.orientedBoundingBox,u.Z.WHITE,5),function e(t){if(!n.isRenderable(t))return;const i=t.level,o=Math.max(1,5/Math.pow(2,i)),r=[u.Z.RED,u.Z.LIME,u.Z.BLUE][i%3];if(s(t.orientedBoundingBox,r,o),(0,h.Z)(t.children))for(let n=0;n<8;n++)e(t.children[n])}(n.rootNode);o(r.Z.ZERO,Y,u.Z.RED,10),o(r.Z.ZERO,X,u.Z.LIME,10),o(r.Z.ZERO,J,u.Z.BLUE,10),i.update(t)}(this,e),this._disableRender)return;this._useLogDepth!==e.useLogDepth&&(this._useLogDepth=e.useLogDepth,this._shaderDirty=!0);const A=function(e,t){const n=e.clippingPlanes;if(!(0,h.Z)(n))return!1;n.update(t);const{clippingPlanesState:i,enabled:o}=n;if(o){const t=e._uniforms;t.clippingPlanesTexture=n.texture,t.clippingPlanesMatrix=Z.Z.transpose(Z.Z.multiplyTransformation(Z.Z.inverse(n.modelMatrix,t.clippingPlanesMatrix),e._transformPositionUvToWorld,t.clippingPlanesMatrix),t.clippingPlanesMatrix)}return(e._clippingPlanesState!==i||e._clippingPlanesEnabled!==o)&&(e._clippingPlanesState=i,e._clippingPlanesEnabled=o,!0)}(this,e);A&&(this._shaderDirty=!0);const T=m.leafNodeTexture,w=this._uniforms;(0,h.Z)(T)&&(w.octreeLeafNodeTexture=m.leafNodeTexture,w.octreeLeafNodeTexelSizeUv=o.Z.clone(m.leafNodeTexelSizeUv,w.octreeLeafNodeTexelSizeUv),w.octreeLeafNodeTilesPerRow=m.leafNodeTilesPerRow),this._shaderDirty&&((0,i.Z)(this,n),this._shaderDirty=!1);const E=n.uniformState.viewProjection,C=function(e,t,n){const i=Z.Z.fromRotationTranslation(e.halfAxes,e.center,F),o=Z.Z.multiply(t,i,B);let r,c=+Number.MAX_VALUE,l=-Number.MAX_VALUE,u=+Number.MAX_VALUE,d=-Number.MAX_VALUE;const h=W,f=G.length;for(r=0;r<f;r++)Z.Z.multiplyByVector(o,G[r],h[r]);for(r=0;r<f;r++){const e=h[r];if(e.z>=-e.w){const t=e.x/e.w,n=e.y/e.w;c=Math.min(c,t),l=Math.max(l,t),u=Math.min(u,n),d=Math.max(d,n)}else for(let t=0;t<3;t++){const n=h[j[3*r+t]];if(n.z>=-n.w){const t=e.z+e.w,i=t/(t-(n.z+n.w)),o=s.Z.lerp(e,n,i,P),r=o.x/o.w,a=o.y/o.w;c=Math.min(c,r),l=Math.max(l,r),u=Math.min(u,a),d=Math.max(d,a)}}}return c=a.Z.clamp(c,-1,1),u=a.Z.clamp(u,-1,1),l=a.Z.clamp(l,-1,1),d=a.Z.clamp(d,-1,1),s.Z.fromElements(c,u,l,d,n)}(f.orientedBoundingBox,E,D);if(1===C.x||1===C.y||-1===C.z||-1===C.w)return;w.ndcSpaceAxisAlignedBoundingBox=s.Z.clone(C,w.ndcSpaceAxisAlignedBoundingBox);const x=n.uniformState.inverseView;w.transformPositionViewToUv=Z.Z.multiplyTransformation(this._transformPositionWorldToUv,x,w.transformPositionViewToUv);const O=n.uniformState.view;w.transformPositionUvToView=Z.Z.multiplyTransformation(O,this._transformPositionUvToWorld,w.transformPositionUvToView);const L=n.uniformState.inverseViewRotation;w.transformDirectionViewToLocal=g.Z.multiply(this._transformDirectionWorldToLocal,L,w.transformDirectionViewToLocal),w.transformNormalLocalToWorld=g.Z.clone(this._transformNormalLocalToWorld,w.transformNormalLocalToWorld);const N=e.camera.positionWC;w.cameraPositionUv=Z.Z.multiplyByPoint(this._transformPositionWorldToUv,N,w.cameraPositionUv),w.stepSize=this._stepSizeUv*this._stepSizeMultiplier;const M=e.passes.pick?this._drawCommandPick:this._drawCommand;M.boundingVolume=f.boundingSphere,e.commandList.push(M)},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){const e=this._drawCommand;(0,h.Z)(e)&&(e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy());const t=this._drawCommandPick;return(0,h.Z)(t)&&(t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()),this._pickId=this._pickId&&this._pickId.destroy(),this._traversal=this._traversal&&this._traversal.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),(0,p.Z)(this)};const G=new Array(new s.Z(-1,-1,-1,1),new s.Z(1,-1,-1,1),new s.Z(-1,1,-1,1),new s.Z(1,1,-1,1),new s.Z(-1,-1,1,1),new s.Z(1,-1,1,1),new s.Z(-1,1,1,1),new s.Z(1,1,1,1)),j=new Array(1,2,4,0,3,5,0,3,6,1,2,7,0,5,6,1,4,7,2,4,7,3,5,6),W=new Array(new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z),q=3e7,Y=new r.Z(q,0,0),X=new r.Z(0,q,0),J=new r.Z(0,0,q);function Q(){this.ready=!0,this.shape=E.Z.BOX,this.dimensions=new r.Z(1,1,1),this.names=["data"],this.types=[T.Z.SCALAR],this.componentTypes=[A.Z.FLOAT32],this.maximumTileCount=1}x.DefaultCustomShader=new C.Z({fragmentShaderText:"void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)\n{\n    material.diffuse = vec3(1.0);\n    material.alpha = 1.0;\n}"}),Q.prototype.requestData=function(e){if(!(((0,h.Z)(e)?(0,d.Z)(e.tileLevel,0):0)>=1))return Promise.resolve([new Float32Array(1)])},x.DefaultProvider=new Q;const $=x},559594:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(660904),o=n(394579),r=n(11020),s=n(669133),a=n(245929),c=n(948548),l=n(500404),u=n(363813),d=n(49964),h=n(933495),f=n(749159),p=n(397974),m=n(200356),_=n(279081),g=n(357759),Z=n(353542),y=n(811151),b=n(126563),v=n(271653);const A=function(e){const t=new s.Z;this.shaderBuilder=t;const n=e._customShader,A=(0,o.Z)(e._uniformMap,n.uniformMap);e._uniformMap=A;const T=n.uniforms;for(const e in T)if(T.hasOwnProperty(e)){const n=T[e];t.addUniform(n.type,e,a.Z.FRAGMENT)}t.addUniform("sampler2D","u_megatextureTextures[METADATA_COUNT]",a.Z.FRAGMENT),this.uniformMap=A;const w=e._clippingPlanes,E=(0,r.Z)(w)&&w.enabled?w.length:0;this.clippingPlanes=w,this.clippingPlanesLength=E,t.addVertexLines([l.Z]),t.addFragmentLines([n.fragmentShaderText,"#line 0",b.Z,u.Z,v.Z]),E>0&&(t.addDefine("CLIPPING_PLANES",void 0,a.Z.FRAGMENT),t.addDefine("CLIPPING_PLANES_COUNT",E,a.Z.FRAGMENT),w.unionClippingRegions&&t.addDefine("CLIPPING_PLANES_UNION",void 0,a.Z.FRAGMENT),t.addFragmentLines([h.Z])),e._depthTest&&(t.addDefine("DEPTH_TEST",void 0,a.Z.FRAGMENT),t.addFragmentLines([d.Z]));const S=e._provider.shape;"BOX"===S?(t.addDefine("SHAPE_BOX",void 0,a.Z.FRAGMENT),t.addFragmentLines([g.Z,f.Z,_.Z])):"CYLINDER"===S?t.addFragmentLines([p.Z,_.Z,Z.Z]):"ELLIPSOID"===S&&t.addFragmentLines([m.Z,_.Z,y.Z]),t.addFragmentLines([c.Z]);const C=e._shape,x=C.shaderDefines;for(const e in x)if(x.hasOwnProperty(e)){let n=x[e];(0,r.Z)(n)&&(n=!0===n?void 0:n,t.addDefine(e,n,a.Z.FRAGMENT))}let I=C.shaderMaximumIntersectionsLength;E>0&&(t.addDefine("CLIPPING_PLANES_INTERSECTION_INDEX",I,a.Z.FRAGMENT),1===E?I+=1:w.unionClippingRegions?I+=2:I+=1),e._depthTest&&(t.addDefine("DEPTH_INTERSECTION_INDEX",I,a.Z.FRAGMENT),I+=1),t.addDefine("INTERSECTION_COUNT",I,a.Z.FRAGMENT),i.Z.equals(e.paddingBefore,i.Z.ZERO)&&i.Z.equals(e.paddingAfter,i.Z.ZERO)||t.addDefine("PADDING",void 0,a.Z.FRAGMENT),e._useLogDepth&&t.addDefine("LOG_DEPTH_READ_ONLY",void 0,a.Z.FRAGMENT),e._jitter&&t.addDefine("JITTER",void 0,a.Z.FRAGMENT),e._nearestSampling&&t.addDefine("NEAREST_SAMPLING",void 0,a.Z.FRAGMENT);const P=e._traversal;t.addDefine("SAMPLE_COUNT",`${P._sampleCount}`,a.Z.FRAGMENT)}},95478:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(765153),o=n(711241),r=n(483077),s=n(699192);const a={BOX:"BOX",ELLIPSOID:"ELLIPSOID",CYLINDER:"CYLINDER",getMinBounds:function(e){switch(e){case a.BOX:return o.Z.DefaultMinBounds;case a.ELLIPSOID:return s.Z.DefaultMinBounds;case a.CYLINDER:return r.Z.DefaultMinBounds;default:throw new i.Z(`Invalid shape type ${e}`)}},getMaxBounds:function(e){switch(e){case a.BOX:return o.Z.DefaultMaxBounds;case a.ELLIPSOID:return s.Z.DefaultMaxBounds;case a.CYLINDER:return r.Z.DefaultMaxBounds;default:throw new i.Z(`Invalid shape type ${e}`)}},getShapeConstructor:function(e){switch(e){case a.BOX:return o.Z;case a.ELLIPSOID:return s.Z;case a.CYLINDER:return r.Z;default:throw new i.Z(`Invalid shape type ${e}`)}}},c=Object.freeze(a)},669725:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var i=n(405254),o=n(344485),r=n(737400),s=n(11020),a=n(722313),c=n(999727),l=n(732292),u=n(548410),d=n(784246),h=n(536814),f=n(430886),p=n(545870),m=n(497730),_=n(548567),g=n(609882),Z=n(442429),y=n(55248);function b(e,t,n,o,r,s,a){this._primitive=e;const l=o.length;this.megatextures=new Array(l);for(let e=0;e<l;e++){const i=o[e],s=d.Z.getComponentCount(i),c=r[e];this.megatextures[e]=new h.Z(t,n,s,c,a)}const b=this.megatextures[0].maximumTileCount;this._simultaneousRequestCount=0,this._debugPrint=!1,this._frameNumber=0;const A=e._shape;this.rootNode=new _.Z(0,0,0,0,void 0,A,n),this._priorityQueue=new c.Z({maximumLength:b,comparator:u.Z.priorityComparator}),this._highPriorityKeyframeNodes=new Array(b),this._keyframeNodesInMegatexture=new Array(b),this._keyframeCount=s,this._sampleCount=void 0,this._keyframeLocation=0,this._binaryTreeKeyframeWeighting=new Array(s);const T=this._binaryTreeKeyframeWeighting;T[0]=0,T[s-1]=0,v(T,1,s-2,0);const w=Math.floor(227.55555555555554),E=Math.ceil(b/w);this.internalNodeTexture=new g.Z({context:t,pixelFormat:f.Z.RGBA,pixelDatatype:p.Z.UNSIGNED_BYTE,flipY:!1,width:2048,height:E,sampler:new m.Z({minificationFilter:y.Z.NEAREST,magnificationFilter:Z.Z.NEAREST})}),this.internalNodeTilesPerRow=w,this.internalNodeTexelSizeUv=new i.Z(.00048828125,1/E),this.leafNodeTexture=void 0,this.leafNodeTilesPerRow=void 0,this.leafNodeTexelSizeUv=new i.Z}function v(e,t,n,i){if(t>n)return;const o=Math.floor((t+n)/2);e[o]=i,v(e,t,o-1,i+1),v(e,o+1,n,i+1)}function A(e,t){const n=e._primitive,i=n._shape,o=n._provider.dimensions;if(t.computeBoundingVolumes(i,o),(0,s.Z)(t.children))for(let n=0;n<8;n++)A(e,t.children[n])}function T(e,t){if(e._simultaneousRequestCount>=b.simultaneousRequestCountMaximum)return;const n=e._primitive,i=n._provider,{keyframe:o,spatialNode:r}=t,a=i.requestData({tileLevel:r.level,tileX:r.x,tileY:r.y,tileZ:r.z,keyframe:o});(0,s.Z)(a)?(e._simultaneousRequestCount++,t.state=u.Z.LoadState.RECEIVING,a.then((function(i){e._simultaneousRequestCount--;const o=n._provider.types.length;if((0,s.Z)(i))if(i===u.Z.LoadState.FAILED)t.state=u.Z.LoadState.FAILED;else if(Array.isArray(i)&&i.length===o){const n=e.megatextures;for(let e=0;e<o;e++){const{voxelCountPerTile:o,channelCount:r}=n[e],{x:s,y:a,z:c}=o,l=s*a*c,d=i[e],h=l*r;if(d.length!==h){t.state=u.Z.LoadState.FAILED;break}t.metadatas[e]=d,t.state=u.Z.LoadState.RECEIVED}}else t.state=u.Z.LoadState.FAILED;else t.state=u.Z.LoadState.UNAVAILABLE})).catch((function(){e._simultaneousRequestCount--,t.state=u.Z.LoadState.FAILED}))):t.state=u.Z.LoadState.FAILED}b.simultaneousRequestCountMaximum=50,b.prototype.update=function(e,t,n,a){const c=this._primitive,d=e.context,h=this.megatextures[0].maximumTileCount,_=this._keyframeCount,b=c._levelBlendFactor,v=(b>0?2:1)*(_>1?2:1);this._sampleCount=v;const E=v>=2;if(E&&!(0,s.Z)(this.leafNodeTexture)){const e=2,t=1024,n=Math.floor(t/e),o=Math.ceil(h/n);this.leafNodeTexture=new g.Z({context:d,pixelFormat:f.Z.RGBA,pixelDatatype:p.Z.UNSIGNED_BYTE,flipY:!1,width:t,height:o,sampler:new m.Z({minificationFilter:y.Z.NEAREST,magnificationFilter:Z.Z.NEAREST})}),this.leafNodeTexelSizeUv=i.Z.fromElements(1/t,1/o,this.leafNodeTexelSizeUv),this.leafNodeTilesPerRow=n}else!E&&(0,s.Z)(this.leafNodeTexture)&&(this.leafNodeTexture=this.leafNodeTexture.destroy());if(this._keyframeLocation=o.Z.clamp(t,0,_-1),n&&A(this,this.rootNode),a)return;this._frameNumber=e.frameNumber;const S=(0,l.Z)();!function(e,t){const n=e._frameNumber,i=e._primitive,a=i._shape,{dimensions:c}=i,l=i.screenSpaceError,d=e._priorityQueue,h=e._keyframeLocation,f=e._keyframeCount,p=e.rootNode,{camera:m,context:_,pixelRatio:g}=t,{positionWC:Z,frustum:y}=m,b=_.drawingBufferHeight/g/y.sseDenominator;function v(t,n,i){const r=Math.min(Math.abs(n-t),Math.abs(n-i)),s=Math.max(t,f-i-1,1),a=Math.pow(1-r/s,4),c=Math.exp(-e._binaryTreeKeyframeWeighting[n]);return o.Z.lerp(c,a,.15+.85*a)}d.reset(),function e(i,p){if(i.computeScreenSpaceError(Z,b),(p=i.visibility(t,p))===r.Z.MASK_OUTSIDE)return;i.visitedFrameNumber=n;const m=o.Z.clamp(Math.floor(h),0,f-2),_=m+1;if(1===f)i.createKeyframeNode(0);else if(i.keyframeNodes.length!==f)for(let e=0;e<f;e++)i.createKeyframeNode(e);const g=(y=i.screenSpaceError)/(1+y);var y;let A=!1;const T=i.keyframeNodes;for(let e=0;e<T.length;e++){const t=T[e];t.priority=10*g+v(m,t.keyframe,_),t.state!==u.Z.LoadState.UNAVAILABLE&&t.state!==u.Z.LoadState.FAILED&&t.priority!==-Number.MAX_VALUE&&d.insert(t),t.state===u.Z.LoadState.LOADED&&(A=!0)}if(i.screenSpaceError<l||!A)i.children=void 0;else{(0,s.Z)(i.children)||i.constructChildNodes(a,c);for(let t=0;t<8;t++)e(i.children[t],p)}}(p,r.Z.MASK_INDETERMINATE);const A=e._highPriorityKeyframeNodes;let w,E=0;for(;d.length>0;)w=d.removeMaximum(),w.highPriorityFrameNumber=n,A[E]=w,E++;const S=e._keyframeNodesInMegatexture,C=e.megatextures[0],x=C.occupiedCount;S.length=x,S.sort((function(e,t){return e.highPriorityFrameNumber===t.highPriorityFrameNumber?t.priority-e.priority:t.highPriorityFrameNumber-e.highPriorityFrameNumber}));let I=0,P=0;for(let t=0;t<E;t++)if(w=A[t],w.state!==u.Z.LoadState.LOADED&&void 0!==w.spatialNode&&(w.state===u.Z.LoadState.UNLOADED&&T(e,w),w.state===u.Z.LoadState.RECEIVED)){let t=0;if(C.isFull()){t=x-1-I,I++;const n=S[t];n.spatialNode.destroyKeyframeNode(n,e.megatextures)}else t=x+P,P++;w.spatialNode.addKeyframeNodeToMegatextures(w,e.megatextures),S[t]=w}}(this,e);const C=(0,l.Z)();!function(e,t,n){const i=e._primitive._screenSpaceError,r=e._keyframeLocation,a=e._frameNumber,c=t>=2;let l=0,u=0;const d=[],h=[];const p=e.rootNode;p.computeSurroundingRenderableKeyframeNodes(r),p.isRenderable(a)&&function e(t,f,p,m,_){let g=!1;if((0,s.Z)(t.children))for(let e=0;e<8;e++){const n=t.children[e];n.computeSurroundingRenderableKeyframeNodes(r),n.isRenderable(a)&&(g=!0)}if(g){d[_]=w.INTERNAL<<16|f,d[p]=m,l++,_=9*(m=f)+1;for(let n=0;n<8;n++)e(t.children[n],f=l,p=9*f+0,m,_+n)}else{if(c){const e=5*u,r=t.renderableKeyframeNodePrevious,a=t.level-r.spatialNode.level,c=r.spatialNode.parent,l=(0,s.Z)(c)?c.renderableKeyframeNodePrevious:r,f=function(e,t,n){if(void 0===e.parent)return 0;const i=e.screenSpaceError,r=((t-i)/(e.parent.screenSpaceError-i)+n-1)/n;return o.Z.clamp(r,0,1)}(t,i,n),p=a,m=1,g=r.megatextureIndex,Z=l.megatextureIndex;h[e+0]=f,h[e+1]=p,h[e+2]=m,h[e+3]=g,h[e+4]=Z,d[_]=w.LEAF<<16|u}else{const e=t.renderableKeyframeNodePrevious,n=0==t.level-e.spatialNode.level?w.LEAF:w.PACKED_LEAF_FROM_PARENT;d[_]=n<<16|e.megatextureIndex}u++}}(p,0,0,0,0),function(e,t,n,i){const o=f.Z.componentsLength(i.pixelFormat),r=Math.ceil(e.length/9),s=Math.max(1,9*Math.min(r,n)),a=Math.max(1,Math.ceil(r/n)),c=new Uint8Array(s*a*o);for(let t=0;t<e.length;t++){const n=e[t],i=t*o;for(let e=0;e<o;e++)c[i+e]=n>>>8*e&255}const l={source:{arrayBufferView:c,width:s,height:a},xOffset:0,yOffset:0};i.copyFrom(l)}(d,0,e.internalNodeTilesPerRow,e.internalNodeTexture),c&&function(e,t,n,i){const r=f.Z.componentsLength(i.pixelFormat),s=Math.ceil(e.length/5),a=Math.max(1,2*Math.min(s,n)),c=Math.max(1,Math.ceil(s/n)),l=new Uint8Array(a*c*r);for(let t=0;t<s;t++){const n=e[5*t+0],i=e[5*t+1],r=e[5*t+2],s=e[5*t+3],a=e[5*t+4],c=o.Z.clamp(Math.floor(65536*n),0,65535);l[8*t+0]=c>>>0&255,l[8*t+1]=c>>>8&255,l[8*t+2]=255&i,l[8*t+3]=255&r,l[8*t+4]=s>>>0&255,l[8*t+5]=s>>>8&255,l[8*t+6]=a>>>0&255,l[8*t+7]=a>>>8&255}const u={source:{arrayBufferView:l,width:a,height:c},xOffset:0,yOffset:0};i.copyFrom(u)}(h,0,e.leafNodeTilesPerRow,e.leafNodeTexture)}(this,v,b);const x=(0,l.Z)();this._debugPrint&&function(e,t,n,i){const o=e._keyframeCount,r=e.rootNode,a=Object.keys(u.Z.LoadState).length,c=new Array(a),l=new Array(a);let d=0;for(let e=0;e<a;e++){const t=new Array(o);c[e]=t;for(let e=0;e<o;e++)t[e]=0;l[e]=0}!function e(t){const n=t.keyframeNodes;for(let e=0;e<n.length;e++){const t=n[e],i=t.keyframe,o=t.state;c[o][i]+=1,l[o]+=1,d++}if((0,s.Z)(t.children))for(let n=0;n<8;n++)e(t.children[n])}(r);const h=`KEYFRAMES: ${c[u.Z.LoadState.LOADED]}`,f=`UNLOADED: ${l[u.Z.LoadState.UNLOADED]} | RECEIVING: ${l[u.Z.LoadState.RECEIVING]} | RECEIVED: ${l[u.Z.LoadState.RECEIVED]} | LOADED: ${l[u.Z.LoadState.LOADED]} | FAILED: ${l[u.Z.LoadState.FAILED]} | UNAVAILABLE: ${l[u.Z.LoadState.UNAVAILABLE]} | TOTAL: ${d}`,p=`LOAD: ${Math.round(100*t)/100} | OCT: ${Math.round(100*n)/100} | ALL: ${Math.round(100*i)/100}`;console.log(`${h} || ${f} || ${p}`)}(this,C-S,x-C,x-S)},b.prototype.isRenderable=function(e){return e.isRenderable(this._frameNumber)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){const e=this.megatextures,t=e.length;for(let n=0;n<t;n++)e[n]=e[n]&&e[n].destroy();return this.internalNodeTexture=this.internalNodeTexture&&this.internalNodeTexture.destroy(),this.leafNodeTexture=this.leafNodeTexture&&this.leafNodeTexture.destroy(),(0,a.Z)(this)};const w={INTERNAL:0,LEAF:1,PACKED_LEAF_FROM_PARENT:2};b.getApproximateTextureMemoryByteLength=function(e,t,n,i){let o=0;const r=n.length;for(let s=0;s<r;s++){const r=n[s],a=i[s],c=d.Z.getComponentCount(r);o+=h.Z.getApproximateTextureMemoryByteLength(e,t,c,a)}return o};const E=b},604450:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(234146),o=n(11020),r=n(906439),s=n(765153),a=n(729476),c=n(205522),l=n(709855),u=n(792560),d=n(587939),h=n(267428);const f=[3034,3035,3042,3043,3044],p=[4471,4559];function m(e){if(e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),!(0,o.Z)(e.url))throw new s.Z("options.url is required.");if(!(0,o.Z)(e.layers))throw new s.Z("options.layers is required.");if((0,o.Z)(e.times)&&!(0,o.Z)(e.clock))throw new s.Z("options.times was specified, so options.clock is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._getFeatureInfoUrl=(0,i.Z)(e.getFeatureInfoUrl,e.url);const t=c.Z.createIfNeeded(e.url),n=c.Z.createIfNeeded(this._getFeatureInfoUrl);t.setQueryParameters(m.DefaultParameters,!0),n.setQueryParameters(m.GetFeatureInfoDefaultParameters,!0),(0,o.Z)(e.parameters)&&t.setQueryParameters(g(e.parameters)),(0,o.Z)(e.getFeatureInfoParameters)&&n.setQueryParameters(g(e.getFeatureInfoParameters));const r=this;this._reload=void 0,(0,o.Z)(e.times)&&(this._timeDynamicImagery=new d.Z({clock:e.clock,times:e.times,requestImageFunction:function(e,t,n,i,o){return _(r,e,t,n,i,o)},reloadFunction:function(){(0,o.Z)(r._reload)&&r._reload()}}));const u={};if(u.layers=e.layers,u.bbox="{westProjected},{southProjected},{eastProjected},{northProjected}",u.width="{width}",u.height="{height}",parseFloat(t.queryParameters.version)>=1.3){u.crs=(0,i.Z)(e.crs,e.tilingScheme&&e.tilingScheme.projection instanceof l.Z?"EPSG:3857":"CRS:84");const t=u.crs.split(":");if("EPSG"===t[0]&&2===t.length){const e=Number(t[1]);(e>=4e3&&e<5e3&&!p.includes(e)||f.includes(e))&&(u.bbox="{southProjected},{westProjected},{northProjected},{eastProjected}")}}else u.srs=(0,i.Z)(e.srs,e.tilingScheme&&e.tilingScheme.projection instanceof l.Z?"EPSG:3857":"EPSG:4326");t.setQueryParameters(u,!0),n.setQueryParameters(u,!0);const Z={query_layers:e.layers,info_format:"{format}"};parseFloat(n.queryParameters.version)>=1.3?(Z.i="{i}",Z.j="{j}"):(Z.x="{i}",Z.y="{j}"),n.setQueryParameters(Z,!0),this._resource=t,this._pickFeaturesResource=n,this._layers=e.layers,this._tileProvider=new h.Z({url:t,pickFeaturesUrl:n,tilingScheme:(0,i.Z)(e.tilingScheme,new a.Z({ellipsoid:e.ellipsoid})),rectangle:e.rectangle,tileWidth:e.tileWidth,tileHeight:e.tileHeight,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,subdomains:e.subdomains,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit,getFeatureInfoFormats:(0,i.Z)(e.getFeatureInfoFormats,m.DefaultGetFeatureInfoFormats),enablePickFeatures:e.enablePickFeatures}),this._ready=!0,this._readyPromise=Promise.resolve(!0)}function _(e,t,n,i,r,s){const a=(0,o.Z)(s)?s.data:void 0,c=e._tileProvider;return(0,o.Z)(a)&&c._resource.setQueryParameters(a),c.requestImage(t,n,i,r)}function g(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t}Object.defineProperties(m.prototype,{url:{get:function(){return this._resource._url}},proxy:{get:function(){return this._resource.proxy}},layers:{get:function(){return this._layers}},tileWidth:{get:function(){return this._tileProvider.tileWidth}},tileHeight:{get:function(){return this._tileProvider.tileHeight}},maximumLevel:{get:function(){return this._tileProvider.maximumLevel}},minimumLevel:{get:function(){return this._tileProvider.minimumLevel}},tilingScheme:{get:function(){return this._tileProvider.tilingScheme}},rectangle:{get:function(){return this._tileProvider.rectangle}},tileDiscardPolicy:{get:function(){return this._tileProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._tileProvider.errorEvent}},ready:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.ready","WebMapServiceImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._tileProvider.ready}},readyPromise:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.readyPromise","WebMapServiceImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._tileProvider.readyPromise}},credit:{get:function(){return this._tileProvider.credit}},hasAlphaChannel:{get:function(){return this._tileProvider.hasAlphaChannel}},enablePickFeatures:{get:function(){return this._tileProvider.enablePickFeatures},set:function(e){this._tileProvider.enablePickFeatures=e}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},getFeatureInfoUrl:{get:function(){return this._getFeatureInfoUrl}},defaultAlpha:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultAlpha","WebMapServiceImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultAlpha","WebMapServiceImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultNightAlpha","WebMapServiceImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultNightAlpha","WebMapServiceImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultDayAlpha","WebMapServiceImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultDayAlpha","WebMapServiceImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultBrightness","WebMapServiceImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultBrightness","WebMapServiceImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultContrast","WebMapServiceImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultContrast","WebMapServiceImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultHue","WebMapServiceImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultHue","WebMapServiceImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultSaturation","WebMapServiceImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultSaturation","WebMapServiceImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultGamma","WebMapServiceImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultGamma","WebMapServiceImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultMinificationFilter","WebMapServiceImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultMinificationFilter","WebMapServiceImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,r.Z)("WebMapServiceImageryProvider.defaultMagnificationFilter","WebMapServiceImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,r.Z)("WebMapServiceImageryProvider.defaultMagnificationFilter","WebMapServiceImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),m.prototype.getTileCredits=function(e,t,n){return this._tileProvider.getTileCredits(e,t,n)},m.prototype.requestImage=function(e,t,n,i){let r;const s=this._timeDynamicImagery;let a;return(0,o.Z)(s)&&(a=s.currentInterval,r=s.getFromCache(e,t,n,i)),(0,o.Z)(r)||(r=_(this,e,t,n,i,a)),(0,o.Z)(r)&&(0,o.Z)(s)&&s.checkApproachingInterval(e,t,n,i),r},m.prototype.pickFeatures=function(e,t,n,i,r){const s=this._timeDynamicImagery;return function(e,t,n,i,r,s,a){const c=(0,o.Z)(a)?a.data:void 0,l=e._tileProvider;return(0,o.Z)(c)&&l._pickFeaturesResource.setQueryParameters(c),l.pickFeatures(t,n,i,r,s)}(this,e,t,n,i,r,(0,o.Z)(s)?s.currentInterval:void 0)},m.DefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"}),m.GetFeatureInfoDefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetFeatureInfo"}),m.DefaultGetFeatureInfoFormats=Object.freeze([Object.freeze(new u.Z("json","application/json")),Object.freeze(new u.Z("xml","text/xml")),Object.freeze(new u.Z("text","text/html"))]);const Z=m},203230:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(394579),o=n(865029),r=n(234146),s=n(11020),a=n(906439),c=n(765153),l=n(282910),u=n(143450),d=n(205522),h=n(931359),f=n(769426),p=n(587939);const m=Object.freeze({service:"WMTS",version:"1.0.0",request:"GetTile"});function _(e){if(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),!(0,s.Z)(e.url))throw new c.Z("options.url is required.");if(!(0,s.Z)(e.layer))throw new c.Z("options.layer is required.");if(!(0,s.Z)(e.style))throw new c.Z("options.style is required.");if(!(0,s.Z)(e.tileMatrixSetID))throw new c.Z("options.tileMatrixSetID is required.");if((0,s.Z)(e.times)&&!(0,s.Z)(e.clock))throw new c.Z("options.times was specified, so options.clock is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const t=d.Z.createIfNeeded(e.url),n=e.style,i=e.tileMatrixSetID,a=t.url,f=a.match(/{/g);if(!(0,s.Z)(f)||1===f.length&&/{s}/.test(a))t.setQueryParameters(m),this._useKvp=!0;else{const e={style:n,Style:n,TileMatrixSet:i};t.setTemplateValues(e),this._useKvp=!1}this._resource=t,this._layer=e.layer,this._style=n,this._tileMatrixSetID=i,this._tileMatrixLabels=e.tileMatrixLabels,this._format=(0,r.Z)(e.format,"image/jpeg"),this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=(0,s.Z)(e.tilingScheme)?e.tilingScheme:new h.Z({ellipsoid:e.ellipsoid}),this._tileWidth=(0,r.Z)(e.tileWidth,256),this._tileHeight=(0,r.Z)(e.tileHeight,256),this._minimumLevel=(0,r.Z)(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=(0,r.Z)(e.rectangle,this._tilingScheme.rectangle),this._dimensions=e.dimensions;const _=this;this._reload=void 0,(0,s.Z)(e.times)&&(this._timeDynamicImagery=new p.Z({clock:e.clock,times:e.times,requestImageFunction:function(e,t,n,i,o){return g(_,e,t,n,i,o)},reloadFunction:function(){(0,s.Z)(_._reload)&&_._reload()}})),this._readyPromise=Promise.resolve(!0),this._ready=!0;const Z=this._tilingScheme.positionToTileXY(u.Z.southwest(this._rectangle),this._minimumLevel),y=this._tilingScheme.positionToTileXY(u.Z.northeast(this._rectangle),this._minimumLevel),b=(Math.abs(y.x-Z.x)+1)*(Math.abs(y.y-Z.y)+1);if(b>4)throw new c.Z(`The imagery provider's rectangle and minimumLevel indicate that there are ${b} tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.`);this._errorEvent=new l.Z;const v=e.credit;this._credit="string"==typeof v?new o.Z(v):v,this._subdomains=e.subdomains,Array.isArray(this._subdomains)?this._subdomains=this._subdomains.slice():(0,s.Z)(this._subdomains)&&this._subdomains.length>0?this._subdomains=this._subdomains.split(""):this._subdomains=["a","b","c"]}function g(e,t,n,o,r,a){const c=e._tileMatrixLabels,l=(0,s.Z)(c)?c[o]:o.toString(),u=e._subdomains,d=e._dimensions,h=(0,s.Z)(a)?a.data:void 0;let p,m;if(e._useKvp){let a={};a.tilematrix=l,a.layer=e._layer,a.style=e._style,a.tilerow=n,a.tilecol=t,a.tilematrixset=e._tileMatrixSetID,a.format=e._format,(0,s.Z)(d)&&(a=(0,i.Z)(a,d)),(0,s.Z)(h)&&(a=(0,i.Z)(a,h)),m={s:u[(t+n+o)%u.length]},p=e._resource.getDerivedResource({queryParameters:a,request:r}),p.setTemplateValues(m)}else m={TileMatrix:l,TileRow:n.toString(),TileCol:t.toString(),s:u[(t+n+o)%u.length]},p=e._resource.getDerivedResource({request:r}),p.setTemplateValues(m),(0,s.Z)(d)&&p.setTemplateValues(d),(0,s.Z)(h)&&p.setTemplateValues(h);return f.Z.loadImage(e,p)}Object.defineProperties(_.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},ready:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.ready","WebMapTileServiceImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),!0}},readyPromise:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.readyPromise","WebMapTileServiceImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},dimensions:{get:function(){return this._dimensions},set:function(e){this._dimensions!==e&&(this._dimensions=e,(0,s.Z)(this._reload)&&this._reload())}},defaultAlpha:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultAlpha","WebMapTileServiceImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultAlpha","WebMapTileServiceImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultNightAlpha","WebMapTileServiceImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultNightAlpha","WebMapTileServiceImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultDayAlpha","WebMapTileServiceImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultDayAlpha","WebMapTileServiceImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultBrightness","WebMapTileServiceImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultBrightness","WebMapTileServiceImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultContrast","WebMapTileServiceImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultContrast","WebMapTileServiceImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultHue","WebMapTileServiceImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultHue","WebMapTileServiceImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultSaturation","WebMapTileServiceImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultSaturation","WebMapTileServiceImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultGamma","WebMapTileServiceImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultGamma","WebMapTileServiceImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultMinificationFilter","WebMapTileServiceImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultMinificationFilter","WebMapTileServiceImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,a.Z)("WebMapTileServiceImageryProvider.defaultMagnificationFilter","WebMapTileServiceImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,a.Z)("WebMapTileServiceImageryProvider.defaultMagnificationFilter","WebMapTileServiceImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),_.prototype.getTileCredits=function(e,t,n){},_.prototype.requestImage=function(e,t,n,i){let o;const r=this._timeDynamicImagery;let a;return(0,s.Z)(r)&&(a=r.currentInterval,o=r.getFromCache(e,t,n,i)),(0,s.Z)(o)||(o=g(this,e,t,n,i,a)),(0,s.Z)(o)&&(0,s.Z)(r)&&r.checkApproachingInterval(e,t,n,i),o},_.prototype.pickFeatures=function(e,t,n,i,o){};const Z=_},878:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(11020),o=n(804868),r=n(973591),s=n(53839),a=n(807549),c=n(661679),l=n(431056),u=n(417148),d=n(245929),h=n(559594),f=n(367896);const p=function(e,t){const n=new h.Z(e);(0,f.Z)(n,e);const{shaderBuilder:p,clippingPlanes:m,clippingPlanesLength:_}=n;if(_>0){const e="getClippingPlane",n=(0,a.Z)(m,t),i=0,o=n.indexOf(")")+1,r=n.indexOf("{",o)+1,s=n.indexOf("}",r),c=n.slice(i,o),l=n.slice(r,s);p.addFunction(e,c,d.Z.FRAGMENT),p.addFunctionLines(e,[l])}const g=p.clone();g.addDefine("PICKING",void 0,d.Z.FRAGMENT);const Z=p.buildShaderProgram(t),y=g.buildShaderProgram(t),b=u.Z.fromCache({cull:{enabled:!0,face:s.Z.BACK},depthTest:{enabled:!1},depthMask:!1,blending:r.Z.PRE_MULTIPLIED_ALPHA_BLEND}),v=t.getViewportQuadVertexArray(),A=e._depthTest,T=new c.Z({vertexArray:v,primitiveType:o.Z.TRIANGLES,renderState:b,shaderProgram:Z,uniformMap:n.uniformMap,modelMatrix:e._compoundModelMatrix,pass:l.Z.VOXELS,executeInClosestFrustum:!0,owner:this,cull:A,occlude:A}),w=c.Z.shallowClone(T,new c.Z);if(w.shaderProgram=y,w.pickOnly=!0,(0,i.Z)(e._drawCommand)){const t=e._drawCommand;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}if((0,i.Z)(e._drawCommandPick)){const t=e._drawCommandPick;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}e._drawCommand=T,e._drawCommandPick=w}},282556:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(11020),o=n(143450),r=n(888340),s=n(714233);async function a(e,t){const n=t.terrainProvider,r=t.mapProjection,c=r.ellipsoid;let l;const u=t.camera.getRectangleCameraCoordinates(e);if(l=t.mode===s.Z.SCENE3D?c.cartesianToCartographic(u):r.unproject(u),!(0,i.Z)(n))return l;(0,i.Z)(n._readyPromise)?await n._readyPromise:(0,i.Z)(n.readyPromise)&&await n.readyPromise;const d=n.availability;if(!(0,i.Z)(d)||t.mode===s.Z.SCENE2D)return l;const h=[o.Z.center(e),o.Z.southeast(e),o.Z.southwest(e),o.Z.northeast(e),o.Z.northwest(e)],f=await a._sampleTerrainMostDetailed(n,h);let p=!1;const m=f.reduce((function(e,t){return(0,i.Z)(t.height)?(p=!0,Math.max(t.height,e)):e}),-Number.MAX_VALUE),_=l;return p&&(_.height+=m),_}a._sampleTerrainMostDetailed=r.Z;const c=a},200659:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=function(e,t,n,i,o){return function(){const r=document.createElement("canvas"),s=o+2*i;r.height=r.width=s;const a=r.getContext("2d");return a.clearRect(0,0,s,s),0!==i&&(a.beginPath(),a.arc(s/2,s/2,s/2,0,2*Math.PI,!0),a.closePath(),a.fillStyle=n,a.fill(),e<1&&(a.save(),a.globalCompositeOperation="destination-out",a.beginPath(),a.arc(s/2,s/2,o/2,0,2*Math.PI,!0),a.closePath(),a.fillStyle="black",a.fill(),a.restore())),a.beginPath(),a.arc(s/2,s/2,o/2,0,2*Math.PI,!0),a.closePath(),a.fillStyle=t,a.fill(),r}}},272802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(234146),o=n(588632),r=n(741741);const s=function(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT);const t=(0,i.Z)(e.style,r.Z.AERIAL);return o.Z.fromAssetId(t)}},849515:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(792617),o=n(234146),r=n(11020),s=n(717341),a=n(590292);function c(e,t){const n=(0,s.Z)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!(0,r.Z)(n))return;if(!(0,r.Z)(e.schema))return void c._oneTimeWarning("findContentMetadata-missing-root-schema","Could not find a metadata schema for content metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");const a=(0,o.Z)(e.schema.classes,o.Z.EMPTY_OBJECT);if((0,r.Z)(n.class)){const e=a[n.class];return new i.Z({content:n,class:e})}}c._oneTimeWarning=a.Z;const l=c},106215:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(11020),o=n(717341);const r=function(e,t){const n=e.metadataExtension;if(!(0,i.Z)(n))return;const r=n.groups,s=(0,o.Z)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"].group:t.group;if("number"==typeof s)return r[s];const a=n.groupIds.findIndex((function(e){return e===s}));return a>=0?r[a]:void 0}},390523:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(234146),o=n(11020),r=n(717341),s=n(740929),a=n(590292);function c(e,t){const n=(0,r.Z)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!(0,o.Z)(n))return;if(!(0,o.Z)(e.schema))return void c._oneTimeWarning("findTileMetadata-missing-root-schema","Could not find a metadata schema for tile metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");const a=(0,i.Z)(e.schema.classes,i.Z.EMPTY_OBJECT);if((0,o.Z)(n.class)){const e=a[n.class];return new s.Z({tile:n,class:e})}}c._oneTimeWarning=a.Z;const l=c},708895:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(405254),o=n(660904),r=n(798336),s=n(449809),a=n(571945),c=n(664288),l=n(659635);const u={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},d={SCALAR:void 0,VEC2:i.Z,VEC3:o.Z,VEC4:r.Z,MAT2:a.Z,MAT3:c.Z,MAT4:l.Z},h=function(e){const t=e.componentType;let n;n="string"==typeof t?s.Z.fromName(t):t;const i=u[e.type],o=d[e.type];return{componentsPerAttribute:i,classType:o,createArrayBufferView:function(e,t,o){return s.Z.createArrayBufferView(n,e,t,i*o)}}}},591055:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(790087);const o=function(e,t,n){return i.Z.typeOf.string("samplerUniformName",e),i.Z.typeOf.string("matrixUniformName",t),i.Z.typeOf.string("styleUniformName",n),`    float clipDistance = clip(gl_FragCoord, ${e}, ${t}); \n    vec4 clippingPlanesEdgeColor = vec4(1.0); \n    clippingPlanesEdgeColor.rgb = ${n}.rgb; \n    float clippingPlanesEdgeWidth = ${n}.a; \n    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) \n    { \n        out_FragColor = clippingPlanesEdgeColor;\n    } \n`}},807549:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(405254),o=n(790087),r=n(753577);const s=new i.Z,a=function(e,t){o.Z.typeOf.object("clippingPlaneCollection",e),o.Z.typeOf.object("context",t);const n=e.unionClippingRegions,i=e.length,a=r.Z.useFloatTexture(t),c=r.Z.getTextureResolution(e,t,s),l=c.x,u=c.y;let d=a?function(e,t){const n=1/t;let i=`${1/e}`;-1===i.indexOf(".")&&(i+=".0");let o=`${n}`;-1===o.indexOf(".")&&(o+=".0");return`vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform)\n{\n    int pixY = clippingPlaneNumber / ${e};\n    int pixX = clippingPlaneNumber - (pixY * ${e});\n    float u = (float(pixX) + 0.5) * ${i};\n    float v = (float(pixY) + 0.5) * ${o};\n    vec4 plane = texture(packedClippingPlanes, vec2(u, v));\n    return czm_transformPlane(plane, transform);\n}\n`}(l,u):function(e,t){const n=1/t;let i=`${1/e}`;-1===i.indexOf(".")&&(i+=".0");let o=`${n}`;-1===o.indexOf(".")&&(o+=".0");return`vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform)\n{\n    int clippingPlaneStartIndex = clippingPlaneNumber * 2;\n    int pixY = clippingPlaneStartIndex / ${e};\n    int pixX = clippingPlaneStartIndex - (pixY * ${e});\n    float u = (float(pixX) + 0.5) * ${i};\n    float v = (float(pixY) + 0.5) * ${o};\n    vec4 oct32 = texture(packedClippingPlanes, vec2(u, v)) * 255.0;\n    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);\n    vec4 plane;\n    plane.xyz = czm_octDecode(oct, 65535.0);\n    plane.w = czm_unpackFloat(texture(packedClippingPlanes, vec2(u + ${i}, v)));\n    return czm_transformPlane(plane, transform);\n}\n`}(l,u);return d+="\n",d+=n?function(e){return`float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix)\n{\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float clipAmount;\n    float pixelWidth = czm_metersPerPixel(position);\n    bool breakAndDiscard = false;\n    for (int i = 0; i < ${e}; ++i)\n    {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));\n        if (amount <= 0.0)\n        {\n           breakAndDiscard = true;\n           break;\n        }\n    }\n    if (breakAndDiscard) {\n        discard;\n    }\n    return clipAmount;\n}\n`}(i):function(e){return`float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix)\n{\n    bool clipped = true;\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float clipAmount = 0.0;\n    float pixelWidth = czm_metersPerPixel(position);\n    for (int i = 0; i < ${e}; ++i)\n    {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        clipAmount = max(amount, clipAmount);\n        clipped = clipped && (amount <= 0.0);\n    }\n    if (clipped)\n    {\n        discard;\n    }\n    return clipAmount;\n}\n`}(i),d}},717341:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(11020);const o=function(e,t){return(0,i.Z)(e)&&(0,i.Z)(e.extensions)&&(0,i.Z)(e.extensions[t])}},943618:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(790087),o=n(449809),r=n(11020),s=n(234146),a=n(906439),c=n(765153),l=n(217066),u=n(978730),d=n(764172),h=n(557073),f=n(600959),p=n(708895),m=n(788844),_=n(943881),g=n(640397),Z=n(878942),y=n(583982),b=n(708956),v=n(590292);function A(e){i.Z.typeOf.number("options.count",e.count),i.Z.typeOf.object("options.batchTable",e.batchTable);const t=e.count,n=e.batchTable,a=e.binaryBody,v=(0,s.Z)(e.parseAsPropertyAttributes,!1),w=e.customAttributeOutput;if(v&&!(0,r.Z)(w))throw new c.Z("customAttributeOutput is required when parsing batch table as property attributes");const E=function(e){const t=e.HIERARCHY,n=e.extras,i=e.extensions;let o,s;(0,r.Z)(t)?(A._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),o=t):(0,r.Z)(i)&&(o=i["3DTILES_batch_table_hierarchy"]);const a={};for(const t in e){if(!e.hasOwnProperty(t)||"HIERARCHY"===t||"extensions"===t||"extras"===t)continue;const n=e[t];Array.isArray(n)?(s=(0,r.Z)(s)?s:{},s[t]=n):a[t]=n}return{binaryProperties:a,jsonProperties:s,hierarchy:o,extras:n,extensions:i}}(n);let S,C;(0,r.Z)(E.jsonProperties)&&(S=new m.Z({count:t,properties:E.jsonProperties})),(0,r.Z)(E.hierarchy)&&(C=new u.Z({extension:E.hierarchy,binaryBody:a}));const x=_.Z.BATCH_TABLE_CLASS_NAME,I=E.binaryProperties;let P,D,O;if(v){const e=function(e,t,n,i,s){const a={},c={};let u=0;for(const t in n){if(!n.hasOwnProperty(t))continue;const d=n[t];if(!(0,r.Z)(i)&&!(0,r.Z)(d.typedArray))throw new l.Z(`Property ${t} requires a batch table binary.`);let h=b.Z.sanitizeGlslIdentifier(t);(""===h||a.hasOwnProperty(h))&&(h=`property_${u}`,u++);const f=T(d);f.name=t,a[h]=f;let m=h.toUpperCase();m.startsWith("_")||(m=`_${m}`);let _=d.typedArray;(0,r.Z)(_)||(_=(0,p.Z)(d).createArrayBufferView(i.buffer,i.byteOffset+d.byteOffset,e));const g=new y.Z.Attribute;g.name=m,g.count=e,g.type=d.type;const Z=o.Z.fromTypedArray(_);Z!==o.Z.INT&&Z!==o.Z.UNSIGNED_INT&&Z!==o.Z.DOUBLE||(A._oneTimeWarning("Cast pnts property to floats",`Point cloud property "${m}" will be cast to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),_=new Float32Array(_)),g.componentDatatype=o.Z.fromTypedArray(_),g.typedArray=_,s.push(g),c[h]={attribute:m}}const d={classes:{}};d.classes[t]={properties:a};const h=g.Z.fromJson(d);return{class:t,propertyAttributeJson:{properties:c},transcodedSchema:h,transcodedClass:h.classes[t]}}(t,x,I,a,w);O=e.transcodedSchema,D=[new h.Z({propertyAttribute:e.propertyAttributeJson,class:e.transcodedClass})]}else{const e=function(e,t,n,i){const o={},s={},a={};let c=0;for(const t in n){if(!n.hasOwnProperty(t))continue;if(!(0,r.Z)(i))throw new l.Z(`Property ${t} requires a batch table binary.`);const u=n[t],d=(0,p.Z)(u);s[t]={bufferView:c},o[t]=T(u),a[c]=d.createArrayBufferView(i.buffer,i.byteOffset+u.byteOffset,e),c++}const u={classes:{}};u.classes[t]={properties:o};const d=g.Z.fromJson(u);return{featureTableJson:{class:t,count:e,properties:s},bufferViewsTypedArrays:a,transcodedSchema:d,transcodedClass:d.classes[t]}}(t,x,I,a);O=e.transcodedSchema;const n=e.featureTableJson;P=new Z.Z({count:n.count,properties:n.properties,class:e.transcodedClass,bufferViews:e.bufferViewsTypedArrays}),D=[]}const L=[];if((0,r.Z)(P)||(0,r.Z)(S)||(0,r.Z)(C)){const e=new f.Z({id:0,name:"Batch Table",count:t,metadataTable:P,jsonMetadataTable:S,batchTableHierarchy:C});L.push(e)}const N={schema:O,propertyTables:L,propertyAttributes:D,extensions:E.extensions,extras:E.extras};return new d.Z(N)}function T(e){const t=function(e){switch(e){case"BYTE":return"INT8";case"UNSIGNED_BYTE":return"UINT8";case"SHORT":return"INT16";case"UNSIGNED_SHORT":return"UINT16";case"INT":return"INT32";case"UNSIGNED_INT":return"UINT32";case"FLOAT":return"FLOAT32";case"DOUBLE":return"FLOAT64"}}(e.componentType);return{type:e.type,componentType:t}}A._deprecationWarning=a.Z,A._oneTimeWarning=v.Z;const w=A},377559:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(790087),o=n(11020);function r(e,t){const n=`${e}_BOUNDING_BOX`,i=t.getPropertyBySemantic(n);if((0,o.Z)(i))return{box:i};const r=`${e}_BOUNDING_REGION`,s=t.getPropertyBySemantic(r);if((0,o.Z)(s))return{region:s};const a=`${e}_BOUNDING_SPHERE`,c=t.getPropertyBySemantic(a);return(0,o.Z)(c)?{sphere:c}:void 0}function s(e,t){const n=`${e}_MINIMUM_HEIGHT`;return t.getPropertyBySemantic(n)}function a(e,t){const n=`${e}_MAXIMUM_HEIGHT`;return t.getPropertyBySemantic(n)}const c=function(e){return i.Z.typeOf.object("tileMetadata",e),{tile:{boundingVolume:r("TILE",e),minimumHeight:s("TILE",e),maximumHeight:a("TILE",e)},content:{boundingVolume:r("CONTENT",e),minimumHeight:s("CONTENT",e),maximumHeight:a("CONTENT",e)}}}},532298:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(790087),o=n(394579),r=n(234146),s=n(11020),a=n(600959),c=n(870320),l=n(764172),u=n(878942);function d(e){const t={class:e.class,properties:{}},n=e.properties;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e],r={channels:h(i.channels),extras:i.extras,extensions:i.extensions};t.properties[e]=(0,o.Z)(i.texture,r,!0)}return t}function h(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]="rgba".indexOf(e[i]);return n}const f=function(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).extension,n=e.schema;let o;i.Z.typeOf.object("options.extension",t),i.Z.typeOf.object("options.schema",n);const h=[];let f;if((0,s.Z)(t.featureTables))for(f=Object.keys(t.featureTables).sort(),o=0;o<f.length;o++){const i=f[o],r=t.featureTables[i],s=n.classes[r.class],c=new u.Z({count:r.count,properties:r.properties,class:s,bufferViews:e.bufferViews});h.push(new a.Z({id:i,count:r.count,metadataTable:c,extras:r.extras,extensions:r.extensions}))}const p=[];if((0,s.Z)(t.featureTextures))for(f=Object.keys(t.featureTextures).sort(),o=0;o<f.length;o++){const i=f[o],r=t.featureTextures[i];p.push(new c.Z({id:i,propertyTexture:d(r),class:n.classes[r.class],textures:e.textures}))}return new l.Z({schema:n,propertyTables:h,propertyTextures:p,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}},963951:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(790087),o=n(234146),r=n(11020),s=n(600959),a=n(870320),c=n(557073),l=n(764172),u=n(878942);const d=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).extension,n=e.schema;i.Z.typeOf.object("options.extension",t),i.Z.typeOf.object("options.schema",n);const d=[];if((0,r.Z)(t.propertyTables))for(let i=0;i<t.propertyTables.length;i++){const o=t.propertyTables[i],r=n.classes[o.class],a=new u.Z({count:o.count,properties:o.properties,class:r,bufferViews:e.bufferViews});d.push(new s.Z({id:i,name:o.name,count:o.count,metadataTable:a,extras:o.extras,extensions:o.extensions}))}const h=[];if((0,r.Z)(t.propertyTextures))for(let i=0;i<t.propertyTextures.length;i++){const o=t.propertyTextures[i];h.push(new a.Z({id:i,name:o.name,propertyTexture:o,class:n.classes[o.class],textures:e.textures}))}const f=[];if((0,r.Z)(t.propertyAttributes))for(let e=0;e<t.propertyAttributes.length;e++){const i=t.propertyAttributes[e];f.push(new c.Z({id:e,name:i.name,class:n.classes[i.class],propertyAttribute:i}))}return new l.Z({schema:n,propertyTables:d,propertyTextures:h,propertyAttributes:f,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}},926040:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(11020),o=n(911698),r=n(252376),s=n(217066),a=n(864238);const c=function(e){const t=new Uint8Array(e);let n=(0,r.Z)(t);if("glTF"===n&&(n="glb"),a.Z.isBinaryFormat(n))return{contentType:n,binaryPayload:t};const c=function(e){let t;try{t=(0,o.Z)(e)}catch(e){throw new s.Z("Invalid tile content.")}return t}(t);if((0,i.Z)(c.root))return{contentType:a.Z.EXTERNAL_TILESET,jsonPayload:c};if((0,i.Z)(c.asset))return{contentType:a.Z.GLTF,jsonPayload:c};if((0,i.Z)(c.tileAvailability))return{contentType:a.Z.IMPLICIT_SUBTREE_JSON,jsonPayload:c};if((0,i.Z)(c.type))return{contentType:a.Z.GEOJSON,jsonPayload:c};if((0,i.Z)(c.voxelTable))return{contentType:a.Z.VOXEL_JSON,jsonPayload:c};throw new s.Z("Invalid tile content.")}},367896:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(784246),r=n(245929);function s(e){return e===o.Z.SCALAR?"float":e===o.Z.VEC2?"vec2":e===o.Z.VEC3?"vec3":e===o.Z.VEC4?"vec4":void 0}function a(e){return e===o.Z.SCALAR?".r":e===o.Z.VEC2?".ra":e===o.Z.VEC3?".rgb":e===o.Z.VEC4?"":void 0}function c(e){let t=e.toString();return-1===t.indexOf(".")&&(t=`${e}.0`),t}function l(e,t){return e===o.Z.SCALAR?"":`[${t}]`}const u=function(e,t){const{shaderBuilder:n}=e,{names:u,types:d,componentTypes:h,minimumValues:f,maximumValues:p}=t._provider,m=d.length,_=(0,i.Z)(f)&&(0,i.Z)(p);n.addDefine("METADATA_COUNT",m,r.Z.FRAGMENT),_&&n.addDefine("STATISTICS",void 0,r.Z.FRAGMENT);for(let e=0;e<m;e++){const t=u[e],i=d[e],o=`PropertyStatistics_${t}`,a=`PropertyStatistics_${t}`;n.addStruct(o,a,r.Z.FRAGMENT);const c=s(i);n.addStructField(o,c,"min"),n.addStructField(o,c,"max")}const g="Statistics",Z="Statistics",y="statistics";n.addStruct(g,Z,r.Z.FRAGMENT);for(let e=0;e<m;e++){const t=u[e],i=`PropertyStatistics_${t}`,o=t;n.addStructField(g,i,o)}const b="Metadata",v="Metadata",A="metadata";n.addStruct(b,v,r.Z.FRAGMENT),n.addStructField(b,Z,y);for(let e=0;e<m;e++){const t=u[e],i=s(d[e]);n.addStructField(b,i,t)}for(let e=0;e<m;e++){const t=u[e],i=(T=d[e])===o.Z.SCALAR?"vec3":T===o.Z.VEC2?"mat2":T===o.Z.VEC3?"mat3":T===o.Z.VEC4?"mat4":void 0,s=`VoxelProperty_${t}`,a=`VoxelProperty_${t}`;n.addStruct(s,a,r.Z.FRAGMENT),n.addStructField(s,i,"partialDerivativeLocal"),n.addStructField(s,i,"partialDerivativeWorld"),n.addStructField(s,i,"partialDerivativeView"),n.addStructField(s,i,"partialDerivativeValid")}var T;const w="Voxel",E="Voxel";n.addStruct(w,E,r.Z.FRAGMENT);for(let e=0;e<m;e++){const t=u[e],i=`VoxelProperty_${t}`;n.addStructField(w,i,t)}n.addStructField(w,"vec3","positionEC"),n.addStructField(w,"vec3","positionUv"),n.addStructField(w,"vec3","positionShapeUv"),n.addStructField(w,"vec3","positionUvLocal"),n.addStructField(w,"vec3","viewDirUv"),n.addStructField(w,"vec3","viewDirWorld"),n.addStructField(w,"vec3","surfaceNormal"),n.addStructField(w,"float","travelDistance");const S="FragmentInput";n.addStruct(S,"FragmentInput",r.Z.FRAGMENT),n.addStructField(S,v,A),n.addStructField(S,E,"voxel");const C="Properties",x="Properties",I="properties";n.addStruct(C,x,r.Z.FRAGMENT);for(let e=0;e<m;e++){const t=u[e],i=s(d[e]);n.addStructField(C,i,t)}{const e="clearProperties";n.addFunction(e,`${x} clearProperties()`,r.Z.FRAGMENT),n.addFunctionLines(e,[`${x} ${I};`]);for(let t=0;t<m;t++){const i=u[t],o=d[t],r=(h[t],s(o));n.addFunctionLines(e,[`${I}.${i} = ${r}(0.0);`])}n.addFunctionLines(e,[`return ${I};`])}{const e="sumProperties";n.addFunction(e,`${x} sumProperties(${x} propertiesA, ${x} propertiesB)`,r.Z.FRAGMENT),n.addFunctionLines(e,[`${x} ${I};`]);for(let t=0;t<m;t++){const i=u[t];n.addFunctionLines(e,[`${I}.${i} = propertiesA.${i} + propertiesB.${i};`])}n.addFunctionLines(e,[`return ${I};`])}{const e="scaleProperties";n.addFunction(e,`${x} scaleProperties(${x} ${I}, float scale)`,r.Z.FRAGMENT),n.addFunctionLines(e,[`${x} scaledProperties = ${I};`]);for(let t=0;t<m;t++){const i=u[t];n.addFunctionLines(e,[`scaledProperties.${i} *= scale;`])}n.addFunctionLines(e,["return scaledProperties;"])}{const e="mixProperties";n.addFunction(e,`${x} mixProperties(${x} propertiesA, ${x} propertiesB, float mixFactor)`,r.Z.FRAGMENT),n.addFunctionLines(e,[`${x} ${I};`]);for(let t=0;t<m;t++){const i=u[t];n.addFunctionLines(e,[`${I}.${i} = mix(propertiesA.${i}, propertiesB.${i}, mixFactor);`])}n.addFunctionLines(e,[`return ${I};`])}{const e="copyPropertiesToMetadata";n.addFunction(e,`void copyPropertiesToMetadata(in ${x} ${I}, inout ${v} ${A})`,r.Z.FRAGMENT);for(let t=0;t<m;t++){const i=u[t];n.addFunctionLines(e,[`${A}.${i} = ${I}.${i};`])}}if(_){const e="setStatistics";n.addFunction(e,`void setStatistics(inout ${Z} ${y})`,r.Z.FRAGMENT);for(let t=0;t<m;t++){const i=u[t],r=d[t],s=o.Z.getComponentCount(r);for(let o=0;o<s;o++){const s=l(r,o),a=f[t][o],u=p[t][o];n.addFunctionLines(e,[`${y}.${i}.min${s} = ${c(a)};`,`${y}.${i}.max${s} = ${c(u)};`])}}}{const e="getPropertiesFromMegatextureAtUv";n.addFunction(e,`${x} getPropertiesFromMegatextureAtUv(vec2 texcoord)`,r.Z.FRAGMENT),n.addFunctionLines(e,[`${x} ${I};`]);for(let t=0;t<m;t++){const i=u[t],o=d[t],r=(h[t],a(o));n.addFunctionLines(e,[`properties.${i} = texture(u_megatextureTextures[${t}], texcoord)${r};`])}n.addFunctionLines(e,[`return ${I};`])}}},64941:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="#ifdef MRT\nlayout (location = 0) out vec4 out_FragData_0;\nlayout (location = 1) out vec4 out_FragData_1;\n#else\nlayout (location = 0) out vec4 out_FragColor;\n#endif\n\nuniform vec4 u_bgColor;\nuniform sampler2D u_depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    if (texture(u_depthTexture, v_textureCoordinates).r < 1.0)\n    {\n#ifdef MRT\n        out_FragData_0 = u_bgColor;\n        out_FragData_1 = vec4(u_bgColor.a);\n#else\n        out_FragColor = u_bgColor;\n#endif\n        return;\n    }\n    \n    discard;\n}\n"},89234:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\nin vec3 v_tangentEC;\nin vec3 v_bitangentEC;\nin vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n    mat3 tangentToEyeMatrix = czm_tangentToEyeSpaceMatrix(v_normalEC, v_tangentEC, v_bitangentEC);\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = tangentToEyeMatrix;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},176935:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin vec3 tangent;\nin vec3 bitangent;\nin vec2 st;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\nout vec3 v_tangentEC;\nout vec3 v_bitangentEC;\nout vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_tangentEC = czm_normal * tangent;                       // tangent in eye coordinates\n    v_bitangentEC = czm_normal * bitangent;                   // bitangent in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},449899:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},198178:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},412748:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\nin vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},46698:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin vec2 st;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\nout vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},644114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform vec3 u_radiiAndDynamicAtmosphereColor;\n\nuniform float u_atmosphereLightIntensity;\nuniform float u_atmosphereRayleighScaleHeight;\nuniform float u_atmosphereMieScaleHeight;\nuniform float u_atmosphereMieAnisotropy;\nuniform vec3 u_atmosphereRayleighCoefficient;\nuniform vec3 u_atmosphereMieCoefficient;\n\nconst float ATMOSPHERE_THICKNESS = 111e3; // The thickness of the atmosphere in meters.\nconst int PRIMARY_STEPS_MAX = 16; // Maximum number of times the ray from the camera to the world position (primary ray) is sampled.\nconst int LIGHT_STEPS_MAX = 4; // Maximum number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.\n\n/**\n * Rational approximation to tanh(x)\n*/\nfloat approximateTanh(float x) {\n    float x2 = x * x;\n    return max(-1.0, min(+1.0, x * (27.0 + x2) / (27.0 + 9.0 * x2)));\n}\n\n/**\n * This function computes the colors contributed by Rayliegh and Mie scattering on a given ray, as well as\n * the transmittance value for the ray.\n *\n * @param {czm_ray} primaryRay The ray from the camera to the position.\n * @param {float} primaryRayLength The length of the primary ray.\n * @param {vec3} lightDirection The direction of the light to calculate the scattering from.\n * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.\n * @param {vec3} mieColor The variable the Mie scattering will be written to.\n * @param {float} opacity The variable the transmittance will be written to.\n * @glslFunction\n */\nvoid computeScattering(\n    czm_ray primaryRay,\n    float primaryRayLength,\n    vec3 lightDirection,\n    float atmosphereInnerRadius,\n    out vec3 rayleighColor,\n    out vec3 mieColor,\n    out float opacity\n) {\n\n    // Initialize the default scattering amounts to 0.\n    rayleighColor = vec3(0.0);\n    mieColor = vec3(0.0);\n    opacity = 0.0;\n\n    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;\n\n    vec3 origin = vec3(0.0);\n\n    // Calculate intersection from the camera to the outer ring of the atmosphere.\n    czm_raySegment primaryRayAtmosphereIntersect = czm_raySphereIntersectionInterval(primaryRay, origin, atmosphereOuterRadius);\n\n    // Return empty colors if no intersection with the atmosphere geometry.\n    if (primaryRayAtmosphereIntersect == czm_emptyRaySegment) {\n        return;\n    }\n\n    // To deal with smaller values of PRIMARY_STEPS (e.g. 4)\n    // we implement a split strategy: sky or horizon.\n    // For performance reasons, instead of a if/else branch\n    // a soft choice is implemented through a weight 0.0 <= w_stop_gt_lprl <= 1.0\n    float x = 1e-7 * primaryRayAtmosphereIntersect.stop / length(primaryRayLength);\n    // Value close to 0.0: close to the horizon\n    // Value close to 1.0: above in the sky\n    float w_stop_gt_lprl = 0.5 * (1.0 + approximateTanh(x));\n    \n    // The ray should start from the first intersection with the outer atmopshere, or from the camera position, if it is inside the atmosphere.\n    float start_0 = primaryRayAtmosphereIntersect.start;\n    primaryRayAtmosphereIntersect.start = max(primaryRayAtmosphereIntersect.start, 0.0);\n    // The ray should end at the exit from the atmosphere or at the distance to the vertex, whichever is smaller.\n    primaryRayAtmosphereIntersect.stop = min(primaryRayAtmosphereIntersect.stop, length(primaryRayLength));\n\n    // For the number of ray steps, distinguish inside or outside atmosphere (outer space)\n    // (1) from outer space we have to use more ray steps to get a realistic rendering\n    // (2) within atmosphere we need fewer steps for faster rendering\n    float x_o_a = start_0 - ATMOSPHERE_THICKNESS; // ATMOSPHERE_THICKNESS used as an ad-hoc constant, no precise meaning here, only the order of magnitude matters\n    float w_inside_atmosphere = 1.0 - 0.5 * (1.0 + approximateTanh(x_o_a));\n    int PRIMARY_STEPS = PRIMARY_STEPS_MAX - int(w_inside_atmosphere * 12.0); // Number of times the ray from the camera to the world position (primary ray) is sampled.\n    int LIGHT_STEPS = LIGHT_STEPS_MAX - int(w_inside_atmosphere * 2.0); // Number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.\n\n    // Setup for sampling positions along the ray - starting from the intersection with the outer ring of the atmosphere.\n    float rayPositionLength = primaryRayAtmosphereIntersect.start;\n    // (1) Outside the atmosphere: constant rayStepLength\n    // (2) Inside atmosphere: variable rayStepLength to compensate the rough rendering of the smaller number of ray steps\n    float totalRayLength = primaryRayAtmosphereIntersect.stop - rayPositionLength;\n    float rayStepLengthIncrease = w_inside_atmosphere * ((1.0 - w_stop_gt_lprl) * totalRayLength / (float(PRIMARY_STEPS * (PRIMARY_STEPS + 1)) / 2.0));\n    float rayStepLength = max(1.0 - w_inside_atmosphere, w_stop_gt_lprl) * totalRayLength / max(7.0 * w_inside_atmosphere, float(PRIMARY_STEPS));\n\n    vec3 rayleighAccumulation = vec3(0.0);\n    vec3 mieAccumulation = vec3(0.0);\n    vec2 opticalDepth = vec2(0.0);\n    vec2 heightScale = vec2(u_atmosphereRayleighScaleHeight, u_atmosphereMieScaleHeight);\n\n    // Sample positions on the primary ray.\n    for (int i = 0; i < PRIMARY_STEPS_MAX; ++i) {\n\n        // The loop should be: for (int i = 0; i < PRIMARY_STEPS; ++i) {...} but WebGL1 cannot\n        // loop with non-constant condition, so it has to break early instead\n        if (i >= PRIMARY_STEPS) {\n            break;\n        }\n\n        // Calculate sample position along viewpoint ray.\n        vec3 samplePosition = primaryRay.origin + primaryRay.direction * (rayPositionLength + rayStepLength);\n\n        // Calculate height of sample position above ellipsoid.\n        float sampleHeight = length(samplePosition) - atmosphereInnerRadius;\n\n        // Calculate and accumulate density of particles at the sample position.\n        vec2 sampleDensity = exp(-sampleHeight / heightScale) * rayStepLength;\n        opticalDepth += sampleDensity;\n\n        // Generate ray from the sample position segment to the light source, up to the outer ring of the atmosphere.\n        czm_ray lightRay = czm_ray(samplePosition, lightDirection);\n        czm_raySegment lightRayAtmosphereIntersect = czm_raySphereIntersectionInterval(lightRay, origin, atmosphereOuterRadius);\n\n        float lightStepLength = lightRayAtmosphereIntersect.stop / float(LIGHT_STEPS);\n        float lightPositionLength = 0.0;\n\n        vec2 lightOpticalDepth = vec2(0.0);\n\n        // Sample positions along the light ray, to accumulate incidence of light on the latest sample segment.\n        for (int j = 0; j < LIGHT_STEPS_MAX; ++j) {\n\n            // The loop should be: for (int j = 0; i < LIGHT_STEPS; ++j) {...} but WebGL1 cannot\n            // loop with non-constant condition, so it has to break early instead\n            if (j >= LIGHT_STEPS) {\n                break;\n            }\n\n            // Calculate sample position along light ray.\n            vec3 lightPosition = samplePosition + lightDirection * (lightPositionLength + lightStepLength * 0.5);\n\n            // Calculate height of the light sample position above ellipsoid.\n            float lightHeight = length(lightPosition) - atmosphereInnerRadius;\n\n            // Calculate density of photons at the light sample position.\n            lightOpticalDepth += exp(-lightHeight / heightScale) * lightStepLength;\n\n            // Increment distance on light ray.\n            lightPositionLength += lightStepLength;\n        }\n\n        // Compute attenuation via the primary ray and the light ray.\n        vec3 attenuation = exp(-((u_atmosphereMieCoefficient * (opticalDepth.y + lightOpticalDepth.y)) + (u_atmosphereRayleighCoefficient * (opticalDepth.x + lightOpticalDepth.x))));\n\n        // Accumulate the scattering.\n        rayleighAccumulation += sampleDensity.x * attenuation;\n        mieAccumulation += sampleDensity.y * attenuation;\n\n        // Increment distance on primary ray.\n        rayPositionLength += (rayStepLength += rayStepLengthIncrease);\n    }\n\n    // Compute the scattering amount.\n    rayleighColor = u_atmosphereRayleighCoefficient * rayleighAccumulation;\n    mieColor = u_atmosphereMieCoefficient * mieAccumulation;\n\n    // Compute the transmittance i.e. how much light is passing through the atmosphere.\n    opacity = length(exp(-((u_atmosphereMieCoefficient * opticalDepth.y) + (u_atmosphereRayleighCoefficient * opticalDepth.x))));\n}\n\nvec4 computeAtmosphereColor(\n    vec3 positionWC,\n    vec3 lightDirection,\n    vec3 rayleighColor,\n    vec3 mieColor,\n    float opacity\n) {\n    // Setup the primary ray: from the camera position to the vertex position.\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n\n    float cosAngle = dot(cameraToPositionWCDirection, lightDirection);\n    float cosAngleSq = cosAngle * cosAngle;\n\n    float G = u_atmosphereMieAnisotropy;\n    float GSq = G * G;\n\n    // The Rayleigh phase function.\n    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);\n    // The Mie phase function.\n    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));\n\n    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.\n    vec3 rayleigh = rayleighPhase * rayleighColor;\n    vec3 mie = miePhase * mieColor;\n\n    vec3 color = (rayleigh + mie) * u_atmosphereLightIntensity;\n\n    return vec4(color, opacity);\n}\n"},672495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec2 v_textureCoordinates;\nconst float M_PI = 3.141592653589793;\n\nfloat vdcRadicalInverse(int i)\n{\n    float r;\n    float base = 2.0;\n    float value = 0.0;\n    float invBase = 1.0 / base;\n    float invBi = invBase;\n    for (int x = 0; x < 100; x++)\n    {\n        if (i <= 0)\n        {\n            break;\n        }\n        r = mod(float(i), base);\n        value += r * invBi;\n        invBi *= invBase;\n        i = int(float(i) * invBase);\n    }\n    return value;\n}\n\nvec2 hammersley2D(int i, int N)\n{\n    return vec2(float(i) / float(N), vdcRadicalInverse(i));\n}\n\nvec3 importanceSampleGGX(vec2 xi, float roughness, vec3 N)\n{\n    float a = roughness * roughness;\n    float phi = 2.0 * M_PI * xi.x;\n    float cosTheta = sqrt((1.0 - xi.y) / (1.0 + (a * a - 1.0) * xi.y));\n    float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n    vec3 H = vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);\n    vec3 upVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n    vec3 tangentX = normalize(cross(upVector, N));\n    vec3 tangentY = cross(N, tangentX);\n    return tangentX * H.x + tangentY * H.y + N * H.z;\n}\n\nfloat G1_Smith(float NdotV, float k)\n{\n    return NdotV / (NdotV * (1.0 - k) + k);\n}\n\nfloat G_Smith(float roughness, float NdotV, float NdotL)\n{\n    float k = roughness * roughness / 2.0;\n    return G1_Smith(NdotV, k) * G1_Smith(NdotL, k);\n}\n\nvec2 integrateBrdf(float roughness, float NdotV)\n{\n    vec3 V = vec3(sqrt(1.0 - NdotV * NdotV), 0.0, NdotV);\n    float A = 0.0;\n    float B = 0.0;\n    const int NumSamples = 1024;\n    for (int i = 0; i < NumSamples; i++)\n    {\n        vec2 xi = hammersley2D(i, NumSamples);\n        vec3 H = importanceSampleGGX(xi, roughness, vec3(0.0, 0.0, 1.0));\n        vec3 L = 2.0 * dot(V, H) * H - V;\n        float NdotL = clamp(L.z, 0.0, 1.0);\n        float NdotH = clamp(H.z, 0.0, 1.0);\n        float VdotH = clamp(dot(V, H), 0.0, 1.0);\n        if (NdotL > 0.0)\n        {\n            float G = G_Smith(roughness, NdotV, NdotL);\n            float G_Vis = G * VdotH / (NdotH * NdotV);\n            float Fc = pow(1.0 - VdotH, 5.0);\n            A += (1.0 - Fc) * G_Vis;\n            B += Fc * G_Vis;\n        }\n    }\n    return vec2(A, B) / float(NumSamples);\n}\n\nvoid main()\n{\n    out_FragColor = vec4(integrateBrdf(v_textureCoordinates.y, v_textureCoordinates.x), 0.0, 1.0);\n}\n"},469585:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D u_opaqueDepthTexture;\nuniform sampler2D u_translucentDepthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    float opaqueDepth = texture(u_opaqueDepthTexture, v_textureCoordinates).r;\n    float translucentDepth = texture(u_translucentDepthTexture, v_textureCoordinates).r;\n    translucentDepth = czm_branchFreeTernary(translucentDepth > opaqueDepth, 1.0, translucentDepth);\n    out_FragColor = czm_packDepth(translucentDepth);\n}\n"},766359:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="/**\n * Compositing for Weighted Blended Order-Independent Transparency. See:\n * - http://jcgt.org/published/0002/02/09/\n * - http://casual-effects.blogspot.com/2014/03/weighted-blended-order-independent.html\n */\n\nuniform sampler2D u_opaque;\nuniform sampler2D u_accumulation;\nuniform sampler2D u_revealage;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 opaque = texture(u_opaque, v_textureCoordinates);\n    vec4 accum = texture(u_accumulation, v_textureCoordinates);\n    float r = texture(u_revealage, v_textureCoordinates).r;\n\n#ifdef MRT\n    vec4 transparent = vec4(accum.rgb / clamp(r, 1e-4, 5e4), accum.a);\n#else\n    vec4 transparent = vec4(accum.rgb / clamp(accum.a, 1e-4, 5e4), r);\n#endif\n\n    out_FragColor = (1.0 - transparent.a) * transparent + transparent.a * opaque;\n\n    if (opaque != czm_backgroundColor)\n    {\n        out_FragColor.a = 1.0;\n    }\n}\n"},652870:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec4 positionEC;\n\nvoid main()\n{\n    vec3 position;\n    vec3 direction;\n    if (czm_orthographicIn3D == 1.0)\n    {\n        vec2 uv = (gl_FragCoord.xy -  czm_viewport.xy) / czm_viewport.zw;\n        vec2 minPlane = vec2(czm_frustumPlanes.z, czm_frustumPlanes.y); // left, bottom\n        vec2 maxPlane = vec2(czm_frustumPlanes.w, czm_frustumPlanes.x); // right, top\n        position = vec3(mix(minPlane, maxPlane, uv), 0.0);\n        direction = vec3(0.0, 0.0, -1.0);\n    } \n    else \n    {\n        position = vec3(0.0);\n        direction = normalize(positionEC.xyz);\n    }\n\n    czm_ray ray = czm_ray(position, direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n    if (!czm_isEmpty(intersection))\n    {\n        out_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n    }\n    else\n    {\n        discard;\n    }\n\n    czm_writeLogDepth();\n}\n"},552516:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec4 position;\n\nout vec4 positionEC;\n\nvoid main()\n{\n    positionEC = czm_modelView * position;\n    gl_Position = czm_projection * positionEC;\n\n    czm_vertexLogDepth();\n}\n"},771970:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform vec3 u_radii;\nuniform vec3 u_oneOverEllipsoidRadiiSquared;\n\nin vec3 v_positionEC;\n\nvec4 computeEllipsoidColor(czm_ray ray, float intersection, float side)\n{\n    vec3 positionEC = czm_pointAlongRay(ray, intersection);\n    vec3 positionMC = (czm_inverseModelView * vec4(positionEC, 1.0)).xyz;\n    vec3 geodeticNormal = normalize(czm_geodeticSurfaceNormal(positionMC, vec3(0.0), u_oneOverEllipsoidRadiiSquared));\n    vec3 sphericalNormal = normalize(positionMC / u_radii);\n    vec3 normalMC = geodeticNormal * side;              // normalized surface normal (always facing the viewer) in model coordinates\n    vec3 normalEC = normalize(czm_normal * normalMC);   // normalized surface normal in eye coordiantes\n\n    vec2 st = czm_ellipsoidWgs84TextureCoordinates(sphericalNormal);\n    vec3 positionToEyeEC = -positionEC;\n\n    czm_materialInput materialInput;\n    materialInput.s = st.s;\n    materialInput.st = st;\n    materialInput.str = (positionMC + u_radii) / u_radii;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef ONLY_SUN_LIGHTING\n    return czm_private_phong(normalize(positionToEyeEC), material, czm_sunDirectionEC);\n#else\n    return czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n\nvoid main()\n{\n    // PERFORMANCE_TODO: When dynamic branching is available, compute ratio of maximum and minimum radii\n    // in the vertex shader. Only when it is larger than some constant, march along the ray.\n    // Otherwise perform one intersection test which will be the common case.\n\n    // Test if the ray intersects a sphere with the ellipsoid's maximum radius.\n    // For very oblate ellipsoids, using the ellipsoid's radii for an intersection test\n    // may cause false negatives. This will discard fragments before marching the ray forward.\n    float maxRadius = max(u_radii.x, max(u_radii.y, u_radii.z)) * 1.5;\n    vec3 direction = normalize(v_positionEC);\n    vec3 ellipsoidCenter = czm_modelView[3].xyz;\n\n    float t1 = -1.0;\n    float t2 = -1.0;\n\n    float b = -2.0 * dot(direction, ellipsoidCenter);\n    float c = dot(ellipsoidCenter, ellipsoidCenter) - maxRadius * maxRadius;\n\n    float discriminant = b * b - 4.0 * c;\n    if (discriminant >= 0.0) {\n        t1 = (-b - sqrt(discriminant)) * 0.5;\n        t2 = (-b + sqrt(discriminant)) * 0.5;\n    }\n\n    if (t1 < 0.0 && t2 < 0.0) {\n        discard;\n    }\n\n    float t = min(t1, t2);\n    if (t < 0.0) {\n        t = 0.0;\n    }\n\n    // March ray forward to intersection with larger sphere and find\n    czm_ray ray = czm_ray(t * direction, direction);\n\n    vec3 ellipsoid_inverseRadii = vec3(1.0 / u_radii.x, 1.0 / u_radii.y, 1.0 / u_radii.z);\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoidCenter, ellipsoid_inverseRadii);\n\n    if (czm_isEmpty(intersection))\n    {\n        discard;\n    }\n\n    // If the viewer is outside, compute outsideFaceColor, with normals facing outward.\n    vec4 outsideFaceColor = (intersection.start != 0.0) ? computeEllipsoidColor(ray, intersection.start, 1.0) : vec4(0.0);\n\n    // If the viewer either is inside or can see inside, compute insideFaceColor, with normals facing inward.\n    vec4 insideFaceColor = (outsideFaceColor.a < 1.0) ? computeEllipsoidColor(ray, intersection.stop, -1.0) : vec4(0.0);\n\n    out_FragColor = mix(insideFaceColor, outsideFaceColor, outsideFaceColor.a);\n    out_FragColor.a = 1.0 - (1.0 - insideFaceColor.a) * (1.0 - outsideFaceColor.a);\n\n#if (defined(WRITE_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))\n    t = (intersection.start != 0.0) ? intersection.start : intersection.stop;\n    vec3 positionEC = czm_pointAlongRay(ray, t);\n    vec4 positionCC = czm_projection * vec4(positionEC, 1.0);\n#ifdef LOG_DEPTH\n    czm_writeLogDepth(1.0 + positionCC.w);\n#else\n    float z = positionCC.z / positionCC.w;\n\n    float n = czm_depthRange.near;\n    float f = czm_depthRange.far;\n\n    gl_FragDepth = (z * (f - n) + f + n) * 0.5;\n#endif\n#endif\n}\n"},571690:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 position;\n\nuniform vec3 u_radii;\n\nout vec3 v_positionEC;\n\nvoid main()\n{\n    // In the vertex data, the cube goes from (-1.0, -1.0, -1.0) to (1.0, 1.0, 1.0) in model coordinates.\n    // Scale to consider the radii.  We could also do this once on the CPU when using the BoxGeometry,\n    // but doing it here allows us to change the radii without rewriting the vertex data, and\n    // allows all ellipsoids to reuse the same vertex data.\n    vec4 p = vec4(u_radii * position, 1.0);\n\n    v_positionEC = (czm_modelView * p).xyz;     // position in eye coordinates\n    gl_Position = czm_modelViewProjection * p;  // position in clip coordinates\n\n    // With multi-frustum, when the ellipsoid primitive is positioned on the intersection of two frustums\n    // and close to terrain, the terrain (writes depth) in the closest frustum can overwrite part of the\n    // ellipsoid (does not write depth) that was rendered in the farther frustum.\n    //\n    // Here, we clamp the depth in the vertex shader to avoid being overwritten; however, this creates\n    // artifacts since some fragments can be alpha blended twice.  This is solved by only rendering\n    // the ellipsoid in the closest frustum to the viewer.\n    gl_Position.z = clamp(gl_Position.z, czm_depthRange.near, czm_depthRange.far);\n\n    czm_vertexLogDepth();\n}\n"},705665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="/**\n * @license\n * Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *  * Neither the name of NVIDIA CORPORATION nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// NVIDIA GameWorks Graphics Samples GitHub link: https://github.com/NVIDIAGameWorks/GraphicsSamples\n// Original FXAA 3.11 shader link: https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/master/samples/es3-kepler/FXAA/FXAA3_11.h\n\n// Steps used to integrate into Cesium:\n// * The following defines are set:\n//       #define FXAA_PC 1\n//       #define FXAA_WEBGL_1 1\n//       #define FXAA_GREEN_AS_LUMA 1\n//       #define FXAA_EARLY_EXIT 1\n//       #define FXAA_GLSL_120 1\n// * All other preprocessor directives besides the FXAA_QUALITY__P* directives were removed.\n// * Double underscores are invalid for preprocessor directives so replace them with a single underscore. Replace\n//   /FXAA_QUALITY__P(.*)/g with /FXAA_QUALITY__P$1/.\n// * There are no implicit conversions from ivec* to vec* so replace:\n//       #define FxaaInt2 ivec2\n//           with\n//       #define FxaaInt2 vec2\n// * The texture2DLod function is only available in vertex shaders so replace:\n//       #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n//       #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n//           with\n//       #define FxaaTexTop(t, p) texture(t, p)\n//       #define FxaaTexOff(t, p, o, r) texture(t, p + (o * r))\n// * FXAA_QUALITY_PRESET is prepended in the javascript code. We may want to expose that setting in the future.\n// * The following parameters to FxaaPixelShader are unused and can be removed:\n//       fxaaConsolePosPos\n//       fxaaConsoleRcpFrameOpt\n//       fxaaConsoleRcpFrameOpt2\n//       fxaaConsole360RcpFrameOpt2\n//       fxaaConsoleEdgeSharpness\n//       fxaaConsoleEdgeThreshold\n//       fxaaConsoleEdgeThresholdMi\n//       fxaaConsole360ConstDir\n\n//\n// Choose the quality preset.\n// This needs to be compiled into the shader as it effects code.\n// Best option to include multiple presets is to\n// in each shader define the preset, then include this file.\n//\n// OPTIONS\n// -----------------------------------------------------------------------\n// 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n// 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n// 39       - no dither, very expensive\n//\n// NOTES\n// -----------------------------------------------------------------------\n// 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n// 13 = about same speed as FXAA 3.9 and better than 12\n// 23 = closest to FXAA 3.9 visually and performance wise\n//  _ = the lowest digit is directly related to performance\n// _  = the highest digit is directly related to style\n//\n//#define FXAA_QUALITY_PRESET 12\n\n\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n#define FxaaBool bool\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 vec2\n#define FxaaTex sampler2D\n\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTexTop(t, p) texture(t, p)\n#define FxaaTexOff(t, p, o, r) texture(t, p + (o * r))\n\nFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\nFxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {___a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_SUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality\n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin\n) {\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n    #define lumaM rgbyM.y\n    FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n/*--------------------------------------------------------------------------*/\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n/*--------------------------------------------------------------------------*/\n    if(earlyExit)\n        return rgbyM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n/*--------------------------------------------------------------------------*/\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n/*--------------------------------------------------------------------------*/\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n/*--------------------------------------------------------------------------*/\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n/*--------------------------------------------------------------------------*/\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n/*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n    #endif\n/*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n/*--------------------------------------------------------------------------*/\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n/*--------------------------------------------------------------------------*/\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n/*--------------------------------------------------------------------------*/\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n}\n"},643267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform vec4 u_initialColor;\n\n#if TEXTURE_UNITS > 0\nuniform sampler2D u_dayTextures[TEXTURE_UNITS];\nuniform vec4 u_dayTextureTranslationAndScale[TEXTURE_UNITS];\nuniform bool u_dayTextureUseWebMercatorT[TEXTURE_UNITS];\n\n#ifdef APPLY_ALPHA\nuniform float u_dayTextureAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_DAY_NIGHT_ALPHA\nuniform float u_dayTextureNightAlpha[TEXTURE_UNITS];\nuniform float u_dayTextureDayAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SPLIT\nuniform float u_dayTextureSplit[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_BRIGHTNESS\nuniform float u_dayTextureBrightness[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_CONTRAST\nuniform float u_dayTextureContrast[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_HUE\nuniform float u_dayTextureHue[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SATURATION\nuniform float u_dayTextureSaturation[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_GAMMA\nuniform float u_dayTextureOneOverGamma[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_IMAGERY_CUTOUT\nuniform vec4 u_dayTextureCutoutRectangles[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_COLOR_TO_ALPHA\nuniform vec4 u_colorsToAlpha[TEXTURE_UNITS];\n#endif\n\nuniform vec4 u_dayTextureTexCoordsRectangle[TEXTURE_UNITS];\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\nuniform sampler2D u_waterMask;\nuniform vec4 u_waterMaskTranslationAndScale;\nuniform float u_zoomedOutOceanSpecularIntensity;\n#endif\n\n#ifdef SHOW_OCEAN_WAVES\nuniform sampler2D u_oceanNormalMap;\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\nuniform vec2 u_lightingFadeDistance;\n#endif\n\n#ifdef TILE_LIMIT_RECTANGLE\nuniform vec4 u_cartographicLimitRectangle;\n#endif\n\n#ifdef GROUND_ATMOSPHERE\nuniform vec2 u_nightFadeDistance;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\nuniform highp sampler2D u_clippingPlanes;\nuniform mat4 u_clippingPlanesMatrix;\nuniform vec4 u_clippingPlanesEdgeStyle;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG) && defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\nuniform float u_minimumBrightness;\n#endif\n\n#ifdef COLOR_CORRECT\nuniform vec3 u_hsbShift; // Hue, saturation, brightness\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\nuniform vec4 u_fillHighlightColor;\n#endif\n\n#ifdef TRANSLUCENT\nuniform vec4 u_frontFaceAlphaByDistance;\nuniform vec4 u_backFaceAlphaByDistance;\nuniform vec4 u_translucencyRectangle;\n#endif\n\n#ifdef UNDERGROUND_COLOR\nuniform vec4 u_undergroundColor;\nuniform vec4 u_undergroundColorAlphaByDistance;\n#endif\n\n#ifdef ENABLE_VERTEX_LIGHTING\nuniform float u_lambertDiffuseMultiplier;\nuniform float u_vertexShadowDarkness;\n#endif\n\nin vec3 v_positionMC;\nin vec3 v_positionEC;\nin vec3 v_textureCoordinates;\nin vec3 v_normalMC;\nin vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nin float v_height;\nin float v_slope;\nin float v_aspect;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nin float v_distance;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG)\nin vec3 v_atmosphereRayleighColor;\nin vec3 v_atmosphereMieColor;\nin float v_atmosphereOpacity;\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nfloat interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT) || defined(APPLY_MATERIAL)\nvec4 alphaBlend(vec4 sourceColor, vec4 destinationColor)\n{\n    return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);\n}\n#endif\n\n#ifdef TRANSLUCENT\nbool inTranslucencyRectangle()\n{\n    return\n        v_textureCoordinates.x > u_translucencyRectangle.x &&\n        v_textureCoordinates.x < u_translucencyRectangle.z &&\n        v_textureCoordinates.y > u_translucencyRectangle.y &&\n        v_textureCoordinates.y < u_translucencyRectangle.w;\n}\n#endif\n\nvec4 sampleAndBlend(\n    vec4 previousColor,\n    sampler2D textureToSample,\n    vec2 tileTextureCoordinates,\n    vec4 textureCoordinateRectangle,\n    vec4 textureCoordinateTranslationAndScale,\n    float textureAlpha,\n    float textureNightAlpha,\n    float textureDayAlpha,\n    float textureBrightness,\n    float textureContrast,\n    float textureHue,\n    float textureSaturation,\n    float textureOneOverGamma,\n    float split,\n    vec4 colorToAlpha,\n    float nightBlend)\n{\n    // This crazy step stuff sets the alpha to 0.0 if this following condition is true:\n    //    tileTextureCoordinates.s < textureCoordinateRectangle.s ||\n    //    tileTextureCoordinates.s > textureCoordinateRectangle.p ||\n    //    tileTextureCoordinates.t < textureCoordinateRectangle.t ||\n    //    tileTextureCoordinates.t > textureCoordinateRectangle.q\n    // In other words, the alpha is zero if the fragment is outside the rectangle\n    // covered by this texture.  Would an actual 'if' yield better performance?\n    vec2 alphaMultiplier = step(textureCoordinateRectangle.st, tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n    alphaMultiplier = step(vec2(0.0), textureCoordinateRectangle.pq - tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    textureAlpha *= mix(textureDayAlpha, textureNightAlpha, nightBlend);\n#endif\n\n    vec2 translation = textureCoordinateTranslationAndScale.xy;\n    vec2 scale = textureCoordinateTranslationAndScale.zw;\n    vec2 textureCoordinates = tileTextureCoordinates * scale + translation;\n    vec4 value = texture(textureToSample, textureCoordinates);\n    vec3 color = value.rgb;\n    float alpha = value.a;\n\n#ifdef APPLY_COLOR_TO_ALPHA\n    vec3 colorDiff = abs(color.rgb - colorToAlpha.rgb);\n    colorDiff.r = max(max(colorDiff.r, colorDiff.g), colorDiff.b);\n    alpha = czm_branchFreeTernary(colorDiff.r < colorToAlpha.a, 0.0, alpha);\n#endif\n\n#if !defined(APPLY_GAMMA)\n    vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));\n    color = tempColor.rgb;\n    alpha = tempColor.a;\n#else\n    color = pow(color, vec3(textureOneOverGamma));\n#endif\n\n#ifdef APPLY_SPLIT\n    float splitPosition = czm_splitPosition;\n    // Split to the left\n    if (split < 0.0 && gl_FragCoord.x > splitPosition) {\n       alpha = 0.0;\n    }\n    // Split to the right\n    else if (split > 0.0 && gl_FragCoord.x < splitPosition) {\n       alpha = 0.0;\n    }\n#endif\n\n#ifdef APPLY_BRIGHTNESS\n    color = mix(vec3(0.0), color, textureBrightness);\n#endif\n\n#ifdef APPLY_CONTRAST\n    color = mix(vec3(0.5), color, textureContrast);\n#endif\n\n#ifdef APPLY_HUE\n    color = czm_hue(color, textureHue);\n#endif\n\n#ifdef APPLY_SATURATION\n    color = czm_saturation(color, textureSaturation);\n#endif\n\n    float sourceAlpha = alpha * textureAlpha;\n    float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);\n    outAlpha += sign(outAlpha) - 1.0;\n\n    vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;\n\n    // When rendering imagery for a tile in multiple passes,\n    // some GPU/WebGL implementation combinations will not blend fragments in\n    // additional passes correctly if their computation includes an unmasked\n    // divide-by-zero operation,\n    // even if it's not in the output or if the output has alpha zero.\n    //\n    // For example, without sanitization for outAlpha,\n    // this renders without artifacts:\n    //   if (outAlpha == 0.0) { outColor = vec3(0.0); }\n    //\n    // but using czm_branchFreeTernary will cause portions of the tile that are\n    // alpha-zero in the additional pass to render as black instead of blending\n    // with the previous pass:\n    //   outColor = czm_branchFreeTernary(outAlpha == 0.0, vec3(0.0), outColor);\n    //\n    // So instead, sanitize against divide-by-zero,\n    // store this state on the sign of outAlpha, and correct on return.\n\n    return vec4(outColor, max(outAlpha, 0.0));\n}\n\nvec3 colorCorrect(vec3 rgb) {\n#ifdef COLOR_CORRECT\n    // Convert rgb color to hsb\n    vec3 hsb = czm_RGBToHSB(rgb);\n    // Perform hsb shift\n    hsb.x += u_hsbShift.x; // hue\n    hsb.y = clamp(hsb.y + u_hsbShift.y, 0.0, 1.0); // saturation\n    hsb.z = hsb.z > czm_epsilon7 ? hsb.z + u_hsbShift.z : 0.0; // brightness\n    // Convert shifted hsb back to rgb\n    rgb = czm_HSBToRGB(hsb);\n#endif\n    return rgb;\n}\n\nvec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend);\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float specularMapValue, float fade);\n\nconst float fExposure = 2.0;\n\nvec3 computeEllipsoidPosition()\n{\n    float mpp = czm_metersPerPixel(vec4(0.0, 0.0, -czm_currentFrustum.x, 1.0), 1.0);\n    vec2 xy = gl_FragCoord.xy / czm_viewport.zw * 2.0 - vec2(1.0);\n    xy *= czm_viewport.zw * mpp * 0.5;\n\n    vec3 direction = normalize(vec3(xy, -czm_currentFrustum.x));\n    czm_ray ray = czm_ray(vec3(0.0), direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n\n    vec3 ellipsoidPosition = czm_pointAlongRay(ray, intersection.start);\n    return (czm_inverseView * vec4(ellipsoidPosition, 1.0)).xyz;\n}\n\nvoid main()\n{\n#ifdef TILE_LIMIT_RECTANGLE\n    if (v_textureCoordinates.x < u_cartographicLimitRectangle.x || u_cartographicLimitRectangle.z < v_textureCoordinates.x ||\n        v_textureCoordinates.y < u_cartographicLimitRectangle.y || u_cartographicLimitRectangle.w < v_textureCoordinates.y)\n        {\n            discard;\n        }\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    float clipDistance = clip(gl_FragCoord, u_clippingPlanes, u_clippingPlanesMatrix);\n#endif\n\n#if defined(SHOW_REFLECTIVE_OCEAN) || defined(ENABLE_DAYNIGHT_SHADING) || defined(HDR)\n    vec3 normalMC = czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0));   // normalized surface normal in model coordinates\n    vec3 normalEC = czm_normal3D * normalMC;                                         // normalized surface normal in eye coordiantes\n#endif\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    float nightBlend = 1.0 - clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0, 0.0, 1.0);\n#else\n    float nightBlend = 0.0;\n#endif\n\n    // The clamp below works around an apparent bug in Chrome Canary v23.0.1241.0\n    // where the fragment shader sees textures coordinates < 0.0 and > 1.0 for the\n    // fragments on the edges of tiles even though the vertex shader is outputting\n    // coordinates strictly in the 0-1 range.\n    vec4 color = computeDayColor(u_initialColor, clamp(v_textureCoordinates, 0.0, 1.0), nightBlend);\n\n#ifdef SHOW_TILE_BOUNDARIES\n    if (v_textureCoordinates.x < (1.0/256.0) || v_textureCoordinates.x > (255.0/256.0) ||\n        v_textureCoordinates.y < (1.0/256.0) || v_textureCoordinates.y > (255.0/256.0))\n    {\n        color = vec4(1.0, 0.0, 0.0, 1.0);\n    }\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\n    float cameraDist;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        cameraDist = max(czm_frustumPlanes.x - czm_frustumPlanes.y, czm_frustumPlanes.w - czm_frustumPlanes.z) * 0.5;\n    }\n    else if (czm_sceneMode == czm_sceneModeColumbusView)\n    {\n        cameraDist = -czm_view[3].z;\n    }\n    else\n    {\n        cameraDist = length(czm_view[3]);\n    }\n    float fadeOutDist = u_lightingFadeDistance.x;\n    float fadeInDist = u_lightingFadeDistance.y;\n    if (czm_sceneMode != czm_sceneMode3D) {\n        vec3 radii = czm_ellipsoidRadii;\n        float maxRadii = max(radii.x, max(radii.y, radii.z));\n        fadeOutDist -= maxRadii;\n        fadeInDist -= maxRadii;\n    }\n    float fade = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.0, 1.0);\n#else\n    float fade = 0.0;\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n    vec2 waterMaskTranslation = u_waterMaskTranslationAndScale.xy;\n    vec2 waterMaskScale = u_waterMaskTranslationAndScale.zw;\n    vec2 waterMaskTextureCoordinates = v_textureCoordinates.xy * waterMaskScale + waterMaskTranslation;\n    waterMaskTextureCoordinates.y = 1.0 - waterMaskTextureCoordinates.y;\n\n    float mask = texture(u_waterMask, waterMaskTextureCoordinates).r;\n\n    if (mask > 0.0)\n    {\n        mat3 enuToEye = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalEC);\n\n        vec2 ellipsoidTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC);\n        vec2 ellipsoidFlippedTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC.zyx);\n\n        vec2 textureCoordinates = mix(ellipsoidTextureCoordinates, ellipsoidFlippedTextureCoordinates, czm_morphTime * smoothstep(0.9, 0.95, normalMC.z));\n\n        color = computeWaterColor(v_positionEC, textureCoordinates, enuToEye, color, mask, fade);\n    }\n#endif\n\n#ifdef APPLY_MATERIAL\n    czm_materialInput materialInput;\n    materialInput.st = v_textureCoordinates.st;\n    materialInput.normalEC = normalize(v_normalEC);\n    materialInput.positionToEyeEC = -v_positionEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalize(v_normalEC));     \n    materialInput.slope = v_slope;\n    materialInput.height = v_height;\n    materialInput.aspect = v_aspect;\n    czm_material material = czm_getMaterial(materialInput);\n    vec4 materialColor = vec4(material.diffuse, material.alpha);\n    color = alphaBlend(materialColor, color);\n#endif\n\n#ifdef ENABLE_VERTEX_LIGHTING\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalize(v_normalEC)) * u_lambertDiffuseMultiplier + u_vertexShadowDarkness, 0.0, 1.0);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#elif defined(ENABLE_DAYNIGHT_SHADING)\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0 + 0.3, 0.0, 1.0);\n    diffuseIntensity = mix(1.0, diffuseIntensity, fade);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#else\n    vec4 finalColor = color;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = u_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = u_clippingPlanesEdgeStyle.a;\n\n    if (clipDistance < clippingPlanesEdgeWidth)\n    {\n        finalColor = clippingPlanesEdgeColor;\n    }\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\n    finalColor = vec4(mix(finalColor.rgb, u_fillHighlightColor.rgb, u_fillHighlightColor.a), finalColor.a);\n#endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG)\n    if (!czm_backFacing())\n    {\n        bool dynamicLighting = false;\n        #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n            dynamicLighting = true;     \n        #endif\n\n        vec3 rayleighColor;\n        vec3 mieColor;\n        float opacity;\n\n        vec3 positionWC;\n        vec3 lightDirection;\n\n        // When the camera is far away (camera distance > nightFadeOutDistance), the scattering is computed in the fragment shader.\n        // Otherwise, the scattering is computed in the vertex shader.\n        #ifdef PER_FRAGMENT_GROUND_ATMOSPHERE\n            positionWC = computeEllipsoidPosition();\n            lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(positionWC));\n            computeAtmosphereScattering(\n                positionWC,\n                lightDirection,\n                rayleighColor,\n                mieColor,\n                opacity\n            );\n        #else\n            positionWC = v_positionMC;\n            lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(positionWC));\n            rayleighColor = v_atmosphereRayleighColor;\n            mieColor = v_atmosphereMieColor;\n            opacity = v_atmosphereOpacity;\n        #endif\n\n        rayleighColor = colorCorrect(rayleighColor);\n        mieColor = colorCorrect(mieColor);\n\n        vec4 groundAtmosphereColor = computeAtmosphereColor(positionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n        // Fog is applied to tiles selected for fog, close to the Earth.\n        #ifdef FOG\n            vec3 fogColor = groundAtmosphereColor.rgb;\n            \n            // If there is lighting, apply that to the fog.\n            #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n                float darken = clamp(dot(normalize(czm_viewerPositionWC), atmosphereLightDirection), u_minimumBrightness, 1.0);\n                fogColor *= darken;                \n            #endif\n\n            #ifndef HDR\n                fogColor.rgb = czm_acesTonemapping(fogColor.rgb);\n                fogColor.rgb = czm_inverseGamma(fogColor.rgb);\n            #endif\n            \n            const float modifier = 0.15;\n            finalColor = vec4(czm_fog(v_distance, finalColor.rgb, fogColor.rgb, modifier), finalColor.a);\n\n        #else\n            // The transmittance is based on optical depth i.e. the length of segment of the ray inside the atmosphere.\n            // This value is larger near the \"circumference\", as it is further away from the camera. We use it to\n            // brighten up that area of the ground atmosphere.\n            const float transmittanceModifier = 0.5;\n            float transmittance = transmittanceModifier + clamp(1.0 - groundAtmosphereColor.a, 0.0, 1.0);\n\n            vec3 finalAtmosphereColor = finalColor.rgb + groundAtmosphereColor.rgb * transmittance;\n\n            #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n                float fadeInDist = u_nightFadeDistance.x;\n                float fadeOutDist = u_nightFadeDistance.y;\n            \n                float sunlitAtmosphereIntensity = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.05, 1.0);\n                float darken = clamp(dot(normalize(positionWC), atmosphereLightDirection), 0.0, 1.0);\n                vec3 darkenendGroundAtmosphereColor = mix(groundAtmosphereColor.rgb, finalAtmosphereColor.rgb, darken);\n\n                finalAtmosphereColor = mix(darkenendGroundAtmosphereColor, finalAtmosphereColor, sunlitAtmosphereIntensity);\n            #endif\n            \n            #ifndef HDR\n                finalAtmosphereColor.rgb = vec3(1.0) - exp(-fExposure * finalAtmosphereColor.rgb);\n            #else\n                finalAtmosphereColor.rgb = czm_saturation(finalAtmosphereColor.rgb, 1.6);\n            #endif\n            \n            finalColor.rgb = mix(finalColor.rgb, finalAtmosphereColor.rgb, fade);\n        #endif\n    }\n#endif\n\n#ifdef UNDERGROUND_COLOR\n    if (czm_backFacing())\n    {\n        float distanceFromEllipsoid = max(czm_eyeHeight, 0.0);\n        float distance = max(v_distance - distanceFromEllipsoid, 0.0);\n        float blendAmount = interpolateByDistance(u_undergroundColorAlphaByDistance, distance);\n        vec4 undergroundColor = vec4(u_undergroundColor.rgb, u_undergroundColor.a * blendAmount);\n        finalColor = alphaBlend(undergroundColor, finalColor);\n    }\n#endif\n\n#ifdef TRANSLUCENT\n    if (inTranslucencyRectangle())\n    {\n      vec4 alphaByDistance = gl_FrontFacing ? u_frontFaceAlphaByDistance : u_backFaceAlphaByDistance;\n      finalColor.a *= interpolateByDistance(alphaByDistance, v_distance);\n    }\n#endif\n    \n    out_FragColor =  finalColor;\n}\n\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n\nfloat waveFade(float edge0, float edge1, float x)\n{\n    float y = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return pow(1.0 - y, 5.0);\n}\n\nfloat linearFade(float edge0, float edge1, float x)\n{\n    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n}\n\n// Based on water rendering by Jonas Wagner:\n// http://29a.ch/2012/7/19/webgl-terrain-rendering-water-fog\n\n// low altitude wave settings\nconst float oceanFrequencyLowAltitude = 825000.0;\nconst float oceanAnimationSpeedLowAltitude = 0.004;\nconst float oceanOneOverAmplitudeLowAltitude = 1.0 / 2.0;\nconst float oceanSpecularIntensity = 0.5;\n\n// high altitude wave settings\nconst float oceanFrequencyHighAltitude = 125000.0;\nconst float oceanAnimationSpeedHighAltitude = 0.008;\nconst float oceanOneOverAmplitudeHighAltitude = 1.0 / 2.0;\n\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float maskValue, float fade)\n{\n    vec3 positionToEyeEC = -positionEyeCoordinates;\n    float positionToEyeECLength = length(positionToEyeEC);\n\n    // The double normalize below works around a bug in Firefox on Android devices.\n    vec3 normalizedPositionToEyeEC = normalize(normalize(positionToEyeEC));\n\n    // Fade out the waves as the camera moves far from the surface.\n    float waveIntensity = waveFade(70000.0, 1000000.0, positionToEyeECLength);\n\n#ifdef SHOW_OCEAN_WAVES\n    // high altitude waves\n    float time = czm_frameNumber * oceanAnimationSpeedHighAltitude;\n    vec4 noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyHighAltitude, time, 0.0);\n    vec3 normalTangentSpaceHighAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeHighAltitude);\n\n    // low altitude waves\n    time = czm_frameNumber * oceanAnimationSpeedLowAltitude;\n    noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyLowAltitude, time, 0.0);\n    vec3 normalTangentSpaceLowAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeLowAltitude);\n\n    // blend the 2 wave layers based on distance to surface\n    float highAltitudeFade = linearFade(0.0, 60000.0, positionToEyeECLength);\n    float lowAltitudeFade = 1.0 - linearFade(20000.0, 60000.0, positionToEyeECLength);\n    vec3 normalTangentSpace =\n        (highAltitudeFade * normalTangentSpaceHighAltitude) +\n        (lowAltitudeFade * normalTangentSpaceLowAltitude);\n    normalTangentSpace = normalize(normalTangentSpace);\n\n    // fade out the normal perturbation as we move farther from the water surface\n    normalTangentSpace.xy *= waveIntensity;\n    normalTangentSpace = normalize(normalTangentSpace);\n#else\n    vec3 normalTangentSpace = vec3(0.0, 0.0, 1.0);\n#endif\n\n    vec3 normalEC = enuToEye * normalTangentSpace;\n\n    const vec3 waveHighlightColor = vec3(0.3, 0.45, 0.6);\n\n    // Use diffuse light to highlight the waves\n    float diffuseIntensity = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * maskValue;\n    vec3 diffuseHighlight = waveHighlightColor * diffuseIntensity * (1.0 - fade);\n\n#ifdef SHOW_OCEAN_WAVES\n    // Where diffuse light is low or non-existent, use wave highlights based solely on\n    // the wave bumpiness and no particular light direction.\n    float tsPerturbationRatio = normalTangentSpace.z;\n    vec3 nonDiffuseHighlight = mix(waveHighlightColor * 5.0 * (1.0 - tsPerturbationRatio), vec3(0.0), diffuseIntensity);\n#else\n    vec3 nonDiffuseHighlight = vec3(0.0);\n#endif\n\n    // Add specular highlights in 3D, and in all modes when zoomed in.\n    float specularIntensity = czm_getSpecular(czm_lightDirectionEC, normalizedPositionToEyeEC, normalEC, 10.0);\n    float surfaceReflectance = mix(0.0, mix(u_zoomedOutOceanSpecularIntensity, oceanSpecularIntensity, waveIntensity), maskValue);\n    float specular = specularIntensity * surfaceReflectance;\n\n#ifdef HDR\n    specular *= 1.4;\n\n    float e = 0.2;\n    float d = 3.3;\n    float c = 1.7;\n\n    vec3 color = imageryColor.rgb + (c * (vec3(e) + imageryColor.rgb * d) * (diffuseHighlight + nonDiffuseHighlight + specular));\n#else\n    vec3 color = imageryColor.rgb + diffuseHighlight + nonDiffuseHighlight + specular;\n#endif\n\n    return vec4(color, imageryColor.a);\n}\n\n#endif // #ifdef SHOW_REFLECTIVE_OCEAN\n"},454854:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="#ifdef QUANTIZATION_BITS12\nin vec4 compressed0;\nin float compressed1;\n#else\nin vec4 position3DAndHeight;\nin vec4 textureCoordAndEncodedNormals;\n#endif\n\n#ifdef GEODETIC_SURFACE_NORMALS\nin vec3 geodeticSurfaceNormal;\n#endif\n\n#ifdef EXAGGERATION\nuniform vec2 u_terrainExaggerationAndRelativeHeight;\n#endif\n\nuniform vec3 u_center3D;\nuniform mat4 u_modifiedModelView;\nuniform mat4 u_modifiedModelViewProjection;\nuniform vec4 u_tileRectangle;\n\n// Uniforms for 2D Mercator projection\nuniform vec2 u_southAndNorthLatitude;\nuniform vec2 u_southMercatorYAndOneOverHeight;\n\nout vec3 v_positionMC;\nout vec3 v_positionEC;\n\nout vec3 v_textureCoordinates;\nout vec3 v_normalMC;\nout vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nout float v_slope;\nout float v_aspect;\nout float v_height;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nout float v_distance;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE)\nout vec3 v_atmosphereRayleighColor;\nout vec3 v_atmosphereMieColor;\nout float v_atmosphereOpacity;\n#endif\n\n// These functions are generated at runtime.\nvec4 getPosition(vec3 position, float height, vec2 textureCoordinates);\nfloat get2DYPositionFraction(vec2 textureCoordinates);\n\nvec4 getPosition3DMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return u_modifiedModelViewProjection * vec4(position, 1.0);\n}\n\nfloat get2DMercatorYPositionFraction(vec2 textureCoordinates)\n{\n    // The width of a tile at level 11, in radians and assuming a single root tile, is\n    //   2.0 * czm_pi / pow(2.0, 11.0)\n    // We want to just linearly interpolate the 2D position from the texture coordinates\n    // when we're at this level or higher.  The constant below is the expression\n    // above evaluated and then rounded up at the 4th significant digit.\n    const float maxTileWidth = 0.003068;\n    float positionFraction = textureCoordinates.y;\n    float southLatitude = u_southAndNorthLatitude.x;\n    float northLatitude = u_southAndNorthLatitude.y;\n    if (northLatitude - southLatitude > maxTileWidth)\n    {\n        float southMercatorY = u_southMercatorYAndOneOverHeight.x;\n        float oneOverMercatorHeight = u_southMercatorYAndOneOverHeight.y;\n\n        float currentLatitude = mix(southLatitude, northLatitude, textureCoordinates.y);\n        currentLatitude = clamp(currentLatitude, -czm_webMercatorMaxLatitude, czm_webMercatorMaxLatitude);\n        positionFraction = czm_latitudeToWebMercatorFraction(currentLatitude, southMercatorY, oneOverMercatorHeight);\n    }\n    return positionFraction;\n}\n\nfloat get2DGeographicYPositionFraction(vec2 textureCoordinates)\n{\n    return textureCoordinates.y;\n}\n\nvec4 getPositionPlanarEarth(vec3 position, float height, vec2 textureCoordinates)\n{\n    float yPositionFraction = get2DYPositionFraction(textureCoordinates);\n    vec4 rtcPosition2D = vec4(height, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordinates.x, yPositionFraction)), 1.0);\n    return u_modifiedModelViewProjection * rtcPosition2D;\n}\n\nvec4 getPosition2DMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return getPositionPlanarEarth(position, 0.0, textureCoordinates);\n}\n\nvec4 getPositionColumbusViewMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return getPositionPlanarEarth(position, height, textureCoordinates);\n}\n\nvec4 getPositionMorphingMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    // We do not do RTC while morphing, so there is potential for jitter.\n    // This is unlikely to be noticeable, though.\n    vec3 position3DWC = position + u_center3D;\n    float yPositionFraction = get2DYPositionFraction(textureCoordinates);\n    vec4 position2DWC = vec4(height, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordinates.x, yPositionFraction)), 1.0);\n    vec4 morphPosition = czm_columbusViewMorph(position2DWC, vec4(position3DWC, 1.0), czm_morphTime);\n    return czm_modelViewProjection * morphPosition;\n}\n\n#ifdef QUANTIZATION_BITS12\nuniform vec2 u_minMaxHeight;\nuniform mat4 u_scaleAndBias;\n#endif\n\nvoid main()\n{\n#ifdef QUANTIZATION_BITS12\n    vec2 xy = czm_decompressTextureCoordinates(compressed0.x);\n    vec2 zh = czm_decompressTextureCoordinates(compressed0.y);\n    vec3 position = vec3(xy, zh.x);\n    float height = zh.y;\n    vec2 textureCoordinates = czm_decompressTextureCoordinates(compressed0.z);\n\n    height = height * (u_minMaxHeight.y - u_minMaxHeight.x) + u_minMaxHeight.x;\n    position = (u_scaleAndBias * vec4(position, 1.0)).xyz;\n\n#if (defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL)) && defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = czm_decompressTextureCoordinates(compressed0.w).x;\n    float encodedNormal = compressed1;\n#elif defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = czm_decompressTextureCoordinates(compressed0.w).x;\n    float encodedNormal = 0.0;\n#elif defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL)\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = compressed0.w;\n#else\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = 0.0;\n#endif\n\n#else\n    // A single float per element\n    vec3 position = position3DAndHeight.xyz;\n    float height = position3DAndHeight.w;\n    vec2 textureCoordinates = textureCoordAndEncodedNormals.xy;\n\n#if (defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)) && defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = textureCoordAndEncodedNormals.z;\n    float encodedNormal = textureCoordAndEncodedNormals.w;\n#elif defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = textureCoordAndEncodedNormals.z;\n#elif defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = textureCoordAndEncodedNormals.z;\n    float encodedNormal = 0.0;\n#else\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = 0.0;\n#endif\n\n#endif\n\n    vec3 position3DWC = position + u_center3D;\n\n#ifdef GEODETIC_SURFACE_NORMALS\n    vec3 ellipsoidNormal = geodeticSurfaceNormal;\n#else\n    vec3 ellipsoidNormal = normalize(position3DWC);\n#endif\n\n#if defined(EXAGGERATION) && defined(GEODETIC_SURFACE_NORMALS)\n    float exaggeration = u_terrainExaggerationAndRelativeHeight.x;\n    float relativeHeight = u_terrainExaggerationAndRelativeHeight.y;\n    float newHeight = (height - relativeHeight) * exaggeration + relativeHeight;\n\n    // stop from going through center of earth\n    float minRadius = min(min(czm_ellipsoidRadii.x, czm_ellipsoidRadii.y), czm_ellipsoidRadii.z);\n    newHeight = max(newHeight, -minRadius);\n\n    vec3 offset = ellipsoidNormal * (newHeight - height);\n    position += offset;\n    position3DWC += offset;\n    height = newHeight;\n#endif\n\n    gl_Position = getPosition(position, height, textureCoordinates);\n\n    v_positionEC = (u_modifiedModelView * vec4(position, 1.0)).xyz;\n    v_positionMC = position3DWC;  // position in model coordinates\n\n    v_textureCoordinates = vec3(textureCoordinates, webMercatorT);\n\n#if defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)\n    vec3 normalMC = czm_octDecode(encodedNormal);\n\n#if defined(EXAGGERATION) && defined(GEODETIC_SURFACE_NORMALS)\n    vec3 projection = dot(normalMC, ellipsoidNormal) * ellipsoidNormal;\n    vec3 rejection = normalMC - projection;\n    normalMC = normalize(projection + rejection * exaggeration);\n#endif\n\n    v_normalMC = normalMC;\n    v_normalEC = czm_normal3D * v_normalMC;\n#endif\n\n#if defined(FOG) || (defined(GROUND_ATMOSPHERE) && !defined(PER_FRAGMENT_GROUND_ATMOSPHERE))\n\n    bool dynamicLighting = false;\n\n    #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n        dynamicLighting = true;\n    #endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n    vec3 lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(position3DWC));\n\n    computeAtmosphereScattering(\n        position3DWC,\n        lightDirection,\n        v_atmosphereRayleighColor,\n        v_atmosphereMieColor,\n        v_atmosphereOpacity\n    );\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\n    v_distance = length((czm_modelView3D * vec4(position3DWC, 1.0)).xyz);\n#endif\n\n#ifdef APPLY_MATERIAL\n    float northPoleZ = czm_ellipsoidRadii.z;\n    vec3 northPolePositionMC = vec3(0.0, 0.0, northPoleZ);\n    vec3 vectorEastMC = normalize(cross(northPolePositionMC - v_positionMC, ellipsoidNormal));\n    float dotProd = abs(dot(ellipsoidNormal, v_normalMC));\n    v_slope = acos(dotProd);\n    vec3 normalRejected = ellipsoidNormal * dotProd;\n    vec3 normalProjected = v_normalMC - normalRejected;\n    vec3 aspectVector = normalize(normalProjected);\n    v_aspect = acos(dot(aspectVector, vectorEastMC));\n    float determ = dot(cross(vectorEastMC, aspectVector), ellipsoidNormal);\n    v_aspect = czm_branchFreeTernary(determ < 0.0, 2.0 * czm_pi - v_aspect, v_aspect);\n    v_height = height;\n#endif\n}\n"},679498:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void computeAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity) {\n\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);\n    \n    float atmosphereInnerRadius = length(positionWC);\n\n    computeScattering(\n        primaryRay,\n        length(cameraToPositionWC),\n        lightDirection,\n        atmosphereInnerRadius,\n        rayleighColor,\n        mieColor,\n        opacity\n    );\n}\n"},422039:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void filterByPassType(vec4 featureColor)\n{\n    bool styleTranslucent = (featureColor.a != 1.0);\n    // Only render translucent features in the translucent pass (if the style or the original command has translucency).\n    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)\n    {   \n        // If the model has a translucent silhouette, it needs to render during the silhouette color command,\n        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.\n        #ifdef HAS_SILHOUETTE\n        if(!model_silhouettePass) {\n            discard;\n        }\n        #else\n        discard;\n        #endif\n    }\n    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.\n    else if (czm_pass != czm_passTranslucent && styleTranslucent)\n    {\n        discard;\n    }\n}\n\nvoid cpuStylingStage(inout czm_modelMaterial material, SelectedFeature feature)\n{\n    vec4 featureColor = feature.color;\n    if (featureColor.a == 0.0)\n    {\n        discard;\n    }\n\n    // If a feature ID vertex attribute is used, the pass type filter is applied in the vertex shader.\n    // So, we only apply in in the fragment shader if the feature ID texture is used.\n    #if defined(HAS_SELECTED_FEATURE_ID_TEXTURE) && !defined(HAS_CLASSIFICATION)\n    filterByPassType(featureColor);\n    #endif\n\n    featureColor = czm_gammaCorrect(featureColor);\n\n    // Classification models compute the diffuse differently.\n    #ifdef HAS_CLASSIFICATION\n    material.diffuse = featureColor.rgb * featureColor.a;\n    #else\n    float highlight = ceil(model_colorBlend);\n    material.diffuse *= mix(featureColor.rgb, vec3(1.0), highlight);\n    #endif\n    \n    material.alpha *= featureColor.a;\n}\n"},713554:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void filterByPassType(inout vec3 positionMC, vec4 featureColor)\n{\n    bool styleTranslucent = (featureColor.a != 1.0);\n    // Only render translucent features in the translucent pass (if the style or the original command has translucency).\n    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)\n    {\n        // If the model has a translucent silhouette, it needs to render during the silhouette color command,\n        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.\n        #ifdef HAS_SILHOUETTE\n        positionMC *= float(model_silhouettePass);\n        #else\n        positionMC *= 0.0;\n        #endif\n    }\n    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.\n    else if (czm_pass != czm_passTranslucent && styleTranslucent)\n    {\n        positionMC *= 0.0;\n    }\n}\n\nvoid cpuStylingStage(inout vec3 positionMC, inout SelectedFeature feature)\n{\n    float show = ceil(feature.color.a);\n    positionMC *= show;\n\n    #if defined(HAS_SELECTED_FEATURE_ID_ATTRIBUTE) && !defined(HAS_CLASSIFICATION)\n    filterByPassType(positionMC, feature.color);\n    #endif\n}\n"},66574:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void customShaderStage(\n    inout czm_modelMaterial material,\n    ProcessedAttributes attributes,\n    FeatureIds featureIds,\n    Metadata metadata,\n    MetadataClass metadataClass,\n    MetadataStatistics metadataStatistics\n) {\n    // FragmentInput and initializeInputStruct() are dynamically generated in JS, \n    // see CustomShaderPipelineStage.js\n    FragmentInput fsInput;\n    initializeInputStruct(fsInput, attributes);\n    fsInput.featureIds = featureIds;\n    fsInput.metadata = metadata;\n    fsInput.metadataClass = metadataClass;\n    fsInput.metadataStatistics = metadataStatistics;\n    fragmentMain(fsInput, material);\n}\n"},908484:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void customShaderStage(\n    inout czm_modelVertexOutput vsOutput, \n    inout ProcessedAttributes attributes, \n    FeatureIds featureIds,\n    Metadata metadata,\n    MetadataClass metadataClass,\n    MetadataStatistics metadataStatistics\n) {\n    // VertexInput and initializeInputStruct() are dynamically generated in JS, \n    // see CustomShaderPipelineStage.js\n    VertexInput vsInput;\n    initializeInputStruct(vsInput, attributes);\n    vsInput.featureIds = featureIds;\n    vsInput.metadata = metadata;\n    vsInput.metadataClass = metadataClass;\n    vsInput.metadataStatistics = metadataStatistics;\n    vertexMain(vsInput, vsOutput);\n    attributes.positionMC = vsOutput.positionMC;\n}\n"},822225:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) {\n  initializeFeatureIds(featureIds, attributes);\n  initializeFeatureIdAliases(featureIds);\n}\n"},391504:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) \n{\n  initializeFeatureIds(featureIds, attributes);\n  initializeFeatureIdAliases(featureIds);\n  setFeatureIdVaryings();\n}\n"},512766:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void geometryStage(out ProcessedAttributes attributes)\n{\n  attributes.positionMC = v_positionMC;\n  attributes.positionEC = v_positionEC;\n\n  #ifdef COMPUTE_POSITION_WC_CUSTOM_SHADER\n  attributes.positionWC = v_positionWC;\n  #endif\n\n  #ifdef HAS_NORMALS\n  // renormalize after interpolation\n  attributes.normalEC = normalize(v_normalEC);\n  #endif\n\n  #ifdef HAS_TANGENTS\n  attributes.tangentEC = normalize(v_tangentEC);\n  #endif\n\n  #ifdef HAS_BITANGENTS\n  attributes.bitangentEC = normalize(v_bitangentEC);\n  #endif\n\n  // Everything else is dynamically generated in GeometryPipelineStage\n  setDynamicVaryings(attributes);\n}\n"},838873:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="vec4 geometryStage(inout ProcessedAttributes attributes, mat4 modelView, mat3 normal) \n{\n    vec4 computedPosition;\n\n    // Compute positions in different coordinate systems\n    vec3 positionMC = attributes.positionMC;\n    v_positionMC = positionMC;\n    v_positionEC = (modelView * vec4(positionMC, 1.0)).xyz;\n\n    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)\n    vec3 position2D = attributes.position2D;\n    vec3 positionEC = (u_modelView2D * vec4(position2D, 1.0)).xyz;\n    computedPosition = czm_projection * vec4(positionEC, 1.0);\n    #else\n    computedPosition = czm_projection * vec4(v_positionEC, 1.0);\n    #endif\n\n    // Sometimes the custom shader and/or style needs this\n    #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE)\n    // Note that this is a 32-bit position which may result in jitter on small\n    // scales.\n    v_positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;\n    #endif\n\n    #ifdef HAS_NORMALS\n    v_normalEC = normalize(normal * attributes.normalMC);\n    #endif\n\n    #ifdef HAS_TANGENTS\n    v_tangentEC = normalize(normal * attributes.tangentMC);    \n    #endif\n\n    #ifdef HAS_BITANGENTS\n    v_bitangentEC = normalize(normal * attributes.bitangentMC);\n    #endif\n\n    // All other varyings need to be dynamically generated in\n    // GeometryPipelineStage\n    setDynamicVaryings(attributes);\n    \n    return computedPosition;\n}\n"},533708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="vec3 proceduralIBL(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    vec3 lightColorHdr,\n    czm_pbrParameters pbrParameters\n) {\n    vec3 v = -positionEC;\n    vec3 positionWC = vec3(czm_inverseView * vec4(positionEC, 1.0));\n    vec3 vWC = -normalize(positionWC);\n    vec3 l = normalize(lightDirectionEC);\n    vec3 n = normalEC;\n    vec3 r = normalize(czm_inverseViewRotation * normalize(reflect(v, n)));\n\n    float NdotL = clamp(dot(n, l), 0.001, 1.0);\n    float NdotV = abs(dot(n, v)) + 0.001;\n\n    // Figure out if the reflection vector hits the ellipsoid\n    float vertexRadius = length(positionWC);\n    float horizonDotNadir = 1.0 - min(1.0, czm_ellipsoidRadii.x / vertexRadius);\n    float reflectionDotNadir = dot(r, normalize(positionWC));\n    // Flipping the X vector is a cheap way to get the inverse of czm_temeToPseudoFixed, since that's a rotation about Z.\n    r.x = -r.x;\n    r = -normalize(czm_temeToPseudoFixed * r);\n    r.x = -r.x;\n\n    vec3 diffuseColor = pbrParameters.diffuseColor;\n    float roughness = pbrParameters.roughness;\n    vec3 specularColor = pbrParameters.f0;\n\n    float inverseRoughness = 1.04 - roughness;\n    inverseRoughness *= inverseRoughness;\n    vec3 sceneSkyBox = czm_textureCube(czm_environmentMap, r).rgb * inverseRoughness;\n\n    float atmosphereHeight = 0.05;\n    float blendRegionSize = 0.1 * ((1.0 - inverseRoughness) * 8.0 + 1.1 - horizonDotNadir);\n    float blendRegionOffset = roughness * -1.0;\n    float farAboveHorizon = clamp(horizonDotNadir - blendRegionSize * 0.5 + blendRegionOffset, 1.0e-10 - blendRegionSize, 0.99999);\n    float aroundHorizon = clamp(horizonDotNadir + blendRegionSize * 0.5, 1.0e-10 - blendRegionSize, 0.99999);\n    float farBelowHorizon = clamp(horizonDotNadir + blendRegionSize * 1.5, 1.0e-10 - blendRegionSize, 0.99999);\n    float smoothstepHeight = smoothstep(0.0, atmosphereHeight, horizonDotNadir);\n    vec3 belowHorizonColor = mix(vec3(0.1, 0.15, 0.25), vec3(0.4, 0.7, 0.9), smoothstepHeight);\n    vec3 nadirColor = belowHorizonColor * 0.5;\n    vec3 aboveHorizonColor = mix(vec3(0.9, 1.0, 1.2), belowHorizonColor, roughness * 0.5);\n    vec3 blueSkyColor = mix(vec3(0.18, 0.26, 0.48), aboveHorizonColor, reflectionDotNadir * inverseRoughness * 0.5 + 0.75);\n    vec3 zenithColor = mix(blueSkyColor, sceneSkyBox, smoothstepHeight);\n    vec3 blueSkyDiffuseColor = vec3(0.7, 0.85, 0.9); \n    float diffuseIrradianceFromEarth = (1.0 - horizonDotNadir) * (reflectionDotNadir * 0.25 + 0.75) * smoothstepHeight;  \n    float diffuseIrradianceFromSky = (1.0 - smoothstepHeight) * (1.0 - (reflectionDotNadir * 0.25 + 0.25));\n    vec3 diffuseIrradiance = blueSkyDiffuseColor * clamp(diffuseIrradianceFromEarth + diffuseIrradianceFromSky, 0.0, 1.0);\n    float notDistantRough = (1.0 - horizonDotNadir * roughness * 0.8);\n    vec3 specularIrradiance = mix(zenithColor, aboveHorizonColor, smoothstep(farAboveHorizon, aroundHorizon, reflectionDotNadir) * notDistantRough);\n    specularIrradiance = mix(specularIrradiance, belowHorizonColor, smoothstep(aroundHorizon, farBelowHorizon, reflectionDotNadir) * inverseRoughness);\n    specularIrradiance = mix(specularIrradiance, nadirColor, smoothstep(farBelowHorizon, 1.0, reflectionDotNadir) * inverseRoughness);\n\n    // Luminance model from page 40 of http://silviojemma.com/public/papers/lighting/spherical-harmonic-lighting.pdf\n    #ifdef USE_SUN_LUMINANCE \n    // Angle between sun and zenith\n    float LdotZenith = clamp(dot(normalize(czm_inverseViewRotation * l), vWC), 0.001, 1.0);\n    float S = acos(LdotZenith);\n    // Angle between zenith and current pixel\n    float NdotZenith = clamp(dot(normalize(czm_inverseViewRotation * n), vWC), 0.001, 1.0);\n    // Angle between sun and current pixel\n    float gamma = acos(NdotL);\n    float numerator = ((0.91 + 10.0 * exp(-3.0 * gamma) + 0.45 * pow(NdotL, 2.0)) * (1.0 - exp(-0.32 / NdotZenith)));\n    float denominator = (0.91 + 10.0 * exp(-3.0 * S) + 0.45 * pow(LdotZenith,2.0)) * (1.0 - exp(-0.32));\n    float luminance = model_luminanceAtZenith * (numerator / denominator);\n    #endif \n\n    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;\n    vec3 iblColor = (diffuseIrradiance * diffuseColor * model_iblFactor.x) + (specularIrradiance * czm_srgbToLinear(specularColor * brdfLut.x + brdfLut.y) * model_iblFactor.y);\n    float maximumComponent = max(max(lightColorHdr.x, lightColorHdr.y), lightColorHdr.z);\n    vec3 lightColor = lightColorHdr / max(maximumComponent, 1.0);\n    iblColor *= lightColor;\n\n    #ifdef USE_SUN_LUMINANCE \n    iblColor *= luminance;\n    #endif\n\n    return iblColor;\n}\n\n#if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)\nvec3 textureIBL(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    czm_pbrParameters pbrParameters\n) {\n    vec3 diffuseColor = pbrParameters.diffuseColor;\n    float roughness = pbrParameters.roughness;\n    vec3 specularColor = pbrParameters.f0;\n\n    vec3 v = -positionEC;\n    vec3 n = normalEC;\n    vec3 l = normalize(lightDirectionEC);\n    vec3 h = normalize(v + l);\n\n    float NdotV = abs(dot(n, v)) + 0.001;\n    float VdotH = clamp(dot(v, h), 0.0, 1.0);\n\n    const mat3 yUpToZUp = mat3(\n        -1.0, 0.0, 0.0,\n        0.0, 0.0, -1.0, \n        0.0, 1.0, 0.0\n    ); \n    vec3 cubeDir = normalize(yUpToZUp * model_iblReferenceFrameMatrix * normalize(reflect(-v, n))); \n\n    #ifdef DIFFUSE_IBL \n        #ifdef CUSTOM_SPHERICAL_HARMONICS\n        vec3 diffuseIrradiance = czm_sphericalHarmonics(cubeDir, model_sphericalHarmonicCoefficients); \n        #else\n        vec3 diffuseIrradiance = czm_sphericalHarmonics(cubeDir, czm_sphericalHarmonicCoefficients); \n        #endif \n    #else \n    vec3 diffuseIrradiance = vec3(0.0); \n    #endif \n\n    #ifdef SPECULAR_IBL\n    vec3 r0 = specularColor.rgb;\n    float reflectance = max(max(r0.r, r0.g), r0.b);\n    vec3 r90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));\n    vec3 F = fresnelSchlick2(r0, r90, VdotH);\n    \n    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;\n      #ifdef CUSTOM_SPECULAR_IBL \n      vec3 specularIBL = czm_sampleOctahedralProjection(model_specularEnvironmentMaps, model_specularEnvironmentMapsSize, cubeDir, roughness * model_specularEnvironmentMapsMaximumLOD, model_specularEnvironmentMapsMaximumLOD);\n      #else \n      vec3 specularIBL = czm_sampleOctahedralProjection(czm_specularEnvironmentMaps, czm_specularEnvironmentMapSize, cubeDir,  roughness * czm_specularEnvironmentMapsMaximumLOD, czm_specularEnvironmentMapsMaximumLOD);\n      #endif \n    specularIBL *= F * brdfLut.x + brdfLut.y;\n    #else \n    vec3 specularIBL = vec3(0.0); \n    #endif\n\n    return diffuseColor * diffuseIrradiance + specularColor * specularIBL;\n}\n#endif\n\nvec3 imageBasedLightingStage(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    vec3 lightColorHdr,\n    czm_pbrParameters pbrParameters\n) {\n  #if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)\n  // Environment maps were provided, use them for IBL\n  return textureIBL(\n      positionEC,\n      normalEC,\n      lightDirectionEC,\n      pbrParameters\n  );\n  #else\n  // Use the procedural IBL if there are no environment maps\n  return proceduralIBL(\n      positionEC,\n      normalEC,\n      lightDirectionEC,\n      lightColorHdr,\n      pbrParameters\n  );\n  #endif\n}"},645957:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="mat4 getInstancingTransform()\n{\n    mat4 instancingTransform;\n\n    #ifdef HAS_INSTANCE_MATRICES\n    instancingTransform = mat4(\n        a_instancingTransformRow0.x, a_instancingTransformRow1.x, a_instancingTransformRow2.x, 0.0, // Column 1\n        a_instancingTransformRow0.y, a_instancingTransformRow1.y, a_instancingTransformRow2.y, 0.0, // Column 2\n        a_instancingTransformRow0.z, a_instancingTransformRow1.z, a_instancingTransformRow2.z, 0.0, // Column 3\n        a_instancingTransformRow0.w, a_instancingTransformRow1.w, a_instancingTransformRow2.w, 1.0  // Column 4\n    );\n    #else\n    vec3 translation = vec3(0.0, 0.0, 0.0);\n    vec3 scale = vec3(1.0, 1.0, 1.0);\n    \n        #ifdef HAS_INSTANCE_TRANSLATION\n        translation = a_instanceTranslation;\n        #endif\n        #ifdef HAS_INSTANCE_SCALE\n        scale = a_instanceScale;\n        #endif\n\n    instancingTransform = mat4(\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.y, 0.0, 0.0,\n        0.0, 0.0, scale.z, 0.0,\n        translation.x, translation.y, translation.z, 1.0\n    ); \n    #endif\n\n    return instancingTransform;\n}\n\n#ifdef USE_2D_INSTANCING\nmat4 getInstancingTransform2D()\n{\n    mat4 instancingTransform2D;\n\n    #ifdef HAS_INSTANCE_MATRICES\n    instancingTransform2D = mat4(\n        a_instancingTransform2DRow0.x, a_instancingTransform2DRow1.x, a_instancingTransform2DRow2.x, 0.0, // Column 1\n        a_instancingTransform2DRow0.y, a_instancingTransform2DRow1.y, a_instancingTransform2DRow2.y, 0.0, // Column 2\n        a_instancingTransform2DRow0.z, a_instancingTransform2DRow1.z, a_instancingTransform2DRow2.z, 0.0, // Column 3\n        a_instancingTransform2DRow0.w, a_instancingTransform2DRow1.w, a_instancingTransform2DRow2.w, 1.0  // Column 4\n    );\n    #else\n    vec3 translation2D = vec3(0.0, 0.0, 0.0);\n    vec3 scale = vec3(1.0, 1.0, 1.0);\n    \n        #ifdef HAS_INSTANCE_TRANSLATION\n        translation2D = a_instanceTranslation2D;\n        #endif\n        #ifdef HAS_INSTANCE_SCALE\n        scale = a_instanceScale;\n        #endif\n\n    instancingTransform2D = mat4(\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.y, 0.0, 0.0,\n        0.0, 0.0, scale.z, 0.0,\n        translation2D.x, translation2D.y, translation2D.z, 1.0\n    ); \n    #endif\n\n    return instancingTransform2D;\n}\n#endif\n"},952901:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void instancingStage(inout ProcessedAttributes attributes) \n{\n    vec3 positionMC = attributes.positionMC;\n    \n    mat4 instancingTransform = getInstancingTransform();\n    \n    attributes.positionMC = (instancingTransform * vec4(positionMC, 1.0)).xyz;\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = (instancingTransform * vec4(normalMC, 0.0)).xyz;\n    #endif\n\n    #ifdef USE_2D_INSTANCING\n    mat4 instancingTransform2D = getInstancingTransform2D();\n    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;\n    #endif\n}\n"},742910:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void legacyInstancingStage(\n    inout ProcessedAttributes attributes,\n    out mat4 instanceModelView,\n    out mat3 instanceModelViewInverseTranspose)\n{\n    vec3 positionMC = attributes.positionMC;\n\n    mat4 instancingTransform = getInstancingTransform();\n \n    mat4 instanceModel = instancingTransform * u_instance_nodeTransform;\n    instanceModelView = u_instance_modifiedModelView;\n    instanceModelViewInverseTranspose = mat3(u_instance_modifiedModelView * instanceModel);\n\n    attributes.positionMC = (instanceModel * vec4(positionMC, 1.0)).xyz;\n    \n    #ifdef USE_2D_INSTANCING\n    mat4 instancingTransform2D = getInstancingTransform2D();\n    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;\n    #endif\n}\n"},104029:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="#ifdef LIGHTING_PBR\nvec3 computePbrLighting(czm_modelMaterial inputMaterial, ProcessedAttributes attributes)\n{\n    czm_pbrParameters pbrParameters;\n    pbrParameters.diffuseColor = inputMaterial.diffuse;\n    pbrParameters.f0 = inputMaterial.specular;\n    pbrParameters.roughness = inputMaterial.roughness;\n    \n    #ifdef USE_CUSTOM_LIGHT_COLOR\n    vec3 lightColorHdr = model_lightColorHdr;\n    #else\n    vec3 lightColorHdr = czm_lightColorHdr;\n    #endif\n\n    vec3 color = inputMaterial.diffuse;\n    #ifdef HAS_NORMALS\n    color = czm_pbrLighting(\n        attributes.positionEC,\n        inputMaterial.normalEC,\n        czm_lightDirectionEC,\n        lightColorHdr,\n        pbrParameters\n    );\n\n        #ifdef USE_IBL_LIGHTING\n        color += imageBasedLightingStage(\n            attributes.positionEC,\n            inputMaterial.normalEC,\n            czm_lightDirectionEC,\n            lightColorHdr,\n            pbrParameters\n        );\n        #endif\n    #endif\n\n    color *= inputMaterial.occlusion;\n    color += inputMaterial.emissive;\n\n    // In HDR mode, the frame buffer is in linear color space. The\n    // post-processing stages (see PostProcessStageCollection) will handle\n    // tonemapping. However, if HDR is not enabled, we must tonemap else large\n    // values may be clamped to 1.0\n    #ifndef HDR \n    color = czm_acesTonemapping(color);\n    #endif \n\n    return color;\n}\n#endif\n\nvoid lightingStage(inout czm_modelMaterial material, ProcessedAttributes attributes)\n{\n    // Even though the lighting will only set the diffuse color,\n    // pass all other properties so further stages have access to them.\n    vec3 color = vec3(0.0);\n\n    #ifdef LIGHTING_PBR\n    color = computePbrLighting(material, attributes);\n    #else // unlit\n    color = material.diffuse;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    // The colors resulting from point cloud styles are adjusted differently.\n    color = czm_gammaCorrect(color);\n    #elif !defined(HDR)\n    // If HDR is not enabled, the frame buffer stores sRGB colors rather than\n    // linear colors so the linear value must be converted.\n    color = czm_linearToSrgb(color);\n    #endif\n\n    material.diffuse = color;\n}\n"},93876:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// If the style color is white, it implies the feature has not been styled.\nbool isDefaultStyleColor(vec3 color)\n{\n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3)));\n}\n\nvec3 blend(vec3 sourceColor, vec3 styleColor, float styleColorBlend)\n{\n    vec3 blendColor = mix(sourceColor, styleColor, styleColorBlend);\n    vec3 color = isDefaultStyleColor(styleColor.rgb) ? sourceColor : blendColor;\n    return color;\n}\n\nvec2 computeTextureTransform(vec2 texCoord, mat3 textureTransform)\n{\n    return vec2(textureTransform * vec3(texCoord, 1.0));\n}\n\n#ifdef HAS_NORMALS\nvec3 computeNormal(ProcessedAttributes attributes)\n{\n    // Geometry normal. This is already normalized \n    vec3 ng = attributes.normalEC;\n\n    vec3 normal = ng;\n    #if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)\n    vec2 normalTexCoords = TEXCOORD_NORMAL;\n        #ifdef HAS_NORMAL_TEXTURE_TRANSFORM\n        normalTexCoords = computeTextureTransform(normalTexCoords, u_normalTextureTransform);\n        #endif\n\n        // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set\n        #ifdef HAS_BITANGENTS\n        vec3 t = attributes.tangentEC;\n        vec3 b = attributes.bitangentEC;\n        mat3 tbn = mat3(t, b, ng);\n        vec3 n = texture(u_normalTexture, normalTexCoords).rgb;\n        normal = normalize(tbn * (2.0 * n - 1.0));\n        #elif (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))\n        // If derivatives are available (not IE 10), compute tangents\n        vec3 positionEC = attributes.positionEC;\n        vec3 pos_dx = dFdx(positionEC);\n        vec3 pos_dy = dFdy(positionEC);\n        vec3 tex_dx = dFdx(vec3(normalTexCoords,0.0));\n        vec3 tex_dy = dFdy(vec3(normalTexCoords,0.0));\n        vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n        t = normalize(t - ng * dot(ng, t));\n        vec3 b = normalize(cross(ng, t));\n        mat3 tbn = mat3(t, b, ng);\n        vec3 n = texture(u_normalTexture, normalTexCoords).rgb;\n        normal = normalize(tbn * (2.0 * n - 1.0));\n        #endif\n    #endif\n\n    #ifdef HAS_DOUBLE_SIDED_MATERIAL\n    if (czm_backFacing()) {\n        normal = -normal;\n    }\n    #endif\n\n    return normal;\n}\n#endif\n\nvoid materialStage(inout czm_modelMaterial material, ProcessedAttributes attributes, SelectedFeature feature)\n{\n    #ifdef HAS_NORMALS\n    material.normalEC = computeNormal(attributes);\n    #endif\n\n    vec4 baseColorWithAlpha = vec4(1.0);\n    // Regardless of whether we use PBR, set a base color\n    #ifdef HAS_BASE_COLOR_TEXTURE\n    vec2 baseColorTexCoords = TEXCOORD_BASE_COLOR;\n\n        #ifdef HAS_BASE_COLOR_TEXTURE_TRANSFORM\n        baseColorTexCoords = computeTextureTransform(baseColorTexCoords, u_baseColorTextureTransform);\n        #endif\n\n    baseColorWithAlpha = czm_srgbToLinear(texture(u_baseColorTexture, baseColorTexCoords));\n\n        #ifdef HAS_BASE_COLOR_FACTOR\n        baseColorWithAlpha *= u_baseColorFactor;\n        #endif\n    #elif defined(HAS_BASE_COLOR_FACTOR)\n    baseColorWithAlpha = u_baseColorFactor;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    baseColorWithAlpha = v_pointCloudColor;\n    #elif defined(HAS_COLOR_0)\n    vec4 color = attributes.color_0;\n        // .pnts files store colors in the sRGB color space\n        #ifdef HAS_SRGB_COLOR\n        color = czm_srgbToLinear(color);\n        #endif\n    baseColorWithAlpha *= color;\n    #endif\n\n    material.diffuse = baseColorWithAlpha.rgb;\n    material.alpha = baseColorWithAlpha.a;\n\n    #ifdef USE_CPU_STYLING\n    material.diffuse = blend(material.diffuse, feature.color.rgb, model_colorBlend);\n    #endif\n\n    #ifdef HAS_OCCLUSION_TEXTURE\n    vec2 occlusionTexCoords = TEXCOORD_OCCLUSION;\n        #ifdef HAS_OCCLUSION_TEXTURE_TRANSFORM\n        occlusionTexCoords = computeTextureTransform(occlusionTexCoords, u_occlusionTextureTransform);\n        #endif\n    material.occlusion = texture(u_occlusionTexture, occlusionTexCoords).r;\n    #endif\n\n    #ifdef HAS_EMISSIVE_TEXTURE\n    vec2 emissiveTexCoords = TEXCOORD_EMISSIVE;\n        #ifdef HAS_EMISSIVE_TEXTURE_TRANSFORM\n        emissiveTexCoords = computeTextureTransform(emissiveTexCoords, u_emissiveTextureTransform);\n        #endif\n\n    vec3 emissive = czm_srgbToLinear(texture(u_emissiveTexture, emissiveTexCoords).rgb);\n        #ifdef HAS_EMISSIVE_FACTOR\n        emissive *= u_emissiveFactor;\n        #endif\n    material.emissive = emissive;\n    #elif defined(HAS_EMISSIVE_FACTOR)\n    material.emissive = u_emissiveFactor;\n    #endif\n\n    #if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)\n        #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE\n        vec2 specularGlossinessTexCoords = TEXCOORD_SPECULAR_GLOSSINESS;\n          #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE_TRANSFORM\n          specularGlossinessTexCoords = computeTextureTransform(specularGlossinessTexCoords, u_specularGlossinessTextureTransform);\n          #endif\n\n        vec4 specularGlossiness = czm_srgbToLinear(texture(u_specularGlossinessTexture, specularGlossinessTexCoords));\n        vec3 specular = specularGlossiness.rgb;\n        float glossiness = specularGlossiness.a;\n            #ifdef HAS_SPECULAR_FACTOR\n            specular *= u_specularFactor;\n            #endif\n\n            #ifdef HAS_GLOSSINESS_FACTOR\n            glossiness *= u_glossinessFactor;\n            #endif\n        #else\n            #ifdef HAS_SPECULAR_FACTOR\n            vec3 specular = clamp(u_specularFactor, vec3(0.0), vec3(1.0));\n            #else\n            vec3 specular = vec3(1.0);\n            #endif\n\n            #ifdef HAS_GLOSSINESS_FACTOR\n            float glossiness = clamp(u_glossinessFactor, 0.0, 1.0);\n            #else\n            float glossiness = 1.0;\n            #endif\n        #endif\n\n        #ifdef HAS_DIFFUSE_TEXTURE\n        vec2 diffuseTexCoords = TEXCOORD_DIFFUSE;\n            #ifdef HAS_DIFFUSE_TEXTURE_TRANSFORM\n            diffuseTexCoords = computeTextureTransform(diffuseTexCoords, u_diffuseTextureTransform);\n            #endif\n\n        vec4 diffuse = czm_srgbToLinear(texture(u_diffuseTexture, diffuseTexCoords));\n            #ifdef HAS_DIFFUSE_FACTOR\n            diffuse *= u_diffuseFactor;\n            #endif\n        #elif defined(HAS_DIFFUSE_FACTOR)\n        vec4 diffuse = clamp(u_diffuseFactor, vec4(0.0), vec4(1.0));\n        #else\n        vec4 diffuse = vec4(1.0);\n        #endif\n    czm_pbrParameters parameters = czm_pbrSpecularGlossinessMaterial(\n      diffuse.rgb,\n      specular,\n      glossiness\n    );\n    material.diffuse = parameters.diffuseColor;\n    // the specular glossiness extension's alpha overrides anything set\n    // by the base material.\n    material.alpha = diffuse.a;\n    material.specular = parameters.f0;\n    material.roughness = parameters.roughness;\n    #elif defined(LIGHTING_PBR)\n        #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE\n        vec2 metallicRoughnessTexCoords = TEXCOORD_METALLIC_ROUGHNESS;\n            #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE_TRANSFORM\n            metallicRoughnessTexCoords = computeTextureTransform(metallicRoughnessTexCoords, u_metallicRoughnessTextureTransform);\n            #endif\n\n        vec3 metallicRoughness = texture(u_metallicRoughnessTexture, metallicRoughnessTexCoords).rgb;\n        float metalness = clamp(metallicRoughness.b, 0.0, 1.0);\n        float roughness = clamp(metallicRoughness.g, 0.04, 1.0);\n            #ifdef HAS_METALLIC_FACTOR\n            metalness *= u_metallicFactor;\n            #endif\n\n            #ifdef HAS_ROUGHNESS_FACTOR\n            roughness *= u_roughnessFactor;\n            #endif\n        #else\n            #ifdef HAS_METALLIC_FACTOR\n            float metalness = clamp(u_metallicFactor, 0.0, 1.0);\n            #else\n            float metalness = 1.0;\n            #endif\n\n            #ifdef HAS_ROUGHNESS_FACTOR\n            float roughness = clamp(u_roughnessFactor, 0.04, 1.0);\n            #else\n            float roughness = 1.0;\n            #endif\n        #endif\n    czm_pbrParameters parameters = czm_pbrMetallicRoughnessMaterial(\n      material.diffuse,\n      metalness,\n      roughness\n    );\n    material.diffuse = parameters.diffuseColor;\n    material.specular = parameters.f0;\n    material.roughness = parameters.roughness;\n    #endif\n}\n"},776499:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void metadataStage(\n  out Metadata metadata,\n  out MetadataClass metadataClass,\n  out MetadataStatistics metadataStatistics,\n  ProcessedAttributes attributes\n  )\n{\n  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);\n}\n"},242172:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void metadataStage(\n  out Metadata metadata,\n  out MetadataClass metadataClass,\n  out MetadataStatistics metadataStatistics,\n  ProcessedAttributes attributes\n  )\n{\n  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);\n  setMetadataVaryings();\n}\n"},931980:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="#ifdef USE_CLIPPING_PLANES_FLOAT_TEXTURE\nvec4 getClippingPlane(\n    highp sampler2D packedClippingPlanes,\n    int clippingPlaneNumber,\n    mat4 transform\n) {\n    int pixY = clippingPlaneNumber / CLIPPING_PLANES_TEXTURE_WIDTH;\n    int pixX = clippingPlaneNumber - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    vec4 plane = texture(packedClippingPlanes, vec2(u, v));\n    return czm_transformPlane(plane, transform);\n}\n#else\n// Handle uint8 clipping texture instead\nvec4 getClippingPlane(\n    highp sampler2D packedClippingPlanes,\n    int clippingPlaneNumber,\n    mat4 transform\n) {\n    int clippingPlaneStartIndex = clippingPlaneNumber * 2; // clipping planes are two pixels each\n    int pixY = clippingPlaneStartIndex / CLIPPING_PLANES_TEXTURE_WIDTH;\n    int pixX = clippingPlaneStartIndex - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    vec4 oct32 = texture(packedClippingPlanes, vec2(u, v)) * 255.0;\n    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);\n    vec4 plane;\n    plane.xyz = czm_octDecode(oct, 65535.0);\n    plane.w = czm_unpackFloat(texture(packedClippingPlanes, vec2(u + pixelWidth, v)));\n    return czm_transformPlane(plane, transform);\n}\n#endif\n\nfloat clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix) {\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float pixelWidth = czm_metersPerPixel(position);\n    \n    #ifdef UNION_CLIPPING_REGIONS\n    float clipAmount; // For union planes, we want to get the min distance. So we set the initial value to the first plane distance in the loop below.\n    #else\n    float clipAmount = 0.0;\n    bool clipped = true;\n    #endif\n\n    for (int i = 0; i < CLIPPING_PLANES_LENGTH; ++i) {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        \n        #ifdef UNION_CLIPPING_REGIONS\n        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));\n        if (amount <= 0.0) {\n            discard;\n        }\n        #else\n        clipAmount = max(amount, clipAmount);\n        clipped = clipped && (amount <= 0.0);\n        #endif\n    }\n\n    #ifndef UNION_CLIPPING_REGIONS\n    if (clipped) {\n        discard;\n    }\n    #endif\n    \n    return clipAmount;\n}\n\nvoid modelClippingPlanesStage(inout vec4 color)\n{\n    float clipDistance = clip(gl_FragCoord, model_clippingPlanes, model_clippingPlanesMatrix);\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = model_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = model_clippingPlanesEdgeStyle.a;\n    \n    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) {\n        color = clippingPlanesEdgeColor;\n    }\n}\n"},831402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void modelColorStage(inout czm_modelMaterial material)\n{\n    material.diffuse = mix(material.diffuse, model_color.rgb, model_colorBlend);\n    float highlight = ceil(model_colorBlend);\n    material.diffuse *= mix(model_color.rgb, vec3(1.0), highlight);\n    material.alpha *= model_color.a;\n}"},147679:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="czm_modelMaterial defaultModelMaterial()\n{\n    czm_modelMaterial material;\n    material.diffuse = vec3(0.0);\n    material.specular = vec3(1.0);\n    material.roughness = 1.0;\n    material.occlusion = 1.0;\n    material.normalEC = vec3(0.0, 0.0, 1.0);\n    material.emissive = vec3(0.0);\n    material.alpha = 1.0;\n    return material;\n}\n\nvec4 handleAlpha(vec3 color, float alpha)\n{\n    #ifdef ALPHA_MODE_MASK\n    if (alpha < u_alphaCutoff) {\n        discard;\n    }\n    #endif\n\n    return vec4(color, alpha);\n}\n\nSelectedFeature selectedFeature;\n\nvoid main()\n{\n    #ifdef HAS_MODEL_SPLITTER\n    modelSplitterStage();\n    #endif\n\n    czm_modelMaterial material = defaultModelMaterial();\n\n    ProcessedAttributes attributes;\n    geometryStage(attributes);\n\n    FeatureIds featureIds;\n    featureIdStage(featureIds, attributes);\n\n    Metadata metadata;\n    MetadataClass metadataClass;\n    MetadataStatistics metadataStatistics;\n    metadataStage(metadata, metadataClass, metadataStatistics, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    selectedFeatureIdStage(selectedFeature, featureIds);\n    #endif\n\n    #ifndef CUSTOM_SHADER_REPLACE_MATERIAL\n    materialStage(material, attributes, selectedFeature);\n    #endif\n\n    #ifdef HAS_CUSTOM_FRAGMENT_SHADER\n    customShaderStage(material, attributes, featureIds, metadata, metadataClass, metadataStatistics);\n    #endif\n\n    lightingStage(material, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    cpuStylingStage(material, selectedFeature);\n    #endif\n\n    #ifdef HAS_MODEL_COLOR\n    modelColorStage(material);\n    #endif\n\n    #ifdef HAS_PRIMITIVE_OUTLINE\n    primitiveOutlineStage(material);\n    #endif\n\n    vec4 color = handleAlpha(material.diffuse, material.alpha);\n\n    #ifdef HAS_CLIPPING_PLANES\n    modelClippingPlanesStage(color);\n    #endif\n\n    #if defined(HAS_SILHOUETTE) && defined(HAS_NORMALS)\n    silhouetteStage(color);\n    #endif\n\n    out_FragColor = color;\n}\n"},912182:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void silhouetteStage(inout vec4 color) {\n    if(model_silhouettePass) {\n        color = czm_gammaCorrect(model_silhouetteColor);\n    }\n}"},567389:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void silhouetteStage(in ProcessedAttributes attributes, inout vec4 positionClip) {\n     #ifdef HAS_NORMALS\n     if(model_silhouettePass) {\n          vec3 normal = normalize(czm_normal3D * attributes.normalMC);\n          normal.x *= czm_projection[0][0];\n          normal.y *= czm_projection[1][1];\n          positionClip.xy += normal.xy * positionClip.w * model_silhouetteSize * czm_pixelRatio / czm_viewport.z;\n    }\n    #endif\n}\n"},560665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void modelSplitterStage()\n{\n    // Don't split when rendering the shadow map, because it is rendered from\n    // the perspective of a totally different camera.\n#ifndef SHADOW_MAP\n    if (model_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;\n    if (model_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;\n#endif\n}\n"},402426:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="precision highp float;\n\nczm_modelVertexOutput defaultVertexOutput(vec3 positionMC) {\n    czm_modelVertexOutput vsOutput;\n    vsOutput.positionMC = positionMC;\n    vsOutput.pointSize = 1.0;\n    return vsOutput;\n}\n\nvoid main() \n{\n    // Initialize the attributes struct with all\n    // attributes except quantized ones.\n    ProcessedAttributes attributes;\n    initializeAttributes(attributes);\n\n    // Dequantize the quantized ones and add them to the\n    // attributes struct.\n    #ifdef USE_DEQUANTIZATION\n    dequantizationStage(attributes);\n    #endif\n\n    #ifdef HAS_MORPH_TARGETS\n    morphTargetsStage(attributes);\n    #endif\n\n    #ifdef HAS_SKINNING\n    skinningStage(attributes);\n    #endif\n\n    #ifdef HAS_PRIMITIVE_OUTLINE\n    primitiveOutlineStage();\n    #endif\n\n    // Compute the bitangent according to the formula in the glTF spec.\n    // Normal and tangents can be affected by morphing and skinning, so\n    // the bitangent should not be computed until their values are finalized.\n    #ifdef HAS_BITANGENTS\n    attributes.bitangentMC = normalize(cross(attributes.normalMC, attributes.tangentMC) * attributes.tangentSignMC);\n    #endif\n\n    FeatureIds featureIds;\n    featureIdStage(featureIds, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    SelectedFeature feature;\n    selectedFeatureIdStage(feature, featureIds);\n    // Handle any show properties that come from the style.\n    cpuStylingStage(attributes.positionMC, feature);\n    #endif\n\n    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)\n    // The scene mode 2D pipeline stage and instancing stage add a different\n    // model view matrix to accurately project the model to 2D. However, the\n    // output positions and normals should be transformed by the 3D matrices\n    // to keep the data the same for the fragment shader.\n    mat4 modelView = czm_modelView3D;\n    mat3 normal = czm_normal3D;\n    #else\n    // These are used for individual model projection because they will\n    // automatically change based on the scene mode.\n    mat4 modelView = czm_modelView;\n    mat3 normal = czm_normal;\n    #endif\n\n    // Update the position for this instance in place\n    #ifdef HAS_INSTANCING\n\n        // The legacy instance stage is used when rendering i3dm models that \n        // encode instances transforms in world space, as opposed to glTF models\n        // that use EXT_mesh_gpu_instancing, where instance transforms are encoded\n        // in object space.\n        #ifdef USE_LEGACY_INSTANCING\n        mat4 instanceModelView;\n        mat3 instanceModelViewInverseTranspose;\n        \n        legacyInstancingStage(attributes, instanceModelView, instanceModelViewInverseTranspose);\n\n        modelView = instanceModelView;\n        normal = instanceModelViewInverseTranspose;\n        #else\n        instancingStage(attributes);\n        #endif\n\n        #ifdef USE_PICKING\n        v_pickColor = a_pickColor;\n        #endif\n\n    #endif\n\n    Metadata metadata;\n    MetadataClass metadataClass;\n    MetadataStatistics metadataStatistics;\n    metadataStage(metadata, metadataClass, metadataStatistics, attributes);\n\n    #ifdef HAS_CUSTOM_VERTEX_SHADER\n    czm_modelVertexOutput vsOutput = defaultVertexOutput(attributes.positionMC);\n    customShaderStage(vsOutput, attributes, featureIds, metadata, metadataClass, metadataStatistics);\n    #endif\n\n    // Compute the final position in each coordinate system needed.\n    // This returns the value that will be assigned to gl_Position.\n    vec4 positionClip = geometryStage(attributes, modelView, normal);    \n\n    #ifdef HAS_SILHOUETTE\n    silhouetteStage(attributes, positionClip);\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_SHOW_STYLE\n    float show = pointCloudShowStylingStage(attributes, metadata);\n    #else\n    float show = 1.0;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING\n    show *= pointCloudBackFaceCullingStage();\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    v_pointCloudColor = pointCloudColorStylingStage(attributes, metadata);\n    #endif\n\n    #ifdef PRIMITIVE_TYPE_POINTS\n        #ifdef HAS_CUSTOM_VERTEX_SHADER\n        gl_PointSize = vsOutput.pointSize;\n        #elif defined(HAS_POINT_CLOUD_POINT_SIZE_STYLE) || defined(HAS_POINT_CLOUD_ATTENUATION)\n        gl_PointSize = pointCloudPointSizeStylingStage(attributes, metadata);\n        #else\n        gl_PointSize = 1.0;\n        #endif\n\n        gl_PointSize *= show;\n    #endif\n\n    gl_Position = show * positionClip;\n}\n"},222167:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void morphTargetsStage(inout ProcessedAttributes attributes) \n{\n    vec3 positionMC = attributes.positionMC;\n    attributes.positionMC = getMorphedPosition(positionMC);\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = getMorphedNormal(normalMC);\n    #endif\n\n    #ifdef HAS_TANGENTS\n    vec3 tangentMC = attributes.tangentMC;\n    attributes.tangentMC = getMorphedTangent(tangentMC);\n    #endif\n}"},404233:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="float getPointSizeFromAttenuation(vec3 positionEC) {\n  // Variables are packed into a single vector to minimize gl.uniformXXX() calls\n  float pointSize = model_pointCloudParameters.x;\n  float geometricError = model_pointCloudParameters.y;\n  float depthMultiplier = model_pointCloudParameters.z;\n\n  float depth = -positionEC.z;\n  return min((geometricError / depth) * depthMultiplier, pointSize);\n}\n\n#ifdef HAS_POINT_CLOUD_SHOW_STYLE\nfloat pointCloudShowStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return float(getShowFromStyle(attributes, metadata, tiles3d_tileset_time));\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_COLOR_STYLE\nvec4 pointCloudColorStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return getColorFromStyle(attributes, metadata, tiles3d_tileset_time);\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_POINT_SIZE_STYLE\nfloat pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return float(getPointSizeFromStyle(attributes, metadata, tiles3d_tileset_time));\n}\n#elif defined(HAS_POINT_CLOUD_ATTENUATION)\nfloat pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  return getPointSizeFromAttenuation(v_positionEC);\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING\nfloat pointCloudBackFaceCullingStage() {\n  #if defined(HAS_NORMALS) && !defined(HAS_DOUBLE_SIDED_MATERIAL)\n  // This needs to be computed in eye coordinates so we can't use attributes.normalMC\n  return step(-v_normalEC.z, 0.0);\n  #else\n  return 1.0;\n  #endif\n}\n#endif"},409583:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void primitiveOutlineStage(inout czm_modelMaterial material) {\n    if (!model_showOutline) {\n        return;\n    }\n\n    float outlineX = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.x, 0.5)).r;\n    float outlineY = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.y, 0.5)).r;\n    float outlineZ = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.z, 0.5)).r;\n    float outlineness = max(outlineX, max(outlineY, outlineZ));\n\n    material.diffuse = mix(material.diffuse, model_outlineColor.rgb, model_outlineColor.a * outlineness);\n}\n\n"},874327:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void primitiveOutlineStage() {\n    v_outlineCoordinates = a_outlineCoordinates;\n}\n"},777860:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="vec2 computeSt(float featureId)\n{\n    float stepX = model_textureStep.x;\n    float centerX = model_textureStep.y;\n\n    #ifdef MULTILINE_BATCH_TEXTURE\n    float stepY = model_textureStep.z;\n    float centerY = model_textureStep.w;\n\n    float xId = mod(featureId, model_textureDimensions.x); \n    float yId = floor(featureId / model_textureDimensions.x);\n    \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY));\n    #else\n    return vec2(centerX + (featureId * stepX), 0.5);\n    #endif\n}\n\nvoid selectedFeatureIdStage(out SelectedFeature feature, FeatureIds featureIds)\n{   \n    int featureId = featureIds.SELECTED_FEATURE_ID;\n\n\n    if (featureId < model_featuresLength)\n    {\n        vec2 featureSt = computeSt(float(featureId));\n\n        feature.id = featureId;\n        feature.st = featureSt;\n        feature.color = texture(model_batchTexture, featureSt);\n    }\n    // Floating point comparisons can be unreliable in GLSL, so we\n    // increment the feature ID to make sure it's always greater\n    // then the model_featuresLength - a condition we check for in the\n    // pick ID, to avoid sampling the pick texture if the feature ID is\n    // greater than the number of features.\n    else\n    {\n        feature.id = model_featuresLength + 1;\n        feature.st = vec2(0.0);\n        feature.color = vec4(1.0);\n    }\n\n    #ifdef HAS_NULL_FEATURE_ID\n    if (featureId == model_nullFeatureId) {\n        feature.id = featureId;\n        feature.st = vec2(0.0);\n        feature.color = vec4(1.0);\n    }\n    #endif\n}\n"},764367:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="void skinningStage(inout ProcessedAttributes attributes) \n{\n    mat4 skinningMatrix = getSkinningMatrix();\n    mat3 skinningMatrixMat3 = mat3(skinningMatrix);\n\n    vec4 positionMC = vec4(attributes.positionMC, 1.0);\n    attributes.positionMC = vec3(skinningMatrix * positionMC);\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = skinningMatrixMat3 * normalMC;\n    #endif\n\n    #ifdef HAS_TANGENTS\n    vec3 tangentMC = attributes.tangentMC;\n    attributes.tangentMC = skinningMatrixMat3 * tangentMC;\n    #endif\n}"},194926:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec2 v_textureCoordinates;\n\nuniform float originalSize;\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform sampler2D texture3;\nuniform sampler2D texture4;\nuniform sampler2D texture5;\n\nconst float yMipLevel1 = 1.0 - (1.0 / pow(2.0, 1.0));\nconst float yMipLevel2 = 1.0 - (1.0 / pow(2.0, 2.0));\nconst float yMipLevel3 = 1.0 - (1.0 / pow(2.0, 3.0));\nconst float yMipLevel4 = 1.0 - (1.0 / pow(2.0, 4.0));\n\nvoid main()\n{\n    vec2 uv = v_textureCoordinates;\n    vec2 textureSize = vec2(originalSize * 1.5 + 2.0, originalSize);\n    vec2 pixel = 1.0 / textureSize;\n\n    float mipLevel = 0.0;\n\n    if (uv.x - pixel.x > (textureSize.y / textureSize.x))\n    {\n        mipLevel = 1.0;\n        if (uv.y - pixel.y > yMipLevel1)\n        {\n            mipLevel = 2.0;\n            if (uv.y - pixel.y * 3.0 > yMipLevel2)\n            {\n                mipLevel = 3.0;\n                if (uv.y - pixel.y * 5.0 > yMipLevel3)\n                {\n                    mipLevel = 4.0;\n                    if (uv.y - pixel.y * 7.0 > yMipLevel4)\n                    {\n                        mipLevel = 5.0;\n                    }\n                }\n            }\n        }\n    }\n\n    if (mipLevel > 0.0)\n    {\n        float scale = pow(2.0, mipLevel);\n\n        uv.y -= (pixel.y * (mipLevel - 1.0) * 2.0);\n        uv.x *= ((textureSize.x - 2.0) / textureSize.y);\n\n        uv.x -= 1.0 + pixel.x;\n        uv.y -= (1.0 - (1.0 / pow(2.0, mipLevel - 1.0)));\n        uv *= scale;\n    }\n    else\n    {\n        uv.x *= (textureSize.x / textureSize.y);\n    }\n\n    if(mipLevel == 0.0)\n    {\n        out_FragColor = texture(texture0, uv);\n    }\n    else if(mipLevel == 1.0)\n    {\n        out_FragColor = texture(texture1, uv);\n    }\n    else if(mipLevel == 2.0)\n    {\n        out_FragColor = texture(texture2, uv);\n    }\n    else if(mipLevel == 3.0)\n    {\n        out_FragColor = texture(texture3, uv);\n    }\n    else if(mipLevel == 4.0)\n    {\n        out_FragColor = texture(texture4, uv);\n    }\n    else if(mipLevel == 5.0)\n    {\n        out_FragColor = texture(texture5, uv);\n    }\n    else\n    {\n        out_FragColor = vec4(0.0);\n    }\n}\n"},884260:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 v_cubeMapCoordinates;\nuniform samplerCube cubeMap;\n\nvoid main()\n{\n    vec4 rgba = czm_textureCube(cubeMap, v_cubeMapCoordinates);\n    #ifdef RGBA_NORMALIZED\n        out_FragColor = vec4(rgba.rgb, 1.0);\n    #else\n        float m = rgba.a * 16.0;\n        vec3 r = rgba.rgb * m;\n        out_FragColor = vec4(r * r, 1.0);\n    #endif\n}\n"},314903:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec4 position;\nin vec3 cubeMapCoordinates;\n\nout vec3 v_cubeMapCoordinates;\n\nvoid main()\n{\n    gl_Position = position;\n    v_cubeMapCoordinates = cubeMapCoordinates;\n}\n"},389617:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 position2DHigh;\nin vec3 position2DLow;\nin vec3 prevPosition3DHigh;\nin vec3 prevPosition3DLow;\nin vec3 prevPosition2DHigh;\nin vec3 prevPosition2DLow;\nin vec3 nextPosition3DHigh;\nin vec3 nextPosition3DLow;\nin vec3 nextPosition2DHigh;\nin vec3 nextPosition2DLow;\nin vec4 texCoordExpandAndBatchIndex;\n\nout vec2  v_st;\nout float v_width;\nout vec4 v_pickColor;\nout float v_polylineAngle;\n\nvoid main()\n{\n    float texCoord = texCoordExpandAndBatchIndex.x;\n    float expandDir = texCoordExpandAndBatchIndex.y;\n    bool usePrev = texCoordExpandAndBatchIndex.z < 0.0;\n    float batchTableIndex = texCoordExpandAndBatchIndex.w;\n\n    vec2 widthAndShow = batchTable_getWidthAndShow(batchTableIndex);\n    float width = widthAndShow.x + 0.5;\n    float show = widthAndShow.y;\n\n    if (width < 1.0)\n    {\n        show = 0.0;\n    }\n\n    vec4 pickColor = batchTable_getPickColor(batchTableIndex);\n\n    vec4 p, prev, next;\n    if (czm_morphTime == 1.0)\n    {\n        p = czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz);\n        prev = czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz);\n        next = czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        p = czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy);\n        prev = czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy);\n        next = czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy);\n    }\n    else\n    {\n        p = czm_columbusViewMorph(\n                czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy),\n                czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz),\n                czm_morphTime);\n        prev = czm_columbusViewMorph(\n                czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy),\n                czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz),\n                czm_morphTime);\n        next = czm_columbusViewMorph(\n                czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy),\n                czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz),\n                czm_morphTime);\n    }\n\n    #ifdef DISTANCE_DISPLAY_CONDITION\n        vec3 centerHigh = batchTable_getCenterHigh(batchTableIndex);\n        vec4 centerLowAndRadius = batchTable_getCenterLowAndRadius(batchTableIndex);\n        vec3 centerLow = centerLowAndRadius.xyz;\n        float radius = centerLowAndRadius.w;\n        vec2 distanceDisplayCondition = batchTable_getDistanceDisplayCondition(batchTableIndex);\n\n        float lengthSq;\n        if (czm_sceneMode == czm_sceneMode2D)\n        {\n            lengthSq = czm_eyeHeight2D.y;\n        }\n        else\n        {\n            vec4 center = czm_translateRelativeToEye(centerHigh.xyz, centerLow.xyz);\n            lengthSq = max(0.0, dot(center.xyz, center.xyz) - radius * radius);\n        }\n\n        float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x;\n        float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y;\n        if (lengthSq < nearSq || lengthSq > farSq)\n        {\n            show = 0.0;\n        }\n    #endif\n\n    float polylineAngle;\n    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, polylineAngle);\n    gl_Position = czm_viewportOrthographic * positionWC * show;\n\n    v_st.s = texCoord;\n    v_st.t = czm_writeNonPerspective(clamp(expandDir, 0.0, 1.0), gl_Position.w);\n\n    v_width = width;\n    v_pickColor = pickColor;\n    v_polylineAngle = polylineAngle;\n}\n"},877640:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    color /= texture(autoExposure, vec2(0.5)).r;\n#endif\n    color = czm_acesTonemapping(color);\n    color = czm_inverseGamma(color);\n\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},842633:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D colorTexture2;\n\nuniform vec2 center;\nuniform float radius;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 color0 = texture(colorTexture, v_textureCoordinates);\n    vec4 color1 = texture(colorTexture2, v_textureCoordinates);\n\n    float x = length(gl_FragCoord.xy - center) / radius;\n    float t = smoothstep(0.5, 0.8, x);\n    out_FragColor = mix(color0 + color1, color1, t);\n}\n"},520193:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D randomTexture;\nuniform sampler2D depthTexture;\nuniform float intensity;\nuniform float bias;\nuniform float lengthCap;\nuniform float stepSize;\nuniform float frustumLength;\n\nin vec2 v_textureCoordinates;\n\nvec4 clipToEye(vec2 uv, float depth)\n{\n    vec2 xy = vec2((uv.x * 2.0 - 1.0), ((1.0 - uv.y) * 2.0 - 1.0));\n    vec4 posEC = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posEC = posEC / posEC.w;\n    return posEC;\n}\n\n//Reconstruct Normal Without Edge Removation\nvec3 getNormalXEdge(vec3 posInCamera, float depthU, float depthD, float depthL, float depthR, vec2 pixelSize)\n{\n    vec4 posInCameraUp = clipToEye(v_textureCoordinates - vec2(0.0, pixelSize.y), depthU);\n    vec4 posInCameraDown = clipToEye(v_textureCoordinates + vec2(0.0, pixelSize.y), depthD);\n    vec4 posInCameraLeft = clipToEye(v_textureCoordinates - vec2(pixelSize.x, 0.0), depthL);\n    vec4 posInCameraRight = clipToEye(v_textureCoordinates + vec2(pixelSize.x, 0.0), depthR);\n\n    vec3 up = posInCamera.xyz - posInCameraUp.xyz;\n    vec3 down = posInCameraDown.xyz - posInCamera.xyz;\n    vec3 left = posInCamera.xyz - posInCameraLeft.xyz;\n    vec3 right = posInCameraRight.xyz - posInCamera.xyz;\n\n    vec3 DX = length(left) < length(right) ? left : right;\n    vec3 DY = length(up) < length(down) ? up : down;\n\n    return normalize(cross(DY, DX));\n}\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    vec4 posInCamera = clipToEye(v_textureCoordinates, depth);\n\n    if (posInCamera.z > frustumLength)\n    {\n        out_FragColor = vec4(1.0);\n        return;\n    }\n\n    vec2 pixelSize = czm_pixelRatio / czm_viewport.zw;\n    float depthU = czm_readDepth(depthTexture, v_textureCoordinates - vec2(0.0, pixelSize.y));\n    float depthD = czm_readDepth(depthTexture, v_textureCoordinates + vec2(0.0, pixelSize.y));\n    float depthL = czm_readDepth(depthTexture, v_textureCoordinates - vec2(pixelSize.x, 0.0));\n    float depthR = czm_readDepth(depthTexture, v_textureCoordinates + vec2(pixelSize.x, 0.0));\n    vec3 normalInCamera = getNormalXEdge(posInCamera.xyz, depthU, depthD, depthL, depthR, pixelSize);\n\n    float ao = 0.0;\n    vec2 sampleDirection = vec2(1.0, 0.0);\n    float gapAngle = 90.0 * czm_radiansPerDegree;\n\n    // RandomNoise\n    float randomVal = texture(randomTexture, v_textureCoordinates / pixelSize / 255.0).x;\n\n    //Loop for each direction\n    for (int i = 0; i < 4; i++)\n    {\n        float newGapAngle = gapAngle * (float(i) + randomVal);\n        float cosVal = cos(newGapAngle);\n        float sinVal = sin(newGapAngle);\n\n        //Rotate Sampling Direction\n        vec2 rotatedSampleDirection = vec2(cosVal * sampleDirection.x - sinVal * sampleDirection.y, sinVal * sampleDirection.x + cosVal * sampleDirection.y);\n        float localAO = 0.0;\n        float localStepSize = stepSize;\n\n        //Loop for each step\n        for (int j = 0; j < 6; j++)\n        {\n            vec2 newCoords = v_textureCoordinates + rotatedSampleDirection * localStepSize * pixelSize;\n\n            //Exception Handling\n            if(newCoords.x > 1.0 || newCoords.y > 1.0 || newCoords.x < 0.0 || newCoords.y < 0.0)\n            {\n                break;\n            }\n\n            float stepDepthInfo = czm_readDepth(depthTexture, newCoords);\n            vec4 stepPosInCamera = clipToEye(newCoords, stepDepthInfo);\n            vec3 diffVec = stepPosInCamera.xyz - posInCamera.xyz;\n            float len = length(diffVec);\n\n            if (len > lengthCap)\n            {\n                break;\n            }\n\n            float dotVal = clamp(dot(normalInCamera, normalize(diffVec)), 0.0, 1.0 );\n            float weight = len / lengthCap;\n            weight = 1.0 - weight * weight;\n\n            if (dotVal < bias)\n            {\n                dotVal = 0.0;\n            }\n\n            localAO = max(localAO, dotVal * weight);\n            localStepSize += stepSize;\n        }\n        ao += localAO;\n    }\n\n    ao /= 4.0;\n    ao = 1.0 - clamp(ao, 0.0, 1.0);\n    ao = pow(ao, intensity);\n    out_FragColor = vec4(vec3(ao), 1.0);\n}\n"},228434:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D ambientOcclusionTexture;\nuniform bool ambientOcclusionOnly;\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    vec4 ao = texture(ambientOcclusionTexture, v_textureCoordinates);\n    out_FragColor = ambientOcclusionOnly ? ao : ao * color;\n}\n"},251186:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform float gradations;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n#ifdef CZM_SELECTED_FEATURE\n    if (czm_selected()) {\n        out_FragColor = vec4(rgb, 1.0);\n        return;\n    }\n#endif\n    float luminance = czm_luminance(rgb);\n    float darkness = luminance * gradations;\n    darkness = (darkness - fract(darkness)) / gradations;\n    out_FragColor = vec4(vec3(darkness), 1.0);\n}\n"},709932:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D bloomTexture;\nuniform bool glowOnly;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n\n#ifdef CZM_SELECTED_FEATURE\n    if (czm_selected()) {\n        out_FragColor = color;\n        return;\n    }\n#endif\n\n    vec4 bloom = texture(bloomTexture, v_textureCoordinates);\n    out_FragColor = glowOnly ? bloom : bloom + color;\n}\n"},409292:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i='uniform sampler2D colorTexture;\n\nuniform float avgLuminance;\nuniform float threshold;\nuniform float offset;\n\nin vec2 v_textureCoordinates;\n\nfloat key(float avg)\n{\n    float guess = 1.5 - (1.5 / (avg * 0.1 + 1.0));\n    return max(0.0, guess) + 0.1;\n}\n\n// See section 9. "The bright-pass filter" of Realtime HDR Rendering\n// http://www.cg.tuwien.ac.at/research/publications/2007/Luksch_2007_RHR/Luksch_2007_RHR-RealtimeHDR%20.pdf\n\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    vec3 xyz = czm_RGBToXYZ(color.rgb);\n    float luminance = xyz.r;\n\n    float scaledLum = key(avgLuminance) * luminance / avgLuminance;\n    float brightLum = max(scaledLum - threshold, 0.0);\n    float brightness = brightLum / (offset + brightLum);\n\n    xyz.r = brightness;\n    out_FragColor = vec4(czm_XYZToRGB(xyz), 1.0);\n}\n'},380337:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform float brightness;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n    vec3 target = vec3(0.0);\n    out_FragColor = vec4(mix(target, rgb, brightness), 1.0);\n}\n"},182029:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\n\n#ifdef DEBUG_SHOW_DEPTH\nuniform sampler2D u_packedTranslucentDepth;\n#endif\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n#ifdef DEBUG_SHOW_DEPTH\n    if (v_textureCoordinates.x < 0.5)\n    {\n        out_FragColor.rgb = vec3(czm_unpackDepth(texture(u_packedTranslucentDepth, v_textureCoordinates)));\n        out_FragColor.a = 1.0;\n    }\n#else\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n\n#ifdef PICK\n    if (color == vec4(0.0))\n    {\n        discard;\n    }\n#else\n    // Reverse premultiplication process to get the correct composited result of the classification primitives\n    color.rgb /= color.a;\n#endif\n    out_FragColor = color;\n#endif\n}\n"},102625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform float contrast;\nuniform float brightness;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 sceneColor = texture(colorTexture, v_textureCoordinates).xyz;\n    sceneColor = czm_RGBToHSB(sceneColor);\n    sceneColor.z += brightness;\n    sceneColor = czm_HSBToRGB(sceneColor);\n\n    float factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));\n    sceneColor = factor * (sceneColor - vec3(0.5)) + vec3(0.5);\n    out_FragColor = vec4(sceneColor, 1.0);\n}\n"},838744:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D blurTexture;\nuniform sampler2D depthTexture;\nuniform float focalDistance;\n\nin vec2 v_textureCoordinates;\n\nvec4 toEye(vec2 uv, float depth)\n{\n   vec2 xy = vec2((uv.x * 2.0 - 1.0), ((1.0 - uv.y) * 2.0 - 1.0));\n   vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n   posInCamera = posInCamera / posInCamera.w;\n   return posInCamera;\n}\n\nfloat computeDepthBlur(float depth)\n{\n    float f;\n    if (depth < focalDistance)\n    {\n        f = (focalDistance - depth) / (focalDistance - czm_currentFrustum.x);\n    }\n    else\n    {\n        f = (depth - focalDistance) / (czm_currentFrustum.y - focalDistance);\n        f = pow(f, 0.1);\n    }\n    f *= f;\n    f = clamp(f, 0.0, 1.0);\n    return pow(f, 0.5);\n}\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    vec4 posInCamera = toEye(v_textureCoordinates, depth);\n    float d = computeDepthBlur(-posInCamera.z);\n    out_FragColor = mix(texture(colorTexture, v_textureCoordinates), texture(blurTexture, v_textureCoordinates), d);\n}\n"},280900:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    out_FragColor = vec4(vec3(depth), 1.0);\n}\n"},958154:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D depthTexture;\nuniform float length;\nuniform vec4 color;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    float directions[3];\n    directions[0] = -1.0;\n    directions[1] = 0.0;\n    directions[2] = 1.0;\n\n    float scalars[3];\n    scalars[0] = 3.0;\n    scalars[1] = 10.0;\n    scalars[2] = 3.0;\n\n    float padx = czm_pixelRatio / czm_viewport.z;\n    float pady = czm_pixelRatio / czm_viewport.w;\n\n#ifdef CZM_SELECTED_FEATURE\n    bool selected = false;\n    for (int i = 0; i < 3; ++i)\n    {\n        float dir = directions[i];\n        selected = selected || czm_selected(vec2(-padx, dir * pady));\n        selected = selected || czm_selected(vec2(padx, dir * pady));\n        selected = selected || czm_selected(vec2(dir * padx, -pady));\n        selected = selected || czm_selected(vec2(dir * padx, pady));\n        if (selected)\n        {\n            break;\n        }\n    }\n    if (!selected)\n    {\n        out_FragColor = vec4(color.rgb, 0.0);\n        return;\n    }\n#endif\n\n    float horizEdge = 0.0;\n    float vertEdge = 0.0;\n\n    for (int i = 0; i < 3; ++i)\n    {\n        float dir = directions[i];\n        float scale = scalars[i];\n\n        horizEdge -= texture(depthTexture, v_textureCoordinates + vec2(-padx, dir * pady)).x * scale;\n        horizEdge += texture(depthTexture, v_textureCoordinates + vec2(padx, dir * pady)).x * scale;\n\n        vertEdge -= texture(depthTexture, v_textureCoordinates + vec2(dir * padx, -pady)).x * scale;\n        vertEdge += texture(depthTexture, v_textureCoordinates + vec2(dir * padx, pady)).x * scale;\n    }\n\n    float len = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);\n    out_FragColor = vec4(color.rgb, len > length ? color.a : 0.0);\n}\n"},462864:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec2 v_textureCoordinates;\n\nuniform sampler2D colorTexture;\n\nconst float fxaaQualitySubpix = 0.5;\nconst float fxaaQualityEdgeThreshold = 0.125;\nconst float fxaaQualityEdgeThresholdMin = 0.0833;\n\nvoid main()\n{\n    vec2 fxaaQualityRcpFrame = vec2(1.0) / czm_viewport.zw;\n    vec4 color = FxaaPixelShader(\n        v_textureCoordinates,\n        colorTexture,\n        fxaaQualityRcpFrame,\n        fxaaQualitySubpix,\n        fxaaQualityEdgeThreshold,\n        fxaaQualityEdgeThresholdMin);\n    float alpha = texture(colorTexture, v_textureCoordinates).a;\n    out_FragColor = vec4(color.rgb, alpha);\n}\n"},874096:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See slides 142 and 143:\n//     http://www.gdcvault.com/play/1012459/Uncharted_2__HDR_Lighting\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n\n\tconst float A = 0.22; // shoulder strength\n\tconst float B = 0.30; // linear strength\n\tconst float C = 0.10; // linear angle\n\tconst float D = 0.20; // toe strength\n\tconst float E = 0.01; // toe numerator\n\tconst float F = 0.30; // toe denominator\n\n\tconst float white = 11.2; // linear white point value\n\n\tvec3 c = ((color * (A * color + C * B) + D * E) / (color * ( A * color + B) + D * F)) - E / F;\n\tfloat w = ((white * (A * white + C * B) + D * E) / (white * ( A * white + B) + D * F)) - E / F;\n\n\tc = czm_inverseGamma(c / w);\n\tout_FragColor = vec4(c, fragmentColor.a);\n}\n"},471159:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="#define SAMPLES 8\n\nuniform float delta;\nuniform float sigma;\nuniform float direction; // 0.0 for x direction, 1.0 for y direction\n\nuniform sampler2D colorTexture;\n\n#ifdef USE_STEP_SIZE\nuniform float stepSize;\n#else\nuniform vec2 step;\n#endif\n\nin vec2 v_textureCoordinates;\n\n//  Incremental Computation of the Gaussian:\n//  https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch40.html\n\nvoid main()\n{\n    vec2 st = v_textureCoordinates;\n    vec2 dir = vec2(1.0 - direction, direction);\n\n#ifdef USE_STEP_SIZE\n    vec2 step = vec2(stepSize * (czm_pixelRatio / czm_viewport.zw));\n#else\n    vec2 step = step;\n#endif\n\n    vec3 g;\n    g.x = 1.0 / (sqrt(czm_twoPi) * sigma);\n    g.y = exp((-0.5 * delta * delta) / (sigma * sigma));\n    g.z = g.y * g.y;\n\n    vec4 result = texture(colorTexture, st) * g.x;\n    for (int i = 1; i < SAMPLES; ++i)\n    {\n        g.xy *= g.yz;\n\n        vec2 offset = float(i) * dir * step;\n        result += texture(colorTexture, st - offset) * g.x;\n        result += texture(colorTexture, st + offset) * g.x;\n    }\n\n    out_FragColor = result;\n}\n"},770297:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D dirtTexture;\nuniform sampler2D starTexture;\nuniform vec2 dirtTextureDimensions;\nuniform float distortion;\nuniform float ghostDispersal;\nuniform float haloWidth;\nuniform float dirtAmount;\nuniform float earthRadius;\nuniform float intensity;\n\nin vec2 v_textureCoordinates;\n\n// whether it is in space or not\n// 6500000.0 is empirical value\n#define DISTANCE_TO_SPACE 6500000.0\n\n// return ndc from world coordinate biased earthRadius\nvec4 getNDCFromWC(vec3 WC, float earthRadius)\n{\n    vec4 positionEC = czm_view * vec4(WC, 1.0);\n    positionEC = vec4(positionEC.x + earthRadius, positionEC.y, positionEC.z, 1.0);\n    vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n    return czm_viewportOrthographic * vec4(positionWC.xy, -positionWC.z, 1.0);\n}\n\n// Check if current pixel is included Earth\n// if then mask it gradually\nfloat isInEarth(vec2 texcoord, vec2 sceneSize)\n{\n    vec2 NDC = texcoord * 2.0 - 1.0;\n    vec4 earthPosSC = getNDCFromWC(vec3(0.0), 0.0);\n    vec4 earthPosSCEdge = getNDCFromWC(vec3(0.0), earthRadius * 1.5);\n    NDC.xy -= earthPosSC.xy;\n\n    float X = abs(NDC.x) * sceneSize.x;\n    float Y = abs(NDC.y) * sceneSize.y;\n\n    return clamp(0.0, 1.0, max(sqrt(X * X + Y * Y) / max(abs(earthPosSCEdge.x * sceneSize.x), 1.0) - 0.8 , 0.0));\n}\n\n// For Chromatic effect\nvec4 textureDistorted(sampler2D tex, vec2 texcoord, vec2 direction, vec3 distortion, bool isSpace)\n{\n    vec2 sceneSize = czm_viewport.zw;\n    vec3 color;\n    if(isSpace)\n    {\n        color.r = isInEarth(texcoord + direction * distortion.r, sceneSize) * texture(tex, texcoord + direction * distortion.r).r;\n        color.g = isInEarth(texcoord + direction * distortion.g, sceneSize) * texture(tex, texcoord + direction * distortion.g).g;\n        color.b = isInEarth(texcoord + direction * distortion.b, sceneSize) * texture(tex, texcoord + direction * distortion.b).b;\n    }\n    else\n    {\n        color.r = texture(tex, texcoord + direction * distortion.r).r;\n        color.g = texture(tex, texcoord + direction * distortion.g).g;\n        color.b = texture(tex, texcoord + direction * distortion.b).b;\n    }\n    return vec4(clamp(color, 0.0, 1.0), 0.0);\n}\n\nvoid main(void)\n{\n    vec4 originalColor = texture(colorTexture, v_textureCoordinates);\n    vec3 rgb = originalColor.rgb;\n    bool isSpace = length(czm_viewerPositionWC.xyz) > DISTANCE_TO_SPACE;\n\n    // Sun position\n    vec4 sunPos = czm_morphTime == 1.0 ? vec4(czm_sunPositionWC, 1.0) : vec4(czm_sunPositionColumbusView.zxy, 1.0);\n    vec4 sunPositionEC = czm_view * sunPos;\n    vec4 sunPositionWC = czm_eyeToWindowCoordinates(sunPositionEC);\n    sunPos = czm_viewportOrthographic * vec4(sunPositionWC.xy, -sunPositionWC.z, 1.0);\n\n    // If sun is not in the screen space, use original color.\n    if(!isSpace || !((sunPos.x >= -1.1 && sunPos.x <= 1.1) && (sunPos.y >= -1.1 && sunPos.y <= 1.1)))\n    {\n        // Lens flare is disabled when not in space until #5932 is fixed.\n        //    https://github.com/CesiumGS/cesium/issues/5932\n        out_FragColor = originalColor;\n        return;\n    }\n\n    vec2 texcoord = vec2(1.0) - v_textureCoordinates;\n    vec2 pixelSize = czm_pixelRatio / czm_viewport.zw;\n    vec2 invPixelSize = 1.0 / pixelSize;\n    vec3 distortionVec = pixelSize.x * vec3(-distortion, 0.0, distortion);\n\n    // ghost vector to image centre:\n    vec2 ghostVec = (vec2(0.5) - texcoord) * ghostDispersal;\n    vec3 direction = normalize(vec3(ghostVec, 0.0));\n\n    // sample ghosts:\n    vec4 result = vec4(0.0);\n    vec4 ghost = vec4(0.0);\n    for (int i = 0; i < 4; ++i)\n    {\n        vec2 offset = fract(texcoord + ghostVec * float(i));\n        // Only bright spots from the centre of the source image\n        ghost += textureDistorted(colorTexture, offset, direction.xy, distortionVec, isSpace);\n    }\n    result += ghost;\n\n    // sample halo\n    vec2 haloVec = normalize(ghostVec) * haloWidth;\n    float weightForHalo = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n    weightForHalo = pow(1.0 - weightForHalo, 5.0);\n\n    result += textureDistorted(colorTexture, texcoord + haloVec, direction.xy, distortionVec, isSpace) * weightForHalo * 1.5;\n\n    // dirt on lens\n    vec2 dirtTexCoords = (v_textureCoordinates * invPixelSize) / dirtTextureDimensions;\n    if (dirtTexCoords.x > 1.0)\n    {\n        dirtTexCoords.x = mod(floor(dirtTexCoords.x), 2.0) == 1.0 ? 1.0 - fract(dirtTexCoords.x) :  fract(dirtTexCoords.x);\n    }\n    if (dirtTexCoords.y > 1.0)\n    {\n        dirtTexCoords.y = mod(floor(dirtTexCoords.y), 2.0) == 1.0 ? 1.0 - fract(dirtTexCoords.y) :  fract(dirtTexCoords.y);\n    }\n    result += dirtAmount * texture(dirtTexture, dirtTexCoords);\n\n    // Rotating starburst texture's coordinate\n    // dot(czm_view[0].xyz, vec3(0.0, 0.0, 1.0)) + dot(czm_view[1].xyz, vec3(0.0, 1.0, 0.0))\n    float camrot = czm_view[0].z + czm_view[1].y;\n    float cosValue = cos(camrot);\n    float sinValue = sin(camrot);\n    mat3 rotation = mat3(\n        cosValue, -sinValue, 0.0,\n        sinValue, cosValue, 0.0,\n        0.0, 0.0, 1.0\n    );\n\n    vec3 st1 = vec3(v_textureCoordinates * 2.0 - vec2(1.0), 1.0);\n    vec3 st2 = vec3((rotation * st1).xy, 1.0);\n    vec3 st3 = st2 * 0.5 + vec3(0.5);\n    vec2 lensStarTexcoord = st3.xy;\n    float weightForLensFlare = length(vec3(sunPos.xy, 0.0));\n    float oneMinusWeightForLensFlare = max(1.0 - weightForLensFlare, 0.0);\n\n    if (!isSpace)\n    {\n        result *= oneMinusWeightForLensFlare * intensity * 0.2;\n    }\n    else\n    {\n        result *= oneMinusWeightForLensFlare * intensity;\n        result *= texture(starTexture, lensStarTexcoord) * pow(weightForLensFlare, 1.0) * max((1.0 - length(vec3(st1.xy, 0.0))), 0.0) * 2.0;\n    }\n\n    result += texture(colorTexture, v_textureCoordinates);\n\n    out_FragColor = result;\n}\n"},730264:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform vec3 white;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See equation 4:\n//    http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n    color = (color * (1.0 + color / white)) / (1.0 + color);\n    color = czm_inverseGamma(color);\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},639164:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy ,vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    float noiseValue = rand(v_textureCoordinates + sin(czm_frameNumber)) * 0.1;\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n    vec3 green = vec3(0.0, 1.0, 0.0);\n    out_FragColor = vec4((noiseValue + rgb) * green, 1.0);\n}\n"},58038:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = texture(colorTexture, v_textureCoordinates);\n}\n"},622388:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform highp sampler2D u_depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = czm_packDepth(texture(u_depthTexture, v_textureCoordinates).r);\n}\n"},638442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D u_pointCloud_colorGBuffer;\nuniform sampler2D u_pointCloud_depthGBuffer;\nuniform vec2 u_distanceAndEdlStrength;\nin vec2 v_textureCoordinates;\n\nvec2 neighborContribution(float log2Depth, vec2 offset)\n{\n    float dist = u_distanceAndEdlStrength.x;\n    vec2 texCoordOrig = v_textureCoordinates + offset * dist;\n    vec2 texCoord0 = v_textureCoordinates + offset * floor(dist);\n    vec2 texCoord1 = v_textureCoordinates + offset * ceil(dist);\n\n    float depthOrLogDepth0 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord0));\n    float depthOrLogDepth1 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord1));\n\n    // ignore depth values that are the clear depth\n    if (depthOrLogDepth0 == 0.0 || depthOrLogDepth1 == 0.0) {\n        return vec2(0.0);\n    }\n\n    // interpolate the two adjacent depth values\n    float depthMix = mix(depthOrLogDepth0, depthOrLogDepth1, fract(dist));\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(texCoordOrig, depthMix);\n    return vec2(max(0.0, log2Depth - log2(-eyeCoordinate.z / eyeCoordinate.w)), 1.0);\n}\n\nvoid main()\n{\n    float depthOrLogDepth = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, v_textureCoordinates));\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depthOrLogDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float log2Depth = log2(-eyeCoordinate.z);\n\n    if (depthOrLogDepth == 0.0) // 0.0 is the clear value for the gbuffer\n    {\n        discard;\n    }\n\n    vec4 color = texture(u_pointCloud_colorGBuffer, v_textureCoordinates);\n\n    // sample from neighbors left, right, down, up\n    vec2 texelSize = 1.0 / czm_viewport.zw;\n\n    vec2 responseAndCount = vec2(0.0);\n\n    responseAndCount += neighborContribution(log2Depth, vec2(-texelSize.x, 0.0));\n    responseAndCount += neighborContribution(log2Depth, vec2(+texelSize.x, 0.0));\n    responseAndCount += neighborContribution(log2Depth, vec2(0.0, -texelSize.y));\n    responseAndCount += neighborContribution(log2Depth, vec2(0.0, +texelSize.y));\n\n    float response = responseAndCount.x / responseAndCount.y;\n    float strength = u_distanceAndEdlStrength.y;\n    float shade = exp(-response * 300.0 * strength);\n    color.rgb *= shade;\n    out_FragColor = vec4(color);\n\n    // Input and output depth are the same.\n    gl_FragDepth = depthOrLogDepth;\n}\n"},783775:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See equation 3:\n//    http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n    color = color / (1.0 + color);\n    color = czm_inverseGamma(color);\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},938178:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D silhouetteTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 silhouetteColor = texture(silhouetteTexture, v_textureCoordinates);\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    out_FragColor = mix(color, silhouetteColor, silhouetteColor.a);\n}\n"},64801:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D u_texture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = texture(u_texture, v_textureCoordinates);\n}\n"},840054:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec4 position;\nin float webMercatorT;\n\nuniform vec2 u_textureDimensions;\n\nout vec2 v_textureCoordinates;\n\nvoid main()\n{\n    v_textureCoordinates = vec2(position.x, webMercatorT);\n    gl_Position = czm_viewportOrthographic * (position * vec4(u_textureDimensions, 1.0, 1.0));\n}\n"},92078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="float interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n\nvec3 getLightDirection(vec3 positionWC)\n{\n    float lightEnum = u_radiiAndDynamicAtmosphereColor.z;\n    vec3 lightDirection =\n        positionWC * float(lightEnum == 0.0) +\n        czm_lightDirectionWC * float(lightEnum == 1.0) +\n        czm_sunDirectionWC * float(lightEnum == 2.0);\n    return normalize(lightDirection);\n}\n\nvoid computeAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity, out float underTranslucentGlobe)\n{\n    float ellipsoidRadiiDifference = czm_ellipsoidRadii.x - czm_ellipsoidRadii.z;\n\n    // Adjustment to the atmosphere radius applied based on the camera height.\n    float distanceAdjustMin = czm_ellipsoidRadii.x / 4.0;\n    float distanceAdjustMax = czm_ellipsoidRadii.x;\n    float distanceAdjustModifier = ellipsoidRadiiDifference / 2.0;\n    float distanceAdjust = distanceAdjustModifier * clamp((czm_eyeHeight - distanceAdjustMin) / (distanceAdjustMax - distanceAdjustMin), 0.0, 1.0);\n\n    // Since atmosphere scattering assumes the atmosphere is a spherical shell, we compute an inner radius of the atmosphere best fit \n    // for the position on the ellipsoid.\n    float radiusAdjust = (ellipsoidRadiiDifference / 4.0) + distanceAdjust;\n    float atmosphereInnerRadius = (length(czm_viewerPositionWC) - czm_eyeHeight) - radiusAdjust;\n\n    // Setup the primary ray: from the camera position to the vertex position.\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);\n\n    underTranslucentGlobe = 0.0;\n\n    // Brighten the sky atmosphere under the Earth's atmosphere when translucency is enabled.\n    #if defined(GLOBE_TRANSLUCENT)\n\n        // Check for intersection with the inner radius of the atmopshere.\n        czm_raySegment primaryRayEarthIntersect = czm_raySphereIntersectionInterval(primaryRay, vec3(0.0), atmosphereInnerRadius + radiusAdjust);\n        if (primaryRayEarthIntersect.start > 0.0 && primaryRayEarthIntersect.stop > 0.0) {\n            \n            // Compute position on globe.\n            vec3 direction = normalize(positionWC);\n            czm_ray ellipsoidRay = czm_ray(positionWC, -direction);\n            czm_raySegment ellipsoidIntersection = czm_rayEllipsoidIntersectionInterval(ellipsoidRay, vec3(0.0), czm_ellipsoidInverseRadii);\n            vec3 onEarth = positionWC - (direction * ellipsoidIntersection.start);\n\n            // Control the color using the camera angle.\n            float angle = dot(normalize(czm_viewerPositionWC), normalize(onEarth));\n\n            // Control the opacity using the distance from Earth.\n            opacity = interpolateByDistance(vec4(0.0, 1.0, czm_ellipsoidRadii.x, 0.0), length(czm_viewerPositionWC - onEarth));\n            vec3 horizonColor = vec3(0.1, 0.2, 0.3);\n            vec3 nearColor = vec3(0.0);\n\n            rayleighColor = mix(nearColor, horizonColor, exp(-angle) * opacity);\n            \n            // Set the traslucent flag to avoid alpha adjustment in computeFinalColor funciton.\n            underTranslucentGlobe = 1.0;\n            return;\n        }\n    #endif\n\n    computeScattering(\n        primaryRay,\n        length(cameraToPositionWC),\n        lightDirection,\n        atmosphereInnerRadius,\n        rayleighColor,\n        mieColor,\n        opacity\n    );\n\n    // Alter the opacity based on how close the viewer is to the ground.\n    // (0.0 = At edge of atmosphere, 1.0 = On ground)\n    float cameraHeight = czm_eyeHeight + atmosphereInnerRadius;\n    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;\n    opacity = clamp((atmosphereOuterRadius - cameraHeight) / (atmosphereOuterRadius - atmosphereInnerRadius), 0.0, 1.0);\n\n    // Alter alpha based on time of day (0.0 = night , 1.0 = day)\n    float nightAlpha = (u_radiiAndDynamicAtmosphereColor.z != 0.0) ? clamp(dot(normalize(positionWC), lightDirection), 0.0, 1.0) : 1.0;\n    opacity *= pow(nightAlpha, 0.5);\n}\n"},917085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 v_outerPositionWC;\n\nuniform vec3 u_hsbShift;\n\n#ifndef PER_FRAGMENT_ATMOSPHERE\nin vec3 v_mieColor;\nin vec3 v_rayleighColor;\nin float v_opacity;\nin float v_translucent;\n#endif\n\nvoid main (void)\n{\n    vec3 lightDirection = getLightDirection(v_outerPositionWC);\n   \n    vec3 mieColor;\n    vec3 rayleighColor;\n    float opacity;\n    float translucent;\n\n    #ifdef PER_FRAGMENT_ATMOSPHERE\n        computeAtmosphereScattering(\n            v_outerPositionWC,\n            lightDirection,\n            rayleighColor,\n            mieColor,\n            opacity,\n            translucent\n        );\n    #else\n        mieColor = v_mieColor;\n        rayleighColor = v_rayleighColor;\n        opacity = v_opacity;\n        translucent = v_translucent;\n    #endif\n\n    vec4 color = computeAtmosphereColor(v_outerPositionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n    #ifndef HDR\n        color.rgb = czm_acesTonemapping(color.rgb);\n        color.rgb = czm_inverseGamma(color.rgb);\n    #endif\n\n    #ifdef COLOR_CORRECT\n        // Convert rgb color to hsb\n        vec3 hsb = czm_RGBToHSB(color.rgb);\n        // Perform hsb shift\n        hsb.x += u_hsbShift.x; // hue\n        hsb.y = clamp(hsb.y + u_hsbShift.y, 0.0, 1.0); // saturation\n        hsb.z = hsb.z > czm_epsilon7 ? hsb.z + u_hsbShift.z : 0.0; // brightness\n        // Convert shifted hsb back to rgb\n        color.rgb = czm_HSBToRGB(hsb);\n    #endif\n\n    // For the parts of the sky atmosphere that are not behind a translucent globe,\n    // we mix in the default opacity so that the sky atmosphere still appears at distance.\n    // This is needed because the opacity in the sky atmosphere is initially adjusted based\n    // on the camera height.\n    if (translucent == 0.0) {\n        color.a = mix(color.b, 1.0, color.a) * smoothstep(0.0, 1.0, czm_morphTime);\n    }\n\n    out_FragColor = color;\n}\n"},965087:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec4 position;\n\nout vec3 v_outerPositionWC;\n\n#ifndef PER_FRAGMENT_ATMOSPHERE\nout vec3 v_mieColor;\nout vec3 v_rayleighColor;\nout float v_opacity;\nout float v_translucent;\n#endif\n\nvoid main(void)\n{\n    vec4 positionWC = czm_model * position;\n    vec3 lightDirection = getLightDirection(positionWC.xyz);\n\n    #ifndef PER_FRAGMENT_ATMOSPHERE\n        computeAtmosphereScattering(\n            positionWC.xyz,\n            lightDirection,\n            v_rayleighColor,\n            v_mieColor,\n            v_opacity,\n            v_translucent\n        );\n    #endif\n    \n    v_outerPositionWC = positionWC.xyz;\n    gl_Position = czm_modelViewProjection * position;\n}\n"},944067:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform samplerCube u_cubeMap;\n\nin vec3 v_texCoord;\n\nvoid main()\n{\n    vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));\n    out_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);\n}\n"},148679:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 position;\n\nout vec3 v_texCoord;\n\nvoid main()\n{\n    vec3 p = czm_viewRotation * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n    gl_Position = czm_projection * vec4(p, 1.0);\n    v_texCoord = position.xyz;\n}\n"},902370:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform sampler2D u_texture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 color = texture(u_texture, v_textureCoordinates);\n    out_FragColor = czm_gammaCorrect(color);\n}\n"},680721:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="uniform float u_radiusTS;\n\nin vec2 v_textureCoordinates;\n\nvec2 rotate(vec2 p, vec2 direction)\n{\n    return vec2(p.x * direction.x - p.y * direction.y, p.x * direction.y + p.y * direction.x);\n}\n\nvec4 addBurst(vec2 position, vec2 direction, float lengthScalar)\n{\n    vec2 rotatedPosition = rotate(position, direction) * vec2(25.0, 0.75);\n    float radius = length(rotatedPosition) * lengthScalar;\n    float burst = 1.0 - smoothstep(0.0, 0.55, radius);\n    return vec4(burst);\n}\n\nvoid main()\n{\n    float lengthScalar = 2.0 / sqrt(2.0);\n    vec2 position = v_textureCoordinates - vec2(0.5);\n    float radius = length(position) * lengthScalar;\n    float surface = step(radius, u_radiusTS);\n    vec4 color = vec4(vec2(1.0), surface + 0.2, surface);\n\n    float glow = 1.0 - smoothstep(0.0, 0.55, radius);\n    color.ba += mix(vec2(0.0), vec2(1.0), glow) * 0.75;\n\n    vec4 burst = vec4(0.0);\n\n    // The following loop has been manually unrolled for speed, to\n    // avoid sin() and cos().\n    //\n    //for (float i = 0.4; i < 3.2; i += 1.047) {\n    //    vec2 direction = vec2(sin(i), cos(i));\n    //    burst += 0.4 * addBurst(position, direction, lengthScalar);\n    //\n    //    direction = vec2(sin(i - 0.08), cos(i - 0.08));\n    //    burst += 0.3 * addBurst(position, direction, lengthScalar);\n    //}\n\n    burst += 0.4 * addBurst(position, vec2(0.38942,  0.92106), lengthScalar);  // angle == 0.4\n    burst += 0.4 * addBurst(position, vec2(0.99235,  0.12348), lengthScalar);  // angle == 0.4 + 1.047\n    burst += 0.4 * addBurst(position, vec2(0.60327, -0.79754), lengthScalar);  // angle == 0.4 + 1.047 * 2.0\n\n    burst += 0.3 * addBurst(position, vec2(0.31457,  0.94924), lengthScalar);  // angle == 0.4 - 0.08\n    burst += 0.3 * addBurst(position, vec2(0.97931,  0.20239), lengthScalar);  // angle == 0.4 + 1.047 - 0.08\n    burst += 0.3 * addBurst(position, vec2(0.66507, -0.74678), lengthScalar);  // angle == 0.4 + 1.047 * 2.0 - 0.08\n\n    // End of manual loop unrolling.\n\n    color += clamp(burst, vec4(0.0), vec4(1.0)) * 0.15;\n\n    out_FragColor = clamp(color, vec4(0.0), vec4(1.0));\n}\n"},409207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec2 direction;\n\nuniform float u_size;\n\nout vec2 v_textureCoordinates;\n\nvoid main() \n{\n    vec4 position;\n    if (czm_morphTime == 1.0)\n    {\n        position = vec4(czm_sunPositionWC, 1.0);\n    }\n    else\n    {\n        position = vec4(czm_sunPositionColumbusView.zxy, 1.0);\n    }\n    \n    vec4 positionEC = czm_view * position;\n    vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n    \n    vec2 halfSize = vec2(u_size * 0.5);\n    halfSize *= ((direction * 2.0) - 1.0);\n    \n    gl_Position = czm_viewportOrthographic * vec4(positionWC.xy + halfSize, -positionWC.z, 1.0);\n    \n    v_textureCoordinates = direction;\n}\n"},79768:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec4 v_startPlaneEC;\nin vec4 v_endPlaneEC;\nin vec4 v_rightPlaneEC;\nin float v_halfWidth;\nin vec3 v_volumeUpEC;\n\nuniform vec4 u_highlightColor;\nvoid main()\n{\n    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));\n\n    // Discard for sky\n    if (logDepthOrDepth == 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        out_FragColor = vec4(0.0, 0.0, 1.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float halfMaxWidth = v_halfWidth * czm_metersPerPixel(eyeCoordinate);\n\n    // Expand halfMaxWidth if direction to camera is almost perpendicular with the volume's up direction\n    halfMaxWidth += halfMaxWidth * (1.0 - dot(-normalize(eyeCoordinate.xyz), v_volumeUpEC));\n\n    // Check distance of the eye coordinate against the right-facing plane\n    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);\n\n    // Check eye coordinate against the mitering planes\n    float distanceFromStart = czm_planeDistance(v_startPlaneEC, eyeCoordinate.xyz);\n    float distanceFromEnd = czm_planeDistance(v_endPlaneEC, eyeCoordinate.xyz);\n\n    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        out_FragColor = vec4(logDepthOrDepth, 0.0, 0.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n    out_FragColor = u_highlightColor;\n\n    czm_writeDepthClamp();\n}\n"},509762:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i='in vec3 startEllipsoidNormal;\nin vec3 endEllipsoidNormal;\nin vec4 startPositionAndHeight;\nin vec4 endPositionAndHeight;\nin vec4 startFaceNormalAndVertexCorner;\nin vec4 endFaceNormalAndHalfWidth;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelView;\nuniform vec2 u_minimumMaximumVectorHeights;\n\nout vec4 v_startPlaneEC;\nout vec4 v_endPlaneEC;\nout vec4 v_rightPlaneEC;\nout float v_halfWidth;\nout vec3 v_volumeUpEC;\n\nvoid main()\n{\n    // vertex corner IDs\n    //          3-----------7\n    //         /|   left   /|\n    //        / | 1       / |\n    //       2-----------6  5  end\n    //       | /         | /\n    // start |/  right   |/\n    //       0-----------4\n    //\n    float isEnd = floor(startFaceNormalAndVertexCorner.w * 0.251); // 0 for front, 1 for end\n    float isTop = floor(startFaceNormalAndVertexCorner.w * mix(0.51, 0.19, isEnd)); // 0 for bottom, 1 for top\n\n    vec3 forward = endPositionAndHeight.xyz - startPositionAndHeight.xyz;\n    vec3 right = normalize(cross(forward, startEllipsoidNormal));\n\n    vec4 position = vec4(startPositionAndHeight.xyz, 1.0);\n    position.xyz += forward * isEnd;\n\n    v_volumeUpEC = czm_normal * normalize(cross(right, forward));\n\n    // Push for volume height\n    float offset;\n    vec3 ellipsoidNormal = mix(startEllipsoidNormal, endEllipsoidNormal, isEnd);\n\n    // offset height to create volume\n    offset = mix(startPositionAndHeight.w, endPositionAndHeight.w, isEnd);\n    offset = mix(u_minimumMaximumVectorHeights.y, u_minimumMaximumVectorHeights.x, isTop) - offset;\n    position.xyz += offset * ellipsoidNormal;\n\n    // move from RTC to EC\n    position = u_modifiedModelView * position;\n    right = czm_normal * right;\n\n    // Push for width in a direction that is in the start or end plane and in a plane with right\n    // N = normalEC ("right-facing" direction for push)\n    // R = right\n    // p = angle between N and R\n    // w = distance to push along R if R == N\n    // d = distance to push along N\n    //\n    //   N   R\n    //  {  p| }      * cos(p) = dot(N, R) = w / d\n    //  d  |  |w    * d = w / dot(N, R)\n    //    { | }\n    //       o---------- polyline segment ----\x3e\n    //\n    vec3 scratchNormal = mix(-startFaceNormalAndVertexCorner.xyz, endFaceNormalAndHalfWidth.xyz, isEnd);\n    scratchNormal = cross(scratchNormal, mix(startEllipsoidNormal, endEllipsoidNormal, isEnd));\n    vec3 miterPushNormal = czm_normal * normalize(scratchNormal);\n\n    offset = 2.0 * endFaceNormalAndHalfWidth.w * max(0.0, czm_metersPerPixel(position)); // offset = widthEC\n    offset = offset / dot(miterPushNormal, right);\n    position.xyz += miterPushNormal * (offset * sign(0.5 - mod(startFaceNormalAndVertexCorner.w, 2.0)));\n\n    gl_Position = czm_depthClamp(czm_projection * position);\n\n    position = u_modifiedModelView * vec4(startPositionAndHeight.xyz, 1.0);\n    vec3 startNormalEC = czm_normal * startFaceNormalAndVertexCorner.xyz;\n    v_startPlaneEC = vec4(startNormalEC, -dot(startNormalEC, position.xyz));\n    v_rightPlaneEC = vec4(right, -dot(right, position.xyz));\n\n    position = u_modifiedModelView * vec4(endPositionAndHeight.xyz, 1.0);\n    vec3 endNormalEC = czm_normal * endFaceNormalAndHalfWidth.xyz;\n    v_endPlaneEC = vec4(endNormalEC, -dot(endNormalEC, position.xyz));\n    v_halfWidth = endFaceNormalAndHalfWidth.w;\n}\n'},132052:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec4 currentPosition;\nin vec4 previousPosition;\nin vec4 nextPosition;\nin vec2 expandAndWidth;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelView;\n\nvoid main()\n{\n    float expandDir = expandAndWidth.x;\n    float width = abs(expandAndWidth.y) + 0.5;\n    bool usePrev = expandAndWidth.y < 0.0;\n\n    vec4 p = u_modifiedModelView * currentPosition;\n    vec4 prev = u_modifiedModelView * previousPosition;\n    vec4 next = u_modifiedModelView * nextPosition;\n\n    float angle;\n    vec4 positionWC = getPolylineWindowCoordinatesEC(p, prev, next, expandDir, width, usePrev, angle);\n    gl_Position = czm_viewportOrthographic * positionWC;\n}\n"},456060:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec3 position;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelViewProjection;\n\nvoid main()\n{\n    gl_Position = czm_depthClamp(u_modifiedModelViewProjection * vec4(position, 1.0));\n}\n"},215432:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec4 position;\nin vec2 textureCoordinates;\n\nout vec2 v_textureCoordinates;\n\nvoid main() \n{\n    gl_Position = position;\n    v_textureCoordinates = textureCoordinates;\n}\n"},749159:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray and NO_HIT\n// See convertUvToBox.glsl for the definition of convertShapeUvToUvSpace\n\n/* Box defines (set in Scene/VoxelBoxShape.js)\n#define BOX_INTERSECTION_INDEX ### // always 0\n*/\n\nuniform vec3 u_renderMinBounds;\nuniform vec3 u_renderMaxBounds;\n\nstruct Box {\n    vec3 p0;\n    vec3 p1;\n};\n\nBox constructVoxelBox(in ivec4 octreeCoords, in vec3 tileUv)\n{\n    // Find the min/max cornerpoints of the voxel in tile coordinates\n    vec3 tileOrigin = vec3(octreeCoords.xyz);\n    vec3 numSamples = vec3(u_dimensions);\n    vec3 voxelSize = 1.0 / numSamples;\n    vec3 coordP0 = floor(tileUv * numSamples) * voxelSize + tileOrigin;\n    vec3 coordP1 = coordP0 + voxelSize;\n\n    // Transform to the UV coordinates of the scaled tileset\n    float tileSize = 1.0 / pow(2.0, float(octreeCoords.w));\n    vec3 p0 = convertShapeUvToUvSpace(coordP0 * tileSize);\n    vec3 p1 = convertShapeUvToUvSpace(coordP1 * tileSize);\n\n    return Box(p0, p1);\n}\n\nvec3 getBoxNormal(in Box box, in Ray ray, in float t)\n{\n    vec3 hitPoint = ray.pos + t * ray.dir;\n    vec3 lower = step(hitPoint, box.p0);\n    vec3 upper = step(box.p1, hitPoint);\n    return normalize(upper - lower);\n}\n\n// Find the distances along a ray at which the ray intersects an axis-aligned box\n// See https://tavianator.com/2011/ray_box.html\nRayShapeIntersection intersectBox(in Ray ray, in Box box)\n{\n    // Consider the box as the intersection of the space between 3 pairs of parallel planes\n    // Compute the distance along the ray to each plane\n    vec3 t0 = (box.p0 - ray.pos) * ray.dInv;\n    vec3 t1 = (box.p1 - ray.pos) * ray.dInv;\n\n    // Identify candidate entries/exits based on distance from ray.pos\n    vec3 entries = min(t0, t1);\n    vec3 exits = max(t0, t1);\n\n    // The actual box intersection points are the furthest entry and the closest exit\n    float entryT = max(max(entries.x, entries.y), entries.z);\n    float exitT = min(min(exits.x, exits.y), exits.z);\n\n    vec3 entryNormal = getBoxNormal(box, ray, entryT - RAY_SHIFT);\n    vec3 exitNormal = getBoxNormal(box, ray, exitT + RAY_SHIFT);\n\n    if (entryT > exitT) {\n        entryT = NO_HIT;\n        exitT = NO_HIT;\n    }\n\n    return RayShapeIntersection(vec4(entryNormal, entryT), vec4(exitNormal, exitT));\n}\n\nvoid intersectShape(in Ray ray, inout Intersections ix)\n{\n    RayShapeIntersection intersection = intersectBox(ray, Box(u_renderMinBounds, u_renderMaxBounds));\n    setShapeIntersection(ix, BOX_INTERSECTION_INDEX, intersection);\n}\n"},933495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, Intersections, INF_HIT,\n// NO_HIT, setIntersectionPair\n\n/* Clipping plane defines (set in Scene/VoxelRenderResources.js)\n#define CLIPPING_PLANES_UNION\n#define CLIPPING_PLANES_COUNT\n#define CLIPPING_PLANES_INTERSECTION_INDEX\n*/\n\nuniform sampler2D u_clippingPlanesTexture;\nuniform mat4 u_clippingPlanesMatrix;\n\n// Plane is in Hessian Normal Form\nvec4 intersectPlane(in Ray ray, in vec4 plane) {\n    vec3 n = plane.xyz; // normal\n    float w = plane.w; // -dot(pointOnPlane, normal)\n\n    float a = dot(ray.pos, n);\n    float b = dot(ray.dir, n);\n    float t = -(w + a) / b;\n\n    return vec4(n, t);\n}\n\nvoid intersectClippingPlanes(in Ray ray, inout Intersections ix) {\n    vec4 backSide = vec4(-ray.dir, -INF_HIT);\n    vec4 farSide = vec4(ray.dir, +INF_HIT);\n    RayShapeIntersection clippingVolume;\n\n    #if (CLIPPING_PLANES_COUNT == 1)\n        // Union and intersection are the same when there's one clipping plane, and the code\n        // is more simplified.\n        vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, 0, u_clippingPlanesMatrix);\n        vec4 intersection = intersectPlane(ray, planeUv);\n        bool reflects = dot(ray.dir, intersection.xyz) < 0.0;\n        clippingVolume.entry = reflects ? backSide : intersection;\n        clippingVolume.exit = reflects ? intersection : farSide;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX, clippingVolume);\n    #elif defined(CLIPPING_PLANES_UNION)\n        vec4 firstTransmission = vec4(ray.dir, +INF_HIT);\n        vec4 lastReflection = vec4(-ray.dir, -INF_HIT);\n        for (int i = 0; i < CLIPPING_PLANES_COUNT; i++) {\n            vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, i, u_clippingPlanesMatrix);\n            vec4 intersection = intersectPlane(ray, planeUv);\n            if (dot(ray.dir, planeUv.xyz) > 0.0) {\n                firstTransmission = intersection.w <= firstTransmission.w ? intersection : firstTransmission;\n            } else {\n                lastReflection = intersection.w >= lastReflection.w ? intersection : lastReflection;\n            }\n        }\n        clippingVolume.entry = backSide;\n        clippingVolume.exit = lastReflection;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX + 0, clippingVolume);\n        clippingVolume.entry = firstTransmission;\n        clippingVolume.exit = farSide;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX + 1, clippingVolume);\n    #else // intersection\n        vec4 lastTransmission = vec4(ray.dir, -INF_HIT);\n        vec4 firstReflection = vec4(-ray.dir, +INF_HIT);\n        for (int i = 0; i < CLIPPING_PLANES_COUNT; i++) {\n            vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, i, u_clippingPlanesMatrix);\n            vec4 intersection = intersectPlane(ray, planeUv);\n            if (dot(ray.dir, planeUv.xyz) > 0.0) {\n                lastTransmission = intersection.w > lastTransmission.w ? intersection : lastTransmission;\n            } else {\n                firstReflection = intersection.w < firstReflection.w ? intersection: firstReflection;\n            }\n        }\n        if (lastTransmission.w < firstReflection.w) {\n            clippingVolume.entry = lastTransmission;\n            clippingVolume.exit = firstReflection;\n        } else {\n            clippingVolume.entry = vec4(-ray.dir, NO_HIT);\n            clippingVolume.exit = vec4(ray.dir, NO_HIT);\n        }\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX, clippingVolume);\n    #endif\n}\n"},397974:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, setIntersection,\n// setIntersectionPair\n\n/* Cylinder defines (set in Scene/VoxelCylinderShape.js)\n#define CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN\n#define CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX\n#define CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT\n#define CYLINDER_HAS_RENDER_BOUNDS_HEIGHT\n#define CYLINDER_HAS_RENDER_BOUNDS_HEIGHT_FLAT\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_HALF\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO\n\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED\n\n#define CYLINDER_INTERSECTION_INDEX_RADIUS_MAX\n#define CYLINDER_INTERSECTION_INDEX_RADIUS_MIN\n#define CYLINDER_INTERSECTION_INDEX_ANGLE\n*/\n\n// Cylinder uniforms\n#if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX) || defined(CYLINDER_HAS_RENDER_BOUNDS_HEIGHT)\n    uniform vec3 u_cylinderUvToRenderBoundsScale;\n    uniform vec3 u_cylinderUvToRenderBoundsTranslate;\n#endif\n#if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN) && !defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT)\n    uniform float u_cylinderUvToRenderRadiusMin;\n#endif\n#if defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE)\n    uniform vec2 u_cylinderRenderAngleMinMax;\n#endif\n\nvec4 intersectHalfPlane(Ray ray, float angle) {\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 planeDirection = vec2(cos(angle), sin(angle));\n    vec2 planeNormal = vec2(planeDirection.y, -planeDirection.x);\n\n    float a = dot(o, planeNormal);\n    float b = dot(d, planeNormal);\n    float t = -a / b;\n\n    vec2 p = o + t * d;\n    bool outside = dot(p, planeDirection) < 0.0;\n    if (outside) return vec4(-INF_HIT, +INF_HIT, NO_HIT, NO_HIT);\n\n    return vec4(-INF_HIT, t, t, +INF_HIT);\n}\n\n#define POSITIVE_HIT vec2(t, +INF_HIT);\n#define NEGATIVE_HIT vec2(-INF_HIT, t);\n\nvec2 intersectHalfSpace(Ray ray, float angle)\n{\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 n = vec2(sin(angle), -cos(angle));\n\n    float a = dot(o, n);\n    float b = dot(d, n);\n    float t = -a / b;\n    float s = sign(a);\n\n    // Half space cuts right through the camera, pick the side to intersect\n    if (a == 0.0) {\n        if (b >= 0.0) {\n            return POSITIVE_HIT;\n        } else {\n            return NEGATIVE_HIT;\n        }\n    }\n\n    if (t >= 0.0 != s >= 0.0) {\n        return POSITIVE_HIT;\n    } else {\n        return NEGATIVE_HIT;\n    }\n}\n\nvec2 intersectRegularWedge(Ray ray, float minAngle, float maxAngle)\n{\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 n1 = vec2(sin(minAngle), -cos(minAngle));\n    vec2 n2 = vec2(-sin(maxAngle), cos(maxAngle));\n\n    float a1 = dot(o, n1);\n    float a2 = dot(o, n2);\n    float b1 = dot(d, n1);\n    float b2 = dot(d, n2);\n\n    float t1 = -a1 / b1;\n    float t2 = -a2 / b2;\n    float s1 = sign(a1);\n    float s2 = sign(a2);\n\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n    float smin = tmin == t1 ? s1 : s2;\n    float smax = tmin == t1 ? s2 : s1;\n\n    bool e = tmin >= 0.0;\n    bool f = tmax >= 0.0;\n    bool g = smin >= 0.0;\n    bool h = smax >= 0.0;\n\n    if (e != g && f == h) return vec2(tmin, tmax);\n    else if (e == g && f == h) return vec2(-INF_HIT, tmin);\n    else if (e != g && f != h) return vec2(tmax, +INF_HIT);\n    else return vec2(NO_HIT);\n}\n\nvec4 intersectFlippedWedge(Ray ray, float minAngle, float maxAngle)\n{\n    vec2 planeIntersectMin = intersectHalfSpace(ray, minAngle);\n    vec2 planeIntersectMax = intersectHalfSpace(ray, maxAngle + czm_pi);\n    return vec4(planeIntersectMin, planeIntersectMax);\n}\n\nvec2 intersectUnitCylinder(Ray ray)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float a = dot(d.xy, d.xy);\n    float b = dot(o.xy, d.xy);\n    float c = dot(o.xy, o.xy) - 1.0;\n    float det = b * b - a * c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float ta = (-b - det) / a;\n    float tb = (-b + det) / a;\n    float t1 = min(ta, tb);\n    float t2 = max(ta, tb);\n\n    float z1 = o.z + t1 * d.z;\n    float z2 = o.z + t2 * d.z;\n\n    if (abs(z1) >= 1.0)\n    {\n        float tCap = (sign(z1) - o.z) / d.z;\n        t1 = abs(b + a * tCap) < det ? tCap : NO_HIT;\n    }\n\n    if (abs(z2) >= 1.0)\n    {\n        float tCap = (sign(z2) - o.z) / d.z;\n        t2 = abs(b + a * tCap) < det ? tCap : NO_HIT;\n    }\n\n    return vec2(t1, t2);\n}\n\nvec2 intersectUnitCircle(Ray ray) {\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float t = -o.z / d.z;\n    vec2 zPlanePos = o.xy + d.xy * t;\n    float distSqr = dot(zPlanePos, zPlanePos);\n\n    if (distSqr > 1.0) {\n        return vec2(NO_HIT);\n    }\n\n    return vec2(t, t);\n}\n\nvec2 intersectInfiniteUnitCylinder(Ray ray)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float a = dot(d.xy, d.xy);\n    float b = dot(o.xy, d.xy);\n    float c = dot(o.xy, o.xy) - 1.0;\n    float det = b * b - a * c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float t1 = (-b - det) / a;\n    float t2 = (-b + det) / a;\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n\n    return vec2(tmin, tmax);\n}\n\nvoid intersectShape(Ray ray, inout Intersections ix)\n{\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX) || defined(CYLINDER_HAS_RENDER_BOUNDS_HEIGHT)\n        ray.pos = ray.pos * u_cylinderUvToRenderBoundsScale + u_cylinderUvToRenderBoundsTranslate;\n        ray.dir *= u_cylinderUvToRenderBoundsScale;\n    #else\n        // Position is converted from [0,1] to [-1,+1] because shape intersections assume unit space is [-1,+1].\n        // Direction is scaled as well to be in sync with position.\n        ray.pos = ray.pos * 2.0 - 1.0;\n        ray.dir *= 2.0;\n    #endif\n\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_HEIGHT_FLAT)\n        vec2 outerIntersect = intersectUnitCircle(ray);\n    #else\n        vec2 outerIntersect = intersectUnitCylinder(ray);\n    #endif\n\n    setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_RADIUS_MAX, outerIntersect);\n\n    if (outerIntersect.x == NO_HIT) {\n        return;\n    }\n\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT)\n        // When the cylinder is perfectly thin it's necessary to sandwich the\n        // inner cylinder intersection inside the outer cylinder intersection.\n\n        // Without this special case,\n        // [outerMin, outerMax, innerMin, innerMax] will bubble sort to\n        // [outerMin, innerMin, outerMax, innerMax] which will cause the back\n        // side of the cylinder to be invisible because it will think the ray\n        // is still inside the inner (negative) cylinder after exiting the\n        // outer (positive) cylinder.\n\n        // With this special case,\n        // [outerMin, innerMin, innerMax, outerMax] will bubble sort to\n        // [outerMin, innerMin, innerMax, outerMax] which will work correctly.\n\n        // Note: If initializeIntersections() changes its sorting function\n        // from bubble sort to something else, this code may need to change.\n        vec2 innerIntersect = intersectInfiniteUnitCylinder(ray);\n        setIntersection(ix, 0, outerIntersect.x, true, true);   // positive, enter\n        setIntersection(ix, 1, innerIntersect.x, false, true);  // negative, enter\n        setIntersection(ix, 2, innerIntersect.y, false, false); // negative, exit\n        setIntersection(ix, 3, outerIntersect.y, true, false);  // positive, exit\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN)\n        Ray innerRay = Ray(ray.pos * u_cylinderUvToRenderRadiusMin, ray.dir * u_cylinderUvToRenderRadiusMin);\n        vec2 innerIntersect = intersectInfiniteUnitCylinder(innerRay);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_RADIUS_MIN, innerIntersect);\n    #endif\n\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF)\n        vec2 wedgeIntersect = intersectRegularWedge(ray, u_cylinderRenderAngleMinMax.x, u_cylinderRenderAngleMinMax.y);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE, wedgeIntersect);\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF)\n        vec4 wedgeIntersect = intersectFlippedWedge(ray, u_cylinderRenderAngleMinMax.x, u_cylinderRenderAngleMinMax.y);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 0, wedgeIntersect.xy);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 1, wedgeIntersect.zw);\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_HALF)\n        vec2 wedgeIntersect = intersectHalfSpace(ray, u_cylinderRenderAngleMinMax.x);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE, wedgeIntersect);\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO)\n        vec4 wedgeIntersect = intersectHalfPlane(ray, u_cylinderRenderAngleMinMax.x);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 0, wedgeIntersect.xy);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 1, wedgeIntersect.zw);\n    #endif\n}\n"},49964:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, Intersections,\n// setIntersectionPair, INF_HIT, NO_HIT\n\n/* intersectDepth defines (set in Scene/VoxelRenderResources.js)\n#define DEPTH_INTERSECTION_INDEX ###\n*/\n\nuniform mat4 u_transformPositionViewToUv;\n\nvoid intersectDepth(in vec2 screenCoord, in Ray ray, inout Intersections ix) {\n    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, screenCoord));\n    if (logDepthOrDepth != 0.0) {\n        // Calculate how far the ray must travel before it hits the depth buffer.\n        vec4 eyeCoordinateDepth = czm_screenToEyeCoordinates(screenCoord, logDepthOrDepth);\n        eyeCoordinateDepth /= eyeCoordinateDepth.w;\n        vec3 depthPositionUv = vec3(u_transformPositionViewToUv * eyeCoordinateDepth);\n        float t = dot(depthPositionUv - ray.pos, ray.dir);\n        setIntersectionPair(ix, DEPTH_INTERSECTION_INDEX, vec2(t, +INF_HIT));\n    } else {\n        // There's no depth at this location.\n        setIntersectionPair(ix, DEPTH_INTERSECTION_INDEX, vec2(NO_HIT));\n    }\n}\n"},200356:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, Intersections,\n// setIntersection, setIntersectionPair, INF_HIT, NO_HIT\n\n/* Ellipsoid defines (set in Scene/VoxelEllipsoidShape.js)\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX\n#define ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN\n#define ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_FLAT\n#define ELLIPSOID_INTERSECTION_INDEX_LONGITUDE\n#define ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX\n#define ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN\n#define ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX\n#define ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN\n*/\n\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE)\n    uniform vec2 u_ellipsoidRenderLongitudeMinMax;\n#endif\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF)\n    uniform vec2 u_ellipsoidRenderLatitudeCosSqrHalfMinMax;\n#endif\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX)\n    uniform float u_ellipsoidInverseOuterScaleUv;\n#endif\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN)\n    uniform float u_ellipsoidInverseInnerScaleUv;\n#endif\n\nvec2 intersectZPlane(Ray ray)\n{\n    float o = ray.pos.z;\n    float d = ray.dir.z;\n    float t = -o / d;\n    float s = sign(o);\n\n    if (t >= 0.0 != s >= 0.0) return vec2(t, +INF_HIT);\n    else return vec2(-INF_HIT, t);\n}\n\nvec4 intersectHalfPlane(Ray ray, float angle) {\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 planeDirection = vec2(cos(angle), sin(angle));\n    vec2 planeNormal = vec2(planeDirection.y, -planeDirection.x);\n\n    float a = dot(o, planeNormal);\n    float b = dot(d, planeNormal);\n    float t = -a / b;\n\n    vec2 p = o + t * d;\n    bool outside = dot(p, planeDirection) < 0.0;\n    if (outside) return vec4(-INF_HIT, +INF_HIT, NO_HIT, NO_HIT);\n\n    return vec4(-INF_HIT, t, t, +INF_HIT);\n}\n\nvec2 intersectHalfSpace(Ray ray, float angle)\n{\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 n = vec2(sin(angle), -cos(angle));\n\n    float a = dot(o, n);\n    float b = dot(d, n);\n    float t = -a / b;\n    float s = sign(a);\n\n    if (t >= 0.0 != s >= 0.0) return vec2(t, +INF_HIT);\n    else return vec2(-INF_HIT, t);\n}\n\nvec2 intersectRegularWedge(Ray ray, float minAngle, float maxAngle)\n{\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 n1 = vec2(sin(minAngle), -cos(minAngle));\n    vec2 n2 = vec2(-sin(maxAngle), cos(maxAngle));\n\n    float a1 = dot(o, n1);\n    float a2 = dot(o, n2);\n    float b1 = dot(d, n1);\n    float b2 = dot(d, n2);\n\n    float t1 = -a1 / b1;\n    float t2 = -a2 / b2;\n    float s1 = sign(a1);\n    float s2 = sign(a2);\n\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n    float smin = tmin == t1 ? s1 : s2;\n    float smax = tmin == t1 ? s2 : s1;\n\n    bool e = tmin >= 0.0;\n    bool f = tmax >= 0.0;\n    bool g = smin >= 0.0;\n    bool h = smax >= 0.0;\n\n    if (e != g && f == h) return vec2(tmin, tmax);\n    else if (e == g && f == h) return vec2(-INF_HIT, tmin);\n    else if (e != g && f != h) return vec2(tmax, +INF_HIT);\n    else return vec2(NO_HIT);\n}\n\nvec4 intersectFlippedWedge(Ray ray, float minAngle, float maxAngle)\n{\n    vec2 planeIntersectMin = intersectHalfSpace(ray, minAngle);\n    vec2 planeIntersectMax = intersectHalfSpace(ray, maxAngle + czm_pi);\n    return vec4(planeIntersectMin, planeIntersectMax);\n}\n\nvec2 intersectUnitSphere(Ray ray)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float b = dot(d, o);\n    float c = dot(o, o) - 1.0;\n    float det = b * b - c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float t1 = -b - det;\n    float t2 = -b + det;\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n\n    return vec2(tmin, tmax);\n}\n\nvec2 intersectUnitSphereUnnormalizedDirection(Ray ray)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float a = dot(d, d);\n    float b = dot(d, o);\n    float c = dot(o, o) - 1.0;\n    float det = b * b - a * c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float t1 = (-b - det) / a;\n    float t2 = (-b + det) / a;\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n\n    return vec2(tmin, tmax);\n}\n\nvec2 intersectDoubleEndedCone(Ray ray, float cosSqrHalfAngle)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n    float a = d.z * d.z - dot(d, d) * cosSqrHalfAngle;\n    float b = d.z * o.z - dot(o, d) * cosSqrHalfAngle;\n    float c = o.z * o.z - dot(o, o) * cosSqrHalfAngle;\n    float det = b * b - a * c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float t1 = (-b - det) / a;\n    float t2 = (-b + det) / a;\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n    return vec2(tmin, tmax);\n}\n\nvec4 intersectFlippedCone(Ray ray, float cosSqrHalfAngle) {\n    vec2 intersect = intersectDoubleEndedCone(ray, cosSqrHalfAngle);\n\n    if (intersect.x == NO_HIT) {\n        return vec4(-INF_HIT, +INF_HIT, NO_HIT, NO_HIT);\n    }\n\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n    float tmin = intersect.x;\n    float tmax = intersect.y;\n    float zmin = o.z + tmin * d.z;\n    float zmax = o.z + tmax * d.z;\n\n    // One interval\n    if (zmin < 0.0 && zmax < 0.0) return vec4(-INF_HIT, +INF_HIT, NO_HIT, NO_HIT);\n    else if (zmin < 0.0) return vec4(-INF_HIT, tmax, NO_HIT, NO_HIT);\n    else if (zmax < 0.0) return vec4(tmin, +INF_HIT, NO_HIT, NO_HIT);\n    // Two intervals\n    else return vec4(-INF_HIT, tmin, tmax, +INF_HIT);\n}\n\nvec2 intersectRegularCone(Ray ray, float cosSqrHalfAngle) {\n    vec2 intersect = intersectDoubleEndedCone(ray, cosSqrHalfAngle);\n\n    if (intersect.x == NO_HIT) {\n        return vec2(NO_HIT);\n    }\n\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n    float tmin = intersect.x;\n    float tmax = intersect.y;\n    float zmin = o.z + tmin * d.z;\n    float zmax = o.z + tmax * d.z;\n\n    if (zmin < 0.0 && zmax < 0.0) return vec2(NO_HIT);\n    else if (zmin < 0.0) return vec2(tmax, +INF_HIT);\n    else if (zmax < 0.0) return vec2(-INF_HIT, tmin);\n    else return vec2(tmin, tmax);\n}\n\nvoid intersectShape(in Ray ray, inout Intersections ix) {\n    // Position is converted from [0,1] to [-1,+1] because shape intersections assume unit space is [-1,+1].\n    // Direction is scaled as well to be in sync with position.\n    ray.pos = ray.pos * 2.0 - 1.0;\n    ray.dir *= 2.0;\n\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX)\n        Ray outerRay = Ray(ray.pos * u_ellipsoidInverseOuterScaleUv, ray.dir * u_ellipsoidInverseOuterScaleUv);\n    #else\n        Ray outerRay = ray;\n    #endif\n\n    // Outer ellipsoid\n    vec2 outerIntersect = intersectUnitSphereUnnormalizedDirection(outerRay);\n    setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX, outerIntersect);\n\n    // Exit early if the outer ellipsoid was missed.\n    if (outerIntersect.x == NO_HIT) {\n        return;\n    }\n\n    // Inner ellipsoid\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_FLAT)\n        // When the ellipsoid is perfectly thin it's necessary to sandwich the\n        // inner ellipsoid intersection inside the outer ellipsoid intersection.\n\n        // Without this special case,\n        // [outerMin, outerMax, innerMin, innerMax] will bubble sort to\n        // [outerMin, innerMin, outerMax, innerMax] which will cause the back\n        // side of the ellipsoid to be invisible because it will think the ray\n        // is still inside the inner (negative) ellipsoid after exiting the\n        // outer (positive) ellipsoid.\n\n        // With this special case,\n        // [outerMin, innerMin, innerMax, outerMax] will bubble sort to\n        // [outerMin, innerMin, innerMax, outerMax] which will work correctly.\n\n        // Note: If initializeIntersections() changes its sorting function\n        // from bubble sort to something else, this code may need to change.\n        setIntersection(ix, 0, outerIntersect.x, true, true);   // positive, enter\n        setIntersection(ix, 1, outerIntersect.x, false, true);  // negative, enter\n        setIntersection(ix, 2, outerIntersect.y, false, false); // negative, exit\n        setIntersection(ix, 3, outerIntersect.y, true, false);  // positive, exit\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN)\n        Ray innerRay = Ray(ray.pos * u_ellipsoidInverseInnerScaleUv, ray.dir * u_ellipsoidInverseInnerScaleUv);\n        vec2 innerIntersect = intersectUnitSphereUnnormalizedDirection(innerRay);\n\n        if (innerIntersect == vec2(NO_HIT)) {\n            setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN, innerIntersect);\n        } else {\n            // When the ellipsoid is very large and thin it's possible for floating\n            // point math to cause the ray to intersect the inner ellipsoid before\n            // the outer ellipsoid. To prevent this from happening, clamp innerIntersect\n            // to outerIntersect and sandwhich the intersections like described above.\n            //\n            // In theory a similar fix is needed for cylinders, however it's more\n            // complicated to implement because the inner shape is allowed to be\n            // intersected first.\n            innerIntersect.x = max(innerIntersect.x, outerIntersect.x);\n            innerIntersect.y = min(innerIntersect.y, outerIntersect.y);\n            setIntersection(ix, 0, outerIntersect.x, true, true);   // positive, enter\n            setIntersection(ix, 1, innerIntersect.x, false, true);  // negative, enter\n            setIntersection(ix, 2, innerIntersect.y, false, false); // negative, exit\n            setIntersection(ix, 3, outerIntersect.y, true, false);  // positive, exit\n        }\n    #endif\n\n    // Flip the ray because the intersection function expects a cone growing towards +Z.\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF)\n        Ray flippedRay = outerRay;\n        flippedRay.dir.z *= -1.0;\n        flippedRay.pos.z *= -1.0;\n    #endif\n\n    // Bottom cone\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF)\n        vec2 bottomConeIntersection = intersectRegularCone(flippedRay, u_ellipsoidRenderLatitudeCosSqrHalfMinMax.x);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN, bottomConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF)\n        vec2 bottomConeIntersection = intersectZPlane(flippedRay);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN, bottomConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF)\n        vec4 bottomConeIntersection = intersectFlippedCone(ray, u_ellipsoidRenderLatitudeCosSqrHalfMinMax.x);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN + 0, bottomConeIntersection.xy);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN + 1, bottomConeIntersection.zw);\n    #endif\n\n    // Top cone\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF)\n        vec4 topConeIntersection = intersectFlippedCone(flippedRay, u_ellipsoidRenderLatitudeCosSqrHalfMinMax.y);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX + 0, topConeIntersection.xy);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX + 1, topConeIntersection.zw);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF)\n        vec2 topConeIntersection = intersectZPlane(ray);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX, topConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF)\n        vec2 topConeIntersection = intersectRegularCone(ray, u_ellipsoidRenderLatitudeCosSqrHalfMinMax.y);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX, topConeIntersection);\n    #endif\n\n    // Wedge\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO)\n        vec4 wedgeIntersect = intersectHalfPlane(ray, u_ellipsoidRenderLongitudeMinMax.x);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 0, wedgeIntersect.xy);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 1, wedgeIntersect.zw);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF)\n        vec2 wedgeIntersect = intersectRegularWedge(ray, u_ellipsoidRenderLongitudeMinMax.x, u_ellipsoidRenderLongitudeMinMax.y);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE, wedgeIntersect);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_HALF)\n        vec2 wedgeIntersect = intersectHalfSpace(ray, u_ellipsoidRenderLongitudeMinMax.x);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE, wedgeIntersect);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF)\n        vec4 wedgeIntersect = intersectFlippedWedge(ray, u_ellipsoidRenderLongitudeMinMax.x, u_ellipsoidRenderLongitudeMinMax.y);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 0, wedgeIntersect.xy);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 1, wedgeIntersect.zw);\n    #endif\n}\n"},279081:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// Main intersection function for Voxel scenes.\n// See IntersectBox.glsl, IntersectCylinder.glsl, or IntersectEllipsoid.glsl\n// for the definition of intersectShape. The appropriate function is selected\n// based on the VoxelPrimitive shape type, and added to the shader in\n// Scene/VoxelRenderResources.js.\n// See also IntersectClippingPlane.glsl and IntersectDepth.glsl.\n// See IntersectionUtils.glsl for the definitions of Ray, NO_HIT,\n// getFirstIntersection, initializeIntersections, nextIntersection.\n\n/* Intersection defines (set in Scene/VoxelRenderResources.js)\n#define INTERSECTION_COUNT ###\n*/\n\nRayShapeIntersection intersectScene(in vec2 screenCoord, in Ray ray, out Intersections ix) {\n    // Do a ray-shape intersection to find the exact starting and ending points.\n    intersectShape(ray, ix);\n\n    // Exit early if the positive shape was completely missed or behind the ray.\n    RayShapeIntersection intersection = getFirstIntersection(ix);\n    if (intersection.entry.w == NO_HIT) {\n        // Positive shape was completely missed - so exit early.\n        return intersection;\n    }\n\n    // Clipping planes\n    #if defined(CLIPPING_PLANES)\n        intersectClippingPlanes(ray, ix);\n    #endif\n\n    // Depth\n    #if defined(DEPTH_TEST)\n        intersectDepth(screenCoord, ray, ix);\n    #endif\n\n    // Find the first intersection that's in front of the ray\n    #if (INTERSECTION_COUNT > 1)\n        initializeIntersections(ix);\n        for (int i = 0; i < INTERSECTION_COUNT; ++i) {\n            intersection = nextIntersection(ix);\n            if (intersection.exit.w > 0.0) {\n                // Set start to 0.0 when ray is inside the shape.\n                intersection.entry.w = max(intersection.entry.w, 0.0);\n                break;\n            }\n        }\n    #else\n        // Set start to 0.0 when ray is inside the shape.\n        intersection.entry.w = max(intersection.entry.w, 0.0);\n    #endif\n\n    return intersection;\n}\n"},363813:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="/* Intersection defines\n#define INTERSECTION_COUNT ###\n*/\n\n#define NO_HIT (-czm_infinity)\n#define INF_HIT (czm_infinity * 0.5)\n#define RAY_SHIFT (0.000003163)\n#define RAY_SCALE (1.003163)\n\nstruct Ray {\n    vec3 pos;\n    vec3 dir;\n#if defined(SHAPE_BOX)\n    vec3 dInv;\n#endif\n};\n\nstruct RayShapeIntersection {\n    vec4 entry;\n    vec4 exit;\n};\n\nstruct Intersections {\n    // Don't access these member variables directly - call the functions instead.\n\n    // Store an array of ray-surface intersections. Each intersection is composed of:\n    //  .xyz for the surface normal at the intersection point\n    //  .w for the T value\n    // The scale of the normal encodes the shape intersection type:\n    //  length(intersection.xyz) = 1: positive shape entry\n    //  length(intersection.xyz) = 2: positive shape exit\n    //  length(intersection.xyz) = 3: negative shape entry\n    //  length(intersection.xyz) = 4: negative shape exit\n    // INTERSECTION_COUNT is the number of ray-*shape* (volume) intersections,\n    // so we need twice as many to track ray-*surface* intersections\n    vec4 intersections[INTERSECTION_COUNT * 2];\n\n    #if (INTERSECTION_COUNT > 1)\n        // Maintain state for future nextIntersection calls\n        int index;\n        int surroundCount;\n        bool surroundIsPositive;\n    #endif\n};\n\nRayShapeIntersection getFirstIntersection(in Intersections ix) \n{\n    return RayShapeIntersection(ix.intersections[0], ix.intersections[1]);\n}\n\nvec4 encodeIntersectionType(vec4 intersection, int index, bool entry)\n{\n    float scale = float(index > 0) * 2.0 + float(!entry) + 1.0;\n    return vec4(intersection.xyz * scale, intersection.w);\n}\n\n// Use defines instead of real functions because WebGL1 cannot access array with non-constant index.\n#define setIntersection(/*inout Intersections*/ ix, /*int*/ index, /*float*/ t, /*bool*/ positive, /*bool*/ enter) (ix).intersections[(index)] = vec4(0.0, float(!positive) * 2.0 + float(!enter) + 1.0, 0.0, (t))\n#define setIntersectionPair(/*inout Intersections*/ ix, /*int*/ index, /*vec2*/ entryExit) (ix).intersections[(index) * 2 + 0] = vec4(0.0, float((index) > 0) * 2.0 + 1.0, 0.0, (entryExit).x); (ix).intersections[(index) * 2 + 1] = vec4(0.0, float((index) > 0) * 2.0 + 2.0, 0.0, (entryExit).y)\n#define setSurfaceIntersection(/*inout Intersections*/ ix, /*int*/ index, /*vec4*/ intersection) (ix).intersections[(index)] = intersection;\n#define setShapeIntersection(/*inout Intersections*/ ix, /*int*/ index, /*RayShapeIntersection*/ intersection) (ix).intersections[(index) * 2 + 0] = encodeIntersectionType((intersection).entry, (index), true); (ix).intersections[(index) * 2 + 1] = encodeIntersectionType((intersection).exit, (index), false)\n\n#if (INTERSECTION_COUNT > 1)\nvoid initializeIntersections(inout Intersections ix) {\n    // Sort the intersections from min T to max T with bubble sort.\n    // Note: If this sorting function changes, some of the intersection test may\n    // need to be updated. Search for \"bubble sort\" to find those areas.\n    const int sortPasses = INTERSECTION_COUNT * 2 - 1;\n    for (int n = sortPasses; n > 0; --n) {\n        for (int i = 0; i < sortPasses; ++i) {\n            // The loop should be: for (i = 0; i < n; ++i) {...} but WebGL1 cannot\n            // loop with non-constant condition, so it has to break early instead\n            if (i >= n) { break; }\n\n            vec4 intersect0 = ix.intersections[i + 0];\n            vec4 intersect1 = ix.intersections[i + 1];\n\n            bool inOrder = intersect0.w <= intersect1.w;\n\n            ix.intersections[i + 0] = inOrder ? intersect0 : intersect1;\n            ix.intersections[i + 1] = inOrder ? intersect1 : intersect0;\n        }\n    }\n\n    // Prepare initial state for nextIntersection\n    ix.index = 0;\n    ix.surroundCount = 0;\n    ix.surroundIsPositive = false;\n}\n#endif\n\n#if (INTERSECTION_COUNT > 1)\nRayShapeIntersection nextIntersection(inout Intersections ix) {\n    vec4 surfaceIntersection = vec4(0.0, 0.0, 0.0, NO_HIT);\n    RayShapeIntersection shapeIntersection = RayShapeIntersection(surfaceIntersection, surfaceIntersection);\n\n    const int passCount = INTERSECTION_COUNT * 2;\n\n    if (ix.index == passCount) {\n        return shapeIntersection;\n    }\n\n    for (int i = 0; i < passCount; ++i) {\n        // The loop should be: for (i = ix.index; i < passCount; ++i) {...} but WebGL1 cannot\n        // loop with non-constant condition, so it has to continue instead.\n        if (i < ix.index) {\n            continue;\n        }\n\n        ix.index = i + 1;\n\n        surfaceIntersection = ix.intersections[i];\n        int intersectionType = int(length(surfaceIntersection.xyz) - 0.5);\n        bool currShapeIsPositive = intersectionType < 2;\n        bool enter = intMod(intersectionType, 2) == 0;\n\n        ix.surroundCount += enter ? +1 : -1;\n        ix.surroundIsPositive = currShapeIsPositive ? enter : ix.surroundIsPositive;\n\n        // entering positive or exiting negative\n        if (ix.surroundCount == 1 && ix.surroundIsPositive && enter == currShapeIsPositive) {\n            shapeIntersection.entry = surfaceIntersection;\n        }\n\n        // exiting positive or entering negative after being inside positive\n        bool exitPositive = !enter && currShapeIsPositive && ix.surroundCount == 0;\n        bool enterNegativeFromPositive = enter && !currShapeIsPositive && ix.surroundCount == 2 && ix.surroundIsPositive;\n        if (exitPositive || enterNegativeFromPositive) {\n            shapeIntersection.exit = surfaceIntersection;\n\n            // entry and exit have been found, so the loop can stop\n            if (exitPositive) {\n                // After exiting positive shape there is nothing left to intersect, so jump to the end index.\n                ix.index = passCount;\n            }\n            break;\n        }\n    }\n\n    return shapeIntersection;\n}\n#endif\n\n// NOTE: initializeIntersections, nextIntersection aren't even declared unless INTERSECTION_COUNT > 1\n"},271653:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// See Octree.glsl for the definitions of SampleData and intMod\n\n/* Megatexture defines (set in Scene/VoxelRenderResources.js)\n#define SAMPLE_COUNT ###\n#define NEAREST_SAMPLING\n#define PADDING\n*/\n\nuniform ivec2 u_megatextureSliceDimensions; // number of slices per tile, in two dimensions\nuniform ivec2 u_megatextureTileDimensions; // number of tiles per megatexture, in two dimensions\nuniform vec2 u_megatextureVoxelSizeUv;\nuniform vec2 u_megatextureSliceSizeUv;\nuniform vec2 u_megatextureTileSizeUv;\n\nuniform ivec3 u_dimensions; // does not include padding\n#if defined(PADDING)\n    uniform ivec3 u_paddingBefore;\n    uniform ivec3 u_paddingAfter;\n#endif\n\n// Integer min, max, clamp: For WebGL1 only\nint intMin(int a, int b) {\n    return a <= b ? a : b;\n}\nint intMax(int a, int b) {\n    return a >= b ? a : b;\n}\nint intClamp(int v, int minVal, int maxVal) {\n    return intMin(intMax(v, minVal), maxVal);\n}\n\nvec2 index1DTo2DTexcoord(int index, ivec2 dimensions, vec2 uvScale)\n{\n    int indexX = intMod(index, dimensions.x);\n    int indexY = index / dimensions.x;\n    return vec2(indexX, indexY) * uvScale;\n}\n\n/*\n    How is 3D data stored in a 2D megatexture?\n\n    In this example there is only one loaded tile and it has 2x2x2 voxels (8 voxels total).\n    The data is sliced by Z. The data at Z = 0 is placed in texels (0,0), (0,1), (1,0), (1,1) and\n    the data at Z = 1 is placed in texels (2,0), (2,1), (3,0), (3,1).\n    Note that there could be empty space in the megatexture because it's a power of two.\n\n      0   1   2   3\n    +---+---+---+---+\n    |   |   |   |   | 3\n    +---+---+---+---+\n    |   |   |   |   | 2\n    +-------+-------+\n    |010|110|011|111| 1\n    |--- ---|--- ---|\n    |000|100|001|101| 0\n    +-------+-------+\n\n    When doing linear interpolation the megatexture needs to be sampled twice: once for\n    the Z slice above the voxel coordinate and once for the slice below. The two slices\n    are interpolated with fract(coord.z - 0.5). For example, a Z coordinate of 1.0 is\n    halfway between two Z slices so the interpolation factor is 0.5. Below is a side view\n    of the 3D voxel grid with voxel coordinates on the left side.\n\n    2 +---+\n      |001|\n    1 +-z-+\n      |000|\n    0 +---+\n\n    When doing nearest neighbor the megatexture only needs to be sampled once at the closest Z slice.\n*/\n\nProperties getPropertiesFromMegatexture(in SampleData sampleData) {\n    vec3 tileUv = clamp(sampleData.tileUv, vec3(0.0), vec3(1.0)); // TODO is the clamp necessary?\n    int tileIndex = sampleData.megatextureIndex;\n    vec3 voxelCoord = tileUv * vec3(u_dimensions);\n    ivec3 voxelDimensions = u_dimensions;\n\n    #if defined(PADDING)\n        voxelDimensions += u_paddingBefore + u_paddingAfter;\n        voxelCoord += vec3(u_paddingBefore);\n    #endif\n\n    #if defined(NEAREST_SAMPLING)\n        // Round to the center of the nearest voxel\n        voxelCoord = floor(voxelCoord) + vec3(0.5);\n    #endif\n\n    // Tile location\n    vec2 tileUvOffset = index1DTo2DTexcoord(tileIndex, u_megatextureTileDimensions, u_megatextureTileSizeUv);\n\n    // Slice location\n    float slice = voxelCoord.z - 0.5;\n    int sliceIndex = int(floor(slice));\n    int sliceIndex0 = intClamp(sliceIndex, 0, voxelDimensions.z - 1);\n    vec2 sliceUvOffset0 = index1DTo2DTexcoord(sliceIndex0, u_megatextureSliceDimensions, u_megatextureSliceSizeUv);\n\n    // Voxel location\n    vec2 voxelUvOffset = clamp(voxelCoord.xy, vec2(0.5), vec2(voxelDimensions.xy) - vec2(0.5)) * u_megatextureVoxelSizeUv;\n\n    // Final location in the megatexture\n    vec2 uv0 = tileUvOffset + sliceUvOffset0 + voxelUvOffset;\n\n    #if defined(NEAREST_SAMPLING)\n        return getPropertiesFromMegatextureAtUv(uv0);\n    #else\n        float sliceLerp = fract(slice);\n        int sliceIndex1 = intMin(sliceIndex + 1, voxelDimensions.z - 1);\n        vec2 sliceUvOffset1 = index1DTo2DTexcoord(sliceIndex1, u_megatextureSliceDimensions, u_megatextureSliceSizeUv);\n        vec2 uv1 = tileUvOffset + sliceUvOffset1 + voxelUvOffset;\n        Properties properties0 = getPropertiesFromMegatextureAtUv(uv0);\n        Properties properties1 = getPropertiesFromMegatextureAtUv(uv1);\n        return mixProperties(properties0, properties1, sliceLerp);\n    #endif\n}\n\n// Convert an array of sample datas to a final weighted properties.\nProperties accumulatePropertiesFromMegatexture(in SampleData sampleDatas[SAMPLE_COUNT]) {\n    #if (SAMPLE_COUNT == 1)\n        return getPropertiesFromMegatexture(sampleDatas[0]);\n    #else\n        // When more than one sample is taken the accumulator needs to start at 0\n        Properties properties = clearProperties();\n        for (int i = 0; i < SAMPLE_COUNT; ++i) {\n            float weight = sampleDatas[i].weight;\n\n            // Avoid reading the megatexture when the weight is 0 as it can be costly.\n            if (weight > 0.0) {\n                Properties tempProperties = getPropertiesFromMegatexture(sampleDatas[i]);\n                tempProperties = scaleProperties(tempProperties, weight);\n                properties = sumProperties(properties, tempProperties);\n            }\n        }\n        return properties;\n    #endif\n}\n"},126563:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// These octree flags must be in sync with GpuOctreeFlag in VoxelTraversal.js\n#define OCTREE_FLAG_INTERNAL 0\n#define OCTREE_FLAG_LEAF 1\n#define OCTREE_FLAG_PACKED_LEAF_FROM_PARENT 2\n\n#define OCTREE_MAX_LEVELS 32 // Harcoded value because GLSL doesn't like variable length loops\n\nuniform sampler2D u_octreeInternalNodeTexture;\nuniform vec2 u_octreeInternalNodeTexelSizeUv;\nuniform int u_octreeInternalNodeTilesPerRow;\n#if (SAMPLE_COUNT > 1)\nuniform sampler2D u_octreeLeafNodeTexture;\nuniform vec2 u_octreeLeafNodeTexelSizeUv;\nuniform int u_octreeLeafNodeTilesPerRow;\n#endif\n\nstruct OctreeNodeData {\n    int data;\n    int flag;\n};\n\nstruct TraversalData {\n    ivec4 octreeCoords;\n    int parentOctreeIndex;\n};\n\nstruct SampleData {\n    int megatextureIndex;\n    ivec4 tileCoords;\n    vec3 tileUv;\n    #if (SAMPLE_COUNT > 1)\n        float weight;\n    #endif\n};\n\n// Integer mod: For WebGL1 only\nint intMod(in int a, in int b) {\n    return a - (b * (a / b));\n}\nint normU8_toInt(in float value) {\n    return int(value * 255.0);\n}\nint normU8x2_toInt(in vec2 value) {\n    return int(value.x * 255.0) + 256 * int(value.y * 255.0);\n}\nfloat normU8x2_toFloat(in vec2 value) {\n    return float(normU8x2_toInt(value)) / 65535.0;\n}\n\nOctreeNodeData getOctreeNodeData(in vec2 octreeUv) {\n    vec4 texData = texture(u_octreeInternalNodeTexture, octreeUv);\n\n    OctreeNodeData data;\n    data.data = normU8x2_toInt(texData.xy);\n    data.flag = normU8x2_toInt(texData.zw);\n    return data;\n}\n\nOctreeNodeData getOctreeChildData(in int parentOctreeIndex, in ivec3 childCoord) {\n    int childIndex = childCoord.z * 4 + childCoord.y * 2 + childCoord.x;\n    int octreeCoordX = intMod(parentOctreeIndex, u_octreeInternalNodeTilesPerRow) * 9 + 1 + childIndex;\n    int octreeCoordY = parentOctreeIndex / u_octreeInternalNodeTilesPerRow;\n    vec2 octreeUv = u_octreeInternalNodeTexelSizeUv * vec2(float(octreeCoordX) + 0.5, float(octreeCoordY) + 0.5);\n    return getOctreeNodeData(octreeUv);\n}\n\nint getOctreeParentIndex(in int octreeIndex) {\n    int octreeCoordX = intMod(octreeIndex, u_octreeInternalNodeTilesPerRow) * 9;\n    int octreeCoordY = octreeIndex / u_octreeInternalNodeTilesPerRow;\n    vec2 octreeUv = u_octreeInternalNodeTexelSizeUv * vec2(float(octreeCoordX) + 0.5, float(octreeCoordY) + 0.5);\n    vec4 parentData = texture(u_octreeInternalNodeTexture, octreeUv);\n    int parentOctreeIndex = normU8x2_toInt(parentData.xy);\n    return parentOctreeIndex;\n}\n\n/**\n* Convert a position in the uv-space of the tileset bounding shape\n* into the uv-space of a tile within the tileset\n*/\nvec3 getTileUv(in vec3 shapePosition, in ivec4 octreeCoords) {\n\t// PERFORMANCE_IDEA: use bit-shifting (only in WebGL2)\n    float dimAtLevel = pow(2.0, float(octreeCoords.w));\n    return shapePosition * dimAtLevel - vec3(octreeCoords.xyz);\n}\n\nvoid getOctreeLeafSampleData(in OctreeNodeData data, in ivec4 octreeCoords, out SampleData sampleData) {\n    sampleData.megatextureIndex = data.data;\n    sampleData.tileCoords = (data.flag == OCTREE_FLAG_PACKED_LEAF_FROM_PARENT)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n}\n\n#if (SAMPLE_COUNT > 1)\nvoid getOctreeLeafSampleDatas(in OctreeNodeData data, in ivec4 octreeCoords, out SampleData sampleDatas[SAMPLE_COUNT]) {\n    int leafIndex = data.data;\n    int leafNodeTexelCount = 2;\n    // Adding 0.5 moves to the center of the texel\n    float leafCoordXStart = float(intMod(leafIndex, u_octreeLeafNodeTilesPerRow) * leafNodeTexelCount) + 0.5;\n    float leafCoordY = float(leafIndex / u_octreeLeafNodeTilesPerRow) + 0.5;\n\n    // Get an interpolation weight and a flag to determine whether to read the parent texture\n    vec2 leafUv0 = u_octreeLeafNodeTexelSizeUv * vec2(leafCoordXStart + 0.0, leafCoordY);\n    vec4 leafData0 = texture(u_octreeLeafNodeTexture, leafUv0);\n    float lerp = normU8x2_toFloat(leafData0.xy);\n    sampleDatas[0].weight = 1.0 - lerp;\n    sampleDatas[1].weight = lerp;\n    // TODO: this looks wrong? Should be comparing to OCTREE_FLAG_PACKED_LEAF_FROM_PARENT\n    sampleDatas[0].tileCoords = (normU8_toInt(leafData0.z) == 1)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n    sampleDatas[1].tileCoords = (normU8_toInt(leafData0.w) == 1)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n\n    // Get megatexture indices for both samples\n    vec2 leafUv1 = u_octreeLeafNodeTexelSizeUv * vec2(leafCoordXStart + 1.0, leafCoordY);\n    vec4 leafData1 = texture(u_octreeLeafNodeTexture, leafUv1);\n    sampleDatas[0].megatextureIndex = normU8x2_toInt(leafData1.xy);\n    sampleDatas[1].megatextureIndex = normU8x2_toInt(leafData1.zw);\n}\n#endif\n\nOctreeNodeData traverseOctreeDownwards(in vec3 shapePosition, inout TraversalData traversalData) {\n    float sizeAtLevel = 1.0 / pow(2.0, float(traversalData.octreeCoords.w));\n    vec3 start = vec3(traversalData.octreeCoords.xyz) * sizeAtLevel;\n    vec3 end = start + vec3(sizeAtLevel);\n    OctreeNodeData childData;\n\n    for (int i = 0; i < OCTREE_MAX_LEVELS; ++i) {\n        // Find out which octree child contains the position\n        // 0 if before center, 1 if after\n        vec3 center = 0.5 * (start + end);\n        vec3 childCoord = step(center, shapePosition);\n\n        // Get octree coords for the next level down\n        ivec4 octreeCoords = traversalData.octreeCoords;\n        traversalData.octreeCoords = ivec4(octreeCoords.xyz * 2 + ivec3(childCoord), octreeCoords.w + 1);\n\n        childData = getOctreeChildData(traversalData.parentOctreeIndex, ivec3(childCoord));\n\n        if (childData.flag != OCTREE_FLAG_INTERNAL) {\n            // leaf tile - stop traversing\n            break;\n        }\n\n        // interior tile - keep going deeper\n        start = mix(start, center, childCoord);\n        end = mix(center, end, childCoord);\n        traversalData.parentOctreeIndex = childData.data;\n    }\n\n    return childData;\n}\n\n/**\n* Transform a given position to an octree tile coordinate and a position within that tile,\n* and find the corresponding megatexture index and texture coordinates\n*/\nvoid traverseOctreeFromBeginning(in vec3 shapePosition, out TraversalData traversalData, out SampleData sampleDatas[SAMPLE_COUNT]) {\n    traversalData.octreeCoords = ivec4(0);\n    traversalData.parentOctreeIndex = 0;\n\n    OctreeNodeData nodeData = getOctreeNodeData(vec2(0.0));\n    if (nodeData.flag != OCTREE_FLAG_LEAF) {\n        nodeData = traverseOctreeDownwards(shapePosition, traversalData);\n    }\n\n    #if (SAMPLE_COUNT == 1)\n        getOctreeLeafSampleData(nodeData, traversalData.octreeCoords, sampleDatas[0]);\n        sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n    #else\n        getOctreeLeafSampleDatas(nodeData, traversalData.octreeCoords, sampleDatas);\n        sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n        sampleDatas[1].tileUv = getTileUv(shapePosition, sampleDatas[1].tileCoords);\n    #endif\n}\n\nbool inRange(in vec3 v, in vec3 minVal, in vec3 maxVal) {\n    return clamp(v, minVal, maxVal) == v;\n}\n\nbool insideTile(in vec3 shapePosition, in ivec4 octreeCoords) {\n    vec3 tileUv = getTileUv(shapePosition, octreeCoords);\n\tbool inside = inRange(tileUv, vec3(0.0), vec3(1.0));\n\t// Assume (!) the position is always inside the root tile.\n\treturn inside || octreeCoords.w == 0;\n}\n\nvoid traverseOctreeFromExisting(in vec3 shapePosition, inout TraversalData traversalData, inout SampleData sampleDatas[SAMPLE_COUNT]) {\n    if (insideTile(shapePosition, traversalData.octreeCoords)) {\n        for (int i = 0; i < SAMPLE_COUNT; i++) {\n            sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n        }\n        return;\n    }\n\n    // Go up tree until we find a parent tile containing shapePosition\n    for (int i = 0; i < OCTREE_MAX_LEVELS; ++i) {\n        traversalData.octreeCoords.xyz /= 2;\n        traversalData.octreeCoords.w -= 1;\n\n        if (insideTile(shapePosition, traversalData.octreeCoords)) {\n            break;\n        }\n\n        traversalData.parentOctreeIndex = getOctreeParentIndex(traversalData.parentOctreeIndex);\n    }\n\n    // Go down tree\n    OctreeNodeData nodeData = traverseOctreeDownwards(shapePosition, traversalData);\n\n    #if (SAMPLE_COUNT == 1)\n        getOctreeLeafSampleData(nodeData, traversalData.octreeCoords, sampleDatas[0]);\n        sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n    #else\n        getOctreeLeafSampleDatas(nodeData, traversalData.octreeCoords, sampleDatas);\n        sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n        sampleDatas[1].tileUv = getTileUv(shapePosition, sampleDatas[1].tileCoords);\n    #endif\n}\n"},948548:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="// See Intersection.glsl for the definition of intersectScene\n// See IntersectionUtils.glsl for the definition of nextIntersection\n// See convertUvToBox.glsl, convertUvToCylinder.glsl, or convertUvToEllipsoid.glsl\n// for the definition of convertUvToShapeUvSpace. The appropriate function is \n// selected based on the VoxelPrimitive shape type, and added to the shader in\n// Scene/VoxelRenderResources.js.\n// See Octree.glsl for the definitions of TraversalData, SampleData,\n// traverseOctreeFromBeginning, and traverseOctreeFromExisting\n// See Megatexture.glsl for the definition of accumulatePropertiesFromMegatexture\n\n#define STEP_COUNT_MAX 1000 // Harcoded value because GLSL doesn't like variable length loops\n#define ALPHA_ACCUM_MAX 0.98 // Must be > 0.0 and <= 1.0\n\nuniform mat3 u_transformDirectionViewToLocal;\nuniform vec3 u_cameraPositionUv;\nuniform float u_stepSize;\n\n#if defined(PICKING)\n    uniform vec4 u_pickColor;\n#endif\n\n#if defined(JITTER)\nfloat hash(vec2 p)\n{\n    vec3 p3 = fract(vec3(p.xyx) * 50.0); // magic number = hashscale\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n#endif\n\nvec4 getStepSize(in SampleData sampleData, in Ray viewRay, in RayShapeIntersection shapeIntersection) {\n#if defined(SHAPE_BOX)\n    Box voxelBox = constructVoxelBox(sampleData.tileCoords, sampleData.tileUv);\n    RayShapeIntersection voxelIntersection = intersectBox(viewRay, voxelBox);\n    vec4 entry = shapeIntersection.entry.w >= voxelIntersection.entry.w ? shapeIntersection.entry : voxelIntersection.entry;\n    float exit = min(voxelIntersection.exit.w, shapeIntersection.exit.w);\n    float dt = (exit - entry.w) * RAY_SCALE;\n    return vec4(normalize(entry.xyz), dt);\n#else\n    float dimAtLevel = pow(2.0, float(sampleData.tileCoords.w));\n    return vec4(viewRay.dir, u_stepSize / dimAtLevel);\n#endif\n}\n\nvoid main()\n{\n    vec4 fragCoord = gl_FragCoord;\n    vec2 screenCoord = (fragCoord.xy - czm_viewport.xy) / czm_viewport.zw; // [0,1]\n    vec3 eyeDirection = normalize(czm_windowToEyeCoordinates(fragCoord).xyz);\n    vec3 viewDirWorld = normalize(czm_inverseViewRotation * eyeDirection); // normalize again just in case\n    vec3 viewDirUv = normalize(u_transformDirectionViewToLocal * eyeDirection); // normalize again just in case\n    vec3 viewPosUv = u_cameraPositionUv;\n    #if defined(SHAPE_BOX)\n        vec3 dInv = 1.0 / viewDirUv;\n        Ray viewRayUv = Ray(viewPosUv, viewDirUv, dInv);\n    #else\n        Ray viewRayUv = Ray(viewPosUv, viewDirUv);\n    #endif\n\n    Intersections ix;\n    RayShapeIntersection shapeIntersection = intersectScene(screenCoord, viewRayUv, ix);\n\n    // Exit early if the scene was completely missed.\n    if (shapeIntersection.entry.w == NO_HIT) {\n        discard;\n    }\n\n    float currT = shapeIntersection.entry.w * RAY_SCALE;\n    float endT = shapeIntersection.exit.w;\n    vec3 positionUv = viewPosUv + currT * viewDirUv;\n    vec3 positionUvShapeSpace = convertUvToShapeUvSpace(positionUv);\n\n    // Traverse the tree from the start position\n    TraversalData traversalData;\n    SampleData sampleDatas[SAMPLE_COUNT];\n    traverseOctreeFromBeginning(positionUvShapeSpace, traversalData, sampleDatas);\n    vec4 step = getStepSize(sampleDatas[0], viewRayUv, shapeIntersection);\n\n    #if defined(JITTER)\n        float noise = hash(screenCoord); // [0,1]\n        currT += noise * step.w;\n        positionUv += noise * step.w * viewDirUv;\n    #endif\n\n    FragmentInput fragmentInput;\n    #if defined(STATISTICS)\n        setStatistics(fragmentInput.metadata.statistics);\n    #endif\n\n    vec4 colorAccum =vec4(0.0);\n\n    for (int stepCount = 0; stepCount < STEP_COUNT_MAX; ++stepCount) {\n        // Read properties from the megatexture based on the traversal state\n        Properties properties = accumulatePropertiesFromMegatexture(sampleDatas);\n\n        // Prepare the custom shader inputs\n        copyPropertiesToMetadata(properties, fragmentInput.metadata);\n        fragmentInput.voxel.positionUv = positionUv;\n        fragmentInput.voxel.positionShapeUv = positionUvShapeSpace;\n        fragmentInput.voxel.positionUvLocal = sampleDatas[0].tileUv;\n        fragmentInput.voxel.viewDirUv = viewDirUv;\n        fragmentInput.voxel.viewDirWorld = viewDirWorld;\n        fragmentInput.voxel.surfaceNormal = step.xyz;\n        fragmentInput.voxel.travelDistance = step.w;\n\n        // Run the custom shader\n        czm_modelMaterial materialOutput;\n        fragmentMain(fragmentInput, materialOutput);\n\n        // Sanitize the custom shader output\n        vec4 color = vec4(materialOutput.diffuse, materialOutput.alpha);\n        color.rgb = max(color.rgb, vec3(0.0));\n        color.a = clamp(color.a, 0.0, 1.0);\n\n        // Pre-multiplied alpha blend\n        colorAccum += (1.0 - colorAccum.a) * vec4(color.rgb * color.a, color.a);\n\n        // Stop traversing if the alpha has been fully saturated\n        if (colorAccum.a > ALPHA_ACCUM_MAX) {\n            colorAccum.a = ALPHA_ACCUM_MAX;\n            break;\n        }\n\n        if (step.w == 0.0) {\n            // Shape is infinitely thin. The ray may have hit the edge of a\n            // foreground voxel. Step ahead slightly to check for more voxels\n            step.w == 0.00001;\n        }\n\n        // Keep raymarching\n        currT += step.w;\n        positionUv += step.w * viewDirUv;\n\n        // Check if there's more intersections.\n        if (currT > endT) {\n            #if (INTERSECTION_COUNT == 1)\n                break;\n            #else\n                shapeIntersection = nextIntersection(ix);\n                if (shapeIntersection.entry.w == NO_HIT) {\n                    break;\n                } else {\n                    // Found another intersection. Resume raymarching there\n                    currT = shapeIntersection.entry.w * RAY_SCALE;\n                    endT = shapeIntersection.exit.w;\n                    positionUv = viewPosUv + currT * viewDirUv;\n                }\n            #endif\n        }\n\n        // Traverse the tree from the current ray position.\n        // This is similar to traverseOctreeFromBeginning but is faster when the ray is in the same tile as the previous step.\n        positionUvShapeSpace = convertUvToShapeUvSpace(positionUv);\n        traverseOctreeFromExisting(positionUvShapeSpace, traversalData, sampleDatas);\n        step = getStepSize(sampleDatas[0], viewRayUv, shapeIntersection);\n    }\n\n    // Convert the alpha from [0,ALPHA_ACCUM_MAX] to [0,1]\n    colorAccum.a /= ALPHA_ACCUM_MAX;\n\n    #if defined(PICKING)\n        // If alpha is 0.0 there is nothing to pick\n        if (colorAccum.a == 0.0) {\n            discard;\n        }\n        out_FragColor = u_pickColor;\n    #else\n        out_FragColor = colorAccum;\n    #endif\n}\n"},500404:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="in vec2 position;\n\nuniform vec4 u_ndcSpaceAxisAlignedBoundingBox;\n\nvoid main() {\n    vec2 aabbMin = u_ndcSpaceAxisAlignedBoundingBox.xy;\n    vec2 aabbMax = u_ndcSpaceAxisAlignedBoundingBox.zw;\n    vec2 translation = 0.5 * (aabbMax + aabbMin);\n    vec2 scale = 0.5 * (aabbMax - aabbMin);\n    gl_Position = vec4(position * scale + translation, 0.0, 1.0);\n}\n"},357759:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="/* Box defines (set in Scene/VoxelBoxShape.js)\n#define BOX_HAS_SHAPE_BOUNDS\n*/\n\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    uniform vec3 u_boxUvToShapeUvScale;\n    uniform vec3 u_boxUvToShapeUvTranslate;\n#endif\n\nvec3 convertUvToShapeUvSpace(in vec3 positionUv) {\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    return positionUv * u_boxUvToShapeUvScale + u_boxUvToShapeUvTranslate;\n#else\n    return positionUv;\n#endif\n}\n\nvec3 convertShapeUvToUvSpace(in vec3 shapeUv) {\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    return (shapeUv - u_boxUvToShapeUvTranslate) / u_boxUvToShapeUvScale;\n#else\n    return shapeUv;\n#endif\n}\n"},353542:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i="/* Cylinder defines (set in Scene/VoxelCylinderShape.js)\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED\n*/\n\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS)\n    uniform vec2 u_cylinderUvToShapeUvRadius; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT)\n    uniform vec2 u_cylinderUvToShapeUvHeight; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE)\n    uniform vec2 u_cylinderUvToShapeUvAngle; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY)\n    uniform vec2 u_cylinderShapeUvAngleMinMax;\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED)\n    uniform float u_cylinderShapeUvAngleRangeZeroMid;\n#endif\n\nvec3 convertUvToShapeUvSpace(in vec3 positionUv) {\n    vec3 positionLocal = positionUv * 2.0 - 1.0; // [-1,+1]\n\n    // Compute radius\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT)\n        float radius = 1.0;\n    #else\n        float radius = length(positionLocal.xy); // [0,1]\n        #if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS)\n            radius = radius * u_cylinderUvToShapeUvRadius.x + u_cylinderUvToShapeUvRadius.y; // x = scale, y = offset\n        #endif\n    #endif\n\n    // Compute height\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT)\n        float height = 1.0;\n    #else\n        float height = positionUv.z; // [0,1]\n        #if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT)\n            height = height * u_cylinderUvToShapeUvHeight.x + u_cylinderUvToShapeUvHeight.y; // x = scale, y = offset\n        #endif\n    #endif\n\n    // Compute angle\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO)\n        float angle = 1.0;\n    #else\n        float angle = (atan(positionLocal.y, positionLocal.x) + czm_pi) / czm_twoPi; // [0,1]\n        #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE)\n            #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED)\n                // Comparing against u_cylinderShapeUvAngleMinMax has precision problems. u_cylinderShapeUvAngleRangeZeroMid is more conservative.\n                angle += float(angle < u_cylinderShapeUvAngleRangeZeroMid);\n            #endif\n\n            // Avoid flickering from reading voxels from both sides of the -pi/+pi discontinuity.\n            #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY)\n                angle = angle > u_cylinderShapeUvAngleRangeZeroMid ? u_cylinderShapeUvAngleMinMax.x : angle;\n            #elif defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY)\n                angle = angle < u_cylinderShapeUvAngleRangeZeroMid ? u_cylinderShapeUvAngleMinMax.y : angle;\n            #endif\n\n            angle = angle * u_cylinderUvToShapeUvAngle.x + u_cylinderUvToShapeUvAngle.y; // x = scale, y = offset\n        #endif\n    #endif\n\n    return vec3(radius, height, angle);\n}\n"},811151:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i='/* Ellipsoid defines (set in Scene/VoxelEllipsoidShape.js)\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT\n#define ELLIPSOID_IS_SPHERE\n*/\n\nuniform vec3 u_ellipsoidRadiiUv; // [0,1]\n#if !defined(ELLIPSOID_IS_SPHERE)\n    uniform vec3 u_ellipsoidInverseRadiiSquaredUv;\n#endif\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY) || defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED)\n    uniform vec3 u_ellipsoidShapeUvLongitudeMinMaxMid;\n#endif\n#if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE)\n    uniform vec2 u_ellipsoidUvToShapeUvLongitude; // x = scale, y = offset\n#endif\n#if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE)\n    uniform vec2 u_ellipsoidUvToShapeUvLatitude; // x = scale, y = offset\n#endif\n#if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN) && !defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT)\n    uniform float u_ellipsoidInverseHeightDifferenceUv;\n    uniform vec2 u_ellipseInnerRadiiUv; // [0,1]\n#endif\n\n// robust iterative solution without trig functions\n// https://github.com/0xfaded/ellipse_demo/issues/1\n// https://stackoverflow.com/questions/22959698/distance-from-given-point-to-given-ellipse\n// Pro: Good when radii.x ~= radii.y\n// Con: Breaks at pos.x ~= 0.0, especially inside the ellipse\n// Con: Inaccurate with exterior points and thin ellipses\nfloat ellipseDistanceIterative (vec2 pos, vec2 radii) {\n    vec2 p = abs(pos);\n    vec2 invRadii = 1.0 / radii;\n    vec2 a = vec2(1.0, -1.0) * (radii.x * radii.x - radii.y * radii.y) * invRadii;\n    vec2 t = vec2(0.70710678118); // sqrt(2) / 2\n    vec2 v = radii * t;\n\n    const int iterations = 3;\n    for (int i = 0; i < iterations; ++i) {\n        vec2 e = a * pow(t, vec2(3.0));\n        vec2 q = normalize(p - e) * length(v - e);\n        t = normalize((q + e) * invRadii);\n        v = radii * t;\n    }\n    return length(v * sign(pos) - pos) * sign(p.y - v.y);\n}\n\nvec3 convertUvToShapeUvSpace(in vec3 positionUv) {\n    // Compute position and normal.\n    // Convert positionUv [0,1] to local space [-1,+1] to "normalized" cartesian space [-a,+a] where a = (radii + height) / (max(radii) + height).\n    // A point on the largest ellipsoid axis would be [-1,+1] and everything else would be smaller.\n    vec3 positionLocal = positionUv * 2.0 - 1.0;\n    #if defined(ELLIPSOID_IS_SPHERE)\n        vec3 posEllipsoid = positionLocal * u_ellipsoidRadiiUv.x;\n        vec3 normal = normalize(posEllipsoid);\n    #else\n        vec3 posEllipsoid = positionLocal * u_ellipsoidRadiiUv;\n        vec3 normal = normalize(posEllipsoid * u_ellipsoidInverseRadiiSquaredUv); // geodetic surface normal\n    #endif\n\n    // Compute longitude\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO)\n        float longitude = 1.0;\n    #else\n        float longitude = (atan(normal.y, normal.x) + czm_pi) / czm_twoPi;\n\n        // Correct the angle when max < min\n        // Technically this should compare against min longitude - but it has precision problems so compare against the middle of empty space.\n        #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED)\n            longitude += float(longitude < u_ellipsoidShapeUvLongitudeMinMaxMid.z);\n        #endif\n\n        // Avoid flickering from reading voxels from both sides of the -pi/+pi discontinuity.\n        #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY)\n            longitude = longitude > u_ellipsoidShapeUvLongitudeMinMaxMid.z ? u_ellipsoidShapeUvLongitudeMinMaxMid.x : longitude;\n        #endif\n        #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY)\n            longitude = longitude < u_ellipsoidShapeUvLongitudeMinMaxMid.z ? u_ellipsoidShapeUvLongitudeMinMaxMid.y : longitude;\n        #endif\n\n        #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE)\n            longitude = longitude * u_ellipsoidUvToShapeUvLongitude.x + u_ellipsoidUvToShapeUvLongitude.y;\n        #endif\n    #endif\n\n    // Compute latitude\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO)\n        float latitude = 1.0;\n    #else\n        float latitude = (asin(normal.z) + czm_piOverTwo) / czm_pi;\n        #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE)\n            latitude = latitude * u_ellipsoidUvToShapeUvLatitude.x + u_ellipsoidUvToShapeUvLatitude.y;\n        #endif\n    #endif\n\n    // Compute height\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT)\n        // TODO: This breaks down when minBounds == maxBounds. To fix it, this\n        // function would have to know if ray is intersecting the front or back of the shape\n        // and set the shape space position to 1 (front) or 0 (back) accordingly.\n        float height = 1.0;\n    #else\n        #if defined(ELLIPSOID_IS_SPHERE)\n            #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN)\n                float height = (length(posEllipsoid) - u_ellipseInnerRadiiUv.x) * u_ellipsoidInverseHeightDifferenceUv;\n            #else\n                float height = length(posEllipsoid);\n            #endif\n        #else\n            #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN)\n                // Convert the 3D position to a 2D position relative to the ellipse (radii.x, radii.z) (assuming radii.x == radii.y which is true for WGS84).\n                // This is an optimization so that math can be done with ellipses instead of ellipsoids.\n                vec2 posEllipse = vec2(length(posEllipsoid.xy), posEllipsoid.z);\n                float height = ellipseDistanceIterative(posEllipse, u_ellipseInnerRadiiUv) * u_ellipsoidInverseHeightDifferenceUv;\n            #else\n                // TODO: this is probably not correct\n                float height = length(posEllipsoid);\n            #endif\n        #endif\n    #endif\n\n    return vec3(longitude, latitude, height);\n}\n'},484718:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var i=n(949225),o=n(660904),r=n(249702),s=n(234146),a=n(11020),c=n(906439),l=n(722313),u=n(765153),d=n(63354),h=n(95296),f=n(765453),p=n(902299),m=n(228672),_=n(18929),g=n(511877),Z=n(817271),y=n(714233),b=n(809069),v=n(534890),A=n(987411),T=n(106233),w=n(450634);function E(e){return(0,i.Z)(`Assets/Textures/SkyBox/tycho2t3_80_${e}.jpg`)}function S(e){let t=e._useBrowserRecommendedResolution?1:window.devicePixelRatio;return t*=e._resolutionScale,(0,a.Z)(e._scene)&&(e._scene.pixelRatio=t),t}function C(e){const t=e._canvas;let n=t.clientWidth,i=t.clientHeight;const o=S(e);e._canvasClientWidth=n,e._canvasClientHeight=i,n*=o,i*=o,t.width=n,t.height=i,e._canRender=0!==n&&0!==i,e._lastDevicePixelRatio=window.devicePixelRatio}function x(e){const t=e._canvas,n=t.width,i=t.height;if(0!==n&&0!==i){const t=e._scene.camera.frustum;(0,a.Z)(t.aspectRatio)?t.aspectRatio=n/i:(t.top=t.right*(i/n),t.bottom=-t.top)}}function I(e,t){if(!(0,a.Z)(e))throw new u.Z("container is required.");e=(0,p.Z)(e),t=(0,s.Z)(t,s.Z.EMPTY_OBJECT);const n=document.createElement("div");n.className="cesium-widget",e.appendChild(n);const i=document.createElement("canvas"),l=h.Z.supportsImageRenderingPixelated();function f(){i!==i.ownerDocument.activeElement&&i.ownerDocument.activeElement.blur()}this._supportsImageRenderingPixelated=l,l&&(i.style.imageRendering=h.Z.imageRenderingValue()),i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},(0,s.Z)(t.blurActiveElementOnCanvasFocus,!0)&&(i.addEventListener("mousedown",f),i.addEventListener("pointerdown",f)),n.appendChild(i);const I=document.createElement("div");I.className="cesium-widget-credits";const P=(0,a.Z)(t.creditContainer)?(0,p.Z)(t.creditContainer):n;P.appendChild(I);const D=(0,a.Z)(t.creditViewport)?(0,p.Z)(t.creditViewport):n,O=(0,s.Z)(t.showRenderLoopErrors,!0),L=(0,s.Z)(t.useBrowserRecommendedResolution,!0);this._element=n,this._container=e,this._canvas=i,this._canvasClientWidth=0,this._canvasClientHeight=0,this._lastDevicePixelRatio=0,this._creditViewport=D,this._creditContainer=P,this._innerCreditContainer=I,this._canRender=!1,this._renderLoopRunning=!1,this._showRenderLoopErrors=O,this._resolutionScale=1,this._useBrowserRecommendedResolution=L,this._forceResize=!1,this._clock=(0,a.Z)(t.clock)?t.clock:new r.Z,C(this);try{const e=new Z.Z({canvas:i,contextOptions:t.contextOptions,creditContainer:I,creditViewport:D,mapProjection:t.mapProjection,orderIndependentTranslucency:t.orderIndependentTranslucency,scene3DOnly:(0,s.Z)(t.scene3DOnly,!1),shadows:t.shadows,mapMode2D:t.mapMode2D,requestRenderMode:t.requestRenderMode,maximumRenderTimeChange:t.maximumRenderTimeChange,depthPlaneEllipsoidOffset:t.depthPlaneEllipsoidOffset,msaaSamples:t.msaaSamples});this._scene=e,e.camera.constrainedAxis=o.Z.UNIT_Z,S(this),x(this);const n=(0,s.Z)(e.mapProjection.ellipsoid,d.Z.WGS84);let r=t.globe;(0,a.Z)(r)||(r=new m.Z(n)),!1!==r&&(e.globe=r,e.globe.shadows=(0,s.Z)(t.terrainShadows,v.Z.RECEIVE_ONLY));let l=t.skyBox;(0,a.Z)(l)||(l=new T.Z({sources:{positiveX:E("px"),negativeX:E("mx"),positiveY:E("py"),negativeY:E("my"),positiveZ:E("pz"),negativeZ:E("mz")}})),!1!==l&&(e.skyBox=l,e.sun=new w.Z,e.moon=new g.Z);let h=t.skyAtmosphere;(0,a.Z)(h)||(h=new A.Z(n)),!1!==h&&(e.skyAtmosphere=h),(0,a.Z)(t.imageryProvider)&&(0,c.Z)("CesiumWidget options.imageryProvider","options.imageryProvider was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use options.baseLayer instead.");let f=t.baseLayer;if(!1!==t.globe&&!1!==f&&!1!==t.imageryProvider&&((0,a.Z)(t.imageryProvider)&&!(0,a.Z)(f)&&(f=new _.Z(t.imageryProvider)),(0,a.Z)(f)||(f=_.Z.fromWorldImagery()),e.imageryLayers.add(f)),(0,a.Z)(t.terrainProvider)&&!1!==t.globe&&(e.terrainProvider=t.terrainProvider),(0,a.Z)(t.terrain)&&!1!==t.globe){if((0,a.Z)(t.terrainProvider))throw new u.Z("Specify either options.terrainProvider or options.terrain.");e.setTerrain(t.terrain)}this._screenSpaceEventHandler=new b.Z(i),(0,a.Z)(t.sceneMode)&&(t.sceneMode===y.Z.SCENE2D&&this._scene.morphTo2D(0),t.sceneMode===y.Z.COLUMBUS_VIEW&&this._scene.morphToColumbusView(0)),this._useDefaultRenderLoop=void 0,this.useDefaultRenderLoop=(0,s.Z)(t.useDefaultRenderLoop,!0),this._targetFrameRate=void 0,this.targetFrameRate=t.targetFrameRate;const p=this;this._onRenderError=function(e,t){if(p._useDefaultRenderLoop=!1,p._renderLoopRunning=!1,p._showRenderLoopErrors){const e="An error occurred while rendering.  Rendering has stopped.";p.showErrorPanel(e,void 0,t)}},e.renderError.addEventListener(this._onRenderError)}catch(e){if(O){const t="Error constructing CesiumWidget.",n='Visit <a href="http://get.webgl.org">http://get.webgl.org</a> to verify that your web browser and hardware support WebGL.  Consider trying a different web browser or updating your video drivers.  Detailed error information is below:';this.showErrorPanel(t,n,e)}throw e}}Object.defineProperties(I.prototype,{container:{get:function(){return this._container}},canvas:{get:function(){return this._canvas}},creditContainer:{get:function(){return this._creditContainer}},creditViewport:{get:function(){return this._creditViewport}},scene:{get:function(){return this._scene}},imageryLayers:{get:function(){return this._scene.imageryLayers}},terrainProvider:{get:function(){return this._scene.terrainProvider},set:function(e){this._scene.terrainProvider=e}},creditDisplay:{get:function(){return this._scene.frameState.creditDisplay}},camera:{get:function(){return this._scene.camera}},clock:{get:function(){return this._clock}},screenSpaceEventHandler:{get:function(){return this._screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._targetFrameRate},set:function(e){if(e<=0)throw new u.Z("targetFrameRate must be greater than 0, or undefined.");this._targetFrameRate=e}},useDefaultRenderLoop:{get:function(){return this._useDefaultRenderLoop},set:function(e){this._useDefaultRenderLoop!==e&&(this._useDefaultRenderLoop=e,e&&!this._renderLoopRunning&&function(e){e._renderLoopRunning=!0;let t=0;requestAnimationFrame((function n(i){if(!e.isDestroyed())if(e._useDefaultRenderLoop)try{const o=e._targetFrameRate;if((0,a.Z)(o)){const r=1e3/o,s=i-t;s>r&&(e.resize(),e.render(),t=i-s%r),requestAnimationFrame(n)}else e.resize(),e.render(),requestAnimationFrame(n)}catch(t){if(e._useDefaultRenderLoop=!1,e._renderLoopRunning=!1,e._showRenderLoopErrors){const n="An error occurred while rendering.  Rendering has stopped.";e.showErrorPanel(n,void 0,t)}}else e._renderLoopRunning=!1}))}(this))}},resolutionScale:{get:function(){return this._resolutionScale},set:function(e){if(e<=0)throw new u.Z("resolutionScale must be greater than 0.");this._resolutionScale!==e&&(this._resolutionScale=e,this._forceResize=!0)}},useBrowserRecommendedResolution:{get:function(){return this._useBrowserRecommendedResolution},set:function(e){this._useBrowserRecommendedResolution!==e&&(this._useBrowserRecommendedResolution=e,this._forceResize=!0)}}}),I.prototype.showErrorPanel=function(e,t,n){const i=this._element,o=document.createElement("div");o.className="cesium-widget-errorPanel";const r=document.createElement("div");r.className="cesium-widget-errorPanel-content",o.appendChild(r);const s=document.createElement("div");s.className="cesium-widget-errorPanel-header",s.appendChild(document.createTextNode(e)),r.appendChild(s);const c=document.createElement("div");function l(){c.style.maxHeight=`${Math.max(Math.round(.9*i.clientHeight-100),30)}px`}c.className="cesium-widget-errorPanel-scroll",r.appendChild(c),l(),(0,a.Z)(window.addEventListener)&&window.addEventListener("resize",l,!1);const u=(0,a.Z)(t),d=(0,a.Z)(n);if(u||d){const i=document.createElement("div");if(i.className="cesium-widget-errorPanel-message",c.appendChild(i),d){let i=(0,f.Z)(n);u||("string"==typeof n&&(n=new Error(n)),t=(0,f.Z)({name:n.name,message:n.message}),i=n.stack),"undefined"!=typeof console&&console.error(`${e}\n${t}\n${i}`);const o=document.createElement("div");o.className="cesium-widget-errorPanel-message-details collapsed";const s=document.createElement("span");s.className="cesium-widget-errorPanel-more-details",s.appendChild(document.createTextNode("See more...")),o.appendChild(s),o.onclick=function(e){o.removeChild(s),o.appendChild(document.createTextNode(i)),o.className="cesium-widget-errorPanel-message-details",r.className="cesium-widget-errorPanel-content expanded",o.onclick=void 0},c.appendChild(o)}i.innerHTML=`<p>${t}</p>`}const h=document.createElement("div");h.className="cesium-widget-errorPanel-buttonPanel",r.appendChild(h);const p=document.createElement("button");p.setAttribute("type","button"),p.className="cesium-button",p.appendChild(document.createTextNode("OK")),p.onclick=function(){(0,a.Z)(l)&&(0,a.Z)(window.removeEventListener)&&window.removeEventListener("resize",l,!1),i.removeChild(o)},h.appendChild(p),i.appendChild(o)},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){(0,a.Z)(this._scene)&&(this._scene.renderError.removeEventListener(this._onRenderError),this._scene=this._scene.destroy()),this._container.removeChild(this._element),this._creditContainer.removeChild(this._innerCreditContainer),(0,l.Z)(this)},I.prototype.resize=function(){const e=this._canvas;(this._forceResize||this._canvasClientWidth!==e.clientWidth||this._canvasClientHeight!==e.clientHeight||this._lastDevicePixelRatio!==window.devicePixelRatio)&&(this._forceResize=!1,C(this),x(this),this._scene.requestRender())},I.prototype.render=function(){if(this._canRender){this._scene.initializeFrame();const e=this._clock.tick();this._scene.render(e)}else this._clock.tick()};const P=I},90318:function(e){e.exports=function(){"use strict";const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:i,getOwnPropertyDescriptor:o}=Object;let{freeze:r,seal:s,create:a}=Object,{apply:c,construct:l}="undefined"!=typeof Reflect&&Reflect;r||(r=function(e){return e}),s||(s=function(e){return e}),c||(c=function(e,t,n){return e.apply(t,n)}),l||(l=function(e,t){return new e(...t)});const u=T(Array.prototype.forEach),d=T(Array.prototype.pop),h=T(Array.prototype.push),f=T(String.prototype.toLowerCase),p=T(String.prototype.toString),m=T(String.prototype.match),_=T(String.prototype.replace),g=T(String.prototype.indexOf),Z=T(String.prototype.trim),y=T(Object.prototype.hasOwnProperty),b=T(RegExp.prototype.test),v=(A=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l(A,t)});var A;function T(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return c(e,t,i)}}function w(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;t&&t(e,null);let r=i.length;for(;r--;){let t=i[r];if("string"==typeof t){const e=o(t);e!==t&&(n(i)||(i[r]=e),t=e)}e[t]=!0}return e}function E(e){for(let t=0;t<e.length;t++)y(e,t)||(e[t]=null);return e}function S(t){const n=a(null);for(const[i,o]of e(t))y(t,i)&&(Array.isArray(o)?n[i]=E(o):o&&"object"==typeof o&&o.constructor===Object?n[i]=S(o):n[i]=o);return n}function C(e,t){for(;null!==e;){const n=o(e,t);if(n){if(n.get)return T(n.get);if("function"==typeof n.value)return T(n.value)}e=i(e)}return function(){return null}}const x=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),D=r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),O=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),L=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=r(["#text"]),M=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),R=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),F=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),B=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),U=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),k=s(/<%[\w\W]*|[\w\W]*%>/gm),V=s(/\${[\w\W]*}/gm),H=s(/^data-[\-\w.\u00B7-\uFFFF]/),z=s(/^aria-[\-\w]+$/),G=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),j=s(/^(?:\w+script|data):/i),W=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q=s(/^html$/i),Y=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var X=Object.freeze({__proto__:null,MUSTACHE_EXPR:U,ERB_EXPR:k,TMPLIT_EXPR:V,DATA_ATTR:H,ARIA_ATTR:z,IS_ALLOWED_URI:G,IS_SCRIPT_OR_DATA:j,ATTR_WHITESPACE:W,DOCTYPE_NAME:q,CUSTOM_ELEMENT:Y});const J=1,Q=3,$=7,K=8,ee=9,te=function(){return"undefined"==typeof window?null:window};return function t(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();const i=e=>t(e);if(i.version="3.1.5",i.removed=[],!n||!n.document||n.document.nodeType!==ee)return i.isSupported=!1,i;let{document:o}=n;const s=o,c=s.currentScript,{DocumentFragment:l,HTMLTemplateElement:A,Node:T,Element:E,NodeFilter:U,NamedNodeMap:k=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:V,DOMParser:H,trustedTypes:z}=n,j=E.prototype,W=C(j,"cloneNode"),Y=C(j,"nextSibling"),ne=C(j,"childNodes"),ie=C(j,"parentNode");if("function"==typeof A){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let oe,re="";const{implementation:se,createNodeIterator:ae,createDocumentFragment:ce,getElementsByTagName:le}=o,{importNode:ue}=s;let de={};i.isSupported="function"==typeof e&&"function"==typeof ie&&se&&void 0!==se.createHTMLDocument;const{MUSTACHE_EXPR:he,ERB_EXPR:fe,TMPLIT_EXPR:pe,DATA_ATTR:me,ARIA_ATTR:_e,IS_SCRIPT_OR_DATA:ge,ATTR_WHITESPACE:Ze,CUSTOM_ELEMENT:ye}=X;let{IS_ALLOWED_URI:be}=X,ve=null;const Ae=w({},[...x,...I,...P,...O,...N]);let Te=null;const we=w({},[...M,...R,...F,...B]);let Ee=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,Ce=null,xe=!0,Ie=!0,Pe=!1,De=!0,Oe=!1,Le=!0,Ne=!1,Me=!1,Re=!1,Fe=!1,Be=!1,Ue=!1,ke=!0,Ve=!1,He=!0,ze=!1,Ge={},je=null;const We=w({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qe=null;const Ye=w({},["audio","video","img","source","image","track"]);let Xe=null;const Je=w({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",$e="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml";let et=Ke,tt=!1,nt=null;const it=w({},[Qe,$e,Ke],p);let ot=null;const rt=["application/xhtml+xml","text/html"];let st=null,at=null;const ct=o.createElement("form"),lt=function(e){return e instanceof RegExp||e instanceof Function},ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!at||at!==e){if(e&&"object"==typeof e||(e={}),e=S(e),ot=-1===rt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===ot?p:f,ve=y(e,"ALLOWED_TAGS")?w({},e.ALLOWED_TAGS,st):Ae,Te=y(e,"ALLOWED_ATTR")?w({},e.ALLOWED_ATTR,st):we,nt=y(e,"ALLOWED_NAMESPACES")?w({},e.ALLOWED_NAMESPACES,p):it,Xe=y(e,"ADD_URI_SAFE_ATTR")?w(S(Je),e.ADD_URI_SAFE_ATTR,st):Je,qe=y(e,"ADD_DATA_URI_TAGS")?w(S(Ye),e.ADD_DATA_URI_TAGS,st):Ye,je=y(e,"FORBID_CONTENTS")?w({},e.FORBID_CONTENTS,st):We,Se=y(e,"FORBID_TAGS")?w({},e.FORBID_TAGS,st):{},Ce=y(e,"FORBID_ATTR")?w({},e.FORBID_ATTR,st):{},Ge=!!y(e,"USE_PROFILES")&&e.USE_PROFILES,xe=!1!==e.ALLOW_ARIA_ATTR,Ie=!1!==e.ALLOW_DATA_ATTR,Pe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,De=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Oe=e.SAFE_FOR_TEMPLATES||!1,Le=!1!==e.SAFE_FOR_XML,Ne=e.WHOLE_DOCUMENT||!1,Fe=e.RETURN_DOM||!1,Be=e.RETURN_DOM_FRAGMENT||!1,Ue=e.RETURN_TRUSTED_TYPE||!1,Re=e.FORCE_BODY||!1,ke=!1!==e.SANITIZE_DOM,Ve=e.SANITIZE_NAMED_PROPS||!1,He=!1!==e.KEEP_CONTENT,ze=e.IN_PLACE||!1,be=e.ALLOWED_URI_REGEXP||G,et=e.NAMESPACE||Ke,Ee=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ee.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ee.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ee.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Oe&&(Ie=!1),Be&&(Fe=!0),Ge&&(ve=w({},N),Te=[],!0===Ge.html&&(w(ve,x),w(Te,M)),!0===Ge.svg&&(w(ve,I),w(Te,R),w(Te,B)),!0===Ge.svgFilters&&(w(ve,P),w(Te,R),w(Te,B)),!0===Ge.mathMl&&(w(ve,O),w(Te,F),w(Te,B))),e.ADD_TAGS&&(ve===Ae&&(ve=S(ve)),w(ve,e.ADD_TAGS,st)),e.ADD_ATTR&&(Te===we&&(Te=S(Te)),w(Te,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&w(Xe,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&(je===We&&(je=S(je)),w(je,e.FORBID_CONTENTS,st)),He&&(ve["#text"]=!0),Ne&&w(ve,["html","head","body"]),ve.table&&(w(ve,["tbody"]),delete Se.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw v('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw v('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');oe=e.TRUSTED_TYPES_POLICY,re=oe.createHTML("")}else void 0===oe&&(oe=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(z,c)),null!==oe&&"string"==typeof re&&(re=oe.createHTML(""));r&&r(e),at=e}},dt=w({},["mi","mo","mn","ms","mtext"]),ht=w({},["foreignobject","annotation-xml"]),ft=w({},["title","style","font","a","script"]),pt=w({},[...I,...P,...D]),mt=w({},[...O,...L]),_t=function(e){h(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},gt=function(e,t){try{h(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){h(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Te[e])if(Fe||Be)try{_t(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Zt=function(e){let t=null,n=null;if(Re)e="<remove></remove>"+e;else{const t=m(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ot&&et===Ke&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=oe?oe.createHTML(e):e;if(et===Ke)try{t=(new H).parseFromString(i,ot)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(et,"template",null);try{t.documentElement.innerHTML=tt?re:i}catch(e){}}const r=t.body||t.documentElement;return e&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),et===Ke?le.call(t,Ne?"html":"body")[0]:Ne?t.documentElement:r},yt=function(e){return ae.call(e.ownerDocument||e,e,U.SHOW_ELEMENT|U.SHOW_COMMENT|U.SHOW_TEXT|U.SHOW_PROCESSING_INSTRUCTION|U.SHOW_CDATA_SECTION,null)},bt=function(e){return e instanceof V&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof k)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},vt=function(e){return"function"==typeof T&&e instanceof T},At=function(e,t,n){de[e]&&u(de[e],(e=>{e.call(i,t,n,at)}))},Tt=function(e){let t=null;if(At("beforeSanitizeElements",e,null),bt(e))return _t(e),!0;const n=st(e.nodeName);if(At("uponSanitizeElement",e,{tagName:n,allowedTags:ve}),e.hasChildNodes()&&!vt(e.firstElementChild)&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return _t(e),!0;if(e.nodeType===$)return _t(e),!0;if(Le&&e.nodeType===K&&b(/<[/\w]/g,e.data))return _t(e),!0;if(!ve[n]||Se[n]){if(!Se[n]&&Et(n)){if(Ee.tagNameCheck instanceof RegExp&&b(Ee.tagNameCheck,n))return!1;if(Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(n))return!1}if(He&&!je[n]){const t=ie(e)||e.parentNode,n=ne(e)||e.childNodes;if(n&&t)for(let i=n.length-1;i>=0;--i){const o=W(n[i],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,Y(e))}}return _t(e),!0}return e instanceof E&&!function(e){let t=ie(e);t&&t.tagName||(t={namespaceURI:et,tagName:"template"});const n=f(e.tagName),i=f(t.tagName);return!!nt[e.namespaceURI]&&(e.namespaceURI===$e?t.namespaceURI===Ke?"svg"===n:t.namespaceURI===Qe?"svg"===n&&("annotation-xml"===i||dt[i]):Boolean(pt[n]):e.namespaceURI===Qe?t.namespaceURI===Ke?"math"===n:t.namespaceURI===$e?"math"===n&&ht[i]:Boolean(mt[n]):e.namespaceURI===Ke?!(t.namespaceURI===$e&&!ht[i])&&!(t.namespaceURI===Qe&&!dt[i])&&!mt[n]&&(ft[n]||!pt[n]):!("application/xhtml+xml"!==ot||!nt[e.namespaceURI]))}(e)?(_t(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!b(/<\/no(script|embed|frames)/i,e.innerHTML)?(Oe&&e.nodeType===Q&&(t=e.textContent,u([he,fe,pe],(e=>{t=_(t,e," ")})),e.textContent!==t&&(h(i.removed,{element:e.cloneNode()}),e.textContent=t)),At("afterSanitizeElements",e,null),!1):(_t(e),!0)},wt=function(e,t,n){if(ke&&("id"===t||"name"===t)&&(n in o||n in ct))return!1;if(Ie&&!Ce[t]&&b(me,t));else if(xe&&b(_e,t));else if(!Te[t]||Ce[t]){if(!(Et(e)&&(Ee.tagNameCheck instanceof RegExp&&b(Ee.tagNameCheck,e)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(e))&&(Ee.attributeNameCheck instanceof RegExp&&b(Ee.attributeNameCheck,t)||Ee.attributeNameCheck instanceof Function&&Ee.attributeNameCheck(t))||"is"===t&&Ee.allowCustomizedBuiltInElements&&(Ee.tagNameCheck instanceof RegExp&&b(Ee.tagNameCheck,n)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(n))))return!1}else if(Xe[t]);else if(b(be,_(n,Ze,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==g(n,"data:")||!qe[e])if(Pe&&!b(ge,_(n,Ze,"")));else if(n)return!1;return!0},Et=function(e){return"annotation-xml"!==e&&m(e,ye)},St=function(e){At("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Te};let o=t.length;for(;o--;){const r=t[o],{name:s,namespaceURI:a,value:c}=r,l=st(s);let h="value"===s?c:Z(c);if(n.attrName=l,n.attrValue=h,n.keepAttr=!0,n.forceKeepAttr=void 0,At("uponSanitizeAttribute",e,n),h=n.attrValue,n.forceKeepAttr)continue;if(gt(s,e),!n.keepAttr)continue;if(!De&&b(/\/>/i,h)){gt(s,e);continue}if(Le&&b(/((--!?|])>)|<\/(style|title)/i,h)){gt(s,e);continue}Oe&&u([he,fe,pe],(e=>{h=_(h,e," ")}));const f=st(e.nodeName);if(wt(f,l,h)){if(!Ve||"id"!==l&&"name"!==l||(gt(s,e),h="user-content-"+h),oe&&"object"==typeof z&&"function"==typeof z.getAttributeType)if(a);else switch(z.getAttributeType(f,l)){case"TrustedHTML":h=oe.createHTML(h);break;case"TrustedScriptURL":h=oe.createScriptURL(h)}try{a?e.setAttributeNS(a,s,h):e.setAttribute(s,h),bt(e)?_t(e):d(i.removed)}catch(e){}}}At("afterSanitizeAttributes",e,null)},Ct=function e(t){let n=null;const i=yt(t);for(At("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)At("uponSanitizeShadowNode",n,null),Tt(n)||(n.content instanceof l&&e(n.content),St(n));At("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=null,r=null,a=null;if(tt=!e,tt&&(e="\x3c!--\x3e"),"string"!=typeof e&&!vt(e)){if("function"!=typeof e.toString)throw v("toString is not a function");if("string"!=typeof(e=e.toString()))throw v("dirty is not a string, aborting")}if(!i.isSupported)return e;if(Me||ut(t),i.removed=[],"string"==typeof e&&(ze=!1),ze){if(e.nodeName){const t=st(e.nodeName);if(!ve[t]||Se[t])throw v("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof T)n=Zt("\x3c!----\x3e"),o=n.ownerDocument.importNode(e,!0),o.nodeType===J&&"BODY"===o.nodeName||"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!Fe&&!Oe&&!Ne&&-1===e.indexOf("<"))return oe&&Ue?oe.createHTML(e):e;if(n=Zt(e),!n)return Fe?null:Ue?re:""}n&&Re&&_t(n.firstChild);const c=yt(ze?e:n);for(;r=c.nextNode();)Tt(r)||(r.content instanceof l&&Ct(r.content),St(r));if(ze)return e;if(Fe){if(Be)for(a=ce.call(n.ownerDocument);n.firstChild;)a.appendChild(n.firstChild);else a=n;return(Te.shadowroot||Te.shadowrootmode)&&(a=ue.call(s,a,!0)),a}let d=Ne?n.outerHTML:n.innerHTML;return Ne&&ve["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&b(q,n.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+d),Oe&&u([he,fe,pe],(e=>{d=_(d,e," ")})),oe&&Ue?oe.createHTML(d):d},i.setConfig=function(){ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Me=!0},i.clearConfig=function(){at=null,Me=!1},i.isValidAttribute=function(e,t,n){at||ut({});const i=st(e),o=st(t);return wt(i,o,n)},i.addHook=function(e,t){"function"==typeof t&&(de[e]=de[e]||[],h(de[e],t))},i.removeHook=function(e){if(de[e])return d(de[e])},i.removeHooks=function(e){de[e]&&(de[e]=[])},i.removeAllHooks=function(){de={}},i}()}()},492417:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(35961),o=n(722313),r=n(11020),s=n(765153),a=n(902299),c=n(294798);const l="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xlink";let d;const h=i.Z.fromCssColorString("rgba(247,250,255,0.384)"),f=i.Z.fromCssColorString("rgba(143,191,255,0.216)"),p=i.Z.fromCssColorString("rgba(153,197,255,0.098)"),m=i.Z.fromCssColorString("rgba(255,255,255,0.086)"),_=i.Z.fromCssColorString("rgba(255,255,255,0.267)"),g=i.Z.fromCssColorString("rgba(255,255,255,0)"),Z=i.Z.fromCssColorString("rgba(66,67,68,0.3)"),y=i.Z.fromCssColorString("rgba(0,0,0,0.5)");function b(e){return i.Z.fromCssColorString(window.getComputedStyle(e).getPropertyValue("color"))}const v={animation_pathReset:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.316,5.318,9.833,13.682,9.833,5.5,5.5,5.5,5.5,25.5,9.833,25.5,9.833,17.318,24.316,25.682z"},animation_pathPause:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M13,5.5,7.5,5.5,7.5,25.5,13,25.5zM24.5,5.5,19,5.5,19,25.5,24.5,25.5z"},animation_pathPlay:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},animation_pathPlayReverse:{tagName:"path",transform:"translate(16,16) scale(-0.85,0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},animation_pathLoop:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.249,15.499c-0.009,4.832-3.918,8.741-8.75,8.75c-2.515,0-4.768-1.064-6.365-2.763l2.068-1.442l-7.901-3.703l0.744,8.694l2.193-1.529c2.244,2.594,5.562,4.242,9.26,4.242c6.767,0,12.249-5.482,12.249-12.249H24.249zM15.499,6.75c2.516,0,4.769,1.065,6.367,2.764l-2.068,1.443l7.901,3.701l-0.746-8.693l-2.192,1.529c-2.245-2.594-5.562-4.245-9.262-4.245C8.734,3.25,3.25,8.734,3.249,15.499H6.75C6.758,10.668,10.668,6.758,15.499,6.75z"},animation_pathClock:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-15.5)",d:"M15.5,2.374C8.251,2.375,2.376,8.251,2.374,15.5C2.376,22.748,8.251,28.623,15.5,28.627c7.249-0.004,13.124-5.879,13.125-13.127C28.624,8.251,22.749,2.375,15.5,2.374zM15.5,25.623C9.909,25.615,5.385,21.09,5.375,15.5C5.385,9.909,9.909,5.384,15.5,5.374c5.59,0.01,10.115,4.535,10.124,10.125C25.615,21.09,21.091,25.615,15.5,25.623zM8.625,15.5c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,16.5,8.624,16.053,8.625,15.5zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.887,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM22.822,12.428c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,12.54,22.344,12.705,22.822,12.428zM12.062,21.455c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,22.344,12.54,21.732,12.062,21.455zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM22.823,18.572c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.092,0.367,1.367c0.477,0.275,1.089,0.113,1.365-0.365C23.464,19.461,23.3,18.848,22.823,18.572zM19.938,7.813c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM23.378,14.5c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,14.949,23.929,14.5,23.378,14.5zM15.501,6.624c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.365c0.275,0.479,0.889,0.643,1.365,0.367l3.305-1.676C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876C16.501,7.072,16.053,6.624,15.501,6.624zM15.501,22.377c-0.552,0-1,0.447-1,1s0.448,1,1,1s1-0.447,1-1S16.053,22.377,15.501,22.377zM18.939,21.455c-0.479,0.277-0.643,0.889-0.366,1.367c0.275,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.889,0.366-1.365C20.028,21.344,19.417,21.18,18.939,21.455z"},animation_pathWingButton:{tagName:"path",d:"m 4.5,0.5 c -2.216,0 -4,1.784 -4,4 l 0,24 c 0,2.216 1.784,4 4,4 l 13.71875,0 C 22.478584,27.272785 27.273681,22.511272 32.5,18.25 l 0,-13.75 c 0,-2.216 -1.784,-4 -4,-4 l -24,0 z"},animation_pathPointer:{tagName:"path",d:"M-15,-65,-15,-55,15,-55,15,-65,0,-95z"},animation_pathSwooshFX:{tagName:"path",d:"m 85,0 c 0,16.617 -4.813944,35.356 -13.131081,48.4508 h 6.099803 c 8.317138,-13.0948 13.13322,-28.5955 13.13322,-45.2124 0,-46.94483 -38.402714,-85.00262 -85.7743869,-85.00262 -1.0218522,0 -2.0373001,0.0241 -3.0506131,0.0589 45.958443,1.59437 82.723058,35.77285 82.723058,81.70532 z"}};function A(e){const t=document.createElementNS(l,e.tagName);for(const n in e)if(e.hasOwnProperty(n)&&"tagName"!==n)if("children"===n){const n=e.children.length;for(let i=0;i<n;++i)t.appendChild(A(e.children[i]))}else 0===n.indexOf("xlink:")?t.setAttributeNS(u,n.substring(6),e[n]):"textContent"===n?t.textContent=e[n]:t.setAttribute(n,e[n]);return t}function T(e,t,n){const i=document.createElementNS(l,"text");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("class","cesium-animation-svgText");const o=document.createElementNS(l,"tspan");return o.textContent=n,i.appendChild(o),i}const w=new i.Z;function E(e,t){const n=t.alpha,i=1-n;return w.red=e.red*i+t.red*n,w.green=e.green*i+t.green*n,w.blue=e.blue*i+t.blue*n,w.toCssColorString()}function S(e,t,n){const i=v[n];return A({tagName:"g",class:"cesium-animation-rectButton",transform:`translate(${e},${t})`,children:[{tagName:"rect",class:"cesium-animation-buttonGlow",width:32,height:32,rx:2,ry:2},{tagName:"rect",class:"cesium-animation-buttonMain",width:32,height:32,rx:4,ry:4},{class:"cesium-animation-buttonPath",id:n,tagName:i.tagName,transform:i.transform,d:i.d},{tagName:"title",textContent:""}]})}function C(e,t){this._viewModel=t,this.svgElement=e,this._enabled=void 0,this._toggled=void 0;const n=this;this._clickFunction=function(){const e=n._viewModel.command;e.canExecute&&e()},e.addEventListener("click",this._clickFunction,!0),this._subscriptions=[(0,c.Z)(t,"toggled",this.setToggled,this),(0,c.Z)(t,"tooltip",this.setTooltip,this),(0,c.Z)(t.command,"canExecute",this.setEnabled,this)]}function x(e,t){if(!(0,r.Z)(e))throw new s.Z("container is required.");if(!(0,r.Z)(t))throw new s.Z("viewModel is required.");e=(0,a.Z)(e),this._viewModel=t,this._container=e,this._centerX=0,this._centerY=0,this._defsElement=void 0,this._svgNode=void 0,this._topG=void 0,this._lastHeight=void 0,this._lastWidth=void 0;const n=e.ownerDocument,i=document.createElement("style");i.textContent=".cesium-animation-rectButton .cesium-animation-buttonGlow { filter: url(#animation_blurred); }.cesium-animation-rectButton .cesium-animation-buttonMain { fill: url(#animation_buttonNormal); }.cesium-animation-buttonToggled .cesium-animation-buttonMain { fill: url(#animation_buttonToggled); }.cesium-animation-rectButton:hover .cesium-animation-buttonMain { fill: url(#animation_buttonHovered); }.cesium-animation-buttonDisabled .cesium-animation-buttonMain { fill: url(#animation_buttonDisabled); }.cesium-animation-shuttleRingG .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshGradient); }.cesium-animation-shuttleRingG:hover .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshHovered); }.cesium-animation-shuttleRingPointer { fill: url(#animation_shuttleRingPointerGradient); }.cesium-animation-shuttleRingPausePointer { fill: url(#animation_shuttleRingPointerPaused); }.cesium-animation-knobOuter { fill: url(#animation_knobOuter); }.cesium-animation-knobInner { fill: url(#animation_knobInner); }",n.head.insertBefore(i,n.head.childNodes[0]);const o=document.createElement("div");o.className="cesium-animation-theme",o.innerHTML='<div class="cesium-animation-themeNormal"></div><div class="cesium-animation-themeHover"></div><div class="cesium-animation-themeSelect"></div><div class="cesium-animation-themeDisabled"></div><div class="cesium-animation-themeKnob"></div><div class="cesium-animation-themePointer"></div><div class="cesium-animation-themeSwoosh"></div><div class="cesium-animation-themeSwooshHover"></div>',this._theme=o,this._themeNormal=o.childNodes[0],this._themeHover=o.childNodes[1],this._themeSelect=o.childNodes[2],this._themeDisabled=o.childNodes[3],this._themeKnob=o.childNodes[4],this._themePointer=o.childNodes[5],this._themeSwoosh=o.childNodes[6],this._themeSwooshHover=o.childNodes[7];const h=document.createElementNS(l,"svg:svg");this._svgNode=h,h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",u);const f=document.createElementNS(l,"g");this._topG=f,this._realtimeSVG=new C(function(e,t,n){const i=v[n],o=v.animation_pathWingButton;return A({tagName:"g",class:"cesium-animation-rectButton",transform:"translate(3,4)",children:[{class:"cesium-animation-buttonGlow",id:"animation_pathWingButton",tagName:o.tagName,d:o.d},{class:"cesium-animation-buttonMain",id:"animation_pathWingButton",tagName:o.tagName,d:o.d},{class:"cesium-animation-buttonPath",id:n,tagName:i.tagName,transform:i.transform,d:i.d},{tagName:"title",textContent:""}]})}(0,0,"animation_pathClock"),t.playRealtimeViewModel),this._playReverseSVG=new C(S(44,99,"animation_pathPlayReverse"),t.playReverseViewModel),this._playForwardSVG=new C(S(124,99,"animation_pathPlay"),t.playForwardViewModel),this._pauseSVG=new C(S(84,99,"animation_pathPause"),t.pauseViewModel);const p=document.createElementNS(l,"g");p.appendChild(this._realtimeSVG.svgElement),p.appendChild(this._playReverseSVG.svgElement),p.appendChild(this._playForwardSVG.svgElement),p.appendChild(this._pauseSVG.svgElement);const m=A({tagName:"circle",class:"cesium-animation-shuttleRingBack",cx:100,cy:100,r:99});this._shuttleRingBackPanel=m;const _=v.animation_pathSwooshFX,g=v.animation_pathPointer,Z=A({tagName:"g",class:"cesium-animation-shuttleRingSwoosh",children:[{tagName:_.tagName,transform:"translate(100,97) scale(-1,1)",id:"animation_pathSwooshFX",d:_.d},{tagName:_.tagName,transform:"translate(100,97)",id:"animation_pathSwooshFX",d:_.d},{tagName:"line",x1:100,y1:8,x2:100,y2:22}]});this._shuttleRingSwooshG=Z,this._shuttleRingPointer=A({class:"cesium-animation-shuttleRingPointer",id:"animation_pathPointer",tagName:g.tagName,d:g.d});const y=A({tagName:"g",transform:"translate(100,100)"});this._knobOuter=A({tagName:"circle",class:"cesium-animation-knobOuter",cx:0,cy:0,r:71});const b=A({tagName:"circle",class:"cesium-animation-knobInner",cx:0,cy:0,r:61});this._knobDate=T(0,-24,""),this._knobTime=T(0,-7,""),this._knobStatus=T(0,-41,"");const w=A({tagName:"circle",class:"cesium-animation-blank",cx:0,cy:0,r:61}),E=document.createElementNS(l,"g");E.setAttribute("class","cesium-animation-shuttleRingG"),e.appendChild(o),f.appendChild(E),f.appendChild(y),f.appendChild(p),E.appendChild(m),E.appendChild(Z),E.appendChild(this._shuttleRingPointer),y.appendChild(this._knobOuter),y.appendChild(b),y.appendChild(this._knobDate),y.appendChild(this._knobTime),y.appendChild(this._knobStatus),y.appendChild(w),h.appendChild(f),e.appendChild(h);const x=this;function I(e){!function(e,t){const n=e._viewModel,i=n.shuttleRingDragging;if(!i||d===e)if("mousedown"===t.type||i&&"mousemove"===t.type||"touchstart"===t.type&&1===t.touches.length||i&&"touchmove"===t.type&&1===t.touches.length){const o=e._centerX,r=e._centerY,s=e._svgNode.getBoundingClientRect();let a,c;if("touchstart"===t.type||"touchmove"===t.type?(a=t.touches[0].clientX,c=t.touches[0].clientY):(a=t.clientX,c=t.clientY),!i&&(a>s.right||a<s.left||c<s.top||c>s.bottom))return;const l=e._shuttleRingPointer.getBoundingClientRect(),u=a-o-s.left,h=c-r-s.top;let f=180*Math.atan2(h,u)/Math.PI+90;f>180&&(f-=360);const p=n.shuttleRingAngle;i||a<l.right&&a>l.left&&c>l.top&&c<l.bottom?(d=e,n.shuttleRingDragging=!0,n.shuttleRingAngle=f):f<p?n.slower():f>p&&n.faster(),t.preventDefault()}else e===d&&(d=void 0),n.shuttleRingDragging=!1}(x,e)}this._mouseCallback=I,m.addEventListener("mousedown",I,!0),m.addEventListener("touchstart",I,!0),Z.addEventListener("mousedown",I,!0),Z.addEventListener("touchstart",I,!0),n.addEventListener("mousemove",I,!0),n.addEventListener("touchmove",I,!0),n.addEventListener("mouseup",I,!0),n.addEventListener("touchend",I,!0),n.addEventListener("touchcancel",I,!0),this._shuttleRingPointer.addEventListener("mousedown",I,!0),this._shuttleRingPointer.addEventListener("touchstart",I,!0),this._knobOuter.addEventListener("mousedown",I,!0),this._knobOuter.addEventListener("touchstart",I,!0);const P=this._knobTime.childNodes[0],D=this._knobDate.childNodes[0],O=this._knobStatus.childNodes[0];let L;this._subscriptions=[(0,c.Z)(t.pauseViewModel,"toggled",(function(e){L!==e&&(L=e,L?x._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPausePointer"):x._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPointer"))})),(0,c.Z)(t,"shuttleRingAngle",(function(e){var t,n,i;t=x._shuttleRingPointer,n=x._knobOuter,i=e,t.setAttribute("transform",`translate(100,100) rotate(${i})`),n.setAttribute("transform",`rotate(${i})`)})),(0,c.Z)(t,"dateLabel",(function(e){D.textContent!==e&&(D.textContent=e)})),(0,c.Z)(t,"timeLabel",(function(e){P.textContent!==e&&(P.textContent=e)})),(0,c.Z)(t,"multiplierLabel",(function(e){O.textContent!==e&&(O.textContent=e)}))],this.applyThemeChanges(),this.resize()}C.prototype.destroy=function(){this.svgElement.removeEventListener("click",this._clickFunction,!0);const e=this._subscriptions;for(let t=0,n=e.length;t<n;t++)e[t].dispose();(0,o.Z)(this)},C.prototype.isDestroyed=function(){return!1},C.prototype.setEnabled=function(e){if(this._enabled!==e){if(this._enabled=e,!e)return void this.svgElement.setAttribute("class","cesium-animation-buttonDisabled");if(this._toggled)return void this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled");this.svgElement.setAttribute("class","cesium-animation-rectButton")}},C.prototype.setToggled=function(e){this._toggled!==e&&(this._toggled=e,this._enabled&&(e?this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled"):this.svgElement.setAttribute("class","cesium-animation-rectButton")))},C.prototype.setTooltip=function(e){this.svgElement.getElementsByTagName("title")[0].textContent=e},Object.defineProperties(x.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){(0,r.Z)(this._observer)&&(this._observer.disconnect(),this._observer=void 0);const e=this._container.ownerDocument,t=this._mouseCallback;this._shuttleRingBackPanel.removeEventListener("mousedown",t,!0),this._shuttleRingBackPanel.removeEventListener("touchstart",t,!0),this._shuttleRingSwooshG.removeEventListener("mousedown",t,!0),this._shuttleRingSwooshG.removeEventListener("touchstart",t,!0),e.removeEventListener("mousemove",t,!0),e.removeEventListener("touchmove",t,!0),e.removeEventListener("mouseup",t,!0),e.removeEventListener("touchend",t,!0),e.removeEventListener("touchcancel",t,!0),this._shuttleRingPointer.removeEventListener("mousedown",t,!0),this._shuttleRingPointer.removeEventListener("touchstart",t,!0),this._knobOuter.removeEventListener("mousedown",t,!0),this._knobOuter.removeEventListener("touchstart",t,!0),this._container.removeChild(this._svgNode),this._container.removeChild(this._theme),this._realtimeSVG.destroy(),this._playReverseSVG.destroy(),this._playForwardSVG.destroy(),this._pauseSVG.destroy();const n=this._subscriptions;for(let e=0,t=n.length;e<t;e++)n[e].dispose();return(0,o.Z)(this)},x.prototype.resize=function(){const e=this._container.clientWidth,t=this._container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;const n=this._svgNode,i=200,o=132;let r=e,s=t;0===e&&0===t?(r=i,s=o):0===e?(s=t,r=i*(t/o)):0===t&&(r=e,s=o*(e/i));const a=r/i,c=s/o;n.style.cssText=`width: ${r}px; height: ${s}px; position: absolute; bottom: 0; left: 0; overflow: hidden;`,n.setAttribute("width",r),n.setAttribute("height",s),n.setAttribute("viewBox",`0 0 ${r} ${s}`),this._topG.setAttribute("transform",`scale(${a},${c})`),this._centerX=Math.max(1,100*a),this._centerY=Math.max(1,100*c),this._lastHeight=e,this._lastWidth=t},x.prototype.applyThemeChanges=function(){const e=this._container.ownerDocument;if(!e.body.contains(this._container)){if((0,r.Z)(this._observer))return;const t=this;return t._observer=new MutationObserver((function(){e.body.contains(t._container)&&(t._observer.disconnect(),t._observer=void 0,t.applyThemeChanges())})),void t._observer.observe(e,{childList:!0,subtree:!0})}const t=b(this._themeNormal),n=b(this._themeHover),i=b(this._themeSelect),o=b(this._themeDisabled),s=b(this._themeKnob),a=b(this._themePointer),c=b(this._themeSwoosh),l=b(this._themeSwooshHover),u=A({tagName:"defs",children:[{id:"animation_buttonNormal",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":E(t,h)},{tagName:"stop",offset:"12%","stop-color":E(t,f)},{tagName:"stop",offset:"46%","stop-color":E(t,p)},{tagName:"stop",offset:"81%","stop-color":E(t,m)}]},{id:"animation_buttonHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":E(n,h)},{tagName:"stop",offset:"12%","stop-color":E(n,f)},{tagName:"stop",offset:"46%","stop-color":E(n,p)},{tagName:"stop",offset:"81%","stop-color":E(n,m)}]},{id:"animation_buttonToggled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":E(i,h)},{tagName:"stop",offset:"12%","stop-color":E(i,f)},{tagName:"stop",offset:"46%","stop-color":E(i,p)},{tagName:"stop",offset:"81%","stop-color":E(i,m)}]},{id:"animation_buttonDisabled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":E(o,_)},{tagName:"stop",offset:"75%","stop-color":E(o,g)}]},{id:"animation_blurred",tagName:"filter",width:"200%",height:"200%",x:"-50%",y:"-50%",children:[{tagName:"feGaussianBlur",stdDeviation:4,in:"SourceGraphic"}]},{id:"animation_shuttleRingSwooshGradient",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":c.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":c.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":c.toCssColorString()}]},{id:"animation_shuttleRingSwooshHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":l.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":l.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":l.toCssColorString()}]},{id:"animation_shuttleRingPointerGradient",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":a.toCssColorString()},{tagName:"stop",offset:"40%","stop-color":a.toCssColorString()},{tagName:"stop",offset:"60%","stop-color":E(a,y)},{tagName:"stop",offset:"100%","stop-color":E(a,y)}]},{id:"animation_shuttleRingPointerPaused",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":"#CCC"},{tagName:"stop",offset:"40%","stop-color":"#CCC"},{tagName:"stop",offset:"60%","stop-color":"#555"},{tagName:"stop",offset:"100%","stop-color":"#555"}]},{id:"animation_knobOuter",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":E(s,h)},{tagName:"stop",offset:"60%","stop-color":E(s,Z)},{tagName:"stop",offset:"85%","stop-color":E(s,f)}]},{id:"animation_knobInner",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":E(s,Z)},{tagName:"stop",offset:"60%","stop-color":E(s,h)},{tagName:"stop",offset:"85%","stop-color":E(s,m)}]}]});(0,r.Z)(this._defsElement)?this._svgNode.replaceChild(u,this._defsElement):this._svgNode.appendChild(u),this._defsElement=u};const I=x},716013:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var i=n(486598),o=n(501e3),r=n(11020),s=n(765153),a=n(140942),c=n(791364),l=n(689460),u=n(818881),d=n(119277);const h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=15,p=105;function m(e,t){return e-t}function _(e,t){const n=(0,i.Z)(t,e,m);return n<0?~n:n}function g(e){if(!(0,r.Z)(e))throw new s.Z("clockViewModel is required.");const t=this;this._clockViewModel=e,this._allShuttleRingTicks=[],this._dateFormatter=g.defaultDateFormatter,this._timeFormatter=g.defaultTimeFormatter,this.shuttleRingDragging=!1,this.snapToTicks=!1,l.Z.track(this,["_allShuttleRingTicks","_dateFormatter","_timeFormatter","shuttleRingDragging","snapToTicks"]),this._sortedFilteredPositiveTicks=[],this.setShuttleRingTicks(g.defaultTicks),this.timeLabel=void 0,l.Z.defineProperty(this,"timeLabel",(function(){return t._timeFormatter(t._clockViewModel.currentTime,t)})),this.dateLabel=void 0,l.Z.defineProperty(this,"dateLabel",(function(){return t._dateFormatter(t._clockViewModel.currentTime,t)})),this.multiplierLabel=void 0,l.Z.defineProperty(this,"multiplierLabel",(function(){const e=t._clockViewModel;if(e.clockStep===o.Z.SYSTEM_CLOCK)return"Today";const n=e.multiplier;return n%1==0?`${n.toFixed(0)}x`:`${n.toFixed(3).replace(/0{0,3}$/,"")}x`})),this.shuttleRingAngle=void 0,l.Z.defineProperty(this,"shuttleRingAngle",{get:function(){return function(e,t,n){if(n.clockStep===o.Z.SYSTEM_CLOCK)return f;if(Math.abs(e)<=1)return e*f;const i=t[t.length-1];e>i?e=i:e<-i&&(e=-i);let r,s;return e>0?(r=Math.log(i),s=(r-0)/90,(Math.log(e)-0)/s+15):(r=Math.log(-t[0]),s=(r-0)/90,-((Math.log(Math.abs(e))-0)/s+15))}(e.multiplier,t._allShuttleRingTicks,e)},set:function(e){e=Math.max(Math.min(e,p),-105);const n=t._allShuttleRingTicks,i=t._clockViewModel;if(i.clockStep=o.Z.SYSTEM_CLOCK_MULTIPLIER,Math.abs(e)===p)return void(i.multiplier=e>0?n[n.length-1]:n[0]);let r=function(e,t){if(Math.abs(e)<=f)return e/f;let n,i;return e>0?(n=Math.log(t[t.length-1]),i=(n-0)/90,Math.exp(0+i*(e-15))):(n=Math.log(-t[0]),i=(n-0)/90,-Math.exp(0+i*(Math.abs(e)-15)))}(e,n);if(t.snapToTicks)r=n[_(r,n)];else if(0!==r){const e=Math.abs(r);if(e>100){const t=e.toFixed(0).length-2,n=Math.pow(10,t);r=Math.round(r/n)*n|0}else e>f?r=Math.round(r):e>1?r=+r.toFixed(1):e>0&&(r=+r.toFixed(2))}i.multiplier=r}}),this._canAnimate=void 0,l.Z.defineProperty(this,"_canAnimate",(function(){const e=t._clockViewModel,n=e.clockRange;if(t.shuttleRingDragging||n===a.Z.UNBOUNDED)return!0;const i=e.multiplier,o=e.currentTime,r=e.startTime;let s=!1;if(n===a.Z.LOOP_STOP)s=c.Z.greaterThan(o,r)||o.equals(r)&&i>0;else{const t=e.stopTime;s=c.Z.greaterThan(o,r)&&c.Z.lessThan(o,t)||o.equals(r)&&i>0||o.equals(t)&&i<0}return s||(e.shouldAnimate=!1),s})),this._isSystemTimeAvailable=void 0,l.Z.defineProperty(this,"_isSystemTimeAvailable",(function(){const e=t._clockViewModel;if(e.clockRange===a.Z.UNBOUNDED)return!0;const n=e.systemTime;return c.Z.greaterThanOrEquals(n,e.startTime)&&c.Z.lessThanOrEquals(n,e.stopTime)})),this._isAnimating=void 0,l.Z.defineProperty(this,"_isAnimating",(function(){return t._clockViewModel.shouldAnimate&&(t._canAnimate||t.shuttleRingDragging)}));const n=(0,u.Z)((function(){const e=t._clockViewModel;e.shouldAnimate?e.shouldAnimate=!1:t._canAnimate&&(e.shouldAnimate=!0)}));this._pauseViewModel=new d.Z(n,{toggled:l.Z.computed((function(){return!t._isAnimating})),tooltip:"Pause"});const i=(0,u.Z)((function(){const e=t._clockViewModel,n=e.multiplier;n>0&&(e.multiplier=-n),e.shouldAnimate=!0}));this._playReverseViewModel=new d.Z(i,{toggled:l.Z.computed((function(){return t._isAnimating&&e.multiplier<0})),tooltip:"Play Reverse"});const h=(0,u.Z)((function(){const e=t._clockViewModel,n=e.multiplier;n<0&&(e.multiplier=-n),e.shouldAnimate=!0}));this._playForwardViewModel=new d.Z(h,{toggled:l.Z.computed((function(){return t._isAnimating&&e.multiplier>0&&e.clockStep!==o.Z.SYSTEM_CLOCK})),tooltip:"Play Forward"});const m=(0,u.Z)((function(){t._clockViewModel.clockStep=o.Z.SYSTEM_CLOCK}),l.Z.getObservable(this,"_isSystemTimeAvailable"));this._playRealtimeViewModel=new d.Z(m,{toggled:l.Z.computed((function(){return e.clockStep===o.Z.SYSTEM_CLOCK})),tooltip:l.Z.computed((function(){return t._isSystemTimeAvailable?"Today (real-time)":"Current time not in range"}))}),this._slower=(0,u.Z)((function(){const e=t._clockViewModel,n=t._allShuttleRingTicks,i=_(e.multiplier,n)-1;i>=0&&(e.multiplier=n[i])})),this._faster=(0,u.Z)((function(){const e=t._clockViewModel,n=t._allShuttleRingTicks,i=_(e.multiplier,n)+1;i<n.length&&(e.multiplier=n[i])}))}g.defaultDateFormatter=function(e,t){const n=c.Z.toGregorianDate(e);return`${h[n.month-1]} ${n.day} ${n.year}`},g.defaultTicks=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800],g.defaultTimeFormatter=function(e,t){const n=c.Z.toGregorianDate(e),i=Math.round(n.millisecond);return Math.abs(t._clockViewModel.multiplier)<1?`${n.hour.toString().padStart(2,"0")}:${n.minute.toString().padStart(2,"0")}:${n.second.toString().padStart(2,"0")}.${i.toString().padStart(3,"0")}`:`${n.hour.toString().padStart(2,"0")}:${n.minute.toString().padStart(2,"0")}:${n.second.toString().padStart(2,"0")} UTC`},g.prototype.getShuttleRingTicks=function(){return this._sortedFilteredPositiveTicks.slice(0)},g.prototype.setShuttleRingTicks=function(e){if(!(0,r.Z)(e))throw new s.Z("positiveTicks is required.");let t,n,i;const o={},a=this._sortedFilteredPositiveTicks;for(a.length=0,t=0,n=e.length;t<n;++t)i=e[t],o.hasOwnProperty(i)||(o[i]=!0,a.push(i));a.sort(m);const c=[];for(n=a.length,t=n-1;t>=0;--t)i=a[t],0!==i&&c.push(-i);Array.prototype.push.apply(c,a),this._allShuttleRingTicks=c},Object.defineProperties(g.prototype,{slower:{get:function(){return this._slower}},faster:{get:function(){return this._faster}},clockViewModel:{get:function(){return this._clockViewModel}},pauseViewModel:{get:function(){return this._pauseViewModel}},playReverseViewModel:{get:function(){return this._playReverseViewModel}},playForwardViewModel:{get:function(){return this._playForwardViewModel}},playRealtimeViewModel:{get:function(){return this._playRealtimeViewModel}},dateFormatter:{get:function(){return this._dateFormatter},set:function(e){if("function"!=typeof e)throw new s.Z("dateFormatter must be a function");this._dateFormatter=e}},timeFormatter:{get:function(){return this._timeFormatter},set:function(e){if("function"!=typeof e)throw new s.Z("timeFormatter must be a function");this._timeFormatter=e}}}),g._maxShuttleRingAngle=p,g._realtimeShuttleRingAngle=f;const Z=g},473549:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(11020),o=n(765153),r=n(902299),s=n(95296),a=n(722313),c=n(689460),l=n(567404);function u(e,t){if(!(0,i.Z)(e))throw new o.Z("container is required.");e=(0,r.Z)(e);const n=new l.Z(t),a=document.createElement("button");a.type="button",a.className="cesium-button cesium-toolbar-button",a.setAttribute("data-bind","attr: { title: buttonTooltip },click: toggleDropDown"),e.appendChild(a);const u=document.createElement("img");u.setAttribute("draggable","false"),u.className="cesium-baseLayerPicker-selected",u.setAttribute("data-bind","attr: { src: buttonImageUrl }, visible: !!buttonImageUrl"),a.appendChild(u);const d=document.createElement("div");d.className="cesium-baseLayerPicker-dropDown",d.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-dropDown-visible" : dropDownVisible }'),e.appendChild(d);const h=document.createElement("div");h.className="cesium-baseLayerPicker-sectionTitle",h.setAttribute("data-bind","visible: imageryProviderViewModels.length > 0"),h.innerHTML="Imagery",d.appendChild(h);const f=document.createElement("div");f.className="cesium-baseLayerPicker-section",f.setAttribute("data-bind","foreach: _imageryProviders"),d.appendChild(f);const p=document.createElement("div");p.className="cesium-baseLayerPicker-category",f.appendChild(p);const m=document.createElement("div");m.className="cesium-baseLayerPicker-categoryTitle",m.setAttribute("data-bind","text: name"),p.appendChild(m);const _=document.createElement("div");_.className="cesium-baseLayerPicker-choices",_.setAttribute("data-bind","foreach: providers"),p.appendChild(_);const g=document.createElement("div");g.className="cesium-baseLayerPicker-item",g.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedImagery },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedImagery = $data; }'),_.appendChild(g);const Z=document.createElement("img");Z.className="cesium-baseLayerPicker-itemIcon",Z.setAttribute("data-bind","attr: { src: iconUrl }"),Z.setAttribute("draggable","false"),g.appendChild(Z);const y=document.createElement("div");y.className="cesium-baseLayerPicker-itemLabel",y.setAttribute("data-bind","text: name"),g.appendChild(y);const b=document.createElement("div");b.className="cesium-baseLayerPicker-sectionTitle",b.setAttribute("data-bind","visible: terrainProviderViewModels.length > 0"),b.innerHTML="Terrain",d.appendChild(b);const v=document.createElement("div");v.className="cesium-baseLayerPicker-section",v.setAttribute("data-bind","foreach: _terrainProviders"),d.appendChild(v);const A=document.createElement("div");A.className="cesium-baseLayerPicker-category",v.appendChild(A);const T=document.createElement("div");T.className="cesium-baseLayerPicker-categoryTitle",T.setAttribute("data-bind","text: name"),A.appendChild(T);const w=document.createElement("div");w.className="cesium-baseLayerPicker-choices",w.setAttribute("data-bind","foreach: providers"),A.appendChild(w);const E=document.createElement("div");E.className="cesium-baseLayerPicker-item",E.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedTerrain },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedTerrain = $data; }'),w.appendChild(E);const S=document.createElement("img");S.className="cesium-baseLayerPicker-itemIcon",S.setAttribute("data-bind","attr: { src: iconUrl }"),S.setAttribute("draggable","false"),E.appendChild(S);const C=document.createElement("div");C.className="cesium-baseLayerPicker-itemLabel",C.setAttribute("data-bind","text: name"),E.appendChild(C),c.Z.applyBindings(n,a),c.Z.applyBindings(n,d),this._viewModel=n,this._container=e,this._element=a,this._dropPanel=d,this._closeDropDown=function(e){a.contains(e.target)||d.contains(e.target)||(n.dropDownVisible=!1)},s.Z.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return s.Z.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),c.Z.cleanNode(this._element),c.Z.cleanNode(this._dropPanel),this._container.removeChild(this._element),this._container.removeChild(this._dropPanel),(0,a.Z)(this)};const d=u},567404:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(234146),o=n(11020),r=n(765153),s=n(18929),a=n(728779),c=n(250305),l=n(689460),u=n(818881);function d(e){const t=(e=(0,i.Z)(e,i.Z.EMPTY_OBJECT)).globe,n=(0,i.Z)(e.imageryProviderViewModels,[]),d=(0,i.Z)(e.terrainProviderViewModels,[]);if(!(0,o.Z)(t))throw new r.Z("globe is required");this._globe=t,this.imageryProviderViewModels=n.slice(0),this.terrainProviderViewModels=d.slice(0),this.dropDownVisible=!1,l.Z.track(this,["imageryProviderViewModels","terrainProviderViewModels","dropDownVisible"]);const h=l.Z.getObservable(this,"imageryProviderViewModels"),f=l.Z.pureComputed((function(){const e=h(),t={};let n;for(n=0;n<e.length;n++){const i=e[n],r=i.category;(0,o.Z)(t[r])?t[r].push(i):t[r]=[i]}const i=Object.keys(t),r=[];for(n=0;n<i.length;n++){const e=i[n];r.push({name:e,providers:t[e]})}return r}));this._imageryProviders=f;const p=l.Z.getObservable(this,"terrainProviderViewModels"),m=l.Z.pureComputed((function(){const e=p(),t={};let n;for(n=0;n<e.length;n++){const i=e[n],r=i.category;(0,o.Z)(t[r])?t[r].push(i):t[r]=[i]}const i=Object.keys(t),r=[];for(n=0;n<i.length;n++){const e=i[n];r.push({name:e,providers:t[e]})}return r}));this._terrainProviders=m,this.buttonTooltip=void 0,l.Z.defineProperty(this,"buttonTooltip",(function(){const e=this.selectedImagery,t=this.selectedTerrain,n=(0,o.Z)(e)?e.name:void 0,i=(0,o.Z)(t)?t.name:void 0;return(0,o.Z)(n)&&(0,o.Z)(i)?`${n}\n${i}`:(0,o.Z)(n)?n:i})),this.buttonImageUrl=void 0,l.Z.defineProperty(this,"buttonImageUrl",(function(){const e=this.selectedImagery;if((0,o.Z)(e))return e.iconUrl})),this.selectedImagery=void 0;const _=l.Z.observable();this._currentImageryLayers=[],l.Z.defineProperty(this,"selectedImagery",{get:function(){return _()},set:function(e){if(_()===e)return void(this.dropDownVisible=!1);let t;const n=this._currentImageryLayers,i=n.length,r=this._globe.imageryLayers;let a=!1;for(t=0;t<i;t++){const e=r.length;for(let i=0;i<e;i++){const e=r.get(i);if(e===n[t]){r.remove(e),a=!0;break}}}if((0,o.Z)(e)){const n=e.creationCommand();if(Array.isArray(n)){const e=n.length;for(this._currentImageryLayers=[],t=e-1;t>=0;t--){const e=s.Z.fromProviderAsync(n[t]);r.add(e,0),this._currentImageryLayers.push(e)}}else{this._currentImageryLayers=[];const t=s.Z.fromProviderAsync(n);if(t.name=e.name,a)r.add(t,0);else{const e=r.get(0);(0,o.Z)(e)&&r.remove(e),r.add(t,0)}this._currentImageryLayers.push(t)}}_(e),this.dropDownVisible=!1}}),this.selectedTerrain=void 0;const g=l.Z.observable();l.Z.defineProperty(this,"selectedTerrain",{get:function(){return g()},set:function(e){if(g()===e)return void(this.dropDownVisible=!1);let t;(0,o.Z)(e)&&(t=e.creationCommand());let n=!1;const i=this._globe.terrainProviderChanged.addEventListener((()=>{n=!0,i()})),r=new a.Z(Promise.resolve(t)).readyEvent.addEventListener((e=>{n||(this._globe.depthTestAgainstTerrain=!(e instanceof c.Z),this._globe.terrainProvider=e,r())}));g(e),this.dropDownVisible=!1}});const Z=this;this._toggleDropDown=(0,u.Z)((function(){Z.dropDownVisible=!Z.dropDownVisible})),this.selectedImagery=(0,i.Z)(e.selectedImageryProviderViewModel,n[0]),this.selectedTerrain=(0,i.Z)(e.selectedTerrainProviderViewModel,d[0])}Object.defineProperties(d.prototype,{toggleDropDown:{get:function(){return this._toggleDropDown}},globe:{get:function(){return this._globe}}});const h=d},909463:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(11020),o=n(765153),r=n(234146),s=n(689460),a=n(818881);function c(e){if(!(0,i.Z)(e.name))throw new o.Z("options.name is required.");if(!(0,i.Z)(e.tooltip))throw new o.Z("options.tooltip is required.");if(!(0,i.Z)(e.iconUrl))throw new o.Z("options.iconUrl is required.");if("function"!=typeof e.creationFunction)throw new o.Z("options.creationFunction is required.");let t=e.creationFunction;(0,i.Z)(t.canExecute)||(t=(0,a.Z)(t)),this._creationCommand=t,this.name=e.name,this.tooltip=e.tooltip,this.iconUrl=e.iconUrl,this._category=(0,r.Z)(e.category,""),s.Z.track(this,["name","tooltip","iconUrl"])}Object.defineProperties(c.prototype,{creationCommand:{get:function(){return this._creationCommand}},category:{get:function(){return this._category}}});const l=c},759504:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(949225),o=n(272802),r=n(741741),s=n(565756),a=n(680844),c=n(586360),l=n(588632),u=n(619233),d=n(909463);const h=function(){const e=[];return e.push(new d.Z({name:"Bing Maps Aerial",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/bingAerial.png"),tooltip:"Bing Maps aerial imagery, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.Z)({style:r.Z.AERIAL})}})),e.push(new d.Z({name:"Bing Maps Aerial with Labels",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/bingAerialLabels.png"),tooltip:"Bing Maps aerial imagery with labels, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.Z)({style:r.Z.AERIAL_WITH_LABELS})}})),e.push(new d.Z({name:"Bing Maps Roads",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/bingRoads.png"),tooltip:"Bing Maps standard road maps, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.Z)({style:r.Z.ROAD})}})),e.push(new d.Z({name:"ArcGIS World Imagery",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldImagery.png"),tooltip:"ArcGIS World Imagery provides one meter or better satellite and aerial imagery in many parts of the world and lower resolution satellite imagery worldwide. The map includes 15m TerraColor imagery at small and mid-scales (~1:591M down to ~1:288k) for the world. The map features Maxar imagery at 0.3m resolution for select metropolitan areas around the world, 0.5m resolution across the United States and parts of Western Europe, and 1m resolution imagery across the rest of the world. In addition to commercial sources, the World Imagery map features high-resolution aerial photography contributed by the GIS User Community. This imagery ranges from 0.3m to 0.03m resolution (down to ~1:280 nin select communities). For more information on this map, including the terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=10df2279f9684e4a9f6a7f08febac2a9",category:"Other",creationFunction:function(){return s.Z.fromBasemapType(a.Z.SATELLITE,{enablePickFeatures:!1})}})),e.push(new d.Z({name:"ArcGIS World Hillshade",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldHillshade.png"),tooltip:"ArcGIS World Hillshade map portrays elevation as an artistic hillshade. This map is designed to be used as a backdrop for topographical, soil, hydro, landcover or other outdoor recreational maps. The map was compiled from a variety of sources from several data providers. The basemap has global coverage down to a scale of ~1:72k. In select areas of the United States and Europe, coverage is available down to ~1:9k. For more information on this map, including the terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=1b243539f4514b6ba35e7d995890db1d",category:"Other",creationFunction:function(){return s.Z.fromBasemapType(a.Z.HILLSHADE,{enablePickFeatures:!1})}})),e.push(new d.Z({name:"Esri World Ocean",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldOcean.png"),tooltip:"ArcGIS World Ocean map is designed to be used as a base map by marine GIS professionals and as a reference map by anyone interested in ocean data.  The base map features marine bathymetry. Land features include inland waters and roads overlaid on land cover and shaded relief imagery. The map was compiled from a variety of best available sources from several data providers, including General Bathymetric Chart of the Oceans GEBCO_08 Grid, National Oceanic and Atmospheric Administration (NOAA), and National Geographic, Garmin, HERE, Geonames.org, and Esri, and various other contributors. The base map currently provides coverage for the world down to a scale of ~1:577k, and coverage down to 1:72k in US coastal areas, and various other areas. Coverage down to ~ 1:9k is available limited areas based on regional hydrographic survey data. The base map was designed and developed by Esri. For more information on this map, including our terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=1e126e7520f9466c9ca28b8f28b5e500",category:"Other",creationFunction:function(){return s.Z.fromBasemapType(a.Z.OCEANS,{enablePickFeatures:!1})}})),e.push(new d.Z({name:"OpenStreetMap",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/openStreetMap.png"),tooltip:"OpenStreetMap (OSM) is a collaborative project to create a free editable map of the world.\nhttp://www.openstreetmap.org",category:"Other",creationFunction:function(){return new c.Z({url:"https://a.tile.openstreetmap.org/"})}})),e.push(new d.Z({name:"Stamen Watercolor",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/stamenWatercolor.png"),tooltip:"Reminiscent of hand drawn maps, Stamen watercolor maps apply raster effect area washes and organic edges over a paper texture to add warm pop to any map.\nhttp://maps.stamen.com",category:"Other",creationFunction:function(){return new c.Z({url:"https://stamen-tiles.a.ssl.fastly.net/watercolor/",credit:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA."})}})),e.push(new d.Z({name:"Stamen Toner",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/stamenToner.png"),tooltip:"A high contrast black and white map.\nhttp://maps.stamen.com",category:"Other",creationFunction:function(){return new c.Z({url:"https://stamen-tiles.a.ssl.fastly.net/toner/",credit:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA."})}})),e.push(new d.Z({name:"Sentinel-2",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/sentinel-2.png"),tooltip:"Sentinel-2 cloudless by EOX IT Services GmbH (Contains modified Copernicus Sentinel data 2016 and 2017).",category:"Cesium ion",creationFunction:function(){return l.Z.fromAssetId(3954)}})),e.push(new d.Z({name:"Blue Marble",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/blueMarble.png"),tooltip:"Blue Marble Next Generation July, 2004 imagery from NASA.",category:"Cesium ion",creationFunction:function(){return l.Z.fromAssetId(3845)}})),e.push(new d.Z({name:"Earth at night",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/earthAtNight.png"),tooltip:"The Earth at night, also known as The Black Marble, is a 500 meter resolution global composite imagery layer released by NASA.",category:"Cesium ion",creationFunction:function(){return l.Z.fromAssetId(3812)}})),e.push(new d.Z({name:"Natural EarthII",iconUrl:(0,i.Z)("Widgets/Images/ImageryProviders/naturalEarthII.png"),tooltip:"Natural Earth II, darkened for contrast.\nhttp://www.naturalearthdata.com/",category:"Cesium ion",creationFunction:function(){return u.Z.fromUrl((0,i.Z)("Assets/Textures/NaturalEarthII"))}})),e}},746574:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(949225),o=n(250305),r=n(877290),s=n(909463);const a=function(){const e=[];return e.push(new s.Z({name:"WGS84 Ellipsoid",iconUrl:(0,i.Z)("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84 standard ellipsoid, also known as EPSG:4326",category:"Cesium ion",creationFunction:function(){return new o.Z}})),e.push(new s.Z({name:"Cesium World Terrain",iconUrl:(0,i.Z)("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"High-resolution global terrain tileset curated from several datasources and hosted by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,r.Z)({requestWaterMask:!0,requestVertexNormals:!0})}})),e}},653186:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(249702),r=n(700234),s=n(791364),a=n(722313),c=n(689460);function l(e){(0,i.Z)(e)||(e=new o.Z),this._clock=e,this._eventHelper=new r.Z,this._eventHelper.add(e.onTick,this.synchronize,this),this.systemTime=c.Z.observable(s.Z.now()),this.systemTime.equalityComparer=s.Z.equals,this.startTime=c.Z.observable(e.startTime),this.startTime.equalityComparer=s.Z.equals,this.startTime.subscribe((function(t){e.startTime=t,this.synchronize()}),this),this.stopTime=c.Z.observable(e.stopTime),this.stopTime.equalityComparer=s.Z.equals,this.stopTime.subscribe((function(t){e.stopTime=t,this.synchronize()}),this),this.currentTime=c.Z.observable(e.currentTime),this.currentTime.equalityComparer=s.Z.equals,this.currentTime.subscribe((function(t){e.currentTime=t,this.synchronize()}),this),this.multiplier=c.Z.observable(e.multiplier),this.multiplier.subscribe((function(t){e.multiplier=t,this.synchronize()}),this),this.clockStep=c.Z.observable(e.clockStep),this.clockStep.subscribe((function(t){e.clockStep=t,this.synchronize()}),this),this.clockRange=c.Z.observable(e.clockRange),this.clockRange.subscribe((function(t){e.clockRange=t,this.synchronize()}),this),this.canAnimate=c.Z.observable(e.canAnimate),this.canAnimate.subscribe((function(t){e.canAnimate=t,this.synchronize()}),this),this.shouldAnimate=c.Z.observable(e.shouldAnimate),this.shouldAnimate.subscribe((function(t){e.shouldAnimate=t,this.synchronize()}),this),c.Z.track(this,["systemTime","startTime","stopTime","currentTime","multiplier","clockStep","clockRange","canAnimate","shouldAnimate"])}Object.defineProperties(l.prototype,{clock:{get:function(){return this._clock}}}),l.prototype.synchronize=function(){const e=this._clock;this.systemTime=s.Z.now(),this.startTime=e.startTime,this.stopTime=e.stopTime,this.currentTime=e.currentTime,this.multiplier=e.multiplier,this.clockStep=e.clockStep,this.clockRange=e.clockRange,this.canAnimate=e.canAnimate,this.shouldAnimate=e.shouldAnimate},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){this._eventHelper.removeAll(),(0,a.Z)(this)};const u=l},642178:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(765153),r=n(902299),s=n(722313),a=n(689460),c=n(473158);function l(e,t){if(!(0,i.Z)(e))throw new o.Z("container is required.");e=(0,r.Z)(e);const n=new c.Z(t,e);n._exitFullScreenPath="M 104.34375 17.5625 L 83.5 38.4375 L 83.40625 18.21875 L 76.125 25.5 L 76.09375 51.78125 L 102.3125 51.8125 L 102.3125 51.78125 L 109.625 44.5 L 89.1875 44.40625 L 110.1875 23.40625 L 104.34375 17.5625 z M 23.75 17.59375 L 17.90625 23.4375 L 38.90625 44.4375 L 18.5 44.53125 L 25.78125 51.8125 L 52 51.78125 L 51.96875 25.53125 L 44.6875 18.25 L 44.625 38.46875 L 23.75 17.59375 z M 25.6875 76.03125 L 18.375 83.3125 L 38.78125 83.40625 L 17.8125 104.40625 L 23.625 110.25 L 44.5 89.375 L 44.59375 109.59375 L 51.875 102.3125 L 51.875 76.0625 L 25.6875 76.03125 z M 102.375 76.15625 L 76.15625 76.1875 L 76.1875 102.4375 L 83.46875 109.71875 L 83.5625 89.53125 L 104.40625 110.375 L 110.25 104.53125 L 89.25 83.53125 L 109.6875 83.46875 L 102.375 76.15625 z",n._enterFullScreenPath="M 83.96875 17.5625 L 83.96875 17.59375 L 76.65625 24.875 L 97.09375 24.96875 L 76.09375 45.96875 L 81.9375 51.8125 L 102.78125 30.9375 L 102.875 51.15625 L 110.15625 43.875 L 110.1875 17.59375 L 83.96875 17.5625 z M 44.125 17.59375 L 17.90625 17.625 L 17.9375 43.90625 L 25.21875 51.1875 L 25.3125 30.96875 L 46.15625 51.8125 L 52 45.96875 L 31 25 L 51.4375 24.90625 L 44.125 17.59375 z M 46.0625 76.03125 L 25.1875 96.875 L 25.09375 76.65625 L 17.8125 83.9375 L 17.8125 110.21875 L 44 110.25 L 51.3125 102.9375 L 30.90625 102.84375 L 51.875 81.875 L 46.0625 76.03125 z M 82 76.15625 L 76.15625 82 L 97.15625 103 L 76.71875 103.0625 L 84.03125 110.375 L 110.25 110.34375 L 110.21875 84.0625 L 102.9375 76.8125 L 102.84375 97 L 82 76.15625 z";const s=document.createElement("button");s.type="button",s.className="cesium-button cesium-fullscreenButton",s.setAttribute("data-bind","attr: { title: tooltip },click: command,enable: isFullscreenEnabled,cesiumSvgPath: { path: isFullscreen ? _exitFullScreenPath : _enterFullScreenPath, width: 128, height: 128 }"),e.appendChild(s),a.Z.applyBindings(n,s),this._container=e,this._viewModel=n,this._element=s}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._viewModel.destroy(),a.Z.cleanNode(this._element),this._container.removeChild(this._element),(0,s.Z)(this)};const u=l},473158:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(11020),o=n(902299),r=n(289325),s=n(234146),a=n(765153),c=n(722313),l=n(689460),u=n(818881);function d(e,t){(0,i.Z)(t)||(t=document.body),t=(0,o.Z)(t);const n=this,a=l.Z.observable(r.Z.fullscreen),c=l.Z.observable(r.Z.enabled),d=t.ownerDocument;this.isFullscreen=void 0,l.Z.defineProperty(this,"isFullscreen",{get:function(){return a()}}),this.isFullscreenEnabled=void 0,l.Z.defineProperty(this,"isFullscreenEnabled",{get:function(){return c()},set:function(e){c(e&&r.Z.enabled)}}),this.tooltip=void 0,l.Z.defineProperty(this,"tooltip",(function(){return this.isFullscreenEnabled?a()?"Exit full screen":"Full screen":"Full screen unavailable"})),this._command=(0,u.Z)((function(){r.Z.fullscreen?r.Z.exitFullscreen():r.Z.requestFullscreen(n._fullscreenElement)}),l.Z.getObservable(this,"isFullscreenEnabled")),this._fullscreenElement=(0,s.Z)((0,o.Z)(e),d.body),this._callback=function(){a(r.Z.fullscreen)},d.addEventListener(r.Z.changeEventName,this._callback)}Object.defineProperties(d.prototype,{fullscreenElement:{get:function(){return this._fullscreenElement},set:function(e){if(!(e instanceof Element))throw new a.Z("value must be a valid Element.");this._fullscreenElement=e}},command:{get:function(){return this._command}}}),d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){document.removeEventListener(r.Z.changeEventName,this._callback),(0,c.Z)(this)};const h=d},257766:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(11020),o=n(765153),r=n(902299),s=n(95296),a=n(722313),c=n(689460),l=n(188395);function u(e){if(!(0,i.Z)(e)||!(0,i.Z)(e.container))throw new o.Z("options.container is required.");if(!(0,i.Z)(e.scene))throw new o.Z("options.scene is required.");const t=(0,r.Z)(e.container),n=new l.Z(e);n._startSearchPath="M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z",n._stopSearchPath="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z";const a=document.createElement("form");a.setAttribute("data-bind","submit: search");const u=document.createElement("input");u.type="search",u.className="cesium-geocoder-input",u.setAttribute("placeholder","Enter an address or landmark..."),u.setAttribute("data-bind",'textInput: searchText,disable: isSearchInProgress,event: { keyup: handleKeyUp, keydown: handleKeyDown, mouseover: deselectSuggestion },css: { "cesium-geocoder-input-wide" : keepExpanded || searchText.length > 0 },hasFocus: _focusTextbox'),this._onTextBoxFocus=function(){setTimeout((function(){u.select()}),0)},u.addEventListener("focus",this._onTextBoxFocus,!1),a.appendChild(u),this._textBox=u;const d=document.createElement("span");d.className="cesium-geocoder-searchButton",d.setAttribute("data-bind","click: search,cesiumSvgPath: { path: isSearchInProgress ? _stopSearchPath : _startSearchPath, width: 32, height: 32 }"),a.appendChild(d),t.appendChild(a);const h=document.createElement("div");h.className="search-results",h.setAttribute("data-bind","visible: _suggestionsVisible");const f=document.createElement("ul");f.setAttribute("data-bind","foreach: _suggestions");const p=document.createElement("li");f.appendChild(p),p.setAttribute("data-bind","text: $data.displayName, click: $parent.activateSuggestion, event: { mouseover: $parent.handleMouseover}, css: { active: $data === $parent._selectedSuggestion }"),h.appendChild(f),t.appendChild(h),c.Z.applyBindings(n,a),c.Z.applyBindings(n,h),this._container=t,this._searchSuggestionsContainer=h,this._viewModel=n,this._form=a,this._onInputBegin=function(e){let i=e.target;"function"==typeof e.composedPath&&(i=e.composedPath()[0]),t.contains(i)||(n._focusTextbox=!1,n.hideSuggestions())},this._onInputEnd=function(e){n._focusTextbox=!0,n.showSuggestions()},s.Z.supportsPointerEvents()?(document.addEventListener("pointerdown",this._onInputBegin,!0),t.addEventListener("pointerup",this._onInputEnd,!0),t.addEventListener("pointercancel",this._onInputEnd,!0)):(document.addEventListener("mousedown",this._onInputBegin,!0),t.addEventListener("mouseup",this._onInputEnd,!0),document.addEventListener("touchstart",this._onInputBegin,!0),t.addEventListener("touchend",this._onInputEnd,!0),t.addEventListener("touchcancel",this._onInputEnd,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},searchSuggestionsContainer:{get:function(){return this._searchSuggestionsContainer}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){const e=this._container;return s.Z.supportsPointerEvents()?(document.removeEventListener("pointerdown",this._onInputBegin,!0),e.removeEventListener("pointerup",this._onInputEnd,!0)):(document.removeEventListener("mousedown",this._onInputBegin,!0),e.removeEventListener("mouseup",this._onInputEnd,!0),document.removeEventListener("touchstart",this._onInputBegin,!0),e.removeEventListener("touchend",this._onInputEnd,!0)),this._viewModel.destroy(),c.Z.cleanNode(this._form),c.Z.cleanNode(this._searchSuggestionsContainer),e.removeChild(this._form),e.removeChild(this._searchSuggestionsContainer),this._textBox.removeEventListener("focus",this._onTextBoxFocus,!1),(0,a.Z)(this)};const d=u},188395:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(11020),o=n(765153),r=n(830117),s=n(823024),a=n(282910),c=n(234146),l=n(238466),u=n(888340),d=n(143450),h=n(344485),f=n(282556),p=n(659635),m=n(232435),_=n(902299),g=n(722313),Z=n(689460),y=n(818881);function b(e){if(!(0,i.Z)(e)||!(0,i.Z)(e.scene))throw new o.Z("options.scene is required.");(0,i.Z)(e.geocoderServices)?this._geocoderServices=e.geocoderServices:this._geocoderServices=[new r.Z,new s.Z({scene:e.scene})],this._viewContainer=e.container,this._scene=e.scene,this._flightDuration=e.flightDuration,this._searchText="",this._isSearchInProgress=!1,this._wasGeocodeCancelled=!1,this._previousCredits=[],this._complete=new a.Z,this._suggestions=[],this._selectedSuggestion=void 0,this._showSuggestions=!0,this._handleArrowDown=A,this._handleArrowUp=v;const t=this;this._suggestionsVisible=Z.Z.pureComputed((function(){const e=Z.Z.getObservable(t,"_suggestions")().length>0,n=Z.Z.getObservable(t,"_showSuggestions")();return e&&n})),this._searchCommand=(0,y.Z)((function(e){return e=(0,c.Z)(e,l.Z.SEARCH),t._focusTextbox=!1,(0,i.Z)(t._selectedSuggestion)?(t.activateSuggestion(t._selectedSuggestion),!1):(t.hideSuggestions(),t.isSearchInProgress?void((n=t)._isSearchInProgress&&(n._isSearchInProgress=!1,n._wasGeocodeCancelled=!0)):async function(e,t,n){const o=e._searchText;if(C(o))return void e.showSuggestions();let r,s;for(e._isSearchInProgress=!0,e._wasGeocodeCancelled=!1,r=0;r<t.length;r++){if(e._wasGeocodeCancelled)return;if(s=await T(t[r],o,n),(0,i.Z)(s)&&"fulfilled"===s.state&&s.value.length>0)break}if(e._wasGeocodeCancelled)return;e._isSearchInProgress=!1,S(e);const a=s.value;if("fulfilled"===s.state&&(0,i.Z)(a)&&a.length>0){e._searchText=a[0].displayName,e.destinationFound(e,a[0].destination);const n=E(e,m.Z.getCreditsFromResult(a[0]));(0,i.Z)(n)||w(e,t[r].credit)}else e._searchText=`${o} (not found)`}(t,t._geocoderServices,e));var n})),this.deselectSuggestion=function(){t._selectedSuggestion=void 0},this.handleKeyDown=function(e,t){const n="ArrowDown"===t.key||"Down"===t.key||40===t.keyCode,i="ArrowUp"===t.key||"Up"===t.key||38===t.keyCode;return(n||i)&&t.preventDefault(),!0},this.handleKeyUp=function(e,n){const i="ArrowDown"===n.key||"Down"===n.key||40===n.keyCode,o="ArrowUp"===n.key||"Up"===n.key||38===n.keyCode,r="Enter"===n.key||13===n.keyCode;return o?v(t):i?A(t):r&&t._searchCommand(),!0},this.activateSuggestion=function(e){t.hideSuggestions(),t._searchText=e.displayName;const n=e.destination;x(t),t.destinationFound(t,n)},this.hideSuggestions=function(){t._showSuggestions=!1,t._selectedSuggestion=void 0},this.showSuggestions=function(){t._showSuggestions=!0},this.handleMouseover=function(e,n){e!==t._selectedSuggestion&&(t._selectedSuggestion=e)},this.keepExpanded=!1,this.autoComplete=(0,c.Z)(e.autocomplete,!0),this.destinationFound=(0,c.Z)(e.destinationFound,b.flyToDestination),this._focusTextbox=!1,Z.Z.track(this,["_searchText","_isSearchInProgress","keepExpanded","_suggestions","_selectedSuggestion","_showSuggestions","_focusTextbox"]);const n=Z.Z.getObservable(this,"_searchText");n.extend({rateLimit:{timeout:500}}),this._suggestionSubscription=n.subscribe((function(){b._updateSearchSuggestions(t)})),this.isSearchInProgress=void 0,Z.Z.defineProperty(this,"isSearchInProgress",{get:function(){return this._isSearchInProgress}}),this.searchText=void 0,Z.Z.defineProperty(this,"searchText",{get:function(){return this.isSearchInProgress?"Searching...":this._searchText},set:function(e){if("string"!=typeof e)throw new o.Z("value must be a valid string.");this._searchText=e}}),this.flightDuration=void 0,Z.Z.defineProperty(this,"flightDuration",{get:function(){return this._flightDuration},set:function(e){if((0,i.Z)(e)&&e<0)throw new o.Z("value must be positive.");this._flightDuration=e}})}function v(e){if(0===e._suggestions.length)return;const t=e._suggestions.indexOf(e._selectedSuggestion);if(-1===t||0===t)return void(e._selectedSuggestion=void 0);const n=t-1;e._selectedSuggestion=e._suggestions[n],b._adjustSuggestionsScroll(e,n)}function A(e){if(0===e._suggestions.length)return;const t=e._suggestions.length,n=(e._suggestions.indexOf(e._selectedSuggestion)+1)%t;e._selectedSuggestion=e._suggestions[n],b._adjustSuggestionsScroll(e,n)}async function T(e,t,n){try{return{state:"fulfilled",value:await e.geocode(t,n),credits:e.credit}}catch(e){return{state:"rejected",reason:e}}}function w(e,t){!(0,i.Z)(t)||e._scene.isDestroyed()||e._scene.frameState.creditDisplay.isDestroyed()||(e._scene.frameState.creditDisplay.addStaticCredit(t),e._previousCredits.push(t))}function E(e,t){return(0,i.Z)(t)&&t.forEach((t=>w(e,t))),t}function S(e){e._scene.isDestroyed()||e._scene.frameState.creditDisplay.isDestroyed()||e._previousCredits.forEach((t=>{e._scene.frameState.creditDisplay.removeStaticCredit(t)})),e._previousCredits.length=0}function C(e){return/^\s*$/.test(e)}function x(e){Z.Z.getObservable(e,"_suggestions").removeAll()}Object.defineProperties(b.prototype,{complete:{get:function(){return this._complete}},scene:{get:function(){return this._scene}},search:{get:function(){return this._searchCommand}},selectedSuggestion:{get:function(){return this._selectedSuggestion}},suggestions:{get:function(){return this._suggestions}}}),b.prototype.destroy=function(){this._suggestionSubscription.dispose()},b.flyToDestination=function(e,t){const n=e._scene,o=n.mapProjection.ellipsoid,r=n.camera,s=n.terrainProvider;let a,c=t;return t instanceof d.Z?h.Z.equalsEpsilon(t.south,t.north,h.Z.EPSILON7)&&h.Z.equalsEpsilon(t.east,t.west,h.Z.EPSILON7)?t=d.Z.center(t):a=(0,f.Z)(t,n):t=o.cartesianToCartographic(t),(0,i.Z)(a)||(a=function(e,t){const n=(0,i.Z)(t)?t.availability:void 0;return(0,i.Z)(n)?(0,u.Z)(t,[e]).then((function(t){return(e=t[0]).height+=1e3,e})):(e.height+=1e3,Promise.resolve(e))}(t,s)),a.then((function(e){c=o.cartographicToCartesian(e)})).finally((function(){r.flyTo({destination:c,complete:function(){e._complete.raiseEvent()},duration:e._flightDuration,endTransform:p.Z.IDENTITY})}))},b._updateSearchSuggestions=async function(e){if(!e.autoComplete)return;const t=e._searchText;if(x(e),S(e),!C(t))for(const n of e._geocoderServices){const o=await n.geocode(t,l.Z.AUTOCOMPLETE);if(e._suggestions=e._suggestions.concat(o),o.length>0){let t=!0;o.forEach((n=>{const o=m.Z.getCreditsFromResult(n);t=t&&!(0,i.Z)(o),E(e,o)})),t&&w(e,n.credit)}if(e._suggestions.length>=5)return}},b._adjustSuggestionsScroll=function(e,t){const n=(0,_.Z)(e._viewContainer),i=n.getElementsByClassName("search-results")[0],o=n.getElementsByTagName("li")[t];if(0===t)return void(i.scrollTop=0);const r=o.offsetTop;r+o.clientHeight>i.clientHeight?i.scrollTop=r+o.clientHeight:r<i.scrollTop&&(i.scrollTop=r)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return S(this),(0,g.Z)(this)};const I=b},969908:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(765153),r=n(902299),s=n(722313),a=n(689460),c=n(869930);function l(e,t,n){if(!(0,i.Z)(e))throw new o.Z("container is required.");e=(0,r.Z)(e);const s=new c.Z(t,n);s._svgPath="M14,4l-10,8.75h20l-4.25-3.7188v-4.6562h-2.812v2.1875l-2.938-2.5625zm-7.0938,9.906v10.094h14.094v-10.094h-14.094zm2.1876,2.313h3.3122v4.25h-3.3122v-4.25zm5.8442,1.281h3.406v6.438h-3.406v-6.438z";const l=document.createElement("button");l.type="button",l.className="cesium-button cesium-toolbar-button cesium-home-button",l.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 28, height: 28 }"),e.appendChild(l),a.Z.applyBindings(s,l),this._container=e,this._viewModel=s,this._element=l}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return a.Z.cleanNode(this._element),this._container.removeChild(this._element),(0,s.Z)(this)};const u=l},869930:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(11020),o=n(765153),r=n(689460),s=n(818881);function a(e,t){if(!(0,i.Z)(e))throw new o.Z("scene is required.");this._scene=e,this._duration=t;const n=this;this._command=(0,s.Z)((function(){n._scene.camera.flyHome(n._duration)})),this.tooltip="View Home",r.Z.track(this,["tooltip"])}Object.defineProperties(a.prototype,{scene:{get:function(){return this._scene}},command:{get:function(){return this._command}},duration:{get:function(){return this._duration},set:function(e){if((0,i.Z)(e)&&e<0)throw new o.Z("value must be positive.");this._duration=e}}});const c=a},517410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(790087),o=n(902299),r=n(949225),s=n(35961),a=n(11020),c=n(722313),l=n(689460),u=n(294798),d=n(338590);function h(e){i.Z.defined("container",e),e=(0,o.Z)(e);const t=document.createElement("div");t.className="cesium-infoBox",t.setAttribute("data-bind",'css: { "cesium-infoBox-visible" : showInfo, "cesium-infoBox-bodyless" : _bodyless }'),e.appendChild(t);const n=document.createElement("div");n.className="cesium-infoBox-title",n.setAttribute("data-bind","text: titleText"),t.appendChild(n);const c=document.createElement("button");c.type="button",c.className="cesium-button cesium-infoBox-camera",c.setAttribute("data-bind",'attr: { title: "Focus camera on object" },click: function () { cameraClicked.raiseEvent(this); },enable: enableCamera,cesiumSvgPath: { path: cameraIconPath, width: 32, height: 32 }'),t.appendChild(c);const h=document.createElement("button");h.type="button",h.className="cesium-infoBox-close",h.setAttribute("data-bind","click: function () { closeClicked.raiseEvent(this); }"),h.innerHTML="&times;",t.appendChild(h);const f=document.createElement("iframe");f.className="cesium-infoBox-iframe",f.setAttribute("sandbox","allow-same-origin allow-popups allow-forms"),f.setAttribute("data-bind","style : { maxHeight : maxHeightOffset(40) }"),f.setAttribute("allowfullscreen",!0),t.appendChild(f);const p=new d.Z;l.Z.applyBindings(p,t),this._container=e,this._element=t,this._frame=f,this._viewModel=p,this._descriptionSubscription=void 0;const m=this;f.addEventListener("load",(function(){const e=f.contentDocument,n=e.createElement("link");n.href=(0,r.Z)("Widgets/InfoBox/InfoBoxDescription.css"),n.rel="stylesheet",n.type="text/css";const i=e.createElement("div");i.className="cesium-infoBox-description",e.head.appendChild(n),e.body.appendChild(i),m._descriptionSubscription=(0,u.Z)(p,"description",(function(e){f.style.height="5px",i.innerHTML=e;let n=null;const o=i.firstElementChild;if(null!==o&&1===i.childNodes.length){const e=window.getComputedStyle(o);if(null!==e){const t=e["background-color"],i=s.Z.fromCssColorString(t);(0,a.Z)(i)&&0!==i.alpha&&(n=e["background-color"])}}t.style["background-color"]=n;const r=i.getBoundingClientRect().height;f.style.height=`${r}px`}))})),f.setAttribute("src","about:blank")}Object.defineProperties(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}},frame:{get:function(){return this._frame}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){const e=this._container;return l.Z.cleanNode(this._element),e.removeChild(this._element),(0,a.Z)(this._descriptionSubscription)&&this._descriptionSubscription.dispose(),(0,c.Z)(this)};const f=h},338590:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(282910),o=n(11020),r=n(689460);function s(){this._cameraClicked=new i.Z,this._closeClicked=new i.Z,this.maxHeight=500,this.enableCamera=!1,this.isCameraTracking=!1,this.showInfo=!1,this.titleText="",this.description="",r.Z.track(this,["showInfo","titleText","description","maxHeight","enableCamera","isCameraTracking"]),this._loadingIndicatorHtml='<div class="cesium-infoBox-loadingContainer"><span class="cesium-infoBox-loading"></span></div>',this.cameraIconPath=void 0,r.Z.defineProperty(this,"cameraIconPath",{get:function(){return!this.enableCamera||this.isCameraTracking?"M 27.34375 1.65625 L 5.28125 27.9375 L 8.09375 30.3125 L 30.15625 4.03125 L 27.34375 1.65625 z M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4724893 20.232036 9.5676108 20.7379 9.75 21.21875 L 21.65625 7.03125 L 13.84375 7.03125 z M 28.21875 7.71875 L 14.53125 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 9.8371439 29.456025 8.4902779 28.21875 7.71875 z":"M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4853444 22.104033 11.423165 24.0625 13.84375 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 8.975298 28.305952 7.03125 25.875 7.03125 L 13.84375 7.03125 z"}}),r.Z.defineProperty(this,"_bodyless",{get:function(){return!(0,o.Z)(this.description)||0===this.description.length}})}s.prototype.maxHeightOffset=function(e){return this.maxHeight-e+"px"},Object.defineProperties(s.prototype,{cameraClicked:{get:function(){return this._cameraClicked}},closeClicked:{get:function(){return this._closeClicked}}});const a=s},935929:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(11020),o=n(765153),r=n(902299),s=n(234146),a=n(949225),c=n(95296),l=n(722313),u=n(689460),d=n(237516);function h(e){if(!(0,i.Z)(e)||!(0,i.Z)(e.container))throw new o.Z("options.container is required.");const t=(0,r.Z)(e.container),n=new d.Z,l=(0,s.Z)(e.instructionsInitiallyVisible,!1);n.showInstructions=l,n._svgPath="M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z M17.328,24.371h-2.707v-2.596h2.707V24.371zM17.328,19.003v0.858h-2.707v-1.057c0-3.19,3.63-3.696,3.63-5.963c0-1.034-0.924-1.826-2.134-1.826c-1.254,0-2.354,0.924-2.354,0.924l-1.541-1.915c0,0,1.519-1.584,4.137-1.584c2.487,0,4.796,1.54,4.796,4.136C21.156,16.208,17.328,16.627,17.328,19.003z";const h=document.createElement("span");h.className="cesium-navigationHelpButton-wrapper",t.appendChild(h);const f=document.createElement("button");f.type="button",f.className="cesium-button cesium-toolbar-button cesium-navigation-help-button",f.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 32, height: 32 }"),h.appendChild(f);const p=document.createElement("div");p.className="cesium-navigation-help",p.setAttribute("data-bind",'css: { "cesium-navigation-help-visible" : showInstructions}'),h.appendChild(p);const m=document.createElement("button");m.type="button",m.className="cesium-navigation-button cesium-navigation-button-left",m.setAttribute("data-bind",'click: showClick, css: {"cesium-navigation-button-selected": !_touch, "cesium-navigation-button-unselected": _touch}');const _=document.createElement("img");_.src=(0,a.Z)("Widgets/Images/NavigationHelp/Mouse.svg"),_.className="cesium-navigation-button-icon",_.style.width="25px",_.style.height="25px",m.appendChild(_),m.appendChild(document.createTextNode("Mouse"));const g=document.createElement("button");g.type="button",g.className="cesium-navigation-button cesium-navigation-button-right",g.setAttribute("data-bind",'click: showTouch, css: {"cesium-navigation-button-selected": _touch, "cesium-navigation-button-unselected": !_touch}');const Z=document.createElement("img");Z.src=(0,a.Z)("Widgets/Images/NavigationHelp/Touch.svg"),Z.className="cesium-navigation-button-icon",Z.style.width="25px",Z.style.height="25px",g.appendChild(Z),g.appendChild(document.createTextNode("Touch")),p.appendChild(m),p.appendChild(g);const y=document.createElement("div");y.className="cesium-click-navigation-help cesium-navigation-help-instructions",y.setAttribute("data-bind",'css: { "cesium-click-navigation-help-visible" : !_touch}'),y.innerHTML=`            <table>                <tr>                    <td><img src="${(0,a.Z)("Widgets/Images/NavigationHelp/MouseLeft.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">Left click + drag</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.Z)("Widgets/Images/NavigationHelp/MouseRight.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Right click + drag, or</div>                        <div class="cesium-navigation-help-details">Mouse wheel scroll</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.Z)("Widgets/Images/NavigationHelp/MouseMiddle.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Rotate view</div>                        <div class="cesium-navigation-help-details">Middle click + drag, or</div>                        <div class="cesium-navigation-help-details">CTRL + Left/Right click + drag</div>                    </td>                </tr>            </table>`,p.appendChild(y);const b=document.createElement("div");b.className="cesium-touch-navigation-help cesium-navigation-help-instructions",b.setAttribute("data-bind",'css: { "cesium-touch-navigation-help-visible" : _touch}'),b.innerHTML=`            <table>                <tr>                    <td><img src="${(0,a.Z)("Widgets/Images/NavigationHelp/TouchDrag.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">One finger drag</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.Z)("Widgets/Images/NavigationHelp/TouchZoom.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Two finger pinch</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.Z)("Widgets/Images/NavigationHelp/TouchTilt.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Tilt view</div>                        <div class="cesium-navigation-help-details">Two finger drag, same direction</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.Z)("Widgets/Images/NavigationHelp/TouchRotate.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-tilt">Rotate view</div>                        <div class="cesium-navigation-help-details">Two finger drag, opposite direction</div>                    </td>                </tr>            </table>`,p.appendChild(b),u.Z.applyBindings(n,h),this._container=t,this._viewModel=n,this._wrapper=h,this._closeInstructions=function(e){h.contains(e.target)||(n.showInstructions=!1)},c.Z.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeInstructions,!0):(document.addEventListener("mousedown",this._closeInstructions,!0),document.addEventListener("touchstart",this._closeInstructions,!0))}Object.defineProperties(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return c.Z.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeInstructions,!0):(document.removeEventListener("mousedown",this._closeInstructions,!0),document.removeEventListener("touchstart",this._closeInstructions,!0)),u.Z.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,l.Z)(this)};const f=h},237516:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(689460),o=n(818881);function r(){this.showInstructions=!1;const e=this;this._command=(0,o.Z)((function(){e.showInstructions=!e.showInstructions})),this._showClick=(0,o.Z)((function(){e._touch=!1})),this._showTouch=(0,o.Z)((function(){e._touch=!0})),this._touch=!1,this.tooltip="Navigation Instructions",i.Z.track(this,["tooltip","showInstructions","_touch"])}Object.defineProperties(r.prototype,{command:{get:function(){return this._command}},showClick:{get:function(){return this._showClick}},showTouch:{get:function(){return this._showTouch}}});const s=r},427529:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(11020),o=n(765153),r=n(902299),s=n(95296),a=n(722313),c=n(689460),l=n(227567);function u(e,t){if(!(0,i.Z)(e))throw new o.Z("container is required.");if(!(0,i.Z)(t))throw new o.Z("scene is required.");e=(0,r.Z)(e);const n=new l.Z(t);n._perspectivePath="M 28.15625,10.4375 9.125,13.21875 13.75,43.25 41.75,55.09375 50.8125,37 54.5,11.9375 z m 0.125,3 19.976451,0.394265 L 43.03125,16.875 22.6875,14.28125 z M 50.971746,15.705477 47.90625,36.03125 42.53125,46 44.84375,19.3125 z M 12.625,16.03125 l 29.15625,3.6875 -2.65625,31 L 16.4375,41.125 z",n._orthographicPath="m 31.560594,6.5254438 -20.75,12.4687502 0.1875,24.5625 22.28125,11.8125 19.5,-12 0.65625,-0.375 0,-0.75 0.0312,-23.21875 z m 0.0625,3.125 16.65625,9.5000002 -16.125,10.28125 -17.34375,-9.71875 z m 18.96875,11.1875002 0.15625,20.65625 -17.46875,10.59375 0.15625,-20.28125 z m -37.0625,1.25 17.21875,9.625 -0.15625,19.21875 -16.9375,-9 z";const a=document.createElement("span");a.className="cesium-projectionPicker-wrapper cesium-toolbar-button",e.appendChild(a);const u=document.createElement("button");u.type="button",u.className="cesium-button cesium-toolbar-button",u.setAttribute("data-bind",'css: { "cesium-projectionPicker-buttonPerspective": !_orthographic,       "cesium-projectionPicker-buttonOrthographic": _orthographic,       "cesium-button-disabled" : sceneMode === _sceneMode.SCENE2D || _flightInProgress,        "cesium-projectionPicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),u.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _perspectivePath, width: 64, height: 64, css: "cesium-projectionPicker-iconPerspective" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _orthographicPath, width: 64, height: 64, css: "cesium-projectionPicker-iconOrthographic" } --\x3e\x3c!-- /ko --\x3e',a.appendChild(u);const d=document.createElement("button");d.type="button",d.className="cesium-button cesium-toolbar-button cesium-projectionPicker-dropDown-icon",d.setAttribute("data-bind",'css: { "cesium-projectionPicker-visible" : (dropDownVisible && _orthographic),       "cesium-projectionPicker-none" : !_orthographic,       "cesium-projectionPicker-hidden" : !dropDownVisible },attr: { title: tooltipPerspective },click: switchToPerspective,cesiumSvgPath: { path: _perspectivePath, width: 64, height: 64 }'),a.appendChild(d);const h=document.createElement("button");h.type="button",h.className="cesium-button cesium-toolbar-button cesium-projectionPicker-dropDown-icon",h.setAttribute("data-bind",'css: { "cesium-projectionPicker-visible" : (dropDownVisible && !_orthographic),       "cesium-projectionPicker-none" : _orthographic,       "cesium-projectionPicker-hidden" : !dropDownVisible},attr: { title: tooltipOrthographic },click: switchToOrthographic,cesiumSvgPath: { path: _orthographicPath, width: 64, height: 64 }'),a.appendChild(h),c.Z.applyBindings(n,a),this._viewModel=n,this._container=e,this._wrapper=a,this._closeDropDown=function(e){a.contains(e.target)||(n.dropDownVisible=!1)},s.Z.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._viewModel.destroy(),s.Z.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),c.Z.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,a.Z)(this)};const d=u},227567:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(11020),o=n(765153),r=n(223689),s=n(714233),a=n(700234),c=n(722313),l=n(689460),u=n(818881);function d(e){if(!(0,i.Z)(e))throw new o.Z("scene is required.");this._scene=e,this._orthographic=e.camera.frustum instanceof r.Z,this._flightInProgress=!1,this.dropDownVisible=!1,this.tooltipPerspective="Perspective Projection",this.tooltipOrthographic="Orthographic Projection",this.selectedTooltip=void 0,this.sceneMode=e.mode,l.Z.track(this,["_orthographic","_flightInProgress","sceneMode","dropDownVisible","tooltipPerspective","tooltipOrthographic"]);const t=this;l.Z.defineProperty(this,"selectedTooltip",(function(){return t._orthographic?t.tooltipOrthographic:t.tooltipPerspective})),this._toggleDropDown=(0,u.Z)((function(){t.sceneMode===s.Z.SCENE2D||t._flightInProgress||(t.dropDownVisible=!t.dropDownVisible)})),this._eventHelper=new a.Z,this._eventHelper.add(e.morphComplete,(function(e,n,i,o){t.sceneMode=i,t._orthographic=i===s.Z.SCENE2D||t._scene.camera.frustum instanceof r.Z})),this._eventHelper.add(e.preRender,(function(){t._flightInProgress=(0,i.Z)(e.camera._currentFlight)})),this._switchToPerspective=(0,u.Z)((function(){t.sceneMode!==s.Z.SCENE2D&&(t._scene.camera.switchToPerspectiveFrustum(),t._orthographic=!1,t.dropDownVisible=!1)})),this._switchToOrthographic=(0,u.Z)((function(){t.sceneMode!==s.Z.SCENE2D&&(t._scene.camera.switchToOrthographicFrustum(),t._orthographic=!0,t.dropDownVisible=!1)})),this._sceneMode=s.Z}Object.defineProperties(d.prototype,{scene:{get:function(){return this._scene}},toggleDropDown:{get:function(){return this._toggleDropDown}},switchToPerspective:{get:function(){return this._switchToPerspective}},switchToOrthographic:{get:function(){return this._switchToOrthographic}},isOrthographicProjection:{get:function(){return this._orthographic}}}),d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){this._eventHelper.removeAll(),(0,c.Z)(this)};const h=d},310166:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(11020),o=n(765153),r=n(902299),s=n(95296),a=n(722313),c=n(689460),l=n(789284);function u(e,t,n){if(!(0,i.Z)(e))throw new o.Z("container is required.");if(!(0,i.Z)(t))throw new o.Z("scene is required.");e=(0,r.Z)(e);const a=new l.Z(t,n);a._globePath="m 32.401392,4.9330437 c -7.087603,0 -14.096095,2.884602 -19.10793,7.8946843 -5.0118352,5.010083 -7.9296167,11.987468 -7.9296167,19.072999 0,7.085531 2.9177815,14.097848 7.9296167,19.107931 4.837653,4.835961 11.541408,7.631372 18.374354,7.82482 0.05712,0.01231 0.454119,0.139729 0.454119,0.139729 l 0.03493,-0.104797 c 0.08246,7.84e-4 0.162033,0.03493 0.244525,0.03493 0.08304,0 0.161515,-0.03414 0.244526,-0.03493 l 0.03493,0.104797 c 0,0 0.309474,-0.129487 0.349323,-0.139729 6.867765,-0.168094 13.582903,-2.965206 18.444218,-7.82482 2.558195,-2.5573 4.551081,-5.638134 5.903547,-8.977584 1.297191,-3.202966 2.02607,-6.661489 2.02607,-10.130347 0,-6.237309 -2.366261,-12.31219 -6.322734,-17.116794 -0.0034,-0.02316 0.0049,-0.04488 0,-0.06986 -0.01733,-0.08745 -0.104529,-0.278855 -0.104797,-0.279458 -5.31e-4,-0.0012 -0.522988,-0.628147 -0.523984,-0.62878         -3.47e-4,-2.2e-4 -0.133444,-0.03532 -0.244525,-0.06987 C 51.944299,13.447603 51.751076,13.104317 51.474391,12.827728 46.462556,7.8176457 39.488996,4.9330437 32.401392,4.9330437 z m -2.130866,3.5281554 0.104797,9.6762289 c -4.111695,-0.08361 -7.109829,-0.423664 -9.257041,-0.943171 1.198093,-2.269271 2.524531,-4.124404 3.91241,-5.414496 2.167498,-2.0147811 3.950145,-2.8540169 5.239834,-3.3185619 z m 2.794579,0 c 1.280302,0.4754953 3.022186,1.3285948 5.065173,3.2486979 1.424667,1.338973 2.788862,3.303645 3.982275,5.728886 -2.29082,0.403367 -5.381258,0.621049 -8.942651,0.698645 L 33.065105,8.4611991 z m 5.728886,0.2445256 c 4.004072,1.1230822 7.793098,3.1481363 10.724195,6.0782083 0.03468,0.03466 0.07033,0.06991 0.104797,0.104797 -0.45375,0.313891 -0.923054,0.663002 -1.956205,1.082899 -0.647388,0.263114 -1.906242,0.477396 -2.829511,0.733577 -1.382296,-2.988132         -3.027146,-5.368585 -4.785716,-7.0213781 -0.422866,-0.397432 -0.835818,-0.6453247 -1.25756,-0.9781032 z m -15.33525,0.7685092 c -0.106753,0.09503 -0.207753,0.145402 -0.31439,0.244526 -1.684973,1.5662541 -3.298068,3.8232211 -4.680919,6.5672591 -0.343797,-0.14942 -1.035052,-0.273198 -1.292493,-0.419186 -0.956528,-0.542427 -1.362964,-1.022024 -1.537018,-1.292493 -0.0241,-0.03745 -0.01868,-0.0401 -0.03493,-0.06986 2.250095,-2.163342 4.948824,-3.869984 7.859752,-5.0302421 z m -9.641296,7.0912431 c 0.464973,0.571618 0.937729,1.169056 1.956205,1.746612 0.349907,0.198425 1.107143,0.335404 1.537018,0.523983 -1.20166,3.172984 -1.998037,7.051901 -2.165798,11.772162 C 14.256557,30.361384 12.934823,30.161483 12.280427,29.90959 10.644437,29.279855 9.6888882,28.674891 9.1714586,28.267775 8.6540289,27.860658 8.6474751,27.778724 8.6474751,27.778724 l -0.069864,0.03493 C 9.3100294,23.691285         11.163248,19.798527 13.817445,16.565477 z m 37.552149,0.523984 c 2.548924,3.289983 4.265057,7.202594 4.890513,11.318043 -0.650428,0.410896 -1.756876,1.001936 -3.563088,1.606882 -1.171552,0.392383 -3.163859,0.759153 -4.960377,1.117832 -0.04367,-4.752703 -0.784809,-8.591423 -1.88634,-11.807094 0.917574,-0.263678 2.170552,-0.486495 2.864443,-0.76851 1.274693,-0.518066 2.003942,-1.001558 2.654849,-1.467153 z m -31.439008,2.619917 c 2.487341,0.672766 5.775813,1.137775 10.479669,1.222628 l 0.104797,10.689263 0,0.03493 0,0.733577 c -5.435005,-0.09059 -9.512219,-0.519044 -12.610536,-1.117831 0.106127,-4.776683 0.879334,-8.55791 2.02607,-11.562569 z m 23.264866,0.31439 c 1.073459,3.067541 1.833795,6.821314 1.816476,11.702298 -3.054474,0.423245 -7.062018,0.648559 -11.702298,0.698644 l 0,-0.838373 -0.104796,-10.654331 c 4.082416,-0.0864 7.404468,-0.403886 9.990618,-0.908238 z         M 8.2632205,30.922625 c 0.7558676,0.510548 1.5529563,1.013339 3.0041715,1.57195 0.937518,0.360875 2.612202,0.647642 3.91241,0.978102 0.112814,3.85566 0.703989,7.107756 1.606883,9.920754 -1.147172,-0.324262 -2.644553,-0.640648 -3.423359,-0.978102 -1.516688,-0.657177 -2.386627,-1.287332 -2.864443,-1.71168 -0.477816,-0.424347 -0.489051,-0.489051 -0.489051,-0.489051 L 9.8002387,40.319395 C 8.791691,37.621767 8.1584238,34.769583 8.1584238,31.900727 c 0,-0.330153 0.090589,-0.648169 0.1047967,-0.978102 z m 48.2763445,0.419186 c 0.0047,0.188973 0.06986,0.36991 0.06986,0.558916 0,2.938869 -0.620228,5.873558 -1.676747,8.628261 -0.07435,0.07583 -0.06552,0.07411 -0.454119,0.349323 -0.606965,0.429857 -1.631665,1.042044 -3.318562,1.676747 -1.208528,0.454713 -3.204964,0.850894 -5.135038,1.25756 0.84593,-2.765726 1.41808,-6.005357 1.606883,-9.815957 2.232369,-0.413371 4.483758,-0.840201         5.938479,-1.327425 1.410632,-0.472457 2.153108,-0.89469 2.96924,-1.327425 z m -38.530252,2.864443 c 3.208141,0.56697 7.372279,0.898588 12.575603,0.978103 l 0.174662,9.885821 c -4.392517,-0.06139 -8.106722,-0.320566 -10.863925,-0.803441 -1.051954,-2.664695 -1.692909,-6.043794 -1.88634,-10.060483 z m 26.793022,0.31439 c -0.246298,3.923551 -0.877762,7.263679 -1.816476,9.885822 -2.561957,0.361954 -5.766249,0.560708 -9.431703,0.62878 l -0.174661,-9.815957 c 4.491734,-0.04969 8.334769,-0.293032 11.42284,-0.698645 z M 12.035901,44.860585 c 0.09977,0.04523 0.105535,0.09465 0.209594,0.139729 1.337656,0.579602 3.441099,1.058072 5.589157,1.537018 1.545042,3.399208 3.548524,5.969402 5.589157,7.789888 -3.034411,-1.215537 -5.871615,-3.007978 -8.174142,-5.309699 -1.245911,-1.245475 -2.271794,-2.662961 -3.213766,-4.156936 z m 40.69605,0 c -0.941972,1.493975 -1.967855,2.911461         -3.213765,4.156936 -2.74253,2.741571 -6.244106,4.696717 -9.955686,5.868615 0.261347,-0.241079 0.507495,-0.394491 0.768509,-0.663713 1.674841,-1.727516 3.320792,-4.181056 4.645987,-7.265904 2.962447,-0.503021 5.408965,-1.122293 7.161107,-1.781544 0.284034,-0.106865 0.337297,-0.207323 0.593848,-0.31439 z m -31.404076,2.305527 c 2.645807,0.376448 5.701178,0.649995 9.466635,0.698645 l 0.139729,7.789888 c -1.38739,-0.480844 -3.316218,-1.29837 -5.659022,-3.388427 -1.388822,-1.238993 -2.743668,-3.0113 -3.947342,-5.100106 z m 20.365491,0.104797 c -1.04872,2.041937 -2.174337,3.779068 -3.353494,4.995309 -1.853177,1.911459 -3.425515,2.82679 -4.611055,3.353494 l -0.139729,-7.789887 c 3.13091,-0.05714 5.728238,-0.278725 8.104278,-0.558916 z",a._flatMapPath="m 2.9825053,17.550598 0,1.368113 0,26.267766 0,1.368113 1.36811,0 54.9981397,0 1.36811,0 0,-1.368113 0,-26.267766 0,-1.368113 -1.36811,0 -54.9981397,0 -1.36811,0 z m 2.73623,2.736226 10.3292497,0 0,10.466063 -10.3292497,0 0,-10.466063 z m 13.0654697,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 10.32926,0 0,10.466063 -10.32926,0 0,-10.466063 z m -41.9326497,13.202288 10.3292497,0 0,10.329252 -10.3292497,0 0,-10.329252 z m 13.0654697,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 10.32926,0 0,10.329252 -10.32926,0 0,-10.329252 z",a._columbusViewPath="m 14.723969,17.675598 -0.340489,0.817175 -11.1680536,26.183638 -0.817175,1.872692 2.076986,0 54.7506996,0 2.07698,0 -0.81717,-1.872692 -11.16805,-26.183638 -0.34049,-0.817175 -0.91933,0 -32.414586,0 -0.919322,0 z m 1.838643,2.723916 6.196908,0 -2.928209,10.418977 -7.729111,0 4.460412,-10.418977 z m 9.02297,0 4.903049,0 0,10.418977 -7.831258,0 2.928209,-10.418977 z m 7.626964,0 5.584031,0 2.62176,10.418977 -8.205791,0 0,-10.418977 z m 8.410081,0 5.51593,0 4.46042,10.418977 -7.38863,0 -2.58772,-10.418977 z m -30.678091,13.142892 8.103649,0 -2.89416,10.282782 -9.6018026,0 4.3923136,-10.282782 z m 10.929711,0 8.614384,0 0,10.282782 -11.508544,0 2.89416,-10.282782 z m 11.338299,0 8.852721,0 2.58772,10.282782 -11.440441,0 0,-10.282782 z m 11.678781,0 7.86531,0 4.39231,10.282782 -9.6699,0 -2.58772,-10.282782 z";const u=document.createElement("span");u.className="cesium-sceneModePicker-wrapper cesium-toolbar-button",e.appendChild(u);const d=document.createElement("button");d.type="button",d.className="cesium-button cesium-toolbar-button",d.setAttribute("data-bind",'css: { "cesium-sceneModePicker-button2D": sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-button3D": sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-buttonColumbusView": sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),d.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _globePath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon3D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon2D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-iconColumbusView" } --\x3e\x3c!-- /ko --\x3e',u.appendChild(d);const h=document.createElement("button");h.type="button",h.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",h.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE3D)) || (!dropDownVisible && (sceneMode === _sceneMode.SCENE3D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip3D },click: morphTo3D,cesiumSvgPath: { path: _globePath, width: 64, height: 64 }'),u.appendChild(h);const f=document.createElement("button");f.type="button",f.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",f.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE2D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip2D },click: morphTo2D,cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64 }'),u.appendChild(f);const p=document.createElement("button");p.type="button",p.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",p.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.COLUMBUS_VIEW)) || (!dropDownVisible && (sceneMode === _sceneMode.COLUMBUS_VIEW)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-hidden" : !dropDownVisible},attr: { title: tooltipColumbusView },click: morphToColumbusView,cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64 }'),u.appendChild(p),c.Z.applyBindings(a,u),this._viewModel=a,this._container=e,this._wrapper=u,this._closeDropDown=function(e){u.contains(e.target)||(a.dropDownVisible=!1)},s.Z.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._viewModel.destroy(),s.Z.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),c.Z.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,a.Z)(this)};const d=u},789284:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(11020),o=n(765153),r=n(700234),s=n(234146),a=n(714233),c=n(722313),l=n(689460),u=n(818881);function d(e,t){if(!(0,i.Z)(e))throw new o.Z("scene is required.");this._scene=e;const n=this;this._eventHelper=new r.Z,this._eventHelper.add(e.morphStart,(function(e,t,i,o){n.sceneMode=i,n.dropDownVisible=!1})),this._duration=(0,s.Z)(t,2),this.sceneMode=e.mode,this.dropDownVisible=!1,this.tooltip2D="2D",this.tooltip3D="3D",this.tooltipColumbusView="Columbus View",l.Z.track(this,["sceneMode","dropDownVisible","tooltip2D","tooltip3D","tooltipColumbusView"]),this.selectedTooltip=void 0,l.Z.defineProperty(this,"selectedTooltip",(function(){const e=n.sceneMode;return e===a.Z.SCENE2D?n.tooltip2D:e===a.Z.SCENE3D?n.tooltip3D:n.tooltipColumbusView})),this._toggleDropDown=(0,u.Z)((function(){n.dropDownVisible=!n.dropDownVisible})),this._morphTo2D=(0,u.Z)((function(){e.morphTo2D(n._duration)})),this._morphTo3D=(0,u.Z)((function(){e.morphTo3D(n._duration)})),this._morphToColumbusView=(0,u.Z)((function(){e.morphToColumbusView(n._duration)})),this._sceneMode=a.Z}Object.defineProperties(d.prototype,{scene:{get:function(){return this._scene}},duration:{get:function(){return this._duration},set:function(e){if(e<0)throw new o.Z("duration value must be positive.");this._duration=e}},toggleDropDown:{get:function(){return this._toggleDropDown}},morphTo2D:{get:function(){return this._morphTo2D}},morphTo3D:{get:function(){return this._morphTo3D}},morphToColumbusView:{get:function(){return this._morphToColumbusView}}}),d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){this._eventHelper.removeAll(),(0,c.Z)(this)};const h=d},965691:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(765153),r=n(902299),s=n(722313),a=n(689460),c=n(494349);function l(e,t){if(!(0,i.Z)(e))throw new o.Z("container is required.");e=(0,r.Z)(e),this._container=e;const n=document.createElement("div");n.className="cesium-selection-wrapper",n.setAttribute("data-bind",'style: { "top" : _screenPositionY, "left" : _screenPositionX },css: { "cesium-selection-wrapper-visible" : isVisible }'),e.appendChild(n),this._element=n;const s="http://www.w3.org/2000/svg",l=document.createElementNS(s,"svg:svg");l.setAttribute("width",160),l.setAttribute("height",160),l.setAttribute("viewBox","0 0 160 160");const u=document.createElementNS(s,"g");u.setAttribute("transform","translate(80,80)"),l.appendChild(u);const d=document.createElementNS(s,"path");d.setAttribute("data-bind","attr: { transform: _transform }"),d.setAttribute("d","M -34 -34 L -34 -11.25 L -30 -15.25 L -30 -30 L -15.25 -30 L -11.25 -34 L -34 -34 z M 11.25 -34 L 15.25 -30 L 30 -30 L 30 -15.25 L 34 -11.25 L 34 -34 L 11.25 -34 z M -34 11.25 L -34 34 L -11.25 34 L -15.25 30 L -30 30 L -30 15.25 L -34 11.25 z M 34 11.25 L 30 15.25 L 30 30 L 15.25 30 L 11.25 34 L 34 34 L 34 11.25 z"),u.appendChild(d),n.appendChild(l);const h=new c.Z(t,this._element,this._container);this._viewModel=h,a.Z.applyBindings(this._viewModel,this._element)}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){const e=this._container;return a.Z.cleanNode(this._element),e.removeChild(this._element),(0,s.Z)(this)};const u=l},494349:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(405254),o=n(11020),r=n(765153),s=n(234146),a=n(638452),c=n(942841),l=n(689460);const u=new i.Z,d="-1000px";function h(e,t,n){if(!(0,o.Z)(e))throw new r.Z("scene is required.");if(!(0,o.Z)(t))throw new r.Z("selectionIndicatorElement is required.");if(!(0,o.Z)(n))throw new r.Z("container is required.");this._scene=e,this._screenPositionX=d,this._screenPositionY=d,this._tweens=e.tweens,this._container=(0,s.Z)(n,document.body),this._selectionIndicatorElement=t,this._scale=1,this.position=void 0,this.showSelection=!1,l.Z.track(this,["position","_screenPositionX","_screenPositionY","_scale","showSelection"]),this.isVisible=void 0,l.Z.defineProperty(this,"isVisible",{get:function(){return this.showSelection&&(0,o.Z)(this.position)}}),l.Z.defineProperty(this,"_transform",{get:function(){return`scale(${this._scale})`}}),this.computeScreenSpacePosition=function(t,n){return a.Z.wgs84ToWindowCoordinates(e,t,n)}}h.prototype.update=function(){if(this.showSelection&&(0,o.Z)(this.position)){const e=this.computeScreenSpacePosition(this.position,u);if((0,o.Z)(e)){const t=this._container,n=t.parentNode.clientWidth,i=t.parentNode.clientHeight,o=this._selectionIndicatorElement.clientWidth,r=.5*o;e.x=Math.min(Math.max(e.x,-o),n+o)-r,e.y=Math.min(Math.max(e.y,-o),i+o)-r,this._screenPositionX=`${Math.floor(e.x+.25)}px`,this._screenPositionY=`${Math.floor(e.y+.25)}px`}else this._screenPositionX=d,this._screenPositionY=d}},h.prototype.animateAppear=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:2,stopValue:1,duration:.8,easingFunction:c.Z.EXPONENTIAL_OUT})},h.prototype.animateDepart=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:this._scale,stopValue:1.5,duration:.8,easingFunction:c.Z.EXPONENTIAL_OUT})},Object.defineProperties(h.prototype,{container:{get:function(){return this._container}},selectionIndicatorElement:{get:function(){return this._selectionIndicatorElement}},scene:{get:function(){return this._scene}}});const f=h},623115:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const i="http://www.w3.org/2000/svg",o="cesium-svgPath-svg",r={register:function(e){e.bindingHandlers.cesiumSvgPath={init:function(t,n){const r=document.createElementNS(i,"svg:svg");r.setAttribute("class",o);const s=document.createElementNS(i,"path");return r.appendChild(s),e.virtualElements.setDomNodeChildren(t,[r]),e.computed({read:function(){const t=e.unwrap(n());s.setAttribute("d",e.unwrap(t.path));const i=e.unwrap(t.width),a=e.unwrap(t.height);r.setAttribute("width",i),r.setAttribute("height",a),r.setAttribute("viewBox",`0 0 ${i} ${a}`),t.css&&r.setAttribute("class",`${o} ${e.unwrap(t.css)}`)},disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings.cesiumSvgPath=!0}}},334678:(e,t,n)=>{"use strict";var i;n.d(t,{Z:()=>r}),"undefined"!=typeof ko&&(i=ko),function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,o=t.jQuery,r=t.JSON;o||"undefined"==typeof jQuery||(o=jQuery),function(e){e(t.ko={})}((function(s,a){function c(e,t){return(null===e||typeof e in v)&&e===t}function l(t,n){var i;return function(){i||(i=b.a.setTimeout((function(){i=e,t()}),n))}}function u(e,t){var n;return function(){clearTimeout(n),n=b.a.setTimeout(e,t)}}function d(e,t){t&&"change"!==t?"beforeChange"===t?this.pc(e):this.gb(e,t):this.qc(e)}function h(e,t){null!==t&&t.s&&t.s()}function f(e,t){var n=this.qd,i=n[S];i.ra||(this.Qb&&this.mb[t]?(n.uc(t,e,this.mb[t]),this.mb[t]=null,--this.Qb):i.I[t]||n.uc(t,e,i.J?{da:e}:n.$c(e)),e.Ja&&e.gd())}var p,m,_,g,Z,y,b=void 0!==s?s:{};b.b=function(e,t){for(var n=e.split("."),i=b,o=0;o<n.length-1;o++)i=i[n[o]];i[n[n.length-1]]=t},b.L=function(e,t,n){e[t]=n},b.version="3.5.1",b.b("version",b.version),b.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},b.a=function(){function s(e,t){for(var n in e)u.call(e,n)&&t(n,e[n])}function a(e,t){if(t)for(var n in t)u.call(t,n)&&(e[n]=t[n]);return e}function c(e,t){return e.__proto__=t,e}function l(e,t,n,i){var o=e[t].match(Z)||[];b.a.D(n.match(Z),(function(e){b.a.Na(o,e,i)})),e[t]=o.join(" ")}var u=Object.prototype.hasOwnProperty,d={__proto__:[]}instanceof Array,h="function"==typeof Symbol,f={},p={};f[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],f.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),s(f,(function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)p[t[n]]=e}));var m,_={propertychange:!0},g=n&&function(){for(var t=3,i=n.createElement("div"),o=i.getElementsByTagName("i");i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",o[0];);return 4<t?t:e}(),Z=/\S+/g;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(e,t,n){for(var i=0,o=e.length;i<o;i++)t.call(n,e[i],i,e)},A:"function"==typeof Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t)}:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Lb:function(t,n,i){for(var o=0,r=t.length;o<r;o++)if(n.call(i,t[o],o,t))return t[o];return e},Pa:function(e,t){var n=b.a.A(e,t);0<n?e.splice(n,1):0===n&&e.shift()},wc:function(e){var t=[];return e&&b.a.D(e,(function(e){0>b.a.A(t,e)&&t.push(e)})),t},Mb:function(e,t,n){var i=[];if(e)for(var o=0,r=e.length;o<r;o++)i.push(t.call(n,e[o],o));return i},jb:function(e,t,n){var i=[];if(e)for(var o=0,r=e.length;o<r;o++)t.call(n,e[o],o)&&i.push(e[o]);return i},Nb:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Na:function(e,t,n){var i=b.a.A(b.a.bc(e),t);0>i?n&&e.push(t):n||e.splice(i,1)},Ba:d,extend:a,setPrototypeOf:c,Ab:d?c:a,P:s,Ga:function(e,t,n){if(!e)return e;var i,o={};for(i in e)u.call(e,i)&&(o[i]=t.call(n,e[i],i,e));return o},Tb:function(e){for(;e.firstChild;)b.removeNode(e.firstChild)},Yb:function(e){for(var t=((e=b.a.la(e))[0]&&e[0].ownerDocument||n).createElement("div"),i=0,o=e.length;i<o;i++)t.appendChild(b.oa(e[i]));return t},Ca:function(e,t){for(var n=0,i=e.length,o=[];n<i;n++){var r=e[n].cloneNode(!0);o.push(t?b.oa(r):r)}return o},va:function(e,t){if(b.a.Tb(e),t)for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])},Xc:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var i=n[0],o=i.parentNode,r=0,s=t.length;r<s;r++)o.insertBefore(t[r],i);for(r=0,s=n.length;r<s;r++)b.removeNode(n[r])}},Ua:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)e.push(n),n=n.nextSibling;e.push(i)}}return e},Zc:function(e,t){7>g?e.setAttribute("selected",t):e.selected=t},Db:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},vd:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(1!==e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return!(16&~t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Sb:function(e){return b.a.vd(e,e.ownerDocument.documentElement)},kd:function(e){return!!b.a.Lb(e,b.a.Sb)},R:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Ac:function(e){return b.onError?function(){try{return e.apply(this,arguments)}catch(e){throw b.onError&&b.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(b.a.Ac(e),t)},Gc:function(e){setTimeout((function(){throw b.onError&&b.onError(e),e}),0)},B:function(e,t,n){var i=b.a.Ac(n);if(n=_[t],b.options.useOnlyNativeEvents||n||!o)if(n||"function"!=typeof e.addEventListener){if(void 0===e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var r=function(t){i.call(e,t)},s="on"+t;e.attachEvent(s,r),b.a.K.za(e,(function(){e.detachEvent(s,r)}))}else e.addEventListener(t,i,!1);else m||(m="function"==typeof o(e).on?"on":"bind"),o(e)[m](t,i)},Fb:function(e,i){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;if(r=!("input"!==b.a.R(e)||!e.type||"click"!=i.toLowerCase()||"checkbox"!=(r=e.type)&&"radio"!=r),b.options.useOnlyNativeEvents||!o||r)if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(r=n.createEvent(p[i]||"HTMLEvents")).initEvent(i,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if(void 0===e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+i)}else o(e).trigger(i)},f:function(e){return b.O(e)?e():e},bc:function(e){return b.O(e)?e.v():e},Eb:function(e,t,n){var i;t&&("object"==typeof e.classList?(i=e.classList[n?"add":"remove"],b.a.D(t.match(Z),(function(t){i.call(e.classList,t)}))):"string"==typeof e.className.baseVal?l(e.className,"baseVal",t,n):l(e,"className",t,n))},Bb:function(t,n){var i=b.a.f(n);null!==i&&i!==e||(i="");var o=b.h.firstChild(t);!o||3!=o.nodeType||b.h.nextSibling(o)?b.h.va(t,[t.ownerDocument.createTextNode(i)]):o.data=i,b.a.Ad(t)},Yc:function(e,t){if(e.name=t,7>=g)try{var i=e.name.replace(/[&<>'"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}));e.mergeAttributes(n.createElement("<input name='"+i+"'/>"),!1)}catch(e){}},Ad:function(e){9<=g&&(e=1==e.nodeType?e:e.parentNode).style&&(e.style.zoom=e.style.zoom)},wd:function(e){if(g){var t=e.style.width;e.style.width=0,e.style.width=t}},Pd:function(e,t){e=b.a.f(e),t=b.a.f(t);for(var n=[],i=e;i<=t;i++)n.push(i);return n},la:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t},Da:function(e){return h?Symbol(e):e},Zd:6===g,$d:7===g,W:g,Lc:function(e,t){for(var n=b.a.la(e.getElementsByTagName("input")).concat(b.a.la(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],r=n.length-1;0<=r;r--)i(n[r])&&o.push(n[r]);return o},Nd:function(e){return"string"==typeof e&&(e=b.a.Db(e))?r&&r.parse?r.parse(e):new Function("return "+e)():null},hc:function(e,t,n){if(!r||!r.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return r.stringify(b.a.f(e),t,n)},Od:function(e,t,i){var o=(i=i||{}).params||{},r=i.includeFields||this.Jc,a=e;if("object"==typeof e&&"form"===b.a.R(e)){a=e.action;for(var c=r.length-1;0<=c;c--)for(var l=b.a.Lc(e,r[c]),u=l.length-1;0<=u;u--)o[l[u].name]=l[u].value}t=b.a.f(t);var d=n.createElement("form");for(var h in d.style.display="none",d.action=a,d.method="post",t)(e=n.createElement("input")).type="hidden",e.name=h,e.value=b.a.hc(b.a.f(t[h])),d.appendChild(e);s(o,(function(e,t){var i=n.createElement("input");i.type="hidden",i.name=e,i.value=t,d.appendChild(i)})),n.body.appendChild(d),i.submitter?i.submitter(d):d.submit(),setTimeout((function(){d.parentNode.removeChild(d)}),0)}}}(),b.b("utils",b.a),b.b("utils.arrayForEach",b.a.D),b.b("utils.arrayFirst",b.a.Lb),b.b("utils.arrayFilter",b.a.jb),b.b("utils.arrayGetDistinctValues",b.a.wc),b.b("utils.arrayIndexOf",b.a.A),b.b("utils.arrayMap",b.a.Mb),b.b("utils.arrayPushAll",b.a.Nb),b.b("utils.arrayRemoveItem",b.a.Pa),b.b("utils.cloneNodes",b.a.Ca),b.b("utils.createSymbolOrString",b.a.Da),b.b("utils.extend",b.a.extend),b.b("utils.fieldsIncludedWithJsonPost",b.a.Jc),b.b("utils.getFormFields",b.a.Lc),b.b("utils.objectMap",b.a.Ga),b.b("utils.peekObservable",b.a.bc),b.b("utils.postJson",b.a.Od),b.b("utils.parseJson",b.a.Nd),b.b("utils.registerEventHandler",b.a.B),b.b("utils.stringifyJson",b.a.hc),b.b("utils.range",b.a.Pd),b.b("utils.toggleDomNodeCssClass",b.a.Eb),b.b("utils.triggerEvent",b.a.Fb),b.b("utils.unwrapObservable",b.a.f),b.b("utils.objectForEach",b.a.P),b.b("utils.addOrRemoveItem",b.a.Na),b.b("utils.setTextContent",b.a.Bb),b.b("unwrap",b.a.f),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),t.apply(e,i)}}),b.a.g=new function(){var t,n,i=0,o="__ko__"+(new Date).getTime(),r={};return b.a.W?(t=function(t,n){var s=t[o];if(!s||"null"===s||!r[s]){if(!n)return e;s=t[o]="ko"+i++,r[s]={}}return r[s]},n=function(e){var t=e[o];return!!t&&(delete r[t],e[o]=null,!0)}):(t=function(e,t){var n=e[o];return!n&&t&&(n=e[o]={}),n},n=function(e){return!!e[o]&&(delete e[o],!0)}),{get:function(e,n){var i=t(e,!1);return i&&i[n]},set:function(n,i,o){(n=t(n,o!==e))&&(n[i]=o)},Ub:function(e,n,i){return(e=t(e,!0))[n]||(e[n]=i)},clear:n,Z:function(){return i+++o}}},b.b("utils.domData",b.a.g),b.b("utils.domData.clear",b.a.g.clear),b.a.K=new function(){function t(t,n){var i=b.a.g.get(t,r);return i===e&&n&&(i=[],b.a.g.set(t,r,i)),i}function n(e){if(n=t(e,!1))for(var n=n.slice(0),o=0;o<n.length;o++)n[o](e);b.a.g.clear(e),b.a.K.cleanExternalData(e),a[e.nodeType]&&i(e.childNodes,!0)}function i(e,t){for(var i,o=[],r=0;r<e.length;r++)if((!t||8===e[r].nodeType)&&(n(o[o.length]=i=e[r]),e[r]!==i))for(;r--&&-1==b.a.A(o,e[r]););}var r=b.a.g.Z(),s={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{za:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},yb:function(n,i){var o=t(n,!1);o&&(b.a.Pa(o,i),0==o.length&&b.a.g.set(n,r,e))},oa:function(e){return b.u.G((function(){s[e.nodeType]&&(n(e),a[e.nodeType]&&i(e.getElementsByTagName("*")))})),e},removeNode:function(e){b.oa(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){o&&"function"==typeof o.cleanData&&o.cleanData([e])}}},b.oa=b.a.K.oa,b.removeNode=b.a.K.removeNode,b.b("cleanNode",b.oa),b.b("removeNode",b.removeNode),b.b("utils.domNodeDisposal",b.a.K),b.b("utils.domNodeDisposal.addDisposeCallback",b.a.K.za),b.b("utils.domNodeDisposal.removeDisposeCallback",b.a.K.yb),p=[0,"",""],Z={thead:m=[1,"<table>","</table>"],tbody:m,tfoot:m,tr:[2,"<table><tbody>","</tbody></table>"],td:_=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:_,option:g=[1,"<select multiple='multiple'>","</select>"],optgroup:g},y=8>=b.a.W,b.a.ua=function(e,i){var r;if(o){if(o.parseHTML)r=o.parseHTML(e,i)||[];else if((r=o.clean([e],i))&&r[0]){for(var s=r[0];s.parentNode&&11!==s.parentNode.nodeType;)s=s.parentNode;s.parentNode&&s.parentNode.removeChild(s)}}else{(r=i)||(r=n),s=r.parentWindow||r.defaultView||t;var a,c=b.a.Db(e).toLowerCase(),l=r.createElement("div");for(a=(c=c.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&Z[c[1]]||p,c=a[0],a="ignored<div>"+a[1]+e+a[2]+"</div>","function"==typeof s.innerShiv?l.appendChild(s.innerShiv(a)):(y&&r.body.appendChild(l),l.innerHTML=a,y&&l.parentNode.removeChild(l));c--;)l=l.lastChild;r=b.a.la(l.lastChild.childNodes)}return r},b.a.Md=function(e,t){var n=b.a.ua(e,t);return n.length&&n[0].parentElement||b.a.Yb(n)},b.a.fc=function(t,n){if(b.a.Tb(t),null!==(n=b.a.f(n))&&n!==e)if("string"!=typeof n&&(n=n.toString()),o)o(t).html(n);else for(var i=b.a.ua(n,t.ownerDocument),r=0;r<i.length;r++)t.appendChild(i[r])},b.b("utils.parseHtmlFragment",b.a.ua),b.b("utils.setHtml",b.a.fc),b.aa=function(){function t(e,n){if(e)if(8==e.nodeType)null!=(i=b.aa.Uc(e.nodeValue))&&n.push({ud:e,Kd:i});else if(1==e.nodeType)for(var i=0,o=e.childNodes,r=o.length;i<r;i++)t(o[i],n)}var n={};return{Xb:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[t]=e,"\x3c!--[ko_memo:"+t+"]--\x3e"},bd:function(t,i){var o=n[t];if(o===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return o.apply(null,i||[]),!0}finally{delete n[t]}},cd:function(e,n){var i=[];t(e,i);for(var o=0,r=i.length;o<r;o++){var s=i[o].ud,a=[s];n&&b.a.Nb(a,n),b.aa.bd(i[o].Kd,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},Uc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),b.b("memoization",b.aa),b.b("memoization.memoize",b.aa.Xb),b.b("memoization.unmemoize",b.aa.bd),b.b("memoization.parseMemoText",b.aa.Uc),b.b("memoization.unmemoizeDomNodeAndDescendants",b.aa.cd),b.na=function(){function e(){if(s)for(var e,t=s,n=0;c<s;)if(e=r[c++]){if(c>t){if(5e3<=++n){c=s,b.a.Gc(Error("'Too much recursion' after processing "+n+" task groups."));break}t=s}try{e()}catch(e){b.a.Gc(e)}}}function i(){e(),c=s=r.length=0}var o,r=[],s=0,a=1,c=0;return o=t.MutationObserver?function(e){var t=n.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(i):n&&"onreadystatechange"in n.createElement("script")?function(e){var t=n.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,n.documentElement.removeChild(t),t=null,e()},n.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},{scheduler:o,zb:function(e){return s||b.na.scheduler(i),r[s++]=e,a++},cancel:function(e){(e-=a-s)>=c&&e<s&&(r[e]=null)},resetForTesting:function(){var e=s-c;return c=s=r.length=0,e},Sd:e}}(),b.b("tasks",b.na),b.b("tasks.schedule",b.na.zb),b.b("tasks.runEarly",b.na.Sd),b.Ta={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return b.$({read:e,write:function(i){clearTimeout(n),n=b.a.setTimeout((function(){e(i)}),t)}})},rateLimit:function(e,t){var n,i,o;"number"==typeof t?n=t:(n=t.timeout,i=t.method),e.Hb=!1,o="function"==typeof i?i:"notifyWhenChangesStop"==i?u:l,e.ub((function(e){return o(e,n,t)}))},deferred:function(t,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.Hb||(t.Hb=!0,t.ub((function(n){var i,o=!1;return function(){if(!o){b.na.cancel(i),i=b.na.zb(n);try{o=!0,t.notifySubscribers(e,"dirty")}finally{o=!1}}}})))},notify:function(e,t){e.equalityComparer="always"==t?null:c}};var v={undefined:1,boolean:1,number:1,string:1};b.b("extenders",b.Ta),b.ic=function(e,t,n){this.da=e,this.lc=t,this.mc=n,this.Ib=!1,this.fb=this.Jb=null,b.L(this,"dispose",this.s),b.L(this,"disposeWhenNodeIsRemoved",this.l)},b.ic.prototype.s=function(){this.Ib||(this.fb&&b.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},b.ic.prototype.l=function(e){this.Jb=e,b.a.K.za(e,this.fb=this.s.bind(this))},b.T=function(){b.a.Ab(this,A),A.qb(this)};var A={qb:function(e){e.U={change:[]},e.sc=1},subscribe:function(e,t,n){var i=this;n=n||"change";var o=new b.ic(i,t?e.bind(t):e,(function(){b.a.Pa(i.U[n],o),i.hb&&i.hb(n)}));return i.Qa&&i.Qa(n),i.U[n]||(i.U[n]=[]),i.U[n].push(o),o},notifySubscribers:function(e,t){if("change"===(t=t||"change")&&this.Gb(),this.Wa(t)){var n="change"===t&&this.ed||this.U[t].slice(0);try{b.u.xc();for(var i,o=0;i=n[o];++o)i.Ib||i.lc(e)}finally{b.u.end()}}},ob:function(){return this.sc},Dd:function(e){return this.ob()!==e},Gb:function(){++this.sc},ub:function(e){var t,n,i,o,r,s=this,a=b.O(s);s.gb||(s.gb=s.notifySubscribers,s.notifySubscribers=d);var c=e((function(){s.Ja=!1,a&&o===s&&(o=s.nc?s.nc():s());var e=n||r&&s.sb(i,o);r=n=t=!1,e&&s.gb(i=o)}));s.qc=function(e,n){n&&s.Ja||(r=!n),s.ed=s.U.change.slice(0),s.Ja=t=!0,o=e,c()},s.pc=function(e){t||(i=e,s.gb(e,"beforeChange"))},s.rc=function(){r=!0},s.gd=function(){s.sb(i,s.v(!0))&&(n=!0)}},Wa:function(e){return this.U[e]&&this.U[e].length},Bd:function(e){if(e)return this.U[e]&&this.U[e].length||0;var t=0;return b.a.P(this.U,(function(e,n){"dirty"!==e&&(t+=n.length)})),t},sb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},toString:function(){return"[object Object]"},extend:function(e){var t=this;return e&&b.a.P(e,(function(e,n){var i=b.Ta[e];"function"==typeof i&&(t=i(t,n)||t)})),t}};b.L(A,"init",A.qb),b.L(A,"subscribe",A.subscribe),b.L(A,"extend",A.extend),b.L(A,"getSubscriptionsCount",A.Bd),b.a.Ba&&b.a.setPrototypeOf(A,Function.prototype),b.T.fn=A,b.Qc=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},b.b("subscribable",b.T),b.b("isSubscribable",b.Qc),b.S=b.u=function(){function e(e){i.push(n),n=e}function t(){n=i.pop()}var n,i=[],o=0;return{xc:e,end:t,cc:function(e){if(n){if(!b.Qc(e))throw Error("Only subscribable things can act as dependencies");n.od.call(n.pd,e,e.fd||(e.fd=++o))}},G:function(n,i,o){try{return e(),n.apply(i,o||[])}finally{t()}},qa:function(){if(n)return n.o.qa()},Va:function(){if(n)return n.o.Va()},Ya:function(){if(n)return n.Ya},o:function(){if(n)return n.o}}}(),b.b("computedContext",b.S),b.b("computedContext.getDependenciesCount",b.S.qa),b.b("computedContext.getDependencies",b.S.Va),b.b("computedContext.isInitial",b.S.Ya),b.b("computedContext.registerDependency",b.S.cc),b.b("ignoreDependencies",b.Yd=b.u.G);var T=b.a.Da("_latestValue");b.ta=function(e){function t(){return 0<arguments.length?(t.sb(t[T],arguments[0])&&(t.ya(),t[T]=arguments[0],t.xa()),this):(b.u.cc(t),t[T])}return t[T]=e,b.a.Ba||b.a.extend(t,b.T.fn),b.T.fn.qb(t),b.a.Ab(t,w),b.options.deferUpdates&&b.Ta.deferred(t,!0),t};var w={equalityComparer:c,v:function(){return this[T]},xa:function(){this.notifySubscribers(this[T],"spectate"),this.notifySubscribers(this[T])},ya:function(){this.notifySubscribers(this[T],"beforeChange")}};b.a.Ba&&b.a.setPrototypeOf(w,b.T.fn);var E=b.ta.Ma="__ko_proto__";w[E]=b.ta,b.O=function(e){if((e="function"==typeof e&&e[E])&&e!==w[E]&&e!==b.o.fn[E])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!e},b.Za=function(e){return"function"==typeof e&&(e[E]===w[E]||e[E]===b.o.fn[E]&&e.Nc)},b.b("observable",b.ta),b.b("isObservable",b.O),b.b("isWriteableObservable",b.Za),b.b("isWritableObservable",b.Za),b.b("observable.fn",w),b.L(w,"peek",w.v),b.L(w,"valueHasMutated",w.xa),b.L(w,"valueWillMutate",w.ya),b.Ha=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=b.ta(e),b.a.Ab(e,b.Ha.fn),e.extend({trackArrayChanges:!0})},b.Ha.fn={remove:function(e){for(var t=this.v(),n=[],i="function"!=typeof e||b.O(e)?function(t){return t===e}:e,o=0;o<t.length;o++){var r=t[o];if(i(r)){if(0===n.length&&this.ya(),t[o]!==r)throw Error("Array modified during remove; cannot remove item");n.push(r),t.splice(o,1),o--}}return n.length&&this.xa(),n},removeAll:function(t){if(t===e){var n=this.v(),i=n.slice(0);return this.ya(),n.splice(0,n.length),this.xa(),i}return t?this.remove((function(e){return 0<=b.a.A(t,e)})):[]},destroy:function(e){var t=this.v(),n="function"!=typeof e||b.O(e)?function(t){return t===e}:e;this.ya();for(var i=t.length-1;0<=i;i--){var o=t[i];n(o)&&(o._destroy=!0)}this.xa()},destroyAll:function(t){return t===e?this.destroy((function(){return!0})):t?this.destroy((function(e){return 0<=b.a.A(t,e)})):[]},indexOf:function(e){var t=this();return b.a.A(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.ya(),this.v()[n]=t,this.xa())},sorted:function(e){var t=this().slice(0);return e?t.sort(e):t.sort()},reversed:function(){return this().slice(0).reverse()}},b.a.Ba&&b.a.setPrototypeOf(b.Ha.fn,b.ta.fn),b.a.D("pop push reverse shift sort splice unshift".split(" "),(function(e){b.Ha.fn[e]=function(){var t=this.v();this.ya(),this.zc(t,e,arguments);var n=t[e].apply(t,arguments);return this.xa(),n===t?this:n}})),b.a.D(["slice"],(function(e){b.Ha.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}})),b.Pc=function(e){return b.O(e)&&"function"==typeof e.remove&&"function"==typeof e.push},b.b("observableArray",b.Ha),b.b("isObservableArray",b.Pc),b.Ta.trackArrayChanges=function(t,n){function i(){function e(){if(l){var e,n=[].concat(t.v()||[]);t.Wa("arrayChange")&&((!c||1<l)&&(c=b.a.Pb(s,n,t.Ob)),e=c),s=n,c=null,l=0,e&&e.length&&t.notifySubscribers(e,"arrayChange")}}a?e():(a=!0,r=t.subscribe((function(){++l}),null,"spectate"),s=[].concat(t.v()||[]),c=null,o=t.subscribe(e))}if(t.Ob={},n&&"object"==typeof n&&b.a.extend(t.Ob,n),t.Ob.sparse=!0,!t.zc){var o,r,s,a=!1,c=null,l=0,u=t.Qa,d=t.hb;t.Qa=function(e){u&&u.call(t,e),"arrayChange"===e&&i()},t.hb=function(n){d&&d.call(t,n),"arrayChange"!==n||t.Wa("arrayChange")||(o&&o.s(),r&&r.s(),r=o=null,a=!1,s=e)},t.zc=function(e,t,n){function i(e,t,n){return o[o.length]={status:e,value:t,index:n}}if(a&&!l){var o=[],r=e.length,s=n.length,u=0;switch(t){case"push":u=r;case"unshift":for(t=0;t<s;t++)i("added",n[t],u+t);break;case"pop":u=r-1;case"shift":r&&i("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>n[0]?r+n[0]:n[0]),r),r=1===s?r:Math.min(t+(n[1]||0),r),s=t+s-2,u=Math.max(r,s);for(var d=[],h=[],f=2;t<u;++t,++f)t<r&&h.push(i("deleted",e[t],t)),t<s&&d.push(i("added",n[f],t));b.a.Kc(h,d);break;default:return}c=o}}}};var S=b.a.Da("_state");b.o=b.$=function(t,n,i){function o(){if(0<arguments.length){if("function"!=typeof r)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(s.nb,arguments),this}return s.ra||b.u.cc(o),(s.ka||s.J&&o.Xa())&&o.ha(),s.X}if("object"==typeof t?i=t:(i=i||{},t&&(i.read=t)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var r=i.write,s={X:e,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:i.read,nb:n||i.owner,l:i.disposeWhenNodeIsRemoved||i.l||null,Sa:i.disposeWhen||i.Sa,Rb:null,I:{},V:0,Ic:null};return o[S]=s,o.Nc="function"==typeof r,b.a.Ba||b.a.extend(o,b.T.fn),b.T.fn.qb(o),b.a.Ab(o,C),i.pure?(s.wb=!0,s.J=!0,b.a.extend(o,x)):i.deferEvaluation&&b.a.extend(o,I),b.options.deferUpdates&&b.Ta.deferred(o,!0),s.l&&(s.jc=!0,s.l.nodeType||(s.l=null)),s.J||i.deferEvaluation||o.ha(),s.l&&o.ja()&&b.a.K.za(s.l,s.Rb=function(){o.s()}),o};var C={equalityComparer:c,qa:function(){return this[S].V},Va:function(){var e=[];return b.a.P(this[S].I,(function(t,n){e[n.Ka]=n.da})),e},Vb:function(e){if(!this[S].V)return!1;var t=this.Va();return-1!==b.a.A(t,e)||!!b.a.Lb(t,(function(t){return t.Vb&&t.Vb(e)}))},uc:function(e,t,n){if(this[S].wb&&t===this)throw Error("A 'pure' computed must not be called recursively");this[S].I[e]=n,n.Ka=this[S].V++,n.La=t.ob()},Xa:function(){var e,t,n=this[S].I;for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&(t=n[e],this.Ia&&t.da.Ja||t.da.Dd(t.La)))return!0},Jd:function(){this.Ia&&!this[S].rb&&this.Ia(!1)},ja:function(){var e=this[S];return e.ka||0<e.V},Rd:function(){this.Ja?this[S].ka&&(this[S].sa=!0):this.Hc()},$c:function(e){if(e.Hb){var t=e.subscribe(this.Jd,this,"dirty"),n=e.subscribe(this.Rd,this);return{da:e,s:function(){t.s(),n.s()}}}return e.subscribe(this.Hc,this)},Hc:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[S].Ic),this[S].Ic=b.a.setTimeout((function(){e.ha(!0)}),t)):e.Ia?e.Ia(!0):e.ha(!0)},ha:function(e){var t=this[S],n=t.Sa,i=!1;if(!t.rb&&!t.ra){if(t.l&&!b.a.Sb(t.l)||n&&n()){if(!t.jc)return void this.s()}else t.jc=!1;t.rb=!0;try{i=this.zd(e)}finally{t.rb=!1}return i}},zd:function(t){var n=this[S],i=!1,o=n.wb?e:!n.V;i={qd:this,mb:n.I,Qb:n.V},b.u.xc({pd:i,od:f,o:this,Ya:o}),n.I={},n.V=0;var r=this.yd(n,i);return n.V?i=this.sb(n.X,r):(this.s(),i=!0),i&&(n.J?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=r,this.notifySubscribers(n.X,"spectate"),!n.J&&t&&this.notifySubscribers(n.X),this.rc&&this.rc()),o&&this.notifySubscribers(n.X,"awake"),i},yd:function(e,t){try{var n=e.Wc;return e.nb?n.call(e.nb):n()}finally{b.u.end(),t.Qb&&!e.J&&b.a.P(t.mb,h),e.sa=e.ka=!1}},v:function(e){var t=this[S];return(t.ka&&(e||!t.V)||t.J&&this.Xa())&&this.ha(),t.X},ub:function(e){b.T.fn.ub.call(this,e),this.nc=function(){return this[S].J||(this[S].sa?this.ha():this[S].ka=!1),this[S].X},this.Ia=function(e){this.pc(this[S].X),this[S].ka=!0,e&&(this[S].sa=!0),this.qc(this,!e)}},s:function(){var t=this[S];!t.J&&t.I&&b.a.P(t.I,(function(e,t){t.s&&t.s()})),t.l&&t.Rb&&b.a.K.yb(t.l,t.Rb),t.I=e,t.V=0,t.ra=!0,t.sa=!1,t.ka=!1,t.J=!1,t.l=e,t.Sa=e,t.Wc=e,this.Nc||(t.nb=e)}},x={Qa:function(e){var t=this,n=t[S];if(!n.ra&&n.J&&"change"==e){if(n.J=!1,n.sa||t.Xa())n.I=null,n.V=0,t.ha()&&t.Gb();else{var i=[];b.a.P(n.I,(function(e,t){i[t.Ka]=e})),b.a.D(i,(function(e,i){var o=n.I[e],r=t.$c(o.da);r.Ka=i,r.La=o.La,n.I[e]=r})),t.Xa()&&t.ha()&&t.Gb()}n.ra||t.notifySubscribers(n.X,"awake")}},hb:function(t){var n=this[S];n.ra||"change"!=t||this.Wa("change")||(b.a.P(n.I,(function(e,t){t.s&&(n.I[e]={da:t.da,Ka:t.Ka,La:t.La},t.s())})),n.J=!0,this.notifySubscribers(e,"asleep"))},ob:function(){var e=this[S];return e.J&&(e.sa||this.Xa())&&this.ha(),b.T.fn.ob.call(this)}},I={Qa:function(e){"change"!=e&&"beforeChange"!=e||this.v()}};b.a.Ba&&b.a.setPrototypeOf(C,b.T.fn);var P=b.ta.Ma;C[P]=b.o,b.Oc=function(e){return"function"==typeof e&&e[P]===C[P]},b.Fd=function(e){return b.Oc(e)&&e[S]&&e[S].wb},b.b("computed",b.o),b.b("dependentObservable",b.o),b.b("isComputed",b.Oc),b.b("isPureComputed",b.Fd),b.b("computed.fn",C),b.L(C,"peek",C.v),b.L(C,"dispose",C.s),b.L(C,"isActive",C.ja),b.L(C,"getDependenciesCount",C.qa),b.L(C,"getDependencies",C.Va),b.xb=function(e,t){return"function"==typeof e?b.o(e,t,{pure:!0}):((e=b.a.extend({},e)).pure=!0,b.o(e,t))},b.b("pureComputed",b.xb),function(){function t(i,o,r){if(r=r||new n,"object"!=typeof(i=o(i))||null===i||i===e||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var s=i instanceof Array?[]:{};return r.save(i,s),function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}(i,(function(n){var a=o(i[n]);switch(typeof a){case"boolean":case"number":case"string":case"function":s[n]=a;break;case"object":case"undefined":var c=r.get(a);s[n]=c!==e?c:t(a,o,r)}})),s}function n(){this.keys=[],this.values=[]}b.ad=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,(function(e){for(var t=0;b.O(e)&&10>t;t++)e=e();return e}))},b.toJSON=function(e,t,n){return e=b.ad(e),b.a.hc(e,t,n)},n.prototype={constructor:n,save:function(e,t){var n=b.a.A(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(t){return 0<=(t=b.a.A(this.keys,t))?this.values[t]:e}}}(),b.b("toJS",b.ad),b.b("toJSON",b.toJSON),b.Wd=function(e,t,n){function i(t){var i=b.xb(e,n).extend({ma:"always"}),o=i.subscribe((function(e){e&&(o.s(),t(e))}));return i.notifySubscribers(i.v()),o}return"function"!=typeof Promise||t?i(t.bind(n)):new Promise(i)},b.b("when",b.Wd),b.w={M:function(t){switch(b.a.R(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?b.a.g.get(t,b.c.options.$b):7>=b.a.W?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?b.w.M(t.options[t.selectedIndex]):e;default:return t.value}},cb:function(t,n,i){switch(b.a.R(t)){case"option":"string"==typeof n?(b.a.g.set(t,b.c.options.$b,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n):(b.a.g.set(t,b.c.options.$b,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof n?n:"");break;case"select":""!==n&&null!==n||(n=e);for(var o,r=-1,s=0,a=t.options.length;s<a;++s)if((o=b.w.M(t.options[s]))==n||""===o&&n===e){r=s;break}(i||0<=r||n===e&&1<t.size)&&(t.selectedIndex=r,6===b.a.W&&b.a.setTimeout((function(){t.selectedIndex=r}),0));break;default:null!==n&&n!==e||(n=""),t.value=n}}},b.b("selectExtensions",b.w),b.b("selectExtensions.readValue",b.w.M),b.b("selectExtensions.writeValue",b.w.cb),b.m=function(){function e(e){123===(e=b.a.Db(e)).charCodeAt(0)&&(e=e.slice(1,-1));var t,n=[],s=(e+="\n,").match(i),a=[],c=0;if(1<s.length){for(var l,u=0;l=s[u];++u){var d=l.charCodeAt(0);if(44===d){if(0>=c){n.push(t&&a.length?{key:t,value:a.join("")}:{unknown:t||a.join("")}),t=c=0,a=[];continue}}else if(58===d){if(!c&&!t&&1===a.length){t=a.pop();continue}}else{if(47===d&&1<l.length&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;47===d&&u&&1<l.length?(d=s[u-1].match(o))&&!r[d[0]]&&(s=(e=e.substr(e.indexOf(l)+1)).match(i),u=-1,l="/"):40===d||123===d||91===d?++c:41===d||125===d||93===d?--c:t||a.length||34!==d&&39!==d||(l=l.slice(1,-1))}a.push(l)}if(0<c)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),o=/[\])"'A-Za-z0-9_$]+$/,r={in:1,return:1,typeof:1},s={};return{Ra:[],wa:s,ac:e,vb:function(i,o){function r(e,i){var o;if(!u){var d=b.getBindingHandler(e);if(d&&d.preprocess&&!(i=d.preprocess(i,e,r)))return;(d=s[e])&&(o=i,0<=b.a.A(t,o)?o=!1:(d=o.match(n),o=null!==d&&(d[1]?"Object("+d[1]+")"+d[2]:o)),d=o),d&&c.push("'"+("string"==typeof s[e]?s[e]:e)+"':function(_z){"+o+"=_z}")}l&&(i="function(){return "+i+" }"),a.push("'"+e+"':"+i)}var a=[],c=[],l=(o=o||{}).valueAccessors,u=o.bindingParams,d="string"==typeof i?e(i):i;return b.a.D(d,(function(e){r(e.key||e.unknown,e.value)})),c.length&&r("_ko_property_writers","{"+c.join(",")+" }"),a.join(",")},Id:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},eb:function(e,t,n,i,o){e&&b.O(e)?!b.Za(e)||o&&e.v()===i||e(i):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](i)}}}(),b.b("expressionRewriting",b.m),b.b("expressionRewriting.bindingRewriteValidators",b.m.Ra),b.b("expressionRewriting.parseObjectLiteral",b.m.ac),b.b("expressionRewriting.preProcessBindings",b.m.vb),b.b("expressionRewriting._twoWayBindings",b.m.wa),b.b("jsonExpressionRewriting",b.m),b.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",b.m.vb),function(){function e(e){return 8==e.nodeType&&s.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function i(n,i){for(var o=n,r=1,s=[];o=o.nextSibling;){if(t(o)&&(b.a.g.set(o,l,!0),0==--r))return s;s.push(o),e(o)&&r++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function o(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var r=n&&"\x3c!--test--\x3e"===n.createComment("test").text,s=r?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,c={ul:!0,ol:!0},l="__ko_matchedEndComment__";b.h={ea:{},childNodes:function(t){return e(t)?i(t):t.childNodes},Ea:function(t){if(e(t))for(var n=0,i=(t=b.h.childNodes(t)).length;n<i;n++)b.removeNode(t[n]);else b.a.Tb(t)},va:function(t,n){if(e(t)){b.h.Ea(t);for(var i=t.nextSibling,o=0,r=n.length;o<r;o++)i.parentNode.insertBefore(n[o],i)}else b.a.va(t,n)},Vc:function(t,n){var i;e(t)?(i=t.nextSibling,t=t.parentNode):i=t.firstChild,i?n!==i&&t.insertBefore(n,i):t.appendChild(n)},Wb:function(t,n,i){i?(i=i.nextSibling,e(t)&&(t=t.parentNode),i?n!==i&&t.insertBefore(n,i):t.appendChild(n)):b.h.Vc(t,n)},firstChild:function(n){if(e(n))return!n.nextSibling||t(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&t(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(e(n)&&(n=o(n)),n.nextSibling&&t(n.nextSibling)){var i=n.nextSibling;if(t(i)&&!b.a.g.get(i,l))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Cd:e,Vd:function(e){return(e=(r?e.text:e.nodeValue).match(s))?e[1]:null},Sc:function(n){if(c[b.a.R(n)]){var i=n.firstChild;if(i)do{if(1===i.nodeType){var r,s=null;if(r=i.firstChild)do{if(s)s.push(r);else if(e(r)){var a=o(r,!0);a?r=a:s=[r]}else t(r)&&(s=[r])}while(r=r.nextSibling);if(r=s)for(s=i.nextSibling,a=0;a<r.length;a++)s?n.insertBefore(r[a],s):n.appendChild(r[a])}}while(i=i.nextSibling)}}}}(),b.b("virtualElements",b.h),b.b("virtualElements.allowedBindings",b.h.ea),b.b("virtualElements.emptyNode",b.h.Ea),b.b("virtualElements.insertAfter",b.h.Wb),b.b("virtualElements.prepend",b.h.Vc),b.b("virtualElements.setDomNodeChildren",b.h.va),b.ga=function(){this.nd={}},b.a.extend(b.ga.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||b.j.getComponentNameForNode(e);case 8:return b.h.Cd(e);default:return!1}},getBindings:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e):null;return b.j.tc(n,e,t,!1)},getBindingAccessors:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return b.j.tc(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return b.h.Vd(e);default:return null}},parseBindingsString:function(e,t,n,i){try{var o,r=this.nd,s=e+(i&&i.valueAccessors||"");if(!(o=r[s])){var a,c="with($context){with($data||{}){return{"+b.m.vb(e,i)+"}}}";a=new Function("$context","$element",c),o=r[s]=a}return o(t,n)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),b.ga.instance=new b.ga,b.b("bindingProvider",b.ga),function(){function i(e){var t=(e=b.a.g.get(e,v))&&e.N;t&&(e.N=null,t.Tc())}function r(e,t,n){this.node=e,this.yc=t,this.kb=[],this.H=!1,t.N||b.a.K.za(e,i),n&&n.N&&(n.N.kb.push(e),this.Kb=n)}function s(e){return function(){return e}}function a(e){return e()}function c(e){return b.a.Ga(b.u.G(e),(function(t,n){return function(){return e()[n]}}))}function l(e,t,n){return"function"==typeof e?c(e.bind(null,t,n)):b.a.Ga(e,s)}function u(e,t){return c(this.getBindings.bind(this,e,t))}function d(e,t){var n=b.h.firstChild(t);if(n){var i,o=b.ga.instance,r=o.preprocessNode;if(r){for(;i=n;)n=b.h.nextSibling(i),r.call(o,i);n=b.h.firstChild(t)}for(;i=n;)n=b.h.nextSibling(i),h(e,i)}b.i.ma(t,b.i.H)}function h(e,t){var n=e,i=1===t.nodeType;i&&b.h.Sc(t),(i||b.ga.instance.nodeHasBindings(t))&&(n=f(t,null,e).bindingContextForDescendants),n&&!Z[b.a.R(t)]&&d(n,t)}function f(t,n,i){var o,r=b.a.g.Ub(t,v,{}),s=r.hd;if(!n){if(s)throw Error("You cannot apply bindings multiple times to the same element.");r.hd=!0}if(s||(r.context=i),r.Zb||(r.Zb={}),n&&"function"!=typeof n)o=n;else{var c=b.ga.instance,l=c.getBindingAccessors||u,d=b.$((function(){return(o=n?n(i,t):l.call(c,t,i))&&(i[m]&&i[m](),i[g]&&i[g]()),o}),null,{l:t});o&&d.ja()||(d=null)}var h,f=i;if(o){var p=function(){return b.a.Ga(d?d():o,a)},_=d?function(e){return function(){return a(d()[e])}}:function(e){return o[e]};p.get=function(e){return o[e]&&a(_(e))},p.has=function(e){return e in o},b.i.H in o&&b.i.subscribe(t,b.i.H,(function(){var e=(0,o[b.i.H])();if(e){var n=b.h.childNodes(t);n.length&&e(n,b.Ec(n[0]))}})),b.i.pa in o&&(f=b.i.Cb(t,i),b.i.subscribe(t,b.i.pa,(function(){var e=(0,o[b.i.pa])();e&&b.h.firstChild(t)&&e(t)}))),r=function(e){var t=[],n={},i=[];return b.a.P(e,(function o(r){if(!n[r]){var s=b.getBindingHandler(r);s&&(s.after&&(i.push(r),b.a.D(s.after,(function(t){if(e[t]){if(-1!==b.a.A(i,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));o(t)}})),i.length--),t.push({key:r,Mc:s})),n[r]=!0}})),t}(o),b.a.D(r,(function(n){var i=n.Mc.init,r=n.Mc.update,s=n.key;if(8===t.nodeType&&!b.h.ea[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof i&&b.u.G((function(){var n=i(t,_(s),p,f.$data,f);if(n&&n.controlsDescendantBindings){if(h!==e)throw Error("Multiple bindings ("+h+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");h=s}})),"function"==typeof r&&b.$((function(){r(t,_(s),p,f.$data,f)}),null,{l:t})}catch(e){throw e.message='Unable to process binding "'+s+": "+o[s]+'"\nMessage: '+e.message,e}}))}return{shouldBindDescendants:r=h===e,bindingContextForDescendants:r&&f}}function p(t,n){return t&&t instanceof b.fa?t:new b.fa(t,e,e,n)}var m=b.a.Da("_subscribable"),_=b.a.Da("_ancestorBindingInfo"),g=b.a.Da("_dataDependency");b.c={};var Z={script:!0,textarea:!0,template:!0};b.getBindingHandler=function(e){return b.c[e]};var y={};b.fa=function(t,n,i,o,r){function s(){var e=d?u():u,t=b.a.f(e);return n?(b.a.extend(c,n),_ in n&&(c[_]=n[_])):(c.$parents=[],c.$root=t,c.ko=b),c[m]=a,l?t=c.$data:(c.$rawData=e,c.$data=t),i&&(c[i]=t),o&&o(c,n,t),n&&n[m]&&!b.S.o().Vb(n[m])&&n[m](),h&&(c[g]=h),c.$data}var a,c=this,l=t===y,u=l?e:t,d="function"==typeof u&&!b.O(u),h=r&&r.dataDependency;r&&r.exportDependencies?s():((a=b.xb(s)).v(),a.ja()?a.equalityComparer=null:c[m]=e)},b.fa.prototype.createChildContext=function(e,t,n,i){if(!i&&t&&"object"==typeof t&&(t=(i=t).as,n=i.extend),t&&i&&i.noChildContext){var o="function"==typeof e&&!b.O(e);return new b.fa(y,this,null,(function(i){n&&n(i),i[t]=o?e():e}),i)}return new b.fa(e,this,t,(function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)}),i)},b.fa.prototype.extend=function(e,t){return new b.fa(y,this,null,(function(t){b.a.extend(t,"function"==typeof e?e(t):e)}),t)};var v=b.a.g.Z();r.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},r.prototype.sd=function(e){b.a.Pa(this.kb,e),!this.kb.length&&this.H&&this.Cc()},r.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,b.a.K.yb(this.node,i),b.i.ma(this.node,b.i.pa),this.Tc())},b.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(e,t,n,i,o){var r=b.a.g.Ub(e,v,{});return r.Fa||(r.Fa=new b.T),o&&o.notifyImmediately&&r.Zb[t]&&b.u.G(n,i,[e]),r.Fa.subscribe(n,i,t)},ma:function(t,n){var i=b.a.g.get(t,v);if(i&&(i.Zb[n]=!0,i.Fa&&i.Fa.notifySubscribers(t,n),n==b.i.H))if(i.N)i.N.Cc();else if(i.N===e&&i.Fa&&i.Fa.Wa(b.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")},Cb:function(e,t){var n=b.a.g.Ub(e,v,{});return n.N||(n.N=new r(e,n,t[_])),t[_]==n?t:t.extend((function(e){e[_]=n}))}},b.Td=function(e){return(e=b.a.g.get(e,v))&&e.context},b.ib=function(e,t,n){return 1===e.nodeType&&b.h.Sc(e),f(e,t,p(n))},b.ld=function(e,t,n){return n=p(n),b.ib(e,l(t,n,e),n)},b.Oa=function(e,t){1!==t.nodeType&&8!==t.nodeType||d(p(e),t)},b.vc=function(e,i,r){if(!o&&t.jQuery&&(o=t.jQuery),2>arguments.length){if(!(i=n.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!i||1!==i.nodeType&&8!==i.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");h(p(e,r),i)},b.Dc=function(t){return!t||1!==t.nodeType&&8!==t.nodeType?e:b.Td(t)},b.Ec=function(t){return(t=b.Dc(t))?t.$data:e},b.b("bindingHandlers",b.c),b.b("bindingEvent",b.i),b.b("bindingEvent.subscribe",b.i.subscribe),b.b("bindingEvent.startPossiblyAsyncContentBinding",b.i.Cb),b.b("applyBindings",b.vc),b.b("applyBindingsToDescendants",b.Oa),b.b("applyBindingAccessorsToNode",b.ib),b.b("applyBindingsToNode",b.ld),b.b("contextFor",b.Dc),b.b("dataFor",b.Ec)}(),function(e){function t(t,i){var s,a=Object.prototype.hasOwnProperty.call(o,t)?o[t]:e;a?a.subscribe(i):((a=o[t]=new b.T).subscribe(i),n(t,(function(e,n){var i=!(!n||!n.synchronous);r[t]={definition:e,Gd:i},delete o[t],s||i?a.notifySubscribers(e):b.na.zb((function(){a.notifySubscribers(e)}))})),s=!0)}function n(e,t){i("getConfig",[e],(function(n){n?i("loadComponent",[e,n],(function(e){t(e,n)})):t(null,null)}))}function i(t,n,o,r){r||(r=b.j.loaders.slice(0));var s=r.shift();if(s){var a=s[t];if(a){var c=!1;if(a.apply(s,n.concat((function(e){c?o(null):null!==e?o(e):i(t,n,o,r)})))!==e&&(c=!0,!s.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(t,n,o,r)}else o(null)}var o={},r={};b.j={get:function(n,i){var o=Object.prototype.hasOwnProperty.call(r,n)?r[n]:e;o?o.Gd?b.u.G((function(){i(o.definition)})):b.na.zb((function(){i(o.definition)})):t(n,i)},Bc:function(e){delete r[e]},oc:i},b.j.loaders=[],b.b("components",b.j),b.b("components.get",b.j.get),b.b("components.clearCachedDefinition",b.j.Bc)}(),function(){function e(e,t,n,i){function o(){0==--a&&i(r)}var r={},a=2,c=n.template;n=n.viewModel,c?s(t,c,(function(t){b.j.oc("loadTemplate",[e,t],(function(e){r.template=e,o()}))})):o(),n?s(t,n,(function(t){b.j.oc("loadViewModel",[e,t],(function(e){r[u]=e,o()}))})):o()}function i(e,t,n){if("function"==typeof t)n((function(e){return new t(e)}));else if("function"==typeof t[u])n(t[u]);else if("instance"in t){var o=t.instance;n((function(){return o}))}else"viewModel"in t?i(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function o(e){switch(b.a.R(e)){case"script":return b.a.ua(e.text);case"textarea":return b.a.ua(e.value);case"template":if(r(e.content))return b.a.Ca(e.content.childNodes)}return b.a.Ca(e.childNodes)}function r(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function s(e,n,i){"string"==typeof n.require?a||t.require?(a||t.require)([n.require],(function(e){e&&"object"==typeof e&&e.Xd&&e.default&&(e=e.default),i(e)})):e("Uses require, but no AMD loader is present"):i(n)}function c(e){return function(t){throw Error("Component '"+e+"': "+t)}}var l={};b.j.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(b.j.tb(e))throw Error("Component "+e+" is already registered");l[e]=t},b.j.tb=function(e){return Object.prototype.hasOwnProperty.call(l,e)},b.j.unregister=function(e){delete l[e],b.j.Bc(e)},b.j.Fc={getConfig:function(e,t){t(b.j.tb(e)?l[e]:null)},loadComponent:function(t,n,i){var o=c(t);s(o,n,(function(n){e(t,o,n,i)}))},loadTemplate:function(e,i,s){if(e=c(e),"string"==typeof i)s(b.a.ua(i));else if(i instanceof Array)s(i);else if(r(i))s(b.a.la(i.childNodes));else if(i.element)if(i=i.element,t.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)s(o(i));else if("string"==typeof i){var a=n.getElementById(i);a?s(o(a)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i);else e("Unknown template value: "+i)},loadViewModel:function(e,t,n){i(c(e),t,n)}};var u="createViewModel";b.b("components.register",b.j.register),b.b("components.isRegistered",b.j.tb),b.b("components.unregister",b.j.unregister),b.b("components.defaultLoader",b.j.Fc),b.j.loaders.push(b.j.Fc),b.j.dd=l}(),function(){function e(e,n){if(i=e.getAttribute("params")){var i=t.parseBindingsString(i,n,e,{valueAccessors:!0,bindingParams:!0}),o=(i=b.a.Ga(i,(function(t){return b.o(t,null,{l:e})})),b.a.Ga(i,(function(t){var n=t.v();return t.ja()?b.o({read:function(){return b.a.f(t())},write:b.Za(n)&&function(e){t()(e)},l:e}):n})));return Object.prototype.hasOwnProperty.call(o,"$raw")||(o.$raw=i),o}return{$raw:{}}}b.j.getComponentNameForNode=function(e){var t=b.a.R(e);if(b.j.tb(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=b.a.W&&e.tagName===t))return t},b.j.tc=function(t,n,i,o){if(1===n.nodeType){var r=b.j.getComponentNameForNode(n);if(r){if((t=t||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var s={name:r,params:e(n,i)};t.component=o?function(){return s}:s}}return t};var t=new b.ga;9>b.a.W&&(b.j.register=function(e){return function(t){return e.apply(this,arguments)}}(b.j.register),n.createDocumentFragment=function(e){return function(){var t,n=e(),i=b.j.dd;for(t in i);return n}}(n.createDocumentFragment))}(),function(){var e=0;b.c.component={init:function(t,n,i,o,r){function s(){var e=a&&a.dispose;"function"==typeof e&&e.call(a),l&&l.s(),c=a=l=null}var a,c,l,u=b.a.la(b.h.childNodes(t));return b.h.Ea(t),b.a.K.za(t,s),b.o((function(){var i,o,d=b.a.f(n());if("string"==typeof d?i=d:(i=b.a.f(d.name),o=b.a.f(d.params)),!i)throw Error("No component name specified");var h=b.i.Cb(t,r),f=c=++e;b.j.get(i,(function(e){if(c===f){if(s(),!e)throw Error("Unknown component '"+i+"'");!function(e,t,n){if(!(t=t.template))throw Error("Component '"+e+"' has no template");e=b.a.Ca(t),b.h.va(n,e)}(i,e,t);var n=function(e,t,n){var i=e.createViewModel;return i?i.call(e,t,n):t}(e,o,{element:t,templateNodes:u});e=h.createChildContext(n,{extend:function(e){e.$component=n,e.$componentTemplateNodes=u}}),n&&n.koDescendantsComplete&&(l=b.i.subscribe(t,b.i.pa,n.koDescendantsComplete,n)),a=n,b.Oa(e,t)}}))}),null,{l:t}),{controlsDescendantBindings:!0}}},b.h.ea.component=!0}();var D={class:"className",for:"htmlFor"};b.c.attr={update:function(t,n){var i=b.a.f(n())||{};b.a.P(i,(function(n,i){i=b.a.f(i);var o=n.indexOf(":"),r=(o="lookupNamespaceURI"in t&&0<o&&t.lookupNamespaceURI(n.substr(0,o)),!1===i||null===i||i===e);r?o?t.removeAttributeNS(o,n):t.removeAttribute(n):i=i.toString(),8>=b.a.W&&n in D?(n=D[n],r?t.removeAttribute(n):t[n]=i):r||(o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)),"name"===n&&b.a.Yc(t,r?"":i)}))}},b.c.checked={after:["value","attr"],init:function(t,n,i){function o(){var o=t.checked,c=r();if(!b.S.Ya()&&(o||!a&&!b.S.qa())){var d=b.u.G(n);if(l){var f=u?d.v():d,p=h;h=c,p!==c?o&&(b.a.Na(f,c,!0),b.a.Na(f,p,!1)):b.a.Na(f,c,o),u&&b.Za(d)&&d(f)}else s&&(c===e?c=o:o||(c=e)),b.m.eb(d,i,"checked",c,!0)}}var r=b.xb((function(){return i.has("checkedValue")?b.a.f(i.get("checkedValue")):d?i.has("value")?b.a.f(i.get("value")):t.value:void 0})),s="checkbox"==t.type,a="radio"==t.type;if(s||a){var c=n(),l=s&&b.a.f(c)instanceof Array,u=!(l&&c.push&&c.splice),d=a||l,h=l?r():e;a&&!t.name&&b.c.uniqueName.init(t,(function(){return!0})),b.o(o,null,{l:t}),b.a.B(t,"click",o),b.o((function(){var i=b.a.f(n()),o=r();l?(t.checked=0<=b.a.A(i,o),h=o):t.checked=s&&o===e?!!i:r()===i}),null,{l:t}),c=e}}},b.m.wa.checked=!0,b.c.checkedValue={update:function(e,t){e.value=b.a.f(t())}},b.c.class={update:function(e,t){var n=b.a.Db(b.a.f(t()));b.a.Eb(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,b.a.Eb(e,n,!0)}},b.c.css={update:function(e,t){var n=b.a.f(t());null!==n&&"object"==typeof n?b.a.P(n,(function(t,n){n=b.a.f(n),b.a.Eb(e,t,n)})):b.c.class.update(e,t)}},b.c.enable={update:function(e,t){var n=b.a.f(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},b.c.disable={update:function(e,t){b.c.enable.update(e,(function(){return!b.a.f(t())}))}},b.c.event={init:function(e,t,n,i,o){var r=t()||{};b.a.P(r,(function(r){"string"==typeof r&&b.a.B(e,r,(function(e){var s,a=t()[r];if(a){try{var c=b.a.la(arguments);i=o.$data,c.unshift(i),s=a.apply(i,c)}finally{!0!==s&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(r+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}}))}))}},b.c.foreach={Rc:function(e){return function(){var t=e(),n=b.a.bc(t);return n&&"number"!=typeof n.length?(b.a.f(t),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:b.ba.Ma}):{foreach:t,templateEngine:b.ba.Ma}}},init:function(e,t){return b.c.template.init(e,b.c.foreach.Rc(t))},update:function(e,t,n,i,o){return b.c.template.update(e,b.c.foreach.Rc(t),n,i,o)}},b.m.Ra.foreach=!1,b.h.ea.foreach=!0,b.c.hasfocus={init:function(e,t,n){function i(i){e.__ko_hasfocusUpdating=!0;var o=e.ownerDocument;if("activeElement"in o){var r;try{r=o.activeElement}catch(e){r=o.body}i=r===e}o=t(),b.m.eb(o,n,"hasfocus",i,!0),e.__ko_hasfocusLastValue=i,e.__ko_hasfocusUpdating=!1}var o=i.bind(null,!0),r=i.bind(null,!1);b.a.B(e,"focus",o),b.a.B(e,"focusin",o),b.a.B(e,"blur",r),b.a.B(e,"focusout",r),e.__ko_hasfocusLastValue=!1},update:function(e,t){var n=!!b.a.f(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),!n&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),b.u.G(b.a.Fb,null,[e,n?"focusin":"focusout"]))}},b.m.wa.hasfocus=!0,b.c.hasFocus=b.c.hasfocus,b.m.wa.hasFocus="hasfocus",b.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){b.a.fc(e,t())}},function(){function e(e,t,n){b.c[e]={init:function(e,i,o,r,s){var a,c,l,u,d,h={};if(t){r=o.get("as");var f=o.get("noChildContext");h={as:r,noChildContext:f,exportDependencies:d=!(r&&f)}}return u=(l="render"==o.get("completeOn"))||o.has(b.i.pa),b.o((function(){var o,r=b.a.f(i()),f=!n!=!r,p=!c;(d||f!==a)&&(u&&(s=b.i.Cb(e,s)),f&&(t&&!d||(h.dataDependency=b.S.o()),o=t?s.createChildContext("function"==typeof r?r:i,h):b.S.qa()?s.extend(null,h):s),p&&b.S.qa()&&(c=b.a.Ca(b.h.childNodes(e),!0)),f?(p||b.h.va(e,b.a.Ca(c)),b.Oa(o,e)):(b.h.Ea(e),l||b.i.ma(e,b.i.H)),a=f)}),null,{l:e}),{controlsDescendantBindings:!0}}},b.m.Ra[e]=!1,b.h.ea[e]=!0}e("if"),e("ifnot",!1,!0),e("with",!0)}(),b.c.let={init:function(e,t,n,i,o){return t=o.extend(t),b.Oa(t,e),{controlsDescendantBindings:!0}}},b.h.ea.let=!0;var O={};b.c.options={init:function(e){if("select"!==b.a.R(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,i){function o(){return b.a.jb(t.options,(function(e){return e.selected}))}function r(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}function s(e,n){if(p&&u)b.i.ma(t,b.i.H);else if(f.length){var i=0<=b.a.A(f,b.w.M(n[0]));b.a.Zc(n[0],i),p&&!i&&b.u.G(b.a.Fb,null,[t,"change"])}}var a=t.multiple,c=0!=t.length&&a?t.scrollTop:null,l=b.a.f(n()),u=i.get("valueAllowUnset")&&i.has("value"),d=i.get("optionsIncludeDestroyed");n={};var h,f=[];u||(a?f=b.a.Mb(o(),b.w.M):0<=t.selectedIndex&&f.push(b.w.M(t.options[t.selectedIndex]))),l&&(void 0===l.length&&(l=[l]),h=b.a.jb(l,(function(t){return d||t===e||null===t||!b.a.f(t._destroy)})),i.has("optionsCaption")&&null!==(l=b.a.f(i.get("optionsCaption")))&&l!==e&&h.unshift(O));var p=!1;n.beforeRemove=function(e){t.removeChild(e)},l=s,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(l=function(t,n){s(0,n),b.u.G(i.get("optionsAfterRender"),null,[n[0],t!==O?t:e])}),b.a.ec(t,h,(function(n,o,s){return s.length&&(f=!u&&s[0].selected?[b.w.M(s[0])]:[],p=!0),o=t.ownerDocument.createElement("option"),n===O?(b.a.Bb(o,i.get("optionsCaption")),b.w.cb(o,e)):(s=r(n,i.get("optionsValue"),n),b.w.cb(o,b.a.f(s)),n=r(n,i.get("optionsText"),s),b.a.Bb(o,n)),[o]}),n,l),u||(a?f.length&&o().length<f.length:f.length&&0<=t.selectedIndex?b.w.M(t.options[t.selectedIndex])!==f[0]:f.length||0<=t.selectedIndex)&&b.u.G(b.a.Fb,null,[t,"change"]),(u||b.S.Ya())&&b.i.ma(t,b.i.H),b.a.wd(t),c&&20<Math.abs(c-t.scrollTop)&&(t.scrollTop=c)}},b.c.options.$b=b.a.g.Z(),b.c.selectedOptions={init:function(e,t,n){function i(){var i=t(),o=[];b.a.D(e.getElementsByTagName("option"),(function(e){e.selected&&o.push(b.w.M(e))})),b.m.eb(i,n,"selectedOptions",o)}function o(){var n=b.a.f(t()),i=e.scrollTop;n&&"number"==typeof n.length&&b.a.D(e.getElementsByTagName("option"),(function(e){var t=0<=b.a.A(n,b.w.M(e));e.selected!=t&&b.a.Zc(e,t)})),e.scrollTop=i}if("select"!=b.a.R(e))throw Error("selectedOptions binding applies only to SELECT elements");var r;b.i.subscribe(e,b.i.H,(function(){r?i():(b.a.B(e,"change",i),r=b.o(o,null,{l:e}))}),null,{notifyImmediately:!0})},update:function(){}},b.m.wa.selectedOptions=!0,b.c.style={update:function(t,n){var i=b.a.f(n()||{});b.a.P(i,(function(n,i){if(null!==(i=b.a.f(i))&&i!==e&&!1!==i||(i=""),o)o(t).css(n,i);else if(/^--/.test(n))t.style.setProperty(n,i);else{n=n.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}));var r=t.style[n];t.style[n]=i,i===r||t.style[n]!=r||isNaN(i)||(t.style[n]=i+"px")}}))}},b.c.submit={init:function(e,t,n,i,o){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");b.a.B(e,"submit",(function(n){var i,r=t();try{i=r.call(o.$data,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}}))}},b.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){b.a.Bb(e,t())}},b.h.ea.text=!0,function(){if(t&&t.navigator){var n,i,o,r,s,a=function(e){if(e)return parseFloat(e[1])},c=t.navigator.userAgent;(n=t.opera&&t.opera.version&&parseInt(t.opera.version()))||(s=a(c.match(/Edge\/([^ ]+)$/)))||a(c.match(/Chrome\/([^ ]+)/))||(i=a(c.match(/Version\/([^ ]+) Safari/)))||(o=a(c.match(/Firefox\/([^ ]+)/)))||(r=b.a.W||a(c.match(/MSIE ([^ ]+)/)))||(r=a(c.match(/rv:([^ )]+)/)))}if(8<=r&&10>r)var l=b.a.g.Z(),u=b.a.g.Z(),d=function(e){var t=this.activeElement;(t=t&&b.a.g.get(t,u))&&t(e)},h=function(e,t){var n=e.ownerDocument;b.a.g.get(n,l)||(b.a.g.set(n,l,!0),b.a.B(n,"selectionchange",d)),b.a.g.set(e,u,t)};b.c.textInput={init:function(t,a,c){function l(e,n){b.a.B(t,e,n)}function u(){f||(p=t.value,f=b.a.setTimeout(d,4))}function d(){clearTimeout(f),p=f=e;var n=t.value;m!==n&&(m=n,b.m.eb(a(),c,"textInput",n))}var f,p,m=t.value,_=9==b.a.W?u:d,g=!1;r&&l("keypress",d),11>r&&l("propertychange",(function(e){g||"value"!==e.propertyName||_(e)})),8==r&&(l("keyup",d),l("keydown",d)),h&&(h(t,_),l("dragend",u)),(!r||9<=r)&&l("input",_),5>i&&"textarea"===b.a.R(t)?(l("keydown",u),l("paste",u),l("cut",u)):11>n?l("keydown",u):4>o?(l("DOMAutoComplete",d),l("dragdrop",d),l("drop",d)):s&&"number"===t.type&&l("keydown",u),l("change",d),l("blur",d),b.o((function n(){var i=b.a.f(a());null!==i&&i!==e||(i=""),p!==e&&i===p?b.a.setTimeout(n,4):t.value!==i&&(g=!0,t.value=i,g=!1,m=t.value)}),null,{l:t})}},b.m.wa.textInput=!0,b.c.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),b.c.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++b.c.uniqueName.rd;b.a.Yc(e,n)}}},b.c.uniqueName.rd=0,b.c.using={init:function(e,t,n,i,o){var r;return n.has("as")&&(r={as:n.get("as"),noChildContext:n.get("noChildContext")}),t=o.createChildContext(t,r),b.Oa(t,e),{controlsDescendantBindings:!0}}},b.h.ea.using=!0,b.c.value={init:function(t,n,i){var o=b.a.R(t),r="input"==o;if(!r||"checkbox"!=t.type&&"radio"!=t.type){var s=[],a=i.get("valueUpdate"),c=!1,l=null;a&&(s="string"==typeof a?[a]:b.a.wc(a),b.a.Pa(s,"change"));var u,d,h=function(){l=null,c=!1;var e=n(),o=b.w.M(t);b.m.eb(e,i,"value",o)};!b.a.W||!r||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=b.a.A(s,"propertychange")||(b.a.B(t,"propertychange",(function(){c=!0})),b.a.B(t,"focus",(function(){c=!1})),b.a.B(t,"blur",(function(){c&&h()}))),b.a.D(s,(function(e){var n=h;b.a.Ud(e,"after")&&(n=function(){l=b.w.M(t),b.a.setTimeout(h,0)},e=e.substring(5)),b.a.B(t,e,n)})),u=r&&"file"==t.type?function(){var i=b.a.f(n());null===i||i===e||""===i?t.value="":b.u.G(h)}:function(){var r=b.a.f(n()),s=b.w.M(t);null!==l&&r===l?b.a.setTimeout(u,0):r===s&&s!==e||("select"===o?(s=i.get("valueAllowUnset"),b.w.cb(t,r,s),s||r===b.w.M(t)||b.u.G(h)):b.w.cb(t,r))},"select"===o?b.i.subscribe(t,b.i.H,(function(){d?i.get("valueAllowUnset")?u():h():(b.a.B(t,"change",h),d=b.o(u,null,{l:t}))}),null,{notifyImmediately:!0}):(b.a.B(t,"change",h),b.o(u,null,{l:t}))}else b.ib(t,{checkedValue:n})},update:function(){}},b.m.wa.value=!0,b.c.visible={update:function(e,t){var n=b.a.f(t()),i="none"!=e.style.display;n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},b.c.hidden={update:function(e,t){b.c.visible.update(e,(function(){return!b.a.f(t())}))}},function(e){b.c[e]={init:function(t,n,i,o,r){return b.c.event.init.call(this,t,(function(){var t={};return t[e]=n(),t}),i,o,r)}}}("click"),b.ca=function(){},b.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},b.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},b.ca.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var i=(t=t||n).getElementById(e);if(!i)throw Error("Cannot find template with ID "+e);return new b.C.F(i)}if(1==e.nodeType||8==e.nodeType)return new b.C.ia(e);throw Error("Unknown template type: "+e)},b.ca.prototype.renderTemplate=function(e,t,n,i){return e=this.makeTemplateSource(e,i),this.renderTemplateSource(e,t,n,i)},b.ca.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},b.ca.prototype.rewriteTemplate=function(e,t,n){t=t((e=this.makeTemplateSource(e,n)).text()),e.text(t),e.data("isRewritten",!0)},b.b("templateEngine",b.ca),b.kc=function(){function e(e,t,n,i){e=b.m.ac(e);for(var o=b.m.Ra,r=0;r<e.length;r++){var s=e[r].key;if(Object.prototype.hasOwnProperty.call(o,s)){var a=o[s];if("function"==typeof a){if(s=a(e[r].value))throw Error(s)}else if(!a)throw Error("This template engine does not support the '"+s+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+b.m.vb(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,(function(e){return b.kc.Ld(e,t)}),n)},Ld:function(i,o){return i.replace(t,(function(t,n,i,r,s){return e(s,n,i,o)})).replace(n,(function(t,n){return e(n,"\x3c!-- ko --\x3e","#comment",o)}))},md:function(e,t){return b.aa.Xb((function(n,i){var o=n.nextSibling;o&&o.nodeName.toLowerCase()===t&&b.ib(o,e,i)}))}}}(),b.b("__tr_ambtns",b.kc.md),function(){b.C={},b.C.F=function(e){if(this.F=e){var t=b.a.R(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},b.C.F.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[e];var t=arguments[0];"innerHTML"===e?b.a.fc(this.F,t):this.F[e]=t};var t=b.a.g.Z()+"_";b.C.F.prototype.data=function(e){if(1===arguments.length)return b.a.g.get(this.F,t+e);b.a.g.set(this.F,t+e,arguments[1])};var n=b.a.g.Z();b.C.F.prototype.nodes=function(){var t=this.F;if(0==arguments.length){var i=b.a.g.get(t,n)||{},o=i.lb||(3===this.ab?t.content:4===this.ab?t:e);if(!o||i.jd){var r=this.text();r&&r!==i.bb&&(o=b.a.Md(r,t.ownerDocument),b.a.g.set(t,n,{lb:o,bb:r,jd:!0}))}return o}i=arguments[0],this.ab!==e&&this.text(""),b.a.g.set(t,n,{lb:i})},b.C.ia=function(e){this.F=e},b.C.ia.prototype=new b.C.F,b.C.ia.prototype.constructor=b.C.ia,b.C.ia.prototype.text=function(){if(0==arguments.length){var t=b.a.g.get(this.F,n)||{};return t.bb===e&&t.lb&&(t.bb=t.lb.innerHTML),t.bb}b.a.g.set(this.F,n,{bb:arguments[0]})},b.b("templateSources",b.C),b.b("templateSources.domElement",b.C.F),b.b("templateSources.anonymousTemplate",b.C.ia)}(),function(){function t(e,t,n){var i;for(t=b.h.nextSibling(t);e&&(i=e)!==t;)n(i,e=b.h.nextSibling(i))}function n(e,n){if(e.length){var i=e[0],o=e[e.length-1],r=i.parentNode,s=b.ga.instance,a=s.preprocessNode;if(a){if(t(i,o,(function(e,t){var n=e.previousSibling,r=a.call(s,e);r&&(e===i&&(i=r[0]||t),e===o&&(o=r[r.length-1]||n))})),e.length=0,!i)return;i===o?e.push(i):(e.push(i,o),b.a.Ua(e,r))}t(i,o,(function(e){1!==e.nodeType&&8!==e.nodeType||b.vc(n,e)})),t(i,o,(function(e){1!==e.nodeType&&8!==e.nodeType||b.aa.cd(e,[n])})),b.a.Ua(e,r)}}function i(e){return e.nodeType?e:0<e.length?e[0]:null}function o(e,t,o,r,a){a=a||{};var c=(e&&i(e)||o||{}).ownerDocument,l=a.templateEngine||s;if(b.kc.xd(o,l,c),"number"!=typeof(o=l.renderTemplate(o,r,a,c)).length||0<o.length&&"number"!=typeof o[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(c=!1,t){case"replaceChildren":b.h.va(e,o),c=!0;break;case"replaceNode":b.a.Xc(e,o),c=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return c&&(n(o,r),a.afterRender&&b.u.G(a.afterRender,null,[o,r[a.as||"$data"]]),"replaceChildren"==t&&b.i.ma(e,b.i.H)),o}function r(e,t,n){return b.O(e)?e():"function"==typeof e?e(t,n):e}var s;b.gc=function(t){if(t!=e&&!(t instanceof b.ca))throw Error("templateEngine must inherit from ko.templateEngine");s=t},b.dc=function(t,n,a,c,l){if(((a=a||{}).templateEngine||s)==e)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",c){var u=i(c);return b.$((function(){var e=n&&n instanceof b.fa?n:new b.fa(n,null,null,null,{exportDependencies:!0}),s=r(t,e.$data,e);e=o(c,l,s,e,a),"replaceNode"==l&&(u=i(c=e))}),null,{Sa:function(){return!u||!b.a.Sb(u)},l:u&&"replaceNode"==l?u.parentNode:u})}return b.aa.Xb((function(e){b.dc(t,n,a,e,"replaceNode")}))},b.Qd=function(t,i,s,a,c){function l(e,t){b.u.G(b.a.ec,null,[a,e,d,s,u,t]),b.i.ma(a,b.i.H)}function u(e,t){n(t,h),s.afterRender&&s.afterRender(t,e),h=null}function d(e,n){h=c.createChildContext(e,{as:f,noChildContext:s.noChildContext,extend:function(e){e.$index=n,f&&(e[f+"Index"]=n)}});var i=r(t,e,h);return o(a,"ignoreTargetNode",i,h,s)}var h,f=s.as,p=!1===s.includeDestroyed||b.options.foreachHidesDestroyed&&!s.includeDestroyed;if(p||s.beforeRemove||!b.Pc(i))return b.$((function(){var t=b.a.f(i)||[];void 0===t.length&&(t=[t]),p&&(t=b.a.jb(t,(function(t){return t===e||null===t||!b.a.f(t._destroy)}))),l(t)}),null,{l:a});l(i.v());var m=i.subscribe((function(e){l(i(),e)}),null,"arrayChange");return m.l(a),m};var a=b.a.g.Z(),c=b.a.g.Z();b.c.template={init:function(e,t){var n=b.a.f(t());if("string"==typeof n||"name"in n)b.h.Ea(e);else if("nodes"in n){if(n=n.nodes||[],b.O(n))throw Error('The "nodes" option must be a plain, non-observable array.');var i=n[0]&&n[0].parentNode;i&&b.a.g.get(i,c)||(i=b.a.Yb(n),b.a.g.set(i,c,!0)),new b.C.ia(e).nodes(i)}else{if(!(0<(n=b.h.childNodes(e)).length))throw Error("Anonymous template defined, but no template content was provided");i=b.a.Yb(n),new b.C.ia(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(t,n,i,o,r){var s=n();i=!0,o=null,"string"==typeof(n=b.a.f(s))?n={}:(s="name"in n?n.name:t,"if"in n&&(i=b.a.f(n.if)),i&&"ifnot"in n&&(i=!b.a.f(n.ifnot)),i&&!s&&(i=!1)),"foreach"in n?o=b.Qd(s,i&&n.foreach||[],n,t,r):i?(i=r,"data"in n&&(i=r.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),o=b.dc(s,i,n,t)):b.h.Ea(t),r=o,(n=b.a.g.get(t,a))&&"function"==typeof n.s&&n.s(),b.a.g.set(t,a,!r||r.ja&&!r.ja()?e:r)}},b.m.Ra.template=function(e){return 1==(e=b.m.ac(e)).length&&e[0].unknown||b.m.Id(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},b.h.ea.template=!0}(),b.b("setTemplateEngine",b.gc),b.b("renderTemplate",b.dc),b.a.Kc=function(e,t,n){var i,o,r,s,a;if(e.length&&t.length)for(i=o=0;(!n||i<n)&&(s=e[o]);++o){for(r=0;a=t[r];++r)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(r,1),i=r=0;break}i+=r}},b.a.Pb=function(){function e(e,t,n,i,o){var r,s,a,c,l,u=Math.min,d=Math.max,h=[],f=e.length,p=t.length,m=p-f||1,_=f+p+1;for(r=0;r<=f;r++)for(c=a,h.push(a=[]),l=u(p,r+m),s=d(0,r-1);s<=l;s++)a[s]=s?r?e[r-1]===t[s-1]?c[s-1]:u(c[s]||_,a[s-1]||_)+1:s+1:r+1;for(u=[],d=[],m=[],r=f,s=p;r||s;)p=h[r][s]-1,s&&p===h[r][s-1]?d.push(u[u.length]={status:n,value:t[--s],index:s}):r&&p===h[r-1][s]?m.push(u[u.length]={status:i,value:e[--r],index:r}):(--s,--r,o.sparse||u.push({status:"retained",value:t[s]}));return b.a.Kc(m,d,!o.dontLimitMoves&&10*f),u.reverse()}return function(t,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},n=n||[],(t=t||[]).length<n.length?e(t,n,"added","deleted",i):e(n,t,"deleted","added",i)}}(),b.b("utils.compareArrays",b.a.Pb),function(){function t(t,n,i,o,r){var s=[],a=b.$((function(){var e=n(i,r,b.a.Ua(s,t))||[];0<s.length&&(b.a.Xc(s,e),o&&b.u.G(o,null,[i,e,r])),s.length=0,b.a.Nb(s,e)}),null,{l:t,Sa:function(){return!b.a.kd(s)}});return{Y:s,$:a.ja()?a:e}}var n=b.a.g.Z(),i=b.a.g.Z();b.a.ec=function(o,r,s,a,c,l){function u(e){f={Aa:e,pb:b.ta(A++)},y.push(f),Z||C.push(f)}function d(e){f=g[e],A!==f.pb.v()&&S.push(f),f.pb(A++),b.a.Ua(f.Y,o),y.push(f)}function h(e,t){if(e)for(var n=0,i=t.length;n<i;n++)b.a.D(t[n].Y,(function(i){e(i,n,t[n].Aa)}))}void 0===(r=r||[]).length&&(r=[r]),a=a||{};var f,p,m,_,g=b.a.g.get(o,n),Z=!g,y=[],v=0,A=0,T=[],w=[],E=[],S=[],C=[],x=0;if(Z)b.a.D(r,u);else{if(!l||g&&g._countWaitingForRemove){var I=b.a.Mb(g,(function(e){return e.Aa}));l=b.a.Pb(I,r,{dontLimitMoves:a.dontLimitMoves,sparse:!0})}var P,D,O;for(I=0;P=l[I];I++)switch(D=P.moved,O=P.index,P.status){case"deleted":for(;v<O;)d(v++);D===e&&((f=g[v]).$&&(f.$.s(),f.$=e),b.a.Ua(f.Y,o).length&&(a.beforeRemove&&(y.push(f),x++,f.Aa===i?f=null:E.push(f)),f&&T.push.apply(T,f.Y))),v++;break;case"added":for(;A<O;)d(v++);D!==e?(w.push(y.length),d(D)):u(P.value)}for(;A<r.length;)d(v++);y._countWaitingForRemove=x}b.a.g.set(o,n,y),h(a.beforeMove,S),b.a.D(T,a.beforeRemove?b.oa:b.removeNode);try{_=o.ownerDocument.activeElement}catch(e){}if(w.length)for(;(I=w.shift())!=e;){for(f=y[I],p=e;I;)if((m=y[--I].Y)&&m.length){p=m[m.length-1];break}for(r=0;v=f.Y[r];p=v,r++)b.h.Wb(o,v,p)}for(I=0;f=y[I];I++){for(f.Y||b.a.extend(f,t(o,s,f.Aa,c,f.pb)),r=0;v=f.Y[r];p=v,r++)b.h.Wb(o,v,p);!f.Ed&&c&&(c(f.Aa,f.Y,f.pb),f.Ed=!0,p=f.Y[f.Y.length-1])}for(_&&o.ownerDocument.activeElement!=_&&_.focus(),h(a.beforeRemove,E),I=0;I<E.length;++I)E[I].Aa=i;h(a.afterMove,S),h(a.afterAdd,C)}}(),b.b("utils.setDomNodeChildrenFromArrayMapping",b.a.ec),b.ba=function(){this.allowTemplateRewriting=!1},b.ba.prototype=new b.ca,b.ba.prototype.constructor=b.ba,b.ba.prototype.renderTemplateSource=function(e,t,n,i){return(t=9>b.a.W||!e.nodes?null:e.nodes())?b.a.la(t.cloneNode(!0).childNodes):(e=e.text(),b.a.ua(e,i))},b.ba.Ma=new b.ba,b.gc(b.ba.Ma),b.b("nativeTemplateEngine",b.ba),function(){b.$a=function(){var e=this.Hd=function(){if(!o||!o.tmpl)return 0;try{if(0<=o.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,i,r,s){if(s=s||n,r=r||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var a=t.data("precompiled");return a||(a=t.text()||"",a=o.template(null,"{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}"),t.data("precompiled",a)),t=[i.$data],i=o.extend({koBindingContext:i},r.templateOptions),(i=o.tmpl(a,t,i)).appendTo(s.createElement("div")),o.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<e&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},b.$a.prototype=new b.ca,b.$a.prototype.constructor=b.$a;var e=new b.$a;0<e.Hd&&b.gc(e),b.b("jqueryTmplTemplateEngine",b.$a)}()}))}();var o=ko;"undefined"!=typeof window?(ko=window.ko,void 0!==i?window.ko=i:delete window.ko):(ko=global.ko,void 0!==i?global.ko=i:delete global.ko);const r=o},769647:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i="__knockoutObservables",o="__knockoutSubscribable";function r(e,t){if(!e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var n=this,r=s(e,!0);return(t=t||Object.getOwnPropertyNames(e)).forEach((function(t){if(t!==i&&t!==o&&!(t in r)){var s=e[t],a=s instanceof Array,c=n.isObservable(s)?s:a?n.observableArray(s):n.observable(s);Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:c,set:n.isWriteableObservable(c)?c:void 0}),r[t]=c,a&&function(e,t){var n=null;e.computed((function(){n&&(n.dispose(),n=null);var i=t();i instanceof Array&&(n=function(e,t,n){var i=function(e,t){var n=t[o];if(!n){n=new e.subscribable,Object.defineProperty(t,o,{value:n});var i={};!function(e,t,n){["pop","push","reverse","shift","sort","splice","unshift"].forEach((function(i){var o=e[i];e[i]=function(){var e=o.apply(this,arguments);return!0!==n.pause&&t.notifySubscribers(this),e}}))}(t,n,i),function(e,t,n,i){["remove","removeAll","destroy","destroyAll","replace"].forEach((function(o){Object.defineProperty(t,o,{enumerable:!1,value:function(){var r;i.pause=!0;try{r=e.observableArray.fn[o].apply(e.observableArray(t),arguments)}finally{i.pause=!1}return n.notifySubscribers(t),r}})}))}(e,t,n,i)}return n}(e,n);return i.subscribe(t)}(e,t,i))}))}(n,c)}})),e}function s(e,t){var n=e[i];return!n&&t&&(n={},Object.defineProperty(e,i,{value:n})),n}function a(e,t,n){var i={owner:e,deferEvaluation:!0};if("function"==typeof n)i.read=n;else{if("value"in n)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!=typeof n.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');i.read=n.get,i.write=n.set}return e[t]=this.computed(i),r.call(this,e,[t]),e}function c(e,t){if(!e)return null;var n=s(e,!1);return n&&n[t]||null}function l(e,t){var n=c(e,t);n&&n.valueHasMutated()}const u={attachToKo:function(e){e.track=r,e.getObservable=c,e.valueHasMutated=l,e.defineProperty=a}}},689460:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(334678),o=n(769647),r=n(623115);o.Z.attachToKo(i.Z),r.Z.register(i.Z);const s=i.Z},566035:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var i=n(11020),o=n(765153),r=n(902299),s=n(722313),a=n(791364),c=n(140942),l=n(584181),u=n(987744);let d=1e12;const h=0,f=1,p=2,m=3,_=4,g=0,Z=1,y=2,b=3,v=4,A=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800,1296e3,2592e3,5184e3,7776e3,15552e3,31536e3,63072e3,126144e3,15768e4,31536e4,63072e4,126144e4,15768e5,31536e5,63072e5,126144e5,15768e6,31536e6],T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function w(e,t){if(!(0,i.Z)(e))throw new o.Z("container is required.");if(!(0,i.Z)(t))throw new o.Z("clock is required.");const n=(e=(0,r.Z)(e)).ownerDocument;this.container=e;const s=n.createElement("div");var c;s.className="cesium-timeline-main",e.appendChild(s),this._topDiv=s,this._endJulian=void 0,this._epochJulian=void 0,this._lastXPos=void 0,this._scrubElement=void 0,this._startJulian=void 0,this._timeBarSecondsSpan=void 0,this._clock=t,this._scrubJulian=t.currentTime,this._mainTicSpan=-1,this._mouseMode=h,this._touchMode=g,this._touchState={centerX:0,spanX:0},this._mouseX=0,this._timelineDrag=0,this._timelineDragLocation=void 0,this._lastHeight=void 0,this._lastWidth=void 0,this._topDiv.innerHTML='<div class="cesium-timeline-bar"></div><div class="cesium-timeline-trackContainer"><canvas class="cesium-timeline-tracks" width="10" height="1"></canvas></div><div class="cesium-timeline-needle"></div><span class="cesium-timeline-ruler"></span>',this._timeBarEle=this._topDiv.childNodes[0],this._trackContainer=this._topDiv.childNodes[1],this._trackListEle=this._topDiv.childNodes[1].childNodes[0],this._needleEle=this._topDiv.childNodes[2],this._rulerEle=this._topDiv.childNodes[3],this._context=this._trackListEle.getContext("2d"),this._trackList=[],this._highlightRanges=[],this.zoomTo(t.startTime,t.stopTime),this._onMouseDown=(c=this,function(e){c._mouseMode!==_&&(0===e.button?(c._mouseMode=f,c._scrubElement&&(c._scrubElement.style.backgroundPosition="-16px 0"),c._onMouseMove(e)):(c._mouseX=e.clientX,2===e.button?c._mouseMode=m:c._mouseMode=p)),e.preventDefault()}),this._onMouseUp=function(e){return function(t){e._mouseMode=h,e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0"),e._timelineDrag=0,e._timelineDragLocation=void 0}}(this),this._onMouseMove=function(e){return function(t){let n;if(e._mouseMode===f){t.preventDefault();const n=t.clientX-e._topDiv.getBoundingClientRect().left;n<0?(e._timelineDragLocation=0,e._timelineDrag=-.01*e._timeBarSecondsSpan):n>e._topDiv.clientWidth?(e._timelineDragLocation=e._topDiv.clientWidth,e._timelineDrag=.01*e._timeBarSecondsSpan):(e._timelineDragLocation=void 0,e._setTimeBarTime(n,n*e._timeBarSecondsSpan/e._topDiv.clientWidth))}else if(e._mouseMode===p){if(n=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==n){const t=n*e._timeBarSecondsSpan/e._topDiv.clientWidth;e.zoomTo(a.Z.addSeconds(e._startJulian,t,new a.Z),a.Z.addSeconds(e._endJulian,t,new a.Z))}}else e._mouseMode===m&&(n=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==n&&e.zoomFrom(Math.pow(1.01,n)))}}(this),this._onMouseWheel=function(e){return function(t){let n=t.wheelDeltaY||t.wheelDelta||-t.detail;d=Math.max(Math.min(Math.abs(n),d),1),n/=d,e.zoomFrom(Math.pow(1.05,-n))}}(this),this._onTouchStart=function(e){return function(t){const n=t.touches.length;let i,o;const r=e._topDiv.getBoundingClientRect().left;t.preventDefault(),e._mouseMode=_,1===n?(i=a.Z.secondsDifference(e._scrubJulian,e._startJulian),o=Math.round(i*e._topDiv.clientWidth/e._timeBarSecondsSpan+r),Math.abs(t.touches[0].clientX-o)<50?(e._touchMode=Z,e._scrubElement&&(e._scrubElement.style.backgroundPosition=1===n?"-16px 0":"0 0")):(e._touchMode=b,e._touchState.centerX=t.touches[0].clientX-r)):2===n?(e._touchMode=y,e._touchState.centerX=.5*(t.touches[0].clientX+t.touches[1].clientX)-r,e._touchState.spanX=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):e._touchMode=v}}(this),this._onTouchMove=function(e){return function(t){let n,o,r,s,c,l,u=1;const d=e._topDiv.getBoundingClientRect().left;e._touchMode===b&&(e._touchMode=y),e._mouseMode=_,e._touchMode===Z?(t.preventDefault(),1===t.changedTouches.length&&(o=t.changedTouches[0].clientX-d,o>=0&&o<=e._topDiv.clientWidth&&e._setTimeBarTime(o,o*e._timeBarSecondsSpan/e._topDiv.clientWidth))):e._touchMode===y&&(r=t.touches.length,2===r?(s=.5*(t.touches[0].clientX+t.touches[1].clientX)-d,c=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):1===r&&(s=t.touches[0].clientX-d,c=0),(0,i.Z)(s)&&(c>0&&e._touchState.spanX>0?(u=e._touchState.spanX/c,l=a.Z.addSeconds(e._startJulian,(e._touchState.centerX*e._timeBarSecondsSpan-s*e._timeBarSecondsSpan*u)/e._topDiv.clientWidth,new a.Z)):(n=e._touchState.centerX-s,l=a.Z.addSeconds(e._startJulian,n*e._timeBarSecondsSpan/e._topDiv.clientWidth,new a.Z)),e.zoomTo(l,a.Z.addSeconds(l,e._timeBarSecondsSpan*u,new a.Z)),e._touchState.centerX=s,e._touchState.spanX=c))}}(this),this._onTouchEnd=function(e){return function(t){const n=t.touches.length,i=e._topDiv.getBoundingClientRect().left;e._touchMode===b?(e._touchMode=Z,e._onTouchMove(t)):e._touchMode===Z&&e._onTouchMove(t),e._mouseMode=_,1!==n?e._touchMode=n>0?v:g:e._touchMode===y&&(e._touchState.centerX=t.touches[0].clientX-i),e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0")}}(this);const l=this._timeBarEle;n.addEventListener("mouseup",this._onMouseUp,!1),n.addEventListener("mousemove",this._onMouseMove,!1),l.addEventListener("mousedown",this._onMouseDown,!1),l.addEventListener("DOMMouseScroll",this._onMouseWheel,!1),l.addEventListener("mousewheel",this._onMouseWheel,!1),l.addEventListener("touchstart",this._onTouchStart,!1),l.addEventListener("touchmove",this._onTouchMove,!1),l.addEventListener("touchend",this._onTouchEnd,!1),l.addEventListener("touchcancel",this._onTouchEnd,!1),this._topDiv.oncontextmenu=function(){return!1},t.onTick.addEventListener(this.updateFromClock,this),this.updateFromClock()}function E(e){return e<10?`0${e.toString()}`:e.toString()}w.prototype.addEventListener=function(e,t,n){this._topDiv.addEventListener(e,t,n)},w.prototype.removeEventListener=function(e,t,n){this._topDiv.removeEventListener(e,t,n)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){this._clock.onTick.removeEventListener(this.updateFromClock,this);const e=this.container.ownerDocument;e.removeEventListener("mouseup",this._onMouseUp,!1),e.removeEventListener("mousemove",this._onMouseMove,!1);const t=this._timeBarEle;t.removeEventListener("mousedown",this._onMouseDown,!1),t.removeEventListener("DOMMouseScroll",this._onMouseWheel,!1),t.removeEventListener("mousewheel",this._onMouseWheel,!1),t.removeEventListener("touchstart",this._onTouchStart,!1),t.removeEventListener("touchmove",this._onTouchMove,!1),t.removeEventListener("touchend",this._onTouchEnd,!1),t.removeEventListener("touchcancel",this._onTouchEnd,!1),this.container.removeChild(this._topDiv),(0,s.Z)(this)},w.prototype.addHighlightRange=function(e,t,n){const i=new l.Z(e,t,n);return this._highlightRanges.push(i),this.resize(),i},w.prototype.addTrack=function(e,t,n,i){const o=new u.Z(e,t,n,i);return this._trackList.push(o),this._lastHeight=void 0,this.resize(),o},w.prototype.zoomTo=function(e,t){if(!(0,i.Z)(e))throw new o.Z("startTime is required.");if(!(0,i.Z)(t))throw new o.Z("stopTime is required");if(a.Z.lessThanOrEquals(t,e))throw new o.Z("Start time must come before end time.");if(this._startJulian=e,this._endJulian=t,this._timeBarSecondsSpan=a.Z.secondsDifference(t,e),this._clock&&this._clock.clockRange!==c.Z.UNBOUNDED){const e=this._clock.startTime,t=this._clock.stopTime,n=a.Z.secondsDifference(t,e),i=a.Z.secondsDifference(e,this._startJulian),o=a.Z.secondsDifference(t,this._endJulian);this._timeBarSecondsSpan>=n?(this._timeBarSecondsSpan=n,this._startJulian=this._clock.startTime,this._endJulian=this._clock.stopTime):i>0?(this._endJulian=a.Z.addSeconds(this._endJulian,i,new a.Z),this._startJulian=e,this._timeBarSecondsSpan=a.Z.secondsDifference(this._endJulian,this._startJulian)):o<0&&(this._startJulian=a.Z.addSeconds(this._startJulian,o,new a.Z),this._endJulian=t,this._timeBarSecondsSpan=a.Z.secondsDifference(this._endJulian,this._startJulian))}this._makeTics();const n=document.createEvent("Event");n.initEvent("setzoom",!0,!0),n.startJulian=this._startJulian,n.endJulian=this._endJulian,n.epochJulian=this._epochJulian,n.totalSpan=this._timeBarSecondsSpan,n.mainTicSpan=this._mainTicSpan,this._topDiv.dispatchEvent(n)},w.prototype.zoomFrom=function(e){let t=a.Z.secondsDifference(this._scrubJulian,this._startJulian);e>1||t<0||t>this._timeBarSecondsSpan?t=.5*this._timeBarSecondsSpan:t+=t-.5*this._timeBarSecondsSpan;const n=this._timeBarSecondsSpan-t;this.zoomTo(a.Z.addSeconds(this._startJulian,t-t*e,new a.Z),a.Z.addSeconds(this._endJulian,n*e-n,new a.Z))},w.prototype.makeLabel=function(e){const t=a.Z.toGregorianDate(e),n=t.millisecond;let i=" UTC";if(n>0&&this._timeBarSecondsSpan<3600){for(i=Math.floor(n).toString();i.length<3;)i=`0${i}`;i=`.${i}`}return`${T[t.month-1]} ${t.day} ${t.year} ${E(t.hour)}:${E(t.minute)}:${E(t.second)}${i}`},w.prototype.smallestTicInPixels=7,w.prototype._makeTics=function(){const e=this._timeBarEle,t=a.Z.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(t*this._topDiv.clientWidth/this._timeBarSecondsSpan),i=n-8;let o;const r=this;this._needleEle.style.left=`${n.toString()}px`;let s="";const c=.01,l=31536e6,u=1e-10;let d=0,h=this._timeBarSecondsSpan;h<c?(h=c,this._timeBarSecondsSpan=c,this._endJulian=a.Z.addSeconds(this._startJulian,c,new a.Z)):h>l&&(h=l,this._timeBarSecondsSpan=l,this._endJulian=a.Z.addSeconds(this._startJulian,l,new a.Z));let f=this._timeBarEle.clientWidth;f<10&&(f=10);const p=this._startJulian,m=Math.min(h/f*1e-5,.4);let _;const g=a.Z.toGregorianDate(p);_=h>31536e4?a.Z.fromDate(new Date(Date.UTC(100*Math.floor(g.year/100),0))):h>31536e3?a.Z.fromDate(new Date(Date.UTC(10*Math.floor(g.year/10),0))):h>86400?a.Z.fromDate(new Date(Date.UTC(g.year,0))):a.Z.fromDate(new Date(Date.UTC(g.year,g.month,g.day)));const Z=a.Z.secondsDifference(this._startJulian,a.Z.addSeconds(_,m,new a.Z));let y=Z+h;function b(e){return Math.floor(Z/e)*e}function v(e,t){return Math.ceil(e/t+.5)*t}function T(e){return(e-Z)/h}function w(e,t){return e-t*Math.round(e/t)}this._epochJulian=_,this._rulerEle.innerHTML=this.makeLabel(a.Z.addSeconds(this._endJulian,-.01,new a.Z));let E=this._rulerEle.offsetWidth+20;E<30&&(E=180);const S=d;d-=u;const C={startTime:Z,startJulian:p,epochJulian:_,duration:h,timeBarWidth:f,getAlpha:T};this._highlightRanges.forEach((function(e){s+=e.render(C)}));let x=0,I=0,P=0,D=E/f;D>1&&(D=1),D*=this._timeBarSecondsSpan;let O=-1,L=-1;const N=A.length;let M;for(M=0;M<N;++M){const e=A[M];if(++O,x=e,e>D&&e>d)break;L<0&&f*(e/this._timeBarSecondsSpan)>=this.smallestTicInPixels&&(L=O)}if(O>0){for(;O>0;)if(--O,Math.abs(w(x,A[O]))<1e-5){A[O]>=d&&(I=A[O]);break}if(L>=0)for(;L<O;){if(Math.abs(w(I,A[L]))<1e-5&&A[L]>=d){P=A[L];break}++L}}d=S,d>u&&P<1e-5&&Math.abs(d-x)>u&&(P=d,d<=x+u&&(I=0));let R,F=-999999;if(f*(P/this._timeBarSecondsSpan)>=3)for(o=b(P);o<=y;o=v(o,P))s+=`<span class="cesium-timeline-ticTiny" style="left: ${Math.round(f*T(o)).toString()}px;"></span>`;if(f*(I/this._timeBarSecondsSpan)>=3)for(o=b(I);o<=y;o=v(o,I))s+=`<span class="cesium-timeline-ticSub" style="left: ${Math.round(f*T(o)).toString()}px;"></span>`;if(f*(x/this._timeBarSecondsSpan)>=2){this._mainTicSpan=x,y+=x,o=b(x);const e=a.Z.computeTaiMinusUtc(_);for(;o<=y;){let t=a.Z.addSeconds(p,o-Z,new a.Z);if(x>2.1){const n=a.Z.computeTaiMinusUtc(t);Math.abs(n-e)>.1&&(o+=n-e,t=a.Z.addSeconds(p,o-Z,new a.Z))}const n=Math.round(f*T(o)),i=this.makeLabel(t);this._rulerEle.innerHTML=i,R=this._rulerEle.offsetWidth,R<10&&(R=E);const r=n-(R/2-1);r>F?(F=r+R+5,s+=`<span class="cesium-timeline-ticMain" style="left: ${n.toString()}px;"></span><span class="cesium-timeline-ticLabel" style="left: ${r.toString()}px;">${i}</span>`):s+=`<span class="cesium-timeline-ticSub" style="left: ${n.toString()}px;"></span>`,o=v(o,x)}}else this._mainTicSpan=-1;s+=`<span class="cesium-timeline-icon16" style="left:${i}px;bottom:0;background-position: 0 0;"></span>`,e.innerHTML=s,this._scrubElement=e.lastChild,this._context.clearRect(0,0,this._trackListEle.width,this._trackListEle.height),C.y=0,this._trackList.forEach((function(e){e.render(r._context,C),C.y+=e.height}))},w.prototype.updateFromClock=function(){this._scrubJulian=this._clock.currentTime;const e=this._scrubElement;if((0,i.Z)(this._scrubElement)){const t=a.Z.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(t*this._topDiv.clientWidth/this._timeBarSecondsSpan);this._lastXPos!==n&&(this._lastXPos=n,e.style.left=n-8+"px",this._needleEle.style.left=`${n}px`)}(0,i.Z)(this._timelineDragLocation)&&(this._setTimeBarTime(this._timelineDragLocation,this._timelineDragLocation*this._timeBarSecondsSpan/this._topDiv.clientWidth),this.zoomTo(a.Z.addSeconds(this._startJulian,this._timelineDrag,new a.Z),a.Z.addSeconds(this._endJulian,this._timelineDrag,new a.Z)))},w.prototype._setTimeBarTime=function(e,t){if(e=Math.round(e),this._scrubJulian=a.Z.addSeconds(this._startJulian,t,new a.Z),this._scrubElement){const t=e-8;this._scrubElement.style.left=`${t.toString()}px`,this._needleEle.style.left=`${e.toString()}px`}const n=document.createEvent("Event");n.initEvent("settime",!0,!0),n.clientX=e,n.timeSeconds=t,n.timeJulian=this._scrubJulian,n.clock=this._clock,this._topDiv.dispatchEvent(n)},w.prototype.resize=function(){const e=this.container.clientWidth,t=this.container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;this._trackContainer.style.height=`${t}px`;let n=1;this._trackList.forEach((function(e){n+=e.height})),this._trackListEle.style.height=`${n.toString()}px`,this._trackListEle.width=this._trackListEle.clientWidth,this._trackListEle.height=n,this._makeTics(),this._lastXPos=void 0,this._lastWidth=e,this._lastHeight=t};const S=w},584181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(234146),o=n(791364);function r(e,t,n){this._color=e,this._height=t,this._base=(0,i.Z)(n,0)}r.prototype.getHeight=function(){return this._height},r.prototype.getBase=function(){return this._base},r.prototype.getStartTime=function(){return this._start},r.prototype.getStopTime=function(){return this._stop},r.prototype.setRange=function(e,t){this._start=e,this._stop=t},r.prototype.render=function(e){let t="";if(this._start&&this._stop&&this._color){const n=o.Z.secondsDifference(this._start,e.epochJulian);let i=Math.round(e.timeBarWidth*e.getAlpha(n));const r=o.Z.secondsDifference(this._stop,e.epochJulian);let s=Math.round(e.timeBarWidth*e.getAlpha(r))-i;i<0&&(s+=i,i=0),i+s>e.timeBarWidth&&(s=e.timeBarWidth-i),s>0&&(t=`<span class="cesium-timeline-highlight" style="left: ${i.toString()}px; width: ${s.toString()}px; bottom: ${this._base.toString()}px; height: ${this._height}px; background-color: ${this._color};"></span>`)}return t};const s=r},987744:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(35961),o=n(791364),r=n(11020);function s(e,t,n,o){this.interval=e,this.height=t,this.color=n||new i.Z(.5,.5,.5,1),this.backgroundColor=o||new i.Z(0,0,0,0)}s.prototype.render=function(e,t){const n=this.interval.start,i=this.interval.stop,s=t.startJulian,a=o.Z.addSeconds(t.startJulian,t.duration,new o.Z);if(o.Z.lessThan(n,s)&&o.Z.greaterThan(i,a))e.fillStyle=this.color.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height);else if(o.Z.lessThanOrEquals(n,a)&&o.Z.greaterThanOrEquals(i,s)){let s,a,c;for(s=0;s<t.timeBarWidth;++s){const e=o.Z.addSeconds(t.startJulian,s/t.timeBarWidth*t.duration,new o.Z);!(0,r.Z)(a)&&o.Z.greaterThanOrEquals(e,n)?a=s:!(0,r.Z)(c)&&o.Z.greaterThanOrEquals(e,i)&&(c=s)}e.fillStyle=this.backgroundColor.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height),(0,r.Z)(a)&&((0,r.Z)(c)||(c=t.timeBarWidth),e.fillStyle=this.color.toCssColorString(),e.fillRect(a,t.y,Math.max(c-a,1),this.height))}};const a=s},119277:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(11020),o=n(765153),r=n(234146),s=n(689460);function a(e,t){if(!(0,i.Z)(e))throw new o.Z("command is required.");this._command=e,t=(0,r.Z)(t,r.Z.EMPTY_OBJECT),this.toggled=(0,r.Z)(t.toggled,!1),this.tooltip=(0,r.Z)(t.tooltip,""),s.Z.track(this,["toggled","tooltip"])}Object.defineProperties(a.prototype,{command:{get:function(){return this._command}}});const c=a},663940:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(11020),o=n(765153),r=n(902299),s=n(722313),a=n(689460),c=n(910269);function l(e,t,n){if(!(0,i.Z)(e))throw new o.Z("container is required.");if(!(0,i.Z)(t))throw new o.Z("scene is required.");e=(0,r.Z)(e);const s=new c.Z(t,n);s._exitVRPath="M 25.770585,2.4552065 C 15.72282,13.962707 10.699956,19.704407 8.1768352,22.580207 c -1.261561,1.4379 -1.902282,2.1427 -2.21875,2.5 -0.141624,0.1599 -0.208984,0.2355 -0.25,0.2813 l 0.6875,0.75 c 10e-5,-10e-5 0.679191,0.727 0.6875,0.7187 0.01662,-0.016 0.02451,-0.024 0.03125,-0.031 0.01348,-0.014 0.04013,-0.038 0.0625,-0.062 0.04474,-0.05 0.120921,-0.1315 0.28125,-0.3126 0.320657,-0.3619 0.956139,-1.0921 2.2187499,-2.5312 2.5252219,-2.8781 7.5454589,-8.6169 17.5937499,-20.1250005 l -1.5,-1.3125 z m -20.5624998,3.9063 c -1.304375,0 -2.34375,1.0391 -2.34375,2.3437 l 0,10.8125005 c 0,1.3043 1.039375,2.375 2.34375,2.375 l 2.25,0 c 1.9518039,-2.2246 7.4710958,-8.5584 13.5624998,-15.5312005 l -15.8124998,0 z m 21.1249998,0 c -1.855467,2.1245 -2.114296,2.4005 -3.59375,4.0936995 1.767282,0.1815 3.15625,1.685301 3.15625,3.500001 0,1.9349 -1.56511,3.5 -3.5,3.5 -1.658043,0 -3.043426,-1.1411 -3.40625,-2.6875 -1.089617,1.2461 -2.647139,2.9988 -3.46875,3.9375 0.191501,-0.062 0.388502,-0.094 0.59375,-0.094 1.373338,0 2.50006,1.4614 2.5625,3.2812 l 8.3125,0 c 1.304375,0 2.34375,-1.0707 2.34375,-2.375 l 0,-10.8125005 c 0,-1.3046 -1.039375,-2.3437 -2.34375,-2.3437 l -0.65625,0 z M 9.5518351,10.423906 c 1.9348899,0 3.4999999,1.596401 3.4999999,3.531301 0,1.9349 -1.56511,3.5 -3.4999999,3.5 -1.9348899,0 -3.4999999,-1.5651 -3.4999999,-3.5 0,-1.9349 1.56511,-3.531301 3.4999999,-3.531301 z m 4.2187499,10.312601 c -0.206517,0.2356 -0.844218,0.9428 -1.03125,1.1562 l 0.8125,0 c 0.01392,-0.4081 0.107026,-0.7968 0.21875,-1.1562 z",s._enterVRPath="M 5.3125 6.375 C 4.008126 6.375 2.96875 7.4141499 2.96875 8.71875 L 2.96875 19.5 C 2.96875 20.8043 4.008126 21.875 5.3125 21.875 L 13.65625 21.875 C 13.71832 20.0547 14.845166 18.59375 16.21875 18.59375 C 17.592088 18.59375 18.71881 20.0552 18.78125 21.875 L 27.09375 21.875 C 28.398125 21.875 29.4375 20.8043 29.4375 19.5 L 29.4375 8.71875 C 29.4375 7.4141499 28.398125 6.375 27.09375 6.375 L 5.3125 6.375 z M 9.625 10.4375 C 11.55989 10.4375 13.125 12.03385 13.125 13.96875 C 13.125 15.90365 11.55989 17.46875 9.625 17.46875 C 7.69011 17.46875 6.125 15.90365 6.125 13.96875 C 6.125 12.03385 7.69011 10.4375 9.625 10.4375 z M 22.46875 10.4375 C 24.40364 10.4375 25.96875 12.03385 25.96875 13.96875 C 25.96875 15.90365 24.40364 17.46875 22.46875 17.46875 C 20.53386 17.46875 18.96875 15.90365 18.96875 13.96875 C 18.96875 12.03385 20.53386 10.4375 22.46875 10.4375 z";const l=document.createElement("button");l.type="button",l.className="cesium-button cesium-vrButton",l.setAttribute("data-bind",'css: { "cesium-button-disabled" : _isOrthographic }, attr: { title: tooltip },click: command,enable: isVREnabled,cesiumSvgPath: { path: isVRMode ? _exitVRPath : _enterVRPath, width: 32, height: 32 }'),e.appendChild(l),a.Z.applyBindings(s,l),this._container=e,this._viewModel=s,this._element=l}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._viewModel.destroy(),a.Z.cleanNode(this._element),this._container.removeChild(this._element),(0,s.Z)(this)};const u=l},910269:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(11020),o=n(289325),r=n(765153),s=n(700234),a=n(223689),c=n(234146),l=n(902299),u=n(722313),d=n(689460),h=n(556126),f=n(818881);function p(){const e=window.screen;(0,i.Z)(e)&&((0,i.Z)(e.unlockOrientation)?e.unlockOrientation():(0,i.Z)(e.mozUnlockOrientation)?e.mozUnlockOrientation():(0,i.Z)(e.msUnlockOrientation)?e.msUnlockOrientation():(0,i.Z)(e.orientation&&e.orientation.unlock)&&e.orientation.unlock())}function m(e,t){if(!(0,i.Z)(e))throw new r.Z("scene is required.");const n=this,u=d.Z.observable(o.Z.enabled),m=d.Z.observable(!1);this.isVRMode=void 0,d.Z.defineProperty(this,"isVRMode",{get:function(){return m()}}),this.isVREnabled=void 0,d.Z.defineProperty(this,"isVREnabled",{get:function(){return u()},set:function(e){u(e&&o.Z.enabled)}}),this.tooltip=void 0,d.Z.defineProperty(this,"tooltip",(function(){return u()?m()?"Exit VR mode":"Enter VR mode":"VR mode is unavailable"}));const _=d.Z.observable(!1);this._isOrthographic=void 0,d.Z.defineProperty(this,"_isOrthographic",{get:function(){return _()}}),this._eventHelper=new s.Z,this._eventHelper.add(e.preRender,(function(){_(e.camera.frustum instanceof a.Z)})),this._locked=!1,this._noSleep=new h,this._command=(0,f.Z)((function(){!function(e,t,n,r){r()||(n()?(t.useWebVR=!1,e._locked&&(p(),e._locked=!1),e._noSleep.disable(),o.Z.exitFullscreen(),n(!1)):(o.Z.fullscreen||o.Z.requestFullscreen(e._vrElement),e._noSleep.enable(),e._locked||(e._locked=function(e){let t=!1;const n=window.screen;return(0,i.Z)(n)&&((0,i.Z)(n.lockOrientation)?t=n.lockOrientation(e):(0,i.Z)(n.mozLockOrientation)?t=n.mozLockOrientation(e):(0,i.Z)(n.msLockOrientation)?t=n.msLockOrientation(e):(0,i.Z)(n.orientation&&n.orientation.lock)&&(t=n.orientation.lock(e))),t}("landscape")),t.useWebVR=!0,n(!0)))}(n,e,m,_)}),d.Z.getObservable(this,"isVREnabled")),this._vrElement=(0,c.Z)((0,l.Z)(t),document.body),this._callback=function(){!o.Z.fullscreen&&m()&&(e.useWebVR=!1,n._locked&&(p(),n._locked=!1),n._noSleep.disable(),m(!1))},document.addEventListener(o.Z.changeEventName,this._callback)}Object.defineProperties(m.prototype,{vrElement:{get:function(){return this._vrElement},set:function(e){if(!(e instanceof Element))throw new r.Z("value must be a valid Element.");this._vrElement=e}},command:{get:function(){return this._command}}}),m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){this._eventHelper.removeAll(),document.removeEventListener(o.Z.changeEventName,this._callback),(0,u.Z)(this)};const _=m},29379:(e,t,n)=>{"use strict";n.d(t,{Z:()=>he});var i=n(762031),o=n(11020),r=n(234146),s=n(467077),a=n(812693),c=n(791364),l=n(344485),u=n(660904),d=n(303932),h=n(765153),f=n(902299),p=n(249702),m=n(484718),_=n(883334),g=n(934135),Z=n(700234),y=n(906439),b=n(282910),v=n(916269),A=n(271533),T=n(714233),w=n(659635),E=n(722313),S=n(657528),C=n(18929),x=n(282556),I=n(204476),P=n(91575),D=n(744715),O=n(339079),L=n(532056),N=n(487004),M=n(689460),R=n(492417),F=n(716013),B=n(473549),U=n(759504),k=n(746574),V=n(653186),H=n(642178),z=n(257766),G=n(969908),j=n(517410),W=n(935929),q=n(427529),Y=n(310166),X=n(965691),J=n(294798),Q=n(566035),$=n(663940);const K=new i.Z;function ee(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1}function te(e){const t=e.getPropertyIds();let n="";return t.forEach((function(t){const i=e.getProperty(t);(0,o.Z)(i)&&(n+=`<tr><th>${t}</th><td>${i}</td></tr>`)})),n.length>0&&(n=`<table class="cesium-infoBox-defaultTable"><tbody>${n}</tbody></table>`),n}function ne(e){let t;const n=[],i=e.getPropertyIds();for(t=0;t<i.length;t++){const o=i[t];/^name$/i.test(o)?n[0]=e.getProperty(o):/name/i.test(o)?n[1]=e.getProperty(o):/^title$/i.test(o)?n[2]=e.getProperty(o):/^(id|identifier)$/i.test(o)?n[3]=e.getProperty(o):/element/i.test(o)?n[4]=e.getProperty(o):/(id|identifier)$/i.test(o)&&(n[5]=e.getProperty(o))}const r=n.length;for(t=0;t<r;t++){const e=n[t];if((0,o.Z)(e)&&""!==e)return e}return"Unnamed Feature"}function ie(e,t){const n=e.scene.pick(t.position);if((0,o.Z)(n)){const e=(0,r.Z)(n.id,n.primitive.id);if(e instanceof s.Z)return e;if(n instanceof a.Z)return new s.Z({name:ne(n),description:te(n),feature:n})}if((0,o.Z)(e.scene.globe))return function(e,t){const n=e.scene,i=n.camera.getPickRay(t),r=n.imageryLayers.pickImageryLayerFeatures(i,n);if(!(0,o.Z)(r))return;const a=new s.Z({id:"Loading...",description:"Loading feature information..."});return r.then((function(t){if(e.selectedEntity!==a)return;if(!(0,o.Z)(t)||0===t.length)return void(e.selectedEntity=ae());const n=t[0],i=new s.Z({id:n.name,description:n.description});if((0,o.Z)(n.position)){const t=e.scene.globe.ellipsoid.cartographicToCartesian(n.position,se);i.position=new d.Z(t)}e.selectedEntity=i}),(function(){e.selectedEntity===a&&(e.selectedEntity=ae())})),a}(e,t.position)}const oe=new c.Z;function re(e,t,n){if((0,o.Z)(n)){const i=n.clock;if((0,o.Z)(i)&&(i.getValue(t),(0,o.Z)(e))){const t=i.startTime;let n=i.stopTime;c.Z.equals(t,n)&&(n=c.Z.addSeconds(t,l.Z.EPSILON2,oe)),e.updateFromClock(),e.zoomTo(t,n)}}}const se=new u.Z;function ae(){return new s.Z({id:"None",description:"No features found."})}function ce(e,t){if(!(0,o.Z)(e))throw new h.Z("container is required.");e=(0,f.Z)(e),t=(0,r.Z)(t,r.Z.EMPTY_OBJECT);const n=!((0,o.Z)(t.globe)&&!1===t.globe||(0,o.Z)(t.baseLayerPicker)&&!1===t.baseLayerPicker);if(!n&&(0,o.Z)(t.selectedImageryProviderViewModel))throw new h.Z("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget. Either specify options.baseLayer instead or set options.baseLayerPicker to true.");if(!n&&(0,o.Z)(t.selectedTerrainProviderViewModel))throw new h.Z("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget. Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");const i=this,s=document.createElement("div");s.className="cesium-viewer",e.appendChild(s);const a=document.createElement("div");a.className="cesium-viewer-cesiumWidgetContainer",s.appendChild(a);const c=document.createElement("div");c.className="cesium-viewer-bottom",s.appendChild(c);const l=(0,r.Z)(t.scene3DOnly,!1);let u,d,T=!1;(0,o.Z)(t.clockViewModel)?(d=t.clockViewModel,u=d.clock):(u=new p.Z,d=new V.Z(u),T=!0),(0,o.Z)(t.shouldAnimate)&&(u.shouldAnimate=t.shouldAnimate);const w=new m.Z(a,{baseLayer:!(n||(0,o.Z)(t.baseLayer)||(0,o.Z)(t.imageryProvider))&&void 0,clock:u,skyBox:t.skyBox,skyAtmosphere:t.skyAtmosphere,sceneMode:t.sceneMode,mapProjection:t.mapProjection,globe:t.globe,orderIndependentTranslucency:t.orderIndependentTranslucency,contextOptions:t.contextOptions,useDefaultRenderLoop:t.useDefaultRenderLoop,targetFrameRate:t.targetFrameRate,showRenderLoopErrors:t.showRenderLoopErrors,useBrowserRecommendedResolution:t.useBrowserRecommendedResolution,creditContainer:(0,o.Z)(t.creditContainer)?t.creditContainer:c,creditViewport:t.creditViewport,scene3DOnly:l,shadows:t.shadows,terrainShadows:t.terrainShadows,mapMode2D:t.mapMode2D,blurActiveElementOnCanvasFocus:t.blurActiveElementOnCanvasFocus,requestRenderMode:t.requestRenderMode,maximumRenderTimeChange:t.maximumRenderTimeChange,depthPlaneEllipsoidOffset:t.depthPlaneEllipsoidOffset,msaaSamples:t.msaaSamples});let E=t.dataSources,S=!1;(0,o.Z)(E)||(E=new _.Z,S=!0);const C=w.scene,x=new g.Z({scene:C,dataSourceCollection:E}),I=new Z.Z;let P,D;if(I.add(u.onTick,ce.prototype._onTick,this),I.add(C.morphStart,ce.prototype._clearTrackedObject,this),!(0,o.Z)(t.selectionIndicator)||!1!==t.selectionIndicator){const e=document.createElement("div");e.className="cesium-viewer-selectionIndicatorContainer",s.appendChild(e),P=new X.Z(e,C)}if(!(0,o.Z)(t.infoBox)||!1!==t.infoBox){const e=document.createElement("div");e.className="cesium-viewer-infoBoxContainer",s.appendChild(e),D=new j.Z(e);const t=D.viewModel;I.add(t.cameraClicked,ce.prototype._onInfoBoxCameraClicked,this),I.add(t.closeClicked,ce.prototype._onInfoBoxClockClicked,this)}const O=document.createElement("div");let L,N,K,te,ne,oe,re,se,ae,le,ue,de,he,fe,pe;if(O.className="cesium-viewer-toolbar",s.appendChild(O),!(0,o.Z)(t.geocoder)||!1!==t.geocoder){const e=document.createElement("div");let n;e.className="cesium-viewer-geocoderContainer",O.appendChild(e),(0,o.Z)(t.geocoder)&&"boolean"!=typeof t.geocoder&&(n=Array.isArray(t.geocoder)?t.geocoder:[t.geocoder]),L=new z.Z({container:e,geocoderServices:n,scene:C}),I.add(L.viewModel.search.beforeExecute,ce.prototype._clearObjects,this)}if((0,o.Z)(t.homeButton)&&!1===t.homeButton||(N=new G.Z(O,C),(0,o.Z)(L)&&I.add(N.viewModel.command.afterExecute,(function(){const e=L.viewModel;e.searchText="",e.isSearchInProgress&&e.search()})),I.add(N.viewModel.command.beforeExecute,ce.prototype._clearTrackedObject,this)),!0===t.sceneModePicker&&l)throw new h.Z("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(l||(0,o.Z)(t.sceneModePicker)&&!1===t.sceneModePicker||(K=new Y.Z(O,C)),t.projectionPicker&&(te=new q.Z(O,C)),n){const e=(0,r.Z)(t.imageryProviderViewModels,(0,U.Z)()),n=(0,r.Z)(t.terrainProviderViewModels,(0,k.Z)());ne=new B.Z(O,{globe:C.globe,imageryProviderViewModels:e,selectedImageryProviderViewModel:t.selectedImageryProviderViewModel,terrainProviderViewModels:n,selectedTerrainProviderViewModel:t.selectedTerrainProviderViewModel}),oe=O.getElementsByClassName("cesium-baseLayerPicker-dropDown")[0]}if((0,o.Z)(t.imageryProvider)&&!1!==t.imageryProvider&&((0,y.Z)("Viewer options.imageryProvider","options.imageryProvider was deprecated in CesiumJS 1.104.  It will be in CesiumJS 1.107.  Use options.baseLayer instead."),n&&(ne.viewModel.selectedImagery=void 0),C.imageryLayers.removeAll(),C.imageryLayers.addImageryProvider(t.imageryProvider)),(0,o.Z)(t.baseLayer)&&!1!==t.baseLayer&&(n&&(ne.viewModel.selectedImagery=void 0),C.imageryLayers.removeAll(),C.imageryLayers.add(t.baseLayer)),(0,o.Z)(t.terrainProvider)&&(n&&(ne.viewModel.selectedTerrain=void 0),C.terrainProvider=t.terrainProvider),(0,o.Z)(t.terrain)){if((0,o.Z)(t.terrainProvider))throw new h.Z("Specify either options.terrainProvider or options.terrain.");n&&(ne.viewModel.selectedTerrain=void 0,C.globe.depthTestAgainstTerrain=!0),C.setTerrain(t.terrain)}if(!(0,o.Z)(t.navigationHelpButton)||!1!==t.navigationHelpButton){let e=!0;try{if((0,o.Z)(window.localStorage)){const t=window.localStorage.getItem("cesium-hasSeenNavHelp");(0,o.Z)(t)&&Boolean(t)?e=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(e){}re=new W.Z({container:O,instructionsInitiallyVisible:(0,r.Z)(t.navigationInstructionsInitiallyVisible,e)})}if(!(0,o.Z)(t.animation)||!1!==t.animation){const e=document.createElement("div");e.className="cesium-viewer-animationContainer",s.appendChild(e),se=new R.Z(e,new F.Z(d))}if(!(0,o.Z)(t.timeline)||!1!==t.timeline){const e=document.createElement("div");e.className="cesium-viewer-timelineContainer",s.appendChild(e),ae=new Q.Z(e,u),ae.addEventListener("settime",ee,!1),ae.zoomTo(u.startTime,u.stopTime)}if((0,o.Z)(t.fullscreenButton)&&!1===t.fullscreenButton||(de=document.createElement("div"),de.className="cesium-viewer-fullscreenContainer",s.appendChild(de),le=new H.Z(de,t.fullscreenElement),ue=(0,J.Z)(le.viewModel,"isFullscreenEnabled",(function(e){de.style.display=e?"block":"none",(0,o.Z)(ae)&&(ae.container.style.right=`${de.clientWidth}px`,ae.resize())}))),t.vrButton){const e=document.createElement("div");e.className="cesium-viewer-vrContainer",s.appendChild(e),he=new $.Z(e,C,t.fullScreenElement),fe=(0,J.Z)(he.viewModel,"isVREnabled",(function(t){e.style.display=t?"block":"none",(0,o.Z)(le)&&(e.style.right=`${de.clientWidth}px`),(0,o.Z)(ae)&&(ae.container.style.right=`${e.clientWidth}px`,ae.resize())})),pe=(0,J.Z)(he.viewModel,"isVRMode",(function(e){!function(e,t){const n=e._geocoder,i=e._homeButton,r=e._sceneModePicker,s=e._projectionPicker,a=e._baseLayerPicker,c=e._animation,l=e._timeline,u=e._fullscreenButton,d=e._infoBox,h=e._selectionIndicator,f=t?"hidden":"visible";if((0,o.Z)(n)&&(n.container.style.visibility=f),(0,o.Z)(i)&&(i.container.style.visibility=f),(0,o.Z)(r)&&(r.container.style.visibility=f),(0,o.Z)(s)&&(s.container.style.visibility=f),(0,o.Z)(a)&&(a.container.style.visibility=f),(0,o.Z)(c)&&(c.container.style.visibility=f),(0,o.Z)(l)&&(l.container.style.visibility=f),(0,o.Z)(u)&&u.viewModel.isFullscreenEnabled&&(u.container.style.visibility=f),(0,o.Z)(d)&&(d.container.style.visibility=f),(0,o.Z)(h)&&(h.container.style.visibility=f),e._container){const n=t||!(0,o.Z)(u)?0:u.container.clientWidth;e._vrButton.container.style.right=`${n}px`,e.forceResize()}}(i,e)}))}this._baseLayerPickerDropDown=oe,this._fullscreenSubscription=ue,this._vrSubscription=fe,this._vrModeSubscription=pe,this._dataSourceChangedListeners={},this._automaticallyTrackDataSourceClocks=(0,r.Z)(t.automaticallyTrackDataSourceClocks,!0),this._container=e,this._bottomContainer=c,this._element=s,this._cesiumWidget=w,this._selectionIndicator=P,this._infoBox=D,this._dataSourceCollection=E,this._destroyDataSourceCollection=S,this._dataSourceDisplay=x,this._clockViewModel=d,this._destroyClockViewModel=T,this._toolbar=O,this._homeButton=N,this._sceneModePicker=K,this._projectionPicker=te,this._baseLayerPicker=ne,this._navigationHelpButton=re,this._animation=se,this._timeline=ae,this._fullscreenButton=le,this._vrButton=he,this._geocoder=L,this._eventHelper=I,this._lastWidth=0,this._lastHeight=0,this._allowDataSourcesToSuspendAnimation=!0,this._entityView=void 0,this._enableInfoOrSelection=(0,o.Z)(D)||(0,o.Z)(P),this._clockTrackedDataSource=void 0,this._trackedEntity=void 0,this._needTrackedEntityUpdate=!1,this._selectedEntity=void 0,this._zoomIsFlight=!1,this._zoomTarget=void 0,this._zoomPromise=void 0,this._zoomOptions=void 0,this._selectedEntityChanged=new b.Z,this._trackedEntityChanged=new b.Z,M.Z.track(this,["_trackedEntity","_selectedEntity","_clockTrackedDataSource"]),I.add(E.dataSourceAdded,ce.prototype._onDataSourceAdded,this),I.add(E.dataSourceRemoved,ce.prototype._onDataSourceRemoved,this),I.add(C.postUpdate,ce.prototype.resize,this),I.add(C.postRender,ce.prototype._postRender,this);const me=E.length;for(let e=0;e<me;e++)this._dataSourceAdded(E,E.get(e));this._dataSourceAdded(void 0,x.defaultDataSource),I.add(E.dataSourceAdded,ce.prototype._dataSourceAdded,this),I.add(E.dataSourceRemoved,ce.prototype._dataSourceRemoved,this),w.screenSpaceEventHandler.setInputAction((function(e){i.selectedEntity=ie(i,e)}),A.Z.LEFT_CLICK),w.screenSpaceEventHandler.setInputAction((function(e){const t=ie(i,e);(0,o.Z)(t)?v.Z.getValueOrUndefined(t.position,i.clock.currentTime)?i.trackedEntity=t:i.zoomTo(t):(0,o.Z)(i.trackedEntity)&&(i.trackedEntity=void 0)}),A.Z.LEFT_DOUBLE_CLICK)}function le(e,t,n,i){if(!(0,o.Z)(t))throw new h.Z("zoomTarget is required.");de(e);const s=new Promise((t=>{e._completeZoom=function(e){t(e)}}));return e._zoomPromise=s,e._zoomIsFlight=i,e._zoomOptions=n,Promise.resolve(t).then((function(t){if(e._zoomPromise===s)if(t instanceof C.Z){let n;if((0,o.Z)(t.imageryProvider)){let e=Promise.resolve();(0,o.Z)(t.imageryProvider._readyPromise)?e=t.imageryProvider._readyPromise:(0,o.Z)(t.imageryProvider.readyPromise)&&(e=t.imageryProvider.readyPromise),n=e.then((()=>t.getImageryRectangle()))}else n=new Promise((e=>{const n=t.readyEvent.addEventListener((()=>{n(),e(t.getImageryRectangle())}))}));n.then((function(t){return(0,x.Z)(t,e.scene)})).then((function(t){e._zoomPromise===s&&(e._zoomTarget=t)}))}else if(t instanceof I.Z||t instanceof P.Z||t instanceof D.Z)e._zoomTarget=t;else if(t.isLoading&&(0,o.Z)(t.loadingEvent)){const n=t.loadingEvent.addEventListener((function(){n(),e._zoomPromise===s&&(e._zoomTarget=t.entities.values.slice(0))}))}else Array.isArray(t)?e._zoomTarget=t.slice(0):(t=(0,r.Z)(t.values,t),(0,o.Z)(t.entities)&&(t=t.entities.values),Array.isArray(t)?e._zoomTarget=t.slice(0):e._zoomTarget=[t])})),e.scene.requestRender(),s}function ue(e){e._zoomPromise=void 0,e._zoomTarget=void 0,e._zoomOptions=void 0}function de(e){const t=e._zoomPromise;(0,o.Z)(t)&&(ue(e),e._completeZoom(!1))}Object.defineProperties(ce.prototype,{container:{get:function(){return this._container}},creditDisplay:{get:function(){return this._cesiumWidget.creditDisplay}},bottomContainer:{get:function(){return this._bottomContainer}},cesiumWidget:{get:function(){return this._cesiumWidget}},selectionIndicator:{get:function(){return this._selectionIndicator}},infoBox:{get:function(){return this._infoBox}},geocoder:{get:function(){return this._geocoder}},homeButton:{get:function(){return this._homeButton}},sceneModePicker:{get:function(){return this._sceneModePicker}},projectionPicker:{get:function(){return this._projectionPicker}},baseLayerPicker:{get:function(){return this._baseLayerPicker}},navigationHelpButton:{get:function(){return this._navigationHelpButton}},animation:{get:function(){return this._animation}},timeline:{get:function(){return this._timeline}},fullscreenButton:{get:function(){return this._fullscreenButton}},vrButton:{get:function(){return this._vrButton}},dataSourceDisplay:{get:function(){return this._dataSourceDisplay}},entities:{get:function(){return this._dataSourceDisplay.defaultDataSource.entities}},dataSources:{get:function(){return this._dataSourceCollection}},canvas:{get:function(){return this._cesiumWidget.canvas}},scene:{get:function(){return this._cesiumWidget.scene}},shadows:{get:function(){return this.scene.shadowMap.enabled},set:function(e){this.scene.shadowMap.enabled=e}},terrainShadows:{get:function(){return this.scene.globe.shadows},set:function(e){this.scene.globe.shadows=e}},shadowMap:{get:function(){return this.scene.shadowMap}},imageryLayers:{get:function(){return this.scene.imageryLayers}},terrainProvider:{get:function(){return this.scene.terrainProvider},set:function(e){this.scene.terrainProvider=e}},camera:{get:function(){return this.scene.camera}},postProcessStages:{get:function(){return this.scene.postProcessStages}},clock:{get:function(){return this._clockViewModel.clock}},clockViewModel:{get:function(){return this._clockViewModel}},screenSpaceEventHandler:{get:function(){return this._cesiumWidget.screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._cesiumWidget.targetFrameRate},set:function(e){this._cesiumWidget.targetFrameRate=e}},useDefaultRenderLoop:{get:function(){return this._cesiumWidget.useDefaultRenderLoop},set:function(e){this._cesiumWidget.useDefaultRenderLoop=e}},resolutionScale:{get:function(){return this._cesiumWidget.resolutionScale},set:function(e){this._cesiumWidget.resolutionScale=e}},useBrowserRecommendedResolution:{get:function(){return this._cesiumWidget.useBrowserRecommendedResolution},set:function(e){this._cesiumWidget.useBrowserRecommendedResolution=e}},allowDataSourcesToSuspendAnimation:{get:function(){return this._allowDataSourcesToSuspendAnimation},set:function(e){this._allowDataSourcesToSuspendAnimation=e}},trackedEntity:{get:function(){return this._trackedEntity},set:function(e){if(this._trackedEntity!==e){this._trackedEntity=e,de(this);const t=this.scene,n=t.mode;(0,o.Z)(e)&&(0,o.Z)(e.position)?this._needTrackedEntityUpdate=!0:(this._needTrackedEntityUpdate=!1,n!==T.Z.COLUMBUS_VIEW&&n!==T.Z.SCENE2D||(t.screenSpaceCameraController.enableTranslate=!0),n!==T.Z.COLUMBUS_VIEW&&n!==T.Z.SCENE3D||(t.screenSpaceCameraController.enableTilt=!0),this._entityView=void 0,this.camera.lookAtTransform(w.Z.IDENTITY)),this._trackedEntityChanged.raiseEvent(e),this.scene.requestRender()}}},selectedEntity:{get:function(){return this._selectedEntity},set:function(e){if(this._selectedEntity!==e){this._selectedEntity=e;const t=(0,o.Z)(this._selectionIndicator)?this._selectionIndicator.viewModel:void 0;(0,o.Z)(e)?(0,o.Z)(t)&&t.animateAppear():(0,o.Z)(t)&&t.animateDepart(),this._selectedEntityChanged.raiseEvent(e)}}},selectedEntityChanged:{get:function(){return this._selectedEntityChanged}},trackedEntityChanged:{get:function(){return this._trackedEntityChanged}},clockTrackedDataSource:{get:function(){return this._clockTrackedDataSource},set:function(e){this._clockTrackedDataSource!==e&&(this._clockTrackedDataSource=e,re(this._timeline,this.clock,e))}}}),ce.prototype.extend=function(e,t){if(!(0,o.Z)(e))throw new h.Z("mixin is required.");e(this,t)},ce.prototype.resize=function(){const e=this._cesiumWidget,t=this._container,n=t.clientWidth,i=t.clientHeight,r=(0,o.Z)(this._animation),s=(0,o.Z)(this._timeline);if(e.resize(),n===this._lastWidth&&i===this._lastHeight)return;const a=i-125,c=this._baseLayerPickerDropDown;(0,o.Z)(c)&&(c.style.maxHeight=`${a}px`),(0,o.Z)(this._geocoder)&&(this._geocoder.searchSuggestionsContainer.style.maxHeight=`${a}px`),(0,o.Z)(this._infoBox)&&(this._infoBox.viewModel.maxHeight=a);const l=this._timeline;let u,d=0,h=0,f=0;if(r&&"hidden"!==window.getComputedStyle(this._animation.container).visibility){const e=this._lastWidth;u=this._animation.container,n>900?(d=169,e<=900&&(u.style.width="169px",u.style.height="112px",this._animation.resize())):n>=600?(d=136,(e<600||e>900)&&(u.style.width="136px",u.style.height="90px",this._animation.resize())):(d=106,(e>600||0===e)&&(u.style.width="106px",u.style.height="70px",this._animation.resize())),h=d+5}if(s&&"hidden"!==window.getComputedStyle(this._timeline.container).visibility){const e=this._fullscreenButton,t=this._vrButton,n=l.container,i=n.style;f=n.clientHeight+3,i.left=`${d}px`;let r=0;(0,o.Z)(e)&&(r+=e.container.clientWidth),(0,o.Z)(t)&&(r+=t.container.clientWidth),i.right=`${r}px`,l.resize()}this._bottomContainer.style.left=`${h}px`,this._bottomContainer.style.bottom=`${f}px`,this._lastWidth=n,this._lastHeight=i},ce.prototype.forceResize=function(){this._lastWidth=0,this.resize()},ce.prototype.render=function(){this._cesiumWidget.render()},ce.prototype.isDestroyed=function(){return!1},ce.prototype.destroy=function(){let e;this.screenSpaceEventHandler.removeInputAction(A.Z.LEFT_CLICK),this.screenSpaceEventHandler.removeInputAction(A.Z.LEFT_DOUBLE_CLICK);const t=this.dataSources,n=t.length;for(e=0;e<n;e++)this._dataSourceRemoved(t,t.get(e));return this._dataSourceRemoved(void 0,this._dataSourceDisplay.defaultDataSource),this._container.removeChild(this._element),this._element.removeChild(this._toolbar),this._eventHelper.removeAll(),(0,o.Z)(this._geocoder)&&(this._geocoder=this._geocoder.destroy()),(0,o.Z)(this._homeButton)&&(this._homeButton=this._homeButton.destroy()),(0,o.Z)(this._sceneModePicker)&&(this._sceneModePicker=this._sceneModePicker.destroy()),(0,o.Z)(this._projectionPicker)&&(this._projectionPicker=this._projectionPicker.destroy()),(0,o.Z)(this._baseLayerPicker)&&(this._baseLayerPicker=this._baseLayerPicker.destroy()),(0,o.Z)(this._animation)&&(this._element.removeChild(this._animation.container),this._animation=this._animation.destroy()),(0,o.Z)(this._timeline)&&(this._timeline.removeEventListener("settime",ee,!1),this._element.removeChild(this._timeline.container),this._timeline=this._timeline.destroy()),(0,o.Z)(this._fullscreenButton)&&(this._fullscreenSubscription.dispose(),this._element.removeChild(this._fullscreenButton.container),this._fullscreenButton=this._fullscreenButton.destroy()),(0,o.Z)(this._vrButton)&&(this._vrSubscription.dispose(),this._vrModeSubscription.dispose(),this._element.removeChild(this._vrButton.container),this._vrButton=this._vrButton.destroy()),(0,o.Z)(this._infoBox)&&(this._element.removeChild(this._infoBox.container),this._infoBox=this._infoBox.destroy()),(0,o.Z)(this._selectionIndicator)&&(this._element.removeChild(this._selectionIndicator.container),this._selectionIndicator=this._selectionIndicator.destroy()),this._destroyClockViewModel&&(this._clockViewModel=this._clockViewModel.destroy()),this._dataSourceDisplay=this._dataSourceDisplay.destroy(),this._cesiumWidget=this._cesiumWidget.destroy(),this._destroyDataSourceCollection&&(this._dataSourceCollection=this._dataSourceCollection.destroy()),(0,E.Z)(this)},ce.prototype._dataSourceAdded=function(e,t){t.entities.collectionChanged.addEventListener(ce.prototype._onEntityCollectionChanged,this)},ce.prototype._dataSourceRemoved=function(e,t){const n=t.entities;n.collectionChanged.removeEventListener(ce.prototype._onEntityCollectionChanged,this),(0,o.Z)(this.trackedEntity)&&n.getById(this.trackedEntity.id)===this.trackedEntity&&(this.trackedEntity=void 0),(0,o.Z)(this.selectedEntity)&&n.getById(this.selectedEntity.id)===this.selectedEntity&&(this.selectedEntity=void 0)},ce.prototype._onTick=function(e){const t=e.currentTime,n=this._dataSourceDisplay.update(t);this._allowDataSourcesToSuspendAnimation&&(this._clockViewModel.canAnimate=n);const i=this._entityView;if((0,o.Z)(i)){const e=this._trackedEntity;this._dataSourceDisplay.getBoundingSphere(e,!1,K)===S.Z.DONE&&i.update(t,K)}let s,a=!1;const c=this.selectedEntity,l=(0,o.Z)(c)&&this._enableInfoOrSelection;l&&c.isShowing&&c.isAvailable(t)&&(this._dataSourceDisplay.getBoundingSphere(c,!0,K)!==S.Z.FAILED?s=K.center:(0,o.Z)(c.position)&&(s=c.position.getValue(t,s)),a=(0,o.Z)(s));const d=(0,o.Z)(this._selectionIndicator)?this._selectionIndicator.viewModel:void 0;(0,o.Z)(d)&&(d.position=u.Z.clone(s,d.position),d.showSelection=l&&a,d.update());const h=(0,o.Z)(this._infoBox)?this._infoBox.viewModel:void 0;(0,o.Z)(h)&&(h.showInfo=l,h.enableCamera=a,h.isCameraTracking=this.trackedEntity===this.selectedEntity,l?(h.titleText=(0,r.Z)(c.name,c.id),h.description=v.Z.getValueOrDefault(c.description,t,"")):(h.titleText="",h.description=""))},ce.prototype._onEntityCollectionChanged=function(e,t,n){const i=n.length;for(let e=0;e<i;e++){const t=n[e];this.trackedEntity===t&&(this.trackedEntity=void 0),this.selectedEntity===t&&(this.selectedEntity=void 0)}},ce.prototype._onInfoBoxCameraClicked=function(e){if(e.isCameraTracking&&this.trackedEntity===this.selectedEntity)this.trackedEntity=void 0;else{const e=this.selectedEntity.position;(0,o.Z)(e)?this.trackedEntity=this.selectedEntity:this.zoomTo(this.selectedEntity)}},ce.prototype._clearTrackedObject=function(){this.trackedEntity=void 0},ce.prototype._onInfoBoxClockClicked=function(e){this.selectedEntity=void 0},ce.prototype._clearObjects=function(){this.trackedEntity=void 0,this.selectedEntity=void 0},ce.prototype._onDataSourceChanged=function(e){this.clockTrackedDataSource===e&&re(this.timeline,this.clock,e)},ce.prototype._onDataSourceAdded=function(e,t){this._automaticallyTrackDataSourceClocks&&(this.clockTrackedDataSource=t);const n=t.entities.id,i=this._eventHelper.add(t.changedEvent,ce.prototype._onDataSourceChanged,this);this._dataSourceChangedListeners[n]=i},ce.prototype._onDataSourceRemoved=function(e,t){const n=this.clockTrackedDataSource===t,i=t.entities.id;if(this._dataSourceChangedListeners[i](),this._dataSourceChangedListeners[i]=void 0,n){const t=e.length;this._automaticallyTrackDataSourceClocks&&t>0?this.clockTrackedDataSource=e.get(t-1):this.clockTrackedDataSource=void 0}},ce.prototype.zoomTo=function(e,t){return le(this,e,{offset:t},!1)},ce.prototype.flyTo=function(e,t){return le(this,e,t,!0)},ce.prototype._postRender=function(){!function(e){const t=e._zoomTarget;if(!(0,o.Z)(t)||e.scene.mode===T.Z.MORPHING)return;const n=e.scene,s=n.camera,a=(0,r.Z)(e._zoomOptions,{});let c;if(t instanceof I.Z||t instanceof D.Z)return t._readyPromise.then((function(){const n=t.boundingSphere;(0,o.Z)(a.offset)||(a.offset=new O.Z(0,-.5,n.radius)),c={offset:a.offset,duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?s.flyToBoundingSphere(t.boundingSphere,c):(s.viewBoundingSphere(n,a.offset),s.lookAtTransform(w.Z.IDENTITY),e._completeZoom(!0)),ue(e)})).catch((()=>{de(e)}));if(t instanceof P.Z)return t._readyPromise.then((function(){const n=t.boundingSphere;(0,o.Z)(a.offset)||(a.offset=new O.Z(0,-.5,n.radius)),c={offset:a.offset,duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?s.flyToBoundingSphere(n,c):(s.viewBoundingSphere(n,a.offset),s.lookAtTransform(w.Z.IDENTITY),e._completeZoom(!0)),ue(e)}));if(t instanceof L.Z)return c={destination:n.mapProjection.ellipsoid.cartographicToCartesian(t),duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?s.flyTo(c):(s.setView(c),e._completeZoom(!0)),void ue(e);const l=t,u=[];for(let t=0,n=l.length;t<n;t++){const n=e._dataSourceDisplay.getBoundingSphere(l[t],!1,K);if(n===S.Z.PENDING)return;n!==S.Z.FAILED&&u.push(i.Z.clone(K))}if(0===u.length)return void de(e);e.trackedEntity=void 0;const d=i.Z.fromBoundingSpheres(u);e._zoomIsFlight?(ue(e),s.flyToBoundingSphere(d,{duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)},offset:a.offset})):(s.viewBoundingSphere(d,a.offset),s.lookAtTransform(w.Z.IDENTITY),ue(e),e._completeZoom(!0))}(this),function(e){if(!e._needTrackedEntityUpdate)return;const t=e._trackedEntity,n=e.clock.currentTime,i=v.Z.getValueOrUndefined(t.position,n);if(!(0,o.Z)(i))return;const r=e.scene,s=e._dataSourceDisplay.getBoundingSphere(t,!1,K);if(s===S.Z.PENDING)return;const a=r.mode;a!==T.Z.COLUMBUS_VIEW&&a!==T.Z.SCENE2D||(r.screenSpaceCameraController.enableTranslate=!1),a!==T.Z.COLUMBUS_VIEW&&a!==T.Z.SCENE3D||(r.screenSpaceCameraController.enableTilt=!1);const c=s!==S.Z.FAILED?K:void 0;e._entityView=new N.Z(t,r,r.mapProjection.ellipsoid),e._entityView.update(n,c),e._needTrackedEntityUpdate=!1}(this)};const he=ce},818881:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(11020),o=n(765153),r=n(234146),s=n(282910),a=n(689460);const c=function(e,t){if(!(0,i.Z)(e))throw new o.Z("func is required.");t=(0,r.Z)(t,!0);const n=new s.Z,c=new s.Z;function l(){if(!l.canExecute)throw new o.Z("Cannot execute command, canExecute is false.");const t={args:arguments,cancel:!1};let i;return n.raiseEvent(t),t.cancel||(i=e.apply(null,arguments),c.raiseEvent(i)),i}return l.canExecute=t,a.Z.track(l,["canExecute"]),Object.defineProperties(l,{beforeExecute:{value:n},afterExecute:{value:c}}),l}},294798:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(689460);const o=function(e,t,n,o,r){return n.call(o,e[t]),i.Z.getObservable(e,t).subscribe(n,o,r)}},736194:(e,t,n)=>{"use strict";n.d(t,{oY:()=>o,kX:()=>u});var i,o={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Bounce.In(2*e):.5*o.Bounce.Out(2*e-1)+.5}}},r="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},s=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=r()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]],s=!t;o&&!1===o.update(e,s)&&!t&&delete this._tweens[n[i]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),a={Linear:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=a.Utils.Linear;return t<0?r(e[0],e[1],i):t>1?r(e[n],e[n-1],n-i):r(e[o],e[o+1>n?n:o+1],i-o)},Bezier:function(e,t){for(var n=0,i=e.length-1,o=Math.pow,r=a.Utils.Bernstein,s=0;s<=i;s++)n+=o(1-t,i-s)*o(t,s)*e[s]*r(i,s);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=a.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(o=Math.floor(i=n*(1+t))),r(e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n],i-o)):t<0?e[0]-(r(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(r(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):r(e[o?o-1:0],e[o],e[n<o+1?n:o+1],e[n<o+2?n:o+2],i-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=a.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(i=[1],function(e){var t=1;if(i[e])return i[e];for(var n=e;n>1;n--)t*=n;return i[e]=t,t}),CatmullRom:function(e,t,n,i,o){var r=.5*(n-e),s=.5*(i-t),a=o*o;return(2*t-2*n+r+s)*(o*a)+(-3*t+3*n-2*r-s)*a+r*o+t}}},c=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),l=new s,u=function(){function e(e,t){void 0===t&&(t=l),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=o.Linear.None,this._interpolationFunction=a.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=c.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?r()+parseFloat(e):e:r(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,i){for(var o in n){var r=e[o],s=Array.isArray(r),a=s?"array":typeof r,c=!s&&Array.isArray(n[o]);if("undefined"!==a&&"function"!==a){if(c){var l=n[o];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,r)),n[o]=[r].concat(l)}if("object"!==a&&!s||!r||c)void 0===t[o]&&(t[o]=r),s||(t[o]*=1),i[o]=c?n[o].slice().reverse():t[o]||0;else{for(var u in t[o]=s?[]:{},r)t[o][u]=r[u];i[o]=s?[]:{},this._setupProperties(r,t[o],n[o],i[o])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=r()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=r()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=r()),void 0===t&&(t=!0),this._isPaused)return!0;var n,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var s=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,s),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,c=this._chainedTweens.length;a<c;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,i){for(var o in n)if(void 0!==t[o]){var r=t[o]||0,s=n[o],a=Array.isArray(e[o]),c=Array.isArray(s);!a&&c?e[o]=this._interpolationFunction(s,i):"object"==typeof s&&s?this._updateProperties(e[o],r,s,i):"number"==typeof(s=this._handleRelativeValue(r,s))&&(e[o]=r+(s-r)*i)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),d=(c.nextId,l);d.getAll.bind(d),d.removeAll.bind(d),d.add.bind(d),d.remove.bind(d),d.update.bind(d)},509187:e=>{"use strict";function t(e,t,i){i=i||2;var r,s,a,c,d,h,p,m=t&&t.length,_=m?t[0]*i:e.length,g=n(e,0,_,i,!0),Z=[];if(!g||g.next===g.prev)return Z;if(m&&(g=function(e,t,i,o){var r,s,a,c=[];for(r=0,s=t.length;r<s;r++)(a=n(e,t[r]*o,r<s-1?t[r+1]*o:e.length,o,!1))===a.next&&(a.steiner=!0),c.push(f(a));for(c.sort(l),r=0;r<c.length;r++)i=u(c[r],i);return i}(e,t,g,i)),e.length>80*i){r=a=e[0],s=c=e[1];for(var y=i;y<_;y+=i)(d=e[y])<r&&(r=d),(h=e[y+1])<s&&(s=h),d>a&&(a=d),h>c&&(c=h);p=0!==(p=Math.max(a-r,c-s))?32767/p:0}return o(g,Z,i,r,s,p,0),Z}function n(e,t,n,i,o){var r,s;if(o===S(e,t,n,i)>0)for(r=t;r<n;r+=i)s=T(r,e[r],e[r+1],s);else for(r=n-i;r>=t;r-=i)s=T(r,e[r],e[r+1],s);return s&&g(s,s.next)&&(w(s),s=s.next),s}function i(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!g(i,i.next)&&0!==_(i.prev,i,i.next))i=i.next;else{if(w(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function o(e,t,n,l,u,d,f){if(e){!f&&d&&function(e,t,n,i){var o=e;do{0===o.z&&(o.z=h(o.x,o.y,t,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,i,o,r,s,a,c,l=1;do{for(n=e,e=null,r=null,s=0;n;){for(s++,i=n,a=0,t=0;t<l&&(a++,i=i.nextZ);t++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||n.z<=i.z)?(o=n,n=n.nextZ,a--):(o=i,i=i.nextZ,c--),r?r.nextZ=o:e=o,o.prevZ=r,r=o;n=i}r.nextZ=null,l*=2}while(s>1)}(o)}(e,l,u,d);for(var p,m,_=e;e.prev!==e.next;)if(p=e.prev,m=e.next,d?s(e,l,u,d):r(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(m.i/n|0),w(e),e=m.next,_=m.next;else if((e=m)===_){f?1===f?o(e=a(i(e),t,n),t,n,l,u,d,2):2===f&&c(e,t,n,l,u,d):o(i(e),t,n,l,u,d,1);break}}}function r(e){var t=e.prev,n=e,i=e.next;if(_(t,n,i)>=0)return!1;for(var o=t.x,r=n.x,s=i.x,a=t.y,c=n.y,l=i.y,u=o<r?o<s?o:s:r<s?r:s,d=a<c?a<l?a:l:c<l?c:l,h=o>r?o>s?o:s:r>s?r:s,f=a>c?a>l?a:l:c>l?c:l,m=i.next;m!==t;){if(m.x>=u&&m.x<=h&&m.y>=d&&m.y<=f&&p(o,a,r,c,s,l,m.x,m.y)&&_(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function s(e,t,n,i){var o=e.prev,r=e,s=e.next;if(_(o,r,s)>=0)return!1;for(var a=o.x,c=r.x,l=s.x,u=o.y,d=r.y,f=s.y,m=a<c?a<l?a:l:c<l?c:l,g=u<d?u<f?u:f:d<f?d:f,Z=a>c?a>l?a:l:c>l?c:l,y=u>d?u>f?u:f:d>f?d:f,b=h(m,g,t,n,i),v=h(Z,y,t,n,i),A=e.prevZ,T=e.nextZ;A&&A.z>=b&&T&&T.z<=v;){if(A.x>=m&&A.x<=Z&&A.y>=g&&A.y<=y&&A!==o&&A!==s&&p(a,u,c,d,l,f,A.x,A.y)&&_(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,T.x>=m&&T.x<=Z&&T.y>=g&&T.y<=y&&T!==o&&T!==s&&p(a,u,c,d,l,f,T.x,T.y)&&_(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;A&&A.z>=b;){if(A.x>=m&&A.x<=Z&&A.y>=g&&A.y<=y&&A!==o&&A!==s&&p(a,u,c,d,l,f,A.x,A.y)&&_(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;T&&T.z<=v;){if(T.x>=m&&T.x<=Z&&T.y>=g&&T.y<=y&&T!==o&&T!==s&&p(a,u,c,d,l,f,T.x,T.y)&&_(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function a(e,t,n){var o=e;do{var r=o.prev,s=o.next.next;!g(r,s)&&Z(r,o,o.next,s)&&v(r,s)&&v(s,r)&&(t.push(r.i/n|0),t.push(o.i/n|0),t.push(s.i/n|0),w(o),w(o.next),o=e=s),o=o.next}while(o!==e);return i(o)}function c(e,t,n,r,s,a){var c=e;do{for(var l=c.next.next;l!==c.prev;){if(c.i!==l.i&&m(c,l)){var u=A(c,l);return c=i(c,c.next),u=i(u,u.next),o(c,t,n,r,s,a,0),void o(u,t,n,r,s,a,0)}l=l.next}c=c.next}while(c!==e)}function l(e,t){return e.x-t.x}function u(e,t){var n=function(e,t){var n,i=t,o=e.x,r=e.y,s=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var a=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=o&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===o))return n}i=i.next}while(i!==t);if(!n)return null;var c,l=n,u=n.x,h=n.y,f=1/0;i=n;do{o>=i.x&&i.x>=u&&o!==i.x&&p(r<h?o:s,r,u,h,r<h?s:o,r,i.x,i.y)&&(c=Math.abs(r-i.y)/(o-i.x),v(i,e)&&(c<f||c===f&&(i.x>n.x||i.x===n.x&&d(n,i)))&&(n=i,f=c)),i=i.next}while(i!==l);return n}(e,t);if(!n)return t;var o=A(n,e);return i(o,o.next),i(n,n.next)}function d(e,t){return _(e.prev,e,t.prev)<0&&_(t.next,e,e.next)<0}function h(e,t,n,i,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,i,o,r,s,a){return(o-s)*(t-a)>=(e-s)*(r-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(r-a)>=(o-s)*(i-a)}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Z(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(v(e,t)&&v(t,e)&&function(e,t){var n=e,i=!1,o=(e.x+t.x)/2,r=(e.y+t.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(_(e.prev,e,t.prev)||_(e,t.prev,t))||g(e,t)&&_(e.prev,e,e.next)>0&&_(t.prev,t,t.next)>0)}function _(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function Z(e,t,n,i){var o=b(_(e,t,n)),r=b(_(e,t,i)),s=b(_(n,i,e)),a=b(_(n,i,t));return o!==r&&s!==a||!(0!==o||!y(e,n,t))||!(0!==r||!y(e,i,t))||!(0!==s||!y(n,e,i))||!(0!==a||!y(n,t,i))}function y(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function b(e){return e>0?1:e<0?-1:0}function v(e,t){return _(e.prev,e,e.next)<0?_(e,t,e.next)>=0&&_(e,e.prev,t)>=0:_(e,t,e.prev)<0||_(e,e.next,t)<0}function A(e,t){var n=new E(e.i,e.x,e.y),i=new E(t.i,t.x,t.y),o=e.next,r=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function T(e,t,n,i){var o=new E(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function w(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function E(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(e,t,n,i){for(var o=0,r=t,s=n-i;r<n;r+=i)o+=(e[s]-e[r])*(e[r+1]+e[s+1]),s=r;return o}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,i){var o=t&&t.length,r=o?t[0]*n:e.length,s=Math.abs(S(e,0,r,n));if(o)for(var a=0,c=t.length;a<c;a++){var l=t[a]*n,u=a<c-1?t[a+1]*n:e.length;s-=Math.abs(S(e,l,u,n))}var d=0;for(a=0;a<i.length;a+=3){var h=i[a]*n,f=i[a+1]*n,p=i[a+2]*n;d+=Math.abs((e[h]-e[p])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[p+1]-e[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,o=0;o<e.length;o++){for(var r=0;r<e[o].length;r++)for(var s=0;s<t;s++)n.vertices.push(e[o][r][s]);o>0&&(i+=e[o-1].length,n.holes.push(i))}return n}},556126:(e,t,n)=>{const{webm:i,mp4:o}=n(377505),r=()=>"undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,s=()=>"wakeLock"in navigator;e.exports=class{constructor(){if(this.enabled=!1,s()){this._wakeLock=null;const e=()=>{null!==this._wakeLock&&"visible"===document.visibilityState&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else r()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",i),this._addSourceToVideo(this.noSleepVideo,"mp4",o),this.noSleepVideo.addEventListener("loadedmetadata",(()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",(()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}))})))}_addSourceToVideo(e,t,n){var i=document.createElement("source");i.src=n,i.type=`video/${t}`,e.appendChild(i)}get isEnabled(){return this.enabled}enable(){return s()?navigator.wakeLock.request("screen").then((e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",(()=>{console.log("Wake Lock released.")}))})).catch((e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e})):r()?(this.disable(),console.warn("\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      "),this.noSleepTimer=window.setInterval((()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))}),15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then((e=>(this.enabled=!0,e))).catch((e=>{throw this.enabled=!1,e}))}disable(){s()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):r()?this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}},377505:e=>{e.exports={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}}}]);